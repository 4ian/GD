{"version":3,"sources":["UI/IconButton.js","UI/AcceleratorString.js","UI/Theme/ThemeConsumer.js","UI/SemiControlledTextField.js","MainFrame/AboutDialog.js","UI/HelpButton/index.js","ResourcesLoader/index.js","VariablesList/VariableRow.js","Utils/SelectionHandler.js","Utils/Serializer.js","VariablesList/ClipboardKind.js","UI/SelectField.js","UI/SelectOption.js","EventsSheet/EventsTree/ClassNames.js","UI/Background.js","UI/Layout.js","MainFrame/Preferences/PreferencesContext.js","UI/AlertMessage.js","Utils/NewNameGenerator.js","UI/ListIcon.js","UI/PlaceholderLoader.js","UI/Checkbox.js","PlatformSpecificAssetsEditor/PlatformSpecificAssetsDialog.js","PlatformSpecificAssetsEditor/ImageResizer.js","UI/LoaderModal.js","UI/CloseConfirmDialog.js","UI/ClosableTabs.js","MainFrame/EditorTabsHandler.js","EventsSheet/EventsTree/index.js","UI/Menu/ElementWithMenu.js","UI/SearchBar.js","GameEngineFinder/LocalGDJSFinder.js","EventsSheet/EventsTree/Renderers/StandardEvent.js","EventsSheet/EventsTree/Instruction.js","EventsSheet/ParameterFields/RelationalOperatorField.js","EventsSheet/ParameterFields/OperatorField.js","EventsSheet/ParameterFields/MouseField.js","EventsSheet/ParameterFields/KeyField.js","ObjectsRendering/Renderers/RenderedUnknownInstance.js","UI/SemiControlledAutoComplete.js","UI/Table.js","UI/MiniToolbar.js","ObjectsRendering/Renderers/RenderedSpriteInstance.js","ObjectsRendering/Renderers/RenderedTiledSpriteInstance.js","ObjectsRendering/Renderers/RenderedPanelSpriteInstance.js","ObjectsRendering/Renderers/RenderedTextInstance.js","ObjectsRendering/Renderers/RenderedShapePainterInstance.js","ObjectsRendering/Renderers/RenderedTextEntryInstance.js","ObjectsRendering/Renderers/RenderedParticleEmitterInstance.js","ObjectsRendering/Renderers/RenderedSkeletonInstance.js","Utils/FontFaceLoader.js","EventsSheet/ParameterFields/YesNoField.js","EventsSheet/ParameterFields/TrueFalseField.js","EventsSheet/ParameterFields/ExpressionField.js","EventsSheet/InstructionEditor/InstructionOrExpressionSelector/ExpressionSelector.js","EventsSheet/ParameterFields/GenericExpressionField/BackgroundHighlighting.js","ExpressionAutocompletion/index.js","EventsSheet/ParameterFields/GenericExpressionField/ExpressionAutocompletionsHandler.js","EventsSheet/ParameterFields/GenericExpressionField/ExpressionAutocompletionsDisplayer.js","EventsSheet/ParameterFields/StringField.js","EventsSheet/ParameterFields/StringWithSelectorField.js","EventsSheet/ParameterFields/BehaviorField.js","EventsSheet/ParameterFields/SceneVariableField.js","EventsSheet/ParameterFields/GlobalVariableField.js","EventsSheet/ParameterFields/ObjectVariableField.js","EventsSheet/ParameterFields/LayerField.js","EventsSheet/ParameterFields/AudioResourceField.js","EventsSheet/ParameterFields/VideoResourceField.js","EventsSheet/ParameterFields/JsonResourceField.js","EventsSheet/ParameterFields/ColorExpressionField.js","EventsSheet/ParameterFields/ForceMultiplierField.js","EventsSheet/ParameterFields/SceneNameField.js","EventsSheet/EventsTree/InvalidParameterValue.js","EventsSheet/EventsTree/MissingParameterValue.js","EventsSheet/EventsTree/Renderers/GroupEvent.js","EventsSheet/EventsTree/Renderers/CommentEvent.js","EventsSheet/EventsTree/Renderers/ForEachEvent.js","EventsSheet/EventsTree/Renderers/RepeatEvent.js","EventsSheet/EventsTree/Renderers/WhileEvent.js","EventsSheet/EventsTree/Renderers/LinkEvent.js","UI/Reponsive/ResponsiveWindowMeasurer.js","EventsSheet/ParameterFields/ExternalEventsField.js","EventsSheet/EventsTree/Renderers/JsCodeEvent.js","EventsSheet/EventsTree/EventHeightsCache.js","Utils/CaseSensitiveSlug.js","EventsSheet/InstructionEditor/NewInstructionEditorMenu.js","EventsSheet/InstructionEditor/EventTextDialog.js","EventsSheet/Toolbar.js","UI/KeyboardShortcuts/index.js","EventsSheet/InlineParameterEditor.js","EventsSheet/EmptyEventsPlaceholder.js","EventsSheet/OnceInstructionSanitizer.js","EventsSheet/EventsContextAnalyzerDialog.js","EventsSheet/SearchPanel.js","EventsSheet/EventsSearcher.js","EventsSheet/ContainsSubInstruction.js","UI/Tabs.js","EventsSheet/EnumerateEventsMetadata.js","EventsSheet/EventsFunctionExtractor/EventsFunctionExtractorDialog.js","Utils/GetObjectGroupByName.js","BehaviorTypeSelector/index.js","UI/BackgroundText.js","UI/Subheader.js","ObjectsRendering/ObjectsRenderingService.js","Utils/GDevelopServices/Build.js","EventsFunctionsExtensionEditor/index.js","EventsFunctionsExtensionEditor/EventsFunctionConfigurationEditor/index.js","ObjectGroupsList/ObjectGroupsListWithObjectGroupEditor.js","ObjectGroupEditor/index.js","EventsFunctionsExtensionEditor/OptionsEditorDialog.js","EventsBasedBehaviorEditor/EventsBasedBehaviorEditorDialog.js","EventsBasedBehaviorEditor/index.js","EventsBasedBehaviorEditor/EventsBasedBehaviorPropertiesEditor.js","EventsFunctionsExtensionEditor/BehaviorMethodSelectorDialog.js","EventsFunctionsExtensionEditor/ExtensionFunctionSelectorDialog.js","UI/EditorMosaic/EditorNavigator.js","EventsFunctionsExtensionEditor/ChooseEventsFunctionsExtensionEditor.js","InstancesEditor/InstancesRenderer/LayerRenderer.js","InstancesEditor/InstancesRenderer/PixiDoubleClickEvent.js","InstancesEditor/SelectionRectangle.js","InstancesEditor/InstancesAdder.js","InstancesEditor/InstancePropertiesEditor/index.js","InstancesEditor/InstancesList/index.js","LayersList/LayerRemoveDialog.js","ObjectEditor/ObjectEditorDialog.js","ObjectEditor/Editors/TextEditor.js","ObjectEditor/Editors/TiledSpriteEditor.js","ObjectsList/EnumerateObjects.js","ObjectEditor/Editors/PanelSpriteEditor.js","ObjectEditor/Editors/SpriteEditor/index.js","ObjectEditor/Editors/SpriteEditor/SpritesList.js","ObjectEditor/Editors/SpriteEditor/PointsEditor/index.js","ObjectsRendering/Renderers/RenderedInstance.js","ObjectEditor/Editors/SpriteEditor/PointsEditor/PointsList.js","ObjectEditor/Editors/SpriteEditor/PointsEditor/PointRow.js","ObjectEditor/Editors/SpriteEditor/PointsEditor/AddPointRow.js","ObjectEditor/Editors/SpriteEditor/PointsEditor/PointsPreview.js","ObjectEditor/Editors/SpriteEditor/CollisionMasksEditor/index.js","ObjectEditor/Editors/SpriteEditor/CollisionMasksEditor/PolygonsList.js","ObjectEditor/Editors/SpriteEditor/CollisionMasksEditor/VerticeRow.js","ObjectEditor/Editors/SpriteEditor/CollisionMasksEditor/PolygonRow.js","ObjectEditor/Editors/SpriteEditor/CollisionMasksEditor/AddVerticeRow.js","ObjectEditor/Editors/SpriteEditor/CollisionMasksEditor/AddPolygonRow.js","ObjectEditor/Editors/SpriteEditor/CollisionMasksEditor/CollisionMasksPreview.js","ObjectEditor/Editors/EmptyEditor.js","ObjectEditor/Editors/ShapePainterEditor.js","ObjectEditor/Editors/ParticleEmitterEditor.js","ObjectEditor/Editors/ObjectPropertiesEditor.js","BehaviorsEditor/index.js","BehaviorsEditor/NewBehaviorDialog.js","BehaviorsEditor/BehaviorsHelpPagePaths.js","SceneEditor/SetupGridDialog.js","MainFrame/Editors/BaseEditor.js","SceneEditor/Toolbar.js","UI/FullSizeMeasurer.js","InstancesEditor/ScrollbarContainer.js","UI/EditorMosaic/TagsButton.js","ResourcesList/index.js","ResourcesList/EnumerateResources.js","UI/ErrorBoundary.js","MainFrame/Preferences/LanguageDialog.js","locales/LocalesMetadata.js","ProjectsStorage/OpenFromStorageProviderDialog.js","ProjectsStorage/SaveToStorageProviderDialog.js","ProjectsStorage/OpenConfirmDialog.js","ProjectsStorage/ProjectContentChecker.js","ProjectCreation/ExamplesSearchbar.js","Utils/i18n/GDI18nProvider.js","locales lazy /^/.//.*//messages$/ groupOptions: {} namespace object","UI/MarkdownText.js","Utils/HelpLink.js","VariablesList/VariablesEditorDialog.js","Utils/Clipboard.js","UI/DismissableAlertMessage.js","ResourcesList/ResourceUtils.js","UI/PlaceholderMessage.js","UI/RaisedButtonWithMenu.js","ResourcesList/ResourceSelector.js","UI/KeyboardShortcuts/DeprecatedKeyboardShortcuts.js","InstancesEditor/InstancesRenderer/index.js","Utils/TransformRect.js","InstancesEditor/SelectedInstances.js","InstancesEditor/HighlightedInstance.js","InstancesEditor/InstancesResizer.js","InstancesEditor/InstancesRotator.js","InstancesEditor/InstancesMover.js","InstancesEditor/Grid.js","InstancesEditor/WindowBorder.js","InstancesEditor/WindowMask.js","InstancesEditor/BackgroundColor.js","InstancesEditor/FpsLimiter.js","Utils/PIXITicker.js","InstancesEditor/StatusBar.js","InstancesEditor/CanvasCursor.js","InstancesEditor/index.js","LayersList/styles.js","EffectsList/EnumerateEffects.js","EffectsList/index.js","EffectsList/EffectsListDialog.js","LayersList/BackgroundColorRow.js","LayersList/index.js","LayersList/LayerRow.js","UI/GravatarUrl.js","Profile/ProfileDetails.js","Profile/UsagesDetails.js","Profile/SubscriptionDetails.js","Profile/ProfileDialog.js","BehaviorsEditor/Editors/BehaviorPropertiesEditor.js","BehaviorsEditor/Editors/Physics2Editor/ShapePreview.js","BehaviorsEditor/Editors/Physics2Editor/PolygonEditor.js","BehaviorsEditor/Editors/Physics2Editor/index.js","BehaviorsEditor/BehaviorsEditorService.js","ProjectManager/ProjectPropertiesDialog.js","ExtensionsSearch/ExtensionsSearchDialog.js","UI/CustomSvgIcons/VariableTree.js","ProjectManager/index.js","MainFrame/Editors/StartPage/GDevelopLogo.js","MainFrame/Editors/StartPage/ScrollBackground.js","MainFrame/Editors/StartPage/index.js","UI/ToolbarIcon.js","EventsSheet/InstructionEditor/InstructionOrExpressionSelector/InstructionSelector.js","EventsSheet/InstructionEditor/index.js","EventsSheet/InstructionEditor/InstructionEditorDialog.js","UI/CustomSvgIcons/Copy.js","UI/CustomSvgIcons/Paste.js","VariablesList/EditVariableRow.js","HelpFinder/DocSearchArea.js","HelpFinder/index.js","Profile/SubscriptionPendingDialog.js","Profile/SubscriptionDialog.js","MainFrame/Changelog/ChangelogDialog.js","MainFrame/Changelog/ChangelogDialogContainer.js","UI/Reponsive/ResponsiveWidthMeasurer.js","EventsSheet/InstructionEditor/NewInstructionEditorDialog.js","EventsFunctionsList/index.js","EventsFunctionsList/EnumerateEventsFunctions.js","EventsBasedBehaviorsList/index.js","EventsBasedBehaviorsList/EnumerateEventsBasedBehaviors.js","ObjectEditor/Editors/SpriteEditor/AnimationPreview/index.js","ObjectEditor/Editors/SpriteEditor/DirectionTools.js","EventsSheet/EventsTree/Renderers/UnknownEvent.js","EventsSheet/EventsTree/EventsRenderingService.js","CodeEditor/LocalCodeEditorAutocompletions.js","CodeEditor/index.js","EventsSheet/ParameterFields/GenericExpressionField/ExpressionParametersEditor.js","EventsSheet/ParameterFields/GenericExpressionField/ExpressionParametersEditorDialog.js","PropertiesEditor/index.js","Utils/ColorTransformer.js","Utils/TagsHelper.js","EventsSheet/InstructionEditor/SelectorListItems/Keys.js","EventsFunctionsExtensionsLoader/index.js","UI/Toolbar.js","UI/Theme/ThemeContext.js","UI/ToolbarSeparator.js","MainFrame/UnsavedChangesContext.js","UI/Toggle.js","Profile/UserProfileContext.js","UI/LeftLoader.js","EventsFunctionsExtensionsLoader/EventsFunctionsExtensionsContext.js","UI/ColorField/ColorPicker.js","PropertiesEditor/PropertiesMapToSchema.js","EventsSheet/EventsTree/InstructionsList.js","InstructionOrExpression/CreateTree.js","InstructionOrExpression/EnumerateInstructions.js","UI/ScrollView.js","EventsSheet/InlinePopover.js","MainFrame/Toolbar/PreviewButtons.js","UI/Reponsive/ScreenTypeMeasurer.js","ResourcesList/ResourcePreview/ImagePreview.js","ObjectEditor/Editors/SpriteEditor/Utils/SpriteObjectHelper.js","ObjectEditor/Editors/SpriteEditor/CollisionMasksEditor/styles.js","UI/Menu/ElectronMenuImplementation.js","UI/Menu/MaterialUIMenuImplementation.js","UI/Menu/ContextMenu.js","ProjectManager/EnumerateProjectItems.js","UI/ColorField/index.js","UI/InlineCheckbox.js","EventsSheet/SelectionHandler.js","EventsSheet/ParameterFields/GenericExpressionField/index.js","EventsSheet/InstructionEditor/InstructionOrExpressionSelector/index.js","InstructionOrExpression/EnumeratedInstructionOrExpressionMetadata.js","EventsSheet/EventsTree/ConditionsActionsColumns.js","Utils/GetObjectByName.js","Hints/index.js","EventsFunctionsExtensionsLoader/MetadataDeclarationHelpers.js","UI/EditorMosaic/index.js","ObjectEditor/ObjectsEditorService.js","Utils/GDevelopServices/Usage.js","UI/SortableVirtualizedItemList/ItemRow.js","UI/SortableVirtualizedItemList/DropIndicator.js","UI/SortableVirtualizedItemList/index.js","ResourcesList/ResourceThumbnail/index.js","ResourcesList/ResourceSelectorWithThumbnail.js","UI/ListCommonItem.js","Utils/SerializableObjectEditorContainer.js","UI/TreeTable/index.js","UI/DragHandle.js","Profile/SubscriptionChecker.js","EventsSheet/index.js","EventsSheet/ParameterRenderingService.js","EventsSheet/ParameterFields/ObjectField.js","ObjectsRendering/Renderers/RenderedIconInstance.js","UI/Button.js","EventsSheet/ParameterFields/GenericExpressionField/FormatExpressionCall.js","EventsSheet/InstructionEditor/InstructionParametersEditor.js","EventsSheet/InstructionEditor/NewInstructionEditor.js","Utils/UseForceUpdate.js","UI/Messages/InfoBar.js","InstancesEditor/ViewPosition.js","SceneEditor/InstancesSelection.js","ObjectEditor/Editors/SpriteEditor/PointsEditor/styles.js","Utils/TimestampedId.js","EventsSheet/ParameterFields/EnumerateVariables.js","EventsSheet/ParameterFields/VariableField.js","MainFrame/index.js","UI/Theme/DefaultTheme/index.js","MainFrame/UpdaterTools.js","UI/HelpIcon/index.js","VariablesList/index.js","VariablesList/styles.js","ProjectManager/ProjectErrorsChecker.js","UI/SearchbarWithChips.js","SceneEditor/ScenePropertiesDialog.js","Utils/IsNullPtr.js","SceneEditor/SceneVariablesDialog.js","ResourcesList/ResourceThumbnail/ImageThumbnail.js","UI/EditorBar.js","Profile/CreateProfile.js","MainFrame/Editors/EventsEditor.js","EventsSheet/EventsTree/DropIndicator.js","UI/Grid.js","EventsSheet/ParameterFields/DefaultField.js","ObjectsList/ObjectSelector.js","ObjectsRendering/PixiResourcesLoader.js","EventsSheet/ParameterFields/ParameterFieldCommons.js","InstructionOrExpression/EnumerateExpressions.js","EventsSheet/InstructionEditor/SelectorListItems/SelectorInstructionOrExpressionListItem.js","EventsSheet/InstructionEditor/SelectorListItems/SelectorInstructionsTreeListItem.js","EventsSheet/ParameterFields/ParameterMetadataTools.js","Utils/StringHelpers.js","UI/DragAndDrop/DragSourceAndDropTarget.js","EventsSheet/ClipboardKind.js","UI/DragAndDrop/DropTarget.js","UI/TagChips.js","UI/Reponsive/SelectColumns.js","UI/FlatButton.js","Utils/History.js","EventsSheet/EventsFunctionExtractor/index.js","EventsFunctionsExtensionEditor/EventsFunctionConfigurationEditor/EventsFunctionParametersEditor.js","ObjectTypeSelector/index.js","BehaviorsEditor/EnumerateBehaviorsMetadata.js","EventsFunctionsExtensionEditor/EventsFunctionConfigurationEditor/EventsFunctionPropertiesEditor.js","UI/Text.js","UI/RaisedButton.js","UI/EditorMosaic/CloseButton.js","UI/Dialog/index.js","MainFrame/Editors/EventsFunctionsExtensionEditor.js","ObjectGroupEditor/ObjectGroupEditorDialog.js","UI/CustomSvgIcons/Behaviors/Create.js","UI/CustomSvgIcons/Behaviors/Step.js","UI/CustomSvgIcons/Behaviors/Destroy.js","UI/CustomSvgIcons/Behaviors/Function.js","UI/CustomSvgIcons/Behaviors/Activate.js","UI/CustomSvgIcons/Behaviors/Deactivate.js","MainFrame/Editors/ExternalEventsEditor.js","MainFrame/Editors/LayoutChooserDialog.js","MainFrame/Editors/ExternalLayoutEditor.js","SceneEditor/index.js","InstancesEditor/PinchHandler.js","Utils/GridHelpers.js","LayersList/EnumerateLayers.js","ObjectEditor/Editors/SpriteEditor/Utils/SpriteSelector.js","MainFrame/Editors/SceneEditor.js","Utils/TimeFunction.js","Utils/i18n/getTranslationFunction.js","ProjectCreation/ExamplesInformation.js","Export/GenericExporters/CordovaExport.js","Export/GenericExporters/ElectronExport.js","Export/GenericExporters/HTML5Export.js","Export/GenericExporters/Cocos2dExport.js","Utils/MapFor.js","Export/GenericExporters/FacebookInstantGamesExport.js","Export/GenericExporters/OnlineCordovaExport.js","Export/GenericExporters/OnlineElectronExport.js","Export/GenericExporters/OnlineWebExport.js","UI/CustomSvgIcons/Facebook.js","UI/CustomSvgIcons/Cordova.js","UI/CustomSvgIcons/Chrome.js","JsExtensionsLoader/index.js","ProjectsStorage/ProjectStorageProviders.js","Debugger/Toolbar.js","Debugger/InspectorsList.js","Debugger/Inspectors/VariablesContainerInspector.js","Debugger/Inspectors/RuntimeObjectInspector.js","Debugger/Inspectors/RuntimeSceneInspector.js","Debugger/GDJSInspectorDescriptions.js","Debugger/Inspectors/RawContentInspector.js","Debugger/Profiler/MeasuresTable.js","Debugger/Profiler/index.js","Debugger/DebuggerContent.js","Debugger/DebuggerSelector.js","Debugger/index.js","MainFrame/Editors/DebuggerEditor.js","Export/Builds/BuildProgress.js","Export/Builds/BuildsList.js","Utils/Delay.js","Export/Builds/BuildsWatcher.js","Export/Builds/index.js","Export/Builds/BuildsDialog.js","Profile/LimitDisplayer.js","Export/Builds/BuildStepsProgress.js","Export/ExportLauncher.js","Utils/OnlineStatus.js","Export/ExportDialog.js","UI/DragAndDrop/DragAndDropContextProvider.js","UI/RightLoader.js","Profile/CreateAccountDialog.js","Profile/LoginDialog.js","Utils/WatchPromiseInState.js","Profile/UserProfileProvider.js","MainFrame/Preferences/PreferencesProvider.js","EventsFunctionsExtensionsLoader/EventsFunctionsExtensionsProvider.js","MainFrame/Providers.js","CodeEditor/Theme/TomorrowNight.js","CodeEditor/Theme/Monokai.js","CodeEditor/Theme/Tomorrow.js","CodeEditor/Theme/SolarizedDark.js","CodeEditor/Theme/SolarizedLight.js","CodeEditor/Theme/VibrantInk.js","CodeEditor/Theme/GitHub.js","CodeEditor/Theme/index.js","UI/EmptyMessage.js","ResourcesList/ResourcePreview/GenericIconPreview.js","ResourcesList/ResourcePreview/index.js","ResourcesEditor/ResourcePropertiesEditor/index.js","ResourcesEditor/Toolbar.js","ResourcesEditor/index.js","MainFrame/Editors/ResourcesEditor.js","Utils/GDevelopServices/Extension.js","UI/PlaceholderError.js","ExtensionsSearch/ExtensionInstallDialog.js","ExtensionsSearch/index.js","ObjectsList/NewObjectDialog.js","UI/EditTagsDialog.js","ObjectsList/index.js","ObjectsList/ClipboardKind.js","MainFrame/Changelog/ChangelogRenderer.js","Utils/GDevelopServices/Release.js","MainFrame/Changelog/index.js","EventsSheet/InstructionEditor/InstructionOrObjectSelector.js","EventsSheet/InstructionEditor/SelectorListItems/SelectorObjectListItem.js","EventsSheet/InstructionEditor/SelectorListItems/SelectorGroupObjectsListItem.js","ProjectCreation/Tutorials.js","ProjectCreation/CreateProjectDialog.js","UI/Theme/DarkTheme/index.js","UI/Theme/index.js","ProjectCreation/ExamplesList.js","Utils/FuzzyOrEmptyFilter.js","ObjectGroupsList/GroupRow.js","ObjectGroupsList/index.js","UI/TextField.js","MainFrame/Toolbar.js","UI/List.js","MainFrame/ProjectTitlebar.js","MainFrame/Preferences/PreferencesDialog.js"],"names":["IconButton","React","render","this","props","tooltip","acceleratorString","otherProps","iconButton","disabled","i18n","Tooltip","title","_","accelerator","isMobile","isMacLike","replace","placement","enterDelay","ThemeConsumer","Consumer","gdevelopTheme","children","SemiControlledTextField","state","focused","text","_field","forceSetValue","setState","forceSetSelection","selectionStart","selectionEnd","input","getInputNode","focus","value","onChange","commitOnBlur","onFocus","onBlur","type","ref","field","event","newValue","currentTarget","styles","logo","width","contributors","name","description","link","AboutDialog","PureComponent","currentTab","_openContributePage","Window","openExternalURL","_openLink","_changeTab","open","onClose","updateStatus","updateStatusString","getUpdateStatusLabel","status","updateButtonLabel","getUpdateButtonLabel","actions","key","label","primary","onClick","onRequestClose","cannotBeDismissed","maxWidth","noMargin","values","checkUpdates","src","alt","style","Fragment","getIDEVersion","getGDCoreVersion","justifyContent","canDownloadUpdate","map","contributor","primaryText","secondaryText","secondaryTextLines","length","displayLinkButton","onOpenLink","expand","alignItems","HelpButton","helpPagePath","getHelpLink","target","icon","electron","optionalRequire","path","UrlsCache","projectCache","_getProjectCache","project","cache","ptr","getCachedUrl","filename","cacheUrl","url","burstUrl","cacheLocalFileUrl","systemFilename","disableCacheBurst","Date","now","ResourcesLoader","indexOf","resourcesNames","resourcesManager","getResourcesManager","forEach","resourceName","hasResource","_cache","getResource","getFile","cachedUrl","_isLocalFile","file","getProjectFile","projectPath","dirname","resourceAbsolutePath","resolve","console","info","resourceRelativePath","getFullUrl","Indent","indent","htmlColor","indentIconColor","VariableRow","variable","depth","errorText","onRemove","onAddChild","onChangeValue","onResetToDefaultValue","showHandle","showSelectionCheckbox","isSelected","onSelect","origin","isStructure","limitEditing","columns","tableChildIndentation","checked","onCheck","e","margin","fontStyle","fullWidth","defaultValue","push","fadedButton","undefined","getString","multiLine","toolColumn","getInitialSelection","getSelection","selection","filter","addToSelection","object","select","log","hasSelection","gd","global","serializeToJSObject","serializable","methodName","serializedElement","SerializerElement","JSON","parse","Serializer","toJSON","delete","serializeToJSON","unserializeFromJSObject","optionalProject","fromJSObject","CLIPBOARD_KIND","SelectField","_input","current","hasValidValue","childrenValues","child","childValue","error","displayedValue","helperText","helperMarkdownText","source","computeTextFieldStyleProps","floatingLabelText","InputLabelProps","shrink","SelectProps","native","inputRef","hintText","SelectOption","selectableArea","selectedArea","largeSelectableArea","largeSelectedArea","executableEventContainer","actionsContainer","conditionsContainer","subInstructionsContainer","smallWidthContainer","instructionParameter","instructionInvalidParameter","instructionMissingParameter","disabledText","eventsTree","eventsTreeWithSearchResults","dropIndicator","cantDropIndicator","linkContainer","nameAndIconContainer","container","display","flexDirection","Background","square","height","noFullHeight","flex","noExpand","buttonCommonStyles","flexShrink","textFieldWithButtonLayoutStyles","filledTextFieldWithLabelRightButtonMargins","marginTop","marginLeft","filledTextFieldWithoutLabelRightButtonMargins","standardTextFieldWithLabelRightButtonMargins","standardTextFieldWithoutLabelRightButtonMargins","TextFieldWithButtonLayout","noFloatingLabelText","renderTextField","renderButton","ResponsiveLineStackLayout","isFirstChild","windowWidth","index","addSpacers","allAlertMessages","initialPreferences","language","autoDownloadUpdates","themeName","codeEditorThemeName","hiddenAlertMessages","autoDisplayChangelog","lastLaunchedVersion","eventsSheetShowObjectThumbnails","autosaveOnPreview","useNewInstructionEditorDialog","useGDJSDevelopmentWatcher","eventsSheetUseAssignmentOperators","showEffectParameterNames","projectLastUsedPaths","setLanguage","setThemeName","setCodeEditorThemeName","setAutoDownloadUpdates","setAutoDisplayChangelog","showAlertMessage","identifier","show","verifyIfIsNewVersion","setEventsSheetShowObjectThumbnails","setAutosaveOnPreview","setUseNewInstructionEditorDialog","enabled","setUseGDJSDevelopmentWatcher","setEventsSheetUseAssignmentOperators","setShowEffectParameterNames","getLastUsedPath","kind","setLastUsedPath","PreferencesContext","marginRight","content","AlertMessage","onHide","renderRightButton","muiTheme","color","message","warning","exists","prefix","potentialName","i","ListIcon","isGDevelopIcon","iconSize","lineHeight","textAlign","crossOrigin","maxHeight","verticalAlign","gdevelopIconsCSSFilter","padding","size","checkbox","uncheckedIcon","checkedIcon","control","desktopSizes","androidSizes","iosSizes","PlatformSpecificAssetsDialog","constructor","super","_generateFromFile","resourceSources","onChooseResource","sources","then","resources","fullPath","resource","Promise","all","resizeImage","join","results","showErrorBox","allResourcesNames","setFile","imageResource","ImageResource","setName","addResource","burstUrlsCacheForResources","setTimeout","desktopIconResourceNames","androidIconResourceNames","iosIconResourceNames","_onApply","getPlatformSpecificAssets","set","onApply","_loadFrom","get","componentWillReceiveProps","newProps","keyboardFocused","resourceExternalEditors","isResizeSupported","resourceKind","newIcons","Jimp","inputFile","outputFile","read","jimpImage","contain","write","catch","err","position","top","left","right","bottom","backgroundColor","zIndex","pointerEvents","disableShrink","shouldPrompt","hasUnsavedChanges","delayElectronClose","isDev","Boolean","window","onbeforeunload","showConfirmDialog","remote","getCurrentWindow","close","returnValue","overflow","textOverflow","whiteSpace","marginBottom","fontSize","TabContentContainer","Component","shouldComponentUpdate","nextProps","active","ClosableTabs","hideLabels","tabItemContainerStyle","flexWrap","overflowX","closableTabs","ClosableTab","onCloseOthers","onCloseAll","closable","onActivated","useEffect","contextMenu","useRef","openContextMenu","stopPropagation","clientX","clientY","textColor","selectedTextColor","selectedBackgroundColor","onContextMenu","focusRipple","fontFamily","buildMenuTemplate","click","getEditorTabsInitialState","editors","openEditorTab","renderEditor","dontFocusTab","existingEditorId","findIndex","editor","editorTab","isCurrentTab","isActive","editorRef","changeCurrentTab","newTabId","Math","max","min","closeAllEditorTabs","closeEditorTab","chosenEditorTab","chosenEditorTabId","closeOtherEditorTabs","getEditors","getCurrentTabIndex","getCurrentTab","closeProjectTabs","editorProject","getProject","saveUiSettings","closeLayoutTabs","layout","editorLayout","getLayout","closeExternalLayoutTabs","externalLayout","ExternalLayoutEditor","getExternalLayout","closeExternalEventsTabs","externalEvents","ExternalEventsEditor","getExternalEvents","closeEventsFunctionsExtensionTabs","eventsFunctionsExtension","EventsFunctionsExtensionEditorWrapper","getEventsFunctionsExtension","getEventsFunctionsExtensionEditor","tabIndex","getThumbnail","ObjectsRenderingService","bind","EventContainer","_onEventUpdated","forceUpdate","_onEventContextMenu","domEvent","preventDefault","onEventContextMenu","componentDidMount","_container","offsetHeight","eventsHeightsCache","setEventHeight","componentDidUpdate","scope","EventComponent","EventsRenderingService","getEventComponent","onEventClick","globalObjectsContainer","objectsContainer","selected","isEventSelected","leftIndentWidth","onUpdate","onAddNewInstruction","onPasteInstructions","onMoveToInstruction","onMoveToInstructionsList","onInstructionClick","onInstructionDoubleClick","onInstructionContextMenu","onAddInstructionContextMenu","onParameterClick","onOpenExternalEvents","onOpenLayout","renderObjectThumbnail","screenType","getNodeKey","treeIndex","SortableTree","className","eventsSheetRootClassName","noop","ThemableEventsTree","_eventsToTreeData","eventsList","flatData","parentDisabled","treeData","mapFor","getEventsCount","getEventAt","isDisabled","_renderEvent","indexInList","expanded","isFolded","getSubEvents","_onMoveNode","node","targetPath","slice","targetNode","getNodeAtPath","targetEventsList","events","targetPosition","moveEventToAnotherEventsList","forceEventsUpdate","onEventMoved","_canDrop","nextParent","canHaveSubEvents","_onVisibilityToggle","setFolded","_renderObjectThumbnail","objectName","showObjectThumbnails","getObjectByName","classNames","isCondition","x","y","_treeSearchMethod","searchQuery","searchResults","find","highlightedEvent","compare","EventHeightsCache","onHeightsChanged","cb","_list","wrappedInstance","recomputeRowHeights","scrollToEvent","row","_getEventRow","scrollToRow","unfoldForEvent","EventsListUnfolder","unfoldWhenContaining","searchedEvent","scaffoldBlockPxWidth","onVisibilityToggle","onMoveNode","canDrop","rowHeight","getEventHeight","searchMethod","searchFocusOffset","reactVirtualizedListProps","list","onScroll","defaultProps","ElementWithMenu","element","_contextMenu","ReactDOM","findDOMNode","_wrappedElement","HTMLElement","dimensions","getBoundingClientRect","round","openMenuWithSecondaryClick","wrappedElement","SearchBar","_textField","blur","handleFocus","handleBlur","trim","handleInput","handleCancel","handleKeyPressed","charCode","onRequestSearch","nonEmpty","root","iconButtonClose","opacity","transform","transition","iconStyle","iconButtonSearch","iconButtonFilter","iconButtonHelp","searchContainer","getStyles","buildTagsMenuTemplate","elevation","placeholder","onKeyUp","underlineShow","require","app","fs","process","isDarwin","test","platform","tryPath","onExists","onNoAccess","access","constants","R_OK","module","exports","findGDJS","reject","Error","appPath","getAppPath","cwd","pathToRoot","rootPath","onFound","gdjsRoot","onNotFound","devPath","StandardEvent","standardEvent","asStandardEvent","renderConditionsList","instrsList","getConditions","areConditions","renderActionsList","getActions","wordWrap","cursor","reactDndInstructionType","DragSourceAndDropTarget","makeDragSourceAndDropTarget","Instruction","instruction","instrFormatter","InstructionSentenceFormatter","useAssignmentOperators","metadata","MetadataProvider","getConditionMetadata","JsPlatform","getType","getActionMetadata","beginDrag","draggedItem","drop","connectDragSource","connectDropTarget","isOver","instructionDragSourceElement","onDoubleClick","onKeyPress","isInverted","getSmallIconFilename","formattedTexts","getAsFormattedText","parametersCount","getParametersCount","parameterIndex","getTextFormatting","getUserData","str","toUpperCase","substr","parameterMetadata","getParameter","parameterType","ParameterRenderingService","renderInlineParameter","InvalidParameterValue","MissingParameterValue","renderInstructionText","instructionDragSourceDropTargetElement","canHaveSubInstructions","getSubInstructions","onAddNewSubInstruction","onPasteSubInstructions","onMoveToSubInstruction","onMoveToSubInstructionsList","onSubInstructionClick","onSubInstructionDoubleClick","onSubInstructionContextMenu","onAddSubInstructionContextMenu","onSubParameterClick","addButtonLabel","RelationalOperatorField","getDescription","isInline","getLongDescription","renderInlineRelationalOperator","isEmpty","OperatorField","renderInlineOperator","MouseField","renderInlineMouse","keyNames","isKeyValid","KeyField","dataSource","keyName","openOnFocus","renderInlineKey","RenderedUnknownInstance","instance","associatedObject","pixiContainer","pixiResourcesLoader","RenderedInstance","call","_pixiObject","PIXI","_pixiContainer","addChild","hasCustomSize","getCustomWidth","getCustomHeight","beginFill","lineStyle","moveTo","lineTo","endFill","prototype","Object","create","resourcesLoader","update","_instance","getX","getY","rotation","getAngle","PI","listItem","useStyles","makeStyles","option","listbox","flexGrow","inputRoot","popper","muiZIndex","renderItem","divider","disableGutters","component","renderIcon","isOptionDisabled","useState","inputValue","setInputValue","isMenuOpen","setIsMenuOpen","classes","forceInputValueTo","currentInputValue","handleInputChange","reason","freeSolo","onChoose","handleChange","onInputChange","options","renderOption","getOptionDisabled","ListboxProps","nativeEvent","stopImmediatePropagation","onTouchEnd","getOptionLabel","filterOptions","lowercaseInputValue","toLowerCase","optionList","pop","shift","filterFunction","renderInput","params","InputProps","inputProps","other","endAdornment","onKeyDown","getDefaultStylingProps","onMouseDown","textFieldStyle","Table","TableBody","TableHeader","TableHeaderColumn","TableRow","TableRowColumn","paddingLeft","paddingRight","MiniToolbar","smallest","toolbar","toolbarTextStyle","MiniToolbarText","noShrink","RenderedSpriteInstance","_renderedAnimation","_renderedDirection","_centerX","_centerY","_originX","_originY","_pixiResourcesLoader","getInvalidPIXITexture","updatePIXITexture","updatePIXISprite","spriteObject","asSpriteObject","getAnimationsCount","getAnimation","getDirectionsCount","getDirection","getSpritesCount","imageName","getSprite","getImageName","getResourceFullUrl","anchor","texture","frame","_shouldNotRotate","toRad","scale","abs","updateSprite","_sprite","_associatedObject","hasNoAnimations","getRawFloatProperty","animation","hasNoDirections","useMultipleDirections","normalizedAngle","floor","direction","getPIXITexture","_project","getOrigin","isDefaultCenterPoint","noFrame","that","on","off","center","getCenter","getOriginX","getOriginY","getDefaultWidth","getDefaultHeight","RenderedTiledSpriteInstance","tiledSprite","asTiledSpriteObject","_texture","getTexture","TilingSprite","getWidth","getHeight","RenderedPanelSpriteInstance","makeObjects","updateTexture","panelSprite","asPanelSpriteObject","isTiled","_tiled","_textureName","updateAngle","updatePosition","oldWidth","_width","oldHeight","_height","updateWidthHeight","StretchedSprite","_centerSprite","_borderSprites","removeChildren","_updateLocalPositions","getLeftMargin","getTopMargin","getRightMargin","getBottomMargin","_updateSpritesAndTexturesSize","_wasRendered","cacheAsBitmap","renderer","makeInsideTexture","rect","pivot","RenderedTextInstance","textObject","asTextObject","align","_styleFontDirty","_fontFamily","getFontFamily","getFontName","isItalic","_isItalic","isBold","_isBold","getCharacterSize","_characterSize","_wrapping","_wrappingWidth","_fontName","loadFontFamily","warn","fontWeight","wordWrapWidth","breakWords","dirty","getColorR","_colorR","getColorG","_colorG","getColorB","_colorB","fill","makeRenderer","RenderedParticleEmitterInstance","updateGraphics","particleEmitterObject","asParticleEmitterObject","clear","emitterAngle","sprayConeAngle","getConeSprayAngle","line1Angle","line2Angle","rgbToHexNumber","getParticleRed2","getParticleGreen2","getParticleBlue2","cos","sin","getParticleRed1","getParticleGreen1","getParticleBlue1","drawCircle","loadFontFace","descriptors","FontFace","fontFace","document","fonts","add","load","newStyle","createElement","appendChild","createTextNode","head","FontFaceObserver","button","YesNoField","_yesButton","createRef","focusButton","effectiveValue","getParameterValueOrDefault","renderInlineYesNo","TrueFalseField","_trueButton","renderInlineTrueFalse","ExpressionField","expressionType","ExpressionSelector","instructionsInfo","filterEnumeratedInstructionOrExpressionMetadataByScope","enumerateAllExpressions","instructionsInfoTree","createTree","defaultStyle","highlightedText","borderSizing","borderBottom","highlights","sortedHighlights","sort","highlight1","highlight2","begin","elements","lastPos","highlight","startPos","substring","end","getAutocompletionsForExpressions","expressionMetadatas","isExact","enumeratedExpressionMetadata","parameters","completion","addParenthesis","addClosingParenthesis","getVisibleParameterTypes","getAutocompletionsFromDescriptions","expressionAutocompletionContext","expressionCompletionDescriptions","flatten","mapVector","completionDescription","completionKind","getCompletionKind","ExpressionCompletionDescription","Expression","getObjectName","getBehaviorName","getPrefix","behaviorName","behaviorType","getTypeOfBehavior","behaviorExpressions","enumerateBehaviorExpressions","filteredBehaviorExpressions","filterExpressions","getAutocompletionsForBehaviorExpressions","objectType","getTypeOfObject","objectExpressions","enumerateObjectExpressions","filteredObjectExpressions","getAutocompletionsForObjectExpressions","freeExpressions","enumerateFreeExpressions","filteredFreeExpressions","getAutocompletionsForFreeExpressions","enumerateObjectsAndGroups","allObjectsList","allGroupsList","filteredObjectsList","filterObjectsList","searchText","selectedTags","filteredGroupsList","filterGroupsList","addDot","ParameterMetadata","isObject","getName","group","getAutocompletionsForObject","Behavior","getBehaviorsOfObject","toJSArray","addNamespaceSeparator","getAutocompletionsForBehavior","insertAutocompletionInExpression","expression","caretLocation","insertedAutocompletion","formatCompletion","nextCharacter","suffix","addSuffix","newExpression","startPosition","isSeparatorChar","char","wordStartPosition","wordEndPosition","maybeNextCharacter","newExpressionStart","insertedWord","newExpressionEnd","getAutocompletionsInitialState","autocompletions","selectedCompletionIndex","getRemainingCount","getVisibleAutocompletions","setNewAutocompletions","handleAutocompletionsKeyDown","onUpdateAutocompletions","onInsertAutocompletion","visibleAutocompletionsLength","autocompletion","defaultTextStyle","overflowWrap","AutocompletionIcon","formatParameterTypesString","parameterRenderingService","userFriendlyName","getUserFriendlyTypeName","DisplayedExpressionAutocompletion","expressionAutocompletion","iconFilename","DisplayedExactExpressionAutocompletion","DisplayedObjectAutocompletion","thumbnail","DisplayedBehaviorAutocompletion","tooManyTextContainer","popperStyle","ExpressionAutocompletionsDisplayer","expressionAutocompletions","remainingCount","anchorEl","scrollView","selectedAutocompletionElement","scrollTo","disablePortal","variant","autoHideScrollbar","StringField","getChoices","getExtraInfo","exception","StringWithSelectorField","choice","BehaviorField","_behaviorNames","_getError","_doValidation","_forceChooseBehavior","_description","_longDescription","_behaviorTypeAllowed","_updateBehaviorsList","instructionMetadata","expressionMetadata","getLastObjectParameterValue","noBehaviorErrorText","SceneVariableField","editorOpen","variablesContainer","getVariables","onOpenDialog","onCancel","emptyExplanationMessage","emptyExplanationSecondMessage","renderInlineSceneVariable","renderVariableWithIcon","GlobalVariableField","renderInlineGlobalVariable","ObjectVariableField","hasObjectNamed","getObject","renderInlineObjectVariable","LayerField","layerNames","getLayersCount","getLayerAt","layerName","AudioResourceField","initialResourceName","VideoResourceField","JsonResourceField","parseColor","rgbColor","colors","split","r","parseInt","g","b","a","ParameterColorField","renderExtraButton","disableAlpha","onChangeComplete","rgb","ForceMultiplierField","_instantButton","showDeprecatedNumericValue","makeNonBreakable","renderInlineForceMultiplier","SceneNameField","layoutNames","enumerateLayouts","layoutName","GroupEvent","editing","edit","endEditing","groupEvent","asGroupEvent","getBackgroundColorR","getBackgroundColorG","getBackgroundColorB","textField","inputStyle","WebkitTextFillColor","underlineFocusStyle","borderColor","id","commentTextStyle","minHeight","commentTextField","commentSpan","boxSizing","border","CommentEvent","onEvent","asCommentEvent","setComment","_getCommentHTML","getComment","commentEvent","rgbToHex","getBackgroundColorRed","getBackgroundColorGreen","getBackgroundColorBlue","getTextColorRed","getTextColorGreen","getTextColorBlue","selectable","_selectable","dangerouslySetInnerHTML","__html","instructionsContainer","actionsList","ForEachEvent","_objectField","forEachEvent","asForEachEvent","getObjectToPick","setObjectToPick","objectField","RepeatEvent","repeatEvent","asRepeatEvent","getRepeatExpression","setRepeatExpression","whileEvent","asWhileEvent","getWhileConditions","LinkEvent","_externalEventsField","openTarget","asLinkEvent","getTarget","hasExternalEventsNamed","hasLayoutNamed","showWarningBox","linkEvent","setTarget","externalEventsField","ResponsiveWindowMeasurer","innerWidth","innerHeight","getList","enumerateExternalEvents","ExternalEventsField","wrappingText","comment","commentLink","textDecoration","JsCodeEvent","editingObject","asJsCodeEvent","getInlineCode","jsCodeEvent","setInlineCode","editObject","endObjectEditing","parameterObjects","getParameterObjects","objects","eventsFunctionContext","eventsFunction","functionStart","functionEnd","href","rel","onMeasure","onEditorMounted","setParameterObjects","eventHeights","updateTimeoutId","_notifyComponent","cachedHeight","caseSensitiveSlug","incString","separator","preserved","p","s","RegExp","fullHeightSelector","NewInstructionEditorMenu","isNewInstruction","onSubmit","useForceUpdate","useNewInstructionEditor","newInstructionEditorState","newInstructionEditorSetters","chosenObjectName","chosenObjectInstructionsInfo","chosenObjectInstructionsInfoTree","chooseFreeInstruction","chooseObject","chooseObjectInstruction","step","setStep","currentInstructionOrObjectSelectorTab","setCurrentInstructionOrObjectSelectorTab","instructionType","submitInstruction","getInstructionMetadata","setupInstruction","anchorOrigin","vertical","horizontal","transformOrigin","columnsRenderer","onChangeTab","chosenInstructionType","onChooseInstruction","onChooseObject","focusOnMount","onSearchStartOrReset","selectedType","useSubheaders","searchPlaceholderObjectName","searchPlaceholderIsCondition","getColumns","sizeTextField","white","black","filterEditableWithEventTextDialog","includes","EventTextDialog","_applyChangesOnEvent","textValue","eventType","setTextColor","setBackgroundColor","_getInitialStateFromEvent","rows","rowsMax","Toolbar","lastChild","showPreviewButton","onPreview","previewButtonSettings","onNetworkPreview","onOpenDebugger","showNetworkPreviewButton","onAddStandardEvent","onAddSubEvent","canAddSubEvent","onAddCommentEvent","allEventsMetadata","fullName","onAddEvent","canRemove","undo","canUndo","redo","canRedo","onToggleSearchPanel","onOpenSettings","KeyboardShortcuts","shortcutCallbacks","_shiftPressed","_ctrlPressed","_altPressed","_metaPressed","_updateModifiersFromEvent","evt","metaKey","altKey","ctrlKey","shiftKey","_isControlOrCmdPressed","onDragOver","_isActive","closest","_shortcutCallbacks","onDelete","onMove","onCopy","onCut","onPaste","onUndo","onRedo","onSearch","onZoomOut","onZoomIn","which","shouldCloneInstances","shouldMultiSelect","InlineParameterEditor","ParameterComponent","_loadComponentFromInstruction","_unload","getCurrentPlatform","getParameterComponent","EmptyEventsPlaceholder","ensureSingleOnceInstructions","instructionsList","hasEndingOnceInstruction","hasInvalidOnce","removeAt","onceInstruction","setType","insert","toEventsContextResult","eventsContext","objectsNames","getObjectNames","toNewVectorString","objectOrGroupNames","getReferencedObjectOrGroupNames","objectOrGroupBehaviorNames","objectOrGroupName","behaviorNames","getBehaviorNamesOfObjectOrGroup","EventsContextAnalyzerDialog","eventsContextResult","keys","SearchPanel","replaceText","matchCase","searchInActions","searchInConditions","searchInEventStrings","searchInSelection","searchTextField","launchSearch","onSearchInEvents","launchReplace","onReplaceInEvents","resultsCount","hasEventSelected","onGoToPreviousSearchResult","onGoToNextSearchResult","_searchTextField","EventsSearcher","eventsSearchResults","_resultEvents","_doReplaceInEvents","EventsRefactorer","replaceStringInEvents","_doSearchInEvents","newEventsSearchResults","searchInEvents","clone","_updateListOfResultEvents","resultEventsWithDuplicates","eventsSearchResult","at","isEventValid","getEvent","uniqBy","_goToSearchResults","newSearchFocusOffset","_goToPreviousSearchResult","_goToNextSearchResult","componentWillUnmount","reset","eventsSearchResultEvents","replaceInEvents","goToNextSearchResult","goToPreviousSearchResult","containsSubInstructions","subInstructionsList","subInstruction","Tabs","Tab","enumerateEventsMetadata","allExtensions","asPlatform","getAllPlatformExtensions","extensionEvents","getAllEvents","getFullName","EventsFunctionExtractorDialog","extensionName","createNewExtension","serializedEvents","EventsFunction","setupFunctionFromEvents","enumerateEventsFunctionsExtensions","onCreate","eventsFunctionsExtensions","hasLotsOfParameters","functionHasLotsOfParameters","secondaryActions","canCreateEventsFunction","validateExtensionNameUniqueness","validateExtensionName","functionName","validateEventsFunctionNameUniqueness","validateEventsFunctionName","eventsBasedBehavior","onConfigurationUpdated","freezeEventsFunctionType","onParametersUpdated","freezeParameters","getObjectGroupByName","objectGroupName","getObjectGroups","has","BehaviorTypeSelector","behaviorMetadata","enumerateBehaviorsMetadata","valueIsListed","BackgroundText","textShadow","emptyMessage","shadowColor","tooltipText","requirableModules","renderers","unknownObjectType","Sprite","RenderedShapePainterInstance","RenderedTextEntryInstance","RenderedSkeletonInstance","hasOwnProperty","createNewInstanceRenderer","PixiResourcesLoader","registerInstanceRenderer","registerModule","requirePath","requireModule","requireBasePath","getBuildArtifactUrl","build","getBuildFileUploadOptions","makeTimestampedId","getSignedUrl","uploadType","contentType","signedUrl","buildElectron","getAuthorizationHeader","userId","targets","authorizationHeader","axios","post","GDevelopBuildApi","baseUrl","encodeURIComponent","headers","Authorization","response","data","buildWeb","buildCordovaAndroid","getBuild","buildId","getBuilds","EventsFunctionsExtensionEditor","selectedEventsFunction","selectedEventsBasedBehavior","editedEventsBasedBehavior","editOptionsDialogOpen","behaviorMethodSelectorDialogOpen","extensionFunctionSelectorDialogOpen","onAddEventsFunctionCb","_loadEventsFunctionFrom","_globalObjectsContainer","ObjectsContainer","_objectsContainer","EventsFunctionTools","eventsFunctionToObjectsContainer","updateToolbar","setToolbar","selectEventsFunctionByName","eventsBasedBehaviors","getEventsBasedBehaviors","behaviorEventsFunctions","getEventsFunctions","hasEventsFunctionNamed","_selectEventsFunction","getEventsFunction","_editorNavigator","getEvents","openEditor","_makeRenameFreeEventsFunction","newName","done","Project","validateName","isExtensionLifecycleEventsFunction","WholeProjectRefactorer","renameEventsFunction","_makeRenameBehaviorEventsFunction","isBehaviorLifecycleEventsFunction","renameBehaviorEventsFunction","_onDeleteEventsFunction","_selectEventsBasedBehavior","_editorMosaic","_makeRenameEventsBasedBehavior","renameEventsBasedBehavior","_onEventsBasedBehaviorRenamed","onBehaviorEdited","_onDeleteEventsBasedBehavior","_onAddFreeEventsFunction","_onCloseExtensionFunctionSelectorDialog","_onAddBehaviorEventsFunction","_onCloseBehaviorMethodSelectorDialog","_onBehaviorEventsFunctionAdded","ensureBehaviorEventsFunctionsProperParameters","_onBehaviorPropertyRenamed","oldName","renameBehaviorProperty","_editOptions","_editBehavior","_openFreeFunctionsListEditor","_openBehaviorsListEditor","initiallyFocusedFunctionName","initiallyFocusedBehaviorName","noTitleBar","onEditFreeFunctions","onEditBehaviors","onEditExtensionOptions","toolbarControls","onParametersOrGroupsUpdated","unsavedChanges","emptyPreviewButtonSettings","openInstructionOrExpression","onCreateEventsFunction","eventsFunctionsContainer","onSelectEventsFunction","onDeleteEventsFunction","canRename","onRenameEventsFunction","onAddEventsFunction","onEventsFunctionAdded","renderHeader","eventsBasedBehaviorsList","onSelectEventsBasedBehavior","onDeleteEventsBasedBehavior","onRenameEventsBasedBehavior","onEventsBasedBehaviorRenamed","onEditProperties","editorNavigator","initialEditorName","transitions","previousEditor","nextIcon","nextLabel","nextEditor","onEditorChanged","editorName","editorMosaic","initialNodes","first","second","splitPercentage","triggerUnsavedChanges","onRenameProperty","EventsFunctionConfigurationEditor","_canObjectOrGroupUseNewName","_onDeleteGroup","groupWithContext","answer","objectOrGroupRemovedInEventsFunction","_onRenameGroup","objectOrGroupRenamedInEventsFunction","_chooseTab","renderConfigurationHeader","useMaxHeight","globalObjectGroups","objectGroups","canRenameGroup","onRenameGroup","onDeleteGroup","onGroupsUpdated","canSetAsGlobalGroup","ObjectGroupsListWithObjectGroupEditor","editedGroup","editGroup","onEditGroup","onGroupAdded","onGroupRemoved","onGroupRenamed","ObjectGroupEditor","newObjectName","removeObject","onSizeUpdated","addObject","_renderExplanation","getAllObjectsNames","displayRemoveButton","noGroups","openGitHubIssue","OptionsEditorDialog","exportDialogOpen","eventsFunctionsExtensionsState","eventsFunctionsExtensionWriter","getEventsFunctionsExtensionWriter","setFullName","getShortDescription","setShortDescription","setDescription","getVersion","setVersion","getTags","setTags","getAuthor","setAuthor","chooseEventsFunctionExtensionFile","pathOrUrl","writeEventsFunctionsExtension","exportExtension","EventsBasedBehaviorEditorDialog","onTabChanged","onPropertiesUpdated","EventsBasedBehaviorEditor","_allObjectTypes","getAllObjectTypesUsingEventsBasedBehavior","newTab","floatingLabelFixed","getObjectType","setObjectType","allowedObjectTypes","getEventsFunctionsCount","propertiesContainer","EventsBasedBehaviorPropertiesEditor","_addProperty","properties","getPropertyDescriptors","newNameGenerator","insertNew","getCount","_removeProperty","remove","_moveProperty","oldIndex","newIndex","move","property","validatePropertyName","isHidden","setHidden","getValue","setValue","getLabel","setLabel","disabledItem","MethodListItem","leftIcon","functionType","Action","BehaviorMethodSelectorDialog","eventsFunctions","FunctionListItem","showAdvanced","setShowAdvanced","Condition","currentEditorName","setCurrentEditorName","buttonLineJustifyContent","eventsFunctionsCount","eventsBasedBehaviorsCount","LayerRenderer","layer","viewPosition","instances","onInstanceClicked","onInstanceDoubleClicked","onOverInstance","onOutInstance","onMoveInstance","onMoveInstanceEnd","onDownInstance","getInstanceLeft","renderedInstances","getInstanceTop","getInstanceWidth","getInstanceHeight","getRendererOfInstance","renderedInstance","associatedObjectName","interactive","gesture","panable","makeDoubleClickable","shouldBeHandledByPinch","originalEvent","deltaX","deltaY","viewTopLeft","viewBottomRight","instancesRenderer","InitialInstanceJSFunctor","invoke","instancePtr","wrapPointer","InitialInstance","pixiObject","getPixiObject","zOrder","getZOrder","isLocked","isVisible","_isInstanceVisible","visible","wasUsed","getPixiContainer","_computeViewBounds","toSceneCoordinates","iterateOverInstancesWithZOrdering","_updatePixiObjectsZOrder","_updateVisibility","_cleanRenderers","getVisibility","resetRenderersFor","getInstance","instanceRemovedFromScene","pixiDisplayObject","lastClickTime","handleTap","currentTime","emit","SelectionRectangle","instanceMeasurer","toCanvasCoordinates","startSelectionRectangle","selectionRectangleStart","selectionRectangleEnd","updateSelectionRectangle","lastX","lastY","endSelectionRectangle","_instancesInSelectionRectangle","tmp","iterateOverInstances","selector","pixiRectangle","hitArea","instanceHeight","instanceWidth","selectionSceneStart","selectionSceneEnd","hasStartedSelectionRectangle","x1","y1","x2","y2","fillAlpha","alpha","drawRect","roundPositionsToGrid","pos","newPos","grid","snap","roundPosition","gridWidth","gridOffsetX","gridHeight","gridOffsetY","InstancesAdder","_zOrderFinder","HighestZOrderFinder","addInstances","objectNames","_instances","getHighestZOrder","_options","insertNewInitialInstance","setObjectName","setX","setY","setZOrder","createOrUpdateTemporaryInstancesFromObjectNames","_temporaryInstances","updateTemporaryInstancePositions","_createTemporaryInstancesFromObjectNames","deleteTemporaryInstances","setOptions","removeInstance","commitTemporaryInstances","unmount","InstancePropertiesEditor","_instanceVariablesList","schema","valueType","onEditButtonClick","onEditObjectByName","setAngle","setLocked","enumerateLayers","getLayer","setLayer","setCustomWidth","setCustomHeight","setHasCustomSize","_renderEmpty","_renderInstancesProperties","getCustomProperties","instanceSchema","propertiesMapToSchema","updateCustomProperty","overflowY","concat","editInstanceVariables","inheritedVariablesContainer","InstancesList","renderedRows","_searchBar","_onRowClick","onSelectInstances","_rowGetter","_rowClassName","selectedInstances","_selectFirstInstance","freezeUpdate","table","forceUpdateGrid","componentWillMount","instanceRowRenderer","locked","toFixed","angle","tableKey","headerHeight","tableRootClassName","headerClassName","rowCount","rowGetter","onRowClick","rowClassName","dataKey","VariablesEditorDialog","selectedLayer","layersContainer","choices","layerRemoved","ObjectEditorDialog","_onChangeTab","onRename","EditorComponent","editorComponent","noTitleMargin","canRenameObject","ObjectEditorDialogContainer","dialogComponent","castToObjectType","editorConfiguration","ObjectsEditorService","getEditorConfiguration","withSerializableObject","propName","newObjectCreator","createNewObject","useProjectToUnserialize","EditorDialog","toolbarItemStyle","toolbarItem","TextEditor","setCharacterSize","setColor","setBold","setItalic","canBeReset","setFontName","setString","TiledSpriteEditor","tiledSpriteObject","setTexture","setWidth","setHeight","isSameObjectWithContext","objectWithContext","enumerateObjects","filterObject","containerObjectsList","getObjectsCount","getObjectAt","projectObjectsList","enumerateObjectTypes","extensionsList","extension","getExtensionObjectsTypes","getObjectMetadata","objectMetadata","getIconFilename","lowercaseSearchText","objectTags","hasStringAllTags","enumerateGroups","count","getAt","filterGroup","containerGroups","containerGroupsList","projectGroups","projectGroupsList","PanelSpriteEditor","panelSpriteObject","setTiled","setTopMargin","setBottomMargin","setLeftMargin","setRightMargin","gridList","animationTitle","animationTools","AddAnimationLine","onAdd","extraTools","Animation","onSpriteContextMenu","selectedSprites","onSelectSprite","onReplaceDirection","onChangeName","animationName","onReplaceByDirection","newDirection","SortableAnimation","SortableElement","SortableAnimationsList","SortableContainer","onAddAnimation","onRemoveAnimation","onChangeAnimationName","extraBottomTools","directionId","AnimationsListContainer","onSortEnd","moveAnimation","addAnimation","emptyAnimation","setDirectionsCount","removeAnimation","changeAnimationName","otherNames","deleteSelection","deleteSpritesFromAnimation","duplicateSelection","duplicateSpritesInAnimation","openSpriteContextMenu","sprite","selectSprite","spriteContextMenu","replaceDirection","animationId","setDirection","helperClass","useDragHandle","lockAxis","axis","SpriteEditor","pointsEditorOpen","collisionMasksEditorOpen","openPointsEditor","openCollisionMasksEditor","onPointsUpdated","onCollisionMasksUpdated","spritesList","thumbnailExtraStyle","spriteThumbnailImage","AddSpriteButton","displayHint","thumbnailContainerStyle","itemsBackgroundColor","SortableSpriteThumbnail","SortableList","onAddSprite","spritesCount","checkDirectionPointsAndCollisionsMasks","allDirectionSpritesHaveSamePoints","allDirectionSpritesHaveSameCollisionMasks","allDirectionSpritesHaveSamePointsAs","allDirectionSpritesHaveSameCollisionMasksAs","SpritesList","moveSprite","applyResourceDefaults","setImageName","copySpritePoints","copySpritePolygons","addSprite","editWith","externalEditor","resourceNames","externalEditorData","metadataRaw","getMetadata","singleFrame","extraOptions","fps","getTimeBetweenFrames","basename","extname","isLooping","onChangesSaved","Direction","setTimeBetweenFrames","setLoop","originalIndex","originalSprite","setMetadata","stringify","newAnimationName","onEditWith","PointsEditor","animationIndex","directionIndex","spriteIndex","samePointsForAnimations","samePointsForSprites","_updatePoints","getCurrentElements","otherAnimation","copyAnimationsSpritePoints","chooseAnimation","_updateSamePointsToggles","chooseDirection","chooseSprite","every","allSpritesHaveSamePointsAs","_setSamePointsForAllAnimations","enable","_setSamePointsForAllSprites","hasValidSprite","renderOverlay","imageWidth","imageHeight","imageZoomFactor","pointsContainer","sameForAllAnimations","sameForAllSprites","setSameForAllAnimations","setSameForAllSprites","setSameForAllAnimationsLabel","setSameForAllSpritesLabel","_layout","angleInDegrees","removeChild","SortableAddPointRow","AddPointRow","SortablePointRow","PointRow","PointsListBody","nameErrors","updateOriginPointX","_onPointsUpdated","updateOriginPointY","updateCenterPointX","updateCenterPointY","updatePointX","point","updatePointY","nonDefaultPoints","getAllNonDefaultPoints","pointsRows","pointName","pointX","pointY","onChangePointX","onChangePointY","nameError","success","hasPoint","delPoint","originPoint","centerPoint","originRow","centerRow","isAutomatic","onEdit","setDefaultCenterPoint","addRow","Point","addPoint","SortablePointsListBody","muiName","PointsList","handleColumn","coordinateColumn","lockToContainerEdges","parseFloat","pointKindIdentifiers","PointsPreview","draggedPoint","draggedPointKind","_onStartDragPoint","_onEndDragPoint","draggingWasDone","_onMouseMove","containerBoundingRect","xOnContainer","yOnContainer","_renderPoint","imageSrc","onPointerDown","points","automaticCenterPosition","onPointerMove","onPointerUp","CollisionMasksEditor","sameCollisionMasksForAnimations","sameCollisionMasksForSprites","spriteWidth","spriteHeight","_updateCollisionMasks","copyAnimationsSpriteCollisionMasks","_updateSameCollisionMasksToggles","allSpritesHaveSameCollisionMasksAs","_onSetCollisionMaskAutomatic","automatic","setCollisionMaskAutomatic","_setSameCollisionMasksForAllAnimations","_setSameCollisionMasksForAllSprites","_setCurrentSpriteSize","onSize","isDefaultBoundingBox","isCollisionMaskAutomatic","polygons","getCustomCollisionMask","onPolygonsUpdated","SortableAddPolygonRow","AddPolygonRow","SortableAddVerticeRow","AddVerticeRow","SortableVerticeRow","VerticeRow","SortablePolygonRow","PolygonRow","PolygonsListBody","updateVerticeX","vertice","set_x","_onPolygonUpdated","updateVerticeY","set_y","polygonRows","polygon","vertices","getVertices","isConvex","removeFromVectorPolygon2d","verticesCount","j","verticeX","get_x","verticeY","get_y","onChangeVerticeX","onChangeVerticeY","removeFromVectorVector2f","hasWarning","newVertice","Vector2f","push_back","newPolygon","Polygon2d","createRectangle","SortablePolygonsListBody","PolygonsList","svg","vertexCircle","CollisionMasksPreview","draggedVertex","_onStartDragVertex","_onEndDragVertex","_onPointerMove","pointOnScreen","_svg","createSVGPoint","screenToSvgMatrix","getScreenCTM","inverse","pointOnSvg","matrixTransform","_renderBoundingBox","stroke","strokeWidth","fileRule","_renderPolygons","vertex","cx","cy","EmptyEditor","shapePainterObject","asShapePainterObject","areCoordinatesAbsolute","setCoordinatesRelative","setCoordinatesAbsolute","getOutlineColorR","getOutlineColorG","getOutlineColorB","setOutlineColor","getOutlineOpacity","setOutlineOpacity","getOutlineSize","setOutlineSize","getFillColorR","getFillColorG","getFillColorB","setFillColor","getFillOpacity","setFillOpacity","ParticleEmitterEditor","getRendererType","rendererType","setRendererType","ParticleEmitterObject","Quad","setParticleTexture","Line","getRendererParam1","setRendererParam1","getRendererParam2","setRendererParam2","getParticleTexture","setParticleRed1","setParticleGreen1","setParticleBlue1","getParticleAlpha1","setParticleAlpha1","setParticleRed2","setParticleGreen2","setParticleBlue2","getParticleAlpha2","setParticleAlpha2","isRenderingAdditive","setRenderingAdditive","setRenderingAlpha","getDestroyWhenNoParticles","setDestroyWhenNoParticles","getMaxParticleNb","setMaxParticleNb","getTank","setTank","getFlow","setFlow","getEmitterForceMin","setEmitterForceMin","getEmitterForceMax","setEmitterForceMax","setConeSprayAngle","getZoneRadius","setZoneRadius","getParticleGravityX","setParticleGravityX","getParticleGravityY","setParticleGravityY","getFriction","setFriction","getParticleLifeTimeMin","setParticleLifeTimeMin","getParticleLifeTimeMax","setParticleLifeTimeMax","getParticleSize1","setParticleSize1","getParticleSize2","setParticleSize2","getParticleAngle1","setParticleAngle1","getParticleAngle2","setParticleAngle2","ObjectPropertiesEditor","getProperties","propertiesSchema","updateProperty","extraInformation","getExtraObjectsInformation","AddBehaviorLine","BehaviorsEditor","chooseNewBehavior","newBehaviorDialogOpen","_hasBehaviorWithType","getAllBehaviorNames","getBehavior","behavior","getTypeName","addBehavior","defaultName","hasBehaviorNamed","addNewBehavior","_onChangeBehaviorName","behaviorContent","renameBehavior","_onRemoveBehavior","removeBehavior","allBehaviorNames","isNullPtr","BehaviorComponent","BehaviorsEditorService","getEditor","getBehaviorHelpPagePath","BehaviorListItem","NewBehaviorDialog","showDeprecated","_showDeprecated","_onNewExtensionInstalled","deprecatedBehaviorsInformation","getDeprecatedBehaviorsInformation","filteredBehaviorMetadata","filterEnumeratedBehaviorMetadata","behaviors","deprecatedBehaviors","chooseBehavior","showMessageBox","canBehaviorBeUsed","hasSearchNoResult","onNewExtensionInstalled","showOnlyWithBehaviors","SetupGridDialog","gridOptions","BaseEditor","getSerializedElements","windowTitle","getWindowDefaultTitle","layers","openObjectsList","openObjectGroupsList","openProperties","instancesSelection","getSelectedInstances","toggleInstancesList","toggleLayersList","isWindowMaskShown","toggleWindowMask","isGridShown","toggleGrid","openSetupGrid","zoomIn","zoomOut","centerView","setZoomFactor","flexContainer","absoluteContainer","passFullSize","WrappedComponent","useFlex","wrappedComponentRef","xScrollbar","yScrollbar","addScrollbars","_editor","xValue","yValue","xMin","xMax","yMin","yMax","_handleXChange","_handleYChange","_setAndAdjust","_handleViewPositionChange","throttle","getViewX","getViewY","leading","trailing","getViewPosition","wrappedEditorRef","onViewPositionChanged","orientation","TagsButton","glob","hasElectron","listContainer","getResourceName","ResourcesList","renamedResource","resourcesWithErrors","_deleteResource","onDeleteResource","_locateResourceFile","resourceFolderPath","getLocalResourceFullPath","shell","openItem","_openResourceFile","resourceFilePath","_copyResourceFilePath","clipboard","writeText","_scanForNewResources","extensions","createResource","res","pathFound","fileName","relative","createOrUpdateResource","_removeUnusedResources","resourceType","ProjectResourcesAdder","getAllUseless","removeAllUseless","_removeAllResourcesWithInvalidPath","getAllResourceNames","getResourceFilePathStatus","removeResource","_editName","sortableList","_rename","onRenameResource","doRename","_moveSelectionTo","destinationResource","selectedResource","moveResource","getResourcePosition","forceUpdateList","_renderResourceMenuTemplate","_index","RESOURCE_EXTENSIONS","image","audio","AudioResource","font","FontResource","video","VideoResource","checkMissingPaths","nextState","onSelectResource","allResourcesList","filteredList","filterResourcesList","listKey","fullList","getItemName","selectedItems","onItemSelected","renamedItem","onMoveSelectionToItem","erroredItems","reactDndType","errorHandler","componentStack","sendErrorMessage","ErrorFallbackComponent","body","stack","getIDEVersionWithHash","getArch","getPlatformName","getSystemVersion","getUserAgent","ErrorBoundary","FallbackComponent","onError","displayLocaleMetadata","localeMetadata","languageCode","renderLanguageSelectOption","translationRatio","percent","isStarted","languageNativeName","languageName","LanguageDialog","languageDidChange","localesToDisplay","LocalesMetadata","goodProgressLocales","startedLocales","isLoadingLanguage","storageProviders","onChooseProvider","onCreateNewProject","storageProvider","hiddenInOpenDialog","internalName","hiddenInSaveDialog","onConfirm","verifyProjectContent","gdVersion","ExamplesSearchbar","_chips","isBuiltin","chosenExtensionName","onExtensionNameChosen","chips","chosenChip","onChooseChip","GDI18nProvider","catalogs","_loadCatalog","catalog","_loadLanguage","prevProps","setupI18n","getTranslation","getTranslationFunction","webpackAsyncContext","req","__webpack_require__","o","code","ids","t","MarkdownText","ThemeContext","markdownCustomRenderers","makeMarkdownCustomRenderers","isStandaloneText","paragraph","escapeHtml","markdownRootClassName","onEditObjectVariables","VariablesContainer","electronClipboard","internalClipboard","mangleClipboardKind","Clipboard","readText","DismissableAlertMessage","newlyCreatedResource","resourcePath","lastIndexOf","isPathInProjectFolder","copyAllToProjectFolder","resourcePaths","resourceBasename","resourceNewPath","copyFile","normalize","existsSync","newResource","setSmooth","getScaleMode","shouldNeverBeCalled","RaisedButtonWithMenu","RaisedButton","ResourceSelector","_addFrom","_onChangeResourceName","_autoComplete","_onResetResourceName","notExistingError","_editWith","resourceExternalEditor","initialResourceMetadata","initialResourceMetadataRaw","externalEditorOptions","newResourceData","_getResourceSourceItems","displayName","getKind","resourceSourceItems","resourceItems","autoCompleteData","externalEditors","SemiControlledAutoComplete","autoComplete","DeprecatedKeyboardShortcuts","_isControlPressed","metaPressed","rawCtrlPressed","_onKeyDown","isFocused","altPressed","shiftPressed","spacePressed","_onKeyUp","_onMouseDown","mouseMidButtonPressed","_onMouseUp","_onKeyPress","_noop","mount","shouldFollowAxis","shouldNotSnapToGrid","shouldResizeProportionally","shouldScrollHorizontally","shouldZoom","shouldMoveView","addEventListener","removeEventListener","InstancesRenderer","layersRenderers","layerRenderer","getInstanceRect","getInstanceMeasurer","transformRect","transformPoint","endPos","SelectedInstances","onResize","onResizeEnd","onRotate","onRotateEnd","rectanglesContainer","selectedRectangles","resizeButton","resizeIcon","fromImage","rightResizeButton","bottomResizeButton","rotateButton","_screenType","_makeButton","setScreenType","objectButton","onEnd","buttonMode","_renderButton","buttonObject","canvasPosition","shape","buttonSize","smallButtonSize","buttonPadding","newRectangle","instanceRect","selectionRectangle","resizeButtonPos","rightResizeButtonPos","bottomResizeButtonPos","rotateButtonPos","InstancesSelection","highlightedInstance","highlightRectangle","tooltipBackground","setInstance","tooltipInfo","drawRoundedRect","InstancesResizer","instanceSizes","totalDeltaX","totalDeltaY","_roundWidth","_roundHeight","_getSizeDeltaX","proportional","initialSize","_getSizeDeltaY","resizeBy","selectedInstance","endResize","InstancesRotator","instanceAngles","_getNewAngle","initialAngle","atan2","rotateBy","endRotate","InstancesMover","instancePositions","_roundXPosition","noGridSnap","_roundYPosition","_getMoveDeltaX","followAxis","_getMoveDeltaY","moveBy","initialPosition","endMove","pixiGrid","sceneStartPoint","sceneEndPoint","startXPos","startYPos","endXPos","ceil","endYPos","Xpos","start","Ypos","WindowBorder","windowRectangle","getGameResolutionWidth","getGameResolutionHeight","displayedRectangle","windowMask","BackgroundColor","pixiRenderer","FpsLimiter","maxFps","_lastFrameTime","_interval","_forceUpdate","shouldUpdate","delta","forceNextUpdate","stopPIXITicker","ticker","shared","stop","StatusBar","getLastCursorSceneCoordinates","_getLastCursorSceneCoordinates","_statusBarContainer","_statusBarBackground","_statusBarText","resize","CanvasCursor","canvas","canvasArea","dropCursor","DropTarget","makeDropTarget","objectWithContextReactDndType","InstancesEditorContainer","lastContextMenuX","lastContextMenuY","lastCursorX","lastCursorY","fpsLimiter","getZoomFactor","zoomFactor","onChangeOptions","_instancesAdder","_onBackgroundClicked","view","keyboardShortcuts","clearSelection","onInstancesSelected","_onPanMove","sceneDeltaX","sceneDeltaY","scrollBy","_getLayersVisibility","layersVisibility","_onPanEnd","instancesSelected","selectInstances","_onInstanceClicked","_onInstanceDoubleClicked","_onOverInstance","_onDownInstance","initialInstances","insertInitialInstance","selectInstance","_onOutInstance","_onMoveInstance","isInstanceSelected","instancesMover","_onMoveInstanceEnd","onInstancesMoved","_onResize","instancesResizer","_onResizeEnd","onInstancesResized","_onRotate","instancesRotator","_onRotateEnd","onInstancesRotated","clearHighlightedInstance","moveSelection","getLastContextMenuSceneCoordinates","_renderScene","_unmounted","_renderingPaused","canvasCursor","windowBorder","statusBar","nextFrame","requestAnimationFrame","pauseSceneRendering","cancelAnimationFrame","restartSceneRendering","_initializeCanvasAndRenderer","VertexArrayObject","FORCE_NATIVE","preserveDrawingBuffer","antialias","offsetX","offsetY","onmousewheel","zoomBy","wheelDelta","setAttribute","backgroundArea","ViewPosition","initialViewX","initialViewY","Grid","onDeleteSelection","pinchHandler","PinchHandler","_mountEditorComponents","forceRemount","HighlightedInstance","WindowMask","pauseRendering","centerViewOn","scrollToInstance","hover","monitor","getClientOffset","canvasRect","selectedObjectNames","didDrop","onInstancesAdded","showDropCursor","effectsColumn","getEnumeratedEffectMetadata","allEffectDescriptions","effectType","effectMetadata","EffectsList","effectsContainer","onEffectsUpdated","preferences","allEffectMetadata","getExtensionEffectTypes","getEffectMetadata","parametersSchema","parameterName","propertyLabel","propertyDescription","getExtraDescription","effect","getDoubleParameter","setDoubleParameter","getBooleanParameter","setBooleanParameter","getStringParameter","setStringParameter","enumerateEffectsMetadata","addEffect","hasEffectNamed","insertNewEffect","getEffectsCount","chooseEffectType","newEffectType","setEffectType","clearParameters","setEffectDefaultParameters","getEffectAt","getEffectType","removeEffect","PropertiesEditor","renderExtraDescriptionText","EmptyMessage","EffectsListDialog","Dialog","FlatButton","onBackgroundColorChanged","TreeTable","TextField","ColorPicker","SortableLayerRow","effectsCount","onEditEffects","onChangeVisibility","DragHandle","InlineCheckbox","LayersListBody","_onLayerModified","layersCount","containerLayersList","mapReverseFor","hasLayerNamed","onRenameLayer","onRemoveLayer","doRemove","removeLayer","setVisibility","BackgroundColorRow","SortableLayersListBody","LayersList","effectsEditedLayer","_editEffects","_addLayer","insertNewLayer","ScrollView","moveLayer","getGravatarUrl","email","hash","md5","profile","Avatar","Text","PlaceholderLoader","usages","usage","format","createdAt","subscription","onChangeSubscription","planId","ProfileDialog","UserProfileContext","userProfile","authenticated","onRefreshUserProfile","onLogout","ProfileDetails","SubscriptionDetails","CreateProfile","onLogin","onCreateAccount","UsagesDetails","BehaviorPropertiesEditor","getContent","ShapePreview","draggedIndex","_onVertexDown","onMoveVertex","polygonOrigin","_renderBox","dimensionA","dimensionB","fixedWidth","fixedHeight","_renderCircle","_renderEdge","halfLength","_renderPolygon","filerule","PolygonEditor","_isPolygonConvex","edges","v1","v2","zProductIsPositive","alignedX","alignedY","onChangeVertexX","onChangeVertexY","toString","NumericProperty","propertyName","BitProperty","spacing","Checkbox","Physics2Editor","_isBitEnabled","bitsValue","_enableBit","bits","Array","layersValues","masksValues","ImagePreview","newX","newY","splice","components","ProjectPropertiesDialog","_subscriptionChecker","gameResolutionWidth","gameResolutionHeight","adaptGameResolutionAtRuntime","author","version","packageName","adMobAppId","scaleMode","sizeOnStartupMode","showGDevelopSplash","minFPS","maxFPS","isFolderProject","setGameResolutionSize","setAdaptGameResolutionAtRuntime","setPackageName","setOrientation","setAdMobAppId","setScaleMode","setSizeOnStartupMode","setMinimumFPS","setMaximumFPS","getLoadingScreen","setFolderProject","displayProjectErrorsBox","getErrors","getAdaptGameResolutionAtRuntime","getPackageName","getOrientation","getAdMobAppId","getSizeOnStartupMode","isGDevelopSplashShown","getMinimumFPS","getMaximumFPS","autoFocus","checkHasSubscription","validatePackageName","SubscriptionChecker","subscriptionChecker","mode","ExtensionsSearchDialog","EventsFunctionsExtensionsContext","eventsFunctionsExtensionOpener","getEventsFunctionsExtensionOpener","readEventsFunctionExtensionFile","serializedExtension","hasEventsFunctionsExtensionNamed","addSerializedExtensionToProject","importExtension","ExtensionsSearch","onRegistryLoaded","memo","SvgIcon","d","noIndentNestedList","itemName","itemTextField","noMarginTextFieldInListItemTopOffset","ProjectStructureItem","onRefresh","indentNestedItems","List","groupBackgroundColor","separatorColor","nestedListStyle","displayReloadButton","onReload","reloadButtonTooltip","Item","editingName","displayMenuButton","buildExtraMenuTemplate","onEditName","addLabel","canPaste","onDuplicate","canMoveUp","onMoveUp","canMoveDown","onMoveDown","ProjectManager","editedPropertiesLayout","editedVariablesLayout","renamedItemKind","renamedItemName","projectPropertiesDialogOpen","projectVariablesEditorOpen","extensionsSearchDialogOpen","layoutPropertiesDialogOpen","layoutVariablesDialogOpen","_onEditName","_copyLayout","_cutLayout","onDeleteLayout","_pasteLayout","copiedLayout","newLayout","insertNewLayout","updateBehaviorsSharedData","_onProjectItemModified","_duplicateLayout","_addLayout","_onOpenLayoutProperties","_onOpenLayoutVariables","_addExternalEvents","insertNewExternalEvents","_addExternalLayout","hasExternalLayoutNamed","insertNewExternalLayout","_addEventsFunctionsExtension","insertNewEventsFunctionsExtension","_moveUpLayout","swapLayouts","_moveDownLayout","getLayoutsCount","_copyExternalEvents","_cutExternalEvents","onDeleteExternalEvents","_pasteExternalEvents","copiedExternalEvents","newExternalEvents","_duplicateExternalEvents","_moveUpExternalEvents","swapExternalEvents","_moveDownExternalEvents","getExternalEventsCount","_copyExternalLayout","_cutExternalLayout","onDeleteExternalLayout","_pasteExternalLayout","copiedExternalLayout","newExternalLayout","_duplicateExternalLayout","_moveUpExternalLayout","swapExternalLayouts","_moveDownExternalLayout","getExternalLayoutsCount","_copyEventsFunctionsExtension","_cutEventsFunctionsExtension","onDeleteEventsFunctionsExtension","_duplicateEventsFunctionsExtension","_pasteEventsFunctionsExtension","copiedEventsFunctionsExtension","newEventsFunctionsExtension","onReloadEventsFunctionsExtensions","_moveUpEventsFunctionsExtension","swapEventsFunctionsExtensions","_moveDownEventsFunctionsExtension","getEventsFunctionsExtensionsCount","_onSearchChange","_onRequestSearch","_renderMenu","hasMainMenu","onSaveProject","onSaveProjectAs","onExportProject","onCloseProject","onOpenPreferences","onOpenProfile","isFullscreen","requestFullscreen","eventsFunctionsExtensionsError","forceOpen","initiallyOpen","autoGenerateNestedIndicator","renderNestedItems","VariableTree","onOpenPlatformSpecificAssets","onOpenResources","filterProjectItemsList","onRenameLayout","onAddLayout","onRenameExternalEvents","onAddExternalEvents","enumerateExternalLayouts","onOpenExternalLayout","onRenameExternalLayout","onAddExternalLayout","onOpenEventsFunctionsExtension","onRenameEventsFunctionsExtension","onAddEventsFunctionsExtension","searchBar","ScenePropertiesDialog","onEditVariables","SceneVariablesDialog","GDevelopLogo","ScrollBackground","palette","canvasColor","innerContainer","centerContainer","logoPaper","StartPage","aboutDialogOpen","forceUpdateEditor","canOpen","onOpen","onOpenProjectManager","onOpenAboutDialog","onOpenHelpFinder","onOpenLanguageDialog","Paper","ToolbarIcon","InstructionSelector","enumerateAllInstructions","InstructionOrExpressionSelector","parametersEditor","InstructionEditor","chooseType","_instructionParametersEditor","InstructionParametersEditor","instructionParametersEditor","InstructionEditorDialog","flexBody","EditVariableRow","hasClipboard","Copy","Paste","fixSomeHtmlCharacters","algoliaOptions","hitsPerPage","DocSearchArea","client","algoliasearch","_handleSearchTextChange","_launchSearchRequest","debounce","search","indexName","query","hits","_renderResult","result","hierarchy","lvl0","lvl1","lvl2","lvl3","lvl4","lvl5","lvl6","objectID","visibility","HelpFinder","_sendHelpSearch","sendHelpSearch","sendHelpFinderOpened","SubscriptionPendingDialog","hasPlan","callback","delay","savedCallback","setInterval","clearInterval","useInterval","CircularProgress","descriptionText","card","bulletIcon","bulletText","SubscriptionDialog","isLoading","subscriptionPendingDialogOpen","choosePlan","plan","sendChoosePlanClicked","stripeSubscriptionId","changeUserSubscription","uid","handleUpdatedSubscriptionSuccess","handleUpdatedSubscriptionFailure","getRedirectToCheckoutUrl","_isLoading","sendSubscriptionDialogShown","_renderPrice","monthlyPriceInEuros","getSubscriptionPlans","Card","CardHeader","subheader","smallDescription","CardContent","descriptionBullets","descriptionBullet","isLocalAppOnly","extraDescription","CardActions","LeftLoader","PlaceholderMessage","ChangelogDialog","Changelog","onUpdated","ChangelogDialogContainer","defaultOpen","ResponsiveWidthMeasurer","NewInstructionEditorDialog","hasObjectChosen","getInitialStepName","getInitialTab","instructionHelpPage","getHelpPath","renderInstructionOrObjectSelector","InstructionOrObjectSelector","renderParameters","noHelpButton","renderObjectInstructionSelector","stepBackFrom","flexRowBody","SelectColumns","getEventsFunctionName","EventsFunctionsList","renamedEventsFunction","_deleteEventsFunction","askForConfirmation","removeEventsFunction","_onEventsFunctionModified","destinationEventsFunction","moveEventsFunction","getEventsFunctionPosition","_copyEventsFunction","_cutEventsFunction","_pasteEventsFunction","copiedEventsFunction","newEventsFunction","insertNewEventsFunction","_renderEventsFunctionMenuTemplate","_addNewEventsFunction","eventsFunctionName","setFunctionType","item","filterEventFunctionsList","getEventsFunctionAt","enumerateEventsFunctions","SortableVirtualizedItemList","onAddNewItem","addNewItemLabel","getEventsBasedBehaviorName","EventsBasedBehaviorsList","renamedEventsBasedBehavior","_deleteEventsBasedBehavior","_onEventsBasedBehaviorModified","destinationEventsBasedBehavior","getPosition","_copyEventsBasedBehavior","_cutEventsBasedBehavior","_pasteEventsBasedBehavior","copiedEventsBasedBehavior","newEventsBasedBehavior","_renderEventsBasedBehaviorMenuTemplate","_addNewEventsBasedBehavior","filterEventsBasedBehaviorsList","timeField","timeIcon","AnimationPreview","currentFrameIndex","currentFrameElapsedTime","paused","timeBetweenFrames","nextUpdate","replay","play","pause","_updateAnimation","spritesContainer","newFrameIndex","newFrameElapsedTime","onChangeTimeBetweenFrames","time","precision","repeatContainer","spacer","formatTime","Number","DirectionTools","timeError","previewOpen","saveTimeBetweenFrames","newTime","newTimeIsValid","isNaN","setLooping","check","openPreview","imageResourceExternalEditors","UnknownEvent","unknownEvent","WhileEvent","registerEvent","renderFunction","monacoEditorOptions","scrollBeyondLastLine","minimap","monacoCompletionsInitialized","monacoThemesInitialized","CodeEditor","MonacoEditor","setupEditorThemes","monaco","getAllThemes","codeEditorTheme","themeData","defineTheme","setupEditorCompletions","languages","typescript","javascriptDefaults","setCompilerOptions","ScriptTarget","ES6","allowNonTsExtensions","allowJs","checkJs","importAllJsFilesFromFolder","folderPath","readdir","filenames","endsWith","readFile","fileError","addExtraLib","runtimePath","extensionsPath","eventToolsPath","folderNames","folderName","setupAutocompletions","_handleContextMenu","loadMonacoEditor","handleLoadError","default","theme","editorWillMount","editorDidMount","ExpressionParametersEditor","isCodeOnly","parameterValues","onChangeParameter","getNonCodeOnlyParametersCount","minHeightContainer","ExpressionParametersEditorDialog","onDone","editedIndex","oldValue","columnContainer","fieldContainer","subPropertiesEditorContainer","subHeader","getFieldValue","getFieldLabel","_onInstancesModified","onInstancesModified","_getFieldDescription","descriptions","_renderInputField","hexToRGBColor","hex","_renderSelectField","_renderResourceField","fields","hexNumber","removeTag","tags","tag","selectedTag","noTagLabel","getAllTags","onEditTags","editTagsLabel","allTags","footerMenuItems","newTags","from","Set","getTagsFromString","tagsString","getStringFromTags","getObjectGroupListItemKey","getObjectListItemKey","getObjectOrObjectGroupListItemValue","objectOrObjectGroupName","getInstructionListItemKey","fullGroupName","getInstructionListItemValue","getSubheaderListItemKey","mangleName","getFreeFunctionCodeNamespace","codeNamespacePrefix","loadProjectEventsFunctionsExtensions","eventsFunctionCodeWriter","loadProjectEventsFunctionsExtension","getEventsFunctionsExtensionAt","skipCodeGeneration","generateEventsFunctionExtension","addNewExtension","PlatformExtension","declareExtension","codeGenerationContext","extensionIncludeFiles","getIncludeFileFor","getExtensionIncludeFiles","declareBehaviorMetadata","codeNamespace","getBehaviorFunctionCodeNamespace","includeFile","setIncludeFile","addIncludeFile","behaviorMethodMangledNames","MapStringString","declareBehaviorPropertiesInstructionAndExpressions","eventsFunctionMangledName","instructionOrExpression","declareBehaviorInstructionOrExpressionMetadata","declareEventsFunctionParameters","getCodeExtraInformation","setFunctionName","includeFiles","SetString","behaviorCodeGenerator","BehaviorCodeGenerator","generateRuntimeBehaviorCompleteCode","writeBehaviorCode","generateBehavior","generateFreeFunction","extensionOrBehaviorMetadata","eventsFunctionsExtensionOrEventsBasedBehavior","declareInstructionOrExpressionMetadata","addCodeOnlyParameter","codeExtraInformation","EventsFunctionsExtensionCodeGenerator","generateFreeEventsFunctionCompleteCode","writeFunctionCode","unloadProjectEventsFunctionsExtensions","removeExtension","isAnEventFunctionMetadata","getFunctionNameFromType","parts","getFreeEventsFunctionType","getParametersIndexOffset","isEventsBasedBehaviorMethod","toolbarGroupStyle","ToolbarGroup","GDevelopThemeContext","DefaultTheme","borderLeftStyle","borderLeftWidth","UnsavedChangesContext","sealUnsavedChanges","UnsavedChangesContextProvider","Provider","Toggle","toggled","onToggle","initialUserProfile","limits","progress","defaultState","reloadProjectEventsFunctionsExtensions","borderRadius","swatch","background","boxShadow","popover","_swatch","displayColorPicker","handleClick","handleClose","displayedColor","onClickAway","onUpdateProperty","propertyNames","charAt","addButton","InstructionsList","_onPasteInstructions","instructions","instructionContext","isInstructionSelected","instructionsListContext","addButtonDefaultLabel","onPointerEnter","hasClipboardConditions","hasClipboardActions","onPointerLeave","allExpressions","tree","expressionInfo","pathInTree","compact","groupInfo","existingGroupInfo","displayedName","findInTree","instructionTreeNode","instructionOrGroup","searchResult","freeActionsToAddToObject","BuiltinObject","freeConditionsToAddToObject","freeActionsToAddToBehavior","freeConditionsToAddToBehavior","Physics2","freeInstructionsToRemove","filterInstructionsToRemove","typesToRemove","types","enumerateExtraBehaviorInstructions","extensionsExtraInstructions","objectExtraInstructions","instructionMetadataMap","getAllConditions","getAllActions","enumerateInstruction","enumerateExtraObjectInstructions","instrMetadata","groupName","getGroup","isPrivate","enumerateExtensionInstructions","instructionsTypes","allInstructions","allObjectsTypes","allBehaviorsTypes","getBehaviorsTypes","extensionFreeInstructions","getAllConditionsForObject","getAllActionsForObject","getBehaviorMetadata","getAllConditionsForBehavior","getAllActionsForBehavior","enumerateObjectAndBehaviorsInstructions","objectBehaviorNames","objectBehaviorTypes","hasObjectType","hasBaseObjectType","behaviorTypes","orderFirstInstructionsWithoutGroup","enumerateFreeInstructions","allFreeInstructions","filterInstructionsList","lowercaseSearch","exactMatch","unshift","favorExactMatch","enumeratedInstructionOrExpressionMetadata","getObjectParameterIndex","firstParameterType","secondParameterType","targetElement","yPosition","scrollViewElement","scrollViewYPosition","scrollTop","paddingBottom","minWidth","InlinePopover","isPreviewFirstSceneOverriden","previewFirstSceneName","useSceneAsPreviewFirstScene","togglePreviewFirstSceneOverride","PreviewButtons","canOverridePreviewFirstScene","previewIcon","userHasTouchedScreen","onFirstTouch","ScreenTypeMeasurer","imagePreviewContainer","touchAction","box","errored","_handleImageError","_handleImageLoaded","imgElement","naturalWidth","clientWidth","naturalHeight","clientHeight","_zoomBy","imageZoomFactorDelta","_zoomTo","imageSource","containerWidth","imageLoaded","imagePositionLeft","imageStyle","overlayStyle","imagePositionTop","onWheel","onLoad","hasValidAnimation","hasValidDirection","copyPoint","originalPoint","destinationPoint","destinationSprite","isSamePoint","point1","point2","sprite2","sprite1","sprite1Point","getPoint","originalPolygon","haveSameCollisionMasks","sprite1CollisionMask","sprite2CollisionMask","sprite1Polygon","polygon1","polygon2","polygon1Vertices","polygon2Vertices","isSamePolygon","spritePtrs","spritesToDelete","removeSprite","spritesToDuplicate","spriteToDuplicate","newSprite","ElectronMenuImplementation","buildFromTemplate","template","menuTemplate","showMenu","Menu","browserWindow","menu","popup","async","getMenuProps","SubMenuItem","menuOpen","setMenuOpen","anchorElement","setAnchorElement","useCallback","MenuItem","dense","TransitionComponent","Fade","submenu","MaterialUIMenuImplementation","_onClose","Divider","ListItemIcon","ListItemText","MaterialUIContextMenu","anchorX","anchorY","menuImplementation","anchorPosition","anchorReference","ElectronContextMenu","getLayoutAt","getExternalEventsAt","getExternalLayoutAt","picker","ColorField","selectedInstructions","selectedEvents","selectedInstructionsLists","getSelectedEvents","eventContext","getSelectedEventContexts","getSelectedInstructions","getSelectedInstructionsContexts","getSelectedInstructionsListsContexts","hasInstructionSelected","hasSelectedAtLeastOneCondition","hasInstructionsListSelected","hasSomethingSelected","selectEvent","multiSelection","existingSelection","selectInstruction","textFieldContainer","textFieldAndHightlightContainer","expressionSelectorPopoverContent","backgroundHighlightingWithFloatingLabel","backgroundHighlightingInline","backgroundHighlightingInlineWithFloatingLabel","_fieldElement","_inputElement","popoverOpen","parametersDialogOpen","selectedExpressionInfo","validatedValue","errorHighlights","_enqueueValidation","_openExpressionPopover","_handleFocus","_handleRequestClose","_handleChange","_handleBlur","cancel","_handleExpressionChosen","insertExpression","cursorPosition","functionCall","formatExpressionCall","setSelectionRange","_insertAutocompletion","newCaretLocation","parser","ExpressionParser2","expressionNode","parseExpression","expressionValidator","ExpressionValidator","visit","errors","getStartPosition","getEndPosition","getMessage","otherErrorsCount","hasMultipleErrors","extractErrors","completionDescriptions","ExpressionCompletionFinder","getCompletionDescriptionsFor","newAutocompletions","Element","longDescription","popoverStyle","backgroundHighlightingStyle","_scrollView","_selectedItem","initialInstructionTypePath","displayedInstructionsList","hasResults","onSubmitSearch","renderInstructionOrExpressionListItem","instructionOrExpressionMetadata","selectedValue","renderInstructionTree","initiallyOpenedPath","selectedItemRef","getNamespaceSeparator","oneColumnContainer","twoColumnsContainer","ConditionsActionsColumns","getExperimentalObjects","getExtraInstructionInformation","setExtensionInformation","generatedBehavior","BehaviorJsImplementation","propertyFound","propertyType","setStringValue","setDoubleValue","setBoolValue","behaviorProperties","MapStringPropertyDescriptor","newProperty","toPropertyDescriptor","hasChild","getChild","getStringValue","getDoubleValue","getBoolValue","initializeContent","BehaviorsSharedData","EventsFunctionsExtension","getFunctionType","addExpression","StringExpression","addStrExpression","addCondition","getSentence","addAction","addScopedCondition","addScopedAction","addObjectAndBehaviorParameters","addParameter","setExtraInfo","setPrivate","getterName","getBehaviorPropertyGetterName","setterName","getBehaviorPropertySetterName","EventsBasedBehavior","getPropertyExpressionName","getPropertyConditionName","useStandardRelationalOperatorParameters","getPropertyActionName","useStandardOperatorParameters","setManipulatedType","setGetter","getParameters","parameter","isOptional","setParameterLongDescription","addNode","currentNode","newNode","replaceNode","oldNode","defaultToolbarControls","renderMosaicWindowPreview","MosaicWindow","renderPreview","EditorMosaic","mosaicNode","limitToOneSecondaryEditor","openedEditorNames","getLeaves","secondaryEditorName","_onChange","mosaicRootClassName","renderTile","editorConfigurations","registerEditorConfiguration","getDefaultObjectJsImplementationPropertiesEditor","asObjectJsImplementation","release","SpriteObject","TiledSpriteObject","PanelSpriteObject","TextObject","ShapePainterEditor","ShapePainterObject","TextEntryObject","asTextEntryObject","SkeletonObject","castObject","getUserUsages","GDevelopUsageApi","getUserLimits","getUserSubscription","newSubscriptionDetails","ItemRow","errorStatus","hideMenuButton","connectIconDragSource","itemStyle","selectedErrorBackgroundColor","selectedWarningBackgroundColor","errorTextColor","warningTextColor","borderTop","DropIndicator","_renderItemRow","getItemThumbnail","isItemBold","onEditItem","nameBeingEdited","canMoveSelectionToItem","listItemWith32PxIconHeight","listItemWithoutIconHeight","rowRenderer","canDrag","dropTarget","ResourceThumbnail","ImageThumbnail","selectorContainer","resourceThumbnail","ResourceSelectorWithThumbnail","AddListItem","displayAddIcon","SearchListItem","displaySearchIcon","_apply","serializableObject","serializeTo","unserializeFrom","_cancel","TreeTableRow","TreeTableCell","handle","handleColor","SortableHandle","iconText","thanksText","SubscriptionCheckDialog","_closeDialog","sendSubscriptionCheckDismiss","sendSubscriptionCheckDialogShown","_dialog","dialog","EventsSheet","_containerDiv","_keyboardShortcuts","inlineEditing","editedInstruction","analyzedEventsContextResult","serializedEventsToExtract","copySelection","cutSelection","pasteEventsOrInstructions","_toggleSearchPanel","history","getHistoryInitialState","historyMaxSize","editedParameter","inlineEditingAnchorEl","inlineInstructionEditorAnchorEl","inlineEditingChangesMade","showSearchPanel","textEditedEvent","_eventSearcher","_searchPanel","addSubEvents","insertNewEvent","_saveChangesToHistory","_eventsTree","_selectionCanHaveSubEvents","some","_selectionCanToggleDisabled","isExecutable","addNewEvent","context","hasEventsSelected","insertTopOfSelection","insertions","selectedEvent","newEvents","openEventTextDialog","editableEvents","closeEventTextDialog","openAddInstructionContextMenu","openInstructionEditor","moveSelectionToInstruction","destinationContext","moveSelectionToInstructionsList","destinationIndex","deleteEvents","multiSelect","openEventContextMenu","eventContextMenu","openInstructionContextMenu","instructionContextMenu","openParameterEditor","parameterContext","closeParameterEditor","toggleDisabled","setDisabled","deleteInstructions","eventsRemover","EventsRemover","addEventToRemove","addInstructionToRemove","launch","_ensureFocused","copySelectionToClipboard","pasteEvents","pasteEventsFromClipboardInSelection","pasteInstructions","pasteInstructionsFromClipboardInSelection","pasteInstructionsInInstructionsList","pasteInstructionsFromClipboardInInstructionsList","_invertSelectedConditions","setInverted","saveToHistory","newHistory","_openEventsContextAnalyzer","eventsContextAnalyzer","EventsContextAnalyzer","EventsList","insertEvent","getEventsContext","_closeEventsContextAnalyzer","extractEventsToFunction","moveEventsIntoNewGroup","_replaceSelectionByGroupOfEvents","_replaceSelectionByEventsFunction","contexts","action","createNewInstructionForEventsFunction","insertEvents","_ensureEventUnfolded","_replaceInEvents","doReplaceInEvents","inputs","_searchInEvents","doSearchInEvents","_onEventMoved","_renderInstructionEditorDialog","newInstructionEditorDialog","closeInstructionEditor","containerDivElement","activeElement","contains","prevState","networkPreview","saveChanges","eventSearcher","onAddNewEvent","searchPanel","setParameter","hasClipboardEvents","touchScreenMessage","DefaultField","mouse","ObjectField","relationalOperator","operator","yesorno","trueorfalse","string","stringWithSelector","scenevar","globalvar","objectvar","musicfile","soundfile","videoResource","jsonResource","ColorExpressionField","police","joyaxis","forceMultiplier","sceneName","inlineRenderers","renderInlineDefaultField","renderInlineObjectWithThumbnail","userFriendlyTypeName","rawType","fieldType","_allowedObjectType","allowedObjectType","errorTextIfInvalid","iconPath","RenderedIconInstance","buttonRef","HTMLButtonElement","getElementsByTagName","filterOutCodeOnlyParameters","array","firstParameterIndex","parameterTypes","functionArgs","emptyContainer","parametersContainer","invertToggle","setParametersCount","objectParameterIndex","isParameterVisible","_firstVisibleField","isDirty","_openExtension","getExtensionAndConditionMetadata","getExtension","getExtensionAndActionMetadata","_getVisibleParametersCount","helpPage","instructionExtraInformation","parameterFieldIndex","parameterMetadataType","isFirstVisibleParameterField","labelPosition","findInstruction","getChosenObjectState","discardInstructionTypeIfNotInObjectInstructions","enumeratedInstructionMetadata","newState","updateState","InfoBar","viewX","viewY","viewRotation","hasSelectedInstances","multiselect","unselectInstance","random","enumerateVariables","enumerateVariableAndChildrenNames","names","getAllChildrenNames","childName","getNameAt","VariableField","variableName","GD_STARTUP_TIMES","drawerContent","MainFrame","createDialogOpen","introDialogOpen","openConfirmDialogOpen","genericDialogOpen","loadingProject","previewLoading","currentProject","currentFileMetadata","projectManagerOpen","editorTabs","genericDialog","snackMessage","snackMessageOpen","preferencesDialogOpen","languageDialogOpen","profileDialogOpen","subscriptionDialogOpen","openFromStorageProviderDialogOpen","saveToStorageProviderDialogOpen","platformSpecificAssetsDialogOpen","helpFinderDialogOpen","gdjsDevelopmentWatcherEnabled","_resourceSourceDialogs","_previewLauncher","_openInitialFileMetadata","isAfterUserInteraction","storageProviderOperations","initialFileMetadataToOpen","doesInitialOpenRequireUserInteraction","openFromFileMetadata","openSceneOrProjectManager","_openOpenConfirmDialog","_loadExtensions","extensionsLoader","loadAllExtensions","getNotNullTranslationFunction","loadingResults","successLoadingResults","loadingResult","failLoadingResults","dangerous","dangerousLoadingResults","loadFromSerializedProject","serializedProject","fileMetadata","timePromise","newProject","ProjectHelper","createNewGDJSProject","loadFromProject","closeProject","burstAllUrlsCache","setProjectFile","fileIdentifier","hasAutoSave","onGetAutoSave","getOpenErrorMessage","canOpenAutosave","errorMessage","closeApp","quit","openProjectManager","toggleProjectManager","refs","setEditorToolbar","editorToolbar","_togglePreviewFirstSceneOverride","addLayout","addExternalLayout","addExternalEvents","addEventsFunctionsExtension","deleteLayout","removeLayout","deleteExternalLayout","removeExternalLayout","deleteExternalEvents","removeExternalEvents","deleteEventsFunctionsExtension","removeEventsFunctionsExtension","renameLayout","renameExternalLayout","renameExternalEvents","renameEventsFunctionsExtension","_launchLayoutPreview","previewedLayout","launchLayoutPreview","_launchExternalLayoutPreview","launchExternalLayoutPreview","openLayout","openEventsEditor","openSceneEditor","sceneEditorOptions","_setPreviewFirstScene","onAutoSaveProject","renderPreviewLauncher","canDoNetworkPreview","openDebugger","onEditObject","_onChooseResource","eventsEditorOptions","openExternalEvents","_openInstructionOrExpression","_onCreateEventsFunction","tabsWithSceneEditor","tabsWithSceneAndEventsEditors","externalEventsName","openExternalLayout","externalLayoutName","openEventsFunctionsExtension","eventsFunctionsExtensionName","onLoadEventsFunctionsExtensions","openResources","openStartPage","chooseProject","openCreateDialog","askToCloseProject","openAboutDialog","openHelpFinderDialog","openLanguage","openSubscription","foundTab","insertEventsFunction","openOpenFromStorageProviderDialog","chooseProjectWithStorageProviderPicker","onOpenWithPicker","saveProject","saveProjectAs","_showSnackMessage","wasSaved","openSaveToStorageProviderDialog","saveProjectAsWithStorageProvider","openExportDialog","_openIntroDialog","_openGenericDialog","openPreferences","openProfile","_onChangeEditorTab","_onEditorTabActive","_onCloseEditorTab","_onCloseOtherEditorTabs","_onCloseAllEditorTabs","sourceName","resourceSourceDialog","chooseResources","openPlatformSpecificAssets","setUpdateStatus","notificationTitle","getUpdateNotificationTitle","notificationBody","getUpdateNotificationBody","Notification","onclick","simulateUpdateDownloaded","releaseName","simulateUpdateAvailable","_closeSnackMessage","integratedEditor","performance","introDialog","getStartupTimesSummary","_languageDidChange","reloadBuiltinExtensions","renderExportDialog","renderCreateDialog","useStorageProvider","renderGDJSDevelopmentWatcher","renderMainMenu","showLoader","loading","onChooseProject","onCloseApp","onCreateProject","onOpenStartPage","onOpenAbout","onOpenLanguage","PaperProps","displayRightCloseButton","showProjectIcons","hasProject","exportProject","requestUpdate","autoHideDuration","ContentProps","onExport","previewLauncher","resourceSource","languageChanged","closeButtonWidth","imageThumbnail","selectedBorderColor","groupTextColor","deprecatedGroupTextColor","createMuiTheme","typography","common","paper","light","lighten","main","dark","darken","contrastText","secondary","overrides","MuiTypography","h6","MuiInput","underline","MuiAppBar","colorPrimary","MuiIconButton","MuiListItemIcon","MuiTabs","MuiTab","textColorPrimary","MuiButtonBase","MuiButton","SortableVariableRow","SortableAddVariableRow","VariablesListBody","SortableVariablesListBody","VariablesList","selectedVariables","_selectVariable","variableAndName","serializedVariable","paste","newVariable","Variable","otherVariableAndName","removeRecursively","_updateOrDefineVariable","_getVariableOrigin","_renderVariableChildren","parentVariable","_renderVariableAndChildrenRows","parentOrigin","renameChild","rename","emptyExplanation","messageStyle","containerInheritedVariablesTree","containerVariablesTree","editRow","toolColumnHeader","addError","extraExplanation","chip","chipsList","SearchbarWithChips","randomColor","seed","luminosity","setWindowDefaultTitle","setStopSoundsOnStartup","shouldStopSoundsOnStartup","stopSoundsOnStartup","propertiesEditors","getAllBehaviorSharedDataNames","sharedDataContent","getBehaviorSharedData","behaviorSharedData","getBehaviorSharedDatas","onOpenMoreSettings","getPointer","SPRITE_SIZE","spriteThumbnail","checkboxContainer","editorBarHeight","appBar","displayLeftCloseButton","edge","EventsEditor","getLayoutSerializedElements","Column","marginsSize","Spacer","ObjectSelector","rest","objectAndGroups","getObjectsAndGroupsDataSource","hasValidChoice","loadedFontFamilies","loadedTextures","invalidTexture","asImageResource","isSmooth","baseTexture","NEAREST","onProgress","onComplete","loader","removeAllListeners","allResources","totalCount","loadingCount","once","loadedResources","_initializeTexture","fromVideo","LINEAR","preload","slugs","fullFilename","loadedFace","getDefaultValue","getExtensionPrefix","enumerateExpressionMetadataMap","expressions","exprMetadata","isShown","getAllStrExpressions","getAllExpressions","extensionAndObjectMetadata","getExtensionAndObjectMetadata","objectsExpressions","getAllStrExpressionsForObject","getAllExpressionsForObject","extensionAndBehaviorMetadata","getExtensionAndBehaviorMetadata","getAllStrExpressionsForBehavior","getAllExpressionsForBehavior","behaviorsExpressions","apply","enumeratedExpression","initiallyOpenedKey","restOfInitiallyOpenedPath","instructionInformation","groupOfInstructionInformation","ParameterMetadataTools","getObjectParameterIndexFor","shortenString","maxLength","sourceSpec","getItem","targetSpec","InnerDragSourceAndDropTarget","DragSource","connect","dragSource","shallow","eventsCount","conditionsCount","actionsCount","conditionsList","clipboardContent","insertInstructions","InnerDropTarget","chipContainer","columnName","undoHistory","redoHistory","maxSize","newUndoHistory","newCurrent","groups","parameterGroups","referencedObjectOrGroupName","parameterGroupNames","parameterObjectNames","newParameter","EventsFunctionParametersEditor","longDescriptionShownIndexes","_addParameter","_removeParameter","removeFromVectorParameterMetadata","_addLongDescription","_removeLongDescription","setLongDescription","isParameterDisabled","isParameterDescriptionAndTypeShown","isParameterLongDescriptionShown","parametersIndexOffset","validateParameterName","ObjectTypeSelector","getDefaultName","flexSrink","getSentenceErrorText","sentence","missingParameters","isBehavior","expectedString","getFullNameHintText","getDescriptionHintText","EventsFunctionPropertiesEditor","setSentence","CloseButton","mosaicActions","mosaicWindowActions","getPath","defaultBody","noMarginBody","actionsContainerWithSecondaryActions","dialogActions","dialogContentStyle","fullScreen","disableBackdropClick","disableEscapeKeyDown","_onBehaviorEdited","ObjectGroupEditorDialog","ObjectGroup","viewBox","fillRule","layoutChooserOpen","setAssociatedLayout","openLayoutChooser","getAssociatedLayout","helpText","LayoutChooserDialog","selectedLayoutName","chooseLayout","aria-label","getAssociatedSettings","getUiSettings","getInitialInstances","uiSettings","initialUiSettings","FullSizeInstancesEditor","InstancesEditor","instancesDrawerPaperProps","initialEditors","initialEditorsSmallWindow","SceneEditor","showObjectsListInfoBar","showPropertiesInfoBar","instancesListOpen","showLayersInfoBar","setupGridOpen","openSceneProperties","scenePropertiesDialogOpen","openObjectEditor","selectedInstanceObjectName","editObjectByName","variablesEditedInstance","editObjectVariables","variablesEditedObject","editLayoutVariables","editedObject","editedObjectWithContext","setUiSettings","_onObjectSelected","selectedObjectName","_createNewObjectAndInstanceUnderCursor","newObjectInstanceSceneCoordinates","_objectsList","newObjectDialogOpen","_onAddInstanceUnderCursor","objectSelected","_addInstance","_onInstancesAdded","_onInstancesSelected","uniq","forceUpdatePropertiesEditor","_onInstancesMoved","_onInstancesResized","_onInstancesRotated","_onSelectInstances","_addInstanceForNewObject","_onRemoveLayer","layerRemoveDialogOpen","onCloseLayerRemoveDialog","newLayer","removeAllInstancesOnLayer","moveInstancesToLayer","_onRenameLayer","_onDeleteObject","globalObjectOrGroupRemoved","objectOrGroupRemovedInLayout","_onRenameEditedObject","_onRenameObject","globalObjectOrGroupRenamed","objectOrGroupRenamedInLayout","_onContextMenu","useLastCursorPosition","serializedSelection","serializedInstance","forceUpdateObjectsList","_propertiesEditor","reloadResourcesFor","resourcesInUse","ResourcesInUseHelper","exposeResources","objectResourceNames","getAllImages","loadTextures","_getAllObjectTags","tagsSet","_buildObjectTagsMenuTemplate","selectedObjectTags","objectsListOpen","layersListOpen","zOrderFinder","propertiesEditor","onDeleteObject","onObjectCreated","onObjectSelected","onRenameObject","onObjectPasted","onChangeSelectedObjectTags","getAllObjectTags","objectsList","targetTouches","_lastPinchCenterX","_lastPinchCenterY","_startPinch","_onPinchMove","centerX","centerY","_getZoomFactor","_viewPosition","_setZoomFactor","_endPinch","_unregisterCanvasPinchDetector","onPinchStart","onPinchMove","onPinchEnd","lastPinch","dx","dy","distance","sqrt","date","newCenter","scaleChange","registerCanvasPinchDetector","gridSize","gridOffset","SpriteSelector","SceneEditorContainer","timeFunction","fn","onResult","t0","promiseFn","t1","i18nModule","ExplanationHeader","DoneFooter","renderGameButton","func","cppVector","SetupExportHeader","exportState","updateExportState","targetName","prevExportState","runExtensionSanityTests","jsExtensionModule","testResults","rawError","loadExtension","createExtension","ex","testsResult","emptyStorageProvider","createOperations","ProjectStorageProviders","defaultStorageProvider","appArguments","candidates","currentStorageProvider","getFileMetadataFromAppArguments","computeInitialFileMetadataToOpen","renderDialog","_setDialog","_useStorageProvider","currentStorageProviderOperations","setDialog","closeDialog","onPlay","onPause","canPlay","canPause","onOpenProfiler","ToolbarSeparator","InspectorsList","_renderInspectorList","gameData","getInspectorDescriptions","inspectorDescription","fullInspectorPath","getSubInspectors","onChooseInspector","transformVariable","_isStructure","_children","mapValues","_stringDirty","_value","_str","collapsed","_variables","items","enableClipboard","displayDataTypes","displayObjectSize","onCall","namespace","new_value","handleEdit","groupArraysAfterLength","runtimeObject","Angle","Layer","hidden","VariablesContainerInspector","args","transformLayer","_cameraRotation","_zoomFactor","_hidden","_cameraX","_cameraY","_timeScale","runtimeScene","_timeManager","Layers","_layers","RuntimeSceneInspector","_objects","gdjsRuntimeGame","renderInspector","gdjsStack","_name","instancesList","RuntimeObjectInspector","MeasuresTable","collapsedPaths","_convertToDataRows","parentSection","section","profilerMeasures","parentPercent","totalPercent","isCollapsed","_isSectionCollapsed","hasSubsections","subsections","flatMap","subsection","subsectionName","_toggleSection","_renderSectionNameCell","rowData","dataRows","cellRenderer","tableContainer","Profiler","onStart","onStop","profilerOutput","profilingInProgress","stats","framesCount","LinearProgress","framesAverageMeasures","DebuggerContent","selectedInspector","selectedInspectorFullPath","rawMode","_editors","openProfiler","onStartProfiler","onStopProfiler","inspectors","RawContentInspector","profiler","DebuggerSelector","hasDebuggers","debuggerIds","selectedId","onChooseDebugger","ipcRenderer","Debugger","debuggerServerStarted","debuggerServerError","debuggerGameData","profilerOutputs","_debuggerContents","_removeServerListeners","_startServer","remainingDebuggerIds","debuggerId","_handleMessage","send","command","payload","_play","_pause","_refresh","_edit","_call","_startProfiler","_stopProfiler","_hasSelectedDebugger","debuggerContent","DebuggerEditor","subscriptionChecked","_checkHasSubscription","buildTypesConfig","estimatedTimeInSeconds","completeDescription","buttons","onDownload","config","secondsSinceLastUpdate","difference_in_seconds","updatedAt","estimatedRemainingTime","buildContainer","builds","isOld","difference_in_calendar_days","buildType","formatBuildText","BuildProgress","ms","BuildsWatcher","runningWatchers","nextWatcherId","_pollBuild","waitTime","watcherId","onBuildUpdated","Builds","buildsWatcher","_startBuildsWatcher","newBuild","oldBuild","_refreshBuilds","onBuildsUpdated","_download","BuildsList","BuildsDialog","_onBuildsUpdated","limit","hasSubscription","noSubscription","limitReached","stepper","linearProgress","exportStep","stepMaxProgress","stepCurrentProgress","hasBuildStep","showSeeAllMyBuildsExplanation","Stepper","activeStep","Step","StepLabel","StepContent","ExportLauncher","compressionOutput","doneFooterOpen","exportPipeline","getInitialExportState","_updateStepProgress","_startBuildWatch","launchWholeExport","sendExportLaunched","handleError","exportPipelineContext","updateStepProgress","prepareExporter","preparedExporter","launchExport","exportOutput","launchResourcesDownload","resourcesDownloadOutput","launchCompression","launchUpload","launchOnlineBuild","uploadBucketKey","_downloadBuild","_closeDoneFooter","_updateExportState","updater","getBuildLimit","onlineBuildType","renderLaunchButtonLabel","canLaunchBuild","LimitDisplayer","BuildStepsProgress","renderDoneFooter","useOnlineStatus","navigator","onLine","onlineStatus","setOnlineStatus","goOnline","goOffline","OnlineStatus","ExportDialog","chosenExporterKey","showExperimental","buildsDialogOpen","chooseExporter","_showExperimental","_openBuildsDialog","_renderExporterListItem","exporter","forceDisable","allExportersRequireOnline","exporters","cantExportBecauseOffline","advanced","experimental","Subheader","DragAndDropContextProvider","DragDropContext","MultiBackend","HTML5toTouch","getEmailErrorText","getPasswordErrorText","CreateAccountDialog","form","password","_onCreateAccount","createAccountInProgress","onGoToLogin","LoginDialog","_onLogin","_onForgotPassword","onForgotPassword","onGoToCreateAccount","loginInProgress","resetPasswordDialogOpen","onCloseResetPasswordDialog","forgotPasswordInProgress","RightLoader","watchPromiseInState","stateField","UserProfileProvider","loginDialogOpen","createAccountDialogOpen","loginError","_fetchUserProfile","authentification","getUserProfile","unauthenticated","_doLogout","logout","_resetUserProfile","_doLogin","login","openLoginDialog","_doCreateAccount","createAccount","sendSignupDone","_doForgotPassword","forgotPassword","openResetPassword","openCreateAccountDialog","onUserChange","PreferencesProvider","_loadValuesFromLocalStorage","_setLanguage","_setThemeName","_setCodeEditorThemeName","_setAutoDownloadUpdates","_checkUpdates","_setAutoDisplayChangelog","_showAlertMessage","_verifyIfIsNewVersion","_setEventsSheetShowObjectThumbnails","_setAutosaveOnPreview","_setUseNewInstructionEditorDialog","_setUseGDJSDevelopmentWatcher","_setEventsSheetUseAssignmentOperators","_setShowEffectParameterNames","_getLastUsedPath","_setLastUsedPath","_persistValuesToLocalStorage","forceDownload","disableCheckForUpdates","currentVersion","persistedState","localStorage","setItem","projectPaths","latestPath","newProjectLastUsedPaths","EventsFunctionsExtensionsProvider","_loadProjectEventsFunctionsExtensions","_unloadProjectEventsFunctionsExtensions","_reloadProjectEventsFunctionsExtensions","Providers","getTheme","ThemeProvider","base","inherit","rules","foreground","token","themes","GitHub","Monokai","SolarizedDark","SolarizedLight","Tomorrow","TomorrowNight","VibrantInk","previewContainer","ResourcePreview","GenericIconPreview","imagePreview","ResourcePropertiesEditor","_chooseResourcePath","onResourcePathUpdated","_renderResourcesProperties","resourceSchema","_renderPreview","canDelete","onOpenProjectFolder","onOpenProperties","ResourcesEditor","_resourcesList","deleteResource","openProjectFolder","_onResourceSelected","resourcesList","resolveExtensionUrl","trimmedUrl","GDevelopExtensionApi","onRetry","ExtensionInstallDialog","extensionHeader","_loadExtensionheader","extensionShortHeader","headerUrl","isInstalling","onInstall","alreadyInstalled","isCompatible","ideVersion","gdevelopVersion","semverSatisfies","includePrerelease","isCompatibleWithExtension","shortDescription","PlaceholderError","extensionsRegistry","selectedExtensionShortHeader","chosenTag","_loadExtensionsRegistry","_install","extensionShortHeaders","behaviorsFilteredHeaders","filterExtensionShortHeaders","ObjectListItem","NewObjectDialog","experimentalObjectsInformation","experimentalObjects","EditTagsDialog","_tagsField","getObjectWithContextName","isObjectWithContextGlobal","getPasteLabel","isGlobalObject","clipboardObjectName","ObjectsList","_displayedObjectWithContextsList","renamedObjectWithContext","tagEditedObject","insertNewObject","onAddNewObject","_deleteObject","_onObjectModified","_copyObject","_cutObject","_duplicateObject","_pasteAndRename","_paste","pasteObject","copiedObject","newObject","getObjectPosition","_editVariables","_canMoveSelectionTo","destinationObjectWithContext","movedObjectWithContext","moveObject","_setAsGlobalObject","moveObjectToAnotherContainer","_openEditTagDialog","_changeObjectTags","_selectObject","_getObjectThumbnail","_renderObjectMenuTemplate","shouldForceUpdateList","lists","selectedObjects","TagChips","ChangelogRenderer","releases","currentReleaseName","openReleaseNote","currentRelease","findRelease","currentVersionHasBreakingChange","_onUpdated","GDevelopReleaseApi","last","isOutsideLayout","displayedObjectsList","displayedObjectGroupsList","isSearching","oldSearchText","renderObjectListItem","renderGroupObjectsListItem","Tutorials","sendTutorialOpened","CreateProjectDialog","_showExamples","_onExamplesLoaded","ExamplesComponent","examplesComponent","StartersComponent","startersComponent","onShowExamples","onExamplesLoaded","hint","Dark","DarkTheme","searchableExamplesInformation","ExamplesInformation","exampleName","exampleInformation","searchableDescription","LocalExamples","changeSearchText","chooseExtensionName","_submitExample","exampleNames","exampleFullName","usedExtensions","getExampleInformation","compareString","searchTextIndex","fuzzyFilter","fuzzyOrEmptyFilter","extensionUsage","onCreateFromExample","GroupRow","isGlobalGroup","onSetAsGlobalGroup","SortableGroupRow","SortableAddGroupRow","GroupsList","onAddGroup","renamedGroupWithScope","SortableGroupsList","withRef","GroupsListContainer","objectGroupsList","globalObjectGroupsList","addGroup","_onObjectGroupModified","_onDelete","getWrappedInstance","_onRename","_onMove","globalObjectGroupsOldIndex","globalObjectGroupsNewIndex","_setAsGlobalGroup","hiddenLabel","multiline","disableUnderline","MainFrameToolbar","firstChild","ListItem","isOpen","_renderListItemSecondaryAction","elementWithMenu","_elementWithMenu","_openContextMenu","disableRipple","disablePadding","ContainerComponent","ProjectTitlebar","setTitle","setTitleBarColor","PreferencesDialog","setCurrentTab","useContext"],"mappings":"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AqBlC6zE,cAAc7zE,GACZjR,KAAK4kF,aAAa3zE,GAAUwE,KAAKkvE,IAC/B3kF,KAAK2B,SACH,CACEsP,WACA0zE,WACApkF,KAAMykF,oBAAU,CACd/zE,SAAUA,EACV0zE,cAGJ,KAAO,MACGpkF,EAASP,KAAKsB,MAAdf,KACRoL,EAAGs5E,eAAiBC,YAAuB3kF,GAC3CqI,QAAQC,KAAR,kBAAwBoI,EAAxB,mBAMRlR,SAAS,QAK8BC,KAAKsB,MAAlCf,EALD,EAKCA,KAAMokF,EALP,EAKOA,SAAU1zE,EALjB,EAKiBA,SAChB7P,EAAapB,KAAKC,MAAlBmB,SAER,OAAKb,EAGH,gBAAC,eAAD,CAAcA,KAAMA,EAAM0Q,SAAUA,EAAU0zE,SAAUA,GACrDvjF,GAJa,S,sCCtFtB,IAAImE,EAAM,CACT,mBAAoB,CACnB,KACA,GAED,mBAAoB,CACnB,KACA,GAED,mBAAoB,CACnB,KACA,GAED,mBAAoB,CACnB,KACA,GAED,mBAAoB,CACnB,KACA,GAED,mBAAoB,CACnB,KACA,IAED,mBAAoB,CACnB,KACA,IAED,mBAAoB,CACnB,KACA,IAED,mBAAoB,CACnB,KACA,IAED,mBAAoB,CACnB,KACA,IAED,gBAAiB,CAChB,KACA,IAED,mBAAoB,CACnB,KACA,IAED,mBAAoB,CACnB,KACA,IAED,mBAAoB,CACnB,KACA,IAED,mBAAoB,CACnB,KACA,IAED,oBAAqB,CACpB,KACA,IAED,mBAAoB,CACnB,KACA,IAED,mBAAoB,CACnB,KACA,IAED,mBAAoB,CACnB,KACA,IAED,mBAAoB,CACnB,KACA,IAED,mBAAoB,CACnB,KACA,IAED,mBAAoB,CACnB,KACA,IAED,mBAAoB,CACnB,KACA,IAED,mBAAoB,CACnB,KACA,IAED,mBAAoB,CACnB,KACA,IAED,mBAAoB,CACnB,KACA,IAED,mBAAoB,CACnB,KACA,IAED,mBAAoB,CACnB,KACA,IAED,mBAAoB,CACnB,KACA,IAED,mBAAoB,CACnB,KACA,IAED,mBAAoB,CACnB,KACA,IAED,mBAAoB,CACnB,KACA,IAED,mBAAoB,CACnB,KACA,IAED,2BAA4B,CAC3B,KACA,IAED,mBAAoB,CACnB,KACA,IAED,mBAAoB,CACnB,KACA,IAED,mBAAoB,CACnB,KACA,IAED,mBAAoB,CACnB,KACA,IAED,mBAAoB,CACnB,KACA,IAED,mBAAoB,CACnB,KACA,IAED,mBAAoB,CACnB,KACA,IAED,mBAAoB,CACnB,KACA,IAED,mBAAoB,CACnB,KACA,IAED,mBAAoB,CACnB,KACA,IAED,mBAAoB,CACnB,KACA,IAED,mBAAoB,CACnB,KACA,IAED,mBAAoB,CACnB,KACA,IAED,mBAAoB,CACnB,KACA,IAED,mBAAoB,CACnB,KACA,IAED,mBAAoB,CACnB,KACA,IAED,mBAAoB,CACnB,KACA,KAGF,SAAS4/E,EAAoBC,GAC5B,IAAIC,EAAoBC,EAAE//E,EAAK6/E,GAC9B,OAAOvvE,QAAQlN,UAAU8M,MAAK,WAC7B,IAAIlL,EAAI,IAAIof,MAAM,uBAAyBy7D,EAAM,KAEjD,MADA76E,EAAEg7E,KAAO,mBACHh7E,KAIR,IAAIi7E,EAAMjgF,EAAI6/E,GAAMp3C,EAAKw3C,EAAI,GAC7B,OAAOH,EAAoB96E,EAAEi7E,EAAI,IAAI/vE,MAAK,WACzC,OAAO4vE,EAAoBI,EAAEz3C,EAAI,MAGnCm3C,EAAoBjpC,KAAO,WAC1B,OAAOrrB,OAAOqrB,KAAK32C,IAEpB4/E,EAAoBn3C,GAAK,KACzBzkB,EAAOC,QAAU27D,G,iCC/NjB,0FAMA,MAqBaO,EAAgBzlF,IAC3B,MAAMkB,EAAgBrB,aAAiB6lF,KACjCC,EAA0B9lF,UAC9B,KAAM+lF,OAxB2BC,EAwBC7lF,EAAM6lF,mBAAoB,EAxB5B,CAElCp+D,KAAMznB,GAAU6lF,EAAmB,sBAAS7lF,GAAY,uBAAUA,GAClEkD,KAAMlD,GACJ,qBAAG6yC,KAAM7yC,EAAM6yC,KAAM1sC,OAAO,SAAS2sC,IAAI,uBACtC9yC,EAAMmB,UAIX2kF,UAAW9lF,GACT6lF,EAAmB,yBAAI7lF,EAAMmB,UAAgBnB,EAAMmB,UAVlB0kF,OAyBjC,CAAC7lF,EAAM6lF,mBAGT,OACE,gBAAC,IAAD,CACEE,YAAU,EACVz4E,OAAQtN,EAAMsN,OACdgU,UAAWuC,IAAW,CACpB,CAAC3iB,EAAc8kF,wBAAwB,EACvC,4BAA6BhmF,EAAM6lF,mBAErC9jC,UAAW4jC,M,iCCzCjB,kCAAO,MAAMz/E,EAAeK,GAAD,wDACwBA,EADxB,8C,4GCK3B,MAAMmF,EAAKC,EAAOD,GAEX,MAAMqwD,UAA8BjiD,YACzCha,SAAU,MAAD,EAUHC,KAAKC,MARPsqC,EAFK,EAELA,SACAtzB,EAHK,EAGLA,QACArT,EAJK,EAILA,KACAsiF,EALK,EAKLA,sBACAzlF,EANK,EAMLA,MACA+pC,EAPK,EAOLA,wBACAC,EARK,EAQLA,8BACAL,EATK,EASLA,mBAEIhmC,EAAU,CACd,kBAAC,IAAD,CACEE,MAAO,kBAAC,QAAD,eACPE,QAASxE,KAAKC,MAAMsqC,SACpBlmC,IAAK,WAEP,kBAAC,IAAD,CACEC,MAAO,kBAAC,QAAD,cACPC,SAAO,EACP+S,iBAAe,EACf9S,QAASyS,EACT5S,IAAK,WAGHi8C,EAAmB4lC,EACvB,kBAAC,IAAD,CACE5hF,MAAO,kBAAC,QAAD,8BACPC,SAAS,EACTC,QAAS0hF,IAET,KAEJ,OACE,kBAAC,IAAD,CACEthF,UAAQ,EACRR,QAASA,EACTR,KAAMA,EACNc,mBAAmB,EACnBD,eAAgB8lC,EAChB+V,iBAAkBA,EAClB7/C,MAAOA,GAEP,kBAAC,IAAD,CACE2pC,mBAAoBA,EACpBI,wBAAyBA,EACzBC,8BAA+BA,EAC/BiiB,cACE,IACE1sD,KAAKif,kBAQJi+C,gBAAuBlB,EAAuB,CAC3DoB,iBAAkB,IAAM,IAAIzxD,EAAGw6E,mBAC/BhpB,SAAU,yB,kDCpEZ,6CACA,MAAM72D,EADN,MACiBC,GAAgB,YAC3B6/E,EAAoB9/E,EAAWA,EAAS63E,UAAY,KAI1D,IAAIkI,EAAoB,GAExB,MAAMC,EAAuBtzE,GAIpB,YAAcA,EAAO,kCAGf,MAAMuzE,EACnB,WAAWvzE,EAAqBzH,GAC9B,MAAM/J,EAAO0K,KAAKw6D,UAAU,CAC1B,UAAW4f,EAAoBtzE,GAC/BI,QAAS7H,IAGP66E,EACFA,EAAkBhI,UAAU58E,GAE5B6kF,EAAoB7kF,EAIxB,WAAWwR,GACT,IAAIxR,EAAO,GAOX,OALEA,EADE4kF,EACKA,EAAkBI,WAElBH,EAG0C,KAA5C7kF,EAAKkG,QAAQ4+E,EAAoBtzE,IAG1C,WAAWA,GACT,IAAKuzE,EAAUllC,IAAIruC,GAAO,OAAO,KAEjC,IAAIxR,EAAO,GAETA,EADE4kF,EACKA,EAAkBI,WAElBH,EAGT,IAEE,OADmBn6E,KAAKC,MAAM3K,GACZ4R,QAClB,MAAO7I,GAEP,OADA3B,QAAQ8zB,KAAK,2CACN,S,iCCvDb,oCAuCe+pD,IAtBiB,EAAGp0E,aAAYW,OAAM5R,cACnD,gBAAC,IAAmBF,SAApB,KACG,EAAG2D,SAAQuN,uBACTvN,EAAOwM,oBAAoBgB,IAC1B,gBAAC,IAAD,CACEW,KAAMA,EACN5R,SAAUA,EACVkS,OAAQ,KACS9P,IAAO4V,kBACpB,qHAKFhH,EAAiBC,GAAY,Q,kCC/BzC,uRAEA,MAAMuW,EAAKriB,IAAgB,MACrBC,EAAOD,IAAgB,QACvBoF,EAAKC,EAAOD,GAELw0E,EAAsB,CACjCC,MAAO,4BACPC,MAAO,0BACPE,KAAM,0BACNE,MAAO,WAGI7B,EAAyB,CACpCh4E,EACA8/E,EACA3+E,KAEA,MAAMH,EAAmBhB,EAAQiB,sBAC7BD,EAAiBI,YAAYD,IAC/BH,EAAiBy3E,eAAet3E,GAElC2+E,EAAqBtwE,QAAQrO,GAC7B2+E,EAAqBnwE,QAAQxO,GAC7Bk9D,EAAsBr+D,EAAS8/E,GAI/B9+E,EAAiB4O,YAAYkwE,GAE7BA,EAAqBp6E,UAOVuxE,EAA2B,CACtCj3E,EACAmB,KAEA,IAAI4+E,EAAel/E,IAAgBuvB,mBACjCpwB,EACAmB,GACA25B,UAAU,GASZ,OAPyC,IAArCilD,EAAaj/E,QAAQ,aAEvBi/E,EAAeA,EAAajlD,UAC1B,EACAilD,EAAaC,YAAY,aAGtBD,GAGIE,EAAwB,CACnCjgF,EACA+/E,KAEA,MAAMn+E,EAAchC,EAAKiC,QAAQ7B,EAAQ2B,kBACzC,OAAOo+E,EAAanwC,SAAShuC,IAGlBs+E,EAAyB,CACpClgF,EACAmgF,KAEA,IAAKn+D,IAAOpiB,EACV,OAAOqP,QAAQlN,QAAQo+E,GAGzB,MAAMv+E,EAAchC,EAAKiC,QAAQ7B,EAAQ2B,kBAEzC,OAAOsN,QAAQC,IACbixE,EAAcxhF,IAAIohF,IAChB,GAAIE,EAAsBjgF,EAAS+/E,GACjC,OAAOA,EAGT,MAAMK,EAAmBxgF,EAAKw/D,SAAS2gB,GACjCM,EAAkBzgF,EAAKwP,KAAKxN,EAAaw+E,GAE/C,OAAO,IAAInxE,QAAQlN,IACjBigB,EAAGs+D,SAASP,EAAcM,EAAiB9uE,GAEhCxP,EADLwP,EACawuE,EAGFM,UAOZ7H,EAA4B,CACvCx4E,EACAmB,KAEA,IAAK6gB,EAAI,MAAO,GAChB,MAAM+9D,EAAengF,EAAK2gF,UACxBtJ,EAAyBj3E,EAASmB,IAIpC,OAAK6gB,EAAGw+D,WAAWT,GAGdE,EAAsBjgF,EAAS+/E,GAG7B,GAHmD,UAHjB,SAS9B1hB,EAAwB,CACnCr+D,EACAygF,KAEIA,aAAuB17E,EAAG2K,eAC5B+wE,EAAYC,UAAqC,YAA3B1gF,EAAQ2gF,mB,kDCxHlC,qBAOgBtnF,OAEZ,uBACEgF,MAAO,CACLmT,SAAU,WACVC,IAAK,EACLC,KAAM,EACNC,MAAO,EACPC,OAAQ,EACRC,gBAAiB,kBACjBpJ,QAAS,OACTrJ,WAAY,SACZX,eAAgB,WAGlB,gBAAC,IAAD,CACEijB,UAAW,EACXrjB,MAAO,CACLwP,QAAS,GACTjK,OAAQ,IAGTvK,EAAMmB,Y,gKCff,MAAMomF,EAAsB,KAC1B,MAAM,IAAI79D,MAAM,6DAiBH89D,MAXexnF,IAAkB,MACtC0b,EAAqC1b,EAArC0b,kBAAsBvb,EADe,YACAH,EADA,uBAG7C,OACE,gBAACimB,EAAA,EAAD,CACEC,QAAS,gBAACuhE,EAAA,EAAD,iBAAkBtnF,EAAlB,CAA8BoE,QAASgjF,KAChD7rE,kBAAmBA,K,oDCkBV,MAAMgsE,UAAyB7nF,YAC5CqV,YAAYlV,GACVmV,MAAMnV,GADkB,KAiE1B2nF,SAAYr6E,IACV,IAAKA,EAAQ,OADwB,QAGCvN,KAAKC,MAAnC2G,EAH6B,EAG7BA,SACR2O,EAJqC,EAGpBA,kBACAhI,EAAOtK,MAAM,GAC3BwS,KAAKC,IACJ,IAAKA,EAAU9P,OAAQ,OACvB,MAAMgQ,EAAWF,EAAU,GAC3BuvD,YAAsBr+D,EAASgP,GAI/BhP,EAAQiB,sBAAsB2O,YAAYZ,GAE1C5V,KAAKkX,UAAUtQ,EAAQiB,uBACvB,MAAME,EAAuB6N,EAASovB,UACtChlC,KAAK6nF,sBAAsB9/E,GAKvB/H,KAAK8nF,eACP9nF,KAAK8nF,cAAcl1D,kBAAkB7qB,GAIvC2N,EAAU5N,QAAQ8N,GAAYA,EAAStJ,YAExC4L,MAAMC,IAELvP,QAAQuE,MAAM,8BAA+BgL,MA/FzB,KAmG1B4vE,qBAAuB,KACrB/nF,KAAK2B,SACH,CACEoG,aAAc,GACdigF,kBAAkB,GAEpB,KACMhoF,KAAKC,MAAMkC,UAAUnC,KAAKC,MAAMkC,SAASnC,KAAKsB,MAAMyG,iBA1GpC,KA+G1B8/E,sBAAyB9/E,IACF,KAAjBA,EAIJ/H,KAAK2B,SACH,CACEoG,eACAigF,kBAAoE,IAAlDhoF,KAAKmW,kBAAkBzO,QAAQK,IAEnD,KACO/H,KAAKsB,MAAM0mF,kBACVhoF,KAAKC,MAAMkC,UAAUnC,KAAKC,MAAMkC,SAAS4F,KAVjD/H,KAAK+nF,wBAjHiB,KAiI1BE,UAAaC,IAAoD,MAAD,EACXloF,KAAKC,MAAhD2G,EADsD,EACtDA,QAASmqB,EAD6C,EAC7CA,gBAAiBtZ,EAD4B,EAC5BA,aAC1B1P,EAAiB/H,KAAKsB,MAAtByG,aACFH,EAAmBhB,EAAQiB,sBAEjC,IAAIsgF,EAA0B,GAC9B,MAAMC,EAFkBxgF,EAAiBM,YAAYH,GAEF49D,cACnD,GAAIyiB,EACF,IACED,EAA0Bj8E,KAAKC,MAAMi8E,GACrC,MAAO79E,GACP3B,QAAQuE,MAAM,qBAAsB5C,GAIxC,GAAqB,UAAjBkN,EAA0B,CAC5B,MAAM+tD,EAAgB,GAClB59D,EAAiBI,YAAYD,IAC/By9D,EAAc56D,KAAK7C,GAErB,MAAMsgF,EAAwB,CAC5BzhF,UACAmqB,kBACA60C,aAAa,EACbJ,gBACAK,aAAc,CACZC,IAAK,EACL7iE,KAAM8E,EACNm+D,WAAW,EACXT,mBAAoB0iB,GAEtBhiB,eAAgBmiB,IACTA,EAAgB1iF,SAGrBmrB,EAAgBta,2BAA2B7P,EAAS,CAClD0hF,EAAgB,GAAGrlF,OAErBjD,KAAKC,MAAMkC,SAASmmF,EAAgB,GAAGrlF,SAG3CilF,EAAuB96C,KAAKi7C,QACvB,GAAqB,UAAjB5wE,EAA0B,CACnC,MAAM4wE,EAAwB,CAC5BzhF,UACAmqB,kBACAy0C,cAAe,CAACz9D,GAChB89D,aAAc,CACZJ,mBAAoB0iB,GAEtBhiB,eAAgBmiB,IAEdv3D,EAAgBta,2BAA2B7P,EAAS,CAClD0hF,EAAgB,GAAGrlF,OAErBjD,KAAKC,MAAMkC,SAASmmF,EAAgB,GAAGrlF,QAG3CilF,EAAuB96C,KAAKi7C,QACvB,GAAqB,SAAjB5wE,EAAyB,CAClC,MAAM4wE,EAAwB,CAC5BzhF,UACAmqB,kBACAy0C,cAAe,CAACz9D,GAChB89D,aAAc,CACZsiB,2BAEFhiB,eAAgBmiB,IACdtoF,KAAKC,MAAMkC,SAASmmF,EAAgB,GAAGrlF,QAG3CilF,EAAuB96C,KAAKi7C,KArM9BroF,KAAKsB,MAAQ,CACX0mF,kBAAkB,EAClBjgF,aAAc9H,EAAMurC,qBAAuB,IALrB,MAQhB5kC,EAAY3G,EAAZ2G,QACJA,GACF5G,KAAKkX,UAAUtQ,EAAQiB,uBAQ3B5F,QACMjC,KAAK8nF,eAAe9nF,KAAK8nF,cAAc7lF,QAG7CmV,0BAA0B6C,GACpBA,EAAUuxB,sBAAwBxrC,KAAKC,MAAMurC,qBAC/CxrC,KAAK2B,SAAS,CACZoG,aAAckS,EAAUuxB,qBAAuB,KAKrD+8C,0BAEE,MAAO,KADSvoF,KAAKC,MAAMqV,iBAAmB,IAGzCjK,OAAOkC,GAAUA,EAAOyF,OAAShT,KAAKC,MAAMwX,cAC5ClS,IAAIgI,IAAM,CACT/L,KAAM,GACNU,MAAOqL,EAAOi7E,YACdp2D,WAAY,IAAM,gBAAC,IAAD,MAClB5tB,QAAS,IAAMxE,KAAK4nF,SAASr6E,MAEjC,CACEhL,KAAM,cAKZ2U,UAAUtP,GACR5H,KAAKmW,kBAAoBvO,EAAiBu3E,sBAAsB95C,YAC5DrlC,KAAKC,MAAMwX,eACbzX,KAAKmW,kBAAoBnW,KAAKmW,kBAAkB9K,OAAOtD,GAEnDH,EAAiBM,YAAYH,GAAc0gF,YAC3CzoF,KAAKC,MAAMwX,eAIjB,MAAMixE,EAAsB1oF,KAAKuoF,0BAC3BI,EAAgB3oF,KAAKmW,kBAAkB5Q,IAAIwC,IAAY,CAC3DvG,KAAMuG,EACN7F,MAAO6F,KAET/H,KAAK4oF,iBAAmB,IAAIF,KAAwBC,GA8ItD5oF,SACE,MAAMwJ,EAAYvJ,KAAKsB,MAAM0mF,iBACzB,2CACA,KAEEa,EAAkB7oF,KAAKC,MAAMsX,wBAAwBlM,OACzDk6D,GAAkBA,EAAevyD,OAAShT,KAAKC,MAAMwX,cAEvD,OACE,gBAAC,IAAD,CACElH,qBAAsBvQ,KAAKC,MAAMwN,kBACjCjD,OAAQxK,KAAKC,MAAMuK,OACnBgG,gBAAiB,IACf,gBAACs4E,EAAA,EAAD,CACEr7E,kBAAmBzN,KAAKC,MAAMwN,kBAC9BH,mBAAoBtN,KAAKC,MAAMqN,mBAC/BS,SAAU/N,KAAKC,MAAM8N,SACrBwhB,aAAW,EACXF,WAAYrvB,KAAK4oF,kBAAoB,GACrC1mF,MAAOlC,KAAKsB,MAAMyG,aAClB5F,SAAUnC,KAAK6nF,sBACft+E,UAAWA,EACXmB,UAAW1K,KAAKC,MAAMyK,UACtBF,OAAQxK,KAAKC,MAAMuK,OACnBhI,IAAKumF,GAAiB/oF,KAAK8nF,cAAgBiB,IAG/Ct4E,aAAcxL,GACZ,gBAAC,WAAD,KACGjF,KAAKC,MAAM89D,YACV,gBAACl+D,EAAA,EAAD,CACE6U,KAAK,QACLlQ,QAAS,KACPxE,KAAK+nF,yBAGP,gBAAC,IAAD,OAGDc,EAAgBjjF,OACjB,gBAAC,EAAD,CACEX,MAAOA,EACPoB,KAAM,gBAAC,IAAD,MACN/B,MACEtE,KAAKsB,MAAMyG,aACT,gBAAC,QAAD,aAEA,gBAAC,QAAD,eAGJxD,SAAO,EACPoX,kBAAmB,IACjBktE,EAAgBtjF,IAAIggE,IAAc,CAChCjhE,MAAOihE,EAAeijB,YACtB5sE,MAAO,IAAM5b,KAAKioF,UAAU1iB,QAIhC,W,wFCvRD,MAAMyjB,EACnB7zE,aAAY,SACVskC,EADU,OAEVC,EAFU,OAGVC,EAHU,MAIVC,EAJU,QAKVC,EALU,OAMVC,EANU,OAOVC,EAPU,SAQVC,EARU,UASVC,EATU,SAUVC,IACE,KA4DJ+uC,kBAAoB,IAEXjpF,KAAKkpF,aAAelpF,KAAKmpF,eA9D/B,KAiEHC,WAAarwC,IACX,IAAK/4C,KAAKqpF,UAAW,OAErB,IAAIjqE,GAAiB,EAEjB25B,EAAIC,UAASh5C,KAAKkpF,aAAc,GAChCnwC,EAAIE,SAAQj5C,KAAKspF,YAAa,GA/GrB,KAgHTvwC,EAAIoB,QAAoBn6C,KAAKmpF,gBAAiB,GA/GpC,KAgHVpwC,EAAIoB,QAAqBn6C,KAAKupF,cAAe,GA1GnC,KA2GVxwC,EAAIoB,QAAqBn6C,KAAKwpF,cAAe,GAGjD,OAAIzwC,EAAI3yC,QAAU2yC,EAAI3yC,OAAOmzC,QADD,kDAC5B,GAIIv5C,KAAK05C,SAtHE,KAuHLX,EAAIoB,MACNn6C,KAAK05C,OAAO,GAAI,GAtHP,KAuHAX,EAAIoB,MACbn6C,KAAK05C,OAAO,EAAG,GA3HN,KA4HAX,EAAIoB,MACbn6C,KAAK05C,QAAQ,EAAG,GA3HN,KA4HDX,EAAIoB,OACbn6C,KAAK05C,OAAO,EAAG,IA3HD,IA8HdX,EAAIoB,OA5HO,KA4HoBpB,EAAIoB,QACrCn6C,KAAKy5C,WACLr6B,GAAiB,GAEfpf,KAAKipF,qBA3HC,KA2HsBlwC,EAAIoB,OAClCn6C,KAAK25C,SAEH35C,KAAKipF,qBA3HC,KA2HsBlwC,EAAIoB,OAClCn6C,KAAK45C,QAEH55C,KAAKipF,qBA/HC,KA+HsBlwC,EAAIoB,OAClCn6C,KAAK65C,UAEH75C,KAAKipF,qBA/HC,KA+HsBlwC,EAAIoB,OAClCn6C,KAAK85C,SAEH95C,KAAKipF,qBAAuBjpF,KAAKupF,cAlI3B,KAkI2CxwC,EAAIoB,OACvDn6C,KAAK+5C,SAEH/5C,KAAKipF,qBAtIC,KAsIsBlwC,EAAIoB,OAClCn6C,KAAK+5C,SAEH/5C,KAAKipF,qBA5IC,KA4IsBlwC,EAAIoB,OAClCn6C,KAAKg6C,WAGHh6C,KAAKipF,qBApJK,MAoJkBlwC,EAAIoB,OAClCn6C,KAAKi6C,YAnJa,MAqJhBlB,EAAIoB,OACNn6C,KAAKi6C,YAGHj6C,KAAKipF,qBA5JK,MA4JkBlwC,EAAIoB,OAClCn6C,KAAKk6C,WA3JQ,MA6JXnB,EAAIoB,OACNn6C,KAAKk6C,WAGH96B,GACE25B,EAAI35B,gBAAgB25B,EAAI35B,kBACrB,QAFT,IApIC,KA0IHqqE,SAAW1wC,IAIJA,EAAIC,UAASh5C,KAAKkpF,aAAc,GAChCnwC,EAAIE,SAAQj5C,KAAKspF,YAAa,GAvLtB,KAwLTvwC,EAAIoB,QAAoBn6C,KAAKmpF,gBAAiB,GAvLpC,KAwLVpwC,EAAIoB,QAAqBn6C,KAAKupF,cAAe,GAlLnC,KAmLVxwC,EAAIoB,QAAqBn6C,KAAKwpF,cAAe,GAEjD,IAAIpqE,GAAiB,EAMrB,GA5LkB,IAwLd25B,EAAIoB,OAtLO,KAsLoBpB,EAAIoB,QACrC/6B,GAAiB,GAGfA,EAEF,OADI25B,EAAI35B,gBAAgB25B,EAAI35B,kBACrB,GA5JR,KAgKHsqE,aAAe3wC,IACR/4C,KAAKqpF,YAELxoF,gBAxLgB,IAyLfk4C,EAAItZ,OACNz/B,KAAK2pF,uBAAwB,EAE7B3pF,KAAK2pF,uBAAwB,KAvKhC,KA4KHC,WAAa7wC,IACN/4C,KAAKqpF,YAELxoF,eApMgB,IAoMDk4C,EAAItZ,SACtBz/B,KAAK2pF,uBAAwB,KAhL9B,KAoLHE,YAAc9wC,MApLX,KAsLH+wC,MAAQ,OArLN9pF,KAAKy5C,SAAWA,GAAYz5C,KAAK8pF,MACjC9pF,KAAK05C,OAASA,GAAU15C,KAAK8pF,MAC7B9pF,KAAK25C,OAASA,GAAU35C,KAAK8pF,MAC7B9pF,KAAK45C,MAAQA,GAAS55C,KAAK8pF,MAC3B9pF,KAAK65C,QAAUA,GAAW75C,KAAK8pF,MAC/B9pF,KAAK85C,OAASA,GAAU95C,KAAK8pF,MAC7B9pF,KAAK+5C,OAASA,GAAU/5C,KAAK8pF,MAC7B9pF,KAAKi6C,UAAYA,GAAaj6C,KAAK8pF,MACnC9pF,KAAKk6C,SAAWA,GAAYl6C,KAAK8pF,MACjC9pF,KAAKg6C,SAAWA,GAAYh6C,KAAK8pF,MACjC9pF,KAAKqpF,WAAY,EACjBrpF,KAAKupF,cAAe,EACpBvpF,KAAKmpF,gBAAiB,EACtBnpF,KAAKkpF,aAAc,EACnBlpF,KAAKwpF,cAAe,EACpBxpF,KAAK2pF,uBAAwB,EAC7B3pF,KAAK+pF,QAGP3vC,uBACE,OAAOp6C,KAAKipF,oBAGd5uC,oBACE,OAAOr6C,KAAKupF,aAGdS,mBACE,OAAOhqF,KAAKupF,aAGdU,sBACE,OAAOjqF,KAAKspF,WAGdY,6BACE,OAAOlqF,KAAKupF,aAGdY,2BACE,OAAOnqF,KAAKspF,WAGdc,aACE,OAAIvpF,cACKb,KAAKipF,sBAEPjpF,KAAKipF,qBAAwBjpF,KAAKspF,YAAetpF,KAAKupF,cAQ/Dc,iBACE,OAAOrqF,KAAKwpF,cAAgBxpF,KAAK2pF,sBA+HnC1nF,QACEjC,KAAKqpF,WAAY,EAGnBriE,OACEhnB,KAAKqpF,WAAY,EAGnBU,QAC0B,qBAAbhrD,WAEXA,SAASurD,iBAAiB,UAAWtqF,KAAKopF,YAAY,GACtDrqD,SAASurD,iBAAiB,QAAStqF,KAAKypF,UAAU,GAClD1qD,SAASurD,iBAAiB,WAAYtqF,KAAK6pF,aAAa,GACxD9qD,SAASurD,iBAAiB,YAAatqF,KAAK0pF,cAAc,GAC1D3qD,SAASurD,iBAAiB,UAAWtqF,KAAK4pF,YAAY,IAGxD/wB,UAC0B,qBAAb95B,WAEXA,SAASwrD,oBAAoB,UAAWvqF,KAAKopF,YAAY,GACzDrqD,SAASwrD,oBAAoB,QAASvqF,KAAKypF,UAAU,GACrD1qD,SAASwrD,oBAAoB,WAAYvqF,KAAK6pF,aAAa,GAC3D9qD,SAASwrD,oBAAoB,YAAavqF,KAAK0pF,cAAc,GAC7D3qD,SAASwrD,oBAAoB,UAAWvqF,KAAK4pF,YAAY,K,uBCxP9C,MAAMY,EACnBr1E,aAAY,QACVvO,EADU,OAEV+W,EAFU,UAGV8zC,EAHU,aAIVD,EAJU,kBAKVE,EALU,wBAMVC,EANU,eAOVC,EAPU,cAQVC,EARU,eASVC,EATU,kBAUVC,EAVU,eAWVC,IAEAhyD,KAAK4G,QAAUA,EACf5G,KAAKyxD,UAAYA,EACjBzxD,KAAK2d,OAASA,EACd3d,KAAKwxD,aAAeA,EACpBxxD,KAAK0xD,kBAAoBA,EACzB1xD,KAAK2xD,wBAA0BA,EAC/B3xD,KAAK4xD,eAAiBA,EACtB5xD,KAAK6xD,cAAgBA,EACrB7xD,KAAK8xD,eAAiBA,EACtB9xD,KAAK+xD,kBAAoBA,EACzB/xD,KAAKgyD,eAAiBA,EAEtBhyD,KAAKyqF,gBAAkB,GAEvBzqF,KAAK4vB,cAAgB,IAAIK,YACzBjwB,KAAKm1D,iBAAmB,CACtBlD,gBAAiBviC,IACf,MAAM4b,EAAY5b,EAAS6pC,WACrBmxB,EAAgB1qF,KAAKyqF,gBAAgBn/C,GAC3C,OAAKo/C,EAEEA,EAAcz4B,gBAAgBviC,GAFVA,EAASwB,QAItCihC,eAAgBziC,IACd,MAAM4b,EAAY5b,EAAS6pC,WACrBmxB,EAAgB1qF,KAAKyqF,gBAAgBn/C,GAC3C,OAAKo/C,EAEEA,EAAcv4B,eAAeziC,GAFTA,EAASyB,QAItCihC,iBAAkB1iC,IAChB,GAAIA,EAASU,gBAAiB,OAAOV,EAASW,iBAE9C,MAAMib,EAAY5b,EAAS6pC,WACrBmxB,EAAgB1qF,KAAKyqF,gBAAgBn/C,GAC3C,OAAKo/C,EAEEA,EAAct4B,iBAAiB1iC,GAFX,GAK7B2iC,kBAAmB3iC,IACjB,GAAIA,EAASU,gBAAiB,OAAOV,EAASY,kBAE9C,MAAMgb,EAAY5b,EAAS6pC,WACrBmxB,EAAgB1qF,KAAKyqF,gBAAgBn/C,GAC3C,OAAKo/C,EAEEA,EAAcr4B,kBAAkB3iC,GAFZ,GAI7Bi7D,gBAAiBj7D,IACR,CACL1L,EAAGhkB,KAAKm1D,iBAAiBlD,gBAAgBviC,GACzCzL,EAAGjkB,KAAKm1D,iBAAiBhD,eAAeziC,GACxC3sB,MAAO/C,KAAKm1D,iBAAiB/C,iBAAiB1iC,GAC9CjgB,OAAQzP,KAAKm1D,iBAAiB9C,kBAAkB3iC,MAMxDwkC,mBACE,OAAOl0D,KAAK4vB,cAGdg7D,sBACE,OAAO5qF,KAAKm1D,iBAGdp1D,SACE,IAAK,IAAIgU,EAAI,EAAGA,EAAI/T,KAAK2d,OAAOytB,iBAAkBr3B,IAAK,CACrD,MAAMw9C,EAAQvxD,KAAK2d,OAAO0tB,WAAWt3B,GAC/Bu3B,EAAYimB,EAAMvsB,UAExB,IAAI0lD,EAAgB1qF,KAAKyqF,gBAAgBn/C,GACpCo/C,IACH1qF,KAAKyqF,gBAAgBn/C,GAAao/C,EAAgB,IAAIp5B,IAAc,CAClE1qD,QAAS5G,KAAK4G,QACd+W,OAAQ3d,KAAK2d,OACb8zC,UAAWzxD,KAAKyxD,UAChBD,aAAcxxD,KAAKwxD,aACnBD,MAAOA,EACPG,kBAAmB1xD,KAAK0xD,kBACxBC,wBAAyB3xD,KAAK2xD,wBAC9BC,eAAgB5xD,KAAK4xD,eACrBC,cAAe7xD,KAAK6xD,cACpBC,eAAgB9xD,KAAK8xD,eACrBC,kBAAmB/xD,KAAK+xD,kBACxBC,eAAgBhyD,KAAKgyD,iBAEvBhyD,KAAK4vB,cAAcO,SAASu6D,EAAcx2B,qBAO5Cw2B,EAAcn5B,MAAQA,EACtBm5B,EAAcz2B,SAAU,EACxBy2B,EAAcx2B,mBAAmBP,OAAS5/C,EAC1C22E,EAAc3qF,SAGhBC,KAAKs0D,2BACLt0D,KAAKw0D,kBAGPF,2BACEt0D,KAAK4vB,cAAcxuB,SAAS8/B,KAAK,CAACiL,EAAGD,KACnCC,EAAEwnB,OAASxnB,EAAEwnB,QAAU,EACvBznB,EAAEynB,OAASznB,EAAEynB,QAAU,EAChBxnB,EAAEwnB,OAASznB,EAAEynB,SASxBe,kBAAkB/wC,GAChB,IAAK,IAAI5P,KAAK/T,KAAKyqF,gBACjB,GAAIzqF,KAAKyqF,gBAAgBnoC,eAAevuC,GAAI,CACpB/T,KAAKyqF,gBAAgB12E,GAC7B2gD,kBAAkB/wC,IAQtC6wC,kBACE,IAAK,IAAIzgD,KAAK/T,KAAKyqF,gBACjB,GAAIzqF,KAAKyqF,gBAAgBnoC,eAAevuC,GAAI,CAC1C,MAAM22E,EAAgB1qF,KAAKyqF,gBAAgB12E,GACtC22E,EAAcz2B,QAIZy2B,EAAcz2B,SAAU,GAH7Bj0D,KAAK4vB,cAAck5C,YAAY4hB,EAAcx2B,oBAC7Cw2B,EAAcp+E,gBACPtM,KAAKyqF,gBAAgB12E,KAMpCzH,SACE,IAAK,IAAIyH,KAAK/T,KAAKyqF,gBACbzqF,KAAKyqF,gBAAgBnoC,eAAevuC,IACtC/T,KAAKyqF,gBAAgB12E,GAAGzH,U,aCpKjB,SAASu+E,EAAcC,GAAgB,EAAE9mE,EAAF,EAAKC,EAAL,MAAQlhB,EAAR,OAAe0M,IACnE,MAAMgyB,EAAWqpD,EAAe9mE,EAAGC,GAC7B8mE,EAASD,EAAe9mE,EAAIjhB,EAAOkhB,EAAIxU,GAC7C,MAAO,CACLuU,EAAGyd,EAAS,GACZxd,EAAGwd,EAAS,GACZ1+B,MAAOgoF,EAAO,GAAKtpD,EAAS,GAC5BhyB,OAAQs7E,EAAO,GAAKtpD,EAAS,I,OC8BlB,MAAMupD,EAmBnB71E,aAAY,mBACVolE,EADU,iBAEVplB,EAFU,SAGV81B,EAHU,YAIVC,EAJU,SAKVC,EALU,YAMVC,EANU,oBAOVh2B,EAPU,WAQVj0C,IACS,KAlBXyO,cAAgB,IAAIK,YAkBV,KAjBVo7D,oBAAsB,IAAIp7D,YAiBhB,KAhBVq7D,mBAAqB,GAgBX,KAfVC,aAAe,IAAIt7D,WAeT,KAdVu7D,WAAa,IAAIv7D,SAAYw7D,UAAU,6BAc7B,KAbVC,kBAAoB,IAAIz7D,WAad,KAZV07D,mBAAqB,IAAI17D,WAYf,KAXV27D,aAAe,IAAI37D,WAYjBjwB,KAAKm1D,iBAAmBA,EACxBn1D,KAAKirF,SAAWA,EAChBjrF,KAAKkrF,YAAcA,EACnBlrF,KAAKmrF,SAAWA,EAChBnrF,KAAKorF,YAAcA,EACnBprF,KAAKo1D,oBAAsBA,EAC3Bp1D,KAAKu6E,mBAAqBA,EAC1Bv6E,KAAK6rF,YAAc1qE,EAEnBnhB,KAAK4vB,cAAcO,SAASnwB,KAAKqrF,qBAEjCrrF,KAAK8rF,YACH9rF,KAAKurF,aACL7oF,IACE1C,KAAKirF,SAASvoF,EAAMqwD,OAAQrwD,EAAMswD,SAEpC,KACEhzD,KAAKkrF,eAEP,eAEFlrF,KAAK8rF,YACH9rF,KAAK0rF,kBACLhpF,IACE1C,KAAKirF,SAASvoF,EAAMqwD,OAAQ,IAE9B,KACE/yD,KAAKkrF,eAEP,aAEFlrF,KAAK8rF,YACH9rF,KAAK2rF,mBACLjpF,IACE1C,KAAKirF,SAAS,EAAGvoF,EAAMswD,SAEzB,KACEhzD,KAAKkrF,eAEP,aAEFlrF,KAAK8rF,YACH9rF,KAAK4rF,aACLlpF,IACE1C,KAAKmrF,SAASzoF,EAAMqwD,OAAQrwD,EAAMswD,SAEpC,KACEhzD,KAAKorF,eAEP,wCAIJW,cAAc5qE,GACZnhB,KAAK6rF,YAAc1qE,EAGrB2qE,YACEE,EACAtyC,EACAuyC,EACAlhE,GAEAihE,EAAav5B,aAAc,EAC3Bu5B,EAAaE,YAAa,EAC1BF,EAAajhE,OAASA,EACtB2nC,IAAQC,QAAQq5B,GAChBA,EAAavzD,GAAG,UAAWihB,GAC3BsyC,EAAavzD,GAAG,SAAUwzD,GAC1BjsF,KAAK4vB,cAAcO,SAAS67D,GAG9B93B,mBACE,OAAOl0D,KAAK4vB,cAGdu8D,cACE75E,EACA85E,EACAC,EACA33E,EACA43E,EAjH2B,GAmH3BF,EAAazuD,QACRrrB,GAKL85E,EAAa77D,UAAU,UACvB67D,EAAa57D,UAAU,EAAG,QAAU,GACpC47D,EAAaz1B,UAAY,GA3HE,IA4HvB21B,EACFF,EAAav1B,SAASw1B,EAAe,GAAIA,EAAe,GAAI33E,EAAMA,GA5H5C,IA6Hb43E,GACTF,EAAa1tD,WACX2tD,EAAe,GAAK33E,EAAO,EAC3B23E,EAAe,GAAK33E,EAAO,EAC3BA,EAAO,GAIX03E,EAAaz7D,UACby7D,EAAan2B,QAAU,IAAIhmC,YACzBo8D,EAAe,GACfA,EAAe,GACf33E,EACAA,IAtBA03E,EAAan2B,QAAU,IAAIhmC,YAAe,EAAG,EAAG,EAAG,GA0BvDlwB,SAAU,MAAD,EA9JU,UAgKfC,KAAK6rF,YA/JA,CACLU,WAAY,GACZC,gBAAiB,GACjBC,cAAe,GAIZ,CACLF,WAAY,GACZC,gBAAiB,EACjBC,cAAe,GAoJPF,EADD,EACCA,WAAYC,EADb,EACaA,gBAAiBC,EAD9B,EAC8BA,cAGrC,MAAMrhF,EAAYpL,KAAKu6E,mBAAmBC,uBAC1C,IAAIjkB,EAAK,EACLC,EAAK,EACLC,EAAK,EACLC,EAAK,EAGT,IAAK,IAAI3iD,EAAI,EAAGA,EAAI3I,EAAUxF,OAAQmO,IAAK,CACzC,GAAI/T,KAAKsrF,mBAAmB1lF,SAAWmO,EAAG,CACxC,MAAM24E,EAAe,IAAIz8D,WACzBy8D,EAAaz2B,QAAU,IAAIhmC,YAAe,EAAG,EAAG,EAAG,GACnDjwB,KAAKsrF,mBAAmB1gF,KAAK8hF,GAC7B1sF,KAAKqrF,oBAAoBl7D,SAASu8D,GAGpC,MAAMh9D,EAAWtkB,EAAU2I,GACrB44E,EAAe3sF,KAAKm1D,iBAAiBw1B,gBAAgBj7D,GACrDk9D,EAAqB/B,EACzB7qF,KAAKo1D,oBACLu3B,GAGF3sF,KAAKsrF,mBAAmBv3E,GAAG4pB,QAC3B39B,KAAKsrF,mBAAmBv3E,GAAGwc,UAAU,SACrCvwB,KAAKsrF,mBAAmBv3E,GAAGyc,UAAU,EAAG,QAAU,GAClDxwB,KAAKsrF,mBAAmBv3E,GAAG4iD,UAAY,GACvC32D,KAAKsrF,mBAAmBv3E,GAAG6iD,MAAQ,GACnC52D,KAAKsrF,mBAAmBv3E,GAAG8iD,SACzB+1B,EAAmB5oE,EACnB4oE,EAAmB3oE,EACnB2oE,EAAmB7pF,MACnB6pF,EAAmBn9E,QAErBzP,KAAKsrF,mBAAmBv3E,GAAG4c,UAEjB,IAAN5c,GACFwiD,EAAKo2B,EAAa3oE,EAClBwyC,EAAKm2B,EAAa1oE,EAClBwyC,EAAKk2B,EAAa3oE,EAAI2oE,EAAa5pF,MACnC2zD,EAAKi2B,EAAa1oE,EAAI0oE,EAAal9E,SAE/Bk9E,EAAa3oE,EAAIuyC,IAAIA,EAAKo2B,EAAa3oE,GACvC2oE,EAAa1oE,EAAIuyC,IAAIA,EAAKm2B,EAAa1oE,GACvC0oE,EAAa3oE,EAAI2oE,EAAa5pF,MAAQ0zD,IACxCA,EAAKk2B,EAAa3oE,EAAI2oE,EAAa5pF,OACjC4pF,EAAa1oE,EAAI0oE,EAAal9E,OAASinD,IACzCA,EAAKi2B,EAAa1oE,EAAI0oE,EAAal9E,SAIzC,KAAOzP,KAAKsrF,mBAAmB1lF,OAASwF,EAAUxF,QAChD5F,KAAKqrF,oBAAoBviB,YAAY9oE,KAAKsrF,mBAAmBt3D,OAI/D,MAAM1hB,EAA4B,IAArBlH,EAAUxF,OACjBinF,EAAkB7sF,KAAKo1D,oBAAoBqB,EAAIC,GACrDm2B,EAAgB,IAAMJ,EACtBI,EAAgB,IAAMJ,EAEtB,MAAMK,EAAuB9sF,KAAKo1D,oBAChCqB,EACAD,GAAME,EAAKF,GAAM,GAEnBs2B,EAAqB,IAAML,EAC3BK,EAAqB,IAAMN,EAAkB,EAE7C,MAAMO,EAAwB/sF,KAAKo1D,oBACjCmB,GAAME,EAAKF,GAAM,EACjBG,GAEFq2B,EAAsB,IAAMP,EAAkB,EAC9CO,EAAsB,IAAMN,EAE5B,MAAMO,EAAkBhtF,KAAKo1D,oBAAoBmB,GAAME,EAAKF,GAAM,EAAGC,GACrEw2B,EAAgB,IAAMR,EAAkB,EACxCQ,EAAgB,IAAsB,EAAhBP,EAEtBzsF,KAAKmsF,cAAc75E,EAAMtS,KAAKurF,aAAcsB,EAAiBN,GAC7DvsF,KAAKmsF,cACH75E,EACAtS,KAAK0rF,kBACLoB,EACAN,GAEFxsF,KAAKmsF,cACH75E,EACAtS,KAAK2rF,mBACLoB,EACAP,GAEFxsF,KAAKmsF,cACH75E,EACAtS,KAAK4rF,aACLoB,EACAR,EAjPsB,IChCb,MAAMS,EACnB93E,aAAY,iBAAEggD,EAAF,oBAAoBC,IAC9Bp1D,KAAKm1D,iBAAmBA,EACxBn1D,KAAKo1D,oBAAsBA,EAE3Bp1D,KAAKktF,oBAAsB,KAC3BltF,KAAKmtF,mBAAqB,IAAIl9D,WAC9BjwB,KAAKmtF,mBAAmBl3B,QAAU,IAAIhmC,YAAe,EAAG,EAAG,EAAG,GAE9DjwB,KAAKotF,kBAAoB,IAAIn9D,WAC7BjwB,KAAK8hD,YAAc,IAAI7xB,OAAU,GAAI,CACnCpW,SAAU,GACVwjB,KAAM,SACN1B,MAAO,WAET37B,KAAKmtF,mBAAmBh9D,SAASnwB,KAAKotF,mBACtCptF,KAAKmtF,mBAAmBh9D,SAASnwB,KAAK8hD,aAGxCurC,YAAY39D,GACV1vB,KAAKktF,oBAAsBx9D,EAG7BilC,cACE,OAAO30D,KAAKktF,oBAGdx5B,cAAchkC,GACZ,OAAO1vB,KAAKmtF,mBAGdptF,SACE,GAAiC,OAA7BC,KAAKktF,oBAEP,YADAltF,KAAKmtF,mBAAmBn5B,SAAU,GAIpC,MAAMm5B,EAAqBtC,EACzB7qF,KAAKo1D,oBACLp1D,KAAKm1D,iBAAiBw1B,gBAAgB3qF,KAAKktF,sBAG7CltF,KAAKmtF,mBAAmBn5B,SAAU,EAClCh0D,KAAKmtF,mBAAmBxvD,QACxB39B,KAAKmtF,mBAAmB58D,UAAU,UAClCvwB,KAAKmtF,mBAAmBx2B,UAAY,GACpC32D,KAAKmtF,mBAAmBv2B,MAAQ,GAChC52D,KAAKmtF,mBAAmB38D,UAAU,EAAG,EAAU,GAC/CxwB,KAAKmtF,mBAAmBt2B,SACtBs2B,EAAmBnpE,EACnBmpE,EAAmBlpE,EACnBkpE,EAAmBpqF,MACnBoqF,EAAmB19E,QAErBzP,KAAKmtF,mBAAmBx8D,UAExB,MAAM28D,EACJttF,KAAKktF,oBAAoBnqD,gBACzB,QAEAiJ,SAAShsC,KAAKktF,oBAAoBh8D,QAClC,QACA8a,SAAShsC,KAAKktF,oBAAoB/7D,QAClC,YAEAnxB,KAAKktF,oBAAoB3zB,WACzB,QACAv5D,KAAKktF,oBAAoBt5B,YACzB,KACF5zD,KAAK8hD,YAAYtgD,KAAO8rF,EAExBttF,KAAK8hD,YAAY99B,EAAIrH,KAAKgK,MACxBwmE,EAAmBnpE,EACjBhkB,KAAK8hD,YAAY/+C,MAAQ,EACzBoqF,EAAmBpqF,MAAQ,GAE/B/C,KAAK8hD,YAAY79B,EAAItH,KAAKgK,MACxBwmE,EAAmBlpE,EAAIjkB,KAAK8hD,YAAYryC,QAI1CzP,KAAKotF,kBAAkBzvD,QACvB39B,KAAKotF,kBAAkB78D,UAAU,EAAU,IAC3CvwB,KAAKotF,kBAAkBG,gBACrBvtF,KAAK8hD,YAAY99B,EAJH,EAKdhkB,KAAK8hD,YAAY79B,EALH,EAMdjkB,KAAK8hD,YAAY/+C,MAAQ0R,GACzBzU,KAAK8hD,YAAYryC,OAPH,EAQd,GAEFzP,KAAKotF,kBAAkBz8D,W,cC7FZ,MAAM68D,EACnBr4E,aAAY,iBAAEggD,EAAF,QAAoB/hC,IAC9BpzB,KAAKm1D,iBAAmBA,EACxBn1D,KAAKozB,QAAUA,EACfpzB,KAAKytF,cAAgB,GACrBztF,KAAK0tF,YAAc,EACnB1tF,KAAK2tF,YAAc,EAGrBj1B,WAAWtlC,GACTpzB,KAAKozB,QAAUA,EAGjBw6D,YAAY7qF,GACV,OAAK/C,KAAKozB,QAAQ8jC,OAASl3D,KAAKozB,QAAQ6jC,MAAQj3D,KAAKozB,QAAQgkC,WAAa,EACjEz6C,KAAKC,IAAID,KAAKgK,MAAM5jB,GAAQ,GAE9B4Z,KAAKC,IACVD,KAAKgK,MAAM5jB,EAAQ/C,KAAKozB,QAAQgkC,WAAap3D,KAAKozB,QAAQgkC,UAC1D,GAIJy2B,aAAap+E,GACX,OACGzP,KAAKozB,QAAQ8jC,OACbl3D,KAAKozB,QAAQ6jC,MACdj3D,KAAKozB,QAAQkkC,YAAc,EAEpB36C,KAAKC,IAAID,KAAKgK,MAAMlX,GAAS,GAE/BkN,KAAKC,IACVD,KAAKgK,MAAMlX,EAASzP,KAAKozB,QAAQkkC,YAAct3D,KAAKozB,QAAQkkC,WAC5D,GAIJw2B,eAAeC,EAAcC,GAC3B,OAAID,GAAgBpxE,KAAK4a,IAAIv3B,KAAK0tF,aAAe/wE,KAAK4a,IAAIv3B,KAAK2tF,aACrDK,EAAYjrF,MAAQirF,EAAYv+E,OAAUzP,KAAK2tF,YAElD3tF,KAAK0tF,YAGdO,eAAeF,EAAcC,GAC3B,OAAID,GAAgBpxE,KAAK4a,IAAIv3B,KAAK2tF,aAAehxE,KAAK4a,IAAIv3B,KAAK0tF,aACrDM,EAAYv+E,OAASu+E,EAAYjrF,MAAS/C,KAAK0tF,YAElD1tF,KAAK2tF,YAGdO,SAASz8B,EAAWsB,EAAQC,EAAQ+6B,GAClC/tF,KAAK0tF,aAAe36B,EACpB/yD,KAAK2tF,aAAe36B,EAEpB,IAAK,IAAIj/C,EAAI,EAAGA,EAAI09C,EAAU7rD,OAAQmO,IAAK,CACzC,MAAMo6E,EAAmB18B,EAAU19C,GAE9Bo6E,EAAiB/9D,kBACpB+9D,EAAiB10B,eACfz5D,KAAKm1D,iBAAiB/C,iBAAiB+7B,IAEzCA,EAAiBz0B,gBACf15D,KAAKm1D,iBAAiB9C,kBAAkB87B,KAI5C,IAAIH,EAAchuF,KAAKytF,cAAcU,EAAiBrnF,KACjDknF,IACHA,EAAchuF,KAAKytF,cAAcU,EAAiBrnF,KAAO,CACvD/D,MAAOorF,EAAiB99D,iBACxB5gB,OAAQ0+E,EAAiB79D,oBAI7B69D,EAAiBx0B,kBAAiB,GAClCw0B,EAAiB10B,eACfz5D,KAAK4tF,YACHI,EAAYjrF,MAAQ/C,KAAK8tF,eAAeC,EAAcC,KAG1DG,EAAiBz0B,gBACf15D,KAAK6tF,aACHG,EAAYv+E,OAASzP,KAAKiuF,eAAeF,EAAcC,MAM/DI,YACEpuF,KAAKytF,cAAgB,GACrBztF,KAAK0tF,YAAc,EACnB1tF,KAAK2tF,YAAc,GC5FR,MAAMU,EACnBl5E,cACEnV,KAAKsuF,eAAiB,GACtBtuF,KAAK0tF,YAAc,EACnB1tF,KAAK2tF,YAAc,EAGrBY,aAAaR,EAAuBS,GAClC,MAAMlzB,EAC8C,IAAjD3+C,KAAK8xE,MAAMzuF,KAAK2tF,YAAa3tF,KAAK0tF,aAAsB/wE,KAAK2U,GAC9Dk9D,EACF,OAAOT,EAAwC,GAAzBpxE,KAAKgK,MAAM20C,EAAQ,IAAWA,EAGtDozB,SAASj9B,EAAWsB,EAAQC,EAAQ+6B,GAClC/tF,KAAK0tF,aAAe36B,EACpB/yD,KAAK2tF,aAAe36B,EAEpB,IAAK,IAAIj/C,EAAI,EAAGA,EAAI09C,EAAU7rD,OAAQmO,IAAK,CACzC,MAAMo6E,EAAmB18B,EAAU19C,GACnC,IAAIy6E,EAAexuF,KAAKsuF,eAAeH,EAAiBrnF,UACnCgE,IAAjB0jF,IACFA,EAAexuF,KAAKsuF,eAClBH,EAAiBrnF,KACfqnF,EAAiB98D,YAEvB88D,EAAiB/0B,SAASp5D,KAAKuuF,aAAaR,EAAcS,KAI9DG,YACE3uF,KAAKsuF,eAAiB,GACtBtuF,KAAK0tF,YAAc,EACnB1tF,KAAK2tF,YAAc,G,aC/BR,MAAMiB,EACnBz5E,aAAY,iBAAEggD,EAAF,QAAoB/hC,IAC9BpzB,KAAKm1D,iBAAmBA,EACxBn1D,KAAKozB,QAAUA,EACfpzB,KAAK6uF,kBAAoB,GACzB7uF,KAAK0tF,YAAc,EACnB1tF,KAAK2tF,YAAc,EAGrBj1B,WAAWtlC,GACTpzB,KAAKozB,QAAUA,EAGjB07D,gBAAgB9qE,EAAG+qE,GACjB,OAAK/uF,KAAKozB,QAAQ8jC,MAASl3D,KAAKozB,QAAQ6jC,OAAQ83B,EAGzC53B,YAAcnzC,EAAGhkB,KAAKozB,QAAQgkC,UAAWp3D,KAAKozB,QAAQikC,aAFpD16C,KAAKgK,MAAM3C,GAKtBgrE,gBAAgB/qE,EAAG8qE,GACjB,OAAK/uF,KAAKozB,QAAQ8jC,MAASl3D,KAAKozB,QAAQ6jC,OAAQ83B,EAGzC53B,YAAclzC,EAAGjkB,KAAKozB,QAAQkkC,WAAYt3D,KAAKozB,QAAQmkC,aAFrD56C,KAAKgK,MAAM1C,GAKtBgrE,eAAeC,GACb,OAAIA,GAAcvyE,KAAK4a,IAAIv3B,KAAK0tF,aAAe/wE,KAAK4a,IAAIv3B,KAAK2tF,aACpD,EAEF3tF,KAAK0tF,YAGdyB,eAAeD,GACb,OAAIA,GAAcvyE,KAAK4a,IAAIv3B,KAAK2tF,aAAehxE,KAAK4a,IAAIv3B,KAAK0tF,aACpD,EAEF1tF,KAAK2tF,YAGdyB,OAAO39B,EAAWsB,EAAQC,EAAQk8B,EAAYH,GAC5C/uF,KAAK0tF,aAAe36B,EACpB/yD,KAAK2tF,aAAe36B,EAEpB,IAAK,IAAIj/C,EAAI,EAAGA,EAAI09C,EAAU7rD,OAAQmO,IAAK,CACzC,MAAMo6E,EAAmB18B,EAAU19C,GAEnC,IAAIs7E,EAAkBrvF,KAAK6uF,kBAAkBV,EAAiBrnF,KACzDuoF,IACHA,EAAkBrvF,KAAK6uF,kBAAkBV,EAAiBrnF,KAAO,CAC/Dkd,EAAGmqE,EAAiBj9D,OACpBjN,EAAGkqE,EAAiBh9D,SAIxBg9D,EAAiBj2B,KACfl4D,KAAK8uF,gBACHO,EAAgBrrE,EAAIhkB,KAAKivF,eAAeC,GACxCH,IAGJZ,EAAiBh2B,KACfn4D,KAAKgvF,gBACHK,EAAgBprE,EAAIjkB,KAAKmvF,eAAeD,GACxCH,KAMRO,UACEtvF,KAAK6uF,kBAAoB,GACzB7uF,KAAK0tF,YAAc,EACnB1tF,KAAK2tF,YAAc,GC1ER,MAAMz4B,EACnB//C,aAAY,aAAEq8C,EAAF,QAAgBp+B,IAC1BpzB,KAAKwxD,aAAeA,EACpBxxD,KAAKozB,QAAUA,EAEfpzB,KAAKuvF,SAAW,IAAIt/D,WACpBjwB,KAAKuvF,SAASt5B,QAAU,IAAIhmC,YAAe,EAAG,EAAG,EAAG,GAGtDyoC,WAAWtlC,GACTpzB,KAAKozB,QAAUA,EAGjBsgC,gBACE,OAAO1zD,KAAKuvF,SAGdxvF,SACE,MAAMqzB,EAAUpzB,KAAKozB,QAErB,IAAKA,EAAQ6jC,KAEX,YADAj3D,KAAKuvF,SAASv7B,SAAU,GAI1Bh0D,KAAKuvF,SAASv7B,SAAU,EACxBh0D,KAAKuvF,SAAS5xD,QACd39B,KAAKuvF,SAASh/D,UAAU,SACxBvwB,KAAKuvF,SAAS/+D,UAAU,EAAG,QAAU,GACrCxwB,KAAKuvF,SAAS54B,UAAY,GAC1B32D,KAAKuvF,SAAS34B,MAAQ,GAEtB,MAAM44B,EAAkBxvF,KAAKwxD,aAAa4C,mBAAmB,EAAG,GAC1Dq7B,EAAgBzvF,KAAKwxD,aAAa4C,mBACtCp0D,KAAKwxD,aAAaj4B,WAClBv5B,KAAKwxD,aAAah4B,aAGdk2D,EACJ/yE,KAAKsb,MAAMu3D,EAAgB,GAAKp8D,EAAQgkC,WAAahkC,EAAQgkC,UACzDu4B,EACJhzE,KAAKsb,MAAMu3D,EAAgB,GAAKp8D,EAAQkkC,YAAclkC,EAAQkkC,WAE1Ds4B,EACJjzE,KAAKkzE,KAAKJ,EAAc,GAAKr8D,EAAQgkC,WAAahkC,EAAQgkC,UACtD04B,EACJnzE,KAAKkzE,KAAKJ,EAAc,GAAKr8D,EAAQkkC,YAAclkC,EAAQkkC,WAE7D,IACE,IAAIy4B,EAAOL,EAAYt8D,EAAQikC,YAC/B04B,EAAOH,EACPG,GAAQ38D,EAAQgkC,UAChB,CACA,MAAM44B,EAAQhwF,KAAKwxD,aAAa4D,oBAAoB26B,EAAMJ,GACpDhuD,EAAM3hC,KAAKwxD,aAAa4D,oBAAoB26B,EAAMD,GAExD9vF,KAAKuvF,SAAS9+D,OAAOu/D,EAAM,GAAIA,EAAM,IACrChwF,KAAKuvF,SAAS7+D,OAAOiR,EAAI,GAAIA,EAAI,IAGnC,IACE,IAAIsuD,EAAON,EAAYv8D,EAAQmkC,YAC/B04B,EAAOH,EACPG,GAAQ78D,EAAQkkC,WAChB,CACA,MAAM04B,EAAQhwF,KAAKwxD,aAAa4D,oBAAoBs6B,EAAWO,GACzDtuD,EAAM3hC,KAAKwxD,aAAa4D,oBAAoBw6B,EAASK,GAE3DjwF,KAAKuvF,SAAS9+D,OAAOu/D,EAAM,GAAIA,EAAM,IACrChwF,KAAKuvF,SAAS7+D,OAAOiR,EAAI,GAAIA,EAAI,IAGnC3hC,KAAKuvF,SAAS5+D,W,aCtEH,MAAMu/D,EACnB/6E,aAAY,QAAEvO,EAAF,OAAW+W,EAAX,oBAAmBy3C,IAC7Bp1D,KAAK4G,QAAUA,EACf5G,KAAK2d,OAASA,EACd3d,KAAKo1D,oBAAsBA,EAE3Bp1D,KAAKg2D,cAAgB,IAAI/lC,WACzBjwB,KAAKg2D,cAAcC,QAAU,IAAIhmC,YAAe,EAAG,EAAG,EAAG,GACzDjwB,KAAKmwF,gBAAkB,CACrBnsE,EAAG,EACHC,EAAG,EACHlhB,MAAO/C,KAAK4G,QAAQwpF,yBACpB3gF,OAAQzP,KAAK4G,QAAQypF,2BAIzB38B,gBACE,OAAO1zD,KAAKg2D,cAGdj2D,SACEC,KAAKmwF,gBAAgBptF,MAAQ/C,KAAK4G,QAAQwpF,yBAC1CpwF,KAAKmwF,gBAAgB1gF,OAASzP,KAAK4G,QAAQypF,0BAE3C,MAAMC,EAAqBzF,EACzB7qF,KAAKo1D,oBACLp1D,KAAKmwF,iBAGPnwF,KAAKg2D,cAAcr4B,QACnB39B,KAAKg2D,cAAczlC,UAAU,GAC7BvwB,KAAKg2D,cAAcxlC,UACjB,EACAyN,YACE,IAAOj+B,KAAK2d,OAAOoxB,wBAA0B,IAC7C,IAAO/uC,KAAK2d,OAAOsxB,yBAA2B,IAC9C,IAAOjvC,KAAK2d,OAAOqxB,0BAA4B,KAEjD,GAEFhvC,KAAKg2D,cAAcY,MAAQ,EAC3B52D,KAAKg2D,cAAcW,UAAY,EAC/B32D,KAAKg2D,cAAca,SACjBy5B,EAAmBtsE,EACnBssE,EAAmBrsE,EACnBqsE,EAAmBvtF,MACnButF,EAAmB7gF,QAErBzP,KAAKg2D,cAAcrlC,WCjDR,MAAMu/D,EACnB/6E,aAAY,QAAEvO,EAAF,aAAW4qD,EAAX,QAAyBp+B,IACnCpzB,KAAK4G,QAAUA,EACf5G,KAAKwxD,aAAeA,EACpBxxD,KAAKozB,QAAUA,EAEfpzB,KAAKg2D,cAAgB,IAAI/lC,WACzBjwB,KAAKg2D,cAAcC,QAAU,IAAIhmC,YAAe,EAAG,EAAG,EAAG,GACzDjwB,KAAKmwF,gBAAkB,CACrBnsE,EAAG,EACHC,EAAG,EACHlhB,MAAO,EACP0M,OAAQ,GAIZipD,WAAWtlC,GACTpzB,KAAKozB,QAAUA,EAGjBsgC,gBACE,OAAO1zD,KAAKg2D,cAGdj2D,SAGE,IAFgBC,KAAKozB,QAERm9D,WAEX,YADAvwF,KAAKg2D,cAAchC,SAAU,GAI/B,MAAMjxD,EAAQ/C,KAAK4G,QAAQwpF,yBACrB3gF,EAASzP,KAAK4G,QAAQypF,0BAC5BrwF,KAAKmwF,gBAAgBnsE,EAAIhkB,KAAKwxD,aAAairB,WAAa15E,EAAQ,EAChE/C,KAAKmwF,gBAAgBlsE,EAAIjkB,KAAKwxD,aAAakrB,WAAajtE,EAAS,EACjEzP,KAAKmwF,gBAAgBptF,MAAQA,EAC7B/C,KAAKmwF,gBAAgB1gF,OAASA,EAE9B,MAAM6gF,EAAqBzF,EACzB7qF,KAAKwxD,aAAa4D,oBAClBp1D,KAAKmwF,iBAGPnwF,KAAKg2D,cAAchC,SAAU,EAC7Bh0D,KAAKg2D,cAAcr4B,QACnB39B,KAAKg2D,cAAczlC,UAAU,GAC7BvwB,KAAKg2D,cAAcxlC,UAAU,EAAG,EAAU,GAC1CxwB,KAAKg2D,cAAcY,MAAQ,EAC3B52D,KAAKg2D,cAAcW,UAAY,EAC/B32D,KAAKg2D,cAAca,SACjBy5B,EAAmBtsE,EACnBssE,EAAmBrsE,EACnBqsE,EAAmBvtF,MACnButF,EAAmB7gF,QAErBzP,KAAKg2D,cAAcrlC,WClDR,MAAM6/D,EAInBr7E,aAAY,OAAEwI,EAAF,aAAU8yE,IACpBzwF,KAAK2d,OAASA,EACd3d,KAAKywF,aAAeA,EAGtB1wF,SACEC,KAAKywF,aAAah4E,gBAAkBuzB,SAClCA,SACE8C,YACE9uC,KAAK2d,OAAOoxB,wBACZ/uC,KAAK2d,OAAOqxB,0BACZhvC,KAAK2d,OAAOsxB,0BAEd,IAEF,KCrBS,MAAMyhD,EAKnBv7E,YAAYw7E,GACV3wF,KAAK4wF,eAAiBrpF,KAAKC,MAC3BxH,KAAK6wF,UAAY,IAAOF,EACxB3wF,KAAK8wF,cAAe,EAGtBC,eACE,MAAMvpF,EAAMD,KAAKC,MACXwpF,EAAQxpF,EAAMxH,KAAK4wF,eAEzB,SAAII,EAAQhxF,KAAK6wF,WAAa7wF,KAAK8wF,gBACjC9wF,KAAK4wF,eAAiBppF,EAAOwpF,EAAQhxF,KAAK6wF,UAC1C7wF,KAAK8wF,cAAe,GACb,GAMXG,kBACEjxF,KAAK8wF,cAAe,GCvBjB,MAAMI,EAAiB,KAC5B,MAAMC,EAASlhE,UAAeA,SAAYmhE,OACtCD,GAAQA,EAAOE,Q,aCFN,MAAMC,EAQnBn8E,aAAY,8BAAEo8E,EAAF,MAAiCxuF,EAAjC,OAAwC0M,IAClDzP,KAAKwxF,+BAAiCD,EACtCvxF,KAAKyxF,oBAAsB,IAAIxhE,YAC/BjwB,KAAKyxF,oBAAoB76B,MAAQ,GACjC52D,KAAKyxF,oBAAoBx7B,QAAU,IAAIhmC,YAAe,EAAG,EAAG,EAAG,GAC/DjwB,KAAK0xF,qBAAuB,IAAIzhE,WAChCjwB,KAAK2xF,eAAiB,IAAI1hE,OAAU,GAAI,CACtCpW,SAAU,GACVwjB,KAAM,SACN1B,MAAO,SAET37B,KAAKyxF,oBAAoBthE,SAASnwB,KAAK0xF,sBACvC1xF,KAAKyxF,oBAAoBthE,SAASnwB,KAAK2xF,gBACvC3xF,KAAK4xF,OAAO7uF,EAAO0M,GAGrBmiF,OAAO7uF,EAAe0M,GACpBzP,KAAKo6B,OAASr3B,EACd/C,KAAKs6B,QAAU7qB,EAGjBikD,gBACE,OAAO1zD,KAAKyxF,oBAGd1xF,SACE,MADO,EAGQC,KAAKwxF,iCAHb,mBAGAxtE,EAHA,KAGGC,EAHH,KAIPjkB,KAAK2xF,eAAenwF,KAApB,UAA8BwiB,EAAEq3C,QAAQ,GAAxC,YAA8Cp3C,EAAEo3C,QAAQ,IACxDr7D,KAAK2xF,eAAev5E,SAAS4L,EAAI,EACjChkB,KAAK2xF,eAAev5E,SAAS6L,EAAItH,KAAKgK,MACpC3mB,KAAKs6B,QANS,EAMWt6B,KAAK2xF,eAAeliF,QAG/CzP,KAAK0xF,qBAAqB/zD,QAC1B39B,KAAK0xF,qBAAqBnhE,UAAU,EAAU,IAC9CvwB,KAAK0xF,qBAAqBnE,iBACxB,EACAvtF,KAAKs6B,QAAU7lB,GAAczU,KAAK2xF,eAAeliF,OACjDzP,KAAK2xF,eAAe5uF,MAAQ0R,GAbT,EAcnBzU,KAAK2xF,eAAeliF,OAASgF,GAdV,KAiBrBzU,KAAK0xF,qBAAqB/gE,WChDf,MAAMkhE,EAInB18E,aAAY,OAAE28E,EAAF,eAAUzH,IACpBrqF,KAAK8xF,OAASA,EACd9xF,KAAKqqF,eAAiBA,EAGxBtqF,SACE,GAAIC,KAAKqqF,iBAKP,OAJArqF,KAAK8xF,OAAO7sF,MAAM8lB,OAAS,YACM,SAA7B/qB,KAAK8xF,OAAO7sF,MAAM8lB,SACpB/qB,KAAK8xF,OAAO7sF,MAAM8lB,OAAS,iBAK/B/qB,KAAK8xF,OAAO7sF,MAAM8lB,OAAS,W,2ECN/B,MAAMloB,EAAS,CACbkvF,WAAY,CAAEpiF,KAAM,EAAGyI,SAAU,WAAYqB,SAAU,UACvDu4E,WAAY,CAAEjnE,OAAQ,SAGlBknE,EAAaC,YAAeC,KAEnB,MAAMC,UAAiCr4E,YAAW,eAAD,oBAC9Ds4E,iBAAmB,EAD2C,KAE9DC,iBAAmB,EAF2C,KAG9DC,YAAc,EAHgD,KAI9DC,YAAc,EAJgD,KAK9DC,WAAa,IAAI/B,EAAW,IALkC,KAiW9DgC,cAAgB,IACP1yF,KAAKC,MAAMmzB,QAAQu/D,WAlWkC,KAqW9DxX,cAAgBwX,IACd3yF,KAAKC,MAAM2yF,gBAAgB,CACzBD,WAAYh2E,KAAKC,IAAID,KAAKE,IAAI81E,EAAY,IAAK,QAvWW,KA+W9Dh7B,aAAe,CACbZ,EACAa,KAEA53D,KAAK6yF,gBAAgBl7B,aAAaZ,EAAKa,IAnXqB,KAsX9DqU,aAAe,CAACjoD,EAAGC,KACjBjkB,KAAKuyF,YAAcvuE,EACnBhkB,KAAKwyF,YAAcvuE,GAxXyC,KA2X9D6uE,qBAAuB,CAAC9uE,EAAGC,KACzBjkB,KAAKuyF,YAAcvuE,EACnBhkB,KAAKwyF,YAAcvuE,EACnBjkB,KAAKywF,aAAasC,KAAK9wF,QAOlBjC,KAAKgzF,kBAAkB3I,kBAC1BrqF,KAAK4sF,mBAAmBv3B,wBAAwBrxC,EAAGC,GAIlDjkB,KAAKgzF,kBAAkB34C,qBACvBr6C,KAAKgzF,kBAAkB3I,mBAExBrqF,KAAKC,MAAMs6E,mBAAmB0Y,iBAC9BjzF,KAAKC,MAAMizF,oBAAoB,MA9Y2B,KAkZ9DC,WAAa,CAACpgC,EAAQC,EAAQhvC,EAAGC,KAC/B,GAAIjkB,KAAKgzF,kBAAkB3I,iBAAkB,CAC3C,MAAM+I,EAAcrgC,EAAS/yD,KAAK0yF,gBAC5BW,EAAcrgC,EAAShzD,KAAK0yF,gBAElC1yF,KAAKwxD,aAAa8hC,UAAUF,GAAcC,GAEtCrzF,KAAKC,MAAM88E,uBACb/8E,KAAKC,MAAM88E,sBAAsB/8E,KAAKwxD,mBAGxCxxD,KAAK4sF,mBAAmBp3B,yBAAyBxxC,EAAGC,IA7ZM,KAia9DsvE,qBAAuB,KAAO,MACpB51E,EAAW3d,KAAKC,MAAhB0d,OACF61E,EAAmB,GACzB,IAAK,IAAIz/E,EAAI,EAAGA,EAAI4J,EAAOytB,iBAAkBr3B,IAC3Cy/E,EAAiB71E,EAAO0tB,WAAWt3B,GAAGixB,WAAarnB,EAChD0tB,WAAWt3B,GACX0gD,gBAEL,OAAO++B,GAzaqD,KA4a9DC,UAAY,KAGV,GAAIzzF,KAAK4sF,mBAAmBt2B,+BAAgC,CAC1D,IAAIo9B,EAAoB1zF,KAAK4sF,mBAAmBj3B,wBAEhD31D,KAAKC,MAAMs6E,mBAAmBoZ,gBAC5BD,EACA1zF,KAAKgzF,kBAAkB34C,oBACvBr6C,KAAKuzF,wBAEPG,EAAoB1zF,KAAKC,MAAMs6E,mBAAmBC,uBAClDx6E,KAAKC,MAAMizF,oBAAoBQ,KAxb2B,KA4b9DE,mBAAqBlkE,IACnB1vB,KAAKywF,aAAasC,KAAK9wF,SA7bqC,KAgc9D4xF,yBAA2BnkE,IACzB1vB,KAAKC,MAAM0xD,wBAAwBjiC,IAjcyB,KAoc9DokE,gBAAkBpkE,IAChB1vB,KAAKktF,oBAAoBG,YAAY39D,IArcuB,KAwc9DqkE,gBAAkBrkE,IAChB,IAAI1vB,KAAKgzF,kBAAkB3I,iBAM3B,GAAIrqF,KAAKgzF,kBAAkB54C,uBAAwB,CACjD,MAAMygB,EAAoB76D,KAAKC,MAAMs6E,mBAAmBC,uBACxD,IAAK,IAAIzmE,EAAI,EAAGA,EAAI8mD,EAAkBj1D,OAAQmO,IAAK,CACjD,MAAM2b,EAAWmrC,EAAkB9mD,GACnC/T,KAAKC,MAAM+zF,iBAAiBC,sBAAsBvkE,SAGpD1vB,KAAKC,MAAMs6E,mBAAmB2Z,eAC5BxkE,EACA1vB,KAAKgzF,kBAAkB34C,oBACvBr6C,KAAKuzF,wBAGHvzF,KAAKC,MAAMizF,qBACblzF,KAAKC,MAAMizF,oBACTlzF,KAAKC,MAAMs6E,mBAAmBC,yBA9dwB,KAoe9D2Z,eAAiBzkE,IACXA,IAAa1vB,KAAKktF,oBAAoBv4B,eACxC30D,KAAKktF,oBAAoBG,YAAY,OAteqB,KAye9D+G,gBAAkB,CAAC1kE,EAAUqjC,EAAQC,KACnC,MAAMogC,EAAcrgC,EAAS/yD,KAAK0yF,gBAC5BW,EAAcrgC,EAAShzD,KAAK0yF,gBAKlC,GAAI1yF,KAAKgzF,kBAAkB3I,iBAMzB,OALArqF,KAAKwxD,aAAa8hC,UAAUF,GAAcC,QAEtCrzF,KAAKC,MAAM88E,uBACb/8E,KAAKC,MAAM88E,sBAAsB/8E,KAAKwxD,eAKrCxxD,KAAKC,MAAMs6E,mBAAmB8Z,mBAAmB3kE,IACpD1vB,KAAK4zF,mBAAmBlkE,GAG1B,MAAMmrC,EAAoB76D,KAAKC,MAAMs6E,mBAAmBC,uBACxDx6E,KAAKs0F,eAAelF,OAClBv0B,EACAu4B,EACAC,EACArzF,KAAKgzF,kBAAkBhJ,mBACvBhqF,KAAKgzF,kBAAkB/I,wBAngBmC,KAugB9DsK,mBAAqB,KACnBv0F,KAAKs0F,eAAehF,UAEpB,MAAMz0B,EAAoB76D,KAAKC,MAAMs6E,mBAAmBC,uBACxDx6E,KAAKC,MAAMu0F,iBAAiB35B,IA3gBgC,KA8gB9D45B,UAAY,CAAC1hC,EAAQC,KACnB,MAAMogC,EAAcrgC,EAAS/yD,KAAK0yF,gBAC5BW,EAAcrgC,EAAShzD,KAAK0yF,gBAE5B73B,EAAoB76D,KAAKC,MAAMs6E,mBAAmBC,uBACxDx6E,KAAK00F,iBAAiBxG,SACpBrzB,EACAu4B,EACAC,EACArzF,KAAKgzF,kBAAkB9I,+BAvhBmC,KA2hB9DyK,aAAe,KACb30F,KAAK00F,iBAAiBtG,YAEtB,MAAMvzB,EAAoB76D,KAAKC,MAAMs6E,mBAAmBC,uBACxDx6E,KAAKC,MAAM20F,mBAAmB/5B,IA/hB8B,KAkiB9Dg6B,UAAY,CAAC9hC,EAAQC,KACnB,MAAMogC,EAAcrgC,EAAS/yD,KAAK0yF,gBAC5BW,EAAcrgC,EAAShzD,KAAK0yF,gBAE5B73B,EAAoB76D,KAAKC,MAAMs6E,mBAAmBC,uBACxDx6E,KAAK80F,iBAAiBpG,SACpB7zB,EACAu4B,EACAC,EACArzF,KAAKgzF,kBAAkB9I,+BA3iBmC,KA+iB9D6K,aAAe,KACb/0F,KAAK80F,iBAAiBnG,YAEtB,MAAM9zB,EAAoB76D,KAAKC,MAAMs6E,mBAAmBC,uBACxDx6E,KAAKC,MAAM+0F,mBAAmBn6B,IAnjB8B,KAsjB9Do6B,yBAA2B,KACzBj1F,KAAKktF,oBAAoBG,YAAY,OAvjBuB,KA0jB9D6H,cAAgB,CAAClxE,EAAGC,KAClB,MAAM42C,EAAoB76D,KAAKC,MAAMs6E,mBAAmBC,uBACxD3f,EAAkB/yD,QAAQ4nB,IACxBA,EAASwoC,KAAKxoC,EAASwB,OAASlN,GAChC0L,EAASyoC,KAAKzoC,EAASyB,OAASlN,KAElCjkB,KAAKC,MAAMu0F,iBAAiB35B,IAhkBgC,KAslB9Ds6B,mCAAqC,IAC5Bn1F,KAAKwxD,aAAa4C,mBACvBp0D,KAAKqyF,iBACLryF,KAAKsyF,kBAzlBqD,KA6lB9Df,8BAAgC,IACvBvxF,KAAKwxD,aAAa4C,mBACvBp0D,KAAKuyF,YACLvyF,KAAKwyF,aAhmBqD,KAomB9D3V,gBAAkB,IACT78E,KAAKwxD,aArmBgD,KAwmB9D4jC,aAAe,KAETp1F,KAAKq1F,YACLr1F,KAAKs1F,mBAGLt1F,KAAKyyF,WAAW1B,iBAClB/wF,KAAKyY,gBAAgB1Y,SACrBC,KAAKwxD,aAAazxD,SAClBC,KAAKu1F,aAAax1F,SAClBC,KAAKi3D,KAAKl3D,SACVC,KAAKmzD,kBAAkBpzD,SACvBC,KAAKktF,oBAAoBntF,SACzBC,KAAK66D,kBAAkB96D,SACvBC,KAAK4sF,mBAAmB7sF,SACxBC,KAAKw1F,aAAaz1F,SAClBC,KAAKuwF,WAAWxwF,SAChBC,KAAKy1F,UAAU11F,SACfC,KAAKywF,aAAa1wF,OAAOC,KAAK4vB,gBAEhC5vB,KAAK01F,UAAYC,sBAAsB31F,KAAKo1F,gBA5nBgB,KA+nB9DQ,oBAAsB,KAChB51F,KAAK01F,WAAWG,qBAAqB71F,KAAK01F,WAC9C11F,KAAKs1F,kBAAmB,EAExBpE,KAnoB4D,KAsoB9D4E,sBAAwB,KACtB91F,KAAKs1F,kBAAmB,EACxBt1F,KAAKo1F,eHnpBP1+E,WAAW,KACT,MAAMy6E,EAASlhE,UAAeA,SAAYmhE,OACtCD,GAAQA,EAAOnB,SAClB,KGeH1wE,oBAEMtf,KAAK+xF,aAAe/xF,KAAKywF,cAC3BzwF,KAAK+1F,+BAITp2E,qBAIM3f,KAAK+xF,aAAe/xF,KAAKywF,cAC3BzwF,KAAK+1F,+BAITA,+BAA+B,MAIrBnvF,EAAY5G,KAAKC,MAAjB2G,QAGRqpB,SAAY+lE,kBAAkBC,cAAe,EAI7Cj2F,KAAKywF,aAAexgE,qBAClBjwB,KAAKC,MAAM8C,MACX/C,KAAKC,MAAMwP,OACX,CACEymF,uBAAuB,EACvBC,WAAW,IAGfn2F,KAAK+xF,WAAW1yD,YAAYr/B,KAAKywF,aAAasC,MAC9C/yF,KAAKywF,aAAasC,KAAKzI,iBAAiB,cAAe//E,IACrDA,EAAE6U,iBAEFpf,KAAKqyF,iBAAmB9nF,EAAE6rF,QAC1Bp2F,KAAKsyF,iBAAmB/nF,EAAE8rF,QACtBr2F,KAAKC,MAAMub,eACbxb,KAAKC,MAAMub,cAAcjR,EAAE4Q,QAAS5Q,EAAE6Q,UAEjC,IAETpb,KAAKywF,aAAasC,KAAKuD,aAAe5zF,IAChC1C,KAAKgzF,kBAAkB5I,aACzBpqF,KAAKu2F,OAAO7zF,EAAM8zF,WAAa,KACtBx2F,KAAKgzF,kBAAkB7I,2BAChCnqF,KAAKwxD,aAAa8hC,UAAU5wF,EAAM8zF,WAAa,GAAI,GAEnDx2F,KAAKwxD,aAAa8hC,SAAS5wF,EAAMqwD,OAAS,GAAIrwD,EAAMswD,OAAS,IAG3DhzD,KAAKC,MAAM88E,uBACb/8E,KAAKC,MAAM88E,sBAAsB/8E,KAAKwxD,cAExC9uD,EAAM0c,kBAERpf,KAAKywF,aAAasC,KAAK0D,aAAa,YAAa,GACjDz2F,KAAKywF,aAAasC,KAAKzI,iBAAiB,QAAS//E,IAC/CvK,KAAKgzF,kBAAkB/wF,UAEzBjC,KAAKywF,aAAasC,KAAKzI,iBAAiB,OAAQ//E,IAC9CvK,KAAKgzF,kBAAkBhsE,SAEzBhnB,KAAKywF,aAAasC,KAAKzI,iBAAiB,YAAa//E,IACnDvK,KAAKgzF,kBAAkB/wF,UAEzBjC,KAAKywF,aAAasC,KAAKzI,iBAAiB,WAAY//E,IAClDvK,KAAKgzF,kBAAkBhsE,SAGzBhnB,KAAK4vB,cAAgB,IAAIK,YAEzBjwB,KAAK02F,eAAiB,IAAIzmE,YAC1BjwB,KAAK02F,eAAezgC,QAAU,IAAIhmC,YAChC,EACA,EACAjwB,KAAKC,MAAM8C,MACX/C,KAAKC,MAAMwP,QAEbijD,IAAQC,QAAQ3yD,KAAK02F,gBACrB12F,KAAK02F,eAAej+D,GAAG,YAAa/1B,GAClC1C,KAAK8yF,qBAAqBpwF,EAAMyhD,KAAKv4C,OAAOoY,EAAGthB,EAAMyhD,KAAKv4C,OAAOqY,IAEnEjkB,KAAK02F,eAAej+D,GAAG,aAAc/1B,IAC/BmwD,YAAuBnwD,EAAMyhD,MAAQzhD,EAAMyhD,KAAK2O,gBAIpD9yD,KAAK8yF,qBAAqBpwF,EAAMyhD,KAAKv4C,OAAOoY,EAAGthB,EAAMyhD,KAAKv4C,OAAOqY,KAEnEjkB,KAAK02F,eAAej+D,GAAG,YAAa/1B,GAClC1C,KAAKisE,aAAavpE,EAAMyhD,KAAKv4C,OAAOoY,EAAGthB,EAAMyhD,KAAKv4C,OAAOqY,IAE3DjkB,KAAK02F,eAAej+D,GAAG,UAAW/1B,GAChC1C,KAAKmzF,WACHzwF,EAAMqwD,OACNrwD,EAAMswD,OACNtwD,EAAMyhD,KAAKv4C,OAAOoY,EAClBthB,EAAMyhD,KAAKv4C,OAAOqY,IAGtBjkB,KAAK02F,eAAej+D,GAAG,SAAU/1B,GAAS1C,KAAKyzF,aAC/CzzF,KAAK4vB,cAAcO,SAASnwB,KAAK02F,gBAEjC12F,KAAKwxD,aAAe,IAAImlC,IAAa,CACnCC,aAAchwF,EAAUA,EAAQwpF,yBAA2B,EAAI,EAC/DyG,aAAcjwF,EAAUA,EAAQypF,0BAA4B,EAAI,EAChEttF,MAAO/C,KAAKC,MAAM8C,MAClB0M,OAAQzP,KAAKC,MAAMwP,OACnB2jB,QAASpzB,KAAKC,MAAMmzB,UAEtBpzB,KAAK4vB,cAAcO,SAASnwB,KAAKwxD,aAAa0C,oBAE9Cl0D,KAAKi3D,KAAO,IAAI6/B,EAAK,CACnBtlC,aAAcxxD,KAAKwxD,aACnBp+B,QAASpzB,KAAKC,MAAMmzB,UAEtBpzB,KAAK4vB,cAAcO,SAASnwB,KAAKi3D,KAAKvD,iBAEtC1zD,KAAKgzF,kBAAoB,IAAIhK,EAA4B,CACvDvvC,SAAUz5C,KAAKC,MAAM82F,kBACrBr9C,OAAQ15C,KAAKk1F,cACbv7C,OAAQ35C,KAAKC,MAAM05C,OACnBC,MAAO55C,KAAKC,MAAM25C,MAClBC,QAAS75C,KAAKC,MAAM45C,QACpBC,OAAQ95C,KAAKC,MAAM65C,OACnBC,OAAQ/5C,KAAKC,MAAM85C,OACnBE,UAAWj6C,KAAKC,MAAMg6C,UACtBC,SAAUl6C,KAAKC,MAAMi6C,WAGvBl6C,KAAKg3F,aAAe,IAAIC,IAAa,CACnCnF,OAAQ9xF,KAAKywF,aAAasC,KAC1B5X,cAAen7E,KAAKm7E,cACpBuX,cAAe1yF,KAAK0yF,cACpBlhC,aAAcxxD,KAAKwxD,eAGrBxxD,KAAKu1F,aAAe,IAAI1D,EAAa,CACnCC,OAAQ9xF,KAAK+xF,WACb1H,eAAgB,IAAMrqF,KAAKgzF,kBAAkB3I,mBAG/CrqF,KAAK6yF,gBAAkB,IAAIr7B,IAAe,CACxC/F,UAAWzxD,KAAKC,MAAM+zF,iBACtB5gE,QAASpzB,KAAKC,MAAMmzB,UAGtBpzB,KAAKk3F,uBAAuBl3F,KAAKC,OACjCD,KAAKo1F,eASP+B,eACEn3F,KAAKk3F,uBAAuBl3F,KAAKC,OAGnCi3F,uBAAuBj3F,GAEjBD,KAAKktF,qBACPltF,KAAK4vB,cAAck5C,YAAY9oE,KAAKktF,oBAAoBx5B,iBAEtD1zD,KAAK66D,mBACP76D,KAAK4vB,cAAck5C,YAAY9oE,KAAK66D,kBAAkB3G,oBAEpDl0D,KAAKmzD,oBACPnzD,KAAKwxD,aACF0C,mBACA4U,YAAY9oE,KAAKmzD,kBAAkBe,oBACtCl0D,KAAKmzD,kBAAkB7mD,UAErBtM,KAAK4sF,qBACP5sF,KAAK4vB,cAAck5C,YAAY9oE,KAAK4sF,mBAAmBl5B,iBACvD1zD,KAAK4sF,mBAAmBtgF,UAEtBtM,KAAKw1F,cACPx1F,KAAK4vB,cAAck5C,YAAY9oE,KAAKw1F,aAAa9hC,iBAE/C1zD,KAAKuwF,YACPvwF,KAAK4vB,cAAck5C,YAAY9oE,KAAKuwF,WAAW78B,iBAE7C1zD,KAAKy1F,WACPz1F,KAAK4vB,cAAck5C,YAAY9oE,KAAKy1F,UAAU/hC,iBAGhD1zD,KAAKyY,gBAAkB,IAAI+3E,EAAgB,CACzC7yE,OAAQ1d,EAAM0d,OACd8yE,aAAczwF,KAAKywF,eAErBzwF,KAAKmzD,kBAAoB,IAAIq3B,EAAkB,CAC7C5jF,QAAS3G,EAAM2G,QACf+W,OAAQ1d,EAAM0d,OACd8zC,UAAWxxD,EAAM+zF,iBACjBxiC,aAAcxxD,KAAKwxD,aACnBI,eAAgB5xD,KAAK8zF,gBACrBhiC,eAAgB9xD,KAAKo0F,gBACrBriC,kBAAmB/xD,KAAKu0F,mBACxBviC,eAAgBhyD,KAAK+zF,gBACrBliC,cAAe7xD,KAAKm0F,eACpBziC,kBAAmB1xD,KAAK4zF,mBACxBjiC,wBAAyB3xD,KAAK6zF,2BAEhC7zF,KAAK4sF,mBAAqB,IAAI13B,IAAmB,CAC/CzD,UAAWxxD,EAAM+zF,iBACjB7+B,iBAAkBn1D,KAAKmzD,kBAAkBy3B,sBACzCx2B,mBAAoBp0D,KAAKwxD,aAAa4C,qBAExCp0D,KAAK66D,kBAAoB,IAAImwB,EAAkB,CAC7CzQ,mBAAoBv6E,KAAKC,MAAMs6E,mBAC/B0Q,SAAUjrF,KAAKy0F,UACfvJ,YAAalrF,KAAK20F,aAClBxJ,SAAUnrF,KAAK60F,UACfzJ,YAAaprF,KAAK+0F,aAClB5/B,iBAAkBn1D,KAAKmzD,kBAAkBy3B,sBACzCx1B,oBAAqBp1D,KAAKwxD,aAAa4D,oBACvCj0C,WAAYnhB,KAAKC,MAAMkhB,aAEzBnhB,KAAKktF,oBAAsB,IAAIkK,EAAoB,CACjDjiC,iBAAkBn1D,KAAKmzD,kBAAkBy3B,sBACzCx1B,oBAAqBp1D,KAAKwxD,aAAa4D,sBAEzCp1D,KAAK00F,iBAAmB,IAAIlH,EAAiB,CAC3Cr4B,iBAAkBn1D,KAAKmzD,kBAAkBy3B,sBACzCx3D,QAASpzB,KAAKC,MAAMmzB,UAEtBpzB,KAAK80F,iBAAmB,IAAIzG,EAC5BruF,KAAKs0F,eAAiB,IAAI1F,EAAe,CACvCz5B,iBAAkBn1D,KAAKmzD,kBAAkBy3B,sBACzCx3D,QAASpzB,KAAKC,MAAMmzB,UAEtBpzB,KAAKw1F,aAAe,IAAItF,EAAa,CACnCtpF,QAAS3G,EAAM2G,QACf+W,OAAQ1d,EAAM0d,OACdy3C,oBAAqBp1D,KAAKwxD,aAAa4D,sBAEzCp1D,KAAKuwF,WAAa,IAAI8G,EAAW,CAC/BzwF,QAAS3G,EAAM2G,QACf4qD,aAAcxxD,KAAKwxD,aACnBp+B,QAASpzB,KAAKC,MAAMmzB,UAEtBpzB,KAAKy1F,UAAY,IAAInE,EAAU,CAC7BvuF,MAAO/C,KAAKC,MAAM8C,MAClB0M,OAAQzP,KAAKC,MAAMwP,OACnB8hF,8BAA+BvxF,KAAKuxF,gCAGtCvxF,KAAK4vB,cAAcO,SAASnwB,KAAK4sF,mBAAmBl5B,iBACpD1zD,KAAKwxD,aACF0C,mBACA/jC,SAASnwB,KAAKmzD,kBAAkBe,oBACnCl0D,KAAK4vB,cAAcO,SAASnwB,KAAKw1F,aAAa9hC,iBAC9C1zD,KAAK4vB,cAAcO,SAASnwB,KAAKuwF,WAAW78B,iBAC5C1zD,KAAK4vB,cAAcO,SAASnwB,KAAK66D,kBAAkB3G,oBACnDl0D,KAAK4vB,cAAcO,SAASnwB,KAAKktF,oBAAoBx5B,iBACrD1zD,KAAK4vB,cAAcO,SAASnwB,KAAKy1F,UAAU/hC,iBAG7CjV,uBAGEz+C,KAAKq1F,YAAa,EAElBr1F,KAAKgzF,kBAAkBn6B,UACvB74D,KAAK4sF,mBAAmBtgF,SACxBtM,KAAKmzD,kBAAkB7mD,SACvBtM,KAAK6yF,gBAAgBh6B,UACrB74D,KAAKg3F,aAAan+B,UACd74D,KAAK01F,WAAWG,qBAAqB71F,KAAK01F,WAC9CxE,IAGF95E,0BAA0B6C,GAEtBA,EAAUlX,QAAU/C,KAAKC,MAAM8C,OAC/BkX,EAAUxK,SAAWzP,KAAKC,MAAMwP,SAEhCzP,KAAKywF,aAAamB,OAAO33E,EAAUlX,MAAOkX,EAAUxK,QACpDzP,KAAKwxD,aAAaogC,OAAO33E,EAAUlX,MAAOkX,EAAUxK,QACpDzP,KAAKy1F,UAAU7D,OAAO33E,EAAUlX,MAAOkX,EAAUxK,QACjDzP,KAAK02F,eAAezgC,QAAU,IAAIhmC,YAChC,EACA,EACAhW,EAAUlX,MACVkX,EAAUxK,QAIZzP,KAAKyyF,WAAWxB,kBAChBjxF,KAAKo1F,gBAGHn7E,EAAUmZ,UAAYpzB,KAAKC,MAAMmzB,UACnCpzB,KAAKi3D,KAAKyB,WAAWz+C,EAAUmZ,SAC/BpzB,KAAKs0F,eAAe57B,WAAWz+C,EAAUmZ,SACzCpzB,KAAK00F,iBAAiBh8B,WAAWz+C,EAAUmZ,SAC3CpzB,KAAKuwF,WAAW73B,WAAWz+C,EAAUmZ,SACrCpzB,KAAKwxD,aAAakH,WAAWz+C,EAAUmZ,SACvCpzB,KAAK6yF,gBAAgBn6B,WAAWz+C,EAAUmZ,UAGxCnZ,EAAUkH,aAAenhB,KAAKC,MAAMkhB,YACtCnhB,KAAK66D,kBAAkBkxB,cAAc/rF,KAAKC,MAAMkhB,YAIhDnhB,KAAKC,MAAM0d,SAAW1D,EAAU0D,QAChC3d,KAAKC,MAAM+zF,mBAAqB/5E,EAAU+5E,kBAC1Ch0F,KAAKC,MAAM2G,UAAYqT,EAAUrT,SAEjC5G,KAAKk3F,uBAAuBj9E,GAK1BA,EAAUq9E,iBAAmBt3F,KAAKC,MAAMq3F,gBAC1Ct3F,KAAK41F,uBAEF37E,EAAUq9E,gBAAkBt3F,KAAKC,MAAMq3F,gBAC1Ct3F,KAAK81F,wBAUTphC,kBAAkB/wC,GACZ3jB,KAAKmzD,mBACPnzD,KAAKmzD,kBAAkBuB,kBAAkB/wC,GAG7C4yE,OAAOr0F,GACLlC,KAAKm7E,cAAcn7E,KAAK0yF,gBAAkBxwF,GAqO5CymC,SAAS3kB,EAAGC,GACVjkB,KAAKwxD,aAAa7oB,SAAS3kB,EAAGC,GAGhCi3D,aACE,MAAMl3D,EAAIhkB,KAAKC,MAAM2G,QAAQwpF,yBAA2B,EAClDnsE,EAAIjkB,KAAKC,MAAM2G,QAAQypF,0BAA4B,EACzDrwF,KAAKwxD,aAAa7oB,SAAS3kB,EAAGC,GAGhCszE,aAAa9lC,GACNA,EAAU7rD,SAEf5F,KAAKwxD,aAAagmC,iBAAiB/lC,EAAUA,EAAU7rD,OAAS,IAC5D5F,KAAKC,MAAM88E,uBACb/8E,KAAKC,MAAM88E,sBAAsB/8E,KAAKwxD,eA2D1CzxD,SACE,OAAKC,KAAKC,MAAM2G,QAGd,kBAAC,EAAD,CACE6e,QAAS,KAAM,EACfgyE,MAAOC,IAAY,MACT7E,EAA8C7yF,KAA9C6yF,gBAAiBrhC,EAA6BxxD,KAA7BwxD,aAAcugC,EAAe/xF,KAAf+xF,WACvC,IAAKc,IAAoBd,IAAevgC,EAAc,OAFtC,QAICkmC,EAAQC,kBAAjB3zE,EAJQ,EAIRA,EAAGC,EAJK,EAILA,EACL2zE,EAAa7F,EAAWrrE,wBACxBqwC,EAAMvF,EAAa4C,mBACvBpwC,EAAI4zE,EAAWt/E,KACf2L,EAAI2zE,EAAWv/E,KAEjBw6E,EAAgBx6B,gDACdtB,EACA/2D,KAAKC,MAAM43F,sBAGf7rE,KAAM0rE,IAAY,MACR7E,EAA8C7yF,KAA9C6yF,gBAAiBrhC,EAA6BxxD,KAA7BwxD,aAAcugC,EAAe/xF,KAAf+xF,WACvC,IAAKc,IAAoBd,IAAevgC,EAAc,OAEtD,GAAIkmC,EAAQI,UAIV,YADAjF,EAAgBp6B,2BAPH,QAWEi/B,EAAQC,kBAAjB3zE,EAXO,EAWPA,EAAGC,EAXI,EAWJA,EACL2zE,EAAa7F,EAAWrrE,wBACxBqwC,EAAMvF,EAAa4C,mBACvBpwC,EAAI4zE,EAAWt/E,KACf2L,EAAI2zE,EAAWv/E,KAEjBw6E,EAAgBt6B,iCAAiCxB,GACjD87B,EAAgBj6B,2BAChB54D,KAAKC,MAAM83F,qBAGZ,EAAG7rE,oBAAmBC,aAIjBnsB,KAAK6yF,kBAAoB1mE,GAC3BnsB,KAAK6yF,gBAAgBp6B,2BAGhBvsC,EACL,yBACE1pB,IAAKuvF,GAAe/xF,KAAK+xF,WAAaA,EACtC9sF,MAAK,eACApC,EAAOkvF,WADP,GAEC/xF,KAAKC,MAAM+3F,eAAiBn1F,EAAOmvF,gBAAalnF,QAvDhC,Q,0MC7qBrB,GACbwgE,aAAc,CACZvoE,MAAO,GACPoyB,YAAa,EACbC,aAAc,GAEhB6iE,cAAe,CACbl1F,MAAO,IACPsC,eAAgB,UAElB4F,WAAY,CACVlI,MAAO,K,yLCMJ,MC0BDm1F,EAA8B,CAClCC,EACAC,IAEOD,EAAsB9zE,KAC3Bg0E,GAAkBA,EAAe91F,OAAS61F,GAS/B,SAASE,EAAYr4F,GAAe,MACzCs4F,EAAuCt4F,EAAvCs4F,iBAAkBC,EAAqBv4F,EAArBu4F,iBAEpBC,EAAc34F,aAAiBoT,KAC/BrB,EAA2B4mF,EAAY5zF,OAAOgN,yBAC9CiB,EAA8B2lF,EAAY3lF,4BAE1C4lF,EAAoB54F,UACxB,ID/CF8G,KAEA,MACMo4D,EADWp4D,EAAQ8zC,qBACO6E,2BAEhC,OAAO/c,IACLxgB,iBAAO,EAAGg9C,EAAetqD,OAAQX,IAC/B,MAAMkrD,EAAYD,EAAe/gB,GAAGlqC,GAEpC,OAAOkrD,EACJ05B,0BACAtzD,YACA9/B,IAAIhD,GAAQ08D,EAAU25B,kBAAkBr2F,IACxCgD,IAAI8yF,IACH,MAAMD,EAAaC,EAAezsE,UAG5BujC,EAAakpC,EAAethB,gBAE5B8hB,EADiB1pC,EAAWjT,OAAO7W,YAEtC9/B,IAAKuzF,IACJ,MAAMhpC,EAAWX,EAAWh4C,IAAI2hF,GAC1B7/B,EAAYnJ,EAASlkC,UAAUkI,cAC/BilE,EAAgBjpC,EAASM,WACzB4oC,EAAsBlpC,EAASrhC,iBAC/B2hC,EAAW,IAAM2oC,EACjBtqE,EAAiB,IAAMuqE,EACvBC,EAAsB,IAAMH,EAElC,GAAkB,WAAd7/B,EACF,MAAO,CACLh2D,KAAM61F,EACN7/B,UAAW,SACX/I,SAAWgpC,GACTA,EAAOC,mBAAmBL,GAC5B3oC,SAAU,CAAC+oC,EAAkBv2F,IAC3Bu2F,EAAOE,mBAAmBN,EAAen2F,GAC3CytD,WACA3hC,iBACAwqE,uBAEG,GAAkB,YAAdhgC,EACT,MAAO,CACLh2D,KAAM61F,EACN7/B,UAAW,UACX/I,SAAWgpC,GACTA,EAAOG,oBAAoBP,GAC7B3oC,SAAU,CAAC+oC,EAAkBv2F,IAC3Bu2F,EAAOI,oBAAoBR,EAAen2F,GAC5CytD,WACA3hC,iBACAwqE,uBAEG,GAAkB,aAAdhgC,EAA0B,CAEnC,MAAMjmD,EAAO88C,EAAS7mB,eAAe5D,YAAY,IAAM,GACvD,MAAO,CACLpiC,KAAM61F,EACN7/B,UAAW,WACXxhD,aAAczE,EACdk9C,SAAWgpC,GACTA,EAAOK,mBAAmBT,GAC5B3oC,SAAU,CAAC+oC,EAAkBv2F,IAC3Bu2F,EAAOM,mBAAmBV,EAAen2F,GAC3CytD,WACA3hC,iBACAwqE,uBAEG,MAAkB,UAAdhgC,EACF,CACLh2D,KAAM61F,EACN7/B,UAAW,QACX/I,SAAWgpC,GACTA,EAAOK,mBAAmBT,GAC5B3oC,SAAU,CAAC+oC,EAAkBv2F,IAC3Bu2F,EAAOM,mBAAmBV,EAAen2F,GAC3CytD,WACA3hC,iBACAwqE,wBAGFrwF,QAAQuE,MAAR,+BAC0B8rD,EAD1B,sDACiFm/B,EADjF,wCAGO,QAGV/sF,OAAO4N,SAEV,MAAO,CACLgmD,YACA18D,KAAM61F,EACNC,iBACAtgD,SAAUsgD,EAAe34C,cACzBx8C,YAAam1F,EAAe5pE,iBAC5BoqE,0BChDFY,CAAyBx5F,EAAM2G,SACrC,CAAC3G,EAAM2G,UAGHqY,EAAci1B,cAEdwlD,EAAY,KAChB,MAAMrzC,EAAUgJ,YAAiB,SAAUpsD,GACzCs1F,EAAiBoB,eAAe12F,IAElCs1F,EAAiBqB,gBACfvzC,EACAkyC,EAAiBsB,mBAGnB56E,IACAu5E,KASIsB,EAAmB,CAACZ,EAAkBa,KAC1Cb,EAAOc,cAAcD,GACrB,MAAM1B,EAAiBH,EACrBQ,EACAqB,GAGE1B,GDuBkC,EACxCa,EACAb,KAEAa,EAAOe,kBAEP,MAAM9qC,EAAakpC,EAAethB,gBACX5nB,EAAWjT,OAAO7W,YAC1Bv9B,QAASgxF,IACtB,MAAMhpC,EAAWX,EAAWh4C,IAAI2hF,GAC1B7/B,EAAYnJ,EAASlkC,UAAUkI,cAEnB,WAAdmlC,EACFigC,EAAOE,mBACLN,EACArtB,WAAW3b,EAASI,aAAe,GAEd,YAAd+I,EACTigC,EAAOI,oBAAoBR,EAAuC,SAAxBhpC,EAASI,YAEnDgpC,EAAOM,mBAAmBV,EAAehpC,EAASI,eC1ClDgqC,CAA2BhB,EAAQb,EAAeA,gBAGpDp5E,IACAu5E,KAGF,OACE,gBAAC,OAAD,KACG,EAAGj4F,UAEA,gBAAC,IAAD,CAAQqE,UAAQ,EAACmB,QAAM,GACrB,gBAAC,IAAD,KACE,gBAAC,IAAD,KACE,gBAAC0gF,EAAA,EAAD,CAAyBp0E,WAAW,gBAAgBW,KAAK,QACvD,gBAAC,QAAD,kPASLulF,EAAiBsB,kBAAoB,GACpC,gBAAC,IAAD,KACE,gBAAC,IAAD,KACE,gBAACpT,EAAA,EAAD,CACEp0E,WAAW,mBACXW,KAAK,WAEL,gBAAC,QAAD,uPAWPgP,iBAAO,EAAGu2E,EAAiBsB,kBAAoB9lF,IAC9C,MAAMmlF,EAAmBX,EAAiB4B,YAAYpmF,GAChDqkF,EAAac,EAAOkB,gBACpB/B,EAAiBH,EACrBQ,EACAN,GAGF,OACE,gBAAC,WAAD,CAAgB/zF,IAAK0P,GACnB,gBAACshB,EAAA,EAAD,KACE,gBAACA,EAAA,EAAD,KACE,gBAAC,QAAD,sBAEF,gBAACh0B,EAAA,EAAD,CACEmJ,OAAO,OACPpI,cAAY,EACZ2L,SAAU,6BACV7L,MAAOg3F,EAAOl0D,UACd7iC,SAAUkkD,IACJA,IAAY6yC,EAAOl0D,YAEvBk0D,EAAO3iF,QAAQ8vC,GACfpnC,IACAu5E,MAEF9tF,WAAS,IAEX,gBAAC2qB,EAAA,EAAD,KACE,gBAAC,QAAD,eAEF,gBAACzoB,EAAA,EAAD,CACEpC,OAAO,OACPtI,MAAOk2F,EACPj2F,SAAU,CAACoI,EAAGwJ,EAAGgmF,IACfD,EAAiBZ,EAAQa,GAE3BrvF,WAAS,EACTqD,SAAU,mCAET2qF,EAAkBnzF,IAAI8yF,GACrB,gBAACrqF,EAAA,EAAD,CACE3J,IAAKg0F,EAAe91F,KACpBL,MAAOm2F,EAAe91F,KACtBkD,YAAa4yF,EAAetgD,aAIlC,gBAAC7xB,EAAA,EAAD,CACEC,QACE,gBAACtmB,EAAA,EAAD,KACE,gBAAC,IAAD,OAGJ8b,kBAAmB,IAAM,CACvB,CACErX,MAAO/D,EAAKG,EAAE,eACdkb,MAAO,KAAMy+E,OAjHfp3F,EAiH4Bi2F,EAAOl0D,UAhHvDuzD,EAAiB8B,aAAap3F,GAC9Bgc,SACAu5E,IAHoBv1F,QAmHA,CAAEV,KAAM,aACR,CACEA,KAAM,WACN+B,MAAO,uBACP+F,QAASwH,EACT+J,MAAO,IACL9I,GACGjB,QAMb,gBAAC,IAAD,CAAM9L,QAAM,EAACnB,UAAQ,GACnB,gBAAC,IAAD,CAAQmB,QAAM,GACTqyF,GAAcC,EACf,gBAAC,WAAD,KACE,gBAAC,IAAD,KACE,gBAAC32C,EAAA,EAAD,KACE,gBAACgkC,EAAA,EAAD,CACEn4E,OAAQ8qF,EAAen1F,gBAI7B,gBAACo3F,EAAA,EAAD,CACE7oC,UAAW,CAACynC,GACZlgC,OAAQq/B,EAAeQ,iBACvBjyF,QAAS3G,EAAM2G,QACf0O,gBAAiBrV,EAAMqV,gBACvBC,iBAAkBtV,EAAMsV,iBACxBgC,wBACEtX,EAAMsX,wBAERgjF,2BACE1oF,EACIinF,GACEv4F,EAAKG,EACH,0DAAgCo4F,wBAEpChuF,KAIR,UAM0B,IAAvCytF,EAAiBsB,kBAChB,gBAACW,EAAA,EAAD,KACE,gBAAC,QAAD,6BAEA,KACJ,gBAAC,IAAD,KACE,gBAAC,IAAD,CAAMn1F,eAAe,WAAWW,WAAW,SAASD,QAAM,GACxD,gBAAC2hF,EAAA,EAAD,CACEnjF,SAAO,EACPD,MAAO,gBAAC,QAAD,sBACPE,QAASk1F,EACTrzF,KAAM,gBAAC,IAAD,Y,aC9OT,MAAMo0F,UAA0B36F,YAC7CC,SAAU,MAAD,EACwCC,KAAKC,MAA5C2G,EADD,EACCA,QAASqQ,EADV,EACUA,QAASshF,EADnB,EACmBA,iBAE1B,OACE,gBAACmC,EAAA,EAAD,CACE91F,UAAQ,EACR07C,iBAAkB,CAChB,gBAACr6C,EAAA,EAAD,CACE5B,IAAI,OACJ6B,aAAa,2CAGjB9B,QAAS,CACP,gBAACu2F,EAAA,EAAD,CACEr2F,MAAO,gBAAC,QAAD,WACPC,SAAO,EACP+S,iBAAe,EACf9S,QAASyS,EACT5S,IAAK,WAGTK,mBAAmB,EACnBd,MAAI,EACJa,eAAgBwS,EAChBxW,MAAO,gBAAC,QAAD,iBAEP,gBAAC63F,EAAD,CACE1xF,QAASA,EACT0O,gBAAiBtV,KAAKC,MAAMqV,gBAC5BC,iBAAkBvV,KAAKC,MAAMsV,iBAC7BgC,wBAAyBvX,KAAKC,MAAMsX,wBACpCghF,iBAAkBA,EAClBC,iBACE,IACEx4F,KAAKif,kB,aC1CJ,IAAGtB,SAAQi9E,8BACxB,kBAACC,EAAA,EAAD,KACE,kBAACA,EAAA,EAAD,CAAe51F,MAAOpC,EAAOyoE,eAC7B,kBAACuvB,EAAA,EAAD,CAAe90F,QAAM,GACnB,kBAAC+0F,EAAA,EAAD,CACEpwF,WAAS,EACTqD,SAAU,wBACVvD,OAAO,OACPlK,UAAQ,KAGZ,kBAACu6F,EAAA,EAAD,CAAe51F,MAAOpC,EAAOo1F,eAC3B,kBAAC8C,EAAA,EAAD,CACEzuD,cAAY,EACZ74B,MAAO,CACLs4B,EAAGpuB,EAAOoxB,wBACV9C,EAAGtuB,EAAOqxB,0BACV9C,EAAGvuB,EAAOsxB,yBACV9C,EAAG,KAELI,iBAAkB94B,IAChBkK,EAAOm5B,mBAAmBrjC,EAAM+4B,IAAIT,EAAGt4B,EAAM+4B,IAAIP,EAAGx4B,EAAM+4B,IAAIN,GAC9D0uD,QAIN,kBAACC,EAAA,EAAD,CAAe51F,MAAOpC,EAAOoI,c,4CCrBjC,MAAM+vF,EAAmBx5B,0BCOV,EACbl2B,YACA++B,YACA/nE,SACAkH,WACAsqD,YACAmnC,eACAC,gBACAC,wBAEA,kBAACN,EAAA,EAAD,KACE,kBAACA,EAAA,EAAD,CAAe51F,MAAOpC,EAAOyoE,cAC3B,kBAAC8vB,EAAA,EAAD,OAEF,kBAACP,EAAA,EAAD,CAAe90F,QAAM,GACnB,kBAAC+0F,EAAA,EAAD,CACEtwF,OAAO,OACPG,aAAc2gC,GAAa,aAC3B0C,GAAI1C,EACJ/hC,UACE8gE,EAAY,kBAAC,QAAD,wCAA4Cv/D,EAE1DxK,UAAWgrC,EACXhpC,OAAQA,EACRoI,WAAS,KAGb,kBAACmwF,EAAA,EAAD,CAAe51F,MAAOpC,EAAOo1F,eAC3B,kBAAC0C,EAAA,EAAD,CACEr2F,MACmB,IAAjB22F,EACE,kBAAC,QAAD,mBAEA,kBAAC,QAAD,uCAAQA,kBAGZz2F,QAAS02F,KAGb,kBAACL,EAAA,EAAD,CAAe51F,MAAOpC,EAAOoI,YAC3B,kBAACowF,EAAA,EAAD,CACEhxF,QAASypD,EACTj/C,YAAa,kBAAC,IAAD,MACbD,cAAe,kBAAC,IAAD,MACftK,QAAS,CAACC,EAAGrI,IAAUi5F,EAAmBj5F,KAE5C,kBAACrC,EAAA,EAAD,CAAY2E,QAASgF,EAAUlJ,UAAWgrC,GACxC,kBAAC,IAAD,UDhDR,MAAMgwD,UAAuBvhF,YAAmC,eAAD,oBAC7DzY,MAAQ,CACN8nE,WAAY,IAF+C,KAK7DmyB,iBAAmB,KACbv7F,KAAKC,MAAM2oD,gBACb5oD,KAAKC,MAAM2oD,eAAegC,wBAC5B5qD,KAAKif,eAGPlf,SAAU,MAAD,EACoCC,KAAKC,MAAxCi8D,EADD,EACCA,gBAAiBg/B,EADlB,EACkBA,cAEnBM,EAAct/B,EAAgB9wB,iBAC9BqwD,EAAsBC,wBAAc,EAAGF,EAAaznF,IACxD,MAAMw9C,EAAQ2K,EAAgB7wB,WAAWt3B,GACnCu3B,EAAYimB,EAAMvsB,UAExB,OACE,kBAACg2D,EAAD,CACEnqF,MAAO2qF,EAAc,EAAIznF,EACzB1P,IAAK,SAAWinC,EAChBimB,MAAOA,EACPjmB,UAAWA,EACX++B,UAAWrqE,KAAKsB,MAAM8nE,WAAW99B,GACjC2vD,aAAc1pC,EAAMsoC,kBACpBqB,cAAe,IAAMA,EAAc3pC,GACnCjvD,OAAQI,IACN,MAAM2jD,EAAU3jD,EAAM0D,OAAOlE,MAC7B,GAAIopC,IAAc+a,EAAS,OAE3B,IAAIikB,GAAU,EACVpO,EAAgBy/B,cAAct1C,GAChCikB,GAAU,EAEVtqE,KAAKC,MAAM27F,cAActwD,EAAW+a,EAASq5B,IACvCA,GACFxjB,EAAgB3C,SAASjuB,GAAW/0B,QAAQ8vC,KAIlDrmD,KAAK2B,SAAS,CACZynE,WAAW,eACNppE,KAAKsB,MAAM8nE,WADN,CAER,CAAC99B,IAAag/B,OAIpB9gE,SAAU,KACRxJ,KAAKC,MAAM47F,cAAcvwD,EAAWwwD,IAC7BA,IAEL5/B,EAAgB6/B,YAAYzwD,GAC5BtrC,KAAKu7F,uBAGTznC,UAAWvC,EAAMkD,gBACjB0mC,mBAAoBnnC,IAClBzC,EAAMyqC,cAAchoC,GACpBh0D,KAAKu7F,wBAMb,OACE,kBAAC,IAAD,CAAQ32F,UAAQ,GACb62F,EACD,kBAACQ,EAAD,CACEt+E,OAAQu+C,EACR0+B,yBAA0B,IAAM56F,KAAKu7F,uBAO/C,MAAMW,EAAyBx6B,4BAAkB45B,GAsBlC,MAAMa,WAAmBpiF,YAAyB,eAAD,oBAC9DzY,MAAQ,CACN86F,mBAAoB,MAFwC,KAY9DC,aAAgBD,IACdp8F,KAAK2B,SAAS,CACZy6F,wBAd0D,KAkB9DE,UAAY,KAAO,MACTpgC,EAAoBl8D,KAAKC,MAAzBi8D,gBACFj5D,EAAOosD,YAAiB,QAASpsD,GACrCi5D,EAAgBy/B,cAAc14F,IAEhCi5D,EAAgBqgC,eAAet5F,EAAMi5D,EAAgB9wB,kBACrDprC,KAAKu7F,oBAxBuD,KA2B9DA,iBAAmB,KACbv7F,KAAKC,MAAM2oD,gBACb5oD,KAAKC,MAAM2oD,eAAegC,wBAC5B5qD,KAAKif,eAzBPjF,sBAAsBC,GAIpB,OAAQA,EAAU8gD,aAwBpBh7D,SAAU,MACA6G,EAAY5G,KAAKC,MAAjB2G,QACAw1F,EAAuBp8F,KAAKsB,MAA5B86F,mBAKFnb,EAAUjhF,KAAKC,MAAMi8D,gBAAgBp1D,IAE3C,OACE,kBAAC01F,EAAA,EAAD,KACE,kBAAC,IAAD,CAAQ53F,UAAQ,EAACmB,QAAM,GACrB,kBAACm2F,EAAD,CACE73F,IAAK48E,EACL/kB,gBAAiBl8D,KAAKC,MAAMi8D,gBAC5Bg/B,cAAe3pC,GAASvxD,KAAKq8F,aAAa9qC,GAC1CsqC,cAAe77F,KAAKC,MAAM47F,cAC1BD,cAAe57F,KAAKC,MAAM27F,cAC1B35B,UAAW,EAAGtS,WAAUC,eACtB,MAAM4rC,EAAcx7F,KAAKC,MAAMi8D,gBAAgB9wB,iBAC/CprC,KAAKC,MAAMi8D,gBAAgBugC,UACzBjB,EAAc,EAAI7rC,EAClB6rC,EAAc,EAAI5rC,GAEpB5vD,KAAKu7F,oBAEPn4B,YAAY,kBACZC,eAAa,EACbza,eAAgB5oD,KAAKC,MAAM2oD,iBAE7B,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAMvjD,eAAe,WAAWU,QAAM,GACpC,kBAAC2hF,EAAA,EAAD,CACEpjF,MAAO,kBAAC,QAAD,oBACPC,SAAO,EACPC,QAASxE,KAAKs8F,UACdj2F,KAAM,kBAAC,IAAD,UAIX+1F,GACC,kBAAC,EAAD,CACEx1F,QAASA,EACT0O,gBAAiBtV,KAAKC,MAAMqV,gBAC5BC,iBAAkBvV,KAAKC,MAAMsV,iBAC7BgC,wBAAyBvX,KAAKC,MAAMsX,wBACpCghF,iBAAkB6D,EAClBnlF,QAAS,IACPjX,KAAK2B,SAAS,CACZy6F,mBAAoB,c,8IE7M/B,MAAMM,EAAiB,CAC5BC,GACEjoF,QAA2B,CAAEA,KAAM,OAErC,MAAMkoF,EAAOC,IAAIF,EAAMx1E,OAAO2M,eAC9B,MAAM,mCAAN,OAA0C8oE,EAA1C,cAAoDloF,EAApD,a,YCOa,IAAGooF,aAChBA,EACE,gBAAC,IAAD,KACE,gBAAC,IAAD,CAAM92F,WAAW,UACf,gBAAC+2F,EAAA,EAAD,CAAQh4F,IAAK23F,EAAeI,EAAQH,OAAS,GAAI,CAAEjoF,KAAM,OACzD,gBAAC,IAAD,MACA,gBAACsoF,EAAA,EAAD,CAAMtoF,KAAK,SAAX,wBAAyCooF,EAAQH,QAEnD,gBAAC,IAAD,KACE,gBAACK,EAAA,EAAD,KACE,gBAAC,QAAD,qEAON,gBAACC,EAAA,EAAD,M,4CCZW,IAAGC,YAChB,gBAAC,IAAD,CAAQt4F,UAAQ,GACd,gBAAC,IAAD,KACIs4F,EAEoB,IAAlBA,EAAOt3F,OACT,gBAAC40F,EAAA,EAAD,KACE,gBAAC,QAAD,iEAGF,gBAAC3lE,EAAA,EAAD,KACE,gBAACA,EAAA,EAAD,KACE,gBAACA,EAAA,EAAD,KACE,gBAACA,EAAA,EAAD,aACA,gBAACA,EAAA,EAAD,eAGJ,gBAACA,EAAA,EAAD,KACGqoE,EAAO33F,IAAI43F,GACV,gBAACtoE,EAAA,EAAD,CAAUxwB,IAAK84F,EAAMnvD,IACnB,gBAACnZ,EAAA,EAAD,KACGuoE,IAAOD,EAAME,UAAW,wBAE3B,gBAACxoE,EAAA,EAAD,KAAiBsoE,EAAM56F,UAnB/B,gBAAC06F,EAAA,EAAD,Q,QCVO,IAAGK,eAAcC,0BAC9BD,GAAgBA,EAAaE,OAC3B,gBAAC,IAAD,KACE,gBAAC,IAAD,KACE,gBAACR,EAAA,EAAD,KACE,gBAAC,QAAD,sLACyBM,EAAaE,YAM1C,gBAAC,IAAD,CAAMn4F,eAAe,UACnB,gBAACqiF,EAAA,EAAD,CACEpjF,MAAO,gBAAC,QAAD,uBACPC,SAAO,EACPC,QAAS+4F,MAIbD,IAAiBA,EAAaE,OAChC,gBAAC,IAAD,KACE,gBAAC,IAAD,KACE,gBAACR,EAAA,EAAD,KACE,gBAAC,QAAD,mNAOJ,gBAAC,IAAD,CAAM33F,eAAe,UACnB,gBAACqiF,EAAA,EAAD,CACEpjF,MAAO,gBAAC,QAAD,8BACPC,SAAO,EACPC,QAAS+4F,MAKf,gBAACN,EAAA,EAAD,M,2CC5BW,MAAMQ,UAAsB1jF,YAAyB,eAAD,oBACjEzY,MAAQ,CACNgC,WAAY,WAFmD,KAKjEg5D,aAAgB5N,GACd1uD,KAAK2B,SAAS,CACZ2B,WAAYorD,IAGhB3uD,SAAU,MAAD,EACmBC,KAAKC,MAAvB2D,EADD,EACCA,KAAMC,EADP,EACOA,QACRO,EAAU,CACd,kBAACu2F,EAAA,EAAD,CACEr2F,MAAO,kBAAC,QAAD,cACPD,IAAI,QACJE,SAAS,EACTC,QAASX,KAIb,OACE,kBAAC65F,EAAA,EAAmBx8F,SAApB,KACIy8F,GACA,kBAACjD,EAAA,EAAD,CACEt2F,QAASA,EACTk8C,iBAAkB,CAChB,kBAACr6C,EAAA,EAAD,CAAY5B,IAAI,OAAO6B,aAAa,uBACpCy3F,EAAYC,eACV,kBAACjD,EAAA,EAAD,CACEr2F,MAAO,kBAAC,QAAD,gBACPD,IAAI,UACJG,QAASm5F,EAAYE,uBAGzBF,EAAYC,eAAiBD,EAAYb,SACvC,kBAACnC,EAAA,EAAD,CACEr2F,MAAO,kBAAC,QAAD,eACPD,IAAI,SACJG,QAASm5F,EAAYG,YAI3Br5F,eAAgBZ,EAChBa,mBAAmB,EACnBd,KAAMA,EACNgB,UAAQ,GAER,kBAACs6C,EAAA,EAAD,CAAMh9C,MAAOlC,KAAKsB,MAAMgC,WAAYnB,SAAUnC,KAAKs8D,cACjD,kBAAC,IAAD,CAAKh4D,MAAO,kBAAC,QAAD,mBAA2BpC,MAAM,YAC7C,kBAAC,IAAD,CAAKoC,MAAO,kBAAC,QAAD,8BAAsCpC,MAAM,WAE/B,YAA1BlC,KAAKsB,MAAMgC,aACTq6F,EAAYC,cACX,kBAAC,IAAD,CAAQh5F,UAAQ,GACd,kBAACm5F,EAAD,CAAgBjB,QAASa,EAAYb,UACrC,kBAACkB,EAAD,CACEV,aAAcK,EAAYL,aAC1BC,qBAAsBv9F,KAAKC,MAAMs9F,wBAIrC,kBAAC,IAAD,KACE,kBAACU,EAAA,EAAD,CACEC,QAASP,EAAYO,QACrBC,gBAAiBR,EAAYQ,oBAIV,UAA1Bn+F,KAAKsB,MAAMgC,aACTq6F,EAAYC,cACX,kBAAC,IAAD,CAAQh5F,UAAQ,GACd,kBAACw5F,EAAD,CAAelB,OAAQS,EAAYT,UAGrC,kBAAC1C,EAAA,EAAD,KACE,kBAAC,QAAD,iF,uFC1FH,MAAM6D,UAAiCv+F,YACpDC,SAAU,MAAD,EACwCC,KAAKC,MAA5C03E,EADD,EACCA,SAAUO,EADX,EACWA,gBAAiBtxE,EAD5B,EAC4BA,QAC7BuoD,EAAawoB,EAASZ,cAC1BmB,EAAgBomB,aAChB13F,GAGIowE,EAAmBhd,YACvB7K,EACA+oB,GACEP,EAASZ,cAAcmB,EAAgBomB,aAAc13F,GACvD,CAACsxE,EAAiBj1E,EAAMf,IACtBy1E,EAASV,eACPiB,EAAgBomB,aAChBr7F,EACAf,EACA0E,IAIN,OACE,gBAAC,IAAD,KACGowE,EAAiBpxE,OAChB,gBAAC00F,EAAA,EAAD,CACEthC,OAAQge,EACRvlB,UAAW,CAACymB,KAGd,gBAACsiB,EAAA,EAAD,KACE,gBAAC,QAAD,oI,mECnBG,MAAM+D,UAAqBz+F,YAA+B,eAAD,oBACtEwB,MAAQ,CAAEqvE,cAAe,KAAM6tB,cAAe,GADwB,KAItEC,cAAgB,CAAC7sB,EAAgB/gE,KAC3B7Q,KAAKsB,MAAMqvE,eACf3wE,KAAK2B,SAAS,CAAEgvE,cAAeiB,EAAQ4sB,aAAc3tF,KANe,KAStE+4E,WAAa,KACX,MAAM5d,IAAoBhsE,KAAKsB,MAAMqvE,cADpB,EAEuB3wE,KAAKsB,MAArCqvE,EAFS,EAETA,cAAe6tB,EAFN,EAEMA,aACvBx+F,KAAK2B,SACH,CACEgvE,cAAe,MAEjB,KACM3E,GACFhsE,KAAKC,MAAMy+F,aACTF,EACA7hF,KAAKgK,MAAMgqD,EAAgBA,EAAc3sD,EAAI,GAC7CrH,KAAKgK,MAAMgqD,EAAgBA,EAAc1sD,EAAI,OArBe,KA2BtEgoD,aAAgBvpE,IAAgB,MAAD,EAQzB1C,KAAKC,MANPm2F,EAF2B,EAE3BA,QACAC,EAH2B,EAG3BA,QACAsI,EAJ2B,EAI3BA,cACA57F,EAL2B,EAK3BA,MACA0M,EAN2B,EAM3BA,OACAkjF,EAP2B,EAO3BA,WAEMhiB,EAAkB3wE,KAAKsB,MAAvBqvE,cACR,IAAKA,EAAe,OAEpB,MAAMI,EAAgB/wE,KAAKgxE,KAAKC,iBAChCF,EAAc/sD,EAAIthB,EAAMyY,QACxB41D,EAAc9sD,EAAIvhB,EAAM0Y,QACxB,MAAM81D,EAAoBlxE,KAAKgxE,KAAKG,eAAeC,UAC7CC,EAAaN,EAAcO,gBAAgBJ,GAEjDP,EAAc3sD,EACZqtD,EAAWrtD,EAAI2uE,EACfyD,GACmB,WAAlBuI,EAA6B57F,EAAQ,EAAI,GAC5C4tE,EAAc1sD,EACZotD,EAAWptD,EAAI0uE,EACf0D,GACmB,WAAlBsI,EAA6BlvF,EAAS,EAAI,GAE7CzP,KAAKif,eAGP2/E,aAAc,MAAD,EASP5+F,KAAKC,MAPP4+F,EAFS,EAETA,WACAC,EAHS,EAGTA,WACA/7F,EAJS,EAITA,MACA0M,EALS,EAKTA,OACA2mF,EANS,EAMTA,QACAC,EAPS,EAOTA,QACA1D,EARS,EAQTA,WAEIoM,EAAaF,EAAa,EAAIA,EAAa97F,EAAQ,EAAIA,EAAQ,EAC/Di8F,EAAcF,EAAa,EAAIA,EAAarvF,EAAS,EAAIA,EAAS,EAExE,OACE,wBACEpL,IAAK,WACLg5B,KAAK,qBACLo0C,YAAa,EACbztD,GAAIoyE,EAAUrzF,EAAQ,EAAIg8F,EAAa,GAAKpM,EAC5C1uE,GAAIoyE,EAAU5mF,EAAS,EAAIuvF,EAAc,GAAKrM,EAC9C5vF,MAAOg8F,EAAapM,EACpBljF,OAAQuvF,EAAcrM,IAK5BsM,gBAAiB,MAAD,EAQVj/F,KAAKC,MANP4+F,EAFY,EAEZA,WACA97F,EAHY,EAGZA,MACA0M,EAJY,EAIZA,OACA2mF,EALY,EAKZA,QACAC,EANY,EAMZA,QACA1D,EAPY,EAOZA,WAGF,OACE,0BACEtuF,IAAK,cACLg5B,KAAK,qBACLo0C,YAAa,EACbI,IAAKukB,EAAUrzF,EAAQ,GAAK4vF,EAC5B7gB,IAAKukB,EAAU5mF,EAAS,GAAKkjF,EAC7B5mD,GACG8yD,EAAa,EACVA,EACA97F,EAAQ0M,EAAS,GAChB1M,EAAQ0M,GAAU,EACnB,GAAKkjF,IAMjBuM,cAAe,MAAD,EASRl/F,KAAKC,MAPP4+F,EAFU,EAEVA,WACAC,EAHU,EAGVA,WACA/7F,EAJU,EAIVA,MACA0M,EALU,EAKVA,OACA2mF,EANU,EAMVA,QACAC,EAPU,EAOVA,QACA1D,EARU,EAQVA,WAEIwM,GACHN,EAAa,EAAIA,EAAa97F,EAAQ,EAAIA,EAAQ,GAAK,EACpDs7B,EAAM1hB,KAAK0hB,IAAKygE,EAAaniF,KAAK2U,GAAM,KACxCgN,EAAM3hB,KAAK2hB,IAAKwgE,EAAaniF,KAAK2U,GAAM,KAE9C,OACE,wBACEjtB,IAAK,YACLmtE,OAAO,qBACPC,YAAa,EACblb,IAAK6/B,EAAUrzF,EAAQ,EAAIo8F,EAAa9gE,GAAOs0D,EAC/Cn8B,IAAK6/B,EAAU5mF,EAAS,EAAI0vF,EAAa7gE,GAAOq0D,EAChDl8B,IAAK2/B,EAAUrzF,EAAQ,EAAIo8F,EAAa9gE,GAAOs0D,EAC/Cj8B,IAAK2/B,EAAU5mF,EAAS,EAAI0vF,EAAa7gE,GAAOq0D,IAKtDyM,iBAAkB,MAAD,EASXp/F,KAAKC,MAPPivE,EAFa,EAEbA,SACAyvB,EAHa,EAGbA,cACA57F,EAJa,EAIbA,MACA0M,EALa,EAKbA,OACA2mF,EANa,EAMbA,QACAC,EAPa,EAObA,QACA1D,EARa,EAQbA,WAGF,OACE,gBAAC,WAAD,KACE,2BACEtuF,IAAK,eACLg5B,KAAK,qBACLo0C,YAAa,EACb4tB,SAAS,UACT7yB,OAAQ0C,EACL3pE,IACCqsE,GAAM,WACAA,EAAO5tD,EACToyE,GACmB,WAAlBuI,EAA6B57F,EAAQ,EAAI,IAC1C4vF,EAJE,aAIa/gB,EAAO3tD,EACtBoyE,GACmB,WAAlBsI,EAA6BlvF,EAAS,EAAI,IAC3CkjF,IAEL38E,KAAK,OAETk5D,EAAS3pE,IAAI,CAACqsE,EAAQ/gE,IACrB,0BACE07D,cAAe7pE,GAAS1C,KAAKy+F,cAAc7sB,EAAQ/gE,GACnDxM,IAAG,iBAAYwM,GACfwsB,KAAK,qBACLo0C,YAAa,EACbxsE,MAAO,CACL8lB,OAAQ,QAEV8mD,IACGD,EAAO5tD,EACNoyE,GACmB,WAAlBuI,EAA6B57F,EAAQ,EAAI,IAC5C4vF,EAEF7gB,IACGF,EAAO3tD,EACNoyE,GACmB,WAAlBsI,EAA6BlvF,EAAS,EAAI,IAC7CkjF,EAEF5mD,EAAG,MAObhsC,SAAU,MACAusF,EAAUtsF,KAAKC,MAAfqsF,MAER,OACE,uBACE5f,cAAe1sE,KAAKisE,aACpBU,YAAa3sE,KAAK4pF,WAClBpnF,IAAKguE,GAAQxwE,KAAKgxE,KAAOR,EACzBztE,MAAM,OACN0M,OAAO,QAEI,QAAV68E,GAAmBtsF,KAAK4+F,aACd,WAAVtS,GAAsBtsF,KAAKi/F,gBACjB,SAAV3S,GAAoBtsF,KAAKk/F,cACf,YAAV5S,GAAuBtsF,KAAKo/F,mB,qFC7MtB,MAAME,UAAsBx/F,YACzCy/F,iBAAiBrwB,GAEf,IAAIswB,EAAQ,GACRC,EAAK,KACLC,EAAK,KACT,IAAK,IAAI3rF,EAAI,EAAGA,EAAIm7D,EAAStpE,OAAQmO,IACnC0rF,EAAKvwB,EAASn7D,GACgB2rF,EAA1B3rF,EAAI,GAAKm7D,EAAStpE,OAAaspE,EAAS,GAClCA,EAASn7D,EAAI,GACvByrF,EAAM50F,KAAK,CAAEoZ,EAAG07E,EAAG17E,EAAIy7E,EAAGz7E,EAAGC,EAAGy7E,EAAGz7E,EAAIw7E,EAAGx7E,IAI5C,GAAIu7E,EAAM55F,OAAS,EAAG,OAAO,EAE7B,MAAM+5F,EACJH,EAAM,GAAGx7E,EAAIw7E,EAAM,GAAOv7E,EAAIu7E,EAAM,GAAGv7E,EAAIu7E,EAAM,GAAOx7E,EAAI,EAE9D,IAAK,IAAIjQ,EAAI,EAAGA,EAAIyrF,EAAM55F,OAAS,IAAKmO,EAAG,CAIzC,GAFEyrF,EAAMzrF,GAAGiQ,EAAIw7E,EAAMzrF,EAAI,GAAGkQ,EAAIu7E,EAAMzrF,GAAGkQ,EAAIu7E,EAAMzrF,EAAI,GAAGiQ,EACZ,IACd27E,EAAoB,OAAO,EAO7D,GAHEH,EAAMA,EAAM55F,OAAS,GAAGoe,EAAIw7E,EAAM,GAAGv7E,EACrCu7E,EAAMA,EAAM55F,OAAS,GAAGqe,EAAIu7E,EAAM,GAAGx7E,EACe,IAClB27E,EAAoB,OAAO,EAG/D,IAAK,IAAI5rF,EAAI,EAAGA,EAAIm7D,EAAStpE,OAAS,IAAKmO,EACzC,IAAK,IAAIw7D,EAAIx7D,EAAI,EAAGw7D,EAAIL,EAAStpE,SAAU2pE,EACzC,GAAIL,EAASn7D,GAAGiQ,IAAMkrD,EAASK,GAAGvrD,GAAKkrD,EAASn7D,GAAGkQ,IAAMirD,EAASK,GAAGtrD,EACnE,OAAO,EAKb,IAAI27E,GAAW,EACXC,GAAW,EACf,IAAK,IAAI9rF,EAAI,EAAGA,EAAIm7D,EAAStpE,OAAS,IAAKmO,EACrCm7D,EAASn7D,GAAGiQ,IAAMkrD,EAASn7D,EAAI,GAAGiQ,IAAG47E,GAAW,GAChD1wB,EAASn7D,GAAGkQ,IAAMirD,EAASn7D,EAAI,GAAGkQ,IAAG47E,GAAW,GAEtD,OAAID,IAAYC,EAKlB9/F,SAAU,MAAD,EAOHC,KAAKC,MALPivE,EAFK,EAELA,SACA4wB,EAHK,EAGLA,gBACAC,EAJK,EAILA,gBACAn/B,EALK,EAKLA,MACAp3D,EANK,EAMLA,SAGF,OACE,gBAACvI,EAAA,EAAD,KACGuS,GACC,gBAACqhB,EAAA,EAAD,KACE,gBAACA,EAAA,EAAD,KACE,gBAACA,EAAA,EAAD,KACE,gBAACA,EAAA,EAAD,MACA,gBAACA,EAAA,EAAD,UACA,gBAACA,EAAA,EAAD,UACA,gBAACA,EAAA,EAAD,QAGJ,gBAACA,EAAA,EAAD,KACGq6C,EAAS3pE,IAAI,CAACrD,EAAO2O,IAElB,gBAACgkB,EAAA,EAAD,CACExwB,IAAG,mBAAcwM,GACjB5L,MAAO,CACLwT,gBAAiBjF,EAASuS,KAAKs+C,uBAGjC,gBAACxvC,EAAA,EAAD,MACI70B,KAAKu/F,iBAAiBrwB,IAAa,gBAAC,IAAD,OAEvC,gBAACr6C,EAAA,EAAD,KACE,gBAACxzB,EAAA,EAAD,CACEmJ,OAAO,OACPE,WAAS,EACTxI,MAAOA,EAAM8hB,EAAEg8E,SAAS,IACxB79F,SAAUQ,GACRm9F,EAAgBr0B,WAAW9oE,IAAa,EAAGkO,GAE7CtO,KAAK,YAGT,gBAACsyB,EAAA,EAAD,KACE,gBAACxzB,EAAA,EAAD,CACEmJ,OAAO,OACPE,WAAS,EACTxI,MAAOA,EAAM+hB,EAAE+7E,SAAS,IACxB79F,SAAUQ,GACRo9F,EAAgBt0B,WAAW9oE,IAAa,EAAGkO,GAE7CtO,KAAK,YAGT,gBAACsyB,EAAA,EAAD,KACE,gBAACh1B,EAAA,EAAD,CAAY2E,QAAS,IAAMgF,EAASqH,IAClC,gBAAC,IAAD,UAMV,gBAACgkB,EAAA,EAAD,KACE,gBAACA,EAAA,EAAD,MACA,gBAACA,EAAA,EAAD,MACA,gBAACA,EAAA,EAAD,MACA,gBAACA,EAAA,EAAD,KACE,gBAACh1B,EAAA,EAAD,CAAY2E,QAASo8D,GACnB,gBAAC,IAAD,a,8BC5HpB,SAASq/B,EAAgBhgG,GAKpB,MACKkvD,EAA6ClvD,EAA7CkvD,WAAY+wC,EAAiCjgG,EAAjCigG,aAActrD,EAAmB30C,EAAnB20C,KAAMt0B,EAAargB,EAAbqgB,SAExC,OACE,gBAACjf,EAAA,EAAD,CACEqJ,WAAS,EACTxI,MAAOitD,EAAWh4C,IAAI+oF,GAAchwC,WACpC7rD,IAAK67F,EACLzyF,kBAAmB0hD,EAAWh4C,IAAI+oF,GAAc9vC,WAChDxb,KAAMA,EACNzyC,SAAUme,EACV/d,KAAK,WAKX,SAAS49F,EAAYlgG,GAMhB,MACK0S,EAAkD1S,EAAlD0S,QAASutF,EAAyCjgG,EAAzCigG,aAAcnpC,EAA2B92D,EAA3B82D,IAAKqpC,EAAsBngG,EAAtBmgG,QAAS9/E,EAAargB,EAAbqgB,SAE7C,OACE,uBAAKrb,MAAO,CAAElC,MAAOq9F,EAAU,OAAS,OAEpC,gBAACC,EAAA,EAAD,CACEh2F,QAASsI,EACTrI,QAAS,CAACC,EAAGF,IAAYiW,EAASjW,KAGrC+1F,GACC,uBACEn7F,MAAO,CAAElC,MAAO,OAChBsB,IAAK67F,EAAe,SAAWnpC,EAAIipC,SAAS,OAOvC,MAAMM,UAAuBxgG,YAA+B,eAAD,oBACxEixB,gBAAkBtpB,IADsD,KAGxEnG,MAAQ,CACN8+E,MAAO,IAGTmgB,cAAcC,EAAmBzpC,GAC/B,SAAUypC,EAAa,GAAKzpC,GAG9B0pC,WAAWD,EAAmBzpC,EAAa+Q,GAGzC,OAFIA,EAAQ04B,GAAa,GAAKzpC,EACzBypC,KAAe,GAAKzpC,GAClBypC,EAGTzgG,SAAU,MAAD,EACwCC,KAAKC,MAA5C03E,EADD,EACCA,SAAUO,EADX,EACWA,gBAAiBtxE,EAD5B,EAC4BA,QAE7BuoD,EAAawoB,EAASZ,cAC1BmB,EAAgBomB,aAChB13F,GAEI85F,EAAOC,MAAM,IAAItjE,KAAK,MACtBivD,EAAQn9B,EAAWh4C,IAAI,SAAS+4C,WAChC0wC,EAAe50D,SAASmjB,EAAWh4C,IAAI,UAAU+4C,WAAY,IAC7D2wC,EAAc70D,SAASmjB,EAAWh4C,IAAI,SAAS+4C,WAAY,IAEjE,OACE,gBAAC,IAAD,KACE,gBAAC,IAAD,KACE,gBAACtjD,EAAA,EAAD,CACEvI,IAAK,WACLqG,WAAS,EACT+C,kBAAmB0hD,EAAWh4C,IAAI,YAAYi5C,WAC9CluD,MAAOitD,EAAWh4C,IAAI,YAAY+4C,WAClC/tD,SAAU,CAACoI,EAAGwJ,EAAGpR,KACfg1E,EAASV,eACPiB,EAAgBomB,aAChB,WACA37F,EACAiE,GAEF5G,KAAKif,gBAGN,CACC,gBAACjR,EAAA,EAAD,CACE3J,IAAK,UACLnC,MAAO,UACPuD,YAAa,iBAEf,gBAACuI,EAAA,EAAD,CACE3J,IAAK,SACLnC,MAAO,SACPuD,YAAa,gBAEf,gBAACuI,EAAA,EAAD,CACE3J,IAAK,YACLnC,MAAO,YACPuD,YAAa,sBAKrB,gBAAC,IAAD,KACE,gBAAC46F,EAAA,EAAD,CACE/7F,MAAO6qD,EAAWh4C,IAAI,UAAUi5C,WAChC/lD,QAAiD,SAAxC8kD,EAAWh4C,IAAI,UAAU+4C,WAClC5lD,QAAS,CAACC,EAAGF,KACXstE,EAASV,eACPiB,EAAgBomB,aAChB,SACAj0F,EAAU,IAAM,IAChBzD,GAEF5G,KAAKif,iBAGT,gBAACohF,EAAA,EAAD,CACE/7F,MAAO6qD,EAAWh4C,IAAI,iBAAiBi5C,WACvC/lD,QAAwD,SAA/C8kD,EAAWh4C,IAAI,iBAAiB+4C,WACzC5lD,QAAS,CAACC,EAAGF,KACXstE,EAASV,eACPiB,EAAgBomB,aAChB,gBACAj0F,EAAU,IAAM,IAChBzD,GAEF5G,KAAKif,iBAGT,gBAACohF,EAAA,EAAD,CACE/7F,MAAO6qD,EAAWh4C,IAAI,YAAYi5C,WAClC/lD,QAAmD,SAA1C8kD,EAAWh4C,IAAI,YAAY+4C,WACpC5lD,QAAS,CAACC,EAAGF,KACXstE,EAASV,eACPiB,EAAgBomB,aAChB,WACAj0F,EAAU,IAAM,IAChBzD,GAEF5G,KAAKif,kBAIX,gBAAC,IAAD,KACE,gBAACwnE,EAAA,EAAD,CACEp0E,WAAW,4BACXW,KAAK,QAEL,gBAAC,QAAD,6RASJ,gBAAC,IAAD,KACE,gBAACpG,EAAA,EAAD,CACElC,WAAS,EACT+C,kBAAmB0hD,EAAWh4C,IAAI,SAASi5C,WAC3CluD,MAAOitD,EAAWh4C,IAAI,SAAS+4C,WAC/B/tD,SAAU,CAACoI,EAAGwJ,EAAGpR,KACfg1E,EAASV,eACPiB,EAAgBomB,aAChB,QACA37F,EACAiE,GAEF5G,KAAKif,gBAGP,gBAACjR,EAAA,EAAD,CAAc3J,IAAK,MAAOnC,MAAO,MAAOuD,YAAa,aACrD,gBAACuI,EAAA,EAAD,CACE3J,IAAK,SACLnC,MAAO,SACPuD,YAAa,gBAEf,gBAACuI,EAAA,EAAD,CAAc3J,IAAK,OAAQnC,MAAO,OAAQuD,YAAa,cACvD,gBAACuI,EAAA,EAAD,CACE3J,IAAK,UACLnC,MAAO,UACPuD,YAAa,mBAInB,gBAAC,IAAD,KACa,YAAV6mF,GACC,gBAACjrF,EAAA,EAAD,CACEqJ,WAAS,EACTxI,MAAOitD,EACJh4C,IAAc,YAAVm1E,EAAsB,iBAAmB,mBAC7Cp8B,WACH7rD,IAAK,kBACLoJ,kBACY,WAAV6+E,EACI,SACU,SAAVA,EACA,SACA,QAENzvE,IAAK,EACL1a,SAAUQ,IACRg1E,EAASV,eACPiB,EAAgBomB,aACN,YAAVhS,EAAsB,iBAAmB,kBACzC3pF,EACAiE,GAEF5G,KAAKif,eAEP1c,KAAK,WAGE,YAAV+pF,GAAiC,WAAVA,GACtB,gBAACjrF,EAAA,EAAD,CACEqJ,WAAS,EACTxI,MAAOitD,EACJh4C,IAAc,YAAVm1E,EAAsB,iBAAmB,mBAC7Cp8B,WACH7rD,IAAK,kBACLoJ,kBAA6B,SAAV6+E,EAAmB,QAAU,SAChDzvE,IAAe,SAAVyvE,OAAmBxhF,EAAY,EACpC3I,SAAUQ,IACRg1E,EAASV,eACPiB,EAAgBomB,aACN,YAAVhS,EAAsB,iBAAmB,kBACzC3pF,EACAiE,GAEF5G,KAAKif,eAEP1c,KAAK,WAGE,YAAV+pF,GACC,gBAAC1/E,EAAA,EAAD,CACElC,WAAS,EACT+C,kBAAmB0hD,EAAWh4C,IAAI,iBAAiBi5C,WACnDluD,MAAOitD,EAAWh4C,IAAI,iBAAiB+4C,WACvC/tD,SAAU,CAACoI,EAAGwJ,EAAGpR,KACfg1E,EAASV,eACPiB,EAAgBomB,aAChB,gBACA37F,EACAiE,GAEF5G,KAAKif,gBAGN,CACC,gBAACjR,EAAA,EAAD,CACE3J,IAAK,SACLnC,MAAO,SACPuD,YAAa,gBAEf,gBAACuI,EAAA,EAAD,CACE3J,IAAK,SACLnC,MAAO,SACPuD,YAAa,gBAEf,gBAACuI,EAAA,EAAD,CACE3J,IAAK,UACLnC,MAAO,UACPuD,YAAa,oBAKrB,gBAACw6F,EAAD,CACE9wC,WAAYA,EACZ+wC,aAAc,eACdtrD,KAAM,EACNt0B,SAAU3d,IACRg1E,EAASV,eACPiB,EAAgBomB,aAChB,eACA37F,EACAiE,GAEF5G,KAAKif,iBAGT,gBAACghF,EAAD,CACE9wC,WAAYA,EACZ+wC,aAAc,eACdtrD,KAAM,EACNt0B,SAAU3d,IACR3C,KAAKC,MAAM03E,SAASV,eAClBiB,EAAgBomB,aAChB,eACA37F,EACA3C,KAAKC,MAAM2G,SAEb5G,KAAKif,kBAIX,gBAAC,IAAD,KACE,gBAAC0oE,EAAA,EAAD,CACEl6E,kBACE,gBAAC,QAAD,kEAIF7G,QAAS5G,KAAKC,MAAM2G,QACpB0O,gBAAiBtV,KAAKC,MAAMqV,gBAC5BC,iBAAkBvV,KAAKC,MAAMsV,iBAC7BgC,wBAAyBvX,KAAKC,MAAMsX,wBACpCwZ,gBAAiB/wB,KAAK+wB,gBACtBtZ,aAAc,QACd+zB,oBAAqB,GACrB9gC,WAAS,EACTvI,SAAU4F,IACR/H,KAAK2B,SAAS,CAAEy+E,MAAOr4E,IACvB/H,KAAKif,mBAITjf,KAAKsB,MAAM8+E,OACX,gBAAC,IAAD,KACE,gBAACoa,EAAA,EAAD,KACE,gBAAC,QAAD,wIAOLx6F,KAAKsB,MAAM8+E,OACV,gBAAC,IAAD,KACE,uBACEn7E,MAAO,CACLlC,MACE,SAGJ,gBAAC+9F,EAAA,EAAD,CACE/4F,aAAc/H,KAAKsB,MAAM8+E,MACzBx5E,QAAS5G,KAAKC,MAAM2G,QACpBmqB,gBAAiB/wB,KAAK+wB,gBACtBk3C,cAAe,EACbC,aACAC,cACAC,qBAEA,gBAAC,EAAD,CACEkkB,MAAOn9B,EAAWh4C,IAAI,SAAS+4C,WAC/B2uC,WAAYpzB,WACVtc,EAAWh4C,IAAI,mBAAmB+4C,YAEpC4uC,WAAYrzB,WACVtc,EAAWh4C,IAAI,mBAAmB+4C,YAEpCkmC,QAAS3qB,WACPtc,EAAWh4C,IAAI,gBAAgB+4C,YAEjCmmC,QAAS5qB,WACPtc,EAAWh4C,IAAI,gBAAgB+4C,YAEjCyuC,cAAexvC,EAAWh4C,IAAI,iBAAiB+4C,WAC/Cgf,SAAUhjE,KAAKC,MAAMgjD,EAAWh4C,IAAI,YAAY+4C,YAChDntD,MAAOmlE,EACPz4D,OAAQ04D,EACRwqB,WAAYvqB,EACZs2B,aAAc,CAAC7tF,EAAOkwF,EAAMC,KAC1B,IAAI9xB,EAAWhjE,KAAKC,MAClBgjD,EAAWh4C,IAAI,YAAY+4C,YAE7Bgf,EAASr+D,GAAOmT,EAAI+8E,EACpB7xB,EAASr+D,GAAOoT,EAAI+8E,EACpBrpB,EAASV,eACPiB,EAAgBomB,aAChB,WACApyF,KAAKw6D,UAAUwI,GACftoE,GAEF5G,KAAKif,qBAQR,YAAVqtE,GACC,gBAAC,IAAD,KACE,gBAAC,EAAD,CACEpd,SAAUhjE,KAAKC,MAAMgjD,EAAWh4C,IAAI,YAAY+4C,YAChD4vC,gBAAiB,CAACn9F,EAAUkO,KAC1B,IAAIq+D,EAAWhjE,KAAKC,MAClBgjD,EAAWh4C,IAAI,YAAY+4C,YAE7Bgf,EAASr+D,GAAOmT,EAAIrhB,EACpBg1E,EAASV,eACPiB,EAAgBomB,aAChB,WACApyF,KAAKw6D,UAAUwI,GACftoE,GAEF5G,KAAKif,eAEP8gF,gBAAiB,CAACp9F,EAAUkO,KAC1B,IAAIq+D,EAAWhjE,KAAKC,MAClBgjD,EAAWh4C,IAAI,YAAY+4C,YAE7Bgf,EAASr+D,GAAOoT,EAAIthB,EACpBg1E,EAASV,eACPiB,EAAgBomB,aAChB,WACApyF,KAAKw6D,UAAUwI,GACftoE,GAEF5G,KAAKif,eAEP2hD,MAAO,KACL,IAAIsO,EAAWhjE,KAAKC,MAClBgjD,EAAWh4C,IAAI,YAAY+4C,YAEzBgf,EAAStpE,QAAU,IACvBspE,EAAStkE,KAAK,CAAEoZ,EAAG,EAAGC,EAAG,IACzB0zD,EAASV,eACPiB,EAAgBomB,aAChB,WACApyF,KAAKw6D,UAAUwI,GACftoE,GAEF5G,KAAKif,gBAEPzV,SAAUqH,IACR,IAAIq+D,EAAWhjE,KAAKC,MAClBgjD,EAAWh4C,IAAI,YAAY+4C,YAE7Bgf,EAAS+xB,OAAOpwF,EAAO,GACvB8mE,EAASV,eACPiB,EAAgBomB,aAChB,WACApyF,KAAKw6D,UAAUwI,GACftoE,GAEF5G,KAAKif,kBAKb,gBAAC,IAAD,KACE,gBAACghF,EAAD,CACE9wC,WAAYA,EACZ+wC,aAAc,UACdtrD,KAAM,GACNt0B,SAAU3d,IACRg1E,EAASV,eACPiB,EAAgBomB,aAChB,UACA7yB,WAAW9oE,GAAY,EAAIA,EAAW,IACtCiE,GAEF5G,KAAKif,iBAGT,gBAACghF,EAAD,CACE9wC,WAAYA,EACZ+wC,aAAc,eACdtrD,KAAM,GACNt0B,SAAU3d,IACRg1E,EAASV,eACPiB,EAAgBomB,aAChB,eACA37F,EACAiE,GAEF5G,KAAKif,kBAIX,gBAAC,IAAD,KACE,gBAACghF,EAAD,CACE9wC,WAAYA,EACZ+wC,aAAc,WACdtrD,KAAM,GACNt0B,SAAU3d,IACRg1E,EAASV,eACPiB,EAAgBomB,aAChB,WACA7yB,WAAW9oE,GAAY,EAAIA,EAAW,IACtCiE,GAEF5G,KAAKif,iBAGT,gBAACghF,EAAD,CACE9wC,WAAYA,EACZ+wC,aAAc,cACdtrD,KAAM,GACNt0B,SAAU3d,IACRg1E,EAASV,eACPiB,EAAgBomB,aAChB,cACA7yB,WAAW9oE,GAAY,EAAIA,EAAW,IACtCiE,GAEF5G,KAAKif,kBAIX,gBAAC,IAAD,KACE,gBAACghF,EAAD,CACE9wC,WAAYA,EACZ+wC,aAAc,gBACdtrD,KAAM,IACNt0B,SAAU3d,IACRg1E,EAASV,eACPiB,EAAgBomB,aAChB,gBACA37F,EACAiE,GAEF5G,KAAKif,iBAGT,gBAACghF,EAAD,CACE9wC,WAAYA,EACZ+wC,aAAc,iBACdtrD,KAAM,IACNt0B,SAAU3d,IACRg1E,EAASV,eACPiB,EAAgBomB,aAChB,iBACA37F,EACAiE,GAEF5G,KAAKif,kBAIX,gBAAC,IAAD,KACE,gBAAC+9E,EAAA,EAAD,KAAO7tC,EAAWh4C,IAAI,UAAUi5C,YAC/BswC,EAAKn7F,IAAI,CAACrD,EAAO2O,IAEd,gBAACsvF,EAAD,CACExtF,QAAS3S,KAAKugG,cAAcK,EAAc/vF,GAC1CqvF,aAAc,SACdnpC,IAAKlmD,EACLuvF,QAAmB,IAAVvvF,EACTyP,SAAU3N,IACR,MAAMhQ,EAAW3C,KAAKygG,WACpBG,EACA/vF,EACA8B,GAEF3S,KAAKC,MAAM03E,SAASV,eAClBiB,EAAgBomB,aAChB,SACA37F,EAASq9F,SAAS,IAClBhgG,KAAKC,MAAM2G,SAEb5G,KAAKif,eAEP5a,IAAG,eAAUwM,OAKrB,gBAAC,IAAD,KACE,gBAACmsF,EAAA,EAAD,KAAO7tC,EAAWh4C,IAAI,SAASi5C,YAC9BswC,EAAKn7F,IAAI,CAACrD,EAAO2O,IAEd,gBAACsvF,EAAD,CACExtF,QAAS3S,KAAKugG,cAAcM,EAAahwF,GACzCqvF,aAAc,QACdnpC,IAAKlmD,EACLuvF,QAAmB,IAAVvvF,EACTyP,SAAU3N,IACR,MAAMhQ,EAAW3C,KAAKygG,WAAWI,EAAahwF,EAAO8B,GACrD3S,KAAKC,MAAM03E,SAASV,eAClBiB,EAAgBomB,aAChB,QACA37F,EAASq9F,SAAS,IAClBhgG,KAAKC,MAAM2G,SAEb5G,KAAKif,eAEP5a,IAAG,cAASwM,SCtmBb,KACb6nE,UAAUv1C,GACR,OAAKnjC,KAAKkhG,WAAW/9D,GAGdnjC,KAAKkhG,WAAW/9D,GAAchR,UAF5BksE,GAIX6C,WAAY,CACV,6BAA8B,CAC5B/uE,UAAWmuE,M,qQCgCjB,MAAMa,UAAgCrhG,YACpCqV,YAAYlV,GACVmV,MAAMnV,GADkB,KAK1BmhG,qBAA6C,KALnB,KAoC1BtqF,SAAW,KACT,MAAM2uE,EAAIz4D,GAAOA,EACTpmB,EAAY5G,KAAKC,MAAjB2G,QAFO,EAmBX5G,KAAKsB,MAfP+/F,EAJa,EAIbA,oBACAC,EALa,EAKbA,qBACAC,EANa,EAMbA,6BACAt+F,EAPa,EAObA,KACAu+F,EARa,EAQbA,OACAC,EATa,EASbA,QACAC,EAVa,EAUbA,YACA1kB,EAXa,EAWbA,YACA2kB,EAZa,EAYbA,WACAC,EAba,EAabA,UACAC,EAda,EAcbA,kBACAC,EAfa,EAebA,mBACAC,EAhBa,EAgBbA,OACAC,EAjBa,EAiBbA,OACAC,EAlBa,EAkBbA,gBAEFr7F,EAAQs7F,sBAAsBb,EAAqBC,GACnD16F,EAAQu7F,gCAAgCZ,GACxC36F,EAAQ2P,QAAQtT,GAChB2D,EAAQmnD,UAAUyzC,GAClB56F,EAAQ+mD,WAAW8zC,GACnB76F,EAAQw7F,eAAeV,GACvB96F,EAAQy7F,eAAerlB,GACvBp2E,EAAQ07F,cAAcX,GACtB/6F,EAAQ27F,aAAaX,GACrBh7F,EAAQ47F,qBAAqBX,GAC7Bj7F,EAAQ67F,cAAcV,GACtBn7F,EAAQ87F,cAAcV,GACtBp7F,EAAQ+7F,mBAAmBb,mBAAmBA,GAC9Cl7F,EAAQg8F,iBAAiBX,GAEpBY,YAAwBpd,EAAGqd,YAAUrd,EAAG7+E,KAE7C5G,KAAKC,MAAMgX,WAvEXjX,KAAKsB,MAAQtB,KAAKkX,UAAUjX,EAAM2G,SAKpCsQ,UAAUtQ,GACR,MAAO,CACLy6F,oBAAqBz6F,EAAQwpF,yBAC7BkR,qBAAsB16F,EAAQypF,0BAC9BkR,6BAA8B36F,EAAQm8F,kCACtC9/F,KAAM2D,EAAQo+B,UACdw8D,OAAQ56F,EAAQknD,YAChB2zC,QAAS76F,EAAQ8mD,aACjBg0C,YAAa96F,EAAQo8F,iBACrBhmB,YAAap2E,EAAQq8F,iBACrBtB,WAAY/6F,EAAQs8F,gBACpBtB,UAAWh7F,EAAQ2gF,eACnBsa,kBAAmBj7F,EAAQu8F,uBAC3BrB,mBAAoBl7F,EAAQ+7F,mBAAmBS,wBAC/CrB,OAAQn7F,EAAQy8F,gBAChBrB,OAAQp7F,EAAQ08F,gBAChBrB,gBAAiBr7F,EAAQq7F,mBAI7B7qF,0BAA0BC,KAEpBrX,KAAKC,MAAM2D,MAAQyT,EAASzT,MAC7ByT,EAASzT,MAAQ5D,KAAKC,MAAM2G,UAAYyQ,EAASzQ,UAElD5G,KAAK2B,SAAS3B,KAAKkX,UAAUG,EAASzQ,UA4C1C7G,SAAU,MAAD,EAiBHC,KAAKsB,MAfP2B,EAFK,EAELA,KACAo+F,EAHK,EAGLA,oBACAC,EAJK,EAILA,qBACAC,EALK,EAKLA,6BACAC,EANK,EAMLA,OACAC,EAPK,EAOLA,QACAC,EARK,EAQLA,YACA1kB,EATK,EASLA,YACA2kB,EAVK,EAULA,WACAC,EAXK,EAWLA,UACAC,EAZK,EAYLA,kBACAC,EAbK,EAaLA,mBACAC,EAdK,EAcLA,OACAC,EAfK,EAeLA,OACAC,EAhBK,EAgBLA,gBAOF,OACE,gBAAC,WAAD,KACE,gBAACvH,EAAA,EAAD,CACEt2F,QAAS,CACP,gBAACu2F,EAAA,EAAD,CACEr2F,MAAO,gBAAC,QAAD,eACPC,SAAS,EACTC,QAASxE,KAAKC,MAAM4D,QACpBQ,IAAI,WAEN,gBAACs2F,EAAA,EAAD,CACEr2F,MAAO,gBAAC,QAAD,cACPC,SAAS,EACTC,QAASxE,KAAK8W,SACdzS,IAAI,WAGRi8C,iBAAkB,CAChB,gBAACr6C,EAAA,EAAD,CACEC,aAAa,wCACb7B,IAAI,UAGR5D,MAAO,gBAAC,QAAD,2BACPiE,mBAAmB,EACnBd,KAAM5D,KAAKC,MAAM2D,KACjBa,eAAgBzE,KAAKC,MAAM4D,SAE3B,gBAACxC,EAAA,EAAD,CACEoM,kBAAmB,gBAAC,QAAD,kBACnB/C,WAAS,EACTnI,KAAK,OACLL,MAAOe,EACPd,SAAUD,GAASlC,KAAK2B,SAAS,CAAEsB,KAAMf,IACzCqhG,WAAS,IAEX,gBAAClD,EAAA,EAAD,CACE/7F,MACE,gBAAC,QAAD,8DAIF+F,QAASy3F,EACTx3F,QAAS,CAACC,EAAGF,MACNA,IAEDrK,KAAKohG,sBACJphG,KAAKohG,qBAAqBoC,yBAK/BxjG,KAAK2B,SAAS,CACZmgG,mBAAoBz3F,OAI1B,gBAAChJ,EAAA,EAAD,CACEoM,kBAAmB,gBAAC,QAAD,+BACnB/C,WAAS,EACTqD,SA9De,QA+DfxL,KAAK,OACLL,MAAOu/F,EACPt/F,SAAUD,GAASlC,KAAK2B,SAAS,CAAE8/F,QAASv/F,MAE9C,gBAACb,EAAA,EAAD,CACEoM,kBACE,gBAAC,QAAD,2CAEF/C,WAAS,EACTqD,SA1EmB,qBA2EnBxL,KAAK,OACLL,MAAOw/F,EACPv/F,SAAUD,GAASlC,KAAK2B,SAAS,CAAE+/F,YAAax/F,IAChDqH,UACEk6F,YAAoB/B,QAClB52F,EAEA,gBAAC,QAAD,iJAQN,gBAACzJ,EAAA,EAAD,CACEoM,kBAAmB,gBAAC,QAAD,oBACnB/C,WAAS,EACTqD,SAAU,iBACVxL,KAAK,OACLL,MAAOs/F,EACPr/F,SAAUD,GAASlC,KAAK2B,SAAS,CAAE6/F,OAAQt/F,MAE7C,gBAAC86F,EAAA,EAAD,CAAMtoF,KAAK,SACT,gBAAC,QAAD,kCAEF,gBAAC,IAAD,CAA2B9P,UAAQ,GACjC,gBAACvD,EAAA,EAAD,CACEoM,kBAAmB,gBAAC,QAAD,8BACnB/C,WAAS,EACTnI,KAAK,SACLL,MAAO,GAAKm/F,EACZl/F,SAAUD,GACRlC,KAAK2B,SAAS,CACZ0/F,oBAAqB1kF,KAAKC,IAAI,EAAGovB,SAAS9pC,EAAO,SAIvD,gBAACb,EAAA,EAAD,CACEoM,kBAAmB,gBAAC,QAAD,+BACnB/C,WAAS,EACTnI,KAAK,SACLL,MAAO,GAAKo/F,EACZn/F,SAAUD,GACRlC,KAAK2B,SAAS,CACZ2/F,qBAAsB3kF,KAAKC,IAAI,EAAGovB,SAAS9pC,EAAO,UAK1D,gBAAC0K,EAAA,EAAD,CACElC,WAAS,EACT+C,kBACE,gBAAC,QAAD,2DAEFvL,MAAO2/F,EACP1/F,SAAU,CAACoI,EAAGwJ,EAAG7R,IACflC,KAAK2B,SAAS,CAAEkgG,kBAAmB3/F,KAGrC,gBAAC8L,EAAA,EAAD,CACE9L,MAAM,GACNuD,YAAa,qCAEf,gBAACuI,EAAA,EAAD,CACE9L,MAAM,aACNuD,YAAa,uDAEf,gBAACuI,EAAA,EAAD,CACE9L,MAAM,cACNuD,YAAa,yDAGjB,gBAAC46F,EAAA,EAAD,CACE/7F,MACE,gBAAC,QAAD,2EAKFhE,SAAgC,KAAtBuhG,EACVx3F,QAASk3F,EACTj3F,QAAS,CAACC,EAAGF,KACXrK,KAAK2B,SAAS,CACZ4/F,6BAA8Bl3F,OAIpC,gBAAC,IAAD,CAA2BzF,UAAQ,GACjC,gBAACvD,EAAA,EAAD,CACEoM,kBAAmB,gBAAC,QAAD,oBACnB/C,WAAS,EACTnI,KAAK,SACLL,MAAO,GAAK6/F,EACZ5/F,SAAUD,GACRlC,KAAK2B,SAAS,CACZogG,OAAQplF,KAAKC,IAAI,EAAGovB,SAAS9pC,EAAO,SAI1C,gBAACb,EAAA,EAAD,CACEoM,kBAAmB,gBAAC,QAAD,mCACnB/C,WAAS,EACTnI,KAAK,SACLL,MAAO,GAAK8/F,EACZ7/F,SAAUD,GACRlC,KAAK2B,SAAS,CACZqgG,OAAQrlF,KAAKC,IAAI,EAAGovB,SAAS9pC,EAAO,UAK3C8/F,EAAS,GAAKA,EAAS,IACtB,gBAACvb,EAAA,EAAD,CACEp0E,WAAW,sBACXW,KAAK,WAEL,gBAAC,QAAD,wUAUH+uF,EAAS,IACR,gBAACtb,EAAA,EAAD,CACEp0E,WAAW,sBACXW,KAAK,WAEL,gBAAC,QAAD,mTASJ,gBAACpG,EAAA,EAAD,CACElC,WAAS,EACT+C,kBACE,gBAAC,QAAD,iDAEFvL,MAAO86E,EACP76E,SAAU,CAACoI,EAAGwJ,EAAG7R,IACflC,KAAK2B,SAAS,CAAEq7E,YAAa96E,KAG/B,gBAAC8L,EAAA,EAAD,CAAc9L,MAAM,UAAUuD,YAAa,0BAC3C,gBAACuI,EAAA,EAAD,CAAc9L,MAAM,YAAYuD,YAAa,mBAC7C,gBAACuI,EAAA,EAAD,CAAc9L,MAAM,WAAWuD,YAAa,mBAE9C,gBAACmH,EAAA,EAAD,CACElC,WAAS,EACT+C,kBACE,gBAAC,QAAD,4CAEFvL,MAAO0/F,EACPz/F,SAAU,CAACoI,EAAGwJ,EAAG7R,IACflC,KAAK2B,SAAS,CAAEigG,UAAW1/F,KAG7B,gBAAC8L,EAAA,EAAD,CACE9L,MAAM,SACNuD,YAAa,6DAEf,gBAACuI,EAAA,EAAD,CACE9L,MAAM,UACNuD,YAAa,kEAGF,YAAdm8F,GACC,gBAACnb,EAAA,EAAD,CACEp0E,WAAW,4BACXW,KAAK,QAEL,gBAAC,QAAD,0MAQJ,gBAACgqF,EAAA,EAAD,CAAMtoF,KAAK,SACT,gBAAC,QAAD,eAEF,gBAACrT,EAAA,EAAD,CACEoM,kBACE,gBAAC,QAAD,mDAEF/C,WAAS,EACTqD,SA7QU,yCA8QVxL,KAAK,OACLL,MAAOy/F,EACPx/F,SAAUD,GAASlC,KAAK2B,SAAS,CAAEggG,WAAYz/F,MAEjD,gBAAC86F,EAAA,EAAD,CAAMtoF,KAAK,SACT,gBAAC,QAAD,uBAEF,gBAAC9H,EAAA,EAAD,CACElC,WAAS,EACT+C,kBAAmB,gBAAC,QAAD,0BACnBvL,MAAO+/F,EAAkB,iBAAmB,cAC5C9/F,SAAU,CAACoI,EAAGwJ,EAAG7R,IACflC,KAAK2B,SAAS,CAAEsgG,gBAA2B,mBAAV//F,KAGnC,gBAAC8L,EAAA,EAAD,CACE9L,MAAO,cACPuD,YAAa,+BAEf,gBAACuI,EAAA,EAAD,CACE9L,MAAO,iBACPuD,YAAa,iEAInB,gBAACi+F,EAAA,EAAD,CACElhG,IAAKmhG,GACF3jG,KAAKohG,qBAAuBuC,EAE/BpG,qBAAsB,KACpBv9F,KAAKC,MAAM4D,UACX7D,KAAKC,MAAMs9F,wBAEbqG,KAAK,YACL51D,GAAG,qCACHvtC,MAAO,gBAAC,QAAD,+CAOF0gG,Q,0FCvYA,MAAM0C,UAA+B9pF,YAClDha,SAAU,MAAD,EACsBC,KAAKC,MAA1B2G,EADD,EACCA,QAAS/C,EADV,EACUA,QAEjB,OACE,kBAAC,OAAD,KACG,EAAGtD,UACF,kBAACujG,EAAA,EAAiC5iG,SAAlC,KACGisD,IACC,MAAM42C,EAAiC52C,EAA+B62C,oCACtE,OACE,kBAACtJ,EAAA,EAAD,CACEj6F,MAAO,kBAAC,QAAD,kCACP2D,QAAS,CACP,kBAACu2F,EAAA,EAAD,CACEt2F,IAAI,QACJC,MAAO,kBAAC,QAAD,cACPC,SAAO,EACPC,QAASX,KAGby8C,iBAAkB,CAChB,kBAACr6C,EAAA,EAAD,CAAY5B,IAAI,OAAO6B,aAAa,uBACpC69F,EACE,kBAACpJ,EAAA,EAAD,CACEt0F,KAAM,kBAAC,IAAD,MACNhC,IAAI,SACJC,MAAO,kBAAC,QAAD,yBACPE,QAAS,KAxET,EACtBjE,EACA4sD,EACAvmD,KAEA,MAAMm9F,EAAiC52C,EAA+B62C,oCACtE,GAAKD,EAEEA,EACJ/1C,oCACAv4C,KAAKw4C,IACJ,GAAKA,EAEL,OAAO81C,EACJE,gCAAgCh2C,GAChCx4C,KAAKyuF,IACJ,GACEt9F,EAAQu9F,iCAAiCD,EAAoBjhG,MAC7D,CAMA,IALeO,IAAO4V,kBACpB7Y,EAAKG,EACH,iJAGS,OAGf,OAAO0jG,YACLj3C,EACAvmD,EACAs9F,OAIPhsF,MAAM/K,IACL8jC,YACE1wC,EAAKG,EACH,oJACAyM,OAmCgBk3F,CACE9jG,EACA4sD,EACAvmD,MAIJ,MAENlC,mBAAmB,EACnBd,MAAI,EACJgB,UAAQ,EACRH,eAAgBZ,GAEhB,kBAACygG,EAAA,EAAD,CACE19F,QAASA,EACT+yE,wBAAyB,OACzB4qB,iBAAkB,KAChBvkG,KAAKif,eAEP26D,uBAAuB,S,2GC/G5B95E,MAAM0kG,KAAKvkG,GACxB,kBAACwkG,EAAA,EAAYxkG,EACX,0BAAMykG,EAAE,6D,oKCwCZ,MAKM7hG,GAAS,CACbuM,UAAW,CACTO,KAAM,EACNN,QAAS,OACTC,cAAe,SACf4qD,UAAW,UAEbn0C,KAAM,CACJpW,KAAM,EACNuqD,UAAW,SACXzlD,QAAS,GAEXkwF,mBAAoB,CAClBlwF,QAAS,GAEXmwF,SAAU,CACRnrF,SAAU,SACVE,WAAY,SACZD,aAAc,YAEhBmrF,cAAe,CACbxsF,IAAKysF,MAgBHC,GAAwB9kG,GAC5B,gBAACgB,EAAA,EAAD,KACGuS,IAAa,MAEVrG,EAKElN,EALFkN,MACAqjD,EAIEvwD,EAJFuwD,SACAw0C,EAGE/kG,EAHF+kG,UACAC,EAEEhlG,EAFFglG,kBACG7kG,EANM,YAOPH,EAPO,sDAQX,OACE,gBAACilG,EAAA,EAAD,eACEjgG,MAAO,CACLwT,gBAAiBjF,EAAS+d,SAAS4zE,qBACnCpkE,aAAa,aAAD,OAAevtB,EAAS+d,SAAS6zE,iBAE/CC,gBACEJ,OAAoBn6F,EAAYjI,GAAO8hG,oBAErCvkG,EARN,CASEowD,SAAUrjD,EAAQ,gBAAC,IAAD,MAAkBqjD,EACpC80C,sBAAuBn4F,EACvBo4F,SAAUP,EACVQ,oBAAmB,gEA6B7B,MAAMC,WAAa3lG,YAGjB6f,mBAAmBolE,IACZA,EAAU2gB,aAAe1lG,KAAKC,MAAMylG,aACvChvF,WAAW,KACL1W,KAAK2tC,WAAW3tC,KAAK2tC,UAAU1rC,SAClC,KAIPlC,SACE,MAAMuE,EAAQtE,KAAKC,MAAMylG,YACvB,gBAAC5K,EAAA,EAAD,CACE9sD,GAAG,oBACHxjC,OAAO,OACPhI,IAAKmrC,GAAc3tC,KAAK2tC,UAAYA,EACpChjC,aAAc3K,KAAKC,MAAMwF,YACzBnD,OAAQiI,GAAKvK,KAAKC,MAAMs8D,SAAShyD,EAAE3H,cAAcV,OACjDoqB,WAAY5pB,IACa,KAAnBA,EAAM6kB,UAEJvnB,KAAK2tC,WAAW3tC,KAAK2tC,UAAU3mB,QAGvCtc,WAAS,EACTzF,MAAOpC,GAAOgiG,gBAGhB,uBAAK5/F,MAAOpC,GAAO+hG,UAAW5kG,KAAKC,MAAMwF,aAG3C,OACE,gBAACxE,EAAA,EAAD,KACGuS,GACC,gBAAC0xF,EAAA,EAAD,CACEjgG,MAAK,aACH87B,aAAa,aAAD,OAAevtB,EAAS+d,SAAS6zE,iBAC1CplG,KAAKC,MAAMgF,OAEhBQ,YAAanB,EACbqhG,mBAAiB,EACjBhqF,kBAAmB,IAAM,CACvB,CACErX,MAAO,OACPsX,MAAO,IAAM5b,KAAKC,MAAM6qE,aAEtB9qE,KAAKC,MAAM2lG,uBACX5lG,KAAKC,MAAM2lG,yBACX,GACJ,CAAErjG,KAAM,aACR,CACE+B,MAAO,SACPsX,MAAO,IAAM5b,KAAKC,MAAM4lG,cAE1B,CACEvhG,MAAO,SACPsX,MAAO,IAAM5b,KAAKC,MAAMw5C,YAE1B,CACEn1C,MAAOtE,KAAKC,MAAM6lG,SAClB9xC,UAAWh0D,KAAKC,MAAM2gE,MACtBhlD,MAAO,IAAM5b,KAAKC,MAAM2gE,SAE1B,CAAEr+D,KAAM,aACR,CACE+B,MAAO,OACPsX,MAAO,IAAM5b,KAAKC,MAAM05C,UAE1B,CACEr1C,MAAO,MACPsX,MAAO,IAAM5b,KAAKC,MAAM25C,SAE1B,CACEt1C,MAAO,QACPqO,QAAS3S,KAAKC,MAAM8lG,WACpBnqF,MAAO,IAAM5b,KAAKC,MAAM45C,WAE1B,CACEv1C,MAAO,YACPsX,MAAO,IAAM5b,KAAKC,MAAM+lG,eAE1B,CAAEzjG,KAAM,aACR,CACE+B,MAAO,UACPqO,QAAS3S,KAAKC,MAAMgmG,UACpBrqF,MAAO,IAAM5b,KAAKC,MAAMimG,YAE1B,CACE5hG,MAAO,YACPqO,QAAS3S,KAAKC,MAAMkmG,YACpBvqF,MAAO,IAAM5b,KAAKC,MAAMmmG,eAG5B5hG,QAAS,KAKFxE,KAAKC,MAAMylG,aAAa1lG,KAAKC,MAAM6qE,cAuDvC,MAAMu7B,WAAuBvmG,YAA+B,eAAD,oBAGxEwB,MAAQ,CACNglG,uBAAwB,KACxBC,sBAAuB,KACvBC,gBAAiB,KACjBC,gBAAiB,GACjBhiE,WAAY,GACZiiE,6BAA6B,EAC7BC,4BAA4B,EAC5BC,4BAA4B,EAC5BC,4BAA4B,EAC5BC,2BAA2B,GAb2C,KA+BxEC,YAAc,CAAC/zF,EAAe/P,KAC5BjD,KAAK2B,SAAS,CACZ6kG,gBAAiBxzF,EACjByzF,gBAAiBxjG,KAlCmD,KAsCxE+jG,YAAerpF,IACb4oE,IAAUvvE,IA/RgB,SA+RW,CACnC2G,OAAQ9R,YAAoB8R,GAC5B1a,KAAM0a,EAAOqnB,aAzCuD,KA6CxEiiE,WAActpF,IACZ3d,KAAKgnG,YAAYrpF,GACjB3d,KAAKC,MAAMinG,eAAevpF,IA/C4C,KAkDxEwpF,aAAgBt2F,IACd,IAAK01E,IAAUllC,IA3SW,UA2SiB,OADX,QAGOklC,IAAUpvE,IA7SvB,UA6SViwF,EAHgB,EAGxBzpF,OAAsB1a,EAHE,EAGFA,KACtB2D,EAAY5G,KAAKC,MAAjB2G,QAEFy/C,EAAUgJ,YAAiBpsD,EAAMA,GACrC2D,EAAQoqC,eAAe/tC,IAGnBokG,EAAYzgG,EAAQ0gG,gBAAgBjhD,EAASx1C,GAEnDrE,YACE66F,EACAD,EACA,kBACAxgG,GAEFygG,EAAU9wF,QAAQ8vC,GAClBghD,EAAUE,0BAA0B3gG,GAEpC5G,KAAKwnG,0BAvEiE,KA0ExEC,iBAAmB,CAAC9pF,EAAkB9M,KACpC7Q,KAAKgnG,YAAYrpF,GACjB3d,KAAKmnG,aAAat2F,IA5EoD,KA+ExE62F,WAAc72F,IAAmB,MACvBjK,EAAY5G,KAAKC,MAAjB2G,QAEFy/C,EAAUgJ,YAAiB,YAAapsD,GAC5C2D,EAAQoqC,eAAe/tC,IAEnBokG,EAAYzgG,EAAQ0gG,gBAAgBjhD,EAASx1C,EAAQ,GAE3Dw2F,EAAU9wF,QAAQ8vC,GAClBghD,EAAUE,0BAA0B3gG,GAEpC5G,KAAKwnG,0BA1FiE,KA6FxEG,wBAA2BhqF,IACzB3d,KAAK2B,SAAS,CAAE2kG,uBAAwB3oF,KA9F8B,KAiGxEiqF,uBAA0BjqF,IACxB3d,KAAK2B,SAAS,CAAE4kG,sBAAuB5oF,KAlG+B,KAqGxEkqF,mBAAsBh3F,IAAmB,MAC/BjK,EAAY5G,KAAKC,MAAjB2G,QAEFy/C,EAAUgJ,YAAiB,oBAAqBpsD,GACpD2D,EAAQmqC,uBAAuB9tC,IAEjC2D,EAAQkhG,wBAAwBzhD,EAASx1C,EAAQ,GACjD7Q,KAAKwnG,0BA5GiE,KA+GxEO,mBAAsBl3F,IAAmB,MAC/BjK,EAAY5G,KAAKC,MAAjB2G,QAEFy/C,EAAUgJ,YAAiB,oBAAqBpsD,GACpD2D,EAAQohG,uBAAuB/kG,IAEjC2D,EAAQqhG,wBAAwB5hD,EAASx1C,EAAQ,GACjD7Q,KAAKwnG,0BAtHiE,KAyHxEU,6BAAgCr3F,IAAmB,MACzCjK,EAAY5G,KAAKC,MAAjB2G,QAEFy/C,EAAUgJ,YAAiB,eAAgBpsD,GAC/C2D,EAAQu9F,iCAAiClhG,IAE3C2D,EAAQuhG,kCAAkC9hD,EAASx1C,EAAQ,GAC3D7Q,KAAKwnG,0BAhIiE,KAmIxEY,cAAiBv3F,IAAmB,MAC1BjK,EAAY5G,KAAKC,MAAjB2G,QACJiK,GAAS,IAEbjK,EAAQyhG,YAAYx3F,EAAOA,EAAQ,GACnC7Q,KAAKwnG,2BAxIiE,KA2IxEc,gBAAmBz3F,IAAmB,MAC5BjK,EAAY5G,KAAKC,MAAjB2G,QACJiK,GAASjK,EAAQ2hG,kBAAoB,IAEzC3hG,EAAQyhG,YAAYx3F,EAAOA,EAAQ,GACnC7Q,KAAKwnG,2BAhJiE,KAmJxEgB,oBAAuBrqF,IACrBooE,IAAUvvE,IA1YyB,kBA0YW,CAC5CmH,eAAgBtS,YAAoBsS,GACpClb,KAAMkb,EAAe6mB,aAtJ+C,KA0JxEyjE,mBAAsBtqF,IACpBne,KAAKwoG,oBAAoBrqF,GACzBne,KAAKC,MAAMyoG,uBAAuBvqF,IA5JoC,KA+JxEwqF,qBAAwB93F,IACtB,IAAK01E,IAAUllC,IAtZoB,mBAsZiB,OADZ,QAGeklC,IAAUpvE,IAxZ9B,mBAwZXyxF,EAHgB,EAGhCzqF,eAAsClb,EAHN,EAGMA,KAGtC2D,EAAY5G,KAAKC,MAAjB2G,QAEFy/C,EAAUgJ,YAAiBpsD,EAAMA,GACrC2D,EAAQmqC,uBAAuB9tC,IAG3B4lG,EAAoBjiG,EAAQkhG,wBAAwBzhD,EAASx1C,GAEnErE,YACEq8F,EACAD,EACA,kBACAhiG,GAEFiiG,EAAkBtyF,QAAQ8vC,GAE1BrmD,KAAKwnG,0BArLiE,KAwLxEsB,yBAA2B,CACzB3qF,EACAtN,KAEA7Q,KAAKwoG,oBAAoBrqF,GACzBne,KAAK2oG,qBAAqB93F,IA7L4C,KAgMxEk4F,sBAAyBl4F,IAAmB,MAClCjK,EAAY5G,KAAKC,MAAjB2G,QACJiK,GAAS,IAEbjK,EAAQoiG,mBAAmBn4F,EAAOA,EAAQ,GAC1C7Q,KAAKwnG,2BArMiE,KAwMxEyB,wBAA2Bp4F,IAAmB,MACpCjK,EAAY5G,KAAKC,MAAjB2G,QACJiK,GAASjK,EAAQsiG,yBAA2B,IAEhDtiG,EAAQoiG,mBAAmBn4F,EAAOA,EAAQ,GAC1C7Q,KAAKwnG,2BA7MiE,KAgNxE2B,oBAAuBprF,IACrBwoE,IAAUvvE,IAxcyB,kBAwcW,CAC5C+G,eAAgBlS,YAAoBkS,GACpC9a,KAAM8a,EAAeinB,aAnN+C,KAuNxEokE,mBAAsBrrF,IACpB/d,KAAKmpG,oBAAoBprF,GACzB/d,KAAKC,MAAMopG,uBAAuBtrF,IAzNoC,KA4NxEurF,qBAAwBz4F,IACtB,IAAK01E,IAAUllC,IApdoB,mBAodiB,OADZ,QAGeklC,IAAUpvE,IAtd9B,mBAsdXoyF,EAHgB,EAGhCxrF,eAAsC9a,EAHN,EAGMA,KAGtC2D,EAAY5G,KAAKC,MAAjB2G,QAEFy/C,EAAUgJ,YAAiBpsD,EAAMA,GACrC2D,EAAQohG,uBAAuB/kG,IAG3BumG,EAAoB5iG,EAAQqhG,wBAAwB5hD,EAASx1C,GAEnErE,YAAwBg9F,EAAmBD,GAC3CC,EAAkBjzF,QAAQ8vC,GAC1BrmD,KAAKwnG,0BA5OiE,KA+OxEiC,yBAA2B,CACzB1rF,EACAlN,KAEA7Q,KAAKmpG,oBAAoBprF,GACzB/d,KAAKspG,qBAAqBz4F,IApP4C,KAuPxE64F,sBAAyB74F,IAAmB,MAClCjK,EAAY5G,KAAKC,MAAjB2G,QACJiK,GAAS,IAEbjK,EAAQ+iG,oBAAoB94F,EAAOA,EAAQ,GAC3C7Q,KAAKwnG,2BA5PiE,KA+PxEoC,wBAA2B/4F,IAAmB,MACpCjK,EAAY5G,KAAKC,MAAjB2G,QACJiK,GAASjK,EAAQijG,0BAA4B,IAEjDjjG,EAAQ+iG,oBAAoB94F,EAAOA,EAAQ,GAC3C7Q,KAAKwnG,2BApQiE,KAuQxEsC,8BACEvrF,IAEAgoE,IAAUvvE,IA/foC,6BA+fW,CACvDuH,yBAA0B1S,YAAoB0S,GAC9Ctb,KAAMsb,EAAyBymB,aA5QqC,KAgRxE+kE,6BACExrF,IAEAve,KAAK8pG,8BAA8BvrF,GACnCve,KAAKC,MAAM+pG,iCAAiCzrF,IApR0B,KAuRxE0rF,mCAAqC,CACnC1rF,EACA1N,KAEA7Q,KAAK8pG,8BAA8BvrF,GACnCve,KAAKkqG,+BAA+Br5F,IA5RkC,KA+RxEq5F,+BAAkCr5F,IAChC,IAAK01E,IAAUllC,IArhB+B,8BAqhBiB,OADb,QAM9CklC,IAAUpvE,IA1hBgC,8BAwhBlBgzF,EAJsB,EAIhD5rF,yBACAtb,EALgD,EAKhDA,KAEM2D,EAAY5G,KAAKC,MAAjB2G,QAEFy/C,EAAUgJ,YAAiBpsD,EAAMA,GACrC2D,EAAQu9F,iCAAiClhG,IAGrCmnG,EAA8BxjG,EAAQuhG,kCAC1C9hD,EACAx1C,GAGFrE,YACE49F,EACAD,EACA,kBACAvjG,GAEFwjG,EAA4B7zF,QAAQ8vC,GAEpCrmD,KAAKwnG,yBACLxnG,KAAKC,MAAMoqG,qCA1T2D,KA6TxEC,gCAAmCz5F,IAAmB,MAC5CjK,EAAY5G,KAAKC,MAAjB2G,QACJiK,GAAS,IAEbjK,EAAQ2jG,8BAA8B15F,EAAOA,EAAQ,GACrD7Q,KAAKwnG,2BAlUiE,KAqUxEgD,kCAAqC35F,IAAmB,MAC9CjK,EAAY5G,KAAKC,MAAjB2G,QACJiK,GAASjK,EAAQ6jG,oCAAsC,IAE3D7jG,EAAQ2jG,8BAA8B15F,EAAOA,EAAQ,GACrD7Q,KAAKwnG,2BA1UiE,KAoYxEkD,gBAAmBlpG,GACjBxB,KAAK2B,SAAS,CACZ8iC,WAAYjjC,IAtYwD,KAyYxEmpG,iBAAmB,OAzYqD,KA6YxEnD,uBAAyB,KACvBxnG,KAAKif,cACDjf,KAAKC,MAAM2oD,gBACb5oD,KAAKC,MAAM2oD,eAAegC,yBAhY9B5wC,sBAAsBC,GAKpB,OAAQA,EAAU8gD,aAGpBp7C,mBAAmBolE,IAEZ/kF,KAAKC,MAAM86D,cAAgBgqB,EAAUhqB,cACpC/6D,KAAKw6D,YAAYx6D,KAAKw6D,WAAWv4D,QAkTzC2oG,cAGE,OAAIpnG,IAAOqnG,cAAsB,KAG/B,gBAAC,WAAD,KACE,gBAAC3F,EAAA,EAAD,CACE7gG,IAAI,OACJoB,YAAa,gBAAC,QAAD,aACb+qD,SAAU,gBAAC,IAAD,MACVhsD,QAAS,IAAMxE,KAAKC,MAAM6qG,kBAE5B,gBAAC5F,EAAA,EAAD,CACE7gG,IAAI,UACJoB,YAAa,gBAAC,QAAD,mBACb+qD,SAAU,gBAAC,KAAD,MACVhsD,QAAS,IAAMxE,KAAKC,MAAM8qG,oBAE5B,gBAAC7F,EAAA,EAAD,CACE7gG,IAAI,SACJoB,YAAa,gBAAC,QAAD,eACb+qD,SAAU,gBAAC,KAAD,MACVhsD,QAAS,IAAMxE,KAAKC,MAAM+qG,oBAE5B,gBAAC9F,EAAA,EAAD,CACE7gG,IAAI,QACJoB,YAAa,gBAAC,QAAD,cACb+qD,SAAU,gBAAC,IAAD,MACVhsD,QAAS,IAAMxE,KAAKC,MAAMgrG,mBAE5B,gBAAC/F,EAAA,EAAD,CACE7gG,IAAI,cACJoB,YAAa,gBAAC,QAAD,oBACb+qD,SAAU,gBAAC,IAAD,MACVhsD,QAAS,IAAMxE,KAAKC,MAAMirG,sBAE5B,gBAAChG,EAAA,EAAD,CACE7gG,IAAI,UACJoB,YAAa,gBAAC,QAAD,mBACb+qD,SAAU,gBAAC,KAAD,MACVhsD,QAAS,IAAMxE,KAAKC,MAAMkrG,mBAE1B3nG,IAAO4nG,gBACP,gBAAClG,EAAA,EAAD,CACE7gG,IAAI,aACJoB,YAAa,gBAAC,QAAD,2BACb+qD,SAAU,gBAAC,KAAD,MACVhsD,QAAS,IAAMhB,IAAO6nG,uBAsBhCtrG,SAAU,MAAD,EAKHC,KAAKC,MAHP2G,EAFK,EAELA,QACA0kG,EAHK,EAGLA,+BACAjB,EAJK,EAILA,kCAJK,EAMkDrqG,KAAKsB,MAAtDklG,EAND,EAMCA,gBAAiBC,EANlB,EAMkBA,gBAAiBhiE,EANnC,EAMmCA,WAEpC8mE,EAA2B,KAAf9mE,QAA2B35B,EAE7C,OACE,uBAAK7F,MAAOpC,GAAOuM,WACjB,gBAAC81F,EAAA,EAAD,CAAMjgG,MAAOpC,GAAOkjB,MACjB/lB,KAAK4qG,cACN,gBAAC7F,GAAD,CACEt/F,YAAa,gBAAC,QAAD,sBACb+qD,SACE,gBAACx8C,EAAA,EAAD,CACEE,SAAU,GACVD,gBAAc,EACdlP,IAAI,4CAGRymG,eAAe,EACfC,6BAA6B,EAC7BxG,mBAAiB,EACjByG,kBAAmB,IAAM,CACvB,gBAACxG,EAAA,EAAD,CACE7gG,IAAI,aACJoB,YAAa,gBAAC,QAAD,mBACb+qD,SAAU,gBAAC,IAAD,MACVhsD,QAAS,IACPxE,KAAK2B,SAAS,CAAE+kG,6BAA6B,MAGjD,gBAACxB,EAAA,EAAD,CACE7gG,IAAI,mBACJoB,YAAa,gBAAC,QAAD,yBACb+qD,SAAU,gBAACm7C,EAAD,MACVnnG,QAAS,IACPxE,KAAK2B,SAAS,CAAEglG,4BAA4B,MAGhD,gBAACzB,EAAA,EAAD,CACE7gG,IAAI,QACJoB,YAAa,gBAAC,QAAD,cACb+qD,SAAU,gBAAC,IAAD,MACVhsD,QAAS,IAAMxE,KAAKC,MAAM2rG,iCAE5B,gBAAC1G,EAAA,EAAD,CACE7gG,IAAI,YACJoB,YAAa,gBAAC,QAAD,kBACb+qD,SAAU,gBAAC,KAAD,MACVhsD,QAAS,KACPxE,KAAKC,MAAM4rG,wBAKnB,gBAAC9G,GAAD,CACEt/F,YAAa,gBAAC,QAAD,eACb+qD,SACE,gBAACx8C,EAAA,EAAD,CACEE,SAAU,GACVD,gBAAc,EACdlP,IAAI,sCAGRymG,eAAe,EACf5nG,KAAM2nG,EACNE,6BAA8BF,EAC9BG,kBAAmB,IACjBI,YAAuB9+D,YAAiBpmC,GAAU69B,GAC/Cl/B,IAAI,CAACoY,EAAkB5J,KACtB,MAAM9Q,EAAO0a,EAAOqnB,UACpB,OACE,gBAAC,GAAD,CACE3gC,IAAK0P,EACLtO,YAAaxC,EACbyiG,YACsB,WAApBc,GAAgCC,IAAoBxjG,EAEtD6nE,OAAQ,IAAM9qE,KAAKC,MAAMghB,aAAahe,GACtCw2C,SAAU,IAAMz5C,KAAKC,MAAMinG,eAAevpF,GAC1CmoF,SAAU,kBACVllC,MAAO,IAAM5gE,KAAK0nG,WAAW3zF,GAC7BwoD,SAAUlW,IACRrmD,KAAKC,MAAM8rG,eAAe9oG,EAAMojD,GAChCrmD,KAAK+mG,YAAY,KAAM,KAEzBlB,WAAY,IAAM7lG,KAAK+mG,YAAY,SAAU9jG,GAC7C02C,OAAQ,IAAM35C,KAAKgnG,YAAYrpF,GAC/Bi8B,MAAO,IAAM55C,KAAKinG,WAAWtpF,GAC7Bk8B,QAAS,IAAM75C,KAAKmnG,aAAapzF,GACjCiyF,YAAa,IAAMhmG,KAAKynG,iBAAiB9pF,EAAQ5J,GACjDgyF,SAAU,IAAMxf,IAAUllC,IA1uBlB,UA2uBR4kD,UAAiB,IAANlyF,EACXmyF,SAAU,IAAMlmG,KAAKooG,cAAcr0F,GACnCoyF,YAAapyF,IAAMnN,EAAQ2hG,kBAAoB,EAC/CnC,WAAY,IAAMpmG,KAAKsoG,gBAAgBv0F,GACvC6xF,uBAAwB,IAAM,CAC5B,CACEthG,MAAO,wBACPqO,SAAS,EACTiJ,MAAO,IAAM5b,KAAK2nG,wBAAwBhqF,IAE5C,CACErZ,MAAO,uBACPqO,SAAS,EACTiJ,MAAO,IAAM5b,KAAK4nG,uBAAuBjqF,SAMlDw8C,OACC,gBAAC,IAAD,CACE91D,IAAK,YACLG,QAASxE,KAAKC,MAAM+rG,YACpBvmG,YAAa,gBAAC,QAAD,kCAKvB,gBAACs/F,GAAD,CACEt/F,YAAa,gBAAC,QAAD,wBACb+qD,SACE,gBAACx8C,EAAA,EAAD,CACEE,SAAU,GACVD,gBAAc,EACdlP,IAAI,4CAGRymG,eAAe,EACf5nG,KAAM2nG,EACNE,6BAA8BF,EAC9BG,kBAAmB,IACjBI,YACEr6D,YAAwB7qC,GACxB69B,GAECl/B,IAAI,CAAC4Y,EAAgBpK,KACpB,MAAM9Q,EAAOkb,EAAe6mB,UAC5B,OACE,gBAAC,GAAD,CACE3gC,IAAK0P,EACLtO,YAAaxC,EACbyiG,YACsB,oBAApBc,GACAC,IAAoBxjG,EAEtB6nE,OAAQ,IAAM9qE,KAAKC,MAAM+gB,qBAAqB/d,GAC9Cw2C,SAAU,IACRz5C,KAAKC,MAAMyoG,uBAAuBvqF,GAEpC2nF,SAAU,0BACVllC,MAAO,IAAM5gE,KAAK6nG,mBAAmB9zF,GACrCwoD,SAAUlW,IACRrmD,KAAKC,MAAMgsG,uBAAuBhpG,EAAMojD,GACxCrmD,KAAK+mG,YAAY,KAAM,KAEzBlB,WAAY,IACV7lG,KAAK+mG,YAAY,kBAAmB9jG,GAEtC02C,OAAQ,IAAM35C,KAAKwoG,oBAAoBrqF,GACvCy7B,MAAO,IAAM55C,KAAKyoG,mBAAmBtqF,GACrC07B,QAAS,IAAM75C,KAAK2oG,qBAAqB50F,GACzCiyF,YAAa,IACXhmG,KAAK8oG,yBAAyB3qF,EAAgBpK,GAEhDgyF,SAAU,IACRxf,IAAUllC,IApzBK,mBAszBjB4kD,UAAiB,IAANlyF,EACXmyF,SAAU,IAAMlmG,KAAK+oG,sBAAsBh1F,GAC3CoyF,YAAapyF,IAAMnN,EAAQsiG,yBAA2B,EACtD9C,WAAY,IAAMpmG,KAAKipG,wBAAwBl1F,OAIpDomD,OACC,gBAAC,IAAD,CACE91D,IAAK,sBACLoB,YAAa,gBAAC,QAAD,qCACbjB,QAASxE,KAAKC,MAAMisG,yBAK9B,gBAACnH,GAAD,CACEt/F,YAAa,gBAAC,QAAD,yBACb+qD,SACE,gBAACx8C,EAAA,EAAD,CACEE,SAAU,GACVD,gBAAc,EACdlP,IAAI,4CAGRymG,eAAe,EACf5nG,KAAM2nG,EACNE,6BAA8BF,EAC9BG,kBAAmB,IACjBI,YACEK,YAAyBvlG,GACzB69B,GAECl/B,IAAI,CAACwY,EAAgBhK,KACpB,MAAM9Q,EAAO8a,EAAeinB,UAC5B,OACE,gBAAC,GAAD,CACE3gC,IAAK0P,EACLtO,YAAaxC,EACbyiG,YACsB,oBAApBc,GACAC,IAAoBxjG,EAEtB6nE,OAAQ,IAAM9qE,KAAKC,MAAMmsG,qBAAqBnpG,GAC9Cw2C,SAAU,IACRz5C,KAAKC,MAAMopG,uBAAuBtrF,GAEpC+nF,SAAU,4BACVllC,MAAO,IAAM5gE,KAAK+nG,mBAAmBh0F,GACrCwoD,SAAUlW,IACRrmD,KAAKC,MAAMosG,uBAAuBppG,EAAMojD,GACxCrmD,KAAK+mG,YAAY,KAAM,KAEzBlB,WAAY,IACV7lG,KAAK+mG,YAAY,kBAAmB9jG,GAEtC02C,OAAQ,IAAM35C,KAAKmpG,oBAAoBprF,GACvC67B,MAAO,IAAM55C,KAAKopG,mBAAmBrrF,GACrC87B,QAAS,IAAM75C,KAAKspG,qBAAqBv1F,GACzCiyF,YAAa,IACXhmG,KAAKypG,yBAAyB1rF,EAAgBhK,GAEhDgyF,SAAU,IACRxf,IAAUllC,IAt3BK,mBAw3BjB4kD,UAAiB,IAANlyF,EACXmyF,SAAU,IAAMlmG,KAAK0pG,sBAAsB31F,GAC3CoyF,YAAapyF,IAAMnN,EAAQijG,0BAA4B,EACvDzD,WAAY,IAAMpmG,KAAK4pG,wBAAwB71F,OAIpDomD,OACC,gBAAC,IAAD,CACE91D,IAAK,sBACLoB,YAAa,gBAAC,QAAD,wCACbjB,QAASxE,KAAKC,MAAMqsG,yBAK9B,gBAACvH,GAAD,CACEt/F,YAAa,gBAAC,QAAD,4BACb0H,MAAOm+F,EACPtG,UAAWqF,EACX75C,SACE,gBAACx8C,EAAA,EAAD,CACEE,SAAU,GACVD,gBAAc,EACdlP,IAAI,sCAGRymG,eAAe,EACf5nG,KAAM2nG,EACNE,6BACGF,IAAcD,EAEjBI,kBAAmB,IACjBI,YACE7rD,YAAmCr5C,GACnC69B,GAECl/B,IAAI,CAACgZ,EAA0BxK,KAC9B,MAAM9Q,EAAOsb,EAAyBymB,UACtC,OACE,gBAAC,GAAD,CACE3gC,IAAK0P,EACLtO,YAAaxC,EACbyiG,YACsB,+BAApBc,GACAC,IAAoBxjG,EAEtB6nE,OAAQ,IACN9qE,KAAKC,MAAMssG,+BAA+BtpG,GAE5Cw2C,SAAU,IACRz5C,KAAKC,MAAM+pG,iCACTzrF,GAGJunF,SAAU,sBACVllC,MAAO,IAAM5gE,KAAKkoG,6BAA6Bn0F,GAC/CwoD,SAAUlW,IACRrmD,KAAKC,MAAMusG,iCACTvpG,EACAojD,GAEFrmD,KAAK+mG,YAAY,KAAM,KAEzBlB,WAAY,IACV7lG,KAAK+mG,YAAY,6BAA8B9jG,GAEjD02C,OAAQ,IACN35C,KAAK8pG,8BACHvrF,GAGJq7B,MAAO,IACL55C,KAAK+pG,6BACHxrF,GAGJs7B,QAAS,IAAM75C,KAAKkqG,+BAA+Bn2F,GACnDiyF,YAAa,IACXhmG,KAAKiqG,mCACH1rF,EACAxK,GAGJgyF,SAAU,IACRxf,IAAUllC,IA38BgB,8BA68B5B4kD,UAAiB,IAANlyF,EACXmyF,SAAU,IAAMlmG,KAAKsqG,gCAAgCv2F,GACrDoyF,YACEpyF,IAAMnN,EAAQ6jG,oCAAsC,EAEtDrE,WAAY,IACVpmG,KAAKwqG,kCAAkCz2F,OAK9ComD,OACC,gBAAC,IAAD,CACE91D,IAAK,iCACLoB,YACE,gBAAC,QAAD,6CAEFjB,QAASxE,KAAKC,MAAMwsG,iCAGvBtyC,OACC,gBAAC,IAAD,CACE91D,IAAK,oBACLoB,YAAa,gBAAC,QAAD,kCACbjB,QAAS,IACPxE,KAAK2B,SAAS,CAAEilG,4BAA4B,UAO1D,gBAAC9/E,EAAA,EAAD,CACEtkB,IAAKkqG,GAAc1sG,KAAKw6D,WAAakyC,EACrCxqG,MAAOuiC,EACPjd,gBAAiBxnB,KAAK2qG,iBACtBxoG,SAAUnC,KAAK0qG,gBACfpiF,UAAW,IAEZtoB,KAAKsB,MAAMqlG,4BACV,gBAAC3qC,EAAA,EAAD,CACEp4D,MAAI,EACJwmC,mBAAoBxjC,EAAQyjC,eAC5BE,SAAU,IACRvqC,KAAK2B,SAAS,CAAEglG,4BAA4B,IAE9C1vF,QAAS,KACHjX,KAAKC,MAAM2oD,gBACb5oD,KAAKC,MAAM2oD,eAAegC,wBAC5B5qD,KAAK2B,SAAS,CAAEglG,4BAA4B,KAE9Cn8D,wBACE,gBAAC,QAAD,2FAKFC,8BACE,gBAAC,QAAD,oIAOLzqC,KAAKsB,MAAMolG,6BACV,gBAAC,EAAD,CACE9iG,KAAM5D,KAAKsB,MAAMolG,4BACjB9/F,QAASA,EACT/C,QAAS,IACP7D,KAAK2B,SAAS,CAAE+kG,6BAA6B,IAE/CzvF,QAAS,KACHjX,KAAKC,MAAM2oD,gBACb5oD,KAAKC,MAAM2oD,eAAegC,wBAC5B5qD,KAAK2B,SAAS,CAAE+kG,6BAA6B,KAE/CnJ,qBAAsBv9F,KAAKC,MAAMs9F,yBAGlCv9F,KAAKsB,MAAMglG,wBACZ,gBAACqG,GAAA,EAAD,CACE/oG,MAAI,EACJ+Z,OAAQ3d,KAAKsB,MAAMglG,uBACnB1/F,QAAS5G,KAAKC,MAAM2G,QACpBqQ,QAAS,KACHjX,KAAKC,MAAM2oD,gBACb5oD,KAAKC,MAAM2oD,eAAegC,wBAC5B5qD,KAAK2nG,wBAAwB,OAE/B9jG,QAAS,IAAM7D,KAAK2nG,wBAAwB,MAC5CiF,gBAAiB,KACf5sG,KAAK4nG,uBAAuB5nG,KAAKsB,MAAMglG,wBACvCtmG,KAAK2nG,wBAAwB,WAIhC3nG,KAAKsB,MAAMilG,uBACZ,gBAACsG,GAAA,EAAD,CACEjpG,MAAI,EACJ+Z,OAAQ3d,KAAKsB,MAAMilG,sBACnB1iG,QAAS,IAAM7D,KAAK4nG,uBAAuB,MAC3C3wF,QAAS,KACHjX,KAAKC,MAAM2oD,gBACb5oD,KAAKC,MAAM2oD,eAAegC,wBAC5B5qD,KAAK4nG,uBAAuB,SAIjC5nG,KAAKsB,MAAMslG,4BACV,gBAAC,EAAD,CACEhgG,QAASA,EACT/C,QAAS,IAAM7D,KAAK2B,SAAS,CAAEilG,4BAA4B,U,qJC1mCvE,MAAM/jG,EAAS,CACbC,KAAM,CACJC,MAAO,SAUI+pG,MANM,IACnB,gBAAC7rG,EAAA,EAAD,KACGuS,GAAY,uBAAKzO,IAAKyO,EAAS1Q,KAAKiC,IAAKC,IAAI,GAAGC,MAAOpC,EAAOC,QCRnE,MAAMD,EACa,CACf8M,KAAM,EACNN,QAAS,OACT6qD,UAAW,UAuBA6yC,MAfU,EAAG3rG,cAC1B,gBAACH,EAAA,EAAD,KACGuS,GACC,uBACEvO,MAAK,eACApC,EADA,CAEH4V,gBAAiBjF,EAASw5F,QAAQC,eAGnC7rG,I,gBCRT,MAAMyB,EAAS,CACbqqG,eAAgB,CACd79F,QAAS,OACTC,cAAe,SACfvM,MAAO,OACPmrC,UAAW,KAEbi/D,gBAAiB,CACf99F,QAAS,OACTC,cAAe,SACftJ,WAAY,SACZX,eAAgB,SAChBV,SAAU,KAEZyoG,UAAW,CACTxzF,aAAc,GACd7W,MAAO,OACPqR,UAAW,WAIf,MAAMi5F,UAAkBtzB,IACtB5kE,cACEC,QAEApV,KAAKsB,MAAQ,CACXgsG,iBAAiB,GAIrB9vF,cAIA+nC,gBACMvlD,KAAKC,MAAMulD,YAAYxlD,KAAKC,MAAMulD,WAAW,MAGnD+nD,qBAIAxtG,SAAU,MAAD,EAWHC,KAAKC,MATP2G,EAFK,EAELA,QACA4mG,EAHK,EAGLA,QACAC,EAJK,EAILA,OACAvtD,EALK,EAKLA,SACAwtD,EANK,EAMLA,qBACAzC,EAPK,EAOLA,eACA0C,EARK,EAQLA,kBACAC,EATK,EASLA,iBACAC,EAVK,EAULA,qBAGF,OACE,kBAAC,OAAD,KACG,EAAGttG,UACF,kBAAC,EAAD,KACE,yBAAK0E,MAAOpC,EAAOqqG,gBACjB,kBAAC,IAAD,CAAMnnG,QAAM,EAACV,eAAe,UAC1B,yBAAKJ,MAAOpC,EAAOsqG,iBACjB,kBAACW,EAAA,EAAD,CACExlF,UAAW,EACXrjB,MAAK,eACApC,EAAOuqG,YAGZ,kBAAC,EAAD,MACA,kBAACpQ,EAAA,EAAD,KACE,kBAAC,QAAD,0FAMFp2F,GAAW4mG,GACX,kBAAC,IAAMtoG,SAAP,KACE,kBAACwiF,EAAA,EAAD,CACEpjF,MAAO,kBAAC,QAAD,uBACPoG,WAAS,EACTlG,QAASipG,EACTlpG,SAAO,IAET,kBAAC,IAAD,QAGFqC,GACA,kBAAC,IAAM1B,SAAP,KACE,kBAACwiF,EAAA,EAAD,CACEpjF,MAAO,kBAAC,QAAD,6BACPoG,WAAS,EACTlG,QAAS07C,EACT37C,SAAO,IAET,kBAAC,IAAD,SAGDqC,GACD,kBAAC,IAAM1B,SAAP,KACE,kBAACwiF,EAAA,EAAD,CACEpjF,MAAO,kBAAC,QAAD,6BACPoG,WAAS,EACTlG,QAASkpG,EACTnpG,SAAO,IAET,kBAAC,IAAD,SAGDqC,GACD,kBAAC,IAAM1B,SAAP,KACE,kBAACy1F,EAAA,EAAD,CACEr2F,MAAO,kBAAC,QAAD,sBACPoG,WAAS,EACTlG,QAASymG,IAEX,kBAAC,IAAD,OAIF,kBAACtQ,EAAA,EAAD,CACEr2F,MAAO,kBAAC,QAAD,iCACPoG,WAAS,EACTlG,QAASopG,MAKjB,kBAAC,IAAD,CAAM5nG,WAAW,SAASX,eAAe,iBACvC,kBAAC,IAAD,KACE,kBAACs1F,EAAA,EAAD,CACEr2F,MAAO,kBAAC,QAAD,uBACPE,QAASmpG,IAEX,kBAAChT,EAAA,EAAD,CACEr2F,MAAO,kBAAC,QAAD,wBACPE,QAAS,IACPhB,IAAOC,gBAAgB,oCAG3B,kBAACk3F,EAAA,EAAD,CACEr2F,MAAO,kBAAC,QAAD,2BACPE,QAAS,IACPhB,IAAOC,gBACL,2DAKR,kBAAC,IAAD,CAAMuC,WAAW,UACf,kBAAC20F,EAAA,EAAD,CACEr2F,MAAO/D,EAAK0Q,SACZzM,QAASqpG,EACTxnG,KAAM,kBAAC,IAAD,QAER,kBAACxG,EAAA,EAAD,CACE0hB,UAAU,gBACV/c,QAAS,IACPhB,IAAOC,gBACL,0CAIN,kBAAC5D,EAAA,EAAD,CACE0hB,UAAU,eACV/c,QAAS,IACPhB,IAAOC,gBAAgB,qCAG3B,kBAAC5D,EAAA,EAAD,CACE0hB,UAAU,eACV/c,QAAS,IACPhB,IAAOC,gBAAgB,sCAa9B4pG,O,iCCzMf,6BAiBA,MAAMU,EAAcjuG,aAAoC,CAACG,EAAcuC,KAAS,MAE5EuC,EAME9E,EANF8E,IACA7E,EAKED,EALFC,QACAC,EAIEF,EAJFE,kBACAG,EAGEL,EAHFK,SACAkE,EAEEvE,EAFFuE,QACAgX,EACEvb,EADFub,cAGF,OACE,gBAAC,IAAD,KACGhI,GACC,gBAAC,IAAD,CACEhP,QAASA,EACTgX,cAAeA,EACf9G,KAAK,QACLpU,SAAUA,EACVJ,QAASA,EACTC,kBAAmBA,EACnBqC,IAAKA,GAEL,uBACEwC,IAAK9E,EACL6E,IAAKA,EACLhC,MAAO,GACP0M,OAAQ,GACRxK,MAAO,CACLoG,OAAQ/K,EACJ,kBACAkT,EAASgB,8BASZu5F,O,qICnCf,MAAM9oG,EAAQ,CACZ0K,KAAM,EACNN,QAAS,OACTC,cAAe,UAGF,MAAM0+F,UAA4Bj0F,YAAwB,eAAD,oBACtEwmB,iBAAqEC,YACnEytE,YAAyBjuG,KAAKC,MAAM8jB,aACpC/jB,KAAKC,MAAM2f,OAHyD,KAKtE8gB,qBAAwDC,YACtD3gC,KAAKugC,kBAGPxgC,SAAU,MAAD,EACuCC,KAAKC,MAApBG,GADxB,EACC2jB,YADD,EACcnE,MADd,wCAEP,OACE,kBAACsuF,EAAA,EAAD,eACEjpG,MAAOA,EACPs7B,iBAAkBvgC,KAAKugC,iBACvBG,qBAAsB1gC,KAAK0gC,qBAC3BxsB,SAAU,IACN9T,K,aCjCZ,MAAMyC,EAAS,CACbuM,UAAW,CACTC,QAAS,OACTM,KAAM,GAERw+F,iBAAkB,CAChBx+F,KAAM,EACNN,QAAS,OACT8lB,YAAa,GACbC,aAAc,GACd1c,OAAQ,IAuBG,MAAM01F,UAA0BtuG,YAA+B,eAAD,oBAG3EuuG,WAAc9rG,IACYvC,KAAKC,MAArBmrB,YACI+vB,QAAQ54C,GACpBvC,KAAKif,YAAY,KACXjf,KAAKsuG,8BACPtuG,KAAKsuG,6BAA6BrsG,WAKxClC,SAAU,MAAD,EAQHC,KAAKC,MANPmrB,EAFK,EAELA,YACArH,EAHK,EAGLA,YACAnd,EAJK,EAILA,QACAqZ,EALK,EAKLA,uBACAC,EANK,EAMLA,iBACAN,EAPK,EAOLA,MAGF,OACE,uBAAK3a,MAAOpC,EAAOuM,WACjB,gBAAC,EAAD,CACE2U,YAAaA,EACbgyB,aAAc3qB,EAAYQ,UAC1BqH,SAAUjzB,KAAKquG,WACfx4D,cAAezqB,EAAYQ,UAC3BhM,MAAOA,IAET,gBAACkuF,EAAA,EAAD,CAAO7oG,MAAOpC,EAAOsrG,iBAAkB3+F,QAAM,EAAC8Y,UAAW,GACvD,gBAACimF,EAAA,EAAD,CACE3nG,QAASA,EACTgZ,MAAOA,EACPK,uBAAwBA,EACxBC,iBAAkBA,EAClB6D,YAAaA,EACbqH,YAAaA,EACb9V,gBAAiBtV,KAAKC,MAAMqV,gBAC5BC,iBAAkBvV,KAAKC,MAAMsV,iBAC7BgC,wBAAyBvX,KAAKC,MAAMsX,wBACpCuxC,4BAA6B9oD,KAAKC,MAAM6oD,4BACxCtmD,IAAKgsG,GACFxuG,KAAKsuG,6BAA+BE,EAEvC34D,aAAczqB,EAAYQ,e,kCCvDvB,MAAM6iF,UAAgC3uG,YAInDC,SAAU,MAAD,EAOHC,KAAKC,MAJPsqC,GAHK,EAELyJ,iBAFK,EAGLzJ,UACA0J,EAJK,EAILA,SACArwC,EALK,EAKLA,KACGxD,EANE,iEAQDgE,EAAU,CACd,gBAACu2F,EAAA,EAAD,CACEt2F,IAAI,SACJC,MAAO,gBAAC,QAAD,eACPC,SAAS,EACTC,QAAS+lC,IAEX,gBAACowD,EAAA,EAAD,CACEt2F,IAAI,KACJC,MAAO,gBAAC,QAAD,WACPC,SAAS,EACT+S,iBAAiB,EACjB9S,QAASyvC,KAIb,OACE,gBAACymD,EAAA,EAAD,CACEt2F,QAASA,EACTR,KAAMA,EACNc,mBAAmB,EACnBD,eAAgB8lC,EAChB5lC,UAAU,EACV+pG,UAAQ,EACR9pG,UAAQ,GAER,gBAAC,EAAsBxE,O,kGCxEhBN,MAAM0kG,KAAKvkG,GACxB,kBAACwkG,EAAA,EAAYxkG,EACX,0BAAMykG,EAAE,sICFG5kG,MAAM0kG,KAAKvkG,GACxB,kBAACwkG,EAAA,EAAYxkG,EACX,0BAAMykG,EAAE,+M,kCCiDGiK,IAlCS,EACtB/tC,QACAjnB,SACAjuC,eACAmuC,UACA+0D,eACA7X,uBAEA,kBAAC,IAAD,CAAM1xF,eAAe,gBAAgBW,WAAW,UAC9C,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAMpB,UAAQ,GACZ,kBAAC/E,EAAA,EAAD,CAAY2E,QAASm1C,EAAQr5C,UAAWoL,GACtC,kBAACmjG,EAAD,OAEF,kBAAChvG,EAAA,EAAD,CAAY2E,QAASq1C,EAASv5C,UAAWsuG,GACvC,kBAACE,EAAD,OAEF,kBAACjvG,EAAA,EAAD,CAAY2E,QAASuyF,EAAmBz2F,UAAWoL,GACjD,kBAAC,IAAD,SAKN,kBAAC,IAAD,KACE,kBAACg8E,EAAA,EAAD,CACEnjF,SAAO,EACPD,MAAO,kBAAC,QAAD,YACPE,QAASo8D,EACTv6D,KAAM,kBAAC,IAAD,W,yJClCd,MAAMxD,EACmB,CACrByR,UAAW,IACX4lD,UAAW,UA6BT60C,EAAyB/hF,GACtBA,EACJlsB,QAAQ,SAAU,KAClBA,QAAQ,UAAW,KACnBA,QAAQ,QAAS,KACjBA,QAAQ,QAAS,KACjBA,QAAQ,UAAW,KAMlBkuG,EAAiB,CAAEC,YAAa,GAEvB,MAAMC,UAAsBpvG,YAA+B,eAAD,oBAEvEqvG,OAASC,IANG,aACC,mCAKyBJ,GAFiC,KAGvE1tG,MAAQ,CACN2U,QAAS,KACT9I,MAAO,MAL8D,KAQvEkiG,wBAA2B5qE,IACzBzkC,KAAKC,MAAMkC,SAASsiC,IATiD,KAYvE6qE,qBAAuBC,IAAS,KAC1BvvG,KAAKC,MAAMiC,OACblC,KAAKmvG,OAEFK,OAAO,CACN,CACEC,UAvBM,WAwBNC,MAAO1vG,KAAKC,MAAMiC,MAClBkyB,OAAQ46E,KAGXv5F,KACC0uC,IACE,IAAIwrD,EAAOxrD,EAAKluC,QAAQ,GAAG05F,KAC3B/mG,QAAQ6C,IAAIkkG,GAEZ3vG,KAAK2B,SAAS,CACZsU,QAAS05F,EACTxiG,MAAO,QAGXA,IACEnN,KAAK2B,SAAS,CACZwL,aAKT,KAxCoE,KAgDvEyiG,cAAiBC,IACf,MAAMpqG,EACJoqG,EAAOC,UAAUC,MACjBF,EAAOC,UAAUE,MACjBH,EAAOC,UAAUG,MACjBJ,EAAOC,UAAUI,MACjBL,EAAOC,UAAUK,MACjBN,EAAOC,UAAUM,MACjBP,EAAOC,UAAUO,MACjB,GAEI3qG,EAAgB,CACpBmqG,EAAOC,UAAUC,KACjBF,EAAOC,UAAUE,KACjBH,EAAOC,UAAUG,KACjBJ,EAAOC,UAAUI,KACjBL,EAAOC,UAAUK,KACjBN,EAAOC,UAAUM,KACjBP,EAAOC,UAAUO,MAEhBhlG,OAAO7J,KAAUA,GACjB6J,OAAO7J,GAAQA,IAASiE,GACxBuQ,KAAK,OAER,OACE,gBAACkvF,EAAA,EAAD,CACE7gG,IAAKwrG,EAAOS,SACZ7qG,YAAaspG,EAAsBtpG,GACnCC,cAAeqpG,EAAsBc,EAAOz8F,SAAW1N,GACvDC,mBAAoB,EACpBnB,QAAS,KACPhB,IAAOC,gBAAgBosG,EAAO3oG,SArCtCyY,mBAAmBolE,GACbA,EAAU7iF,QAAUlC,KAAKC,MAAMiC,OAASlC,KAAKC,MAAMiC,OACrDlC,KAAKsvG,uBAyCTvvG,SACE,OACE,2BACE,gBAAC+6F,EAAA,EAAD,CACE9sD,GAAI,yBACJtjC,WAAS,EACTqD,SAAU,qCACV7L,MAAOlC,KAAKC,MAAMiC,MAClBC,SAAU,CAACoI,EAAG/I,IAASxB,KAAKC,MAAMkC,SAASX,KAE7C,uBACEwsC,GAAG,sCACHzsB,UAAU,uBACVtc,MAAK,eACApC,EADA,CAEH0tG,WAAavwG,KAAKC,MAAMiC,WAAmB4I,EAAX,aAGnC9K,KAAKsB,MAAM6L,MACV,gBAAC6vF,EAAA,EAAD,KACE,gBAAC,QAAD,mHAKAh9F,KAAKsB,MAAM2U,QACb,gBAACivF,EAAA,EAAD,KACGllG,KAAKsB,MAAM2U,QAAQ1Q,IAAIsqG,GAAU7vG,KAAK4vG,cAAcC,KAGvD,gBAAC,WAAD,KACE,gBAAC7S,EAAA,EAAD,KACE,gBAAC,QAAD,mBAEF,gBAAC,IAAD,CAAQj3F,QAAM,GACZ,gBAACi3F,EAAA,EAAD,2BAEE,2BAFF,oBAIE,2BAJF,cAME,2BANF,eAQE,2BARF,MAUE,8BAKR,gBAACA,EAAA,EAAD,CAAMrhE,MAAM,SAAZ,4BAC4B,IAC1B,gBAACg/D,EAAA,EAAD,CACEn2F,QAAS,IAAMhB,IAAOC,gBAAgB,uBACtCa,MAAO,e,6CChLJ,MAAMksG,UAAmB1wG,gBAAmC,eAAD,oBACxEwB,MAAQ,CACNmjC,WAAY,IAF0D,KAWxE4qE,wBAA2B5qE,IACzBzkC,KAAK2B,SAAS,CACZ8iC,eAEFzkC,KAAKywG,mBAfiE,KAkBxEA,gBAAkBlB,IAAS,KACrBvvG,KAAKsB,MAAMmjC,YAAYisE,YAAe1wG,KAAKsB,MAAMmjC,WAAWtd,SAC/D,MAfH/P,0BAA0BC,GACpBA,EAASzT,OAAS5D,KAAKC,MAAM2D,MAC/B+sG,cAeJ5wG,SAAU,MAAD,EACmBC,KAAKC,MAAvB2D,EADD,EACCA,KAAMC,EADP,EACOA,QAEd,OACE,gBAAC62F,EAAA,EAAD,CACEj6F,MAAO,gBAAC,QAAD,cACPgE,eAAgBZ,EAChBO,QAAS,CACP,gBAACu2F,EAAA,EAAD,CACEr2F,MAAO,gBAAC,QAAD,cACPD,IAAI,QACJE,SAAS,EACTC,QAASX,KAGby8C,iBAAkB,CAChB,gBAACq6C,EAAA,EAAD,CACEt2F,IAAI,QACJE,SAAS,EACTC,QAAS,KACPhB,IAAOC,gBAAgB,mCAEzBa,MAAO,gBAAC,QAAD,0BAET,gBAACq2F,EAAA,EAAD,CACEt2F,IAAI,OACJE,SAAS,EACTC,QAAS,KACPhB,IAAOC,gBACL,yDAGJa,MAAO,gBAAC,QAAD,gBAGXI,mBAAmB,EACnBd,KAAMA,GAEN,gBAAC,EAAD,CACE1B,MAAOlC,KAAKsB,MAAMmjC,WAClBtiC,SAAUnC,KAAKqvG,8B,kQC5CV,SAASuB,GAA0B,QAChD/sG,EADgD,YAEhD85F,IAEA,MAAMkT,IACFlT,KACAA,EAAYL,gBACZK,EAAYL,aAAaE,OAG7B,OAhCF,SAAqBsT,EAAsBC,GACzC,MAAMC,EAAgBh2F,mBAEtBF,oBAAU,KACRk2F,EAAclkG,QAAUgkG,IAG1Bh2F,oBACE,KAKE,GAAc,OAAVi2F,EAAgB,CAClB,IAAI/iE,EAAKijE,aALX,WACMD,EAAclkG,SAASkkG,EAAclkG,YAIdikG,GAC3B,MAAO,IAAMG,cAAcljE,KAG/B,CAAC+iE,IAYHI,CAAY,IAAMxT,EAAYE,uBAAwBgT,EAAU,KAAO,MAGrE,kBAACnW,EAAA,EAAD,CACEt2F,QAAS,CACPysG,EACE,kBAACnpB,EAAA,EAAD,CACEpjF,MAAO,kBAAC,QAAD,cACPD,IAAI,QACJE,SAAO,EACPC,QAASX,IAGX,kBAAC82F,EAAA,EAAD,CACEr2F,MAAO,kBAAC,QAAD,yBACPD,IAAI,QACJE,SAAS,EACTC,QAASX,KAIfpD,WAAOqK,EACPnG,SAAS,KACTD,mBAAmB,EACnBd,MAAI,EACJgB,UAAQ,IAENisG,GACA,kBAAC,IAAD,KACE,kBAAC,IAAD,KACE,kBAAC7T,EAAA,EAAD,KACE,kBAAC,QAAD,mEAES,IACR,eACD,2BACE,kBAAC,QAAD,sGAON,kBAAC,IAAD,CAAM33F,eAAe,SAASW,WAAW,UACvC,kBAACorG,EAAA,EAAD,CAAkB18F,KAAM,KACxB,kBAAC,IAAD,MACA,kBAACsoF,EAAA,EAAD,sDAEF,kBAAC,IAAD,MACA,kBAAC,IAAD,CAAM33F,eAAe,UACnB,kBAACq8C,EAAA,EAAD,KACE,kBAAC,QAAD,qJASPmvD,GACC,kBAAC,IAAD,KACE,kBAAC,IAAD,KACE,kBAAC7T,EAAA,EAAD,KACE,kBAAC,QAAD,mEAES,IACR,iBAGL,kBAAC,IAAD,CAAM33F,eAAe,SAASW,WAAW,UACvC,kBAAC,IAAD,MACA,kBAAC,IAAD,MACA,kBAACg3F,EAAA,EAAD,KACE,2BACE,kBAAC,QAAD,0CAIN,kBAAC,IAAD,MACA,kBAAC,IAAD,CAAM33F,eAAe,UACnB,kBAACq8C,EAAA,EAAD,KACE,kBAAC,QAAD,kK,WChId,kCA+BA,MAAM7+C,EAAS,CACbwuG,gBAAiB,CACfnhG,WAAY,GACZiD,YAAa,GACblD,UAAW,EACX2J,aAAc,GAEhB03F,KAAM,CACJ9mG,OAAQ,IAEVpG,QAAS,CACPgQ,UAAW,QACX/E,QAAS,OACThK,eAAgB,YAElBksG,WAAY,CAAExuG,MAAO,GAAI0M,OAAQ,GAAIS,WAAY,EAAGiD,YAAa,IACjEq+F,WAAY,CAAE7hG,KAAM,IAaP,MAAM8hG,UAA2B3xG,YAA+B,eAAD,oBAC5EwB,MAAQ,CAAEowG,WAAW,EAAOC,+BAA+B,GADiB,KAe5EC,WAAa,CACXrxG,EACAo9F,EACAkU,KACI,MACItuD,EAAkDo6C,EAAlDp6C,uBAAwB+5C,EAA0BK,EAA1BL,aAAcR,EAAYa,EAAZb,QAC9C,GAAKA,GAAYQ,EAGjB,GAFAwU,YAAsBD,EAAKrU,QAEvBF,EAAayU,qBAAsB,CAMrC,IALevuG,IAAO4V,kBACpBy4F,EAAKrU,OACDj9F,EAAKG,EAAE,6DACPH,EAAKG,EAAE,4DAEA,OAIbV,KAAK2B,SAAS,CAAE+vG,WAAW,IAC3BM,YAAuBzuD,EAAwBu5C,EAAQmV,IAAK,CAC1DzU,OAAQqU,EAAKrU,SACZ/nF,KACD,IAAMzV,KAAKkyG,iCAAiC3xG,EAAMo9F,EAAakU,GAC9D15F,GAAenY,KAAKmyG,iCAAiC5xG,EAAM4X,SAG9DnY,KAAK2B,SAAS,CACZgwG,+BAA+B,IAEjCnuG,IAAOC,gBACL2uG,YACEP,EAAKrU,QAAU,GACfV,EAAQmV,IACRnV,EAAQH,OAAS,MAjDmD,KAuD5EuV,iCAAmC,CACjC3xG,EACAo9F,EACAkU,KAEAlU,EAAYE,uBACZ79F,KAAK2B,SAAS,CAAE+vG,WAAW,IACvBG,EAAKrU,OACPhkB,YACEj5E,EAAKG,EACH,0HAIJ84E,YACEj5E,EAAKG,EACH,yEAvEoE,KA6E5EyxG,iCAAmC,CAAC5xG,EAAgB4X,KAClDnY,KAAK2B,SAAS,CAAE+vG,WAAW,IAC3Bx7F,YACE3V,EAAKG,EACH,wEAEFyX,IAnFwE,KA+F5Ek6F,WAAc1U,IACXA,EAAYL,eAAiBK,EAAYb,SAAW98F,KAAKsB,MAAMowG,UA7FlEpyF,oBACMtf,KAAKC,MAAM2D,MACb0uG,cAIJl7F,0BAA0BC,IACnBrX,KAAKC,MAAM2D,MAAQyT,EAASzT,MAC/B0uG,cA4EJC,aAAaV,GACX,OAAQA,EAAKW,oBAGX,gBAAC,QAAD,gCAAQX,EAAKW,uBAFb,gBAAC,QAAD,aASJzyG,SAAU,MAAD,EACmBC,KAAKC,MAAvB2D,EADD,EACCA,KAAMC,EADP,EACOA,QACN8tG,EAAkC3xG,KAAKsB,MAAvCqwG,8BAER,OACE,gBAAC,OAAD,KACG,EAAGpxG,UACF,gBAACm9F,EAAA,EAAmBx8F,SAApB,KACIy8F,GACA,gBAACjD,EAAA,EAAD,CACEt2F,QAAS,CACP,gBAACu2F,EAAA,EAAD,CACEr2F,MAAO,gBAAC,QAAD,cACPD,IAAI,QACJE,SAAS,EACTC,QAASX,KAGbY,eAAgBZ,EAChBa,mBAAmB,EACnBd,KAAMA,EACNgB,UAAQ,GAER,gBAAC,IAAD,KACE,gBAAC,IAAD,KACE,gBAACo4F,EAAA,EAAD,KACE,gBAAC,QAAD,2OAULyV,cAAuBltG,IAAIssG,GAC1B,gBAACa,EAAA,EAAD,CAAMruG,IAAKwtG,EAAKrU,QAAU,GAAIv4F,MAAOpC,EAAOyuG,MAC1C,gBAACqB,EAAA,EAAD,CACElyG,MACE,4BACE,yBAAIoxG,EAAK5uG,MADX,MACwBjD,KAAKuyG,aAAaV,IAG5Ce,UACEf,EAAKgB,iBACDtyG,EAAKG,EAAEmxG,EAAKgB,kBACZ,KAGR,gBAACC,EAAA,EAAD,KACGjB,EAAKkB,mBAAmBxtG,IACvB,CAACytG,EAAmBniG,IAClB,gBAAC,IAAD,CAAQxM,IAAKwM,EAAO9K,QAAM,GACxB,gBAAC,IAAD,CAAMnB,UAAQ,EAACoB,WAAW,UACxB,gBAAC,IAAD,CAAaf,MAAOpC,EAAO0uG,aAC3B,gBAACvU,EAAA,EAAD,CAAM/3F,MAAOpC,EAAO2uG,YACjBjxG,EAAKG,EAAEsyG,EAAkBt/F,SAAU,IACnCs/F,EAAkBC,gBACjB,gBAAC,QAAD,sCAOZ,gBAACjW,EAAA,EAAD,CAAM/3F,MAAOpC,EAAOwuG,iBACjBQ,EAAKqB,iBACF3yG,EAAKG,EAAEmxG,EAAKqB,kBACZ,KAGR,gBAACC,EAAA,EAAD,CAAaluG,MAAOpC,EAAOuB,SACxBu5F,EAAYL,cACbK,EAAYL,aAAaE,SAAWqU,EAAKrU,OACvC,gBAAC7C,EAAA,EAAD,CACEr6F,UAAQ,EACRgE,MAAO,gBAAC,QAAD,kCACPE,QAAS,IACPxE,KAAK4xG,WAAWrxG,EAAMo9F,EAAakU,KAGrCA,EAAKrU,OACP,gBAAC4V,EAAA,EAAD,CAAY1B,UAAW1xG,KAAKqyG,WAAW1U,IACrC,gBAACjW,EAAA,EAAD,CACEnjF,SAAO,EACPjE,SAAUN,KAAKqyG,WAAW1U,GAC1Br5F,MAAO,gBAAC,QAAD,yBACPE,QAAS,IACPxE,KAAK4xG,WAAWrxG,EAAMo9F,EAAakU,MAKzC,gBAACuB,EAAA,EAAD,CAAY1B,UAAW1xG,KAAKqyG,WAAW1U,IACrC,gBAAChD,EAAA,EAAD,CACEr6F,SAAUN,KAAKqyG,WAAW1U,GAC1Br5F,MAAO,gBAAC,QAAD,iCACPE,QAAS,IACPxE,KAAK4xG,WAAWrxG,EAAMo9F,EAAakU,SAQjD,gBAAC,IAAD,KACE,gBAAC,IAAD,KACE,gBAACrX,EAAA,EAAD,KACE,gBAAC,QAAD,qMASJmD,EAAYC,eACZ,gBAACyV,EAAA,EAAD,KACE,gBAACrW,EAAA,EAAD,KACE,gBAAC,QAAD,4IAMF,gBAACtV,EAAA,EAAD,CACEpjF,MAAO,gBAAC,QAAD,0BACPC,SAAO,EACPC,QAASm5F,EAAYO,UAEvB,gBAACvD,EAAA,EAAD,CACEr2F,MAAO,gBAAC,QAAD,wBACPE,QAASX,KAId8tG,GACC,gBAACf,EAAD,CACEjT,YAAaA,EACb95F,QAAS,KACP7D,KAAK2B,SACH,CACEgwG,+BAA+B,GAEjC,IAAMhU,EAAYE,iC,sFCpS3B,MAAMyV,UAAwBxzG,YAC3CC,SAAU,MAAD,EACmBC,KAAKC,MAAvB2D,EADD,EACCA,KAAMC,EADP,EACOA,QACd,IAAKD,EAEH,OAAO,KAGT,MAAMQ,EAAU,CACd,gBAACu2F,EAAA,EAAD,CACEt2F,IAAI,QACJC,MAAO,gBAAC,QAAD,cACPC,SAAS,EACTC,QAASX,KAIb,OACE,gBAAC62F,EAAA,EAAD,CACEj6F,MAAO,gBAAC,QAAD,gCACP2D,QAASA,EACTR,KAAMA,EACNa,eAAgBZ,EAChBa,mBAAmB,GAEnB,gBAACs4F,EAAA,EAAD,KACE,gBAAC,QAAD,wEAIF,gBAACuW,EAAA,EAAD,CACEC,UAAW,KACTxzG,KAAKif,mB,aCnCjB,MAAMw0F,UAAiC3zG,YAGpC,eAAD,oBACAwB,MAAQ,CACNsC,KAAM5D,KAAKC,MAAMyzG,aAGnB3zG,SAAU,MACA6D,EAAS5D,KAAKsB,MAAdsC,KACR,OACE,gBAAC,EAAD,CACEA,KAAMA,EACNC,QAAS,IACP7D,KAAK2B,SAAS,CACZiC,MAAM,OAYF3D,OACd,gBAACiT,EAAA,EAAmBhS,SAApB,KACG,EAAG2D,SAAQ0N,0BACV,gBAAC,EAAD,CACEmhG,YAAanhG,KAA0B1N,EAAOyM,yB,4IC/B/C,MAAMqiG,EAA0B,EAAGvyG,cAClB,qBAAX8X,OACF9X,EAAS,UAGXA,EACL8X,OAAOo4B,WAAa,IAChB,QACAp4B,OAAOo4B,WAAa,KACpB,SACA,S,wDCQR,MAAMzuC,EAAS,CACbixC,mBAAoB,CAClBnkC,KAAM,EACNN,QAAS,OACTC,cAAe,WAgDJ,SAASskG,GAA2B,QACjDhtG,EADiD,uBAEjDqZ,EAFiD,iBAGjDC,EAHiD,SAIjDqqB,EAJiD,KAKjD3mC,EALiD,YAMjDwnB,EANiD,YAOjDrH,EAPiD,iBAQjDiwB,EARiD,MASjDp0B,EATiD,SAUjDq0B,EAViD,gBAWjD3+B,EAXiD,iBAYjDC,EAZiD,wBAajDgC,EAbiD,4BAcjDuxC,IAEA,MAAM7pC,EAAci1B,cADZ,EAKJC,YAAwB,CAC1B/oB,cACArH,cACAnd,UACAotC,mBACAp0B,QACAK,yBACAC,qBAZM,mBAGNk0B,EAHM,KAINC,EAJM,KAeNC,EAGEF,EAHFE,iBACAC,EAEEH,EAFFG,6BACAC,EACEJ,EADFI,iCAGAC,EAGEJ,EAHFI,sBACAC,EAEEL,EAFFK,aACAC,EACEN,EADFM,wBAEIk/D,IACFt/D,KAAkCC,EAzB9B,EA0BgB10C,WAAe,IA1Dbk0C,IACtBA,EAAyB,8BACtB,aAyDL8/D,CAAmB9/D,IA3Bb,mBA0BDY,EA1BC,KA0BKC,EA1BL,OAgCJ/0C,WAAe,IA3DC,EACpBk0C,EACA6/D,IAEI7/D,GACG6/D,EADsB,UACQ,oBAsDZE,CAAc//D,EAAkB6/D,IAhCjD,mBA8BN/+D,EA9BM,KA+BNC,EA/BM,KAiCFC,EAA0B5pB,EAAYQ,UAiBtC4iF,EAA8B1uG,SACjC,MAEHA,YACE,KACe,eAAT80C,GACE45D,EAA4B1hG,SAC9B0hG,EAA4B1hG,QAAQ7K,SAI1C,CAAC2yC,IAGH,MAAM9K,EAAsBoL,YAAuB,CACjDF,kBACAjxB,cACAnd,YAEIotG,EAAsBlqE,EACxBA,EAAoBmqE,mBACpBnpG,EAEEopG,GAAoC,IACxC,gBAAC3kG,EAAA,EAAD,CAAYG,cAAY,EAACrL,IAAI,kCAC3B,gBAAC8vG,EAAA,EAAD,CACElvG,MAAOpC,EAAOixC,mBACdltC,QAASA,EACTtD,WAAYwxC,EACZW,YAAaV,EACb90B,uBAAwBA,EACxBC,iBAAkBA,EAClB6D,YAAaA,EACb2xB,sBAAwBpB,OAAqCxpC,EAAlBkqC,EAC3CW,oBAAsBX,IACpBP,EAAsBO,GACtBH,EAAQ,eAEVP,iBAAkBA,EAClBsB,eAAiBtB,IACfI,EAAaJ,GACbO,EAAQ,wBAEVgB,cAAeb,EACfc,qBAAsB72B,KAKtBm1F,GAAmB,IACvB,gBAAC,IAAD,CAAQruG,QAAM,EAACV,eAAe,SAAShB,IAAI,cACzC,gBAACkqG,EAAA,EAAD,CACE3nG,QAASA,EACTgZ,MAAOA,EACPK,uBAAwBA,EACxBC,iBAAkBA,EAClByD,WAAY2wB,EACZvwB,YAAaA,EACbqH,YAAaA,EACb9V,gBAAiBA,EACjBC,iBAAkBA,EAClBgC,wBAAyBA,EACzBuxC,4BAA6BA,EAC7BtmD,IAAKgsG,EACL34D,eAAgBb,EAChBq/D,cAAY,KAKZC,GAAkC,IACtC9/D,GAAoCD,EAClC,gBAAC25D,EAAA,EAAD,CACE7pG,IAAI,8BACJY,MAAOpC,EAAOixC,mBACdvT,iBAAkBgU,EAClB7T,qBAAsB8T,EACtBtgC,SAAU,GACV+e,SAAW+hB,IACTL,EAAwBK,GACxBH,EAAQ,eAEVkB,aAAcf,EACdgB,eAAa,EACbH,cAAeb,EACfiB,4BAA6B3B,EAC7B4B,6BAA8BnyB,IAE9B,KAEN,OACE,gBAAC4vF,EAAD,KACG5wG,GACC,gBAAC23F,EAAA,EAAD,CACEt2F,QAAS,CACP,gBAACu2F,EAAA,EAAD,CACEr2F,MAAO,gBAAC,QAAD,eACPC,SAAS,EACTC,QAAS+lC,EACTlmC,IAAI,WAEN,gBAACs2F,EAAA,EAAD,CACEr2F,MAAO,gBAAC,QAAD,WACPC,SAAS,EACT+S,iBAAiB,EACjBhX,UAAW00C,EACXxwC,QAASyvC,EACT5vC,IAAI,QAGRi8C,iBAAkB,CACN,UAAVv9C,GAA8B,gCAAT6xC,EACnB,gBAAC+lD,EAAA,EAAD,CACEr2F,MAAO,gBAAC,QAAD,aACPC,SAAS,EACTC,QAAS,IAjIF,EAACwF,EAAkBjH,KAEpC8xC,EADa,eAAX7qC,GAA2BsqC,EAGjB,WAAVvxC,EACI,8BACA,sBAGE,gCAwHiBwxG,CAAa3/D,EAAM7xC,GAClCsB,IAAI,SAEJ,KACJ,gBAAC4B,EAAA,EAAD,CACE5B,IAAI,OACJ6B,aAAc8tG,GAAuB,UACrC1vG,MACG0vG,GACU,UAAVjxG,GACU,gCAAT6xC,EAEE7wB,EACF,gBAAC,QAAD,gCAEA,gBAAC,QAAD,6BAJA,gBAAC,QAAD,gBASRngB,KAAMA,EACNa,eAAgB8lC,EAChB7lC,mBAAmB,EACnBC,UAAU,EACVC,UAAQ,EACR4vG,aAAW,GAEX,gBAACC,EAAA,EAAD,CACEj/D,gBAAiB,CACf,iCAAkC0+D,GAClC,8BAA+BI,GAC/BtyE,WAAYoyE,IAEdj+D,WAAY,IACI,UAAVpzC,EACEuxC,EACK,CACL,iCACA,8BACA,cAGK,CAAC,iCAAkC,cAEzB,WAAVvxC,EACI,gCAAT6xC,EACK,CAAC,kCAEJN,EACK,CAAC,8BAA+B,cAEhC,CAAC,cAIC,gCAATM,EACK,CAAC,kCACU,wBAATA,EACF,CAAC,+BAED,CAAC,oB,iLC7S1B,MAEM/xC,EAAS,CACbu6E,cAAe,CACbztE,KAAM,IASJ+kG,EAAyB/hE,GAC7BA,EAAe3N,UA8BF,MAAM2vE,UAA4B70G,YAA+B,eAAD,oBAc7EwB,MAAe,CACbszG,sBAAuB,KACvBnwE,WAAY,IAhB+D,KAmB7EowE,sBAAwB,CACtBliE,GACEmiE,yBACE,MACI9rD,EAA6BhpD,KAAKC,MAAlC+oD,yBAER,GAAI8rD,EAAoB,CAItB,IAHetxG,IAAO4V,kBACpB,wEAEW,OAGfpZ,KAAKC,MAAMipD,uBAAuBvW,EAAgBmpD,IAC3CA,IAEL9yC,EAAyB+rD,qBAAqBpiE,EAAe3N,WAC7DhlC,KAAKg1G,gCApCoE,KAwC7E11B,UAAa3sC,IACX3yC,KAAK2B,SACH,CACEizG,sBAAuBjiE,GAEzB,KACM3yC,KAAKu/E,cAAcv/E,KAAKu/E,aAAatkB,qBA9C8B,KAmD7EukB,QAAU,CAAC7sC,EAAkC0T,KAAqB,MACxD2C,EAA6BhpD,KAAKC,MAAlC+oD,yBACRhpD,KAAK2B,SAAS,CACZizG,sBAAuB,OAGrBjiE,EAAe3N,YAAcqhB,IAE7B2C,EAAyBlD,uBAAuBO,GAClDpV,YAAe,mDAIjBjxC,KAAKC,MAAMmpD,uBAAuBzW,EAAgB0T,EAASq5B,IACpDA,IACL/sC,EAAep8B,QAAQ8vC,GACvBrmD,KAAKg1G,iCAnEoE,KAuE7Er1B,iBAAoBs1B,IAAiD,MAAD,EACLj1G,KAAKC,MAA1D+oD,EAD0D,EAC1DA,yBAA0BtE,EADgC,EAChCA,uBAC7BA,IAELsE,EAAyBksD,mBACvBlsD,EAAyBmsD,0BACvBzwD,GAEFsE,EAAyBmsD,0BACvBF,IAIJj1G,KAAKggF,oBApFsE,KAuF7EA,gBAAkB,KAChBhgF,KAAKg1G,4BACDh1G,KAAKu/E,cAAcv/E,KAAKu/E,aAAatkB,mBAzFkC,KA4F7Em6C,oBAAuBziE,IACrB4zC,IAAUvvE,IAzIyB,kBAyIW,CAC5C27B,eAAgB9mC,YAAoB8mC,GACpC1vC,KAAM0vC,EAAe3N,aA/FoD,KAmG7EqwE,mBAAsB1iE,IACpB3yC,KAAKo1G,oBAAoBziE,GACzB3yC,KAAK60G,sBAAsBliE,EAAgB,CAAEmiE,oBAAoB,KArGU,KAwG7EQ,qBAAwBzkG,IACtB,IAAK01E,IAAUllC,IArJoB,mBAqJiB,OADZ,QAGeklC,IAAUpvE,IAvJ9B,mBAuJXo+F,EAHgB,EAGhC5iE,eAAsC1vC,EAHN,EAGMA,KAHN,EAMMjD,KAAKC,MAA3C2G,EANgC,EAMhCA,QAASoiD,EANuB,EAMvBA,yBAEX3C,EAAUgJ,YAAiBpsD,EAAMA,GACrC+lD,EAAyBlD,uBAAuB7iD,IAG5CuyG,EAAoBxsD,EAAyBysD,wBACjDpvD,EACAx1C,GAGFrE,YACEgpG,EACAD,EACA,kBACA3uG,GAEF4uG,EAAkBj/F,QAAQ8vC,GAC1BrmD,KAAKC,MAAMqpD,sBAAsBksD,GAEjCx1G,KAAKg1G,6BAlIsE,KA2I7EU,kCAAoC,CAClC/iE,EACA9hC,IAEO,CACL,CACEvM,MAAO,SACPsX,MAAO,IAAM5b,KAAKs/E,UAAU3sC,GAC5BhgC,QAAS3S,KAAKC,MAAMkpD,UAAUxW,IAEhC,CACEruC,MAAO,SACPsX,MAAO,IACL5b,KAAK60G,sBAAsBliE,EAAgB,CACzCmiE,oBAAoB,KAG1B,CACEvyG,KAAM,aAER,CACE+B,MAAO,OACPsX,MAAO,IAAM5b,KAAKo1G,oBAAoBziE,IAExC,CACEruC,MAAO,MACPsX,MAAO,IAAM5b,KAAKq1G,mBAAmB1iE,IAEvC,CACEruC,MAAO,QACPqO,QAAS4zE,IAAUllC,IArNY,mBAsN/BzlC,MAAO,IAAM5b,KAAKs1G,qBAAqBzkG,KA1KgC,KA+K7E8kG,sBAAwB,KAAO,MACrB3sD,EAA6BhpD,KAAKC,MAAlC+oD,yBAERhpD,KAAKC,MAAMopD,oBACRrnB,IACC,IAAKA,EACH,OAGF,MAAM4zE,EACJ5zE,EAAW/+B,MACXosD,YAAiB,WAAYpsD,GAC3B+lD,EAAyBlD,uBAAuB7iD,IAG9C0vC,EAAiBqW,EAAyBysD,wBAC9CG,EACA5sD,EAAyB+F,2BAE3Bpc,EAAekjE,gBAAgB7zE,EAAWyuB,cAC1CzwD,KAAKC,MAAMqpD,sBAAsB3W,GACjC3yC,KAAKg1G,+BA/DXA,4BACMh1G,KAAKC,MAAM2oD,gBACb5oD,KAAKC,MAAM2oD,eAAegC,wBAC5B5qD,KAAKif,cAiEPlf,SAAU,MAAD,EAOHC,KAAKC,MALP2G,EAFK,EAELA,QACAoiD,EAHK,EAGLA,yBACAtE,EAJK,EAILA,uBACAuE,EALK,EAKLA,uBACAM,EANK,EAMLA,aAEM9kB,EAAezkC,KAAKsB,MAApBmjC,WAEF1e,EC3Q8B,EACtCA,EACA0e,KAEA,IAAKA,EAAY,OAAO1e,EAExB,MAAMu5C,EAAsB76B,EAAW3Q,cAEvC,OAAO/N,EAAK1a,OACTyqG,IAIsC,IAHrCA,EACG9wE,UACAlR,cACApsB,QAAQ43D,KD8PAy2C,CCjRf/sD,IAEAhnC,iBAAO,EAAGgnC,EAAyB+F,0BAA2Bh7C,GAC5Di1C,EAAyBgtD,oBAAoBjiG,ID+Q3CkiG,CAAyBjtD,GACzBvkB,GAMIw8C,EAAUr6E,EAAQE,IAAM,IAAMkiD,EAAyBliD,IAE7D,OACE,gBAACyI,EAAA,EAAD,KACGg6C,EAAeA,IAAiB,KACjC,uBAAKtkD,MAAOpC,EAAOu6E,eACjB,gBAAC,IAAD,KACG,EAAG3tE,SAAQ1M,WACV,gBAACmzG,EAAA,EAAD,CACE7xG,IAAK48E,EACLz+E,IAAK+8E,GAAiBv/E,KAAKu/E,aAAeA,EAC1C2B,SAAUn7D,EACVhjB,MAAOA,EACP0M,OAAQA,EACR0mG,aAAcn2G,KAAK21G,sBACnBS,gBAAiB,gBAAC,QAAD,2BACjBj1B,YAAauzB,EACbtzB,cACE18B,EAAyB,CAACA,GAA0B,GAEtD28B,eAAgBp4B,EAChBq4B,YAAathF,KAAKsB,MAAMszG,sBACxBr4C,SAAUv8D,KAAKw/E,QACf+B,sBAAuBvhF,KAAK2/E,iBAC5BhkE,kBAAmB3b,KAAK01G,kCACxBj0B,aAAa,yBAKrB,gBAAC36D,EAAA,EAAD,CACE5kB,MAAOuiC,EACPjd,gBAAiB,OACjBrlB,SAAUX,GACRxB,KAAK2B,SAAS,CACZ8iC,WAAYjjC,QA9PLmzG,EACZ1uF,aAAe,CACpBijC,uBAAwB,CACtBvW,EACAjuB,IACGA,GAAG,GACR0kC,uBAAwB,CACtBzW,EACA0T,EACA3hC,IACGA,GAAG,K,iLEtDZ,MAEM7hB,EAAS,CACbu6E,cAAe,CACbztE,KAAM,IASJ0mG,EACJx1D,GACGA,EAAoB7b,UAyBV,MAAMsxE,UAAiCx2G,YAGnD,eAAD,oBAcAwB,MAAe,CACbi1G,2BAA4B,KAC5B9xE,WAAY,IAhBd,KAmBA+xE,2BAA6B,CAC3B31D,GACEi0D,yBACE,MACItrD,EAA6BxpD,KAAKC,MAAlCupD,yBAER,GAAIsrD,EAAoB,CAItB,IAHetxG,IAAO4V,kBACpB,wEAEW,OAGfpZ,KAAKC,MAAMypD,4BAA4B7I,EAAqBi7C,IACrDA,IAELtyC,EAAyBiG,OAAO5O,EAAoB7b,WACpDhlC,KAAKy2G,qCApCT,KAwCAn3B,UAAai3B,IACXv2G,KAAK2B,SACH,CACE40G,8BAEF,KACMv2G,KAAKu/E,cAAcv/E,KAAKu/E,aAAatkB,qBA9C/C,KAmDAukB,QAAU,CAAC3+B,EAA4CwF,KAAqB,MAClEmD,EAA6BxpD,KAAKC,MAAlCupD,yBACRxpD,KAAK2B,SAAS,CACZ40G,2BAA4B,OAG1B11D,EAAoB7b,YAAcqhB,IAElCmD,EAAyBnI,IAAIgF,GAC/BpV,YAAe,mDAIjBjxC,KAAKC,MAAM0pD,4BACT9I,EACAwF,EACAq5B,IACOA,IACL7+B,EAAoBtqC,QAAQ8vC,GAC5BrmD,KAAKy2G,iCACLz2G,KAAKC,MAAM2pD,6BAA6B/I,QAvE9C,KA4EA8+B,iBACE+2B,IACI,MAAD,EAIC12G,KAAKC,MAFPupD,EAFC,EAEDA,yBACA7E,EAHC,EAGDA,4BAEGA,IAEL6E,EAAyBqG,KACvBrG,EAAyBmtD,YAAYhyD,GACrC6E,EAAyBmtD,YAAYD,IAGvC12G,KAAKggF,oBA1FP,KA6FAA,gBAAkB,KAChBhgF,KAAKy2G,iCACDz2G,KAAKu/E,cAAcv/E,KAAKu/E,aAAatkB,mBA/F3C,KAkGA27C,yBAA4B/1D,IAC1B0lC,IAAUvvE,IA9I+B,wBA8IW,CAClD6pC,oBAAqBh1C,YAAoBg1C,GACzC59C,KAAM49C,EAAoB7b,aArG9B,KAyGA6xE,wBAA2Bh2D,IACzB7gD,KAAK42G,yBAAyB/1D,GAC9B7gD,KAAKw2G,2BAA2B31D,EAAqB,CACnDi0D,oBAAoB,KA5GxB,KAgHAgC,0BAA6BjmG,IAC3B,IAAK01E,IAAUllC,IA5J0B,yBA4JiB,OADb,QAMzCklC,IAAUpvE,IAjK2B,yBA+JlB4/F,EAJsB,EAI3Cl2D,oBACA59C,EAL2C,EAK3CA,KAL2C,EAOCjD,KAAKC,MAA3C2G,EAPqC,EAOrCA,QAAS4iD,EAP4B,EAO5BA,yBAEXnD,EAAUgJ,YAAiBpsD,EAAMA,GACrCumD,EAAyBnI,IAAIp+C,IAGzB+zG,EAAyBxtD,EAAyB8F,UACtDjJ,EACAx1C,GAGFrE,YACEwqG,EACAD,EACA,kBACAnwG,GAEFowG,EAAuBzgG,QAAQ8vC,GAE/BrmD,KAAKy2G,kCA1IP,KA6IAQ,uCAAyC,CACvCp2D,EACAhwC,IAEO,CACL,CACEvM,MAAO,aACPsX,MAAO,IAAM5b,KAAKC,MAAM4pD,iBAAiBhJ,IAE3C,CACEt+C,KAAM,aAER,CACE+B,MAAO,SACPsX,MAAO,IAAM5b,KAAKs/E,UAAUz+B,IAE9B,CACEv8C,MAAO,SACPsX,MAAO,IACL5b,KAAKw2G,2BAA2B31D,EAAqB,CACnDi0D,oBAAoB,KAG1B,CACEvyG,KAAM,aAER,CACE+B,MAAO,OACPsX,MAAO,IAAM5b,KAAK42G,yBAAyB/1D,IAE7C,CACEv8C,MAAO,MACPsX,MAAO,IAAM5b,KAAK62G,wBAAwBh2D,IAE5C,CACEv8C,MAAO,QACPqO,QAAS4zE,IAAUllC,IA5NkB,yBA6NrCzlC,MAAO,IAAM5b,KAAK82G,0BAA0BjmG,KAlLlD,KAuLAqmG,2BAA6B,KAAO,MAC1B1tD,EAA6BxpD,KAAKC,MAAlCupD,yBAEFvmD,EAAOosD,YAAiB,aAAcpsD,GAC1CumD,EAAyBnI,IAAIp+C,IAE/BumD,EAAyB8F,UACvBrsD,EACAumD,EAAyB+F,YAE3BvvD,KAAKy2G,kCAGPA,iCACMz2G,KAAKC,MAAM2oD,gBACb5oD,KAAKC,MAAM2oD,eAAegC,wBAC5B5qD,KAAKif,cAGPlf,SAAU,MAAD,EAMHC,KAAKC,MAJP2G,EAFK,EAELA,QACA4iD,EAHK,EAGLA,yBACA7E,EAJK,EAILA,4BACA8E,EALK,EAKLA,4BAEMhlB,EAAezkC,KAAKsB,MAApBmjC,WAEF1e,ECzQoC,EAC5CA,EACA0e,KAEA,IAAKA,EAAY,OAAO1e,EAExB,MAAMu5C,EAAsB76B,EAAW3Q,cAEvC,OAAO/N,EAAK1a,OACTyqG,IAIsC,IAHrCA,EACG9wE,UACAlR,cACApsB,QAAQ43D,KD4PA63C,EChRfnuD,EDiRkCQ,EC/QlC/mB,oBACEumB,EACAnI,GAAuBA,ID8QrBpc,GClRJukB,MDwRE,MAAMi4B,EAAUr6E,EAAQE,IAAM,IAAM0iD,EAAyB1iD,IAE7D,OACE,gBAACyI,EAAA,EAAD,KACE,uBAAKtK,MAAOpC,EAAOu6E,eACjB,gBAAC,IAAD,KACG,EAAG3tE,SAAQ1M,WACV,gBAACmzG,EAAA,EAAD,CACE7xG,IAAK48E,EACLz+E,IAAK+8E,GAAiBv/E,KAAKu/E,aAAeA,EAC1C2B,SAAUn7D,EACVhjB,MAAOA,EACP0M,OAAQA,EACR0mG,aAAcn2G,KAAKk3G,2BACnBd,gBAAiB,gBAAC,QAAD,2BACjBj1B,YAAak1B,EACbj1B,cACEz8B,EACI,CAACA,GACD,GAEN08B,eAAgB53B,EAChB63B,YAAathF,KAAKsB,MAAMi1G,2BACxBh6C,SAAUv8D,KAAKw/E,QACf+B,sBAAuBvhF,KAAK2/E,iBAC5BhkE,kBAAmB3b,KAAKi3G,uCACxBx1B,aAAa,+BAKrB,gBAAC36D,EAAA,EAAD,CACE5kB,MAAOuiC,EACPjd,gBAAiB,OACjBrlB,SAAUX,GACRxB,KAAK2B,SAAS,CACZ8iC,WAAYjjC,QAlQL80G,EAIZrwF,aAAe,CACpByjC,4BAA6B,CAC3B7I,EACAn8B,IACGA,GAAG,GACRilC,4BAA6B,CAC3B9I,EACAwF,EACA3hC,IACGA,GAAG,K,mNE9CZ,MAAM7hB,EAAS,CACbu0G,UAAW,CACTr0G,MAAO,IAETs0G,SAAU,CACRliF,YAAa,EACbC,aAAc,IAIH,MAAMkiF,UAAyBv9F,YAAyB,eAAD,oBACpEzY,MAAQ,CACNi2G,kBAAmB,EACnBC,wBAAyB,EACzBC,QAAQ,EACR3xC,IAAKnpD,KAAKgK,MAAM,EAAI3mB,KAAKC,MAAMy3G,oBALmC,KAQpEC,WAAa,KARuD,KAkBpEC,OAAS,IACP53G,KAAK2B,SAAS,CACZ41G,kBAAmB,EACnBC,wBAAyB,EACzBC,QAAQ,IAtBwD,KAyBpEI,KAAO,IACL73G,KAAK2B,SAAS,CACZ81G,QAAQ,IA3BwD,KA8BpEK,MAAQ,IACN93G,KAAK2B,SAAS,CACZ81G,QAAQ,IAhCwD,KAmCpEM,iBAAmB,KACjB,MADuB,EAGyB/3G,KAAKC,MAA7C+3G,EAHe,EAGfA,iBAAkBN,EAHH,EAGGA,kBAHH,EAIwC13G,KAAKsB,MAGpE,IAAI22G,EAPmB,EAIfV,kBAIJW,EARmB,EAIIV,wBAO3B,GAFAU,GATuB,EAI6BT,OAKpB,EAHZ,EAAI,GALI,EAUxBS,EAAsBR,EAAmB,CAC3C,MAAMh4C,EAAQ/iD,KAAKsb,MAAMigF,EAAsBR,GAC/CO,GAAiBv4C,EACjBw4C,GAA4Cx4C,EAAQg4C,EAChDQ,EAAsB,IAAGA,EAAsB,GAGjDD,GAAiBD,EAAiBphF,oBACpCqhF,EAAgBD,EAAiB9xC,YAC7B+xC,EAAgBD,EAAiBphF,kBACjCohF,EAAiBphF,kBAAoB,GAEvCqhF,EAAgB,IAAGA,EAAgB,GAEvCj4G,KAAK2B,SAAS,CACZ41G,kBAAmBU,EACnBT,wBAAyBU,IAE3Bl4G,KAAK23G,WAAahiB,sBAAsB31F,KAAK+3G,mBAtD/Cz4F,oBACEtf,KAAK23G,WAAahiB,sBAAsB31F,KAAK+3G,kBAG/Ct5D,uBACMz+C,KAAK23G,YAAY9hB,qBAAqB71F,KAAK23G,YAoDjD53G,SAAU,MAAD,EAOHC,KAAKC,MALP+3G,EAFK,EAELA,iBACAjnF,EAHK,EAGLA,gBACAnqB,EAJK,EAILA,QACA8wG,EALK,EAKLA,kBACAS,EANK,EAMLA,0BANK,EAQoCn4G,KAAKsB,MAAxCi2G,EARD,EAQCA,kBAAmBE,EARpB,EAQoBA,OAAQ3xC,EAR5B,EAQ4BA,IAI7BhD,EADJy0C,EAAoBS,EAAiBphF,kBAEnCohF,EAAiBlhF,UAAUygF,GAC3B,KAEJ,OACE,6BACE,kBAACzW,EAAA,EAAD,CACE/4F,aAAc+6D,EAASA,EAAO/rC,eAAiB,GAC/ChG,gBAAiBA,EACjBnqB,QAASA,IAEX,kBAAC,IAAD,CAAMhC,UAAQ,EAACoB,WAAW,UACxB,kBAACg3F,EAAA,EAAD,KACE,kBAAC,QAAD,cAEF,kBAAC,IAAD,MACA,kBAAClC,EAAA,EAAD,CACEtwF,OAAO,OACPtI,MAAO4jE,EACP3jE,SAAU,CAACoI,EAAG/I,KACZ,MAAMskE,EAAM2F,WAAWjqE,GACnBskE,EAAM,IACR9lE,KAAK2B,SAAS,CAAEmkE,QAChBqyC,EAA0B1sC,YAAY,EAAI3F,GAAKzK,QAAQ,KACvDr7D,KAAK43G,WAGT5pE,GAAG,gCACHzrC,KAAK,SACLqyC,KAAM,EACN/3B,IAAK,EACLD,IAAK,IACL3X,MAAOpC,EAAOu0G,UACd7T,WAAW,IAEb,kBAAC,IAAD,CAAOt+F,MAAOpC,EAAOw0G,WACrB,kBAACvc,EAAA,EAAD,CACEtwF,OAAO,OACPtI,MAAOw1G,EACPv1G,SAAU,CAACoI,EAAG/I,KACZ,MAAM42G,EAAO3sC,WAAWjqE,GACpB42G,EAAO,IACTp4G,KAAK2B,SAAS,CAAEmkE,IAAKnpD,KAAKgK,MAAM,EAAIyxF,KACpCD,EAA0BC,GAC1Bp4G,KAAK43G,WAGT5pE,GAAG,gCACHzrC,KAAK,SACLqyC,KAAM,KACNyjE,UAAW,EACXx7F,IAAK,IACLD,IAAK,EACL3X,MAAOpC,EAAOu0G,YAEhB,kBAACzc,EAAA,EAAD,CACEt0F,KAAM,kBAAC,IAAD,MACN/B,MAAO,kBAAC,QAAD,eACPE,QAASxE,KAAK43G,SAEhB,kBAACjd,EAAA,EAAD,CACEt0F,KAAMoxG,EAAS,kBAAC,IAAD,MAAgB,kBAAC,IAAD,MAC/BnzG,MAAOmzG,EAAS,OAAS,QACzBjzG,QAASizG,EAASz3G,KAAK63G,KAAO73G,KAAK83G,W,sDCrK/C,MAAMj1G,EAAS,CACbuM,UAAW,CACT+lB,YAAa,GACbC,aAAc,GACd/lB,QAAS,OACTrJ,WAAY,UAEdoxG,UAAW,CACTr0G,MAAO,IAETs0G,SAAU,CACRliF,YAAa,EACbC,aAAc,GAEhBkjF,gBAAiB,CACfv1G,MAAO,KAETw1G,OAAQ,CACNx1G,MAAO,KAILy1G,EAAcJ,GAAiBK,OAAOL,EAAK/8C,QAAQ,IAgB1C,MAAMq9C,UAAuB3+F,YAAyB,eAAD,oBAClEzY,MAAQ,CACNo2G,kBAAmBc,EAAWx4G,KAAKC,MAAMi4B,UAAU6tC,wBACnD4yC,WAAW,EACXC,aAAa,GAJmD,KAgBlEC,sBAAwB,KAAO,MACrB3gF,EAAcl4B,KAAKC,MAAnBi4B,UAEF4gF,EAAUn8F,KAAKC,IAAI6uD,WAAWzrE,KAAKsB,MAAMo2G,mBAAoB,MAC7DqB,GAAkBC,MAAMF,GAE1BC,GAAgB7gF,EAAUmuC,qBAAqByyC,GACnD94G,KAAK2B,SAAS,CACZ+1G,kBAAmBc,EACjBx4G,KAAKC,MAAMi4B,UAAU6tC,wBAEvB4yC,UAAWI,KA3BmD,KA+BlEE,WAAcC,IACUl5G,KAAKC,MAAnBi4B,UAEEouC,UAAU4yC,GACpBl5G,KAAKif,eAnC2D,KAsClEk6F,YAAev1G,IACb5D,KAAK2B,SAAS,CACZi3G,YAAah1G,IAEVA,GACH5D,KAAK64G,yBApCTzhG,0BAA0BC,GACxBrX,KAAK2B,SAAS,CACZ+1G,kBAAmBc,EACjBx4G,KAAKC,MAAMi4B,UAAU6tC,wBAEvB4yC,WAAW,IAmCf54G,SAAU,MAAD,EAOHC,KAAKC,MALPi4B,EAFK,EAELA,UACAnH,EAHK,EAGLA,gBACAnqB,EAJK,EAILA,QACA2Q,EALK,EAKLA,wBACAqvD,EANK,EAMLA,WAGIwyC,EAA+B7hG,EAAwBlM,OAC3D,EAAG2H,UAAoB,UAATA,GAGhB,OACE,yBAAK/N,MAAOpC,EAAOuM,WACjB,kBAACiiC,EAAA,EAAD,KACGzgC,GACiB,UAAhBA,KACEwoG,EAA6BxzG,QAC7B,kBAAC+0F,EAAA,EAAD,CACEr2F,MAAO80G,EAA6B,GAAG5wB,YACvCniF,KAAM,kBAAC,IAAD,MACN7B,QAAS,IAAMoiE,EAAWwyC,EAA6B,OAK/D,kBAACze,EAAA,EAAD,CACEr2F,MAAO,kBAAC,QAAD,gBACP+B,KAAM,kBAAC,IAAD,MACN7B,QAAS,IAAMxE,KAAKm5G,aAAY,KAElC,kBAAC,IAAD,CAAOl0G,MAAOpC,EAAOw0G,WACrB,kBAACvc,EAAA,EAAD,CACE54F,MAAOlC,KAAKsB,MAAMo2G,kBAClBv1G,SAAU,CAACoI,EAAG/I,IACZxB,KAAK2B,SAAS,CAAE+1G,kBAAmBjsC,WAAWjqE,IAAS,IAEzDc,OAAQ,IAAMtC,KAAK64G,wBACnB7qE,GAAG,gCACHxjC,OAAO,OACPvF,MAAOpC,EAAOu0G,UACd70G,KAAK,SACLqyC,KAAM,KACNyjE,UAAW,EACXx7F,IAAK,IACLD,IAAK,IAEP,0BAAM3X,MAAOpC,EAAO01G,SACpB,yBAAKtzG,MAAOpC,EAAOy1G,iBACjB,kBAACjY,EAAA,EAAD,CACEh2F,QAAS6tB,EAAUguC,YACnB5hE,MAAO,kBAAC,QAAD,aACPgG,QAAS,CAACC,EAAG2uG,IAAUl5G,KAAKi5G,WAAWC,MAG1Cl5G,KAAKsB,MAAMs3G,aACV,kBAACle,EAAA,EAAD,CACEt2F,QACE,kBAACu2F,EAAA,EAAD,CACEr2F,MAAO,kBAAC,QAAD,WACPC,SAAO,EACPC,QAAS,IAAMxE,KAAKm5G,aAAY,GAChC90G,IAAI,OAGRO,UAAQ,EACRF,mBAAmB,EACnBD,eAAgB,IAAMzE,KAAKm5G,aAAY,GACvCv1G,KAAM5D,KAAKsB,MAAMs3G,aAEjB,kBAAC,EAAD,CACEZ,iBAAkB9/E,EAClBnH,gBAAiBA,EACjBnqB,QAASA,EACT8wG,kBAAmB13G,KAAKsB,MAAMo2G,kBAC9BS,0BAA2B32G,GACzBxB,KAAK2B,SAAS,CAAE+1G,kBAAmBl2G,W,wEC5KpC,MAAM63G,UAAqBv5G,YAIxCC,SACE,OACE,qBACEwhB,UAAWuC,IAAW,CACpB,CAAC3V,MAAsB,EACvB,CAACC,KAAoBpO,KAAKC,MAAMkgB,YAGjC,yBAA2BngB,KAAKC,MAAMyC,MAAMkpB,Y,oFCRtC,KACbs1E,WAAY,CACVoY,aAAcD,EACd,sCAAuChvF,IACvC,mCAAoC6iB,IACpC,qCAAsCqB,IACtC,qCAAsCoB,IACtC,oCAAqCO,IACrC,mCAAoCqpE,IACpC,kCAAmC7oE,IACnC,oCAAqCqB,KAEvChyB,kBAAmB,SAASrd,GAC1B,OAAI1C,KAAKkhG,WAAW5+C,eAAe5/C,EAAMkpB,WAChC5rB,KAAKkhG,WAAWx+F,EAAMkpB,WACnB5rB,KAAKkhG,WAAWoY,cAE9BE,cAAe,SAAS5iE,EAAW6iE,GAC5Bz5G,KAAKkhG,WAAW5+C,eAAe1L,GASpC52C,KAAKkhG,WAAWtqD,GAAa6iE,EAR3B7wG,QAAQ8zB,KACN,0CACEka,EACA,wC,8EC7BV,MAAMhuB,EAAKriB,IAAgB,MACrBC,EAAOD,IAAgB,Q,iFCkB7B,MAAMmzG,EAAsB,CAC1BC,sBAAsB,EACtBC,QAAS,CACPjnG,SAAS,IAMb,IAAIknG,GAA+B,EAC/BC,GAA0B,EAEvB,MAAMC,UAAmBj6G,YAA+B,eAAD,oBAC5DwB,MAAQ,CACN04G,aAAc,KACd7sG,MAAO,MAHmD,KAM5D8sG,kBAAqBC,IACdJ,IACHA,GAA0B,EAE1BK,cAAeryG,QAAQsyG,IAEjBA,EAAgBC,WAClBH,EAAO99F,OAAOk+F,YACZF,EAAgBjpG,UAChBipG,EAAgBC,eAfkC,KAsB5DE,uBAAyB,CAACn+F,EAAa89F,KAChCL,IACHA,GAA+B,EAE/BK,EAAOM,UAAUC,WAAWC,mBAAmBC,mBAAmB,CAEhEv0G,OAAQ8zG,EAAOM,UAAUC,WAAWG,aAAaC,IACjDC,sBAAsB,EACtBC,SAAS,EACTC,SAAS,IDxDoBd,KACnC,MAAMe,EAA8BC,GAClCtyF,EAAGuyF,QAAQD,EAAY,CAAC/tG,EAAeiuG,KACjCjuG,EACFvE,QAAQuE,MACN,4DACAA,GAKJiuG,EAAUtzG,QAAQd,IAChB,GAAIA,EAASq0G,SAAS,OAAQ,CAC5B,MAAM1lG,EAAWnP,EAAKwP,KAAKklG,EAAYl0G,GACvC4hB,EAAG0yF,SAAS3lG,EAAU,OAAQ,CAAC4lG,EAAWnoG,KACpCmoG,EACF3yG,QAAQuE,MAAR,yBACoBwI,EADpB,oCAEE4lG,GAKJrB,EAAOM,UAAUC,WAAWC,mBAAmBc,YAC7CpoG,EACAuC,UAOZ8T,qBAAWhU,KAAK,EAAGyU,eACjB,MAAMuxF,EAAcj1G,EAAKwP,KAAKkU,EAAU,WAClCwxF,EAAiBl1G,EAAKwP,KAAKylG,EAAa,cACxCE,EAAiBn1G,EAAKwP,KAAKylG,EAAa,gBAE9CR,EAA2BQ,GAC3BR,EAA2BU,GAC3B/yF,EAAGuyF,QAAQO,EAAgB,CAACvuG,EAAeyuG,KACrCzuG,EACFvE,QAAQuE,MACN,oEACAA,GAKJyuG,EACGvwG,OACCwwG,IACGA,EAAWR,SAAS,UACpBQ,EAAWR,SAAS,SACpBQ,EAAWR,SAAS,eAExBvzG,QAAQ+zG,GACPZ,EAA2Bz0G,EAAKwP,KAAK0lG,EAAgBG,OAI3D3B,EAAOM,UAAUC,WAAWC,mBAAmBc,YAA/C,6+EA+DE,yCCjEAM,CAAqB5B,IAGnBl6G,KAAKC,MAAMgzC,iBAAiBjzC,KAAKC,MAAMgzC,mBApCe,KA8D5D8oE,mBAAsBr5G,IAGpBA,EAAM0c,iBACN1c,EAAMwY,mBA3BRoE,oBACEtf,KAAKg8G,mBAGPC,gBAAgB9uG,GACdnN,KAAK2B,SAAS,CACZwL,UAIJ6uG,mBACEh8G,KAAK2B,SAAS,CACZwL,MAAO,OAET,oCACGsI,KAAK8T,GACJvpB,KAAK2B,SAAS,CACZq4G,aAAczwF,EAAO2yF,WAGxBhkG,MAAMlY,KAAKi8G,iBAUhBl8G,SAAU,MAAD,EACyBC,KAAKsB,MAA7B04G,EADD,EACCA,aACR,OAFO,EACe7sG,MAGlB,gBAAC,WAAD,KACE,gBAAC6vF,EAAA,EAAD,KACE,gBAAC,QAAD,wCAEF,gBAACtV,EAAA,EAAD,CACEpjF,MAAO,gBAAC,QAAD,cACPE,QAASxE,KAAKg8G,oBAMjBhC,EAKH,uBAAKx+F,cAAexb,KAAK+7G,oBACvB,gBAAC7oG,EAAA,EAAmBhS,SAApB,KACG,EAAG2D,YACF,gBAACm1G,EAAD,CACEj3G,MAAO/C,KAAKC,MAAM8C,OAAS,IAC3B0M,OAAO,MACPwB,SAAS,aACTkrG,MAAOt3G,EAAOuM,oBACdlP,MAAOlC,KAAKC,MAAMiC,MAClBC,SAAUnC,KAAKC,MAAMkC,SACrBi6G,gBAAiBp8G,KAAKi6G,kBACtBoC,eAAgBr8G,KAAKu6G,uBACrBnnF,QAASsmF,MAhBV,gBAACzc,EAAA,EAAD,S,sFC/Gb,MAAMp6F,EAAS,CACbuM,UAAW,CACTC,QAAS,OACTC,cAAe,SACfK,KAAM,IAmBK,MAAM2sG,UAAmCx8G,YAItD,qCACEiqC,GAEA,OAAO/nB,iBAAO,EAAG+nB,EAAmBnd,qBAAsB7Y,IAC9Bg2B,EAAmB3c,aAAarZ,GAChCwoG,cACzBlxG,OAAOyoD,GAAaA,GAAWluD,OAGpC7F,SAAU,MAAD,EASHC,KAAKC,MAPP8pC,EAFK,EAELA,mBACAyyE,EAHK,EAGLA,gBACA51G,EAJK,EAILA,QACAgZ,EALK,EAKLA,MACAK,EANK,EAMLA,uBACAC,EAPK,EAOLA,iBACAunB,EARK,EAQLA,0BAGF,IAAKA,EAIH,OAHA7+B,QAAQuE,MACN,oEAEK,KAKT,MAAMwf,EAAkBod,EAAmBnd,qBACrC6Y,EAAa,CACjB7Y,mBAAoB,IAAMD,EAC1BS,aAAcvc,GACL2rG,EAAgB3rG,IAAU,IAIrC,OACE,uBAAK5L,MAAOpC,EAAOuM,WAChB4S,iBAAO,EAAG+nB,EAAmBnd,qBAAsB7Y,IAClD,MAAMoZ,EAAoB4c,EAAmB3c,aAAarZ,GACpDwmC,EAAqB9S,EAA0BkT,sBACnDxtB,EAAkBvB,WAGpB,OAAIuB,EAAkBovF,aAAqB,KAEzC,gBAAChiE,EAAD,CACExQ,mBAAoBA,EACpBtE,WAAYA,EACZtY,kBAAmBA,EACnBN,eAAgB9Y,EAChB7R,MAAOs6G,EAAgBzoG,GACvB5R,SAAUD,GAASlC,KAAKC,MAAMw8G,kBAAkB1oG,EAAG7R,GACnD0E,QAASA,EACTgZ,MAAOA,EACPK,uBAAwBA,EACxBC,iBAAkBA,EAClB7b,IAAK0P,EACL0zB,0BAA2BA,MAM3B,IAFL60E,EAA2BI,8BAC1B3yE,IAEA,gBAACywD,EAAA,EAAD,KACE,gBAAC,QAAD,0C,sDC5FZ,MAAM33F,EAAS,CACb85G,mBAAoB,CAGlBzuE,UAAW,IACXv+B,KAAM,EACNL,cAAe,WAsBJ,MAAMstG,UAAyC7iG,YAG3D,eAAD,oBACAzY,MAAQ,CACNk7G,gBAAiB7b,MACf3gG,KAAKC,MAAM8pC,mBAAmBnd,sBAC9ByQ,KAAK,KAGTt9B,SAAU,MAAD,EAQHC,KAAKC,MANP2G,EAFK,EAELA,QACAgZ,EAHK,EAGLA,MACAK,EAJK,EAILA,uBACAC,EALK,EAKLA,iBACA6pB,EANK,EAMLA,mBACAtC,EAPK,EAOLA,0BAGF,OACE,kBAACizD,EAAA,EAAD,CACEj6F,MAAO,kBAAC,QAAD,wCACPiE,mBAAmB,EACnBd,MAAI,EACJQ,QACE,kBAACu2F,EAAA,EAAD,CACEt2F,IAAI,QACJC,MAAO,kBAAC,QAAD,cACPC,SAAO,EACPC,QAAS,IAAMxE,KAAKC,MAAM48G,OAAO78G,KAAKsB,MAAMk7G,mBAGhD53G,UAAQ,EACRH,eAAgBzE,KAAKC,MAAMwE,gBAE3B,kBAAC,IAAD,KACE,yBAAKQ,MAAOpC,EAAO85G,oBACjB,kBAAC,EAAD,CACE/1G,QAASA,EACTgZ,MAAOA,EACPK,uBAAwBA,EACxBC,iBAAkBA,EAClB6pB,mBAAoBA,EACpByyE,gBAAiBx8G,KAAKsB,MAAMk7G,gBAC5BC,kBAAmB,CAACK,EAAa56G,KAC/BlC,KAAK2B,SAAS,CACZ66G,gBAAiBx8G,KAAKsB,MAAMk7G,gBAAgBj3G,IAC1C,CAACw3G,EAAUlsG,IACTA,IAAUisG,EAAc56G,EAAQ66G,MAIxCt1E,0BAA2BA,U,sPCwCzC,MAAM5kC,EAAS,CACbm6G,gBAAiB,CACf3tG,QAAS,OACTC,cAAe,UAEjB2tG,eAAgB,CACdttG,KAAM,EACNN,QAAS,OACTC,cAAe,MACftJ,WAAY,YAEdvD,MAAO,CACLkN,KAAM,EACN5M,MAAO,QAETm6G,6BAA8B,CAC5BhtG,WAAY,IAEditG,UAAW,CACThoF,YAAa,IAIXioF,EAAgB,CACpB3rD,EACAhvD,EACAkI,KAEA,IAAK8mD,EAAU,GAIb,OAHA7oD,QAAQ6C,IACN,0HAEKd,EAGT,IAAIzI,EAAQO,EAAMytD,SAASuB,EAAU,IACrC,IAAK,IAAI19C,EAAI,EAAGA,EAAI09C,EAAU7rD,SAAUmO,EACtC,GAAI7R,IAAUO,EAAMytD,SAASuB,EAAU19C,IAAK,CACd,qBAAjBpJ,IAA8BzI,EAAQyI,GACjD,MAIJ,OAAOzI,GAGHm7G,EAAgB,CAAC5rD,EAAsBhvD,IACtCgvD,EAAU,GAOXhvD,EAAM2tD,SAAiB3tD,EAAM2tD,SAASqB,EAAU,IAE7ChvD,EAAMQ,MARX2F,QAAQ6C,IACN,4IAEKhJ,EAAMQ,MAQF,MAAMq3F,UAAyBx6F,YAA8B,eAAD,oBACzEw9G,qBAAwB7rD,IAIlBzxD,KAAKC,MAAM2oD,gBACb5oD,KAAKC,MAAM2oD,eAAegC,wBACxB5qD,KAAKC,MAAMs9G,oBACbv9G,KAAKC,MAAMs9G,oBAAoB9rD,GAC5BzxD,KAAKif,eAT6D,KAYzEu+F,qBAAuB,CAAC/rD,EAAsBhvD,KAAgC,MACpE83F,EAA+Bv6F,KAAKC,MAApCs6F,2BACR,IAAK9oC,EAAU,GAIb,YAHA7oD,QAAQ6C,IACN,kJAKJ,MAAMgyG,EAA8B,GAQpC,OAPIh7G,EAAMgsB,gBACRgvF,EAAa7yG,KAAKnI,EAAMgsB,eAAegjC,EAAU,KAC/C8oC,GAA8B93F,EAAMw2F,qBACtCwkB,EAAa7yG,KACX2vF,EAA2B93F,EAAMw2F,oBAAoBxnC,EAAU,MAG5DgsD,EAAaznG,KAAK,YAASlL,GA7BqC,KAgCzE4yG,kBAAqBj7G,IACnB,GAAmB,wCAAfA,EAAMQ,KAAgD,OAAO,KAEjE,GAAwB,YAApBR,EAAMw2D,UAAyB,CAAC,MAC1B9I,EAAa1tD,EAAb0tD,SACFjtD,EAAclD,KAAKw9G,qBACvBx9G,KAAKC,MAAMwxD,UACXhvD,GAGF,OACE,gBAAC,IAAD,CACE6B,MACGpB,EAGC,gBAAC,WAAD,KACGm6G,EAAcr9G,KAAKC,MAAMwxD,UAAWhvD,GAAQ,IAC7C,gBAAC,IAAD,CAAgBwC,MAAO,CAAEoK,QAAS,WAChC,gBAAC,IAAD,CAAc9B,OAAQrK,MAL1Bm6G,EAAcr9G,KAAKC,MAAMwxD,UAAWhvD,GAUxC4B,IAAK5B,EAAMQ,KACXoH,QAAS+yG,EAAcp9G,KAAKC,MAAMwxD,UAAWhvD,GAC7C6H,QAAS,CAAC5H,EAAOC,KACf3C,KAAKC,MAAMwxD,UAAU3pD,QAAQiM,GAAKo8C,EAASp8C,IAAKpR,IAChD3C,KAAKs9G,qBAAqBt9G,KAAKC,MAAMwxD,YAEvCnxD,SAAUmC,EAAMnC,WAGf,GAAwB,WAApBmC,EAAMw2D,UAAwB,CAAC,MAChC9I,EAAa1tD,EAAb0tD,SACR,OACE,gBAAC,IAAD,CACEjuD,MAAOk7G,EAAcp9G,KAAKC,MAAMwxD,UAAWhvD,GAC3C4B,IAAK5B,EAAMQ,KACX+qC,GAAIvrC,EAAMQ,KACVwK,kBAAmB4vG,EAAcr9G,KAAKC,MAAMwxD,UAAWhvD,GACvDksD,oBAAkB,EAClBrhD,mBAAoBtN,KAAKw9G,qBACvBx9G,KAAKC,MAAMwxD,UACXhvD,GAEFN,SAAUQ,IACR3C,KAAKC,MAAMwxD,UAAU3pD,QAAQiM,GAC3Bo8C,EAASp8C,EAAG03D,WAAW9oE,IAAa,IAEtC3C,KAAKs9G,qBAAqBt9G,KAAKC,MAAMwxD,YAEvClvD,KAAK,SACL0C,MAAOpC,EAAOJ,MACdnC,SAAUmC,EAAMnC,WAGf,GAAwB,UAApBmC,EAAMw2D,UAAuB,CAAC,MAC/B9I,EAAa1tD,EAAb0tD,SACR,OACE,gBAAC,IAAD,CACE9rD,IAAK5B,EAAMQ,KACX+qC,GAAIvrC,EAAMQ,KACVwK,kBAAmB4vG,EAAcr9G,KAAKC,MAAMwxD,UAAWhvD,GACvD6K,mBAAoBtN,KAAKw9G,qBACvBx9G,KAAKC,MAAMwxD,UACXhvD,GAEF6pC,cAAY,EACZ5hC,WAAS,EACT+I,MAAOkqG,YAAcP,EAAcp9G,KAAKC,MAAMwxD,UAAWhvD,IACzD8pC,iBAAkB94B,IAChBzT,KAAKC,MAAMwxD,UAAU3pD,QAAQiM,GAC3Bo8C,EAASp8C,EAAGN,EAAMmqG,KAAO,YAE3B59G,KAAKs9G,qBAAqBt9G,KAAKC,MAAMwxD,cAItC,GAAwB,aAApBhvD,EAAMw2D,UAA0B,CAAC,MAClC9I,EAAa1tD,EAAb0tD,SACR,OACE,gBAAC,IAAD,CACE9rD,IAAK5B,EAAMQ,KACX+qC,GAAIvrC,EAAMQ,KACVd,SAAUX,IACRxB,KAAKC,MAAMwxD,UAAU3pD,QAAQiM,GAAKo8C,EAASp8C,EAAGvS,GAAQ,KACtDxB,KAAKs9G,qBAAqBt9G,KAAKC,MAAMwxD,YAEvCvvD,MAAOk7G,EAAcp9G,KAAKC,MAAMwxD,UAAWhvD,GAC3CgL,kBAAmB4vG,EAAcr9G,KAAKC,MAAMwxD,UAAWhvD,GACvDksD,oBAAkB,EAClBrhD,mBAAoBtN,KAAKw9G,qBACvBx9G,KAAKC,MAAMwxD,UACXhvD,GAEFuI,WAAS,EACT/F,MAAOpC,EAAOJ,QAGb,CAAC,MACEy2D,EAAgCz2D,EAAhCy2D,kBAAmB/I,EAAa1tD,EAAb0tD,SAC3B,OACE,gBAAC,IAAD,CACE9rD,IAAK5B,EAAMQ,KACXuN,gBAAiB,IACf,gBAAC,IAAD,CACEtO,MAAOk7G,EACLp9G,KAAKC,MAAMwxD,UACXhvD,EACA,qBAEFurC,GAAIvrC,EAAMQ,KACVwK,kBAAmB4vG,EAAcr9G,KAAKC,MAAMwxD,UAAWhvD,GACvDksD,oBAAkB,EAClBrhD,mBAAoBtN,KAAKw9G,qBACvBx9G,KAAKC,MAAMwxD,UACXhvD,GAEFN,SAAUQ,IACR3C,KAAKC,MAAMwxD,UAAU3pD,QAAQiM,GAAKo8C,EAASp8C,EAAGpR,GAAY,KAC1D3C,KAAKs9G,qBAAqBt9G,KAAKC,MAAMwxD,YAEvCxsD,MAAOpC,EAAOJ,MACdnC,SAAUmC,EAAMnC,WAGpBmQ,aAAcxL,GACZi0D,EACE,gBAAC,IAAD,CACEj0D,MAAOA,EACPV,SAAO,EACPjE,SAA0C,IAAhCN,KAAKC,MAAMwxD,UAAU7rD,OAC/BS,KAAM,gBAAC,IAAD,MACN/B,MAAO,gBAAC,QAAD,aACPE,QAAS,IAAM00D,EAAkBl5D,KAAKC,MAAMwxD,UAAU,MAEtD,SAzK2D,KAgLzEosD,mBAAsBp7G,IACpB,IAAKA,EAAMumC,aAAevmC,EAAMytD,SAAU,OAE1C,MAAM9uD,EAAWqB,EACdumC,aACAzjC,IAAI,EAAGrD,QAAOoC,WACb,gBAAC,IAAD,CAAcD,IAAKnC,EAAOA,MAAOA,EAAOuD,YAAanB,KAGzD,GAAwB,WAApB7B,EAAMw2D,UAAwB,CAAC,MACzB9I,EAAa1tD,EAAb0tD,SACR,OACE,gBAAC,IAAD,CACEjuD,MAAOk7G,EAAcp9G,KAAKC,MAAMwxD,UAAWhvD,GAC3C4B,IAAK5B,EAAMQ,KACXwK,kBAAmB4vG,EAAcr9G,KAAKC,MAAMwxD,UAAWhvD,GACvD6K,mBAAoBtN,KAAKw9G,qBACvBx9G,KAAKC,MAAMwxD,UACXhvD,GAEFN,SAAU,CAACO,EAAOmO,EAAOlO,KACvB3C,KAAKC,MAAMwxD,UAAU3pD,QAAQiM,GAC3Bo8C,EAASp8C,EAAG03D,WAAW9oE,IAAa,IAEtC3C,KAAKs9G,qBAAqBt9G,KAAKC,MAAMwxD,YAEvCxsD,MAAOpC,EAAOJ,MACdnC,SAAUmC,EAAMnC,UAEfc,GAGA,GAAwB,WAApBqB,EAAMw2D,UAAwB,CAAC,MAChC9I,EAAa1tD,EAAb0tD,SACR,OACE,gBAAC,IAAD,CACEjuD,MAAOk7G,EACLp9G,KAAKC,MAAMwxD,UACXhvD,EACA,qBAEF4B,IAAK5B,EAAMQ,KACXwK,kBAAmB4vG,EAAcr9G,KAAKC,MAAMwxD,UAAWhvD,GACvD6K,mBAAoBtN,KAAKw9G,qBACvBx9G,KAAKC,MAAMwxD,UACXhvD,GAEFN,SAAU,CAACO,EAAOmO,EAAOlO,KACvB3C,KAAKC,MAAMwxD,UAAU3pD,QAAQiM,GAAKo8C,EAASp8C,EAAGpR,GAAY,KAC1D3C,KAAKs9G,qBAAqBt9G,KAAKC,MAAMwxD,YAEvCxsD,MAAOpC,EAAOJ,MACdnC,SAAUmC,EAAMnC,UAEfc,KAtOgE,KA4OzE+qF,cAAiB1pF,GAGb,gBAAC,IAAD,CACE4B,IAAK5B,EAAMQ,KACXyH,WAAS,EACTnG,SAAO,EACPD,MAAO+4G,EAAcr9G,KAAKC,MAAMwxD,UAAWhvD,GAC3C+B,QAAS,KACH/B,EAAM+B,SAAS/B,EAAM+B,QAAQxE,KAAKC,MAAMwxD,UAAU,OArPW,KA2PzEqsD,qBAAwBr7G,IACtB,IAAKzC,KAAKC,MAAM2G,QAId,YAHAgC,QAAQuE,MACN,mMAH2C,MAQvCgjD,EAAa1tD,EAAb0tD,SACR,OACE,gBAAC,IAAD,CACE9rD,IAAK5B,EAAMQ,KACX2D,QAAS5G,KAAKC,MAAM2G,QACpB0O,gBAAiBtV,KAAKC,MAAMqV,gBAC5BC,iBAAkBvV,KAAKC,MAAMsV,iBAC7BgC,wBAAyBvX,KAAKC,MAAMsX,wBACpCwZ,gBAAiBtpB,IACjBgQ,aAAchV,EAAMgV,aACpB/M,WAAS,EACT8gC,oBAAqB4xE,EACnBp9G,KAAKC,MAAMwxD,UACXhvD,EACA,qBAEFN,SAAUQ,IACR3C,KAAKC,MAAMwxD,UAAU3pD,QAAQiM,GAAKo8C,EAASp8C,EAAGpR,IAC9C3C,KAAKs9G,qBAAqBt9G,KAAKC,MAAMwxD,YAEvChkD,kBAAmB4vG,EAAcr9G,KAAKC,MAAMwxD,UAAWhvD,GACvD6K,mBAAoBtN,KAAKw9G,qBACvBx9G,KAAKC,MAAMwxD,UACXhvD,MAMR1C,SAUE,OANW,QAHMC,KAAKC,MAAd2jG,KAIDma,GACC,gBAAC,IAAD,KAA4BA,GAE7BA,GAAuB,gBAAC,IAAD,CAAQn5G,UAAQ,GAAEm5G,IAG9C/9G,KAAKC,MAAM+4D,OAAOzzD,IAAI9C,GAChBA,EAAMrB,SACW,QAAfqB,EAAMF,KAEN,gBAAC,IAAsBrB,SAAvB,CAAgCmD,IAAK5B,EAAMQ,MACxC2lD,GACC,gBAAC0xC,EAAD,CACEthC,OAAQv2D,EAAMrB,SACdqwD,UAAWzxD,KAAKC,MAAMwxD,UACtBmyC,KAAK,MACLh7C,eAAgBA,KAQxB,uBAAKvkD,IAAK5B,EAAMQ,MACd,gBAAC,IAAD,KAAYR,EAAMQ,MAClB,uBAAKgC,MAAOpC,EAAOq6G,8BACjB,gBAAC5iB,EAAD,CACEthC,OAAQv2D,EAAMrB,SACdqwD,UAAWzxD,KAAKC,MAAMwxD,UACtBmyC,KAAK,aAKgB,aAApBnhG,EAAMw2D,UACRj5D,KAAK89G,qBAAqBr7G,GAE7BA,EAAMumC,YAAcvmC,EAAMytD,SACrBlwD,KAAK69G,mBAAmBp7G,GAC7BA,EAAMytD,SAAiBlwD,KAAK09G,kBAAkBj7G,GAC9CA,EAAM+B,QAAgBxE,KAAKmsF,cAAc1pF,GAGxC,U,iCC9gBf,sGAIO,MAAMqsC,EAAW,CAAC/C,EAAWE,EAAWC,IAC7C,KAAO,GAAK,KAAOH,GAAK,KAAOE,GAAK,GAAKC,GAAG8zD,SAAS,IAAIp9E,MAAM,GAIpDqb,EAAiB,CAAC8N,EAAWE,EAAWC,KAClDH,GAAK,KAAOE,GAAK,GAAKC,EAKZyxE,EAAiBC,IAC5B,MAAMI,EAAYhyE,SAAS4xE,EAAI98G,QAAQ,IAAK,IAAK,IACjD,MAAO,CACLirC,EAAIiyE,GAAa,GAAM,IACvB/xE,EAAI+xE,GAAa,EAAK,IACtB9xE,EAAe,IAAZ8xE,EACH7xE,EAAG,O,iCCrBP,0KAKO,MAAM8xE,EAAY,CAACC,EAAYC,IAC7BD,EAAK7yG,OAAO+yG,GAAeA,IAAgBD,GAgBvC91F,EAAwB,EACnCg2F,aACAC,aACA55E,eACAviC,WACAo8G,aACAC,oBAEA,MAAMC,EAAUH,IACVI,EACJH,GAAcC,EACV,CACE,CACEj8G,KAAM,aAER,CACE+B,MAAOk6G,EACP5iG,MAAO2iG,IAGX,GAEN,OAAKE,EAAQ74G,OAUN64G,EACJl5G,IAAI44G,IAAG,CACN57G,KAAM,WACN+B,MAAO65G,EACP9zG,QAASq6B,EAAa8R,SAAS2nE,GAC/BviG,MAAO,KAlDU,IAACsiG,EAAYS,EAmDxBj6E,EAAa8R,SAAS2nE,GACxBh8G,EAAS87G,EAAUv5E,EAAcy5E,IAEjCh8G,GAtDc+7G,EAsDGx5E,EAtDSi6E,EAsDK,CAACR,GArDjCxd,MAAMie,KAAK,IAAIC,IAAI,IAAIX,KAASS,WAyDpCxkD,OAAOukD,GAtBD,CACL,CACEp6G,MAAO+5G,EACP1rG,SAAS,MAER+rG,IAoBII,EAAqBC,GACN,KAAtBA,EAAW53F,OAAsB,GAE9B43F,EAAWjzE,MAAM,KAAKvmC,IAAI44G,GAAOA,EAAIh3F,QAGjC63F,EAAqBd,GACzBA,EAAKloG,KAAK,MAGNwpD,EAAmB,CAACu/C,EAAoBb,KAAgB,IAAD,uBAClE,YAAkBA,EAAlB,+CAAwB,CAAC,MAAdC,EAAa,QACtB,IAAiC,IAA7BY,EAAWr3G,QAAQy2G,GAAa,OAAO,GAFqB,kFAKlE,OAAO,I,iCChFT,4MAIO,MAAMc,EAA6Bh0D,GAAD,2BACnBA,EAAiBhmB,MAAMD,UADJ,YAErCimB,EAAiBr/C,OAAS,UAAY,IAE7BszG,EAAwB1gD,GAAD,qBACpBA,EAAkBjzD,OAAOy5B,UADL,YAEhCw5B,EAAkB5yD,OAAS,UAAY,IAE9BuzG,EACXC,GADiD,uCAEdA,GAExBC,EACXj0F,GADuC,0BAEjBA,EAAYk0F,cAFK,YAEYl0F,EAAY7oB,MACpDg9G,EAA+BvqE,GAAD,4BACpBA,GAEVwqE,EAA2B5M,GAAD,wBACpBA,I,kCC5BnB,uPAaA,MAAMjnG,EAAKC,EAAOD,GAmBZ8zG,EAAcx8G,GACXswC,YAAkBtwC,EAAM,IAAK,IAIhCy8G,EAA+B,CACnC/sE,EACAgtE,IAEOA,EAAsB,KAAOF,EAAW9sE,EAAe3N,WAcnD46E,EAAuC,CAClDh5G,EACAi5G,EACAt/G,IAEOsV,QAAQC,IAKbkM,iBAAO,EAAGpb,EAAQ6jG,oCAAqC12F,GAC9C+rG,EACLl5G,EACAA,EAAQm5G,8BAA8BhsG,GACtC,CAAEisG,oBAAoB,EAAMH,2BAA0Bt/G,WAG1DkV,KAAK,IACLI,QAAQC,IAENkM,iBAAO,EAAGpb,EAAQ6jG,oCAAqC12F,GAC9C+rG,EACLl5G,EACAA,EAAQm5G,8BAA8BhsG,GACtC,CACEisG,oBAAoB,EACpBH,2BACAt/G,YAQNu/G,EAAsC,CAC1Cl5G,EACA2X,EACA6U,IAEO6sF,EACLr5G,EACA2X,EACA6U,GACA3d,KAAKwpD,IACLtzD,EAAGggB,WAAWxU,MAAM+oG,gBAAgBjhD,GACpCA,EAAU3yD,WAkCR2zG,EAAkC,CACtCr5G,EACA2X,EACA6U,KAEA,MAAM6rC,EAAY,IAAItzD,EAAGw0G,kBACzBC,YAAiBnhD,EAAW1gD,GAE5B,MAAMohG,EACJ,iBAAmBF,EAAWlhG,EAAyBymB,WAQnDq7E,EAAwB,CAC5BV,sBACAW,sBA7C6B,EAC/B15G,EACA2X,EACA6U,EACAusF,IAEO39F,iBAAO,EAAGzD,EAAyBwwC,0BAA2Bh7C,IACnE,MAAM4+B,EAAiBp0B,EAAyBy3F,oBAAoBjiG,GAEpE,GAAI0yC,YAAmC9T,EAAe3N,WAAY,CAChE,MAIM0b,EAJgBg/D,EACpB/sE,EACAgtE,GAEmC,QAErC,OAAOvsF,EAAQysF,yBAAyBU,kBAAkB7/D,GAG5D,OAAO,OACNr1C,OAAO4N,SAiBoBunG,CAC5B55G,EACA2X,EACA6U,EACAusF,IAOF,OAAO9pG,QAAQC,IAEb2sB,oBACElkB,EAAyBonC,0BACzB9E,GAmHN,SACEj6C,EACAq4D,EACA1gD,EACAsiC,EACAztB,EACAitF,GAEA,MAAM9+D,EAAmBk/D,YACvBxhD,EACApe,GAGImI,EAA2BnI,EAAoBgF,qBAC/C66D,EArPiC,EACvC7/D,EACA8+D,IAEOA,EAAsB,KAAOF,EAAW5+D,EAAoB7b,WAiP7C27E,CACpB9/D,EACAw/D,EAAsBV,qBAElBiB,EAAcxtF,EAAQysF,yBAAyBU,kBACnDG,GAUF,OAPAn/D,EAAiBs/D,eAAeD,GAGhCP,EAAsBC,sBAAsBx4G,QAAQ84G,IAClDr/D,EAAiBu/D,eAAeF,KAG3B/qG,QAAQlN,UAAU8M,KAAK,KAC5B,MAAMsrG,EAA6B,IAAIp1G,EAAGq1G,gBAuC1C,GApCAC,YACE7tF,EAAQ7yB,KACRghD,EACAV,GAIF7+B,iBAAO,EAAGgnC,EAAyB+F,0BAA2Bh7C,IAC5D,MAAM4+B,EAAiBqW,EAAyBgtD,oBAAoBjiG,GAE9DmtG,EAA4BzB,EAAW9sE,EAAe3N,WAC5D+7E,EAA2B/pG,IACzB27B,EAAe3N,UACfk8E,GAGF,MAAMC,EAA0BC,YAC9B7/D,EACAV,EACAlO,GAEF0uE,YAAgC1uE,EAAgBwuE,GAI5Ct6D,YAAkClU,EAAe3N,YACnDm8E,EAAwBlxD,YAGGkxD,EAAwBG,0BAElDT,eAAeD,GACfW,gBAAgBL,KAIhB9tF,EAAQ4sF,mBAqCX,OADAe,EAA2Bz0G,SACpBuJ,QAAQlN,UArCgB,CAC/B,MAAM64G,EAAe,IAAI71G,EAAG81G,UACtBC,EAAwB,IAAI/1G,EAAGg2G,sBAAsB/6G,GACrD2+E,EAAOm8B,EAAsBE,oCACjCrjG,EAAyBymB,UACzB6b,EACA6/D,EACAK,EACAS,GAKA,GAiBF,OAfAE,EAAsBp1G,SACtBy0G,EAA2Bz0G,SAK3Bk1G,EACG/lE,oBACApW,YACAv9B,QAAS84G,IACRr/D,EAAiBu/D,eAAeF,KAGpCY,EAAal1G,SAEN8mB,EAAQysF,yBAAyBgC,kBACtCnB,EACAn7B,MAvNOu8B,CACLl7G,EACAq4D,EACA1gD,EACAsiC,EACAztB,EACAitF,KAKL5qG,KAAK,IAEJI,QAAQC,IACNkM,iBAAO,EAAGzD,EAAyBwwC,0BAA2Bh7C,IAC5D,MAAM4+B,EAAiBp0B,EAAyBy3F,oBAC9CjiG,GAEFguG,EACEn7G,EACAq4D,EACA1gD,EACAo0B,EACAvf,EACAitF,OAKP5qG,KAAK,IAAMwpD,IAGV8iD,EAAuB,CAC3Bn7G,EACAo7G,EACAC,EAGAtvE,EACAvf,EACAitF,KAEA,MAAMc,EAA0Be,YAC9BF,EACAC,EACAtvE,GAGFwuE,EAAwBgB,qBAAqB,eAAgB,IAC7Dd,YAAgC1uE,EAAgBwuE,GAI5C16D,YAAmC9T,EAAe3N,YACpDm8E,EAAwBlxD,YAG1B,MAAMywD,EAAgBhB,EACpB/sE,EACA0tE,EAAsBV,qBAElBj/D,EAAeggE,EAAgB,QAE/B0B,EAAuBjB,EAAwBG,0BAYrD,GAXAc,EACGvB,eACCztF,EAAQysF,yBAAyBU,kBAAkB7/D,IAEpD6gE,gBAAgB7gE,GAGnB2/D,EAAsBC,sBAAsBx4G,QAAQ84G,IAClDwB,EAAqBtB,eAAeF,MAGjCxtF,EAAQ4sF,mBAAoB,CAC/B,MAAMwB,EAAe,IAAI71G,EAAG81G,UAItBl8B,EAHwC,IAAI55E,EAAG02G,sCACnDz7G,GAEiD07G,uCACjD3vE,EACA+tE,EACAc,GAIA,GAeF,OATAA,EACG/lE,oBACApW,YACAv9B,QAAS84G,IACRwB,EAAqBtB,eAAeF,KAGxCY,EAAal1G,SAEN8mB,EAAQysF,yBAAyB0C,kBACtC7hE,EACA6kC,KA4HC,MAAMi9B,EACX57G,GAEOiP,QAAQC,IACbkM,iBAAO,EAAGpb,EAAQ6jG,oCAAqC12F,IACrDpI,EAAGggB,WAAWxU,MAAMsrG,gBAClB77G,EAAQm5G,8BAA8BhsG,GAAGixB,cAUpC09E,EACXvB,IAEA,MAAMx0F,EAAkBw0F,EAAwBv0F,qBAChD,QAAID,GAAmB,IAIrB,0BADAw0F,EAAwB/zF,aAAaT,EAAkB,GAAGf,WASjD+2F,EAA2BpgH,IACtC,MAAMqgH,EAAQrgH,EAAKupC,MAAM,MACzB,OAAK82E,EAAMh9G,OAOJ,CACL3C,KAAM2/G,EAAMA,EAAMh9G,OAAS,GAC3Bs9B,aAAc0/E,EAAMh9G,OAAS,EAAIg9G,EAAM,QAAK93G,EAC5C80C,cAAegjE,EAAM,IATd,CACL3/G,KAAM,GACNigC,aAAc,GACd0c,cAAe,KAcRijE,EAA4B,CACvCjjE,EACAjN,IAEOiN,EAAgB,KAAOjN,EAAe3N,UAQlC89E,EACXC,GAEOA,EACH,EACA,I,kDC5cN,wFAaO,MAAM7rE,EAAUp3C,OACrB,EAAGsB,cACD,gBAAC,IAAD,KACGoS,GACC,uBACEvO,MAAO,CACLwT,gBAAiBjF,EAAS+hB,QAAQ9c,gBAClChE,QAAS,EACT3E,WAAY,EACZT,QAAS,OACThK,eAAgB,gBAChBkV,UAAW,OACX2/C,UAAW,WAGZ94D,KAOL4hH,EAAoB,CACxB3zG,QAAS,OACTrJ,WAAY,UAGDi9G,EAAenjH,OAC1B,EAAGsB,cACD,wBAAM6D,MAAO+9G,GAAoB5hH,K,iCC1CrC,oBAIA,MAAM8hH,EAAuBpjH,gBAC3BqjH,IAAahiH,eAGA+hH,O,iCCTf,6BAGejjH,OAEX,kBAAC,IAAD,KACGuT,GACC,0BACEvO,MAAO,CACLwK,OAAQ,GACRS,WAAY,EACZiD,YAAa,EACbiwG,gBAAiB,QACjBC,gBAAiB,EACjBt1E,YAAav6B,EAAS+hB,QAAQ6vE,oB,sFCL1C,MAMMke,EAAwBxjH,gBANO,CACnCgZ,mBAAmB,EACnByqG,mBAAoB,OACpB34D,sBAAuB,SAKV04D,MAUR,MAAME,UAAsC1jH,YAGhD,eAAD,oBACAwB,MAAQ,CAAEwX,mBAAmB,GAD7B,KAEA8xC,sBAAwB,KACjB5qD,KAAKsB,MAAMwX,mBACd9Y,KAAK2B,SAAS,CAAEmX,mBAAmB,KAJvC,KAOAyqG,mBAAqB,KACfvjH,KAAKsB,MAAMwX,mBACb9Y,KAAK2B,SAAS,CAAEmX,mBAAmB,KAGvC/Y,SACE,MAAM6oD,EAA8B,eAC/B5oD,KAAKsB,MAD0B,CAElCspD,sBAAuB5qD,KAAK4qD,sBAC5B24D,mBAAoBvjH,KAAKujH,qBAG3B,OACE,gBAACD,EAAsBG,SAAvB,CAAgCvhH,MAAO0mD,GACpC5oD,KAAKC,MAAMmB,a,iCClDpB,iEAqBe,MAAMsiH,UAAe5jH,YAClCC,SACE,OACE,gBAAC,IAAD,CACE+U,QACE,gBAAC,IAAD,CACEzK,QAASrK,KAAKC,MAAM0jH,QACpBxhH,SAAUO,GAAS1C,KAAKC,MAAM2jH,SAASlhH,EAAOA,EAAM0D,OAAOiE,SAC3DoJ,MAAM,YAGVnP,MAAOtE,KAAKC,MAAMqE,MAClBhE,SAAUN,KAAKC,MAAMK,SACrB2E,MAAOjF,KAAKC,MAAMgF,W,iCClC1B,6CAqBO,MAAM4+G,EAAqB,CAChCjmB,eAAe,EACfd,QAAS,KACTQ,aAAc,KACdJ,OAAQ,KACR4mB,OAAQ,KACRhmB,SAAU,OACVI,QAAS,OACTC,gBAAiB,OACjBN,qBAAsB,OACtBt6C,uBAAwB,IAAM1tC,QAAQ6T,OAAO,IAAIC,MAAM,mBAGnD+zE,EAAqB59F,gBAAiC+jH,GAE7CnmB,O,iCCpCf,qBAGA,MAAM76F,EAAS,CACbkhH,SAAU,CAAE5wG,YAAa,EAAGoB,cAAe,WAG9B,MACbnT,WACAswG,eAKA,4BACGA,GAAa,gBAAC,IAAD,CAAkBh9F,KAAM,GAAIzP,MAAOpC,EAAOkhH,WACvD3iH,I,iCChBL,WAiBA,MAAM4iH,EAAe,CACnB1Y,+BAAgC,KAChCsU,qCAAsC,IACpC/pG,QAAQ6T,OAAO,IAAIC,MAAM,mBAC3B64F,uCAAwC,OACxCyB,uCAAwC,IACtCpuG,QAAQ6T,OAAO,IAAIC,MAAM,mBAC3B0jC,kCAAmC,IAAM,KACzC22C,kCAAmC,IAAM,MAGrCF,EAAmChkG,gBACvCkkH,GAGalgB,O,oGCCf,MAAMjhG,EAAS,CACb4Q,MAAO,CACL1Q,MAAO,OACP0M,OAAQ,OACRy0G,aAAc,MACd9vG,UAAW,SACXyF,SAAU,QAEZsqG,OAAQ,CACN1vG,QAAS,MACT2vG,WAAY,OACZF,aAAc,MACdG,UAAW,2BACXh1G,QAAS,eACT0b,OAAQ,WAEVu5F,QAAS,CAIP5rG,O,OAAQqZ,EAAU7xB,QAAU,MAIhC,MAAM66F,UAAoBj7F,YAA+B,eAAD,oBACtDykH,QAAUzkH,cAD4C,KAEtDwB,MAAQ,CACNkjH,oBAAoB,GAHgC,KAMtD5gH,KAAO,KACL5D,KAAK2B,SAAS,CAAE6iH,oBAAoB,KAPgB,KAUtDC,YAAc,KACZzkH,KAAK2B,SAAS,CAAE6iH,oBAAqBxkH,KAAKsB,MAAMkjH,sBAXI,KActDE,YAAc,KACZ1kH,KAAK2B,SAAS,CAAE6iH,oBAAoB,KAGtCzkH,SAAU,MAAD,EACiCC,KAAKC,MAArCgF,EADD,EACCA,MAAOwO,EADR,EACQA,MAAUrT,EADlB,iCAGDukH,EAAiBlxG,GAEnB,CACEs4B,EAAG,IACHE,EAAG,IACHC,EAAG,IACHC,EAAG,GAGT,OACE,uBAAKlnC,MAAOA,GACV,uBACEA,MAAOpC,EAAOshH,OACd3/G,QAASxE,KAAKykH,YACdjiH,IAAKxC,KAAKukH,SAEV,uBACEt/G,MAAK,eACApC,EAAO4Q,MADP,CAEH2wG,WAAW,QAAD,OAAUO,EAAe54E,EAAzB,aAA+B44E,EAAe14E,EAA9C,aACR04E,EAAez4E,EADP,aAELy4E,EAAex4E,GAAK,EAFf,QAKX14B,EAAQ,KAAO,MAGnBzT,KAAKsB,MAAMkjH,oBAAsBxkH,KAAKukH,QAAQz3G,QAC7C,gBAAC,IAAD,CAAmB83G,YAAa5kH,KAAK0kH,aACnC,gBAAC,IAAD,CACE9gH,MAAI,EACJ4kC,SAAUxoC,KAAKukH,QAAQz3G,QACvB7H,MAAOpC,EAAOyhH,QACdvjH,UAAU,UAEV,gBAAC,eAAD,eAAc0S,MAAOkxG,GAAoBvkH,MAG3C,OAMG26F,O,iCC1Hf,YAUe,KACb5rC,EACA4nB,EACA8tC,KAMA,MAAMC,EAAgB31D,EAAWjT,OAqJjC,OApJuBl6B,iBAAO,EAAG8iG,EAAcpwG,OAAQX,IACrD,MAAM9Q,EAAO6hH,EAAc7mE,GAAGlqC,GACxB+7C,EAAWX,EAAWh4C,IAAIlU,GAC1B+1F,EAAsBlpC,EAASrhC,iBAC/BwqC,EAAYnJ,EAASlkC,UAAUkI,cAC/Bs8B,EAAY1gC,IAChB,MAAMwwE,EAAenpB,EAAcrnD,GAChCvY,IAAIlU,GACJmtD,WACH,OAAI8vC,GAEFj9F,EAAK8hH,OAAO,GAAG93F,cACfhqB,EACG2f,MAAM,GACNkpB,MAAM,aACN91B,KAAK,MAGNyY,EAAiB,IAAMuqE,EAE7B,GAAIlpC,EAASE,WAAY,OAAO,KAEhC,GAAkB,WAAdiJ,EACF,MAAO,CACLh2D,OACAg2D,YACA/I,SAAWxgC,GACF+7C,WACLsL,EAAcrnD,GACXvY,IAAIlU,GACJitD,YAGPC,SAAU,CAACzgC,EAAoB/sB,KAC7BkiH,EAAiBn1F,EAAUzsB,EAAM,GAAKN,IAExCytD,WACA3hC,kBAEG,GAAkB,WAAdwqC,GAAwC,KAAdA,EACnC,MAAO,CACLh2D,OACAg2D,UAAW,SACX/I,SAAWxgC,GACFqnD,EAAcrnD,GAClBvY,IAAIlU,GACJitD,WAELC,SAAU,CAACzgC,EAAoB/sB,KAC7BkiH,EAAiBn1F,EAAUzsB,EAAMN,IAEnCytD,WACA3hC,kBAEG,GAAkB,YAAdwqC,EACT,MAAO,CACLh2D,OACAg2D,YACA/I,SAAWxgC,GAIW,SAFlBqnD,EAAcrnD,GACXvY,IAAIlU,GACJitD,WAGPC,SAAU,CAACzgC,EAAoB/sB,KAC7BkiH,EAAiBn1F,EAAUzsB,EAAMN,EAAW,IAAM,MAEpDytD,WACA3hC,kBAEG,GAAkB,WAAdwqC,EAAwB,CAEjC,MAAMkD,EAAUrM,EACb7mB,eACA5D,YACA9/B,IAAIrD,IAAK,CAAOA,QAAOoC,MAAOpC,KACjC,MAAO,CACLe,OACAg2D,UAAW,SACXjwB,WAAY,IAAMmzB,EAClBjM,SAAWxgC,GACFqnD,EAAcrnD,GAClBvY,IAAIlU,GACJitD,WAELC,SAAU,CAACzgC,EAAoB/sB,KAC7BkiH,EAAiBn1F,EAAUzsB,EAAMN,IAEnCytD,WACA3hC,kBAEG,GAAkB,aAAdwqC,EAA0B,CAEnC,MAAMjmD,EAAO88C,EAAS7mB,eAAe5D,YAAY,IAAM,GACvD,MAAO,CACLpiC,OACAg2D,UAAW,WACXxhD,aAAczE,EACdk9C,SAAWxgC,GACFqnD,EAAcrnD,GAClBvY,IAAIlU,GACJitD,WAELC,SAAU,CAACzgC,EAAoB/sB,KAC7BkiH,EAAiBn1F,EAAUzsB,EAAMN,IAEnCytD,WACA3hC,kBAEG,MAAkB,UAAdwqC,EACF,CACLh2D,OACAg2D,UAAW,QACX/I,SAAWxgC,GACFqnD,EAAcrnD,GAClBvY,IAAIlU,GACJitD,WAELC,SAAU,CAACzgC,EAAoB/sB,KAC7BkiH,EAAiBn1F,EAAUzsB,EAAMN,IAEnCytD,WACA3hC,kBAEqB,aAAdwqC,EACF,CACLh2D,OACAg2D,UAAW,WACX/I,SAAWxgC,GACFqnD,EAAcrnD,GAClBvY,IAAIlU,GACJitD,WAELC,SAAU,CAACzgC,EAAoB/sB,KAC7BkiH,EAAiBn1F,EAAUzsB,EAAMN,IAEnCytD,WACA3hC,mBAGF7lB,QAAQuE,MAAR,+BAC0B8rD,EAD1B,iGAGO,QAER5tD,OAAO4N,W,4ICtJZ,MAAMpW,EAAS,CACbmiH,UAAW,CACTj6F,OAAQ,YAoCNknE,EAAaC,YAEhBlnE,KAEY,MAAMi6F,UAAyBnlH,YAA+B,eAAD,oBAC1EwB,MAAQ,CAAEykG,UAAU,GADsD,KAG1ExlF,oBAAsB,KAChBvgB,KAAKC,MAAMsgB,qBACbvgB,KAAKC,MAAMsgB,oBAAoB,CAC7BkK,WAAYzqB,KAAKC,MAAMwqB,WACvB1G,YAAa/jB,KAAKC,MAAM0qB,iBAP4C,KAW1Eu6F,qBAAuB,KACrBllH,KAAKC,MAAMugB,oBAAoB,CAC7BiK,WAAYzqB,KAAKC,MAAMwqB,WACvB1G,YAAa/jB,KAAKC,MAAM0qB,iBAI5B5qB,SAAU,MACAgmG,EAAa/lG,KAAKsB,MAAlBykG,SADD,EAmBH/lG,KAAKC,MAhBPsuB,EAHK,EAGLA,eACA5D,EAJK,EAILA,cACApJ,EALK,EAKLA,UACAkJ,EANK,EAMLA,WACAlK,EAPK,EAOLA,oBACAC,EARK,EAQLA,oBACAC,EATK,EASLA,oBACAC,EAVK,EAULA,yBACAC,EAXK,EAWLA,mBACAE,EAZK,EAYLA,yBACAD,EAbK,EAaLA,yBACAE,EAdK,EAcLA,4BACAC,EAfK,EAeLA,iBACA3V,EAhBK,EAgBLA,UACAnG,EAjBK,EAiBLA,MACA3E,EAlBK,EAkBLA,SAGI6kH,EAAenjG,iBAAO,EAAGyI,EAAW/V,OAAQX,IAChD,MAAMqX,EAAcX,EAAWtT,IAAIpD,GAC7BqxG,EAAqB,CACzBrhG,YAAa4G,EACbF,WAAYA,EACZW,cACA/I,YAAatO,GAGf,OACE,gBAAC,IAAD,CACEqX,YAAaA,EACbrH,YAAa4G,EACbtmB,IAAK+mB,EAAYtkB,IACjBqZ,SAAUklG,YAAsBj6G,EAAWggB,GAC3C3K,oBAAqB,IAAMA,EAAoB2kG,GAC/C5gH,QAAS,IAAMmc,EAAmBykG,GAClC/4F,cAAe,IAAMzL,EAAyBwkG,GAC9C5pG,cAAe,CAACwI,EAAGC,IACjBpD,EAAyBmD,EAAGC,EAAGmhG,GAEjCrkG,iBAAkB,CAAC5B,EAAU0N,IAC3B9L,EAAiB,CACfgD,YAAaqhG,EAAmBrhG,YAChC0G,WAAY26F,EAAmB36F,WAC/BW,YAAag6F,EAAmBh6F,YAChC/I,YAAa+iG,EAAmB/iG,YAChCwK,iBACA1N,aAGJ/T,UAAWA,EACX0iB,uBAAwBvN,EACxBwN,uBAAwBvN,EACxBwN,uBAAwBvN,EACxBwN,4BAA6BvN,EAC7BwN,sBAAuBvN,EACvBwN,4BAA6BvN,EAC7BwN,4BAA6BvN,EAC7BwN,+BAAgCvN,EAChCwN,oBAAqBvN,EACrBzgB,SAAUA,EACV4gB,sBAAuBlhB,KAAKC,MAAMihB,sBAClCC,WAAYnhB,KAAKC,MAAMkhB,WACvBvQ,YAAa5Q,KAAKC,MAAM2Q,gBAKxB00G,EAA0B,CAC9BvhG,YAAa4G,EACbF,WAAYA,GAER86F,EAAwB56F,EAC5B,gBAAC,QAAD,sBAEA,gBAAC,QAAD,mBAGF,OACE,gBAACsnE,EAAD,CACExsE,QAASsG,GAAeA,EAAYhI,cAAgB4G,EACpDqB,KAAM,KACJtL,EAAyB,CACvBqD,YAAa4G,EACbF,WAAYA,MAIf,EAAGyB,oBAAmBC,SAAQ1G,aAC7ByG,EACE,uBAAK3K,UAAWA,EAAWtc,MAAOA,GAC/BkgH,EACAh5F,GAAU,gBAAC,IAAD,CAAe1G,QAASA,IACnC,wBACE+/F,eAAgB,KACd,MAAMzf,EACHp7E,GAAiB86F,gBAChB96F,GAAiB+6F,cACrB1lH,KAAK2B,SAAS,CAAEokG,cAElB4f,eAAgB,IAAM3lH,KAAK2B,SAAS,CAAEokG,UAAU,KAEhD,0BACE9gG,MAAOpC,EAAOmiH,UACdzjG,UAAU,WACV/c,QAASxE,KAAKugB,oBACd/E,cAAejR,IACbA,EAAE2Q,kBACF4F,EACEvW,EAAE3H,cACF0iH,KAIH/2F,GAAkBg3F,GAEpBxf,GACC,4BACE,0BACE9gG,MAAOpC,EAAOmiH,UACdzjG,UAAU,WACV/c,QAASxE,KAAKklH,sBAEbv6F,EACC,gBAAC,QAAD,8BAEA,gBAAC,QAAD,oC,uJCxMxB,MAQagW,EACXilF,IAEA,MAAMC,EAAO,GAqBb,OApBAD,EAAe99G,QACZg+G,IACC,IAAIC,EAAaC,IACfF,EAAexG,cAAcxzE,MAfb,MAiBbi6E,EAAWngH,SAEdmgH,EAAa,CAAC,KAGhB/0F,IAAO60F,EAAME,EAAYE,IACvB,MAAMC,EAAoBD,GAAa,GACvC,OAAO,eACFC,EADL,CAEE,CAACJ,EAAeK,eAAgBL,QAMjCD,GAGIO,EAAa,CACxBC,EACArxE,KAEA,IAAKA,EAAiB,OAAO,KAE7B,MAAMkH,EAAOrrB,OAAOqrB,KAAKmqE,GACzB,IAAK,IAAItyG,EAAI,EAAGA,EAAImoC,EAAKt2C,SAAUmO,EAAG,CACpC,MAAM1P,EAAM63C,EAAKnoC,GAMXuyG,EAAqBD,EAAoBhiH,GAC/C,IAAKiiH,EAAoB,OAAO,KAEhC,GAAuC,kBAA5BA,EAAmB/jH,KAAmB,CAI/C,GAF0E+jH,EAE/C/jH,OAASyyC,EAClC,MAAO,OAEJ,CAEL,MACMuxE,EAAeH,EADkDE,EAGrEtxE,GAEF,GAAIuxE,EACF,MAAO,CAACliH,KAAQkiH,IAKtB,OAAO,O,kCCxET,4LAAM56G,EAAKC,EAAOD,GAaZ66G,EAAwD,CAC5DC,cAAe,CACb,GAAI,CAAC,cAAe,SAAU,qBAI5BC,EAA2D,CAC/DD,cAAe,CACb,GAAI,CACF,cACA,kBACA,cACA,UACA,cACA,WACA,WACA,YACA,oBAKAE,EAA0D,GAE1DC,EAA6D,CACjEC,SAAU,CACR,6BAA8B,CAAC,yBAI7BC,EAA2B,CAC/BL,cAAe,IAEVD,EAAyBC,cAAc,OAEvCC,EAA4BD,cAAc,KAE/CI,SAAU,IAELD,EAA8BC,SAAS,gCAIxCE,EAA6B,CACjChhG,EACAihG,KAEA,MAAMC,EAAQD,EACd,OAAKC,EAEElhG,EAAK1a,OAAOmgB,IAA8C,IAAlCy7F,EAAMv/G,QAAQ8jB,EAASjpB,OAFnCwjB,GAKfmhG,EAAqC,CACzCnjG,EACAk7C,EACA97B,EACAtvB,EACA+L,KAEA,MAAMggC,EAAgBqf,EAAUj6B,UAE1BmiF,EAA8BpjG,EAChC6iG,EAA8BhnE,GAC9B+mE,EAA2B/mE,GAC/B,IAAKunE,EACH,MAAO,GAGT,MAAMC,EAA0BD,EAA4BhkF,GAC5D,IAAKikF,EACH,MAAO,GAGT,MAAMC,EAAyBtjG,EAC3Bk7C,EAAUqoD,mBACVroD,EAAUsoD,gBAEd,OAAOH,EAAwB7hH,IAAIhD,GACjCilH,EAAqB3zG,EAAQtR,EAAM8kH,EAAuBlwG,IAAI5U,GAAOqd,KAInE6nG,EAAmC,CACvC1jG,EACAk7C,EACAv7B,EACA7vB,EACA+L,KAEA,MAAMggC,EAAgBqf,EAAUj6B,UAE1BmiF,EAA8BpjG,EAChC2iG,EAA4B9mE,GAC5B4mE,EAAyB5mE,GAC7B,IAAKunE,EACH,MAAO,GAGT,MAAMC,EAA0BD,EAA4BzjF,GAC5D,IAAK0jF,EACH,MAAO,GAGT,MAAMC,EAAyBtjG,EAC3Bk7C,EAAUqoD,mBACVroD,EAAUsoD,gBAEd,OAAOH,EAAwB7hH,IAAIhD,GACjCilH,EAAqB3zG,EAAQtR,EAAM8kH,EAAuBlwG,IAAI5U,GAAOqd,KAInE4nG,EAAuB,CAC3B3zG,EACAtR,EACAmlH,EACA9nG,KAEA,MAAMumG,EAAgBuB,EAAchoE,cAC9BioE,EAAYD,EAAcE,WAC1B9/E,EAAe4/E,EAAcroD,kBAGnC,MAAO,CACL98D,OACAipB,SAAUk8F,EACV5/E,eACAq+E,gBACA7G,cAPoBzrG,EAAS8zG,EAQ7B/nG,QACAioG,UAAWH,EAAcG,cAIvBC,EAAiC,CACrCj0G,EACAsxG,EACAvlG,KAGA,MAAMmoG,EAAoB5C,EAAajpE,OACjC8rE,EAAkB,GAGxB,IAAK,IAAIz4C,EAAI,EAAGA,EAAIw4C,EAAkBrzG,SAAU66D,EAAG,CACjD,MAAMhtE,EAAOwlH,EAAkB5wG,IAAIo4D,GAC7Bm4C,EAAgBvC,EAAahuG,IAAI5U,GACnCmlH,EAAc13D,YAElBg4D,EAAgBp9G,KACd48G,EAAqB3zG,EAAQtR,EAAMmlH,EAAe9nG,IAItD,OAAOooG,GAMI/Z,EACXlqF,IAEA,IAAIikG,EAAkB,GAEtB,MAAM3oE,EAAgB1zC,EACnB2zC,WAAW3zC,EAAGggB,WAAWxU,OACzBooC,2BACH,IAAK,IAAIxrC,EAAI,EAAGA,EAAIsrC,EAAc3qC,SAAUX,EAAG,CAC7C,MAAMkrD,EAAY5f,EAAcloC,IAAIpD,GAC9B6rC,EAAgBqf,EAAUj6B,UAC1BijF,EAAkBhpD,EAAUC,2BAC5BgpD,EAAoBjpD,EAAUkpD,oBAEpC,IAAIt0G,EAAS,IACTo0G,EAAgBvzG,OAAS,GAAKwzG,EAAkBxzG,OAAS,KAC3Db,EACoB,kBAAlB+rC,EACI,WACC77B,EAAc,aAAe,WAC9B,mBACAk7C,EAAUvf,cAChB7rC,GAlMkB,KAsMpB,MAAMu0G,EAA4BN,EAChCj0G,EACAkQ,EAAck7C,EAAUqoD,mBAAqBroD,EAAUsoD,gBACvD,CACEnoD,oBAAgBt0D,EAChBy2C,sBAAkBz2C,IAGtBk9G,EAAkB,IACbA,KACAjB,EACDqB,EACAtB,EAAyBlnE,KAK7B,IAAK,IAAI2vB,EAAI,EAAGA,EAAI04C,EAAgBvzG,SAAU66D,EAAG,CAC/C,MAAM7rC,EAAaukF,EAAgB9wG,IAAIo4D,GAEjC3vD,EAAQ,CAAEw/C,eADOH,EAAUE,kBAAkBz7B,IAEnDskF,EAAkB,IACbA,KACAF,EACDj0G,EACAkQ,EACIk7C,EAAUopD,0BAA0B3kF,GACpCu7B,EAAUqpD,uBAAuB5kF,GACrC9jB,MAEC6nG,EACD1jG,EACAk7C,EACAv7B,EACA7vB,EACA+L,IAMN,IAAK,IAAI2vD,EAAI,EAAGA,EAAI24C,EAAkBxzG,SAAU66D,EAAG,CACjD,MAAMpsC,EAAe+kF,EAAkB/wG,IAAIo4D,GAErC3vD,EAAQ,CAAE2hC,iBADS0d,EAAUspD,oBAAoBplF,IAGvD6kF,EAAkB,IACbA,KACAF,EACDj0G,EACAkQ,EACIk7C,EAAUupD,4BAA4BrlF,GACtC87B,EAAUwpD,yBAAyBtlF,GACvCvjB,MAECsnG,EACDnjG,EACAk7C,EACA97B,EACAtvB,EACA+L,KAMR,OAAOooG,GAqBIU,EAA0C,CACrD3kG,EACA9D,EACAC,EACAyD,KAEA,IAAIqkG,EAAkB,GAEtB,MAAMtkF,EAAqB/3B,EAAGg4B,gBAC5B1jB,EACAC,EACAyD,GACA,GAEIglG,EAAqCh9G,EACxCy5B,qBACCnlB,EACAC,EACAyD,GACA,GAED0hB,YACGujF,EAAsB,IAAI/J,IAC9B8J,EAAoBpjH,IAAI29B,GACtBv3B,EAAGy3B,kBACDnjB,EACAC,EACAgjB,KAMAmc,EAAgB1zC,EACnB2zC,WAAW3zC,EAAGggB,WAAWxU,OACzBooC,2BACH,IAAK,IAAIxrC,EAAI,EAAGA,EAAIsrC,EAAc3qC,SAAUX,EAAG,CAC7C,MAAMkrD,EAAY5f,EAAcloC,IAAIpD,GAC9B80G,GAIwB,IAH5B5pD,EACGC,2BACA75B,YACA39B,QAAQg8B,GACPolF,GAI4B,IAHhC7pD,EACGC,2BACA75B,YACA39B,QAhBgB,IAiBfqhH,EAAgB9pD,EACnBkpD,oBACA9iF,YACAh6B,OAAO83B,GAAgBylF,EAAoBvnE,IAAIle,IAElD,IAAK0lF,IAAkBC,GAA8C,IAAzBC,EAAcnjH,OACxD,SAGF,MAAMiO,EAAS,GAGf,GA7BqB,KA6BjB6vB,GAAiCmlF,EAAe,CAClD,MACMjpG,EAAQ,CAAEw/C,eADOH,EAAUE,kBAAkBz7B,IAGnDskF,EAAkB,IACbA,KACAF,EACDj0G,EACAkQ,EACIk7C,EAAUopD,0BAA0B3kF,GACpCu7B,EAAUqpD,uBAAuB5kF,GACrC9jB,MAEC6nG,EACD1jG,EACAk7C,EA5Ce,GA8CfprD,EACA+L,IAKN,GAAIkpG,EAAmB,CACrB,MACMlpG,EAAQ,CAAEw/C,eADOH,EAAUE,kBArDd,KAwDnB6oD,EAAkB,IACbA,KACAF,EACDj0G,EACAkQ,EACIk7C,EAAUopD,0BA7DC,IA8DXppD,EAAUqpD,uBA9DC,IA+Df1oG,MAEC6nG,EACD1jG,EACAk7C,EAnEe,GAqEfprD,EACA+L,IAONmpG,EAAcjhH,QAAQq7B,IACpB,MACMvjB,EAAQ,CAAE2hC,iBADS0d,EAAUspD,oBAAoBplF,IAGvD6kF,EAAkB,IACbF,EACDj0G,EACAkQ,EACIk7C,EAAUupD,4BAA4BrlF,GACtC87B,EAAUwpD,yBAAyBtlF,GACvCvjB,MAECsnG,EACDnjG,EACAk7C,EACA97B,EACAtvB,EACA+L,MAECooG,KAKT,MArJAA,IASO,IAPqBA,EAAgB38G,OAC1Cy+B,GAAoE,IAA7CA,EAAoBw1E,cAAc15G,WAE5BoiH,EAAgB38G,OAC7Cy+B,GAAoE,IAA7CA,EAAoBw1E,cAAc15G,SA+IpDojH,CAAmChB,IAO/BiB,EACXllG,IAEA,IAAImlG,EAAsB,GAE1B,MAAM7pE,EAAgB1zC,EACnB2zC,WAAW3zC,EAAGggB,WAAWxU,OACzBooC,2BACH,IAAK,IAAIxrC,EAAI,EAAGA,EAAIsrC,EAAc3qC,SAAUX,EAAG,CAC7C,MAAMkrD,EAAY5f,EAAcloC,IAAIpD,GAC9B6rC,EAAwBqf,EAAUj6B,UAClCijF,EAAkBhpD,EAAUC,2BAC5BgpD,EAAoBjpD,EAAUkpD,oBAEpC,IAAIt0G,EAAS,IACTo0G,EAAgBvzG,OAAS,GAAKwzG,EAAkBxzG,OAAS,KAC3Db,EAA2B,kBAAlB+rC,EAAoC,GAAKqf,EAAUvf,cAC5D7rC,GAzbkB,KA6bpB,MAAMu0G,EAA4BN,EAChCj0G,EACAkQ,EAAck7C,EAAUqoD,mBAAqBroD,EAAUsoD,gBACvD,CACEnoD,oBAAgBt0D,EAChBy2C,sBAAkBz2C,IAGtBo+G,EAAsB,IACjBA,KACAnC,EACDqB,EACAtB,EAAyBlnE,KAK/B,OAAOspE,GAOIC,EAAyB,CACpCpjG,GACE0e,iBAEF,GAAoB,MAAfA,EACH,OAAO1e,EAGT,MAAMqjG,EAAkB3kF,EAAW3Q,cAkCnC,MAlBE/N,KAEA,IAAK0e,EACH,OAAO1e,EAGT,IAAK,IAAIhS,EAAI,EAAGA,EAAIgS,EAAKngB,SAAUmO,EACjC,GAAIgS,EAAKhS,GAAGoyG,cAAcryF,gBAAkBs1F,EAAiB,CAC3D,MAAMC,EAAatjG,EAAKhS,GACxBgS,EAAKk7E,OAAOltF,EAAG,GACfgS,EAAKujG,QAAQD,GAIjB,OAAOtjG,GAIFwjG,CAAgBxjG,EAAK1a,OA/B1Bm+G,IACI,MAEFrD,EAEEqD,EAFFrD,cACA7G,EACEkK,EADFlK,cAEF,OAC4D,IAA1D6G,EAAcryF,cAAcpsB,QAAQ0hH,KACsB,IAA1D9J,EAAcxrF,cAAcpsB,QAAQ0hH,OA0B7BK,EACX3/E,IAEA,MAAMnd,EAAkBmd,EAAoBld,qBAC5C,GAAID,GAAmB,EAAG,CACxB,MAAM+8F,EAAqB5/E,EAAoB1c,aAAa,GAAGxB,UAC/D,GAA2B,WAAvB89F,EAEF,OAAO,EAET,GAAI/9G,EAAGm5B,kBAAkBC,SAAS2kF,GAIhC,OAAO,EAGT,IACyB,mBAAvBA,GACuB,iBAAvBA,IAEI/8F,GAAmB,EAAG,CACxB,MAAMg9F,EAAsB7/E,EACzB1c,aAAa,GACbxB,UACH,GAAIjgB,EAAGm5B,kBAAkBC,SAAS4kF,GAKhC,OAAO,GAMf,OAAQ,K,sFCziBV,MAAM9mH,EACO,CACT8M,KAAM,GAiBK7P,iBACb,EAAGsB,WAAU0nC,oBAAmB7jC,SAAgBzC,KAC9C,MAAMimC,EAAa3oC,SAAc,MAwBjC,OAvBAA,sBAA0B0C,EAAK,MAI7BmmC,SAAWviC,IACT,MAAMwjH,EAAgBvjG,IAASC,YAAYlgB,GAC3C,GAAIwjH,aAAyBpjG,YAAa,CACxC,MAAMqjG,EAAYD,EAAcljG,wBAAwBrO,IAClDyxG,EAAoBrhF,EAAW37B,QAErC,GAAIg9G,EAAmB,CACrB,MAAMC,EAAsBD,EAAkBpjG,wBAC3CrO,IACHyxG,EAAkBE,WAAaH,EAAYE,QAG7CnhH,QAAQuE,MACN,8DAON,uBACElI,MAAK,eACApC,EADA,CAEHq3D,UAAWpxB,EAAoB,OAAS,UACrC7jC,GAELzC,IAAKimC,GAEJrnC,M,iCC1DT,2FAMA,MAAMyB,EAAS,CACbyhH,QAAS,CACP2F,cAAe,GACf/vD,UAAW,OAGX3/C,UAAW,SAGX2zB,UAAW,GACX55B,UAAW,IACX3P,SAAU,IACVulH,SAAU,IAKVxxG,OAAQ,IAIG,MAAMyxG,UAAsBpwG,YACzCha,SACE,OACE,kBAAC,IAAD,CAAmB6kH,YAAa5kH,KAAKC,MAAMwE,gBACzC,kBAAC,IAAD,CACEb,KAAM5D,KAAKC,MAAM2D,KACjB4kC,SAAUxoC,KAAKC,MAAMuoC,SACrBvjC,MAAOpC,EAAOyhH,QACdvjH,UAAU,UAEV,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAQgF,QAAM,GACZ,kBAAC,IAAD,KAAO/F,KAAKC,MAAMmB,iB,iCCtChC,iGAYO,MAAMynD,EAAoD,CAC/DuhE,8BAA8B,EAC9BC,sBAAuB,GACvBC,4BAA6B,KAC7BC,gCAAiC,MAYpB,SAASC,GAAe,UACrCnzE,EADqC,iBAErCE,EAFqC,eAGrCC,EAHqC,yBAIrCC,EAJqC,kBAKrCL,EALqC,sBAMrCE,IACS,MAEP8yE,EAIE9yE,EAJF8yE,6BACAC,EAGE/yE,EAHF+yE,sBACAC,EAEEhzE,EAFFgzE,4BACAC,EACEjzE,EADFizE,gCAGIE,EACJH,GAA+BC,EAC3BG,EACJ,gBAAC,IAAD,CACElmH,QAAS6yC,EACTtyC,IACEqlH,EACI,2CACA,mCAENlqH,QACGuqH,EAEGL,EACA,mDACA,2DAHA,uCAQV,OACE,gBAAC,WAAD,KACGhzE,IACGqzE,EAGA,gBAAC,IAAD,CACEtkG,QAASukG,EACT9jG,4BAA0B,EAC1BjL,kBAAmB,IAAM,IACnB0uG,EACA,CACE,CACE9nH,KAAM,WACN+B,MACE,iCACA+lH,EACFhgH,QAAS+/G,EACTxuG,MAAO2uG,GAET,CAAEhoH,KAAM,cAEV,GACJ,CACE+B,MAAO,uCACPsX,MAAO0uG,MArBbI,GA0BHjzE,GACC,gBAAC,IAAD,CACEtxB,QACE,gBAAC,IAAD,CACEphB,IAAI,+BACJ7E,QAAS,iEAGbyb,kBAAmB,IAAM,CACvB,CACErX,MAAO,0CACPsX,MAAO,IAAM27B,KAEf,CAAEh1C,KAAM,aACR,CACE+B,MAAO,iDACPsX,MAAO,IAAM47B,W,iCC7G3B,uCAIA,IAAImzE,GAAuB,EACL,qBAAXzxG,QACTA,OAAOoxE,iBACL,cACA,SAASsgC,IACPhiH,QAAQC,KAAK,4DACb8hH,GAAuB,EACvBzxG,OAAOqxE,oBAAoB,aAAcqgC,GAAc,MAEzD,GAWG,MAAMC,EAAqB,EAAGzpH,cACb,qBAAX8X,OACF9X,EAAS,UAGXA,EAASupH,EAAuB,QAAU,W,6NCfnD,MAIM9nH,EAAS,CACbioH,sBAAuB,CACrB1yG,SAAU,WACV/I,QAAS,eACTtM,MAAO,OACPurC,OAAQ,oBACR70B,SAAU,SACVhK,OAAQ,IACR20G,WAAY,wCAMZ2G,YAAa,QAEf9mD,qBAAsB,CACpB7rD,SAAU,WACVO,cAAe,OACfnO,OAvBW,IAyBbwgH,IAAK,CACH18E,OAAQ,oBA6BG,MAAMwyD,UAAqBhhG,YAA+B,eAAD,oBACtEyf,WAA8B,KADwC,KAGtEje,MAHsE,aAIpE2pH,SAAS,EACT/iD,WAAY,KACZC,YAAa,KACbC,gBAAiB,GACdpoE,KAAKkX,UAAUlX,KAAKC,QAR6C,KA8BtEirH,kBAAoB,KAClBlrH,KAAK2B,SAAS,CACZspH,SAAS,KAhCyD,KAoCtEE,mBAAsB5gH,IACpB,MAAM6gH,EAAa7gH,EAAEnE,OAEf8hE,EAAakjD,EACfA,EAAWC,cAAgBD,EAAWE,YACtC,EACEnjD,EAAcijD,EAChBA,EAAWG,eAAiBH,EAAWI,aACvC,EACJxrH,KAAK2B,SAAS,CACZumE,aACAC,gBAEEnoE,KAAKC,MAAM0tE,QAAQ3tE,KAAKC,MAAM0tE,OAAOzF,EAAYC,IAjDe,KAoDtEsjD,QAAWC,IACT1rH,KAAK2rH,QAAQ3rH,KAAKsB,MAAM8mE,gBAAkBsjD,IArD0B,KAwDtEC,QAAWvjD,IACTpoE,KAAK2B,SAASL,IAAK,CACjB8mE,gBAAiBzrD,KAAKE,IAhHJ,GAkHhBF,KAAKC,IAjHW,GAiHUwrD,QAjDhChxD,0BAA0BC,GAEtBA,EAAStP,eAAiB/H,KAAKC,MAAM8H,cACrCsP,EAASzQ,UAAY5G,KAAKC,MAAM2G,SAChCyQ,EAAS0Z,kBAAoB/wB,KAAKC,MAAM8wB,iBACxC1Z,EAASsvE,eAAiB3mF,KAAKC,MAAM0mF,cAErC3mF,KAAK2B,SAAS3B,KAAKkX,UAAUG,IAIjCH,UAAUjX,GAA6D,MAC7D2G,EAA2C3G,EAA3C2G,QAASmB,EAAkC9H,EAAlC8H,aACjB,MAAO,CACLkjH,SAAS,EACTW,YAHiD3rH,EAApB8wB,gBAGAiG,mBAAmBpwB,EAASmB,IAuC7DhI,SACE,OACE,gBAAC,IAAD,KACG0mB,IACC,MAAMolG,EAAiBplG,EAAW1jB,MADrB,EAEkC/C,KAAKC,MAA5C8H,EAFK,EAELA,aAAc9C,EAFT,EAESA,MAAOgjE,EAFhB,EAEgBA,cAFhB,EAQTjoE,KAAKsB,MAJP6mE,EAJW,EAIXA,YACAD,EALW,EAKXA,WACA0jD,EANW,EAMXA,YACAxjD,EAPW,EAOXA,gBAGI0jD,IACF5jD,KAAgBC,IAAgBnoE,KAAKsB,MAAM2pH,QAGzCc,EAAoBpvG,KAAKC,IAC7B,EACAivG,EAAiB,GACb3jD,GAAc,GAAKE,EAAmB,EA5IvC,IAgJC4jD,EAAU,eACXnpH,EAAOohE,qBADI,CAEd5rD,IAVuB,EAWvBC,KAAMyzG,EACNhpH,MAAOmlE,EAAaA,EAAaE,OAAkBt9D,EACnD2E,OAAQ04D,EAAcA,EAAcC,OAAkBt9D,EACtDylG,WAAYub,OAAchhH,EAAY,WAGlCmhH,EAAe,CACnB7zG,SAAU,WACVC,IAAK6zG,GACL5zG,KAAMyzG,EA5JH,GA6JHhpH,MAAOmlE,EAAaA,EAAaE,OAAkBt9D,EACnD2E,OAAQ04D,EAAcA,EAAcC,OAAkBt9D,EACtDylG,WAAYub,OAAchhH,EAAY,UAGxC,OACE,gBAAC,IAAD,CAAQ/E,QAAM,EAACnB,UAAQ,GACrB,gBAAC,IAAD,KACE,gBAAC,IAAD,CACEJ,QAAS,IAAMxE,KAAKyrH,QAAQ,IAC5BvrH,QAAS,sDAET,gBAAC,IAAD,OAEF,gBAAC,IAAD,CACEsE,QAAS,IAAMxE,KAAKyrH,SAAS,IAC7BvrH,QAAS,uDAET,gBAAC,IAAD,OAEF,gBAAC,IAAD,CACEsE,QAAS,IAAMxE,KAAK2rH,QAAQ,GAC5BzrH,QAAS,8BAET,gBAAC,IAAD,QAGJ,uBACE+E,MAAK,eAAOpC,EAAOioH,sBAAd,GAAwC7lH,GAC7CzC,IAAK4M,GAAcpP,KAAKuf,WAAanQ,EACrC+8G,QAASzpH,IAAU,MACTswD,EAAWtwD,EAAXswD,QAEJtwD,EAAMs2C,SAAWt2C,EAAMw2C,WACzBl5C,KAAKyrH,QAAQz4D,EAAS,KACtBtwD,EAAM0c,iBACN1c,EAAMwY,uBAMPlb,KAAKsB,MAAM2pH,SACZ,gBAAC,IAAD,KACE,gBAAC,IAAD,KACE,gBAAC,QAAD,oCAIJjrH,KAAKsB,MAAM2pH,SACX,uBACEhmH,MAAO+mH,EACPhnH,IAAK+C,EACLhD,IAAK6mH,EACLrpC,QAASviF,KAAKkrH,kBACdkB,OAAQpsH,KAAKmrH,mBACb92G,YAAY,cAGfy3G,GAAe7jD,GACd,uBAAKhjE,MAAK,eAAOgnH,EAAP,GAAwBppH,EAAOmoH,OAE1Cc,GAAe7jD,GACd,uBAAKhjE,MAAOgnH,GACThkD,EAAc,CACbC,WAAYA,GAAc,EAC1BC,YAAaA,GAAe,EAC5BC,4B,kCC/OtB,gaAEA,MAAMz8D,EAAKC,EAAOD,GAULy7D,EAAqB,CAChC77D,EACAu7D,EACAC,EACAC,KAEA,MAAMqlD,EAAoBvlD,EAAiBv7D,EAAOirB,qBAC5CqB,EAAYw0F,EACd9gH,EAAOkrB,aAAaqwC,GACpB,KACEwlD,IACFz0F,GAAakvC,EAAiBlvC,EAAUnB,qBACtCwB,EAAYo0F,EACdz0F,EAAUlB,aAAaowC,GACvB,KACEiB,IACF9vC,GAAa8uC,EAAc9uC,EAAUtB,kBACnCksC,EAASkF,EAAiB9vC,EAAUpB,UAAUkwC,GAAe,KAEnE,MAAO,CACLqlD,oBACAx0F,YACAy0F,oBACAp0F,YACA8vC,iBACAlF,WAISypD,EAAY,CAACC,EAAeC,KACvCA,EAAiBv0D,KAAKs0D,EAAct7F,QACpCu7F,EAAiBt0D,KAAKq0D,EAAcr7F,QACpCs7F,EAAiBl2G,QAAQi2G,EAAcxnF,YAG5BmgC,EAAmB,CAACqB,EAAgBkmD,KAC3ClmD,EAAe1/D,MAAQ4lH,EAAkB5lH,MAE7CylH,EAAU/lD,EAAe5tC,YAAa8zF,EAAkB9zF,aACxD2zF,EAAU/lD,EAAenuC,YAAaq0F,EAAkBr0F,aACxDq0F,EAAkB3hD,sBAChBvE,EAAeluC,wBAGjBo0F,EAAkB5iD,yBAAyBnsC,QAC3C8E,oBAAU+jC,EAAesD,yBAA0B0iD,IACjDE,EAAkBxhD,SAASshD,OAIlBllD,EAA6B,CAACd,EAAgB3uC,KACzD7V,iBAAO,EAAG6V,EAAUnB,qBAAsB3iB,IACxC,MAAMmkB,EAAYL,EAAUlB,aAAa5iB,GAEzCiO,iBAAO,EAAGkW,EAAUtB,kBAAmB24C,IACrC,MAAMzM,EAAS5qC,EAAUpB,UAAUy4C,GACnCpK,EAAiBqB,EAAgB1D,QAK1B6pD,EAAc,CAACC,EAAQC,IAEhCD,EAAO17F,SAAW27F,EAAO37F,QACzB07F,EAAOz7F,SAAW07F,EAAO17F,QACzBy7F,EAAO5nF,YAAc6nF,EAAO7nF,UA4BnB6/B,EAAsC,CACjD2B,EACAtuC,IAEOyvC,IACL3lD,iBAAO,EAAGkW,EAAUtB,kBAAmB24C,IACrC,MAAMzM,EAAS5qC,EAAUpB,UAAUy4C,GACnC,OA/BkCu9C,EA+BJtmD,IA9B7BmmD,GADwBI,EA+BHjqD,GA9BDlqC,YAAak0F,EAAQl0F,gBACzC+zF,EAAYI,EAAQ10F,YAAay0F,EAAQz0F,cAC1C00F,EAAQz0F,yBAA2Bw0F,EAAQx0F,wBAI7Cy0F,EAAQjjD,yBAAyBp1D,SACjCo4G,EAAQhjD,yBAAyBp1D,QAI5BizD,IACLllC,oBAAUsqF,EAAQjjD,yBAA0BkjD,KACrCF,EAAQviD,SAASyiD,EAAahoF,YAE5B2nF,EACLK,EACAF,EAAQG,SAASD,EAAahoF,cAlBR,IAAC+nF,EAASD,KAoC3BllD,EAA6B,CAACpB,EAAgB3uC,IAClD8vC,IACL3lD,iBAAO,EAAG6V,EAAUnB,qBAAsB3iB,IACxC,MAAMmkB,EAAYL,EAAUlB,aAAa5iB,GACzC,OAAO8wD,EAAoC2B,EAAgBtuC,MAKpDktC,EAAqB,CAACoB,EAAgBkmD,KAC7ClmD,EAAe1/D,MAAQ4lH,EAAkB5lH,MAE7C4lH,EAAkBn/C,0BAChB/G,EAAeqH,4BAGjB6+C,EAAkB3+C,yBAAyBpwC,QAC3C8E,oBAAU+jC,EAAeuH,yBAA0Bm/C,IACjDR,EAAkB3+C,yBAAyBmC,UAAUg9C,OAI5ChgD,EAAqC,CAChD1G,EACA3uC,KAEA7V,iBAAO,EAAG6V,EAAUnB,qBAAsB3iB,IACxC,MAAMmkB,EAAYL,EAAUlB,aAAa5iB,GAEzCiO,iBAAO,EAAGkW,EAAUtB,kBAAmB24C,IACrC,MAAMzM,EAAS5qC,EAAUpB,UAAUy4C,GACnCnK,EAAmBoB,EAAgB1D,QAqB5BqqD,EAAyB,CAACJ,EAASD,KAC9C,GAAIC,EAAQl/C,6BAA+Bi/C,EAAQj/C,2BACjD,OAAO,EAET,GAAIk/C,EAAQl/C,4BAA8Bi/C,EAAQj/C,2BAChD,OAAO,EAET,MAAMu/C,EAAuBL,EAAQh/C,yBAC/Bs/C,EAAuBP,EAAQ/+C,yBAErC,OAAIq/C,EAAqB14G,SAAW24G,EAAqB34G,QAElDizD,IACLllC,oBAAU2qF,EAAsB,CAACE,EAAgBz8G,IA7BxB,EAAC08G,EAAUC,KACtC,MAAMC,EAAmBF,EAASp+C,cAC5Bu+C,EAAmBF,EAASr+C,cAElC,OAAIs+C,EAAiB/4G,SAAWg5G,EAAiBh5G,QAE1CizD,IACLllC,oBAAUgrF,EAAkB,CAACb,EAAQ/7G,KACnC,MAAMg8G,EAASa,EAAiBzvE,GAAGptC,GACnC,OACE+7G,EAAOn9C,UAAYo9C,EAAOp9C,SAAWm9C,EAAOj9C,UAAYk9C,EAAOl9C,YAoB1Dg+C,CAAcL,EAAgBD,EAAqBpvE,GAAGptC,OAKtDi0D,EAA8C,CACzD0B,EACAtuC,IAEOyvC,IACL3lD,iBAAO,EAAGkW,EAAUtB,kBAAmB24C,IACrC,MAAMzM,EAAS5qC,EAAUpB,UAAUy4C,GACnC,OAAO49C,EAAuBrqD,EAAQ0D,MAK/B4G,EAAqC,CAChD5G,EACA3uC,IAEO8vC,IACL3lD,iBAAO,EAAG6V,EAAUnB,qBAAsB3iB,IACxC,MAAMmkB,EAAYL,EAAUlB,aAAa5iB,GACzC,OAAO+wD,EACL0B,EACAtuC,MAMKwqC,EAA6B,CAAC7qC,EAAW+1F,KACpD5rG,iBAAO,EAAG6V,EAAUnB,qBAAsB3iB,IACxC,MAAMmkB,EAAYL,EAAUlB,aAAa5iB,GAEnC85G,EAAkB7rG,iBAAO,EAAGkW,EAAUtB,kBAAmB24C,IAC7D,MAAMzM,EAAS5qC,EAAUpB,UAAUy4C,GAEnC,QAASq+C,EAAW9qD,EAAOh8D,OAI7B,IACE,IAAIkgE,EAAc9uC,EAAUtB,kBAAoB,EAChDowC,GAAe,EACfA,IAEI6mD,EAAgB7mD,IAAc9uC,EAAU41F,aAAa9mD,MAKlDpE,EAA8B,CAAC/qC,EAAW+1F,KACrD5rG,iBAAO,EAAG6V,EAAUnB,qBAAsB3iB,IACxC,MAAMmkB,EAAYL,EAAUlB,aAAa5iB,GAEnCg6G,EAAqB/rG,iBAAO,EAAGkW,EAAUtB,kBAAmB24C,IAChE,MAAMzM,EAAS5qC,EAAUpB,UAAUy4C,GAEnC,QAASq+C,EAAW9qD,EAAOh8D,OAI7B,IACE,IAAIkgE,EAAc9uC,EAAUtB,kBAAoB,EAChDowC,GAAe,EACfA,IAEA,GAAI+mD,EAAmB/mD,GAAc,CACnC,MAAMgnD,EAAoB91F,EAAUpB,UAAUkwC,GACxCinD,EAAY,IAAItiH,EAAGu2C,OACzB+rE,EAAU/oD,aAAa8oD,EAAkBj3F,gBACzCouC,EAAiB6oD,EAAmBC,GACpC7oD,EAAmB4oD,EAAmBC,GAEtC/1F,EAAUmtC,UAAU4oD,GACpB/1F,EAAU8sC,WAAW9sC,EAAUtB,kBAAoB,EAAGowC,S,kDCnQ/C,KACbsE,aAAc,CACZvoE,MAAO,GACPoyB,YAAa,EACbC,aAAc,GAEhBm2C,iBAAkB,CAChBxoE,MAAO,IAETkI,WAAY,CACVlI,MAAO,M,yFCVX,MAAMuD,EAAWC,IAAgB,YAKlB,MAAM2nH,EACnBC,kBAAkBC,GAChBpuH,KAAKquH,aAAeD,EAItBE,SAAS7nG,GACP,IAAKngB,EAAU,OADI,MAGXioH,EAASjoH,EAAS+S,OAAlBk1G,KACFC,EAAgBloH,EAAS+S,OAAOC,mBACtCtZ,KAAKyuH,KAAOF,EAAKJ,kBAAkBnuH,KAAKquH,cACxCruH,KAAKyuH,KAAKC,MAAM,CACdx1G,OAAQs1G,EACRxqG,EAAGrH,KAAKgK,MAAMF,EAAWnO,MACzB2L,EAAGtH,KAAKgK,MAAMF,EAAWpO,IAAMoO,EAAWhX,QAC1Ck/G,OAAO,IAIXC,eACE,MAAO,CACLhrH,MAAM,I,2GCjBZ,MAAMirH,EAAc,EAAG/Y,OAAMqY,wBAAyB,MAAD,EACnB77F,oBAAS,GADU,mBAC5Cw8F,EAD4C,KAClCC,EADkC,KAE7CC,EAAgBh0G,iBAAO,MACvBi0G,EAAmBC,sBAAY/oG,IACnC6oG,EAAcliH,QAAUqZ,GACvB,IAEH,OACE,kBAAC,IAAMjhB,SAAP,KACE,kBAACiqH,EAAA,EAAD,CACEC,OAAK,EACL/qH,IAAKyxG,EAAKxxG,MACVhE,UAA2B,IAAjBw1G,EAAKnjG,QACfnO,QAAS9B,KACc,IAAjBozG,EAAKnjG,UAIJq8G,EAAcliH,SACjBmiH,EAAiBvsH,EAAME,eAGzBmsH,GAAaD,MAGdhZ,EAAKxxG,MACN,kBAAC,IAAD,OAEF,kBAACiqH,EAAA,EAAD,CACE3qH,KAAMkrH,EACNtmF,SAAUwmF,EAAcliH,QACxBjJ,QAAS,IAAMkrH,GAAY,GAC3BM,oBAAqBC,KAEpBnB,EAAkBrY,EAAKyZ,YAoBjB,MAAMC,EACnBr6G,aAAY,QAAEtR,IACZ7D,KAAKyvH,SAAW5rH,EAGlBsqH,kBAAkBC,GAChB,OAAOA,EACJ7oH,IAAI,CAACuwG,EAAM9nE,KACW,IAAjB8nE,EAAK9hD,QAA0B,KAOjB,cAAd8hD,EAAKvzG,KACA,kBAACmtH,EAAA,EAAD,CAASrrH,IAAK,YAAc2pC,IAEZ,aAAd8nE,EAAKvzG,KAEZ,kBAAC4sH,EAAA,EAAD,CACEC,OAAK,EACL/qH,IAAK,WAAayxG,EAAKxxG,MACvB+F,QAASyrG,EAAKzrG,QACd/J,UAA2B,IAAjBw1G,EAAKnjG,QACfnO,QAAS,MACc,IAAjBsxG,EAAKnjG,UAILmjG,EAAKl6F,OACPk6F,EAAKl6F,QAEP5b,KAAKyvH,cAGP,kBAACE,EAAA,EAAD,KACG7Z,EAAKzrG,QAAU,kBAAC,IAAD,MAAmB,kBAAC,IAAD,OAErC,kBAACulH,EAAA,EAAD,CAAcrrH,QAASuxG,EAAKxxG,SAGvBwxG,EAAKyZ,QAEZ,kBAACV,EAAD,CACExqH,IAAK,UAAYyxG,EAAKxxG,MACtBwxG,KAAMA,EACNqY,kBAAmBC,GAAYpuH,KAAKmuH,kBAAkBC,KAKxD,kBAACe,EAAA,EAAD,CACEC,OAAK,EACL/qH,IAAK,OAASyxG,EAAKxxG,MACnBhE,UAA2B,IAAjBw1G,EAAKnjG,QACfnO,QAAS,MACc,IAAjBsxG,EAAKnjG,SAILmjG,EAAKl6F,QACPk6F,EAAKl6F,QACL5b,KAAKyvH,cAIR3Z,EAAKxxG,QAKb+G,OAAO4N,SAGZq1G,YAIAM,eACE,MAAO,IC1IX,MAAMtoH,EAAWC,IAAgB,YAEjC,MAAMspH,UAA8B/vH,IAAMia,UACxC5E,YAAYlV,GACVmV,MAAMnV,GADW,KAYnB2D,KAAO,CAACogB,EAAGC,KACTjkB,KAAK2B,SACH,CACEmuH,QAAS9rG,EACT+rG,QAAS9rG,GAEX,KACEjkB,KAAK2B,SAAS,CACZiC,MAAM,OApBK,KA0BnB6rH,SAAW,KACTzvH,KAAK2B,SAAS,CACZiC,MAAM,KA1BR5D,KAAKsB,MAAQ,CACXsC,MAAM,EACNksH,QAAS,EACTC,QAAS,GAEX/vH,KAAKgwH,mBAAqB,IAAIR,EAA6B,CACzD3rH,QAAS7D,KAAKyvH,WAwBlB1vH,SACE,OACE,kBAACwuH,EAAA,EAAD,eACE3qH,KAAM5D,KAAKsB,MAAMsC,KACjBqsH,eAAgB,CAAE33G,KAAMtY,KAAKsB,MAAMwuH,QAASz3G,IAAKrY,KAAKsB,MAAMyuH,SAC5DG,gBAAiB,iBACjBrsH,QAAS7D,KAAKyvH,SACdJ,oBAAqBC,KACjBtvH,KAAKgwH,mBAAmBpB,gBAE3B5uH,KAAKgwH,mBAAmB7B,kBACvBnuH,KAAKC,MAAM0b,uBAOrB,MAAMw0G,UAA4BrwH,IAAMia,UACtC5E,YAAYlV,GACVmV,MAAMnV,GADW,KAKnB2D,KAAO,CAACogB,EAAGC,KACTjkB,KAAKgwH,mBAAmB7B,kBAAkBnuH,KAAKC,MAAM0b,qBACrD3b,KAAKgwH,mBAAmB1B,SAAS,CAC/Bh2G,KAAM0L,GAAK,EACX3L,IAAK4L,GAAK,EACVlhB,MAAO,EACP0M,OAAQ,KATVzP,KAAKgwH,mBAAqB,IAAI9B,EAahCnuH,SACE,OAAO,MAIKuG,MAAW6pH,EAAsBN,G,iCChFjD,sLAEO,MAAM7iF,EAAoBpmC,GAC/Bob,iBAAO,EAAGpb,EAAQ2hG,kBAAmBx0F,GAAKnN,EAAQwpH,YAAYr8G,IAEnD09B,EACX7qC,GAEAob,iBAAO,EAAGpb,EAAQsiG,yBAA0Bn1F,GAC1CnN,EAAQypH,oBAAoBt8G,IAGnBo4F,EACXvlG,GAEAob,iBAAO,EAAGpb,EAAQijG,0BAA2B91F,GAC3CnN,EAAQ0pH,oBAAoBv8G,IAGnBksC,EACXr5C,GAEAob,iBAAO,EAAGpb,EAAQ6jG,oCAAqC12F,GACrDnN,EAAQm5G,8BAA8BhsG,IAG7B+3F,EAAyB,CACpC/lF,EACA0e,KAEA,IAAKA,EAAY,OAAO1e,EAExB,MAAMu5C,EAAsB76B,EAAW3Q,cAEvC,OAAO/N,EAAK1a,OACTyqG,IAIsC,IAHrCA,EACG9wE,UACAlR,cACApsB,QAAQ43D,M,gHCnCjB,MAAMz8D,EAAS,CACbuM,UAAW,CACTgJ,SAAU,WACV/I,QAAS,gBAEXkhH,OAAQ,CACNn4G,SAAU,WACVG,MAAO,MACPF,IAAK,SAIM,MAAMm4G,UAAmBz2G,YAAW,eAAD,oBAChDvV,QAAU,KACJxE,KAAK2tC,WAAW3tC,KAAK2tC,UAAU3mB,OAC/BhnB,KAAKuwH,QAAQvwH,KAAKuwH,OAAO3sH,QAG/B7D,SACE,OACE,yBACEkF,MAAK,eACApC,EAAOuM,UADP,CAEHrM,MAAO/C,KAAKC,MAAMyK,UAAY,YAASI,KAGzC,kBAAC,IAAD,CACEJ,WAAS,EACT+C,kBAAmBzN,KAAKC,MAAMwN,kBAC9BkhD,oBAAkB,EAClBrhD,mBAAoBtN,KAAKC,MAAMqN,mBAC/B/K,KAAK,OACLwL,SAAU,uBACVvJ,QAASxE,KAAKwE,QACdnC,QAASrC,KAAKwE,QACdtC,MAAM,GACNM,IAAKmrC,GAAc3tC,KAAK2tC,UAAYA,IAEtC,yBAAK1oC,MAAOpC,EAAO0tH,QACjB,kBAAC,IAAD,iBAAiBvwH,KAAKC,MAAtB,CAA6BuC,IAAK+tH,GAAWvwH,KAAKuwH,OAASA,U,iCC3CrE,+BAiBgBtwH,QAAkB,MACxBqK,EAAYrK,EAAZqK,QACFqK,EACJ,gBAAC,IAAD,CACErU,SAAUL,EAAMK,SAChB+J,QAASpK,EAAMoK,QACflI,SACEmI,EAAU5H,GAAS4H,EAAQ5H,EAAOA,EAAM0D,OAAOiE,cAAWS,EAE5DzE,KAAMpG,EAAM2U,cACZC,YAAa5U,EAAM4U,YACnBpB,MAAM,YAGV,OAAOxT,EAAMqE,MACX,gBAAC,IAAD,CAAkBwQ,QAASH,EAAUrQ,MAAOrE,EAAMqE,QAElDqQ,I,+lBCGG,MAAMzJ,EAAsB,KAC1B,CACLulH,qBAAsB,GACtBC,eAAgB,GAChBC,0BAA2B,KAIlBC,EAAqBxlH,GACzBvG,IAAOuG,EAAUslH,gBAAgBnrH,IACrCsrH,GAA+BA,EAAanuH,OAIpCouH,EACX1lH,GAEOvG,IAAOuG,EAAUslH,gBAGbK,EACX3lH,GAEOvG,IAAOuG,EAAUqlH,sBAAsBlrH,IAC3C6/G,GAA2CA,EAAmBh6F,aAItD4lG,EACX5lH,GAEOvG,IAAOuG,EAAUqlH,sBAGbQ,EACX7lH,GAEOvG,IAAOuG,EAAUulH,2BAGbvwG,EAAkB,CAC7BhV,EACA1I,MAES0I,EAAUslH,eAAehuH,EAAMoE,KAG7Bu+G,EAAwB,CACnCj6G,EACAggB,MAEShgB,EAAUqlH,qBAAqBrlG,EAAYtkB,KAUzCk2C,EAAoB5xC,KACtBylB,OAAOqrB,KAAK9wC,EAAUslH,gBAAgB9qH,OAGpCsrH,EAA0B9lH,KAC5BylB,OAAOqrB,KAAK9wC,EAAUqlH,sBAAsB7qH,OAG1CurH,EACX/lH,IACa,IAAD,uBACZ,YAA+B4lH,EAAgC5lH,GAA/D,+CAA2E,CACzE,GADyE,QAClD2Y,YACrB,OAAO,GAHC,kFAMZ,OAAO,GAGIqtG,EACXhmH,KAESylB,OAAOqrB,KAAK9wC,EAAUulH,2BAA2B/qH,OAG/CyrH,EAAwBjmH,GAEjC8lH,EAAuB9lH,IACvBgmH,EAA4BhmH,IAC5B4xC,EAAiB5xC,GAIR6nF,EAAiB,IACrB/nF,IAGIomH,EAAc,CACzBlmH,EACAylH,EACAU,GAA0B,KAE1B,MAAM7uH,EAAQmuH,EAAanuH,MAC3B,GAAI0d,EAAgBhV,EAAW1I,GAAQ,OAAO0I,EAE9C,MAAMomH,EAAoBD,EAAiBnmH,EAAY6nF,IACvD,OAAO,eACFu+B,EADL,CAEEd,eAAe,eACVc,EAAkBd,eADT,CAEZ,CAAChuH,EAAMoE,KAAM+pH,OAKNY,EAAoB,CAC/BrmH,EACAg6G,EACAmM,GAA0B,KAE1B,MAAMnmG,EAA6Bg6F,EAAmBh6F,YACtD,GAAIi6F,EAAsBj6G,EAAWggB,GAAc,OAAOhgB,EAE1D,MAAMomH,EAAoBD,EAAiBnmH,EAAY6nF,IACvD,OAAO,eACFu+B,EADL,CAEEf,qBAAqB,eAChBe,EAAkBf,qBADH,CAElB,CAACrlG,EAAYtkB,KAAMs+G,Q,gTClIzB,MAAMz5G,EAAKC,EAAOD,GAEZ9I,EAAS,CACbuM,UAAW,CACTC,QAAS,OACTrJ,WAAY,cAEd0rH,mBAAoB,CAClB/hH,KAAM,EACNu6G,SAAU,KAEZyH,gCAAiC,CAC/Bv5G,SAAU,YAEZw5G,iCAAkC,CAChCviH,QAAS,OACTiF,UAAW,KAEbvS,MAAO,CACL2Z,WAAY,sCACZvH,WAAY,KAEd09G,wCAAyC,CACvC5hH,UAAW,GACXklB,YAAa,GACbC,aAAc,IAEhB08F,6BAA8B,CAC5B7hH,UAAW,EACXklB,YAAa,EACbC,aAAc,GAEhB28F,8CAA+C,CAC7C9hH,UAAW,GACXklB,YAAa,EACbC,aAAc,IA+DH,MAAMgL,UAAwBtgC,YAA+B,eAAD,oBACzE2B,OAAmC,KADsC,KAEzEuwH,cAA0B,KAF+C,KAGzEC,cAAmC,KAHsC,KAKzE3wH,MAAQ,CACN4wH,aAAa,EACbC,sBAAsB,EACtBC,uBAAwB,KAExBC,eAAgBryH,KAAKC,MAAMiC,MAC3BqH,UAAW,KACX+oH,gBAAiB,GACjB3rF,gBAAiBD,eAbsD,KA0BzEzkC,MAAQ,KACFjC,KAAKyB,SACPzB,KAAKyB,OAAOQ,QACZjC,KAAKuyH,uBA7BgE,KAiCzEC,uBAAyB,KACvBxyH,KAAK2B,SAAS,CACZuwH,aAAa,KAnCwD,KAuCzEO,aAAgB/vH,IAEdA,EAAM0c,kBAzCiE,KA4CzEszG,oBAAsB,KACpB1yH,KAAK2B,SAAS,CACZuwH,aAAa,KA9CwD,KAkDzES,cAAiBzwH,IACflC,KAAK2B,SACH,CACE0wH,eAAgBnwH,GAElB,IAAMlC,KAAKuyH,uBAvD0D,KA2DzEK,YAAelwH,IACb,MAAMR,EAAQQ,EAAME,cAAcV,MAC9BlC,KAAKC,MAAMkC,UAAUnC,KAAKC,MAAMkC,SAASD,GAC7ClC,KAAK2B,SAAS,CAAE0wH,eAAgBnwH,GAAS,KACvClC,KAAKuyH,mBAAmBM,SACxB7yH,KAAKwpC,gBACLxpC,KAAK2B,SAAS,CACZglC,gBAAiBD,mBAlEkD,KAuEzEosF,wBACEhN,IAEA9lH,KAAK2B,SAAS,CACZuwH,aAAa,EACbC,sBAAsB,EACtBC,uBAAwBtM,KA7E6C,KAiFzEiN,iBAAmB,CACjBjN,EACAtJ,KAEA,IAAKx8G,KAAKiyH,cAAe,OACzB,MAAMe,EAAiBhzH,KAAKiyH,cAAcpwH,eAEpCoxH,EAAeC,YAAqBpN,EAAgBtJ,GAGlDt6G,EAAUlC,KAAKC,MAAfiC,MACFS,EACJT,EAAMgrB,OAAO,EAAG8lG,GAChBC,EACA/wH,EAAMgrB,OAAO8lG,GAGXhzH,KAAKC,MAAMkC,UAAUnC,KAAKC,MAAMkC,SAASQ,GAC7C3C,KAAK2B,SACH,CACE0wH,eAAgB1vH,GAElB,IAAM3C,KAAKuyH,sBAIb77G,WAAW,KACL1W,KAAKyB,QAAQzB,KAAKyB,OAAOQ,QAE7ByU,WAAW,KACL1W,KAAKiyH,eACPjyH,KAAKiyH,cAAckB,kBACjBH,EACAA,EAAiBC,EAAartH,SAGjC,IACF,IAtHoE,KAyHzEwtH,sBACEvrF,IAIA,GAAIA,EAAyB/F,QAAS,OAEtC,MAAM4D,EAAgB1lC,KAAKiyH,cACvBjyH,KAAKiyH,cAAcpwH,eACnB,EACE4jC,EAAazlC,KAAKsB,MAAM+wH,eAR3B,EAaC7sF,YACF,CAAEC,aAAYC,iBACd,CACEzD,WAAY4F,EAAyB5F,WACrCC,eAAgB2F,EAAyB3F,eACzC2C,OAAQgD,EAAyBhD,OACjCS,sBAAuBuC,EAAyBvC,sBAChDnD,sBAAuB0F,EAAyB1F,wBATtC6D,EAXX,EAWDP,WACe4tF,EAZd,EAYD3tF,cAYE1lC,KAAKyB,QACPzB,KAAKyB,OAAOC,cAAcskC,GAExBhmC,KAAKC,MAAMkC,UAAUnC,KAAKC,MAAMkC,SAAS6jC,GAC7ChmC,KAAK2B,SACH,CACE0wH,eAAgBrsF,GAElB,KACEhmC,KAAKuyH,qBACDvyH,KAAKyB,QACPzB,KAAKyB,OAAOG,kBAAkByxH,EAAkBA,MA9JiB,KAoKzEd,mBAAqBhjB,IAAS,KAC5BvvG,KAAKwpC,iBACJ,KAtKsE,KAwKzEA,cAAgB,KAAO,MAAD,EAOhBxpC,KAAKC,MALP2G,EAFkB,EAElBA,QACAqZ,EAHkB,EAGlBA,uBACAC,EAJkB,EAIlBA,iBACAmgB,EALkB,EAKlBA,eACAzgB,EANkB,EAMlBA,MAEF,IAAKhZ,EAAS,OAAO,KAKrB,MAAM0sH,EAAS,IAAI3nH,EAAG4nH,kBACpB5nH,EAAGggB,WAAWxU,MACd8I,EACAC,GAEIulB,EAAazlC,KAAKsB,MAAM+wH,eACxBmB,EAAiBF,EACpBG,gBAAgBpzF,EAAgBoF,GAChCtuB,MArBiB,EA9MtBq8G,KAKA,MAAME,EAAsB,IAAI/nH,EAAGgoH,oBACnCH,EAAeI,MAAMF,GACrB,MAAMG,EAASH,EAAoB5wB,YAE7BwvB,EAAoC7vF,oBAAUoxF,EAAQ1mH,IAAK,CAC/Dk0B,MAAOl0B,EAAM2mH,mBACbnyF,IAAKx0B,EAAM4mH,iBAAmB,EAC9BrgH,QAASvG,EAAM6mH,aACfzxH,KAAM,WAEF0xH,EAAmBt3G,KAAKC,IAC5B,EACA01G,EAAgB1sH,OApBK,IAsBjBsuH,EAAoB5B,EAAgB1sH,OAAS,EAO7C2D,GAJJ0qH,EAAmB,EACf3B,EAAgB1vG,MAAM,EA1BL,IA2BjB0vG,GAGH/sH,IACC,CAACi8B,EAAWztB,KACTmgH,EAAiB,WAAOngH,EAAI,EAAX,MAAmB,IAAMytB,EAAU9tB,SAExDsC,KAAK,KAIR,OAFA09G,EAAoBpnH,SAEb,CAAE/C,YAAW+oH,oBAkMqB6B,CAAcX,GAA7CjqH,EAvBY,EAuBZA,UAAW+oH,EAvBC,EAuBDA,gBAEbU,EAAiBhzH,KAAKiyH,cACxBjyH,KAAKiyH,cAAcpwH,eACnB,EACEuyH,EAAyBzoH,EAAG0oH,2BAA2BC,6BAC3Dd,EACAR,EAAiB,GAEbuB,EAAqBlyF,YACzB,CACE12B,KACAsU,yBACAC,mBACAN,SAEFw0G,GAGFd,EAAOhnH,SAEPtM,KAAK2B,SAASL,IAAK,CACjBiI,YACA+oH,kBACA3rF,gBAAiBI,YACfzlC,EAAMqlC,gBACN4tF,OAzMNj1G,oBACE,GAAItf,KAAKyB,OAAQ,CACf,MAAMihB,EAAO2D,IAASC,YAAYtmB,KAAKyB,QACnCihB,aAAgB8xG,UAClBx0H,KAAKgyH,cAAgBtvG,GAEvB1iB,KAAKiyH,cAAgBjyH,KAAKyB,OAASzB,KAAKyB,OAAOO,eAAiB,MAwMpEjC,SAAU,MAAD,EAUHC,KAAKC,MARPiC,EAFK,EAELA,MACAm+B,EAHK,EAGLA,eACAlT,EAJK,EAILA,kBACAvmB,EALK,EAKLA,QACAgZ,EANK,EAMLA,MACAK,EAPK,EAOLA,uBACAC,EARK,EAQLA,iBACAunB,EATK,EASLA,0BAEIvkC,EAAciqB,EAChBA,EAAkBsB,iBAClBzuB,KAAKC,MAAMyuB,cACX5jB,EACA,IACE2pH,EAAkBtnG,EACpBA,EAAkBwB,0BAClB7jB,EAEE4pH,EAAe,CACnB3xH,MAAO/C,KAAKgyH,cAAgBhyH,KAAKgyH,cAAc1G,YAAc,OAC7Dp7G,YAAa,EAIbwI,OAAQqZ,IAAU7xB,QAAU,KAGxBy0H,EAA8B30H,KAAKC,MAAMyuB,SAK3CxrB,EACEL,EAAOkvH,8CACPlvH,EAAOivH,6BAITjvH,EAAOgvH,wCAEX,OACE,gBAAC,WAAD,KACE,gBAAC,IAAD,CACErnH,OAAQxK,KAAKC,MAAMyuB,SAAW,OAAS,QACvCle,gBAAiB,IACf,uBAAKvL,MAAOpC,EAAO6uH,oBACjB,uBAAKzsH,MAAOpC,EAAO8uH,iCACjB,gBAAC,IAAD,CACEzvH,MAAOlC,KAAKsB,MAAM+wH,eAClBptH,MAAK,eAAOpC,EAAOd,MAAd,GAAwB4yH,GAC7B3zF,WAAYhhC,KAAKsB,MAAMgxH,kBAEzB,gBAAC,IAAD,CACE9nH,OAAQxK,KAAKC,MAAMyuB,SAAW,OAAS,QACvCxsB,MAAOA,EACPuL,kBAAmBvK,EACnBoK,mBAAoBmnH,EACpB1mH,SAA6B,WAAnBsyB,EAA8B,UAAOv1B,EAC/C8iC,WAAY/qC,EAAOd,MACnBI,SAAUnC,KAAK2yH,cACfrwH,OAAQtC,KAAK4yH,YACbpwH,IAAKC,GAAUzC,KAAKyB,OAASgB,EAC7BJ,QAASrC,KAAKyyH,aACdlpH,UAAWvJ,KAAKsB,MAAMiI,UACtB/E,QAAS,IAAMxE,KAAKuyH,qBACpB99F,UAAW/xB,IACT,MAAMikC,EAAkBK,YACtBhnC,KAAKsB,MAAMqlC,gBACX,CACEjkC,QACAukC,wBAAyBjnC,KAAKuyH,mBAC9BrrF,uBAAwBlnC,KAAKozH,wBAGjCpzH,KAAK2B,SAAS,CAAEglC,qBAElB37B,WAAS,EACTN,WAAS,KAGZ1K,KAAKiyH,eAAiBjyH,KAAKsB,MAAM4wH,aAChC,gBAAC,IAAD,CAAmBtN,YAAa5kH,KAAK0yH,qBACnC,gBAAC,IAAD,CACEztH,MAAOyvH,EACP9wH,KAAM5D,KAAKsB,MAAM4wH,YACjB1pF,SAAUxoC,KAAKiyH,cACflxH,UAAU,SACV6nC,eACE,GAGF,gBAAC,IAAD,CAAO3jC,MAAOpC,EAAO+uH,kCACnB,gBAAC,IAAD,CACE77E,aAAa,GACb9iB,SAAU,CAAC1wB,EAAMkjC,KACfzlC,KAAK8yH,wBAAwBrtF,IAE/BpF,eAAgBA,EAChBwV,cAAY,EACZj2B,MAAOA,OAMhB5f,KAAKiyH,gBACHjyH,KAAKsB,MAAM4wH,aACZzqF,GACE,gBAAC,IAAD,CACE7gC,QAASA,EACT4hC,SAAUxoC,KAAKiyH,cACf3pF,0BAA2BxB,YACzB9mC,KAAKsB,MAAMqlC,iBAEb4B,eAAgB1B,YACd7mC,KAAKsB,MAAMqlC,iBAEbC,wBACE5mC,KAAKsB,MAAMqlC,gBAAgBC,wBAE7B3T,SAAU4U,IACR7nC,KAAKozH,sBAAsBvrF,GAE3BnxB,WACE1W,KAAKiC,MACL,KAGJwlC,0BAA2BA,KAKrCh3B,aAAcxL,GACZ,gBAAC,WAAD,MACIjF,KAAKC,MAAMyuB,UACX1uB,KAAKC,MAAMosC,mBACXrsC,KAAKC,MAAMosC,kBAAkB,CAC3BpnC,WAEFjF,KAAKC,MAAMyuB,UACX,gBAAC,IAAD,CACEroB,KAAM,gBAAC,IAAD,MACN/B,MACqB,WAAnB+7B,EACI,QACmB,WAAnBA,EACA,MACA,GAEN97B,SAAO,EACPU,MAAOA,EACPT,QAASxE,KAAKwyH,4BAOvBxyH,KAAKsB,MAAM6wH,sBAAwBnyH,KAAKsB,MAAM8wH,wBAC7C,gBAAC,IAAD,CACExrH,QAASA,EACTgZ,MAAOA,EACPK,uBAAwBA,EACxBC,iBAAkBA,EAClB6pB,mBAAoB/pC,KAAKsB,MAAM8wH,uBAAuB5mG,SACtDqxF,OAAQL,IACDx8G,KAAKsB,MAAM8wH,yBAEhBpyH,KAAK+yH,iBACH/yH,KAAKsB,MAAM8wH,uBACX5V,GAEFx8G,KAAK2B,SAAS,CACZwwH,sBAAsB,EACtBC,uBAAwB,SAG5B3tH,eAAgB,KACdzE,KAAK2B,SAAS,CACZwwH,sBAAsB,EACtBC,uBAAwB,QAG5B3qF,0BAA2BA,S,+MC1gBvC,MAAM5kC,EAAS,CACb6pG,UAAW,CACTj0F,gBAAiB,cACjB3I,WAAY,EACZ4I,OAAQ,IAsBG,MAAMw1F,UAAwCpuG,gBAG1D,eAAD,oBACAwB,MAAQ,CACNmjC,WAAY,GACZrgB,cAAe,IAHjB,KAMAwwG,YAAc90H,cANd,KAOA+0H,cAAgB/0H,cAPhB,KASAg1H,2BAA6B1O,YAC3BpmH,KAAKC,MAAMygC,qBACX1gC,KAAKC,MAAM81C,cAXb,KAuBA9zC,MAAQ,KACFjC,KAAKw6D,YAAYx6D,KAAKw6D,WAAWv4D,SAVvCqd,oBACMtf,KAAKC,MAAM41C,cAAgB71C,KAAKw6D,YAClCx6D,KAAKw6D,WAAWv4D,QAEdjC,KAAK60H,cAAc/nH,SAAW9M,KAAK40H,YAAY9nH,SACjD9M,KAAK40H,YAAY9nH,QAAQ67B,SAAS3oC,KAAK60H,cAAc/nH,SAQzD/M,SAAU,MAAD,EAWHC,KAAKC,MATP81C,EAFK,EAELA,aACA7hC,EAHK,EAGLA,SACAwsB,EAJK,EAILA,qBACAzN,EALK,EAKLA,SACAgjB,EANK,EAMLA,4BACAC,EAPK,EAOLA,6BACAF,EARK,EAQLA,cACA9vC,EATK,EASLA,aACAjB,EAVK,EAULA,MAEMw/B,EAAezkC,KAAKsB,MAApBmjC,WACFswF,EAA4BtwF,EAC9B0kF,YAAuBnpH,KAAKC,MAAMsgC,iBAAkB,CAAEkE,eACtD,GACEuwF,GAAcvwF,KAAgBswF,EAA0BnvH,OAExDqvH,EAAiB,KAChBF,EAA0BnvH,QAE/BqtB,EAAS8hG,EAA0B,GAAGxyH,KAAMwyH,EAA0B,KAGxE,OACE,gBAAC,IAAD,KACGvhH,GACC,uBACEvO,MAAK,aACHwT,gBAAiBjF,EAASuS,KAAKs+C,sBAC5Bp/D,IAGL,gBAAC,IAAD,CACE/C,MAAOuiC,EACPtiC,SAAUsiC,GACRzkC,KAAK2B,SAAS,CACZ8iC,eAGJjd,gBAAiBytG,EACjBhwH,MAAOpC,EAAO6pG,UACdnkF,YACE0tB,EACIC,EACE,8DAAWD,gCACX,2DAAWA,qCACbnrC,EAEN5E,aAAcA,EACd1D,IAAKkqG,GAAc1sG,KAAKw6D,WAAakyC,IAEvC,gBAAC,IAAD,CACElqG,IAEExC,KAAK40H,aAGNI,GACC,gBAAC,IAAD,KACGvwF,EACGswF,EAA0BxvH,IACxBikH,GACE0L,YAAsC,CACpCC,gCAAiC3L,EACjCt1G,SAAUA,EACV1P,QAAS,IACPyuB,EACEu2F,EAA0CjnH,KAC1CinH,GAEJ4L,cAAe7V,YACbxpE,MAIRs/E,YAAsB,CACpBhP,oBAAqB3lF,EACrBxsB,WACA+e,WACA+iB,gBACAo/E,cAAe7V,YACbxpE,GAEFu/E,oBAAqBt1H,KAAK80H,2BAC1BS,gBAAiBv1H,KAAK60H,kBAI9BG,GACA,gBAAC,IAAD,KACE,gBAAC,IAAD,KACE,gBAAC,QAAD,qF,kCCvKpB,oDAAMrpH,EAAKC,EAAOD,GAwBL60B,EAAyD,CACpEza,EACAnG,KAIA,MAAM6zB,EAAY9nC,EAAGw0G,kBAAkBqV,wBAKvC,OAAOzvG,EAAK1a,OAAOm+G,IACjB,IAAKA,EAA0C3B,UAAW,OAAO,EADH,MAI5DtmE,EACEioE,EAA0C5pG,MAD5C2hC,iBAEMV,EAAkDjhC,EAAlDihC,oBAAqBtiC,EAA6BqB,EAA7BrB,yBAE7B,SACEgjC,GACAV,GACAtiC,IAfyBqhC,EAiBvBrhC,EAAyBymB,UAjBqB9B,EAkB9C2d,EAAoB7b,UAjBjB4a,EAAgBnM,EAAYvQ,IAkB3Bqe,EAAiBvc,YAnBC,IAAC4a,EAAuB1c,O,kDChCtD,oBAgBA,MAAMrgC,EAAS,CACb4yH,mBAAoB,CAClBpmH,QAAS,OACTC,cAAe,UAEjBomH,oBAAqB,CACnBrmH,QAAS,SAsCEsmH,IA7BmB11H,GACN,UAAtBA,EAAM2Q,YAEN,uBAAK3L,MAAOpC,EAAO4yH,mBAAoBl0G,UAAWthB,EAAMshB,WACrDthB,EAAMuqB,qBAAqB,CAC1BvlB,MAAO,GACPsc,UAAU,GAAD,OAAKhT,IAAL,YAA4BE,OAEtCxO,EAAM2qB,kBAAkB,CACvB3lB,MAAO,GACPsc,UAAU,GAAD,OAAKjT,IAAL,YAAyBG,QAOxC,uBAAKxJ,MAAOpC,EAAO6yH,oBAAqBn0G,UAAWthB,EAAMshB,WACtDthB,EAAMuqB,qBAAqB,CAC1BvlB,MAAO,CACLlC,MAAM,eAAD,OAAiB9C,EAAMogB,gBAAvB,QAEPkB,UAAWhT,MAEZtO,EAAM2qB,kBAAkB,CAAErJ,UAAWjT,Q,iCCtD7B,SAASuV,EACtBjd,EACA+W,EACA60C,GAEA,IAAI7iC,EAAmB,KAKvB,OAJIhS,GAAUA,EAAOotB,eAAeynB,GAClC7iC,EAAmBhS,EAAOqtB,UAAUwnB,GAC7B5rD,EAAQmkC,eAAeynB,KAC9B7iC,EAAmB/oB,EAAQokC,UAAUwnB,IAChC7iC,EAVT,mC,iCCGA,wIAAO,MAAMupD,EAAoC,MAG/C,mCAAoC,CAClCvlE,QAAS,yOAIAiiH,EAAyB,MAGpC,sBAAsB,EACtB,4BAA4B,IAGjBz+C,EAA6B,MAGxC,qBAAsB,CACpB,CACEnkE,KAAM,UACNU,QAAS,0NAEX,CACEV,KAAM,UACNU,QAAS,iQAEX,CACEV,KAAM,OACNU,QAAS,sJAGb,2BAA4B,CAC1B,CACEV,KAAM,UACNU,QAAS,gOAEX,CACEV,KAAM,OACNU,QAAS,mJAKFmiH,EAAkCtzH,GACH,IAAtCA,EAAKmF,QAAQ,qBACR,CACLsL,KAAM,UACNU,QAAS,wPAMA,qBAATnR,EACK,CACLyQ,KAAM,UACNU,QAAS,0MAGA,mBAATnR,GAAsC,cAATA,EACxB,CACLyQ,KAAM,UACNU,QAAS,gQAIN,M,kCCrET,wSACA,MAAM/H,EAAKC,EAAOD,GAULy0G,EAAmB,CAC9BnhD,EACA1gD,KAEA0gD,EAAU62D,wBACRv3G,EAAyBymB,UACzBzmB,EAAyBmhC,eACvBnhC,EAAyBymB,UAC3BzmB,EAAyBkQ,iBACzB,GACA,KAQSgyF,EAA0B,CACrCxhD,EACApe,KAEA,MAAMk1E,EAAoB,IAAIpqH,EAAGqqH,yBAgFjC,OAzEAD,EAAkB9+C,eAAiB,SACjCiB,EACAgoB,EACAv9F,GAEA,IAAIszH,GAAgB,EAiBpB,OAhBAxzF,oBAAUoe,EAAoBuO,yBAA0BU,IACtD,GAAIA,EAAS9qB,YAAck7D,EAAc,CACvC+1B,GAAgB,EAChB,MAAM9vG,EAAU+xD,EAAgB/nD,SAAS+vE,GACnCg2B,EAAuBpmE,EAASlkC,UAEjB,WAAjBsqG,GAA8C,WAAjBA,EAC/B/vG,EAAQgwG,eAAexzH,GACG,WAAjBuzH,EACT/vG,EAAQiwG,eAAe3qD,WAAW9oE,IACR,YAAjBuzH,GACT/vG,EAAQkwG,aAA0B,MAAb1zH,MAKpBszH,GAGTF,EAAkBh/C,cAAgB,SAASmB,GACzC,IAAIo+C,EAAqB,IAAI3qH,EAAG4qH,4BA6BhC,OA5BA9zF,oBAAUoe,EAAoBuO,yBAA0BU,IACtD,MAAM0mE,EAAc1mE,EAAS2mE,uBACvBP,EAAuBM,EAAY5qG,UAErCssD,EAAgBw+C,SAAS5mE,EAAS9qB,aACf,WAAjBkxF,GAA8C,WAAjBA,EAC/BM,EAAYrmE,SACV+nB,EAAgBy+C,SAAS7mE,EAAS9qB,WAAW4xF,kBAErB,WAAjBV,EACTM,EAAYrmE,SACV,GAAK+nB,EAAgBy+C,SAAS7mE,EAAS9qB,WAAW6xF,kBAE1B,YAAjBX,GACTM,EAAYrmE,SACV+nB,EAAgBy+C,SAAS7mE,EAAS9qB,WAAW8xF,eACzC,OACA,UAQVR,EAAmBt/G,IAAI84C,EAAS9qB,UAAWwxF,KAGtCF,GAGTP,EAAkBgB,kBAAoB,SAAS7+C,GAC7Cz1C,oBAAUoe,EAAoBuO,yBAA0BU,IACtD,MAAM3pC,EAAU+xD,EAAgB/nD,SAAS2/B,EAAS9qB,WAC5CkxF,EAAuBpmE,EAASlkC,UAEjB,WAAjBsqG,GAA8C,WAAjBA,EAC/B/vG,EAAQgwG,eAAermE,EAASI,YACN,WAAjBgmE,EACT/vG,EAAQiwG,eAAe3qD,WAAW3b,EAASI,aAAe,GAChC,YAAjBgmE,GACT/vG,EAAQkwG,aAAqC,SAAxBvmE,EAASI,eAK7B+O,EACJ4Y,YACCh3B,EAAoB7b,UACpB6b,EAAoBnB,eAAiBmB,EAAoB7b,UACzD6b,EAAoB7b,UACpB6b,EAAoBpyB,iBACpB,GACA,qBACAoyB,EAAoB7b,UACpB+wF,EACA,IAAIpqH,EAAGqrH,qBAERnoE,cAAchO,EAAoB+N,kBAO1B/H,EAAqCnG,IAYjB,IAV7B,CACE,YACA,aACA,eACA,kBACA,mBACA,YAEA,2BAEAh5C,QAAQg5C,GAQD+F,EAAsC/F,GAC1C/0C,EAAGsrH,yBAAyBxwE,mCACjC/F,GAQSwhE,EAAyC,CACpDjjD,EACA1gD,EACAo0B,KAEA,MAAM8d,EAAe9d,EAAeukF,kBACpC,OAAIzmE,IAAiB9kD,EAAGo0C,eAAejd,WAC9Bm8B,EAAUk4D,cACfxkF,EAAe3N,UACf2N,EAAe+M,eAAiB/M,EAAe3N,UAC/C2N,EAAelkB,kBAAoBkkB,EAAe+M,cAClDnhC,EAAyBmhC,eACvBnhC,EAAyBymB,UAC3B,oBAEOyrB,IAAiB9kD,EAAGo0C,eAAeq3E,iBACrCn4D,EAAUo4D,iBACf1kF,EAAe3N,UACf2N,EAAe+M,eAAiB/M,EAAe3N,UAC/C2N,EAAelkB,kBAAoBkkB,EAAe+M,cAClDnhC,EAAyBmhC,eACvBnhC,EAAyBymB,UAC3B,oBAEOyrB,IAAiB9kD,EAAGo0C,eAAeiR,UACrCiO,EAAUq4D,aACf3kF,EAAe3N,UACf2N,EAAe+M,eAAiB/M,EAAe3N,UAC/C2N,EAAelkB,kBAAoBkkB,EAAe+M,cAClD/M,EAAe4kF,cACfh5G,EAAyBmhC,eACvBnhC,EAAyBymB,UAC3B,mBACA,sBAGKi6B,EAAUu4D,UACf7kF,EAAe3N,UACf2N,EAAe+M,eAAiB/M,EAAe3N,UAC/C2N,EAAelkB,kBAAoBkkB,EAAe+M,cAClD/M,EAAe4kF,cACfh5G,EAAyBmhC,eACvBnhC,EAAyBymB,UAC3B,mBACA,uBASOo8E,EAAiD,CAC5D7/D,EACAV,EACAlO,KAEA,MAAM8d,EAAe9d,EAAeukF,kBACpC,OAAIzmE,IAAiB9kD,EAAGo0C,eAAejd,WAC9Bye,EAAiB41E,cACtBxkF,EAAe3N,UACf2N,EAAe+M,eAAiB/M,EAAe3N,UAC/C2N,EAAelkB,kBAAoBkkB,EAAe+M,cAClDmB,EAAoBnB,eAAiBmB,EAAoB7b,UACzD,oBAEOyrB,IAAiB9kD,EAAGo0C,eAAeq3E,iBACrC71E,EAAiB81E,iBACtB1kF,EAAe3N,UACf2N,EAAe+M,eAAiB/M,EAAe3N,UAC/C2N,EAAelkB,kBAAoBkkB,EAAe+M,cAClDmB,EAAoBnB,eAAiBmB,EAAoB7b,UACzD,oBAEOyrB,IAAiB9kD,EAAGo0C,eAAeiR,UAIrCzP,EAAiBk2E,mBACtB9kF,EAAe3N,UACf2N,EAAe+M,eAAiB/M,EAAe3N,UAC/C2N,EAAelkB,kBAAoBkkB,EAAe+M,cAClD/M,EAAe4kF,cACf12E,EAAoBnB,eAAiBmB,EAAoB7b,UACzD,mBACA,sBAMKuc,EAAiBm2E,gBACtB/kF,EAAe3N,UACf2N,EAAe+M,eAAiB/M,EAAe3N,UAC/C2N,EAAelkB,kBAAoBkkB,EAAe+M,cAClD/M,EAAe4kF,cACf12E,EAAoBnB,eAAiBmB,EAAoB7b,UACzD,mBACA,uBAWOi8E,EAAqD,CAChE1gH,EACAghD,EACAV,KAEA,MAAM82E,EACJxW,IAGAA,EAAwByW,aACtB,SACA,SACA,IACA,GAMFzW,EACG/zF,aAAa+zF,EAAwBv0F,qBAAuB,GAC5DirG,aAAah3E,EAAoB+N,iBAGpCuyD,EAAwByW,aACtB,WACA,WACA/2E,EAAoB7b,WACpB,GAKFm8E,EAAwB2W,aAEjB3W,GAGT1+E,oBAAUoe,EAAoBuO,yBAA0BU,IACtD,MAAMomE,EAAepmE,EAASlkC,UACxBs0E,EAAepwC,EAAS9qB,UACxB+yF,EAAapsH,EAAGg2G,sBAAsBqW,8BAC1C93B,GAEI+3B,EAAatsH,EAAGg2G,sBAAsBuW,8BAC1Ch4B,GAEInH,EACJjpC,EAASM,YAAc7vD,EAAKG,EAAE,sCAAIw/F,kBAEf,WAAjBg2B,GAA8C,WAAjBA,GAC/ByB,EACEp2E,EAAiB81E,iBACf1rH,EAAGwsH,oBAAoBC,0BAA0Bl4B,GACjDnH,EACAA,EACAl4C,EAAoBnB,eAAiBmB,EAAoB7b,UACzD,qBAGDs8E,0BACAC,gBAAgBwW,GAEnBJ,EACEp2E,EAAiBk2E,mBACf9rH,EAAGwsH,oBAAoBE,yBAAyBn4B,GAChDnH,EACAx4F,EAAKG,EAAE,qDAA2Bq4F,mBAClCx4F,EAAKG,EAAE,0CAAiBw/F,kBACxBr/C,EAAoBnB,eAAiBmB,EAAoB7b,UACzD,qBAGDszF,wCAAwC,UACxChX,0BACAC,gBAAgBwW,GAEnBJ,EACEp2E,EAAiBm2E,gBACf/rH,EAAGwsH,oBAAoBI,sBAAsBr4B,GAC7CnH,EACAx4F,EAAKG,EAAE,oDAA0Bq4F,mBACjCx4F,EAAKG,EAAE,0CAAiBw/F,kBACxBr/C,EAAoBnB,eAAiBmB,EAAoB7b,UACzD,qBAGDwzF,8BAA8B,UAC9BlX,0BACAC,gBAAgB0W,GAChBQ,mBAAmB,UACnBC,UAAUX,IACa,WAAjB7B,GACTyB,EACEp2E,EAAiB41E,cACfxrH,EAAGwsH,oBAAoBC,0BAA0Bl4B,GACjDnH,EACAA,EACAl4C,EAAoBnB,eAAiBmB,EAAoB7b,UACzD,qBAGDs8E,0BACAC,gBAAgBwW,GAEnBJ,EACEp2E,EAAiBk2E,mBACf9rH,EAAGwsH,oBAAoBE,yBAAyBn4B,GAChDnH,EACAx4F,EAAKG,EAAE,mDAAyBq4F,mBAChCx4F,EAAKG,EAAE,0CAAiBw/F,kBACxBr/C,EAAoBnB,eAAiBmB,EAAoB7b,UACzD,qBAGDszF,wCAAwC,UACxChX,0BACAC,gBAAgBwW,GAEnBJ,EACEp2E,EAAiBm2E,gBACf/rH,EAAGwsH,oBAAoBI,sBAAsBr4B,GAC7CnH,EACAx4F,EAAKG,EAAE,kDAAwBq4F,mBAC/Bx4F,EAAKG,EAAE,0CAAiBw/F,kBACxBr/C,EAAoBnB,eAAiBmB,EAAoB7b,UACzD,qBAGDwzF,8BAA8B,UAC9BlX,0BACAC,gBAAgB0W,GAChBS,UAAUX,IACa,YAAjB7B,IACTyB,EACEp2E,EAAiBk2E,mBACf9rH,EAAGwsH,oBAAoBE,yBAAyBn4B,GAChDnH,EACAx4F,EAAKG,EAAE,iDAAuBq4F,mBAC9Bx4F,EAAKG,EAAE,0DAAaw/F,kBACpBr/C,EAAoBnB,eAAiBmB,EAAoB7b,UACzD,mBACA,uBAGDs8E,0BACAC,gBAAgBwW,GAEnBJ,EACEp2E,EAAiBm2E,gBACf/rH,EAAGwsH,oBAAoBI,sBAAsBr4B,GAC7CnH,EACAx4F,EAAKG,EAAE,kDAAwBq4F,mBAC/Bx4F,EAAKG,EAAE,kEAAiBw/F,kBACxBr/C,EAAoBnB,eAAiBmB,EAAoB7b,UACzD,qBAGD4yF,aAAa,UAAWr3H,EAAKG,EAAE,yBAAsB,IAAI,GACzD4gH,0BACAC,gBAAgB0W,OASZ5W,EAAkC,CAC7C1uE,EACAwuE,KAEA1+E,oBACEkQ,EAAegmF,gBACdC,IACMA,EAAUrc,aAWb4E,EAAwBgB,qBACtByW,EAAUhtG,UACV,KAZFu1F,EAAwByW,aACtBgB,EAAUhtG,UACVgtG,EAAUnqG,iBACV,GACAmqG,EAAUC,cAEZ1X,EAAwB2X,4BACtBF,EAAUjqG,uBAWdwyF,EACG/zF,aAAa+zF,EAAwBv0F,qBAAuB,GAC5DirG,aAAae,EAAU3vF,kBAM9Bk4E,EAAwBgB,qBAAqB,wBAAyB,O,0JC5bxE,MAAM4W,EAAU,CACdC,EACAC,EACA7gH,EACAuyC,EACAzyB,KAEA,IAAK8gG,EAAa,OAAOC,EAGzB,GAA2B,kBAAhBD,EAA0B,CACnC,GACe,QAAb5gH,GACA4gH,EAAYtuE,QACkB,kBAAvBsuE,EAAYtuE,OAEnB,OAAO,eACFsuE,EADL,CAEEtuE,OAAQquE,EACNC,EAAYtuE,OACZuuE,EACA7gH,EACAuyC,EACAzyB,KAGC,GACQ,UAAb9f,GACA4gH,EAAYvuE,OACiB,kBAAtBuuE,EAAYvuE,MAEnB,OAAO,eACFuuE,EADL,CAEEvuE,MAAOsuE,EACLC,EAAYvuE,MACZwuE,EACA7gH,EACAuyC,EACAzyB,KAOR,MAAO,CACLA,UACgB,QAAdA,EAEI,SACA,MACNuyB,MAAoB,QAAbryC,EAAqB4gH,EAAcC,EAC1CvuE,OAAqB,QAAbtyC,EAAqB6gH,EAAUD,EACvCruE,oBAKEuuE,EAAc,CAClBF,EACAG,EACAF,IAEKD,EAE6B,kBAAhBA,EACZA,IAAgBG,EAAgBF,EAE7BD,EAEHA,IAAgBG,EAAgBF,EAE7B,eACFD,EADL,CAEEvuE,MAAOyuE,EAAYF,EAAYvuE,MAAO0uE,EAASF,GAC/CvuE,OAAQwuE,EAAYF,EAAYtuE,OAAQyuE,EAASF,KAX5CD,EAgBLI,EAAyB,CAAC,gBAAC,IAAD,CAAa/0H,IAAI,WAE3Cg1H,EAA4Bp5H,GAChC,uBAAKshB,UAAU,kBACb,uBAAKA,UAAU,yBACb,uBAAKA,UAAU,uBAAuBthB,EAAMQ,QAE9C,uBAAK8gB,UAAU,wBASb+3G,EAAgBr5H,GACpB,gBAAC,eAAD,iBACMA,EADN,CAEEyoD,gBAAiBzoD,EAAMyoD,iBAAmB0wE,EAC1CG,cAAeF,KAsBJ,MAAMG,UAAqB15H,YAA+B,eAAD,oBACtEwB,MAAQ,CACNm4H,WAAYz5H,KAAKC,MAAMuqD,cAF6C,KAKtErE,WAAa,CACXmE,EACAlyC,EACAuyC,EACAzyB,KACI,MAAD,EAC4Cl4B,KAAKC,MAA5C6b,EADL,EACKA,QAAS49G,EADd,EACcA,0BAEXt9G,EAASpc,KAAKC,MAAM6b,QAAQwuC,GAClC,IAAKluC,EAAQ,OAAO,EAEpB,MAAMu9G,EAAoBC,oBAAU55H,KAAKsB,MAAMm4H,YAC/C,IAA+C,IAA3CE,EAAkBjyH,QAAQ4iD,GAC5B,OAAO,EAGT,GAAIovE,GAA6C,cAAhBt9G,EAAO7Z,KAAsB,CAE5D,MAAMs3H,EAAsBF,EAAkBt1G,KAC5CimC,GAA2C,cAA7BxuC,EAAQwuC,GAAY/nD,MAEpC,GAAIs3H,EAQF,OAPA75H,KAAK2B,SAAS,CACZ83H,WAAYP,EACVl5H,KAAKsB,MAAMm4H,WACXI,EACAvvE,MAGG,EAeX,OAVAtqD,KAAK2B,SAAS,CACZ83H,WAAYV,EACV/4H,KAAKsB,MAAMm4H,WACXnvE,EACAlyC,EACAuyC,EACAzyB,MAIG,GAjD6D,KAoDtE4hG,UAAaL,GAA2Bz5H,KAAK2B,SAAS,CAAE83H,eAExD15H,SAAU,MACA+b,EAAY9b,KAAKC,MAAjB6b,QACR,OACE,gBAAC,IAAD,KACGtI,GACC,gBAAC,+BAAD,CACE+N,UAAS,UACP/N,EAASumH,oBADF,2CAGTC,WAAY,CAAC1vE,EAAoB9jD,KAC/B,MAAM4V,EAASN,EAAQwuC,GACvB,OAAKluC,EAODA,EAAOksC,WACFlsC,EAAOJ,eAId,gBAAC,OAAD,KACG,EAAGzb,UACF,gBAAC+4H,EAAD,CACE9yH,KAAMA,EACN/F,MAAOF,EAAKG,EAAE0b,EAAO3b,OACrBioD,gBAAiBtsC,EAAOssC,iBAEvBtsC,EAAOJ,kBAlBdpT,QAAQuE,MACN,uCAAyCm9C,GAEpC,OAqBXpoD,MAAOlC,KAAKsB,MAAMm4H,WAClBt3H,SAAUnC,KAAK85H,gB,kCCvP3B,gGAQA,MAAMnuH,EAAKC,EAAOD,GAKH,KACbsxD,uBAAuBv5B,GAOrB,OANK1jC,KAAKi6H,qBAAqBv2F,IAC7B96B,QAAQ8zB,KAAR,2BACsBgH,EADtB,6GAKK1jC,KAAKi6H,qBAAqBv2F,IAEnCw2F,4BAA6B,SAASx2F,EAAYq5B,GAC3CA,EAAoB5qC,UAMpB4qC,EAAoBM,gBAMpBN,EAAoBD,iBAOrB98D,KAAKi6H,qBAAqB33E,eAAe5e,GAC3C96B,QAAQ8zB,KAAR,6DACwDgH,EADxD,oDAMF96B,QAAQC,KAAR,+DAC0D66B,EAD1D,OAGA1jC,KAAKi6H,qBAAqBv2F,GAAcq5B,GAhBtCn0D,QAAQ8zB,KAAR,6DACwDgH,EADxD,uDANA96B,QAAQ8zB,KAAR,6DACwDgH,EADxD,sDANA96B,QAAQ8zB,KAAR,6DACwDgH,EADxD,iDA8BJy2F,iDAAiD/mG,IACxC,CACLjB,UAAW2kD,IACXzZ,gBAAiB9xD,GACfI,EACGyuH,yBAAyB7uH,GACzBsyC,QACAw8E,UACLv9D,iBAAkBvxD,GAAUI,EAAGyuH,yBAAyB7uH,GACxDrF,aAAcktB,EAAQltB,eAG1B+zH,qBAAsB,CACpB/3E,OAAQ,CACN/vB,UAAWqxC,IACXnG,gBAAiB,IAAM,IAAI1xD,EAAG2uH,aAAa,IAC3Cx9D,iBAAkBvxD,GAAUI,EAAG4qB,eAAehrB,GAC9CrF,aAAc,mBAEhB,iCAAkC,CAChCisB,UAAW+rC,IACXb,gBAAiB,IAAM,IAAI1xD,EAAG4uH,kBAAkB,IAChDz9D,iBAAkBvxD,GAAUI,EAAGwtB,oBAAoB5tB,GACnDrF,aAAc,yBAEhB,iCAAkC,CAChCisB,UAAW8tC,IACX5C,gBAAiB,IAAM,IAAI1xD,EAAG6uH,kBAAkB,IAChD19D,iBAAkBvxD,GAAUI,EAAGkuB,oBAAoBtuB,GACnDrF,aAAc,yBAEhB,mBAAoB,CAClBisB,UAAWurC,IACXL,gBAAiB,IAAM,IAAI1xD,EAAG8uH,WAAW,IACzC39D,iBAAkBvxD,GAAUI,EAAG+vB,aAAanwB,GAC5CrF,aAAc,iBAEhB,2BAA4B,CAC1BisB,UAAWuoG,IACXr9D,gBAAiB,IAAM,IAAI1xD,EAAGgvH,mBAAmB,IACjD79D,iBAAkBvxD,GAAUI,EAAGsmE,qBAAqB1mE,GACpDrF,aAAc,0BAEhB,6BAA8B,CAC5BisB,UAAW4/C,IACX1U,gBAAiB,IAAM,IAAI1xD,EAAGivH,gBAAgB,IAC9C99D,iBAAkBvxD,GAAUI,EAAGkvH,kBAAkBtvH,GACjDrF,aAAc,uBAEhB,kCAAmC,CACjCisB,UAAWghD,IACX9V,gBAAiB,IAAM,IAAI1xD,EAAG4nE,sBAAsB,IACpDzW,iBAAkBvxD,GAAUI,EAAG+xB,wBAAwBnyB,GACvDrF,aAAc,8BAEhB,2BAA4B,CAC1BisB,UAAW2kD,IACXzZ,gBAAiB,IAAM,IAAI1xD,EAAGmvH,eAAe,IAC7Ch+D,iBAAkBvxD,GAAUI,EAAGovH,WAAWxvH,EAAQI,EAAGmvH,gBACrD50H,aAAc,yB,kDChHpB,4QA2CO,MAAMusG,EAAuB,IAA0B,CAC5D,CACEjV,OAAQ,eACRv6F,KAAM,eACNuvG,oBAAqB,EACrBK,iBAAkB,sCAClBE,mBAAoB,CAClB,CACEr/F,QAAS,4DAEX,CACEA,QAAS,+EAEX,CACEA,QAAS,oFACTu/F,gBAAgB,GAElB,CACEv/F,QAAS,gEACTu/F,gBAAgB,GAElB,CACEv/F,QAAS,6EAGbw/F,iBAAkB,sGAEpB,CACE1V,OAAQ,iBACRv6F,KAAM,iBACNuvG,oBAAqB,EACrBK,iBAAkB,2BAClBE,mBAAoB,CAClB,CACEr/F,QAAS,4DAEX,CACEA,QAAS,+EAEX,CACEA,QAAS,oFACTu/F,gBAAgB,GAElB,CACEv/F,QAAS,gEACTu/F,gBAAgB,GAElB,CACEv/F,QAAS,4EAGbw/F,iBAAkB,sGAEpB,CACE1V,OAAQ,KACRv6F,KAAM,kBACNuvG,oBAAqB,EACrBO,mBAAoB,CAClB,CACEr/F,QAAS,8JAMJsnH,EAAgB,CAC3Bz3E,EACAC,IAEOD,IACJ9tC,KAAKiuC,GACJC,IAAMxsC,IAAN,UAAa8jH,IAAiBn3E,QAA9B,UAA+C,CAC7C1vB,OAAQ,CACNovB,UAEFQ,QAAS,CACPC,cAAeP,MAIpBjuC,KAAKyuC,GAAYA,EAASC,MAGlB+2E,EAAgB,CAC3B33E,EACAC,IAEOD,IACJ9tC,KAAKiuC,GACJC,IAAMxsC,IAAN,UAAa8jH,IAAiBn3E,QAA9B,WAAgD,CAC9C1vB,OAAQ,CACNovB,UAEFQ,QAAS,CACPC,cAAeP,MAIpBjuC,KAAKyuC,GAAYA,EAASC,KAAK2/D,QAGvBqX,EAAsB,CACjC53E,EACAC,IAEOD,IACJ9tC,KAAKiuC,GACJC,IAAMxsC,IAAN,UAAa8jH,IAAiBn3E,QAA9B,oBAAyD,CACvD1vB,OAAQ,CACNovB,UAEFQ,QAAS,CACPC,cAAeP,MAIpBjuC,KAAKyuC,GAAYA,EAASC,MAGlB6tD,EAAyB,CACpCzuD,EACAC,EACA43E,IAEO73E,IACJ9tC,KAAKiuC,GACJC,IAAMC,KAAN,UACKq3E,IAAiBn3E,QADtB,oBAEEs3E,EACA,CACEhnG,OAAQ,CACNovB,UAEFQ,QAAS,CACPC,cAAeP,MAKtBjuC,KAAKyuC,GAAYA,EAASC,MAKlBjB,EAAgB9uB,GAOpBuvB,IACJC,KADI,UACIq3E,IAAiBn3E,QADrB,8BAC0D1vB,GAC9D3e,KAAKyuC,GAAYA,EAASC,MAGlBiuD,EAA2B,CACtC5U,EACAyU,EACAtV,IAEM,GAAN,OACEs+B,IAAiBn3E,QADnB,wDAEgDC,mBAC9Cy5C,GAHF,8BAIuBz5C,mBACrBkuD,GALF,0BAMmBluD,mBAAmB44C,K,+FC5MxC,MAAM95F,EAAS,CACb+hG,SAAU,CACRnrF,SAAU,SACVE,WAAY,SACZD,aAAc,YAEhBi0B,UAAW,CACTt1B,IAAKysF,MAsBT,MAAMu2B,UAAsBv7H,YAG1B6f,mBAAmBolE,IACZA,EAAU2gB,aAAe1lG,KAAKC,MAAMylG,aACvChvF,WAAW,KACL1W,KAAK2tC,WAAW3tC,KAAK2tC,UAAU1rC,SAClC,KAIPlC,SAAU,MAAD,EAYHC,KAAKC,MAVP61G,EAFK,EAELA,KACAlR,EAHK,EAGLA,SACA1oE,EAJK,EAILA,OACA/b,EALK,EAKLA,SACAvB,EANK,EAMLA,aACA08G,EAPK,EAOLA,YACAxwD,EARK,EAQLA,OACAuW,EATK,EASLA,eACAk6C,EAVK,EAULA,eACAC,EAXK,EAWLA,sBAGF,OACE,gBAACv6H,EAAA,EAAD,KACGuS,IACC,MAAMlP,EAAQtE,KAAKC,MAAMylG,YACvB,gBAAC5K,EAAA,EAAD,CACE9sD,GAAG,oBACHxjC,OAAO,OACPhI,IAAKmrC,GAAc3tC,KAAK2tC,UAAYA,EACpChjC,aAAci6F,EACdtiG,OAAQiI,GAAKvK,KAAKC,MAAMs8D,SAAShyD,EAAE3H,cAAcV,OACjDoqB,WAAY5pB,IACa,KAAnBA,EAAM6kB,UAEJvnB,KAAK2tC,WAAW3tC,KAAK2tC,UAAU3mB,QAGvCtc,WAAS,EACTzF,MAAOpC,EAAO8qC,YAGhB,uBACE1oC,MAAK,eACApC,EAAO+hG,SADP,CAEHnxF,MAAO0M,EACH3M,EAAS+d,SAASjW,uBAClBxQ,EACJL,UAAWyxB,EAAS,cAAWpxB,EAC/B6xB,WAAYT,EAAS,OAAS,YAG/B0oE,GAIC62B,EAAY,CAChB16F,aAAa,aAAD,OAAevtB,EAAS+d,SAAS6zE,gBAC7C3sF,gBAAiB0H,EACG,KAAhBm7G,EACE9nH,EAAS+d,SAAShW,wBACF,UAAhB+/G,EACA9nH,EAAS+d,SAASmqG,6BAClBloH,EAAS+d,SAASoqG,oCACpB7wH,EACJ2I,MACkB,KAAhB6nH,OACIxwH,EACgB,UAAhBwwH,EACA9nH,EAAS+d,SAASqqG,eAClBpoH,EAAS+d,SAASsqG,kBAGpBrrE,EAAW5xC,EACf,gBAAC5K,EAAA,EAAD,CAAUE,SAAU,GAAInP,IAAK6Z,MAC3B,KAEJ,OACE,gBAACsmF,EAAA,EAAD,CACEjgG,MAAK,eAAOw2H,GACZh2H,YAAanB,EACbksD,SACEgrE,GAAyBhrE,EACrBgrE,EAAsB,2BAAMhrE,IAC5BA,EAENm1C,mBAAoB41B,EACpB5/G,kBAAmB3b,KAAKC,MAAM0b,kBAC9BnX,QAAS,KACF68E,IACDrhF,KAAKC,MAAMylG,aAEfrkB,EAAelhE,EAAW,KAAO21F,KAEnCzpF,cAAe3pB,IAnHH,IAoHNA,EAAM+8B,QACLqrC,IACD9qE,KAAKC,MAAMylG,cAEfrkB,EAAe,MACfvW,EAAOgrC,WAURulB,Q,kBClJf,MAAMx4H,EACW,CACbi5H,UAAW,oBACXrsH,OAAQ,EACRQ,UAAW,OACX2J,aAAc,OACd7W,MAAO,OACPsrC,UAAW,cAIA,SAAS0tF,GAAc,QAAEt2G,IACtC,OACE,gBAACxkB,EAAA,EAAD,KACGE,GACC,uBACE8D,MAAK,eACApC,EADA,CAEHkrC,YAAatoB,EACTtkB,EAAcowB,SAAShW,wBACvBpa,EAAcowB,SAASmqG,kC,sBCvBvC,kCAgCe,MAAMxlB,UAA0Cp2G,YAE5D,eAAD,oBAEAmrB,wBAA0BC,YACxBlrB,KAAKC,MAAMwhF,cAGbxmB,kBACMj7D,KAAK2kB,OAAO3kB,KAAK2kB,MAAMs2C,kBAG7B+gE,eACElmB,EACAjlG,EACAD,EACA4qH,GACC,MAAD,EASIx7H,KAAKC,MAPPmhF,EAFF,EAEEA,cACA66C,EAHF,EAGEA,iBACAz6C,EAJF,EAIEA,aACA06C,EALF,EAKEA,WACAC,EANF,EAMEA,WACA76C,EAPF,EAOEA,YACAH,EARF,EAQEA,YAGIi7C,EAAkB96C,IAAgBw0B,EAClClR,EAAWzjB,EAAY20B,GAE7B,OACE,gBAAC,EAAD,CACEA,KAAMA,EACNlR,SAAUA,EACV1oE,SAAQggG,GAAaA,EAAWpmB,GAChCv5C,SAAUlW,GAAWrmD,KAAKC,MAAMs8D,SAASu5C,EAAMzvD,GAC/Cq/C,YAAa02B,EACbx9G,aACEq9G,EAAmB,IAAMA,EAAiBnmB,QAAQhrG,EAEpDqV,UAA2C,IAAjCihE,EAAc15E,QAAQouG,GAChCz0B,eAAgBrhF,KAAKC,MAAMohF,eAC3Bi6C,YAAa95C,GAAeA,EAAaojB,IAAkB,GAC3DjpF,kBAAmB,IAAM3b,KAAKC,MAAM0b,kBAAkBm6F,EAAMjlG,GAC5Di6D,OAAQqxD,EACRZ,eAAgC,UAAhB3qH,EAChB4qH,sBAAuBA,GAAyB,OAKtDz7H,SAAU,MAAD,EAWHC,KAAKC,MATPwP,EAFK,EAELA,OACA1M,EAHK,EAGLA,MACAm+E,EAJK,EAILA,SACAk1B,EALK,EAKLA,gBACA90B,EANK,EAMLA,YACA26C,EAPK,EAOLA,iBACA9lB,EARK,EAQLA,aACA50B,EATK,EASLA,sBACA86C,EAVK,EAULA,uBAEMpxG,EAA4BjrB,KAA5BirB,wBAER,OACE,gBAAComB,EAAA,EAAD,KACGzgC,GACC,gBAACi6G,EAAA,EAAD,KACG1pG,GACC,gBAAC,IAAD,CACE3e,IAAKujB,GAAS/lB,KAAK2kB,MAAQoB,EAC3BtW,OAAQA,EACRksD,SAAUulB,EAASt7E,QAAUuwG,EAAe,EAAI,GAChDzwF,UACEu2G,EACIK,IACAC,IAENC,YAAa,EACX3rH,QACAxM,MACAY,YAMA,GAAI4L,GAASqwE,EAASt7E,OACpB,OACE,uBAAKX,MAAOA,EAAOZ,IAAKA,GACtB,gBAAC,IAAD,CACE/D,UAAQ,EACRkE,QAAS2xG,EACT1wG,YAAa2wG,KAMrB,MAAMN,EAAO50B,EAASrwE,GAChBurH,EAAkB96C,IAAgBw0B,EAExC,OACE,uBAAK7wG,MAAOA,EAAOZ,IAAKA,GACtB,gBAAC4mB,EAAD,CACEa,UAAW,KACT9rB,KAAKC,MAAMohF,eAAey0B,GAGnB,IAET2mB,QAAS,KAAOL,EAChB32G,QAAS,KACP42G,GACIA,EAAuBvmB,GAG7B9pF,KAAM,KACJu1D,EAAsBu0B,KAGvB,EACC7pF,oBACAC,oBACAC,SACA1G,cAIA,MAAMi3G,EAAaxwG,EACjB,2BACGC,GAAU,gBAAC4vG,EAAD,CAAet2G,QAASA,IAClCzlB,KAAKg8H,eACJlmB,EACAjlG,EACAD,EACe,UAAfuQ,EACI8K,EACA,QAKV,OAAKywG,EAEiB,UAAfv7G,EACHu7G,EACAzwG,EAAkBywG,GAJE,SAUlC35H,MAAOA,S,uEClKR,MAAM45H,UAA0B78H,YAC7CqV,YAAYlV,GACVmV,MAAMnV,GAEND,KAAKsB,MAAQtB,KAAKkX,UAAUjX,GAG9BmX,0BAA0BC,GAEtBA,EAAStP,eAAiB/H,KAAKC,MAAM8H,cACrCsP,EAASzQ,UAAY5G,KAAKC,MAAM2G,SAEhC5G,KAAK2B,SAAS3B,KAAKkX,UAAUG,IAIjCH,UAAUjX,GAAsB,MACtB2G,EAA0B3G,EAA1B2G,QAASmB,EAAiB9H,EAAjB8H,aACXH,EAAmBhB,EAAQiB,sBAKjC,MAAO,CACL4P,aALmB7P,EAAiBI,YAAYD,GAC9CH,EAAiBM,YAAYH,GAAc0gF,UAC3C,MAON1oF,SAGE,OAFyBC,KAAKsB,MAAtBmW,cAGN,IAAK,QACH,OACE,gBAACmlH,EAAA,EAAD,CACEh2H,QAAS5G,KAAKC,MAAM2G,QACpBmB,aAAc/H,KAAKC,MAAM8H,aACzBgpB,gBAAiB/wB,KAAKC,MAAM8wB,gBAC5B3vB,SAAUpB,KAAKC,MAAMmB,SACrB6D,MAAOjF,KAAKC,MAAMgF,MAClB0oE,OAAQ3tE,KAAKC,MAAM0tE,OACnBt+B,WAAYrvC,KAAKC,MAAMovC,WACvBlvB,SAAUngB,KAAKC,MAAMkgB,SACrBpW,SAAU/J,KAAKC,MAAM8J,SACrByR,cAAexb,KAAKC,MAAMub,gBAGhC,QACE,OAAO,OCjDf,MAAM3Y,EAAS,CACbuM,UAAW,CAAEO,KAAM,EAAGN,QAAS,OAAQrJ,WAAY,YACnD62H,kBAAmB,CAAEltH,KAAM,GAC3BmtH,kBAAmB,CAAE5sH,WAAY,GAAI0J,aAAc,IAyCtCmjH,IAtCuB,EACpCn2H,UACA0O,kBACAC,mBACAgC,0BACAE,eACA1P,eACA5F,WACAsL,oBACAM,cAGE,uBAAK9I,MAAOpC,EAAOuM,WACjB,uBAAKnK,MAAOpC,EAAOg6H,mBACjB,gBAACl1C,EAAA,EAAD,CACE/gF,QAASA,EACT0O,gBAAiBA,EACjBC,iBAAkBA,EAClBgC,wBAAyBA,EACzBwZ,gBAAiBtpB,IACjBgQ,aAAcA,EACd/M,WAAS,EACT8gC,oBAAqBzjC,EACrB5F,SAAUA,EACVsL,kBAAmBA,EACnBM,SAAUA,KAGd,gBAAC,EAAD,CACEhG,aAAcA,EACdgpB,gBAAiBtpB,IACjBb,QAASA,EACT3B,MAAOpC,EAAOi6H,sB,iCC/DtB,yGAUO,MAAME,EAAe/8H,GAExB,kBAAC,IAAD,CACEuE,QAASvE,EAAMuE,QACfiB,YAAa,kBAAC,IAAD,KAAiBxF,EAAMwF,aACpCw3H,gBAAc,IAKPC,EAAkBj9H,GAE3B,kBAAC,IAAD,CACEuE,QAASvE,EAAMuE,QACfiB,YAAa,kBAAC,IAAD,KAAiBxF,EAAMwF,aACpC03H,mBAAiB,K,4GCxBvB,MAAMxxH,EAAKC,EAAOD,GASLuxD,EAAyB,CACpCqe,GACEne,mBAAkBD,WAAUG,6BAEvB,cAAcvjD,YACnB5E,YAAYlV,GACVmV,MAAMnV,GADW,KAsCnBm9H,OAAS,KACP,IAAKp9H,KAAKC,MAAMk9D,GAAW,OAE3B,MAAMnxD,EAAoB,IAAIL,EAAGM,kBACjCjM,KAAKsB,MAAM+7H,mBAAmBC,YAAYtxH,GACrCsxD,EAGHt9D,KAAKC,MAAMk9D,GAAUogE,gBACnBv9H,KAAKC,MAAM2G,QACXoF,GAJFhM,KAAKC,MAAMk9D,GAAUogE,gBAAgBvxH,GAOvCA,EAAkBM,SAEdtM,KAAKC,MAAMgX,SAASjX,KAAKC,MAAMgX,WArDlB,KAwDnBumH,QAAU,KACJx9H,KAAKC,MAAMsqC,UAAUvqC,KAAKC,MAAMsqC,YAtDpCvqC,KAAKsB,MAAQ,CACX+7H,mBAAoBjgE,KAEtBp9D,KAAKkX,UAAUjX,EAAMk9D,IAGvB1e,uBACEz+C,KAAKsB,MAAM+7H,mBAAmB/wH,SAGhC8K,0BAA0BC,KAEpBrX,KAAKC,MAAM2D,MAAQyT,EAASzT,MAC7ByT,EAASzT,MAAQ5D,KAAKC,MAAMk9D,KAAc9lD,EAAS8lD,KAEpDn9D,KAAKkX,UAAUG,EAAS8lD,IAI5BjmD,UAAUmmH,GACR,IAAKA,EAAoB,OAEzB,MAAMrxH,EAAoB,IAAIL,EAAGM,kBACjCoxH,EAAmBC,YAAYtxH,GAC1BsxD,EAGHt9D,KAAKsB,MAAM+7H,mBAAmBE,gBAC5Bv9H,KAAKC,MAAM2G,QACXoF,GAJFhM,KAAKsB,MAAM+7H,mBAAmBE,gBAAgBvxH,GAOhDA,EAAkBM,SAyBpBvM,SACE,MAAME,EAAQD,KAAKC,MAEnB,OAAOH,IAAMs/B,cAAcm8C,EAApB,eACFt7E,EADE,CAEL,CAACk9D,GAAWn9D,KAAKsB,MAAM+7H,mBACvB9yF,SAAUvqC,KAAKw9H,QACfvmH,QAASjX,KAAKo9H,c,kJC9EtB,MAAMv6H,EACC,CACHwM,QAAS,QAFPxM,EAIE,CACJwM,QAAS,OACTrJ,WAAY,SACZmvB,YAAa,EACbC,aAAc,GAQLqoG,EAAgBx9H,IAC3B,MAAMkB,EAAgBrB,aAAiBojH,KAEvC,OACE,uBACEj+G,MAAK,eACApC,EADA,CAEH4V,gBAAiBtX,EAAc4kB,KAAKs+C,wBAGrCpkE,EAAMmB,WAWAs8H,EAAiBz9H,GAC5B,uBACEgF,MAAK,eACApC,EADA,CAEH8M,KAAM1P,EAAM8F,OAAS,OAAI+E,GACtB7K,EAAMgF,QAGVhF,EAAMmB,W,iCCjDX,gDAIA,MAAMyB,EAAS,CACb86H,OAAQ,CACN5yG,OAAQ,OACR5X,YAAa,GAEfyqH,YAAa,QAGTxiC,EAAayiC,yBAAe,IAChC,0BAAM54H,MAAOpC,EAAO86H,QAClB,kBAAC,IAAD,CAAgBz0H,UAAWrG,EAAO+6H,gBAGvBxiC,O,kJCgBf,MAAMv4F,EAAS,CACbwD,KAAM,CAAEtD,MAAO,GAAI0M,OAAQ,GAAI0D,YAAa,IAC5C2qH,SAAU,CAAEnuH,KAAM,GAClBouH,WAAY,CAAE5qH,YAAa,GAAIyG,aAAc,IAGxC,MAAMokH,UAAgCl+H,YAG1C,eAAD,oBACAwB,MAAQ,CAAEsC,MAAM,GADhB,KAuBAq6H,aAAe,KACbC,cACAl+H,KAAK2B,SAAS,CAAEiC,MAAM,KAtBxB4/F,uBAAwB,MAAD,EACaxjG,KAAKC,MAA/B09F,EADa,EACbA,YAAaiG,EADA,EACAA,KAAM51D,EADN,EACMA,GAC3B,GAAI2vD,EAAYL,aAAc,CAE5B,KADkBK,EAAYL,aAAaE,OAKzC,OAHAx9F,KAAK2B,SAAS,CACZiC,MAAM,KAED,EASX,OALA5D,KAAK2B,SAAS,CACZiC,MAAM,IAERu6H,YAAiC,CAAEv6B,OAAM51D,QAElC,EAQTjuC,SAAU,MACA6D,EAAS5D,KAAKsB,MAAdsC,KADD,EAEgC5D,KAAKC,MAApCs9F,EAFD,EAECA,qBAAsBqG,EAFvB,EAEuBA,KAC9B,OAAKhgG,EAGH,gBAAC,IAAD,CACEQ,QAAS,CACPm5F,GACE,gBAAC,IAAD,CACEj5F,MAAO,gBAAC,QAAD,oCACPD,IAAI,YACJE,SAAO,EACPC,QAAS,KACPxE,KAAK2B,SAAS,CAAEiC,MAAM,IACtB25F,QAKRj9C,iBAAkB,CAChB,gBAAC,IAAD,CACEh8C,MACW,QAATs/F,EACE,gBAAC,QAAD,wBAEA,gBAAC,QAAD,yBAGJv/F,IAAI,QACJE,SAAS,EACTC,QAASxE,KAAKi+H,gBAGlBv5H,mBAAmB,EACnBD,eAAgBzE,KAAKi+H,aACrBr6H,KAAMA,EACNnD,MAAOT,KAAKC,MAAMQ,OAElB,gBAAC,IAAD,CAAQmE,UAAQ,GACd,gBAAC,IAAD,CAAMA,UAAQ,EAACoB,WAAW,UACd,QAAT49F,EACC,gBAAC,IAAD,KACE,gBAAC,QAAD,mHAMF,gBAAC,IAAD,KACE,gBAAC,QAAD,6EAON,gBAAC,IAAD,CAAMh/F,UAAQ,EAACoB,WAAW,UACxB,gBAAC,IAAD,CAAMf,MAAOpC,EAAOwD,OACpB,gBAAC,IAAD,CAAMpB,MAAOpC,EAAOi7H,UAClB,gBAAC,QAAD,yMAOJ,gBAAC,IAAD,CAAMl5H,UAAQ,EAACoB,WAAW,UACxB,gBAAC,IAAD,CAAUf,MAAOpC,EAAOwD,OACxB,gBAAC,IAAD,CAAMpB,MAAOpC,EAAOi7H,UAClB,gBAAC,QAAD,4KAOJ,gBAAC,IAAD,CAAM74H,MAAOpC,EAAOk7H,WAAYpiG,MAAM,SACpC,yBACE,gBAAC,QAAD,oBA5EQ,MAqFtB,MAAM+nE,UAA4B5jG,YAA4B,eAAD,oBAC3Ds+H,QAAoC,KAEpC56B,uBACE,QAAIxjG,KAAKo+H,SACAp+H,KAAKo+H,QAAQ56B,uBAMxBzjG,SACE,OACE,gBAAC,IAAmBmB,SAApB,KACIy8F,GACA,gBAACqgC,EAAD,CACErgC,YAAaA,EACbn7F,IAAK67H,GAAWr+H,KAAKo+H,QAAUC,EAC/B9gC,qBAAsBv9F,KAAKC,MAAMs9F,qBACjCvvD,GAAIhuC,KAAKC,MAAM+tC,GACfvtC,MAAOT,KAAKC,MAAMQ,MAClBmjG,KAAM5jG,KAAKC,MAAM2jG,SAQdF,O,6VCvGf,MAAM/3F,EAAKC,EAAOD,GAoEZ9I,EAAS,CACbuM,UAAW,CACTC,QAAS,OACTtM,MAAO,OACPuM,cAAe,SACfK,KAAM,EACNyI,SAAU,aAIC,MAAMkmH,UAAoBx+H,YAA+B,eAAD,oBAIrEy+H,cAAgBz+H,cAJqD,KAKrE0+H,mBAAqB,IAAIhmF,IAAkB,CACzCj8B,SAAU,KACPvc,KAAKsB,MAAMm9H,gBACXz+H,KAAKsB,MAAMo9H,kBAAkBtzG,cAC7BprB,KAAKsB,MAAMq9H,8BACX3+H,KAAKsB,MAAMs9H,0BACdnmF,kBAAmB,CACjBgB,SAAU,IAAMz5C,KAAKyiE,kBACrB9oB,OAAQ,IAAM35C,KAAK6+H,gBACnBjlF,MAAO,IAAM55C,KAAK8+H,eAClBjlF,QAAS,IAAM75C,KAAK++H,4BACpB/kF,SAAU,IAAMh6C,KAAKg/H,qBACrBllF,OAAQ,IAAM95C,KAAKk4C,OACnB6B,OAAQ,IAAM/5C,KAAKo4C,UAlB8C,KAyBrE92C,MAAQ,CACN29H,QAASC,YAAuBl/H,KAAKC,MAAM+iB,OAAQ,CAAEm8G,eAAgB,KAErET,kBAAmB,CACjB36G,aAAa,EACbqH,YAAa,KACbX,WAAY,KACZpI,YAAa,GAEf+8G,gBAAiB,CACfr7G,aAAa,EACbqH,YAAa,KACbX,WAAY,KACZoC,eAAgB,GAGlBzhB,UAAWF,cAEXuzH,eAAe,EACfY,sBAAuB,KACvBC,gCAAiC,KACjCC,0BAA0B,EAE1BZ,4BAA6B,KAE7BC,0BAA2B,KAE3BY,iBAAiB,EACjBp7G,cAAe,KACfyB,kBAAmB,KAEnBiyB,kBAAmB,GAEnB2nF,gBAAiB,MA1DkD,KA6GrET,mBAAqB,KACnBh/H,KAAK2B,SACHL,IACE,MAAMgR,GAAQhR,EAAMk+H,gBAKpB,OAJKltH,GACCtS,KAAK0/H,gBAAgB1/H,KAAK0/H,eAAehhF,QAGxC,CACL8gF,gBAAiBltH,IAGrB,KACMtS,KAAKsB,MAAMk+H,iBAAmBx/H,KAAK2/H,cACrC3/H,KAAK2/H,aAAa19H,WA3H2C,KAiIrE29H,aAAe,KAAO,MACZh5H,EAAY5G,KAAKC,MAAjB2G,QAERgqH,YAAkB5wH,KAAKsB,MAAM8J,WAAWtD,QAAQpF,IAC1CA,EAAM6gB,oBACR7gB,EACG8f,eACAq9G,eACCj5H,EACA,sCACAlE,EAAM8f,eAAeP,oBAK7BjiB,KAAK8/H,sBAAsB,KACrB9/H,KAAK+/H,aAAa//H,KAAK+/H,YAAY58G,uBAjJ0B,KAqJrE68G,2BAA6B,IACpBpP,YAAkB5wH,KAAKsB,MAAM8J,WAAW60H,KAAKv9H,GAC3CA,EAAM6gB,oBAvJoD,KA2JrE28G,4BAA8B,IACrBtP,YAAkB5wH,KAAKsB,MAAM8J,WAAW60H,KAAKv9H,GAC3CA,EAAMy9H,gBA7JoD,KAiKrEC,YAAc,CAAC79H,EAAc89H,KAAgD,MACnEz5H,EAAY5G,KAAKC,MAAjB2G,QACF05H,EAAoBtjF,YAAiBh9C,KAAKsB,MAAM8J,WACtD,IAAIm1H,GAAuB,EAEvBC,EAGC,GACDH,EACFG,EAAa,CAACH,GACLC,GAEE,uCAAT/9H,GACS,qCAATA,IAEAg+H,GAAuB,GAGzBC,EAAa1P,YAAyB9wH,KAAKsB,MAAM8J,WAAW7F,IAC1Dk7H,IAAa,CACX7+G,WAAY6+G,EAAc7+G,WAC1BS,YAAak+G,EACTE,EAAcp+G,YAAc,EAC5Bo+G,EAAcp+G,gBAItBm+G,EAAa,CACX,CACE5+G,WAAY5hB,KAAKC,MAAM+iB,OACvBX,YAAariB,KAAKC,MAAM+iB,OAAOf,mBAKrC,MAAMy+G,EAAYF,EAAWj7H,IAC1B86H,GACQA,EAAQz+G,WAAWi+G,eACxBj5H,EACArE,EACA89H,EAAQh+G,YAAc,IAgB5B,OAXAriB,KAAK8/H,sBAAsB,KACzB,MAAMhxH,EAAa9O,KAAK+/H,YACnBjxH,GAELA,EAAWqU,kBAAkB,KACtBk9G,GAAYC,GACfxxH,EAAWgW,cAAc47G,EAAU,QAKlCA,GA1N4D,KA6NrEC,oBAAsB,KACpB,MAAMC,EAAiBrqF,YACrBq6E,YAAkB5wH,KAAKsB,MAAM8J,YAE/B,IAAKw1H,EAAeh7H,OAAQ,OAE5B,MAAMlD,EAAQk+H,EAAeA,EAAeh7H,OAAS,GACrD5F,KAAK2B,SAAS,CACZ89H,gBAAiB/8H,KArOgD,KAyOrEm+H,qBAAuB,KACrB7gI,KAAK2B,SAAS,CACZ89H,gBAAiB,QA3OgD,KA+OrEqB,8BAAgC,CAC9BrhG,EACA6lF,KAEAtlH,KAAK+gI,sBAAsBzb,EAAyB7lF,IAnPe,KAsPrEshG,sBAAwB,CACtB3b,EACAka,EAAuD,QAEnDt/H,KAAKsB,MAAMo9H,kBAAkBtzG,cAC/BprB,KAAKsB,MAAMo9H,kBAAkBtzG,YAAY9e,SACzC1D,QAAQ8zB,KACN,wKAIJ18B,KAAK2B,SAAS,CACZ29H,kCACAZ,kBAAmB,CACjBj0G,WAAY26F,EAAmB36F,WAC/B1G,YAAaqhG,EAAmBrhG,YAChCqH,YAAag6F,EAAmBh6F,YAC5Bg6F,EAAmBh6F,YAAYyyB,QAC/B,IAAIlyC,EAAGwf,YACX9I,iBACqCvX,IAAnCs6G,EAAmB/iG,YACf+iG,EAAmB/iG,iBACnBvX,MA5QyD,KA0SrEk2H,2BAA8BC,IAC5BjhI,KAAKkhI,gCACH,CACEz2G,WAAYw2G,EAAmBx2G,WAC/B1G,YAAak9G,EAAmBl9G,aAElCk9G,EAAmB5+G,cAhT8C,KAoTrE6+G,gCAAkC,CAChCD,EACA5+G,KAEA,MAAMouG,EAAuBM,YAAwB/wH,KAAKsB,MAAM8J,WAC1D+1H,OACYr2H,IAAhBuX,EACI4+G,EAAmBx2G,WAAW/V,OAC9B2N,IAE4DouG,EAAqBplH,OACrF+f,GACE2zB,YAAwB3zB,EAAa61G,EAAmBx2G,aAC1D7kB,SAIF6qH,EAAqB3oH,QAAQsjB,GAC3B61G,EAAmBx2G,WAAW2wB,OAAOhwB,EAAa+1G,IAG/CnhI,KAAKw+H,mBAAmBpkF,uBAG3Bp6C,KAAK8/H,wBAFL9/H,KAAKyiE,gBAAgB,CAAE2+D,cAAc,MA1U4B,KAgVrE9P,YAAeT,IACb,MAAMwQ,EAAcrhI,KAAKw+H,mBAAmBnkF,oBAC5Cr6C,KAAK2B,SACH,CACEyJ,UAAWkmH,YAAYtxH,KAAKsB,MAAM8J,UAAWylH,EAAcwQ,IAE7D,IAAMrhI,KAAKulD,kBAtVsD,KA0VrE+7E,qBAAuB,CAACt9G,EAAWC,EAAW4sG,KAC5C,MAAMwQ,EAAcrhI,KAAKw+H,mBAAmBnkF,oBAC5Cr6C,KAAK2B,SACH,CACEyJ,UAAWkmH,YAAYtxH,KAAKsB,MAAM8J,UAAWylH,EAAcwQ,IAE7D,KACErhI,KAAKulD,gBACLvlD,KAAKuhI,iBAAiB39H,KAAKogB,EAAGC,MAlWiC,KAuWrEu9G,2BAA6B,CAC3Bx9G,EACAC,EACAmhG,KAEA,MAAMic,EAAcrhI,KAAKw+H,mBAAmBnkF,oBAC5Cr6C,KAAK2B,SACH,CACEyJ,UAAWqmH,YACTzxH,KAAKsB,MAAM8J,UACXg6G,EACAic,IAGJ,KACErhI,KAAKulD,gBACLvlD,KAAKyhI,uBAAuB79H,KAAKogB,EAAGC,MAvX2B,KA4XrEwtG,kBAAqBrM,IACnB,MAAMic,EAAcrhI,KAAKw+H,mBAAmBnkF,oBAC5Cr6C,KAAK2B,SACH,CACEyJ,UAAWqmH,YACTzxH,KAAKsB,MAAM8J,UACXg6G,EACAic,IAGJ,IAAMrhI,KAAKulD,kBAtYsD,KA0YrEm8E,oBAAuBC,IAErB3hI,KAAK2B,SAAS,CACZy9H,gBAAiBuC,EACjBlD,eAAe,EACfY,sBAAuBsC,EAAiBxiH,SACpCwiH,EAAiBxiH,SAASvc,cAC1B,KACJ28H,0BAA0B,KAlZuC,KAsZrEqC,qBAAuB,KACjB5hI,KAAKsB,MAAMi+H,0BACbv/H,KAAK8/H,wBAGP9/H,KAAK2B,SAAS,CACZ88H,eAAe,EACfY,sBAAuB,KACvBE,0BAA0B,KA9ZuC,KAkarEsC,eAAiB,KACfjR,YAAkB5wH,KAAKsB,MAAM8J,WAAWtD,QAAQpF,GAC9CA,EAAMo/H,aAAap/H,EAAMyf,eAE3BniB,KAAK8/H,sBAAsB,KACrB9/H,KAAK+/H,aAAa//H,KAAK+/H,YAAY58G,uBAva0B,KA2arEs/C,gBAAkB,EAChBs/D,sBAAqB,EACrBX,gBAAe,GAC6C,MAAQ,MAC5Dp+G,EAAWhjB,KAAKC,MAAhB+iB,OACFg/G,EAAgB,IAAIr2H,EAAGs2H,cACzBb,GACFxQ,YAAkB5wH,KAAKsB,MAAM8J,WAAWtD,QAAQpF,GAC9Cs/H,EAAcE,iBAAiBx/H,IAG/Bq/H,GACFhR,YAAwB/wH,KAAKsB,MAAM8J,WAAWtD,QAAQsjB,GACpD42G,EAAcG,uBAAuB/2G,IAIzC42G,EAAcI,OAAOp/G,GAKjBhjB,KAAK+/H,aAAa//H,KAAK+/H,YAAY58G,oBAEvCnjB,KAAK2B,SACH,CACEyJ,UAAW6nF,cACXwrC,eAAe,EACfY,sBAAuB,MAEzB,KACEr/H,KAAK8/H,wBAKL9/H,KAAKqiI,oBA/c0D,KAodrExD,cAAgB,KACdyD,YAAyBtiI,KAAKsB,MAAM8J,YArd+B,KAwdrE0zH,aAAe,KACb9+H,KAAK6+H,gBACL7+H,KAAKyiE,mBA1d8D,KA6drE8/D,YAAc,KAETC,YACCxiI,KAAKC,MAAM2G,QACX5G,KAAKsB,MAAM8J,YAMfpL,KAAK8/H,sBAAsB,KACrB9/H,KAAK+/H,aAAa//H,KAAK+/H,YAAY58G,uBAxe0B,KA4erEs/G,kBAAoB,KAEfC,YACC1iI,KAAKC,MAAM2G,QACX5G,KAAKsB,MAAM8J,YAMfpL,KAAK8/H,sBAAsB,KACrB9/H,KAAK+/H,aAAa//H,KAAK+/H,YAAY58G,uBAvf0B,KA2frE47G,0BAA4B,KACtB/hF,YAAiBh9C,KAAKsB,MAAM8J,WAAYpL,KAAKuiI,eACxCrR,YAAuBlxH,KAAKsB,MAAM8J,YAElCgmH,YAA4BpxH,KAAKsB,MAAM8J,aAD9CpL,KAAKyiI,qBA9f4D,KAmgBrEE,oCACErd,IAGGsd,YACC5iI,KAAKC,MAAM2G,QACX0+G,IAMJtlH,KAAK8/H,sBAAsB,KACrB9/H,KAAK+/H,aAAa//H,KAAK+/H,YAAY58G,uBAhhB0B,KAohBrE0/G,0BAA4B,KAC1B7R,YAAgChxH,KAAKsB,MAAM8J,WAAWtD,QACpDs9G,IACMA,EAAmBrhG,aACrBqhG,EAAmBh6F,YAAY03G,aAC5B1d,EAAmBh6F,YAAYmB,gBAMxCvsB,KAAK8/H,sBAAsB,KACrB9/H,KAAK+/H,aAAa//H,KAAK+/H,YAAY58G,uBAhiB0B,KAoiBrE28G,sBAAyBp7G,IACvB1kB,KAAK2B,SACH,CACEs9H,QAAS8D,YAAc/iI,KAAKsB,MAAM29H,QAASj/H,KAAKC,MAAM+iB,SAExD,KACEhjB,KAAKulD,gBACD7gC,GAAIA,OA3iBuD,KAgjBrEwzB,KAAO,KACL,IAAKC,YAAQn4C,KAAKsB,MAAM29H,SAAU,OADvB,QAGiBj/H,KAAKC,MAAzB+iB,EAHG,EAGHA,OAAQpc,EAHL,EAGKA,QACVo8H,EAAa9qF,YAAKl4C,KAAKsB,MAAM29H,QAASj8G,EAAQpc,GAKhD5G,KAAK+/H,aAAa//H,KAAK+/H,YAAY58G,oBAEvCnjB,KAAK2B,SAAS,CAAEs9H,QAAS+D,GAAc,IAAMhjI,KAAKulD,kBA3jBiB,KA8jBrEnN,KAAO,KACL,IAAKC,YAAQr4C,KAAKsB,MAAM29H,SAAU,OADvB,QAGiBj/H,KAAKC,MAAzB+iB,EAHG,EAGHA,OAAQpc,EAHL,EAGKA,QACVo8H,EAAa5qF,YAAKp4C,KAAKsB,MAAM29H,QAASj8G,EAAQpc,GAKhD5G,KAAK+/H,aAAa//H,KAAK+/H,YAAY58G,oBAEvCnjB,KAAK2B,SAAS,CAAEs9H,QAAS+D,GAAc,IAAMhjI,KAAKulD,kBAzkBiB,KA4kBrE09E,2BAA6B,KAAO,MAAD,EACoBjjI,KAAKC,MAAlDggB,EADyB,EACzBA,uBAAwBC,EADC,EACDA,iBAC1BgjH,EAAwB,IAAIv3H,EAAGw3H,sBACnCx3H,EAAGggB,WAAWxU,MACd8I,EACAC,GAGI0B,EAAa,IAAIjW,EAAGy3H,WAC1BxS,YAAkB5wH,KAAKsB,MAAM8J,WAAWtD,QAAQpF,GAC9Ckf,EAAWyhH,YAAY3gI,EAAOkf,EAAWK,mBAG3CihH,EAAsBd,OAAOxgH,GAC7BA,EAAWtV,SAEXtM,KAAK2B,SAAS,CACZg9H,4BAA6BtjF,YAC3B6nF,EAAsBI,sBAG1BJ,EAAsB52H,UAjmB6C,KAomBrEi3H,4BAA8B,KAC5BvjI,KAAK2B,SAAS,CACZg9H,4BAA6B,QAtmBoC,KA0mBrE6E,wBAA0B,KACxB,MAAM5hH,EAAa,IAAIjW,EAAGy3H,WAE1BxS,YAAkB5wH,KAAKsB,MAAM8J,WAAWtD,QAAQpF,GAC9Ckf,EAAWyhH,YAAY3gI,EAAOkf,EAAWK,mBAG3CjiB,KAAK2B,SAAS,CACZi9H,0BAA2B/yH,YAAoB+V,KAGjDA,EAAWtV,UArnBwD,KAwnBrEm3H,uBAAyB,KACvB,MAAM7hH,EAAa,IAAIjW,EAAGy3H,WAE1BxS,YAAkB5wH,KAAKsB,MAAM8J,WAAWtD,QAAQpF,GAC9Ckf,EAAWyhH,YAAY3gI,EAAOkf,EAAWK,mBAG3CjiB,KAAK0jI,iCAAiC9hH,GACtCA,EAAWtV,UAhoBwD,KAmoBrEq3H,kCAAoC,CAClC/jF,EACAjN,KAEA,MAAMixF,EAAW9S,YAAyB9wH,KAAKsB,MAAM8J,WACrD,IAAKw4H,EAASh+H,OAAQ,OAEtB,MAAM86H,EAAY1gI,KAAKogI,YACrB,sCACAwD,EAAS,IAEX,IAAKlD,EAAU96H,OAEb,YADAgD,QAAQuE,MAAM,wCAIhB,MAAM02H,EAASC,YACblkF,EACAjN,GAEkBhnC,EAAG4e,gBAAgBm2G,EAAU,IACrC71G,aAAaqlD,UAAU2zD,GACnCA,EAAOv3H,SAEPtM,KAAKyiE,gBAAgB,CAAEs/D,oBAAoB,KA3pBwB,KA8pBrE2B,iCAAoC9hH,IAClC,MAAMgiH,EAAW9S,YAAyB9wH,KAAKsB,MAAM8J,WACrD,IAAKw4H,EAASh+H,OAAQ,OAEtB,MAAM86H,EAAY1gI,KAAKogI,YACrB,mCACAwD,EAAS,IAEX,IAAKlD,EAAU96H,OAEb,YADAgD,QAAQuE,MAAM,wCAIhB,MAAMmgC,EAAa3hC,EAAG4hC,aAAamzF,EAAU,IAE7CpzF,EAAW/2B,QAAQ,kBACnB+2B,EAAW7pB,WAAU,GACrB6pB,EACG9qB,eACAuhH,aAAaniH,EAAY,EAAGA,EAAWK,iBAAkB,GAE5DjiB,KAAKyiE,gBAAgB,CAAEs/D,oBAAoB,KAnrBwB,KAsrBrEiC,qBAAwBt/G,IACtB,MAAMhiB,EAAQgiB,IACVhiB,GAAS1C,KAAK+/H,aAChB//H,KAAK+/H,YAAY76G,eAAexiB,IAzrBiC,KA6rBrEuhI,iBAAmB,CACjBC,EACAC,KAEAD,EAAkBC,GAClBnkI,KAAK8/H,sBAAsB,KACrB9/H,KAAK+/H,aAAa//H,KAAK+/H,YAAY58G,uBAnsB0B,KAusBrEihH,gBAAkB,CAChBC,EACAF,KAEAE,EAAiBF,EAAQ,KACvBnkI,KAAKif,YAAY,KACXjf,KAAK+/H,aAAa//H,KAAK+/H,YAAY58G,yBA7sBwB,KAktBrEmhH,cAAgB,KAIdtkI,KAAK8/H,yBAttB8D,KAytBrEyE,+BAAkCC,IAAyC,MAAD,EAMpExkI,KAAKC,MAJP2G,EAFsE,EAEtEA,QACAgZ,EAHsE,EAGtEA,MACAK,EAJsE,EAItEA,uBACAC,EALsE,EAKtEA,iBAIIw6E,EAAS16F,KAAKsB,MAAMg+H,gCACtBvrF,IACAywF,EACA5wB,IACAnF,IAEJ,OAAOzuG,KAAKsB,MAAMo9H,kBAAkBtzG,YAClC,gBAACsvE,EAAD,CACE9zF,QAASA,EACTgZ,MAAOA,EACPK,uBAAwBA,EACxBC,iBAAkBA,EAClBkL,YAAaprB,KAAKsB,MAAMo9H,kBAAkBtzG,YAC1CrH,YAAa/jB,KAAKsB,MAAMo9H,kBAAkB36G,YAC1CiwB,sBAC+ClpC,IAA7C9K,KAAKsB,MAAMo9H,kBAAkBr8G,YAE/BmmB,SAAUxoC,KAAKsB,MAAMg+H,gCACrB17H,MAAM,EACN2mC,SAAU,IAAMvqC,KAAKykI,yBACrBxwF,SAAU,KAAO,MAAD,EAKVj0C,KAAKsB,MAAMo9H,kBAHbj0G,EAFY,EAEZA,WACAW,EAHY,EAGZA,YACA/I,EAJY,EAIZA,YAEGoI,SAEe3f,IAAhBuX,EAEFoI,EAAWzT,IAAIqL,EAAa+I,GAG5BX,EAAW2wB,OAAOhwB,EAAaX,EAAW/V,QAG5C1U,KAAKykI,wBAAuB,GAC5B5pF,YAA6BpwB,GACzBzqB,KAAK+/H,aAAa//H,KAAK+/H,YAAY58G,sBAEzC7N,gBAAiBtV,KAAKC,MAAMqV,gBAC5BC,iBAAkBvV,KAAKC,MAAMsV,iBAC7BgC,wBAAyBvX,KAAKC,MAAMsX,wBACpCuxC,4BAA6B,CAACmW,EAAW18D,KACvCvC,KAAKykI,yBACLzkI,KAAKC,MAAM6oD,4BAA4BmW,EAAW18D,WAItDuI,GAnxBiE,KA4xBrEu3H,eAAiB,KACf,IAAKriI,KAAKu+H,gBAAkBx/F,SAAU,OAEtC,MAAM2lG,EAAsB1kI,KAAKu+H,cAAczxH,QAC/C,GAAIiyB,SAAS4lG,gBAAkBD,GAI3BA,EAAqB,CACvB,GACE3lG,SAAS4lG,gBAAkB5lG,SAAS+iD,MACpC4iD,EAAoBE,SAAS7lG,SAAS4lG,eAGtC,OAKFD,EAAoBziI,UAlvBxBqd,oBACEtf,KAAK2B,SAAS,CAAEm2C,kBAAmBsH,gBAGrCz/B,mBAAmBolE,EAAkB8/C,GAC/B7kI,KAAKsB,MAAM29H,UAAY4F,EAAU5F,SAC/Bj/H,KAAKC,MAAM2oD,gBACb5oD,KAAKC,MAAM2oD,eAAegC,wBAGhCrF,gBACOvlD,KAAKC,MAAMulD,YAEhBxlD,KAAKC,MAAMulD,WACT,gBAAC,IAAD,CACE1N,kBAAmB93C,KAAKsB,MAAMw2C,kBAC9BJ,mBAAoB,KAClB13C,KAAKogI,YAAY,wCAEnBzoF,cAAe33C,KAAK4/H,aACpBhoF,eAAgBoF,YAAiBh9C,KAAKsB,MAAM8J,WAC5CysC,kBAAmB,KACjB73C,KAAKogI,YAAY,uCAEnBpoF,WAAYz1C,IACVvC,KAAKogI,YAAY79H,IAEnB01C,UAAWo5E,YAAqBrxH,KAAKsB,MAAM8J,WAC3C5B,SAAUxJ,KAAKyiE,gBACfrrB,kBAAmBp3C,KAAKC,MAAMm3C,kBAC9BK,yBAA0Bz3C,KAAKC,MAAMw3C,yBACrCJ,UAAW,IAAMr3C,KAAKC,MAAMo3C,UAAU,IACtCC,sBAAuBt3C,KAAKC,MAAMq3C,sBAClCC,iBAAkB,IAAMv3C,KAAKC,MAAMo3C,UAAU,CAAEytF,gBAAgB,IAC/DttF,eAAgB,KACdx3C,KAAKC,MAAMu3C,iBACXx3C,KAAKC,MAAMo3C,UAAU,KAEvBc,QAASA,YAAQn4C,KAAKsB,MAAM29H,SAC5B5mF,QAASA,YAAQr4C,KAAKsB,MAAM29H,SAC5B/mF,KAAMl4C,KAAKk4C,KACXE,KAAMp4C,KAAKo4C,KACXG,eAAgBv4C,KAAKC,MAAMs4C,eAC3BD,oBAAqBt4C,KAAKg/H,sBAyKhCyF,uBAAuBM,GAAuB,GAAQ,MAC5C35G,EAAgBprB,KAAKsB,MAAMo9H,kBAA3BtzG,YACRprB,KAAK2B,SACH,CACE+8H,kBAAmB,CACjB36G,aAAa,EACbqH,YAAa,KACbX,WAAY,KACZpI,YAAa,IAGjB,KAIM+I,GACFA,EAAY9e,SAEVy4H,GACF/kI,KAAK8/H,0BA+gBb//H,SAAU,MAAD,EASHC,KAAKC,MAPP2G,EAFK,EAELA,QACAgZ,EAHK,EAGLA,MACAoD,EAJK,EAILA,OACAhC,EALK,EAKLA,qBACAC,EANK,EAMLA,aACAhB,EAPK,EAOLA,uBACAC,EARK,EAQLA,iBAEF,OAAKtZ,EAGH,gBAAC,IAAD,KACGua,GACC,gBAAC,IAAD,KACGvQ,GACC,gBAAC,IAAmB1P,SAApB,KACG,EAAG2D,YACF,gBAAC,IAAD,CACER,IAAK2e,EAAOlc,IACZtE,IAAKwiI,GAAkBhlI,KAAK0/H,eAAiBsF,EAC7ChiH,OAAQA,EACR/C,uBAAwBA,EACxBC,iBAAkBA,EAClB9U,UAAWpL,KAAKsB,MAAM8J,WAErB,EACCuzC,2BACA94B,oBACA+3B,iBACAgB,kBACAE,2BACAD,0BAEA,uBACEt9B,UAAU,kBACVtc,MAAOpC,EAAOuM,UACdqlB,UAAWz0B,KAAKw+H,mBAAmB/pG,UACnCjM,QAASxoB,KAAKw+H,mBAAmBh2G,QACjC6wB,WAAYr5C,KAAKw+H,mBAAmBnlF,WACpC72C,IAAKxC,KAAKu+H,cACV5/G,SAAU,GAEV,gBAAC,IAAD,CACEnc,IAAKsM,GAAe9O,KAAK+/H,YAAcjxH,EACvCzK,IAAK2e,EAAOlc,IACZkf,SAAUhmB,KAAKqiI,eACfr/G,OAAQA,EACRpc,QAASA,EACTgZ,MAAOA,EACPK,uBAAwBA,EACxBC,iBAAkBA,EAClB9U,UAAWpL,KAAKsB,MAAM8J,UACtBuV,mBAAoB3gB,KAAKyxH,kBACzB7wG,yBAA0B5gB,KAAK+gI,sBAC/BlgH,yBACE7gB,KAAKwhI,2BAEP1gH,4BACE9gB,KAAK8gI,8BAEPvgH,oBAAqBvgB,KAAK+gI,sBAC1BvgH,oBACExgB,KAAK2iI,oCAEPliH,oBAAqBzgB,KAAKghI,2BAC1BtgH,yBACE1gB,KAAKkhI,gCAEPngH,iBAAkB/gB,KAAK0hI,oBACvB1hH,aAAchgB,KAAKsxH,YACnBjyG,mBAAoBrf,KAAKshI,qBACzB2D,cAAe5E,IACbrgI,KAAKogI,YACH,sCACAC,IAGJr/G,qBAAsBA,EACtBC,aAAcA,EACdmD,cAAeu6B,EACf94B,kBAAmBA,EACnBzC,aAAcpjB,KAAKskI,cACnB1gH,qBACE/e,EAAO2M,gCAET2P,WAAYA,EACZvQ,YAAaA,IAEd5Q,KAAKsB,MAAMk+H,iBACV,gBAAC,IAAD,CACEh9H,IAAK0iI,GACFllI,KAAK2/H,aAAeuF,EAEvBtoF,iBAAkBunF,GAChBnkI,KAAKokI,gBAAgBxmF,EAAgBumF,GAEvCrnF,kBAAmBqnF,GACjBnkI,KAAKikI,iBAAiBrlF,EAAiBulF,GAEzCpnF,aACE4B,EACIA,EAAyB/4C,OACzB,KAENo3C,iBAAkBA,YAChBh9C,KAAKsB,MAAM8J,WAEb6xC,2BAA4B,IAC1Bj9C,KAAKgkI,qBACHllF,GAGJ5B,uBAAwB,IACtBl9C,KAAKgkI,qBAAqBnlF,KAI/B77B,GAAsC,IAA5BA,EAAOf,kBAChB,gBAAC,IAAD,MAEF,gBAAC,IAAD,CACEre,KAAM5D,KAAKsB,MAAMm9H,cACjBj2F,SAAUxoC,KAAKsB,MAAM+9H,sBACrB56H,eAAgBzE,KAAK4hI,qBACrBh7H,QAASA,EACTgZ,MAAOA,EACPK,uBAAwBA,EACxBC,iBAAkBA,EAClB6D,YAAa/jB,KAAKsB,MAAM89H,gBAAgBr7G,YACxCqH,YAAaprB,KAAKsB,MAAM89H,gBAAgBh0G,YACxCyB,eACE7sB,KAAKsB,MAAM89H,gBAAgBvyG,eAE7B1qB,SAAUD,IAAU,MAAD,EAIblC,KAAKsB,MAAM89H,gBAFbh0G,EAFe,EAEfA,YACAyB,EAHe,EAGfA,eAEGzB,IACLA,EAAY+5G,aAAat4G,EAAgB3qB,GACzClC,KAAK2B,SAAS,CACZ49H,0BAA0B,MAG9BjqH,gBAAiBtV,KAAKC,MAAMqV,gBAC5BC,iBAAkBvV,KAAKC,MAAMsV,iBAC7BgC,wBACEvX,KAAKC,MAAMsX,0BAGf,gBAAC,IAAD,CACE/U,IAAK++H,GACFvhI,KAAKuhI,iBAAmBA,EAE3B5lH,kBAAmB,IAAM,CACvB,CACErX,MAAO,OACPsX,MAAO,IAAM5b,KAAK2gI,sBAClB3sE,QACEzd,YACEq6E,YAAkB5wH,KAAKsB,MAAM8J,YAC7BxF,OAAS,GAEf,CACEtB,MAAO,OACPsX,MAAO,IAAM5b,KAAK6+H,gBAClBl+H,YAAa,eAEf,CACE2D,MAAO,MACPsX,MAAO,IAAM5b,KAAK8+H,eAClBn+H,YAAa,eAEf,CACE2D,MAAO,QACPsX,MAAO,IAAM5b,KAAKuiI,cAClB5vH,QAASyyH,cACTzkI,YAAa,eAEf,CACE2D,MAAO,SACPsX,MAAO,IAAM5b,KAAKyiE,kBAClB9hE,YAAa,UAEf,CACE2D,MAAO,kBACPsX,MAAO,IAAM5b,KAAK6hI,iBAClBlvH,QAAS3S,KAAKkgI,+BAEhB,CAAE39H,KAAM,aACR,CACE+B,MAAO,sBACPsX,MAAO,IACL5b,KAAKogI,YACH,wCAGN,CACE97H,MAAO,gBACPsX,MAAO,IAAM5b,KAAK4/H,eAClBjtH,QAAS3S,KAAKggI,8BAEhB,CACE17H,MAAO,YACPirH,QAASvvH,KAAKsB,MAAMw2C,kBAAkBvyC,IACpCimB,IACS,CACLlnB,MAAOknB,EAASusB,SAChBn8B,MAAO,IACL5b,KAAKogI,YAAY50G,EAASjpB,UAKpC,CAAEA,KAAM,aACR,CACE+B,MAAO,OACPsX,MAAO5b,KAAKk4C,KACZvlC,QAASwlC,YAAQn4C,KAAKsB,MAAM29H,SAC5Bt+H,YAAa,eAEf,CACE2D,MAAO,OACPsX,MAAO5b,KAAKo4C,KACZzlC,QAAS0lC,YAAQr4C,KAAKsB,MAAM29H,SAC5Bt+H,YAAa,qBAEf,CAAE4B,KAAM,aACR,CACE+B,MAAO,+BACPsX,MAAO,IAAM5b,KAAKwjI,2BAEpB,CACEl/H,MAAO,2BACPsX,MAAO,IAAM5b,KAAKyjI,0BAEpB,CACEn/H,MAAO,qCACPsX,MAAO5b,KAAKijI,+BAIlB,gBAAC,IAAD,CACEzgI,IAAKi/H,GACFzhI,KAAKyhI,uBAAyBA,EAEjC9lH,kBAAmB,IAAM,CACvB,CACErX,MAAO,OACPsX,MAAO,IAAM5b,KAAK6+H,gBAClBl+H,YAAa,eAEf,CACE2D,MAAO,MACPsX,MAAO,IAAM5b,KAAK8+H,eAClBn+H,YAAa,eAEf,CACE2D,MAAO,QACPsX,MAAO,IAAM5b,KAAKyiI,oBAClB9vH,QACE8yG,eACAC,cACF/kH,YAAa,eAEf,CAAE4B,KAAM,aACR,CACE+B,MAAO,SACPsX,MAAO,IAAM5b,KAAKyiE,kBAClB9hE,YAAa,UAEf,CAAE4B,KAAM,aACR,CACE+B,MAAO,OACPsX,MAAO5b,KAAKk4C,KACZvlC,QAASwlC,YAAQn4C,KAAKsB,MAAM29H,SAC5Bt+H,YAAa,eAEf,CACE2D,MAAO,OACPsX,MAAO5b,KAAKo4C,KACZzlC,QAAS0lC,YAAQr4C,KAAKsB,MAAM29H,SAC5Bt+H,YAAa,qBAEf,CACE2D,MAAO,mBACPsX,MAAO,IAAM5b,KAAK6iI,4BAClB7uE,QAASm9D,YACPnxH,KAAKsB,MAAM8J,eAKlBpL,KAAKukI,+BAEJ1/H,EAAO6M,+BACU,UAAfyP,GAEHnhB,KAAKsB,MAAMq9H,6BACV,gBAAC,IAAD,CACE96H,QAAS7D,KAAKujI,4BACdtnF,oBACEj8C,KAAKsB,MAAMq9H,8BAIhB3+H,KAAKsB,MAAMs9H,2BACV,gBAAC,IAAD,CACEh4H,QAASA,EACTqZ,uBAAwBA,EACxBC,iBAAkBA,EAClBrc,QAAS,IACP7D,KAAK2B,SAAS,CACZi9H,0BAA2B,OAG/B9+E,iBACE9/C,KAAKsB,MAAMs9H,0BAEb1+E,SAAU,CAACN,EAAejN,KACxB3yC,KAAKC,MAAM8oD,uBACTnJ,EACAjN,GAEF3yC,KAAK2jI,kCACH/jF,EACAjN,GAEF3yC,KAAK2B,SAAS,CACZi9H,0BAA2B,UAKlC5+H,KAAKsB,MAAMm+H,iBACV,gBAAC,IAAD,CACE/8H,MAAO1C,KAAKsB,MAAMm+H,gBAClBxoH,QAAS,KACPjX,KAAK6gI,uBACL7gI,KAAK8/H,yBAEPj8H,QAAS7D,KAAK6gI,uBAGlB,gBAAC,IAAD,CACExuH,WAAW,+BACXqB,QACE,gBAAC,QAAD,0DAIF2xH,mBACE,gBAAC,QAAD,sFAKF/yH,KAAM4+G,YAAuBlxH,KAAKsB,MAAM8J,kBA7VzC,S,mDC79BzB,+OA8CA,MAAMO,EAAKC,EAAOD,GAEZu1F,EAAa,CACjBgb,QAASopB,IACTC,MAAOv2G,IACPzjB,OAAQi6H,IACRC,mBAAoBj3G,IACpBk3G,SAAU52G,IACV62G,QAASjmG,IACTkmG,YAAa3lG,IACbwF,WAAYrF,IACZylG,OAAQ98F,IACR+8F,mBAAoB38F,IACpBwuC,SAAUtuC,IACV08F,SAAU77F,IACV87F,UAAWp7F,IACXq7F,UAAWn7F,IACXymB,MAAOrmB,IACP7mC,IAAK+qB,IACL9mB,KAAMg9H,IACNY,UAAW36F,IACX46F,UAAW56F,IACX66F,cAAe36F,IACf46F,aAAc36F,IACdj4B,MAAO6yH,IACPC,OAAQjB,IACRkB,QAASlB,IACTmB,gBAAiBh6F,IACjBi6F,UAAW55F,KAEP65F,EAAyD,CAC7DzqB,QAAS0qB,IACTH,gBAAiB55F,IACjBm5F,UAAWn7F,IACXk7F,SAAUr7F,IACVu7F,UAAWh7F,IACX5mC,IAAKmrB,IACL+1G,MAAOt2G,IACP1jB,OAAQs7H,IACRlB,QAAS3lG,IACT4lG,YAAazlG,IACbulG,SAAU32G,IACV02G,mBAAoB72G,KAEhBk4G,EAAwD,CAC5DvB,MAAO,oBACPh6H,OAAQ,cACRk6H,mBAAoB,2BACpBC,SAAU,gBACVC,QAAS,iBACTC,YAAa,qBACbngG,WAAY,cACZogG,OAAQ,cACRC,mBAAoB,cACpBnuD,SAAU,gBACVouD,SAAU,sBACVC,UAAW,uBACXC,UAAW,uBACX10E,MAAO,aACPltD,IAAK,oBACL6hI,UAAW,sBACXC,UAAW,sBACXC,cAAe,sBACfC,aAAc,qBACd5yH,MAAO,aACPgzH,gBAAiB,kCACjBC,UAAW,mBAGE,KACbxlC,aACAvmD,sBAAwBosF,IACtB,MAAMC,EAAYr7H,EAAGm5B,kBAAkBC,SAASgiG,GAC5C,SACAA,EAEJ,OAAI7lC,EAAW5+C,eAAe0kF,GAAmB9lC,EAAW8lC,GAChD9lC,EAAWgb,SAEzB3uF,sBAAwBttB,IACtB,MAAM8mI,EAAU9mI,EAAMktB,kBAAkBvB,UAClCo7G,EAAYr7H,EAAGm5B,kBAAkBC,SAASgiG,GAC5C,SACAA,EAIJ,OADEJ,EAAgBK,IAAcL,EAAgBzqB,SAC1Bj8G,IAExB0nC,wBAA0Bo/F,IACxB,MAAMC,EAAYr7H,EAAGm5B,kBAAkBC,SAASgiG,GAC5C,SACAA,EAEJ,OAAOD,EAAqBE,IAAc,S,6KCrI/B,MAAMxB,UAAoB1lI,YASvCqV,YAAYlV,GACVmV,MAAMnV,GADgC,MAG9BktB,EAAsBntB,KAAKC,MAA3BktB,kBAERntB,KAAK0pC,aAAevc,EAChBA,EAAkBsB,sBAClB3jB,EAEJ9K,KAAK2pC,iBAAmBxc,EACpBA,EAAkBwB,0BAClB7jB,EAEJ9K,KAAKinI,mBAAqB95G,EACtBA,EAAkB8b,oBAClBn+B,EAGN7I,QACMjC,KAAKyB,QAAQzB,KAAKyB,OAAOQ,QAG/BlC,SACE,OACE,gBAAC,IAAD,CACEyK,OAAQxK,KAAKC,MAAMyuB,SAAW,OAAS,QACvC9nB,QAAS5G,KAAKC,MAAM2G,QACpB1E,MAAOlC,KAAKC,MAAMiC,MAClBC,SAAUnC,KAAKC,MAAMkC,SACrBsC,eAAgBzE,KAAKC,MAAMwE,eAC3ByiI,kBAAmBlnI,KAAKinI,mBACxBhnH,uBAAwBjgB,KAAKC,MAAMggB,uBACnCC,iBAAkBlgB,KAAKC,MAAMigB,iBAC7BzS,kBAAmBzN,KAAK0pC,aACxBp8B,mBAAoBtN,KAAK2pC,iBACzBj/B,WAAS,EACTy8H,mBACEnnI,KAAKinI,mBACH,gBAAC,QAAD,yDAEA,gBAAC,QAAD,qCAGJ13G,aACGvvB,KAAKC,MACHiC,MAELM,IAAKC,GAAUzC,KAAKyB,OAASgB,KAM9B,MAAMokI,EAAkC,EAC7C3kI,QACAirB,oBACAjM,wBACAuM,2BAEKvrB,GAAUirB,EAAkB0rG,aAK/B,wBACEp4H,MAAOyB,EACPqf,UAAWuC,IAAW,CACpB,CAAC3U,MAAuB,KAGzB+R,EAAsBhf,GACtBA,GAXI,gBAACurB,EAAD,O,iCC9EX,wDAUe,SAAS6P,EAAa8pG,GACnC,MAAMC,UAA6Bv3G,IACjC3a,YACEvO,EACA+W,EACA+R,EACAC,EACAC,EACAC,GAEAza,MACExO,EACA+W,EACA+R,EACAC,EACAC,EACAC,GAGF7vB,KAAKgwB,YAAc,IAAIC,SAAYA,UAAaw7D,UAAU27C,IAC1DpnI,KAAKkwB,eAAeC,SAASnwB,KAAKgwB,aAGpCgB,SACEhxB,KAAKgwB,YAAY5X,SAAS4L,EAAIhkB,KAAKixB,UAAUC,OAC7ClxB,KAAKgwB,YAAY5X,SAAS6L,EAAIjkB,KAAKixB,UAAUE,OAC7CnxB,KAAKgwB,YAAYoB,SAAYpxB,KAAKixB,UAAUI,WAAa1U,KAAK2U,GAAM,IAGtE,oBAAoB1qB,EAASmqB,EAAiBxlB,GAC5C,OAAO67H,GAIX,OAAOC,I,iCC3CT,6DAUO,MAAMxnG,EAAeynG,IAC1B,GAAIA,GAAaA,EAAUx6H,QAAS,CAClC,MAAMqZ,EAAUE,IAASC,YAAYghH,EAAUx6H,SAC/C,GAAIqZ,aAAmBohH,kBACrBphH,EAAQlkB,aACH,GAAIkkB,aAAmBK,YAAa,CACzC,MAAMplB,EAAW+kB,EAAQqhH,qBAAqB,UAE5CpmI,GACAA,EAASwE,QACTxE,EAAS,aAAcmmI,mBAEvBnmI,EAAS,GAAGa,Y,iCCpBpB,gFAEA,MAAMwlI,EAA8B,CAClCC,EACA39F,EACA49F,KAEA,MAAMh7G,EAAkBod,EAAmBnd,qBAE3C,OAAO86G,EAAMr8H,OAAO,CAACutH,EAAW/nH,MAC1BA,EAAQ82H,KAGV92H,EAAQ8b,IACPod,EAAmB3c,aAAavc,GAAO0rG,gBAKjCn6E,EACX2H,IAEA,MAAM69F,EAAgCnlG,oBACpCsH,EAAmBve,SAASmtG,gBAC5BxrG,GAAqBA,EAAkBvB,WAGzC,OAAIme,EAAmBnqB,MAAMw/C,eACpBqoE,EACLG,EACA79F,EAAmBve,SACnB,GAEOue,EAAmBnqB,MAAM2hC,iBAC3BkmF,EACLG,EACA79F,EAAmBve,SACnB,GAGKi8G,EACLG,EACA79F,EAAmBve,SACnB,IAKO0nG,EAAuB,CAClCpN,EACAtJ,KAEA,MAAM97D,EAAeolE,EAAe7iH,MAAQ,GAE5C,GAAI6iH,EAAelmG,MAAMw/C,eAAgB,CACvC,MAAMz7C,EAAa64F,EAAgB,GAE7BqrB,EAAeJ,EACnBjrB,EACAsJ,EAAet6F,SACf,GACAxV,KAAK,MACP,MAAM,GAAN,OAAU2N,EAAV,YAAwB+8B,EAAxB,YAAwCmnF,EAAxC,KACK,GAAI/hB,EAAelmG,MAAM2hC,iBAAkB,CAChD,MAAM59B,EAAa64F,EAAgB,GAC7Bt5E,EAAes5E,EAAgB,GAE/BqrB,EAAeJ,EACnBjrB,EACAsJ,EAAet6F,SACf,GACAxV,KAAK,MACP,MAAM,GAAN,OAAU2N,EAAV,YAAwBuf,EAAxB,aAAyCwd,EAAzC,YAAyDmnF,EAAzD,KACK,CACL,MAAMA,EAAeJ,EACnBjrB,EACAsJ,EAAet6F,SACf,GACAxV,KAAK,MACP,MAAM,GAAN,OAAU0qC,EAAV,YAA0BmnF,EAA1B,Q,uRCtDJ,MAAMl8H,EAAKC,EAAOD,GAEZ9I,EAAS,CAEbuM,UAAW,CACTC,QAAS,OACTC,cAAe,SACfK,KAAM,GAGRm4H,eAAgB,CACdz4H,QAAS,OACTrJ,WAAY,SACZX,eAAgB,UAElB0iI,oBAAqB,CACnBp4H,KAAM,EACNuqD,UAAW,QAEb7zD,KAAM,CACJtD,MAAO,GACP0M,OAAQ,GACR0D,YAAa,EACbrD,WAAY,GAEdk4H,aAAc,CACZ/3H,UAAW,IA2BFklC,EAAmB,CAC9B/pB,EACA0e,EACAnmB,KAIA,GAFAyH,EAAY68G,mBAAmBn+F,EAAoBld,sBAE/CjJ,EAAY,CACd,MAAMukH,EAAuBze,YAAwB3/E,GACrD,IAA8B,IAA1Bo+F,EAIF,YAHAt/H,QAAQuE,MAAR,uBACkB28B,EAAoB4V,cADtC,4EAMFt0B,EAAY+5G,aAAa+C,EAAsBvkH,KAI7CwkH,EAAqB,CACzBh7G,EACAN,EACAq7G,KAGI/6G,EAAkBovF,cAGlB1vF,IAAmBq7G,EAKV,MAAM35B,UAAoCzuG,YAGtD,eAAD,oBACAsoI,mBAA2B,GAD3B,KAEA9mI,MAAQ,CACN+mI,SAAS,GAHX,KAoDAC,eAAkB/nI,IAChB,GAAIP,KAAKsB,MAAM+mI,QAAS,CAMtB,IALe7kI,IAAO4V,kBACpB7Y,EAAKG,EACH,qGAGS,OAPoB,QAUWV,KAAKC,MAA3CmrB,EAV2B,EAU3BA,YAAarH,EAVc,EAUdA,YAAand,EAVC,EAUDA,QAC5BouC,EAAkB5pB,EAAYQ,UACpC,IAAKopB,EAAiB,OAAO,KAE7B,MAAMiqB,EAAYl7C,EACdpY,EAAG8f,iBAAiB88G,iCAClB3hI,EAAQ8zC,qBACR1F,GACAwzF,eACF78H,EAAG8f,iBAAiBg9G,8BAClB7hI,EAAQ8zC,qBACR1F,GACAwzF,eAENxoI,KAAKC,MAAM6oD,4BAA4BmW,EAAWjqB,IAtEpD11B,oBACMtf,KAAKC,MAAM41C,cACbn/B,WAAW,KACT1W,KAAKiC,SACJ,KAIPA,QAAS,MAAD,EACwCjC,KAAKC,MAA3CmrB,EADF,EACEA,YAAarH,EADf,EACeA,YAAand,EAD5B,EAC4BA,QAW1B,IAPN5G,KAAK0oI,2BACHxzF,YAAuB,CACrBF,gBAAiB5pB,EAAYQ,UAC7B7H,cACAnd,YAEF5G,KAAKC,MAAM0jB,aAGT3jB,KAAKooI,oBAAsBpoI,KAAKooI,mBAAmBnmI,OACrDjC,KAAKooI,mBAAmBnmI,QAK9BymI,2BACE5+F,EACAnmB,GAEA,IAAKmmB,EAAqB,OAAO,EAEjC,MAAMo+F,EAAuBvkH,EACzB8lG,YAAwB3/E,IACvB,EAEL,OAAO9nB,iBAAO,EAAG8nB,EAAoBld,qBAAsB7Y,IACzD,IAAK+1B,EAAqB,OAAO,EACjC,MAAM3c,EAAoB2c,EAAoB1c,aAAarZ,GAE3D,OAAOo0H,EAAmBh7G,EAAmBpZ,EAAGm0H,KAC/C78H,OAAOyoD,GAAaA,GAAWluD,OA8BpCg0D,eACE,OACE,uBAAK30D,MAAK,eAAOpC,EAAOilI,eAAd,GAAiC9nI,KAAKC,MAAMgF,QACpD,gBAAC,IAAD,KACGjF,KAAKC,MAAM8jB,YACR,iEACA,+DAMZhkB,SAAU,MAAD,EAUHC,KAAKC,MARPmrB,EAFK,EAELA,YACAxkB,EAHK,EAGLA,QACAqZ,EAJK,EAILA,uBACAC,EALK,EAKLA,iBACAm0F,EANK,EAMLA,aACA1wF,EAPK,EAOLA,WACAI,EARK,EAQLA,YACAnE,EATK,EASLA,MAGIo1B,EAAkB5pB,EAAYQ,UAC9Bke,EAAsBoL,YAAuB,CACjDF,kBACAjxB,cACAnd,YAEF,IAAKkjC,EAAqB,OAAO9pC,KAAK45D,eAEtC,MAAM+uE,EAAW7+F,EAAoBmqE,cAC/B20B,EAA8B/S,YAClC7gF,GAEIkzF,EAAuBvkH,EACzB8lG,YAAwB3/E,IACvB,EAELqL,EAAiB/pB,EAAa0e,EAAqBnmB,GAEnD,IAAIklH,EAAsB,EAC1B,OACE,gBAAC,OAAD,KACG,EAAGtoI,UACF,uBAAK0E,MAAOpC,EAAOuM,WACjB,gBAAC,IAAD,CAAMpJ,WAAW,UACf,uBACEjB,IAAK+kC,EAAoBu1B,kBACzBr6D,IAAI,GACJC,MAAOpC,EAAOwD,OAEhB,gBAAC,IAAD,KAAOyjC,EAAoBrb,kBAC1Bi0F,YAA0B54E,IACzB,gBAAC,IAAD,CACEtlC,QAAS,KACPxE,KAAKsoI,eAAe/nI,KAGtB,gBAAC,IAAD,QAILqoI,GACC,gBAAC,IAAD,KACE,gBAAC,IAAD,CAAc51H,KAAM41H,EAA4B51H,MAC7CzS,EAAKG,EAAEkoI,EAA4Bl1H,WAI1C,gBAAC,IAAD,MACA,uBAAKrP,IAAK2wC,EAAiB/vC,MAAOpC,EAAOklI,qBACtC/lH,iBAAO,EAAG8nB,EAAoBld,qBAAsB7Y,IACnD,MAAMoZ,EAAoB2c,EAAoB1c,aAAarZ,GAC3D,IACGo0H,EACCh7G,EACApZ,EACAm0H,GAGF,OAAO,KAET,MAAMY,EAAwB37G,EAAkBvB,UAC1C2uB,EAAqBjtB,IAA0BqtB,sBACnDmuF,GAKIC,EAAuD,IAAxBF,EAGrC,OAFAA,IAGE,gBAACtuF,EAAD,CACEzQ,oBAAqBA,EACrB1e,YAAaA,EACb+B,kBAAmBA,EACnBN,eAAgB9Y,EAChB7R,MAAOkpB,EAAYgC,aAAarZ,GAChC5R,SAAUD,IACJkpB,EAAYgC,aAAarZ,KAAO7R,IAClCkpB,EAAY+5G,aAAapxH,EAAG7R,GAC5BlC,KAAK2B,SAAS,CACZ0mI,SAAS,MAIfzhI,QAASA,EACTgZ,MAAOA,EACPK,uBAAwBA,EACxBC,iBAAkBA,EAClB7b,IAAK0P,EACL0zB,0BAA2Bna,IAC3BhY,gBAAiBtV,KAAKC,MAAMqV,gBAC5BC,iBAAkBvV,KAAKC,MAAMsV,iBAC7BgC,wBAAyBvX,KAAKC,MAAMsX,wBACpC/U,IAAKC,IACCsmI,IACF/oI,KAAKooI,mBAAqB3lI,QAS9B,IAHLzC,KAAK0oI,2BACJ5+F,EACAnmB,IAEA,gBAAC,IAAD,KACE,gBAAC,QAAD,wCAGH3jB,KAAKC,MAAM8jB,aACV,gBAAC,IAAD,CACEzf,MAAO,gBAAC,QAAD,yBACP0kI,cAAc,QACdrlB,QAASv4F,EAAYmB,aACrBtnB,MAAOpC,EAAOmlI,aACdpkB,SAAU,CAACr5G,EAAGoI,KACZyY,EAAY03G,YAAYnwH,GACxB3S,KAAKif,kBAKb,gBAAC,IAAD,MACIo1F,GAAgBs0B,GAChB,gBAAC,IAAD,CACEziI,aAAc4jC,EAAoBmqE,cAClC3vG,MACEtE,KAAKC,MAAM8jB,YACT,gBAAC,QAAD,gCAEA,gBAAC,QAAD,sC,0LChVtB,MAAMpY,EAAKC,EAAOD,GAGLupC,EAAyB,EACpCF,kBACAjxB,cACAnd,aAMKouC,EAEEjxB,EACHpY,EAAG8f,iBAAiBC,qBAClB9kB,EAAQ8zC,qBACR1F,GAEFrpC,EAAG8f,iBAAiBI,kBAClBjlB,EAAQ8zC,qBACR1F,GATuB,KAyCzBi0F,EAAkB,CACtBljH,EACAivB,IAEOjvB,EAAK1B,KAAK,EAAG9hB,UAAWA,IAASyyC,GAI7Bb,EAA0B,EACrC/oB,cACArH,cACAnd,UACAotC,mBACAp0B,QACAK,yBACAC,uBAEA,MAAMgpH,EAAuB,CAC3BvlH,EACAwlH,KAEA,MAAM50F,EAA+B/T,YACnCkoF,YACE3kG,EACA9D,EACAC,EACAyD,GAEF/D,GAKF,GACEwL,EAAYQ,WACZu9G,EACA,CAC4BF,EAC1B10F,EACAnpB,EAAYQ,YAGZR,EAAY+vB,QAAQ,IAIxB,MAAO,CACL7G,iBAAkB3wB,EAClB4wB,+BACAC,iCAAkC7T,YAChC4T,KAlCoE,EA0EhDz0C,WAnCF,KACtB,IAAKk0C,EAAkB,CAGrB,MAAMg0E,EAAkB/Z,YAAyBlqF,GAC3CixB,EAA0B5pB,EAAYQ,UACtCw9G,EAAgCH,EACpCjhB,EACAhzE,GAEF,GACEo0F,IACCA,EAA8BxpH,MAAMw/C,gBACnCgqE,EAA8BxpH,MAAM2hC,kBACtC,CACA,MAAM2mF,EAAuBze,YAC3B2f,EAA8B59G,UAEhC,IAA8B,IAA1B08G,EACF,OAAOgB,EACL99G,EAAYgC,aAAa86G,IACzB,IAOR,MAAO,CACL5zF,iBAAkB,KAClBC,6BAA8B,KAC9BC,iCAAkC,QAtEoC,mBA0EnElzC,EA1EmE,KA0E5DK,EA1E4D,KAyH1E,MAAO,CACLL,EACA,CACEmzC,sBAtB2BlyC,IAC7B6oB,EAAY+vB,QAAQ54C,GAYpB,OANAZ,EAAS,CACP2yC,iBAAkB,KAClBC,6BAA8B,KAC9BC,iCAAkC,OAG7B,aACLppB,eAZe,CACfkpB,iBAAkB,KAClBC,6BAA8B,KAC9BC,iCAAkC,QAkBlCE,aAjDkB/wB,IACpB,MAAM0lH,EAAWH,EAAqBvlH,GAAY,GAElD,OADAhiB,EAAS0nI,GACF,aACLj+G,eACGi+G,IA6CH10F,wBAzC6BpyC,IAE/B,GADA6oB,EAAY+vB,QAAQ54C,GAChBjB,EAAMgzC,iBAAkB,CAC1B,MAAM+0F,EAAWH,EAAqB5nI,EAAMgzC,kBAAkB,GAE9D,OADA3yC,EAAS0nI,GACF,aACLj+G,eACGi+G,GAIP,OAAO,aACLj+G,eACG9pB,S,wGCpLM,SAAS4yC,IAAkB,MAAD,EACfp0C,aAAfwpI,EAD8B,oBAIvC,OAFoBxpI,cAAkB,IAAMwpI,EAAY,IAAK,M,4HCYhD,MAAMC,UAAgBzpI,gBACnCC,SAAU,MACAsS,EAAerS,KAAKC,MAApBoS,WAER,OACE,gBAAC,IAAD,KACG8O,GACC,gBAAC,IAAmBjgB,SAApB,KACG,EAAG2D,SAAQuN,sBACV,gBAAC,IAAD,CACExO,KACE5D,KAAKC,MAAMqS,OAASzN,EAAOwM,oBAAoBgB,GAEjDqB,QACiB,UAAfyN,GAA0BnhB,KAAKC,MAAMolI,mBACjCrlI,KAAKC,MAAMolI,mBACXrlI,KAAKC,MAAMyT,QAEjBmwH,OACE,gBAAC,IAAD,CACEx/H,IAAI,OACJoP,MAAM,UACNiB,KAAK,QACLlQ,QAAS,KACP4N,EAAiBC,GAAY,KAG/B,gBAAC,QAAD,uB,iCC3CpB,+CAUe,MAAMskF,EAQnBxhF,aAAY,aAAEyhF,EAAF,aAAgBC,EAAhB,MAA8B9zF,EAA9B,OAAqC0M,EAArC,QAA6C2jB,IAAmB,KAP5Eo2G,MAAgB,EAO2D,KAN3EC,MAAgB,EAM2D,KAF3Ev5G,eAAiB,IAAID,YAEsD,KA4B3EmkC,mBAAqB,CAACpwC,EAAWC,KAC/BD,GAAKhkB,KAAKo6B,OAAS,EACnBnW,GAAKjkB,KAAKs6B,QAAU,EACpBtW,GAAKrH,KAAK4a,IAAIv3B,KAAKkwB,eAAeoH,MAAMtT,GACxCC,GAAKtH,KAAK4a,IAAIv3B,KAAKkwB,eAAeoH,MAAMrT,GAExC,IACI4xC,EAAM7xC,EAQV,OAPAA,EACErH,KAAK0hB,IAAKqrG,EAAsB/sH,KAAK2U,IAAMtN,EAC3CrH,KAAK2hB,IAAKorG,EAAsB/sH,KAAK2U,IAAMrN,EAC7CA,EACEtH,KAAK2hB,IAAKorG,EAAsB/sH,KAAK2U,IAAMukC,EAC3Cl5C,KAAK0hB,IAAKqrG,EAAsB/sH,KAAK2U,IAAMrN,EAEtC,CAACD,EAAIhkB,KAAKwpI,MAAOvlH,EAAIjkB,KAAKypI,QA3CwC,KAkD3Er0E,oBAAsB,CAACpxC,EAAWC,KAChCD,GAAKhkB,KAAKwpI,MACVvlH,GAAKjkB,KAAKypI,MAEV,IACI5zE,EAAM7xC,EAWV,OAVAA,EACErH,KAAK0hB,KAAKqrG,EAAsB/sH,KAAK2U,IAAMtN,EAC3CrH,KAAK2hB,KAAKorG,EAAsB/sH,KAAK2U,IAAMrN,EAC7CA,EACEtH,KAAK2hB,KAAKorG,EAAsB/sH,KAAK2U,IAAMukC,EAC3Cl5C,KAAK0hB,KAAKqrG,EAAsB/sH,KAAK2U,IAAMrN,EAE7CD,GAAKrH,KAAK4a,IAAIv3B,KAAKkwB,eAAeoH,MAAMtT,GACxCC,GAAKtH,KAAK4a,IAAIv3B,KAAKkwB,eAAeoH,MAAMrT,GAEjC,CAACD,EAAIhkB,KAAKo6B,OAAS,EAAGnW,EAAIjkB,KAAKs6B,QAAU,IAjEhDt6B,KAAKwpI,MAAQ5yC,EACb52F,KAAKypI,MAAQ5yC,EACb72F,KAAKozB,QAAUA,EACfpzB,KAAK4xF,OAAO7uF,EAAO0M,GAGrBipD,WAAWtlC,GACTpzB,KAAKozB,QAAUA,EAGjBw+D,OAAO7uF,EAAe0M,GACpBzP,KAAKo6B,OAASr3B,EACd/C,KAAKs6B,QAAU7qB,EAGjB8pB,WACE,OAAOv5B,KAAKo6B,OAGdZ,YACE,OAAOx5B,KAAKs6B,QAgDdg5D,SAAStvE,EAAWC,GAClBjkB,KAAKwpI,OAASxlH,EACdhkB,KAAKypI,OAASxlH,EAGhB0kB,SAAS3kB,EAAWC,GAClBjkB,KAAKwpI,MAAQxlH,EACbhkB,KAAKypI,MAAQxlH,EAGfuzE,iBAAiB9nE,GACf1vB,KAAKwpI,MAAQ95G,EAASwB,OACtBlxB,KAAKypI,MAAQ/5G,EAASyB,OAGxBsrD,WACE,OAAOz8E,KAAKwpI,MAGd9sD,WACE,OAAO18E,KAAKypI,MAGdv1E,mBACE,OAAOl0D,KAAKkwB,eAGdnwB,SACEC,KAAKkwB,eAAe9X,SAAS4L,GAAKhkB,KAAKwpI,MAAQxpI,KAAKozB,QAAQu/D,WAC5D3yF,KAAKkwB,eAAe9X,SAAS6L,GAAKjkB,KAAKypI,MAAQzpI,KAAKozB,QAAQu/D,WAC5D3yF,KAAKkwB,eAAe9X,SAAS4L,GAAKhkB,KAAKo6B,OAAS,EAChDp6B,KAAKkwB,eAAe9X,SAAS6L,GAAKjkB,KAAKs6B,QAAU,EACjDt6B,KAAKkwB,eAAeoH,MAAMtT,EAAIhkB,KAAKozB,QAAQu/D,WAC3C3yF,KAAKkwB,eAAeoH,MAAMrT,EAAIjkB,KAAKozB,QAAQu/D,c,kCCxH/C,oDAAMhnF,EAAKC,EAAOD,GAEH,MAAMshF,EAAoB,cAAD,KACtC7hF,UAAsC,GAEtCu+H,uBACE,QAAS3pI,KAAKw6E,uBAAuB50E,OAGvC40E,uBACE,OAAOx6E,KAAKoL,UAGdipF,mBAAmB3kE,GACjB,IAAK,IAAI3b,EAAI,EAAGA,EAAI/T,KAAKoL,UAAUxF,OAAQmO,IACzC,GAAIpI,EAAG4Y,QAAQvkB,KAAKoL,UAAU2I,GAAI2b,GAAW,OAAO,EAGtD,OAAO,EAGTujE,iBACEjzF,KAAKoL,UAAUxF,OAAS,EAG1BsuF,eACExkE,EACAk6G,EACAp2C,EAA2C,MAEvCxzF,KAAKq0F,mBAAmB3kE,GACtBk6G,GAAa5pI,KAAK6pI,iBAAiBn6G,IAKpCk6G,GAAa5pI,KAAKizF,iBAElBO,IAAoBA,EAAiB9jE,EAAS6pC,aACjDv5D,KAAKoL,UAAUR,KAAK8kB,IAIxBikE,gBACEliC,EACAm4E,EACAp2C,EAA2C,MAEtCo2C,GAAa5pI,KAAKizF,iBAEvBxhC,EAAU3pD,QAAQ4nB,GAChB1vB,KAAKk0F,eAAexkE,GAAU,EAAM8jE,IAIxCq2C,iBAAiBn6G,GACf,GAAI1vB,KAAKq0F,mBAAmB3kE,GAAW,CAErC,IADA,IAAI3b,EAAI/T,KAAKoL,UAAUxF,OAAS,EACzBmO,IAAM,GAAK/T,KAAKoL,UAAU2I,GAAGjN,MAAQ4oB,EAAS5oB,OACjDiN,EAGJ/T,KAAKoL,UAAU61F,OAAOltF,EAAG,Q,kDC9DhB,KACbu3D,aAAc,CACZvoE,MAAO,GACPoyB,YAAa,EACbC,aAAc,GAEhBm2C,iBAAkB,CAChBxoE,MAAO,IAETkI,WAAY,CACVlI,MAAO,M,iCCTX,kCAAO,MAAMkgD,EAAoB,IAC1B17C,KAAKC,MAAQ,IAAMmV,KAAKsb,MAAsB,IAAhBtb,KAAKmtH,W,yGCCnC,MAAMC,EACX3/F,IAEA,IAAKA,EACH,MAAO,GAGT,MAAM4/F,EAAoC,CACxCjyF,EACA1uC,KAEA,MAAM4gI,EAAQ,CAAClyF,GACf,OAAK1uC,EAASY,eAEdZ,EACG6gI,sBACA7kG,YACAv9B,QAAQqiI,IACPH,EAAkC,GAAD,OAC5BjyF,EAD4B,YAChBoyF,GACf9gI,EAASstH,SAASwT,IAClBriI,QAAQ7E,IACRgnI,EAAMr/H,KAAK3H,OAIVgnI,GAd6BA,GAiBtC,OAAOznG,IACLxgB,iBAAO,EAAGooB,EAAmBs1B,QAAS3rD,GAC/Bq2B,EAEE4/F,EACL5/F,EAAmBggG,UAAUr2H,GAC7Bq2B,EAAmBu1B,MAAM5rD,IAJK,M,iDClCtC,oEAmBe,MAAMs2H,UAAsBtwH,YAGzC9X,QACMjC,KAAKyB,QAAQzB,KAAKyB,OAAOQ,QAG/BlC,SAAU,MAAD,EASHC,KAAKC,MAPPiC,EAFK,EAELA,MACAC,EAHK,EAGLA,SACAusB,EAJK,EAILA,SACA4b,EALK,EAKLA,aACAnd,EANK,EAMLA,kBACAid,EAPK,EAOLA,mBACA3lC,EARK,EAQLA,eAGIvB,EAAciqB,EAChBA,EAAkBsB,sBAClB3jB,EAEJ,OACE,kBAAC,IAAD,CACE0F,gBAAiB,IACf,kBAACs4E,EAAA,EAAD,CACEt+E,OAAQxK,KAAKC,MAAMyuB,SAAW,OAAS,QACvCjhB,kBAAmBvK,EACnBoK,mBACE6f,EACIA,EAAkBwB,0BAClB7jB,EAENJ,WAAS,EACTxI,MAAOA,EACPC,SAAUA,EACVsC,eAAgBA,EAChB4qB,WAAY06G,EAAmB3/F,GAAoB7kC,IACjD+kI,IAAY,CACV9oI,KAAM8oI,EACNpoI,MAAOooI,KAGX/6G,aAAcb,EACdlsB,IAAKC,GAAUzC,KAAKyB,OAASgB,IAGjCgO,aAAcxL,GACZqlC,IAAiB5b,EACf,kBAACg5D,EAAA,EAAD,CACErhF,KAAM,kBAAC,IAAD,MACN/F,UAAWN,KAAKC,MAAMmqC,mBACtB7lC,SAAO,EACPU,MAAOA,EACPT,QAAS8lC,IAET,QAOP,MAAMK,EAAyB,EAElCzoC,QACAirB,oBACAM,yBAEF25G,EACAlnI,IAEKgC,GAAUirB,EAAkB0rG,aAK/B,0BACEp4H,MAAOP,EACPqhB,UAAWuC,IAAW,CACpB,CAAC3U,MAAuB,KAG1B,yBACEoS,UAAWuC,IAAW,CACpB,CAACzd,MAAO,IAEVtB,IAAKqiI,EACLpiI,IAAI,KAEL9C,GAjBI,kBAACurB,EAAD,O,4dCKX,MAAM88G,EAAmB3+H,EAAO2+H,kBAAoB,GAE9C5+H,EAAKC,EAAOD,GAEZ9I,EAAS,CACb2nI,cAAe,CACbznI,MAAO,IACPwX,UAAW,SACXlL,QAAS,OACTC,cAAe,WA6DnB,MAAMm7H,UAAkB3qI,YAA+B,eAAD,oBACpDwB,MAAQ,CACNopI,kBAAkB,EAClBx9E,kBAAkB,EAClBy9E,iBAAiB,EACjBC,uBAAuB,EACvBC,mBAAmB,EACnBC,gBAAgB,EAChBC,gBAAgB,EAChBC,eAAgB,KAChBC,oBAAqB,KACrBC,oBAAoB,EACpBC,WAAYtvH,cACZuvH,cAAe,KACfC,aAAc,GACdC,kBAAkB,EAClBC,uBAAuB,EACvBC,oBAAoB,EACpBC,mBAAmB,EACnBC,wBAAwB,EACxB5nI,aAAc,CAAE4P,QAAS,GAAIzP,OAAQ,WACrCqpG,iBAAiB,EACjBq+B,mCAAmC,EACnCC,iCAAiC,EACjCC,kCAAkC,EAClCC,sBAAsB,EACtBxgC,+BAAgC,KAChCygC,+BAA+B,EAC/B3hB,8BAA8B,EAC9BC,sBAAuB,IA7B2B,KA+BpD90F,QAAU,KA/B0C,KAgCpDy2G,uBAAyB,GAhC2B,KAiCpDC,iBAA8C,KAjCM,KAqEpDC,yBAA4BC,IAAqC,MAAD,EACGnsI,KAAKC,MAA9DmsI,EADsD,EACtDA,0BAA2BC,EAD2B,EAC3BA,0BAE9BA,IAGFF,IACDC,EAA0BE,sCAM5BtsI,KAAKusI,qBAAqBF,GAA2B52H,KAAK,IACxDzV,KAAKwsI,6BALLxsI,KAAKysI,wBAAuB,KA9EoB,KAkGpDC,gBAAkB,KAAsB,MAAD,EACF1sI,KAAKC,MAAhC0sI,EAD6B,EAC7BA,iBAAkBpsI,EADW,EACXA,KAC1B,OAAKosI,EAOEA,EACJC,kBAAkBC,YAA8BtsI,IAChDkV,KAAKq3H,IACJ,MAAMC,EAAwBD,EAAezhI,OAC3C2hI,IAAkBA,EAAcn9B,OAAO1iG,OAEnC8/H,EAAqBH,EAAezhI,OACxC2hI,GACEA,EAAcn9B,OAAO1iG,QAAU6/H,EAAcn9B,OAAOq9B,WAElDC,EAA0BL,EAAezhI,OAC7C2hI,GACEA,EAAcn9B,OAAO1iG,OAAS6/H,EAAcn9B,OAAOq9B,WAEvDtkI,QAAQC,KAAR,iBAAuBkkI,EAAsBnnI,OAA7C,oBACIqnI,EAAmBrnI,QACrBgD,QAAQuE,MAAR,sCAEI8/H,EAAmBrnI,OAFvB,8CAIEqnI,GAGAE,EAAwBvnI,QAC1BgD,QAAQuE,MAAR,0DAEIggI,EAAwBvnI,OAF5B,uFAIEunI,MAlCNvkI,QAAQC,KACN,gEAEKgN,QAAQ6T,OAAO,IAAIC,MAAM,qCAxGgB,KA6IpDyjH,0BAA4B,CAC1BC,EACAC,IAEOC,YACL,KACE,MAAMC,EAAa7hI,EAAG8hI,cAAcC,uBAGpC,OAFAF,EAAWjQ,gBAAgB8P,GAEpBrtI,KAAK2tI,gBAAgBH,EAAYF,IAE1Cl1B,GAAQxvG,QAAQC,KAAR,+BAAqCuvG,EAArC,SAxJwC,KA4JpDu1B,gBAAkB,CAChB/mI,EACA0mI,KACmB,MACXngF,EAAmCntD,KAAKC,MAAxCktD,+BAER,OAAOntD,KAAK4tI,eAAen4H,KAAK,KAI9BhO,IAAgBomI,oBAGT,IAAIh4H,QAAQlN,IACjB3I,KAAK2B,SACH,CACEqpI,eAAgBpkI,EAChBqkI,oBAAqBqC,GAEvB,KAGEngF,EAA+ByyD,qCAC7Bh5G,GAGE0mI,GACF1mI,EAAQknI,eAAeR,EAAaS,gBAGtCplI,WA1L0C,KAiMpD4jI,qBAAwBe,IAA+C,MAAD,EACxBttI,KAAKC,MAAzCM,EAD4D,EAC5DA,KAAM6rI,EADsD,EACtDA,0BAEZ4B,EAIE5B,EAJF4B,YACAC,EAGE7B,EAHF6B,cACAxgC,EAEE2+B,EAFF3+B,OACAygC,EACE9B,EADF8B,oBAGF,IAAKzgC,EAMH,OALA7kG,QAAQuE,MACN,6DACAmgI,EACAlB,GAEKv2H,QAAQlN,UA4CjB,OAHA3I,KAAK2B,SAAS,CAAEmpI,gBAAgB,KArCzBkD,GAAgBC,EAIdD,EAAYV,GAAc,GAAM73H,KAAK04H,GACrCA,GAEU3qI,IAAO4V,kBACpB7Y,EAAKG,EACH,iJAKGutI,EAAcX,GATQA,GAJtBz3H,QAAQlN,QAAQ2kI,IAwCxB73H,KAAK63H,GAAgB7/B,EAAO6/B,IAC5Bp1H,MAAMC,IAvBF61H,GAAgBC,EAIdD,EAAYV,GAAc,GAAO73H,KAAK04H,GACtCA,GAEU3qI,IAAO4V,kBACpB7Y,EAAKG,EACH,kKAKGutI,EAAcX,GATQ,MAJtBz3H,QAAQlN,QAAQ,OAwBe8M,KAAK63H,IACzC,GAAIA,EACF,OAAO7/B,EAAO6/B,GAGhB,MAAMn1H,KAGT1C,KAAK,EAAGrC,cACP,IAAK4wE,YAAqBzjF,EAAM6S,GAE9B,OAGF,MAAMi6H,EAAoB1hI,EAAGS,WAAWM,aAAa0G,GACrD,OAAOpT,KAAKotI,0BACVC,EAIAC,GACA73H,KACA,KACE43H,EAAkB/gI,UAEpB6L,IAEE,MADAk1H,EAAkB/gI,SACZ6L,MAIXD,MAAM/K,IACL,MAAMihI,EAAeF,EACjBA,EAAoB/gI,GACpB,2IACJ+I,YACE,CAAC3V,EAAKG,EAAE,oCAAiCH,EAAKG,EAAE0tI,IAAep4H,KAC7D,MAEF7I,KAGHsI,KAAK,IAAMzV,KAAK2B,SAAS,CAAEmpI,gBAAgB,MA1SI,KA6SpDuD,SAAW,IACF7qI,IAAO8qI,OA9SoC,KAiTpDV,aAAe,KAAsB,MAC3B5C,EAAmBhrI,KAAKsB,MAAxB0pI,eACA79E,EAAmCntD,KAAKC,MAAxCktD,+BACR,OAAK69E,EAEE,IAAIn1H,QAAQlN,IACjB3I,KAAKuuI,oBAAmB,GACxBvuI,KAAK2B,SACH,CACEwpI,WAAY7tH,YAAiBtd,KAAKsB,MAAM6pI,WAAYH,IAEtD,KACE79E,EAA+Bq1D,uCAC7BwoB,GAEFA,EAAe1+H,SACftM,KAAK2B,SACH,CACEqpI,eAAgB,KAChB5gB,8BAA8B,EAC9BC,sBAAuB,IAEzB,KACErqH,KAAKulD,gBACL58C,UArBkBkN,QAAQlN,WApTc,KAiVpDqxE,sBAAwB,KACtB,MAAM39D,EAAYgB,YAAcrd,KAAKsB,MAAM6pI,YAC3C,OAAK9uH,GAAcA,EAAUG,UAKtBH,EAAUG,UAAUw9D,yBAJzBpxE,QAAQ8zB,KAAK,+CACN,KArVyC,KA2VpD8xG,qBAAuB,KAChBxuI,KAAKyuI,KAAKl5G,SACbv1B,KAAK2B,SAAS,CACZupI,oBAAqBlrI,KAAKsB,MAAM4pI,sBA9Vc,KAkWpDqD,mBAAqB,CAAC3qI,GAAgB,KACpC5D,KAAK2B,SAAS,CACZupI,mBAAoBtnI,KApW4B,KAwWpD8qI,iBAAoBC,IACb3uI,KAAKu1B,SAEVv1B,KAAKu1B,QAAQm5G,iBAAiBC,IA3WoB,KA8WpDC,iCAAmC,KACjC5uI,KAAK2B,SACH,CACEyoH,8BAA+BpqH,KAAKsB,MAAM8oH,8BAE5C,KACEpqH,KAAKulD,mBApXyC,KAyXpDspF,UAAY,KAAO,MACT7D,EAAmBhrI,KAAKsB,MAAxB0pI,eACR,IAAKA,EAAgB,OAErB,MAAM/nI,EAAOosD,YAAiB,YAAapsD,GACzC+nI,EAAeh6F,eAAe/tC,IAEd+nI,EAAe1jC,gBAC/BrkG,EACA+nI,EAAeziC,mBAEPhB,0BAA0ByjC,GAEpChrI,KAAKwnG,0BAtY6C,KAyYpDsnC,kBAAoB,KAAO,MACjB9D,EAAmBhrI,KAAKsB,MAAxB0pI,eACR,IAAKA,EAAgB,OAErB,MAAM/nI,EAAOosD,YAAiB,oBAAqBpsD,GACjD+nI,EAAehjC,uBAAuB/kG,IAExC+nI,EAAe/iC,wBACbhlG,EACA+nI,EAAenhC,2BAEjB7pG,KAAKwnG,0BApZ6C,KAuZpDunC,kBAAoB,KAAO,MACjB/D,EAAmBhrI,KAAKsB,MAAxB0pI,eACR,IAAKA,EAAgB,OAErB,MAAM/nI,EAAOosD,YAAiB,oBAAqBpsD,GACjD+nI,EAAej6F,uBAAuB9tC,IAExC+nI,EAAeljC,wBACb7kG,EACA+nI,EAAe9hC,0BAEjBlpG,KAAKwnG,0BAla6C,KAqapDwnC,4BAA8B,KAAO,MAC3BhE,EAAmBhrI,KAAKsB,MAAxB0pI,eACR,IAAKA,EAAgB,OAErB,MAAM/nI,EAAOosD,YAAiB,eAAgBpsD,GAC5C+nI,EAAe7mC,iCAAiClhG,IAElD+nI,EAAe7iC,kCACbllG,EACA+nI,EAAevgC,qCAEjBzqG,KAAKwnG,0BAhb6C,KAmbpDynC,aAAgBtxH,IAAsB,MAC5BqtH,EAAmBhrI,KAAKsB,MAAxB0pI,eACAzqI,EAASP,KAAKC,MAAdM,KACHyqI,GAEUxnI,IAAO4V,kBACpB7Y,EAAKG,EACH,4EAKJV,KAAK2B,SACH,CACEwpI,WAAYztH,YAAgB1d,KAAKsB,MAAM6pI,WAAYxtH,IAErD,KACEqtH,EAAekE,aAAavxH,EAAOqnB,WACnChlC,KAAKwnG,4BArcyC,KA0cpD2nC,qBAAwBpxH,IAAsC,MACpDitH,EAAmBhrI,KAAKsB,MAAxB0pI,eACAzqI,EAASP,KAAKC,MAAdM,KACHyqI,GAEUxnI,IAAO4V,kBACpB7Y,EAAKG,EACH,sFAKJV,KAAK2B,SACH,CACEwpI,WAAYrtH,YACV9d,KAAKsB,MAAM6pI,WACXptH,IAGJ,KACEitH,EAAeoE,qBAAqBrxH,EAAeinB,WACnDhlC,KAAKwnG,4BA/dyC,KAoepD6nC,qBAAwBlxH,IAAsC,MACpD6sH,EAAmBhrI,KAAKsB,MAAxB0pI,eACAzqI,EAASP,KAAKC,MAAdM,KACHyqI,GAEUxnI,IAAO4V,kBACpB7Y,EAAKG,EACH,uFAKJV,KAAK2B,SACH,CACEwpI,WAAYjtH,YACVle,KAAKsB,MAAM6pI,WACXhtH,IAGJ,KACE6sH,EAAesE,qBAAqBnxH,EAAe6mB,WACnDhlC,KAAKwnG,4BAzfyC,KA8fpD+nC,+BACExxH,IACI,MACIitH,EAAmBhrI,KAAKsB,MAAxB0pI,eADL,EAE8ChrI,KAAKC,MAA9CM,EAFL,EAEKA,KAAM4sD,EAFX,EAEWA,+BACT69E,GAEUxnI,IAAO4V,kBACpB7Y,EAAKG,EACH,iFAKJV,KAAK2B,SACH,CACEwpI,WAAY7sH,YACVte,KAAKsB,MAAM6pI,WACXptH,IAGJ,KACEitH,EAAewE,+BAA+BzxH,EAAeinB,WAC7DhlC,KAAKwnG,2BAMTr6C,EAA+B82D,uCAC7B+mB,KA5hBgD,KAgiBpDyE,aAAe,CAAC3nF,EAAiBzB,KAAqB,MAC5C2kF,EAAmBhrI,KAAKsB,MAAxB0pI,eACAzqI,EAASP,KAAKC,MAAdM,KACR,IAAKyqI,EAAgB,OAErB,IAAKA,EAAeh6F,eAAe8W,IAAYzB,IAAYyB,EAAS,OAEpE,GAAgB,KAAZzB,EAIF,YAHApV,YACE1wC,EAAKG,EAAE,6DAKX,GAAIsqI,EAAeh6F,eAAeqV,GAEhC,YADApV,YAAe1wC,EAAKG,EAAE,sDAIxB,MAAMid,EAASqtH,EAAentH,UAAUiqC,GACxC9nD,KAAK2B,SACH,CACEwpI,WAAYztH,YAAgB1d,KAAKsB,MAAM6pI,WAAYxtH,IAErD,KACEA,EAAOpH,QAAQ8vC,GACfrmD,KAAKwnG,4BA1jByC,KA+jBpDkoC,qBAAuB,CAAC5nF,EAAiBzB,KAAqB,MACpD2kF,EAAmBhrI,KAAKsB,MAAxB0pI,eACAzqI,EAASP,KAAKC,MAAdM,KACR,IAAKyqI,EAAgB,OAErB,IAAKA,EAAehjC,uBAAuBlgD,IAAYzB,IAAYyB,EACjE,OAEF,GAAgB,KAAZzB,EAIF,YAHApV,YACE1wC,EAAKG,EAAE,6DAKX,GAAIsqI,EAAehjC,uBAAuB3hD,GAIxC,YAHApV,YACE1wC,EAAKG,EAAE,gEAKX,MAAMqd,EAAiBitH,EAAe/sH,kBAAkB6pC,GACxD9nD,KAAK2B,SACH,CACEwpI,WAAYrtH,YACV9d,KAAKsB,MAAM6pI,WACXptH,IAGJ,KACEA,EAAexH,QAAQ8vC,GACvBrmD,KAAKwnG,4BA/lByC,KAomBpDmoC,qBAAuB,CAAC7nF,EAAiBzB,KAAqB,MACpD2kF,EAAmBhrI,KAAKsB,MAAxB0pI,eACAzqI,EAASP,KAAKC,MAAdM,KACR,IAAKyqI,EAAgB,OAErB,IAAKA,EAAej6F,uBAAuB+W,IAAYzB,IAAYyB,EACjE,OAEF,GAAgB,KAAZzB,EAIF,YAHApV,YACE1wC,EAAKG,EAAE,6DAKX,GAAIsqI,EAAej6F,uBAAuBsV,GAIxC,YAHApV,YACE1wC,EAAKG,EAAE,6DAKX,MAAMyd,EAAiB6sH,EAAe3sH,kBAAkBypC,GACxD9nD,KAAK2B,SACH,CACEwpI,WAAYjtH,YACVle,KAAKsB,MAAM6pI,WACXhtH,IAGJ,KACEA,EAAe5H,QAAQ8vC,GACvBrmD,KAAKwnG,4BApoByC,KAyoBpDooC,+BAAiC,CAAC9nF,EAAiBzB,KAAqB,MAC9D2kF,EAAmBhrI,KAAKsB,MAAxB0pI,eACAzqI,EAASP,KAAKC,MAAdM,KACA4sD,EAAmCntD,KAAKC,MAAxCktD,+BACR,IAAK69E,EAAgB,OAErB,IACGA,EAAe7mC,iCAAiCr8C,IACjDzB,IAAYyB,EAEZ,OAEF,GAAgB,KAAZzB,EAIF,YAHApV,YACE1wC,EAAKG,EAAE,6DAKX,GAAIsqI,EAAe7mC,iCAAiC99C,GAIlD,YAHApV,YACE1wC,EAAKG,EAAE,0DAKX,IAAKiL,EAAG46C,QAAQC,aAAaH,GAM3B,YALApV,YACE1wC,EAAKG,EACH,2IAMN,MAAM6d,EAA2BysH,EAAevsH,4BAC9CqpC,GAEF9nD,KAAK2B,SACH,CACEwpI,WAAY7sH,YACVte,KAAKsB,MAAM6pI,WACX5sH,IAGJ,KAGE5S,EAAG+6C,uBAAuBkpF,+BACxB5E,EACAzsH,EACAupC,EACAzB,GAEF9nC,EAAyBhI,QAAQ8vC,GACjC8G,EAA+B82D,uCAC7B+mB,GAEFhrI,KAAKwnG,4BAnsByC,KAwsBpDqoC,qBAAuB,CACrBjpI,EACA+W,EACAyV,KACI,MACI64G,EAAqBjsI,KAArBisI,iBADL,EAE6DjsI,KAAKsB,MAA7D+oH,EAFL,EAEKA,sBAAuBD,EAF5B,EAE4BA,6BAE1B6hB,GAELjsI,KAAK2B,SACH,CACEopI,gBAAgB,GAElB,KACE,IAAI+E,EAAkBnyH,EAClB0sG,GAAyBD,GACvBxjH,EAAQoqC,eAAeq5E,KACzBylB,EAAkBlpI,EAAQiX,UAAUwsG,IAIxC4hB,EACG8D,oBAAoBnpI,EAASkpI,EAAiB18G,GAC9Clb,MAAM/K,IACLvE,QAAQuE,MACN,kEACAA,KAGHsI,KAAK,KACJzV,KAAK2B,SAAS,CACZopI,gBAAgB,SAxuBwB,KA+uBpDiF,6BAA+B,CAC7BppI,EACA+W,EACAI,EACAqV,KACI,MACI64G,EAAqBjsI,KAArBisI,iBACHA,GAELjsI,KAAK2B,SACH,CACEopI,gBAAgB,GAElB,KACEkB,EACGgE,4BAA4BrpI,EAAS+W,EAAQI,EAAgBqV,GAC7Dlb,MAAM/K,IACLvE,QAAQuE,MACN,kEACAA,KAGHsI,KAAK,KACJzV,KAAK2B,SAAS,CACZopI,gBAAgB,SAvwBwB,KA8wBpDmF,WAAa,CACXjtI,GAEEktI,oBAAmB,EACnBC,mBAAkB,GACyC,MACzD,MAAD,EACyCpwI,KAAKC,MAAzCM,EADL,EACKA,KAAM6rI,EADX,EACWA,0BACRiE,EAAqB,CACzB/rI,MAAOrB,EACP+Y,aAAc,EAAGO,WAAUC,eACzB,gBAAC,IAAmBtb,SAApB,KACG,EAAG2D,YACF,gBAAC,IAAD,CACEyyC,sBAAuB,CACrB8yE,6BAA8BpqH,KAAKsB,MAChC8oH,6BACHG,gCAAiC,IAC/BvqH,KAAK4uI,mCACPvkB,sBAAuBrqH,KAAKsB,MAAM+oH,sBAClCC,4BAA6B,KAC3BtqH,KAAKswI,sBAAsBrtI,KAG/B2D,QAAS5G,KAAKsB,MAAM0pI,eACpB/9F,WAAYhqC,EACZuiD,WAAYxlD,KAAK0uI,iBACjBr3F,UAAW,CAACzwC,EAAS+W,EAAQyV,KAC3BpzB,KAAK6vI,qBAAqBjpI,EAAS+W,EAAQyV,GADJ,MAE/B63G,EAAwBjrI,KAAKsB,MAA7B2pI,oBAENpmI,EAAO4M,mBACP26H,EAA0BmE,mBAC1BtF,GAEAmB,EAA0BmE,kBACxB3pI,EACAqkI,IAIN7zF,oBAAqBp3C,KAAKC,MAAMuwI,sBAChC/4F,yBACEz3C,KAAKisI,kBACLjsI,KAAKisI,iBAAiBwE,sBAExBj5F,eAAgBx3C,KAAK0wI,aACrBC,aAAc3wI,KAAKC,MAAM0wI,aACzBr7H,gBAAiBtV,KAAKC,MAAMqV,gBAC5BC,iBAAkBvV,KAAK4wI,kBACvBr5H,wBAAyBvX,KAAKC,MAAMsX,wBACpCgF,SAAUA,EACV/Z,IAAKga,EACLosC,eAAgB5oD,KAAKC,MAAM2oD,kBAKnCvkD,IAAK,UAAYpB,GAEb4tI,EAAsB,CAC1BvsI,MAAOrB,EAAO,IAAM1C,EAAKG,EAAE,iBAC3Bsb,aAAc,EAAGO,WAAUC,eACzB,gBAAC,IAAmBtb,SAApB,KACG,EAAG2D,YACF,gBAAC,IAAD,CACE+B,QAAS5G,KAAKsB,MAAM0pI,eACpB/9F,WAAYhqC,EACZuiD,WAAYxlD,KAAK0uI,iBACjBp3F,sBAAuB,CACrB8yE,6BAA8BpqH,KAAKsB,MAChC8oH,6BACHG,gCAAiC,IAC/BvqH,KAAK4uI,mCACPvkB,sBAAuBrqH,KAAKsB,MAAM+oH,sBAClCC,4BAA6B,KAC3BtqH,KAAKswI,sBAAsBrtI,KAG/Bo0C,UAAW,CAACzwC,EAAS+W,EAAQyV,KAC3BpzB,KAAK6vI,qBAAqBjpI,EAAS+W,EAAQyV,GADJ,MAE/B63G,EAAwBjrI,KAAKsB,MAA7B2pI,oBAENpmI,EAAO4M,mBACP26H,EAA0BmE,mBAC1BtF,GAEAmB,EAA0BmE,kBACxB3pI,EACAqkI,IAIN7zF,oBAAqBp3C,KAAKC,MAAMuwI,sBAChC/4F,yBACEz3C,KAAKisI,kBACLjsI,KAAKisI,iBAAiBwE,sBAExBj5F,eAAgBx3C,KAAK0wI,aACrB1vH,qBAAsBhhB,KAAK8wI,mBAC3B7vH,aAAche,GACZjD,KAAKkwI,WAAWjtI,EAAM,CACpBktI,kBAAkB,EAClBC,iBAAiB,IAGrB96H,gBAAiBtV,KAAKC,MAAMqV,gBAC5BC,iBAAkBvV,KAAK4wI,kBACvBr5H,wBAAyBvX,KAAKC,MAAMsX,wBACpCuxC,4BAA6B9oD,KAAK+wI,6BAClChoF,uBAAwB/oD,KAAKgxI,wBAC7Bz0H,SAAUA,EACV/Z,IAAKga,EACLosC,eAAgB5oD,KAAKC,MAAM2oD,kBAKnCvkD,IAAK,iBAAmBpB,EACxBgZ,aAAcm0H,GAGVa,EAAsBb,EACxBr0H,YAAc/b,KAAKsB,MAAM6pI,WAAYkF,GACrCrwI,KAAKsB,MAAM6pI,WACT+F,EAAgCf,EAClCp0H,YAAck1H,EAAqBJ,GACnCI,EAEJjxI,KAAK2B,SAAS,CAAEwpI,WAAY+F,GAAiC,IAC3DlxI,KAAKulD,iBAEPvlD,KAAKuuI,oBAAmB,IAl5B0B,KAq5BpDuC,mBAAsB7tI,IACpBjD,KAAK2B,SACH,CACEwpI,WAAYpvH,YAAc/b,KAAKsB,MAAM6pI,WAAY,CAC/C7mI,MAAOrB,EACP+Y,aAAc,EAAGO,WAAUC,eACzB,gBAAC,IAAD,CACE5V,QAAS5G,KAAKsB,MAAM0pI,eACpBmG,mBAAoBluI,EACpBuiD,WAAYxlD,KAAK0uI,iBACjB1tH,qBAAsBhhB,KAAK8wI,mBAC3B7vH,aAAche,GACZjD,KAAKkwI,WAAWjtI,EAAM,CACpBktI,kBAAkB,EAClBC,iBAAiB,IAGrB96H,gBAAiBtV,KAAKC,MAAMqV,gBAC5BC,iBAAkBvV,KAAK4wI,kBACvBr5H,wBAAyBvX,KAAKC,MAAMsX,wBACpCuxC,4BAA6B9oD,KAAK+wI,6BAClChoF,uBAAwB/oD,KAAKgxI,wBAC7B15F,sBAAuBuR,IACvBtsC,SAAUA,EACV/Z,IAAKga,EACLosC,eAAgB5oD,KAAKC,MAAM2oD,iBAG/BvkD,IAAK,mBAAqBpB,KAG9B,IAAMjD,KAAKulD,iBAEbvlD,KAAKuuI,oBAAmB,IAt7B0B,KAy7BpD6C,mBAAsBnuI,IAAkB,MAC9BmpI,EAA8BpsI,KAAKC,MAAnCmsI,0BACRpsI,KAAK2B,SACH,CACEwpI,WAAYpvH,YAAc/b,KAAKsB,MAAM6pI,WAAY,CAC/C7mI,MAAOrB,EACP+Y,aAAc,EAAGO,WAAUC,eACzB,gBAAC,IAAmBtb,SAApB,KACG,EAAG2D,YACF,gBAAC,IAAD,CACE+B,QAAS5G,KAAKsB,MAAM0pI,eACpBqG,mBAAoBpuI,EACpBuiD,WAAYxlD,KAAK0uI,iBACjBr3F,UAAW,CAACzwC,EAAS+W,EAAQI,EAAgBqV,KAC3CpzB,KAAKgwI,6BACHppI,EACA+W,EACAI,EACAqV,GALqD,MAO/C63G,EAAwBjrI,KAAKsB,MAA7B2pI,oBAENpmI,EAAO4M,mBACP26H,EAA0BmE,mBAC1BtF,GAEAmB,EAA0BmE,kBACxB3pI,EACAqkI,IAIN7zF,oBAAqBp3C,KAAKC,MAAMuwI,sBAChC/4F,yBACEz3C,KAAKisI,kBACLjsI,KAAKisI,iBAAiBwE,sBAExBn5F,sBAAuBuR,IACvBrR,eAAgBx3C,KAAK0wI,aACrBC,aAAc3wI,KAAKC,MAAM0wI,aACzBr7H,gBAAiBtV,KAAKC,MAAMqV,gBAC5BC,iBAAkBvV,KAAK4wI,kBACvBr5H,wBAAyBvX,KAAKC,MAAMsX,wBACpCgF,SAAUA,EACV/Z,IAAKga,KAKbnY,IAAK,mBAAqBpB,KAG9B,IAAMjD,KAAKulD,iBAEbvlD,KAAKuuI,oBAAmB,IA/+B0B,KAk/BpD+C,6BAA+B,CAC7BruI,EACAmlD,EACAC,KACI,MAAD,EAC8CroD,KAAKC,MAA9CM,EADL,EACKA,KAAM4sD,EADX,EACWA,+BACdntD,KAAK2B,SACH,CACEwpI,WAAYpvH,YAAc/b,KAAKsB,MAAM6pI,WAAY,CAC/C7mI,MAAOrB,EAAO,IAAM1C,EAAKG,EAAE,oBAC3Bsb,aAAc,EAAGO,WAAUC,eACzB,gBAAC,IAAD,CACE5V,QAAS5G,KAAKsB,MAAM0pI,eACpBuG,6BAA8BtuI,EAC9BuiD,WAAYxlD,KAAK0uI,iBACjBp5H,gBAAiBtV,KAAKC,MAAMqV,gBAC5BC,iBAAkBvV,KAAK4wI,kBACvBr5H,wBAAyBvX,KAAKC,MAAMsX,wBACpCgF,SAAUA,EACV6rC,6BAA8BA,EAC9BC,6BAA8BA,EAC9BS,4BAA6B9oD,KAAK+wI,6BAClChoF,uBAAwB/oD,KAAKgxI,wBAC7BxuI,IAAKga,EACLg1H,gCAAiC,KAC/BrkF,EAA+ByyD,qCAC7B5/G,KAAKsB,MAAM0pI,iBAGfpiF,eAAgB5oD,KAAKC,MAAM2oD,iBAG/BvkD,IAAK,8BAAgCpB,KAGzC,IAAMjD,KAAKulD,iBAEbvlD,KAAKuuI,oBAAmB,IAvhC0B,KA0hCpDkD,cAAgB,KAAO,MACblxI,EAASP,KAAKC,MAAdM,KACRP,KAAK2B,SACH,CACEwpI,WAAYpvH,YAAc/b,KAAKsB,MAAM6pI,WAAY,CAC/C7mI,MAAO/D,EAAKG,EAAE,kBACdsb,aAAc,EAAGO,WAAUC,eACzB,gBAAC,IAAD,CACE5V,QAAS5G,KAAKsB,MAAM0pI,eACpBxlF,WAAYxlD,KAAK0uI,iBACjBhxD,iBAAkB,CAAC9nE,EAAsB8O,KAEvCA,GAAG,IAEL+6D,iBAAkB,CAChB7pE,EACAywC,EACA3hC,KAGAA,GAAG,IAELnI,SAAUA,EACV/Z,IAAKga,EACLjH,iBAAkBvV,KAAK4wI,kBACvBt7H,gBAAiBtV,KAAKC,MAAMqV,kBAGhCjR,IAAK,eAGT,IAAMrE,KAAKulD,kBAzjCqC,KA6jCpDmsF,cAAgB,KAAO,MAAD,EACe1xI,KAAKC,MAAhCM,EADY,EACZA,KAAMijF,EADM,EACNA,iBACdxjF,KAAK2B,SACH,CACEwpI,WAAYpvH,YAAc/b,KAAKsB,MAAM6pI,WAAY,CAC/C7mI,MAAO/D,EAAKG,EAAE,mBACdsb,aAAc,EAAGO,WAAUC,eACzB,gBAAC,IAAD,CACE5V,QAAS5G,KAAKsB,MAAM0pI,eACpBxlF,WAAYxlD,KAAK0uI,iBACjBlhC,UACIhqB,EAAiBn4E,OACjB,EAAGu4E,yBAA0BA,GAC7Bh+E,OAEJ6nG,OAAQztG,KAAK2xI,cACbzxF,SAAU,IAAMlgD,KAAK4xI,mBACrBlkC,qBAAsB,IAAM1tG,KAAKuuI,qBACjCtjC,eAAgB,KACdjrG,KAAK6xI,qBAEPlkC,kBAAmB,IAAM3tG,KAAK8xI,kBAC9BlkC,iBAAkB,IAAM5tG,KAAK+xI,uBAC7BlkC,qBAAsB,IAAM7tG,KAAKgyI,eACjCz1H,SAAUA,EACV/Z,IAAKga,IAGTnY,IAAK,aACLuW,UAAU,KAGd,IAAM5a,KAAKulD,kBA7lCqC,KAimCpDmrF,aAAe,KAAO,MACZnwI,EAASP,KAAKC,MAAdM,KACRP,KAAK2B,SACH,CACEwpI,WAAYpvH,YAAc/b,KAAKsB,MAAM6pI,WAAY,CAC/C7mI,MAAO/D,EAAKG,EAAE,iBACdsb,aAAc,EAAGO,WAAUC,eACzB,gBAAC,IAAD,CACE5V,QAAS5G,KAAKsB,MAAM0pI,eACpBxlF,WAAYxlD,KAAK0uI,iBACjBnyH,SAAUA,EACV/Z,IAAKga,EACL+gF,qBAAsB,IAAMv9F,KAAKiyI,kBAAiB,KAGtD5tI,IAAK,cAGT,IAAMrE,KAAKulD,kBAnnCqC,KAunCpDwrF,6BAA+B,CAC7B9xE,EACA18D,KACI,MACIyoI,EAAmBhrI,KAAKsB,MAAxB0pI,eACR,IAAKA,EAAgB,OAErB,MAAMprF,EAAgBqf,EAAUj6B,UAChC,GAAIgmG,EAAe7mC,iCAAiCvkD,GAAgB,CAElE,MAAMrhC,EAA2BysH,EAAevsH,4BAC9CmhC,GAEIc,EAAeiiE,YAAwBpgH,GAEvC2vI,EAAWxzH,YACf1e,KAAKsB,MAAM6pI,WACX5sH,GAEE2zH,GAEFA,EAAS91H,OAAOqpC,2BACd/E,EAAaz9C,KACby9C,EAAaxd,cAEfljC,KAAK2B,SAASL,IAAK,CACjB6pI,WAAY1uH,YAAiBnb,EAAM6pI,WAAY+G,EAASvzH,cAI1D3e,KAAKsxI,6BACH1xF,EACAc,EAAaz9C,KACby9C,EAAaxd,mBAKjBt6B,QAAQ8zB,KAAR,8BACyBkjB,EADzB,6CA7pCgD,KAmqCpD4nD,uBAAyB,KACnBxnG,KAAKC,MAAM2oD,gBACb5oD,KAAKC,MAAM2oD,eAAegC,wBAC5B5qD,KAAKif,eAtqC6C,KAyqCpD+xH,wBAA0B,CACxBpxF,EACAjN,KACI,MACIq4F,EAAmBhrI,KAAKsB,MAAxB0pI,eACR,IAAKA,EAAgB,OAFlB,MAGK79E,EAAmCntD,KAAKC,MAAxCktD,+BAGFtN,GAAsBmrF,EAAe7mC,iCACzCvkD,GAEIqf,EAAYpf,EACdmrF,EAAe7iC,kCAAkCvoD,EAAe,GAChEorF,EAAevsH,4BAA4BmhC,GAE3CC,IACFof,EAAU3R,YAAY1N,GACtBqf,EAAUxR,eACR,kEAIJwR,EAAUkzE,qBAAqBx/F,EAAgB,GAC/Cwa,EAA+ByyD,qCAC7BorB,IAlsCgD,KAssCpD4G,iBAAmB,CAAChuI,GAAgB,KAClC5D,KAAK2B,SAAS,CACZ+oI,iBAAkB9mI,KAxsC8B,KA4sCpD+tI,cAAgB,KACe3xI,KAAKC,MAA1BujF,iBAGWn4E,OAAO,EAAGu4E,yBAA0BA,GAClDh+E,OAAS,EAEZ5F,KAAKoyI,oCAELpyI,KAAKqyI,0CArtC2C,KAytCpDA,uCAAyC,KAAO,MAAD,EACDryI,KAAKC,MAAzCmsI,EADqC,EACrCA,0BAA2B7rI,EADU,EACVA,KAC9B6rI,EAA0BkG,kBAE/BlG,EACGkG,mBACA78H,KAAK63H,IACJ,GAAKA,EAEL,OAAOttI,KAAKusI,qBAAqBe,GAAc73H,KAAK,IAClDzV,KAAKwsI,+BAGRt0H,MAAM/K,IACL,MAAMihI,EAAehC,EAA0B8B,oBAC3C9B,EAA0B8B,oBAAoB/gI,GAC9C,6FACJ+I,YACE,CAAC3V,EAAKG,EAAE,oCAAiCH,EAAKG,EAAE0tI,IAAep4H,KAC7D,MAEF7I,MA9uC4C,KAmvCpDolI,YAAc,KAAO,MAAD,EAC8BvyI,KAAKsB,MAA7C0pI,EADU,EACVA,eAAgBC,EADN,EACMA,oBACxB,IAAKD,EAAgB,OACrB,IAAKC,EACH,OAAOjrI,KAAKwyI,gBAJI,QAO0BxyI,KAAKC,MAAzCM,EAPU,EAOVA,KACAuqG,EARU,EAOJshC,0BACNthC,cACR,IAAKA,EACH,OAAO9qG,KAAKwyI,gBAGd/0H,YAAezd,KAAKsB,MAAM6pI,YAC1BnrI,KAAKyyI,kBAAkBlyI,EAAKG,EAAE,mBAE9BoqG,EAAckgC,EAAgBC,GAAqBx1H,KACjD,EAAGi9H,eACGA,IACE1yI,KAAKC,MAAM2oD,gBACb5oD,KAAKC,MAAM2oD,eAAe26D,qBAC5BvjH,KAAKyyI,kBAAkBlyI,EAAKG,EAAE,kCAGlCyX,IACEjC,YACE3V,EAAKG,EACH,mFAEFyX,MAhxC4C,KAsxCpDq6H,cAAgB,KAAO,MACbxH,EAAmBhrI,KAAKsB,MAAxB0pI,eADY,EAEoChrI,KAAKC,MAArDujF,EAFY,EAEZA,iBAAkB4oD,EAFN,EAEMA,0BACrBpB,IAGHxnD,EAAiBn4E,OAAO,EAAGy4E,yBAA0BA,GAClDl+E,OAAS,IACXwmI,EAA0BrhC,gBAE3B/qG,KAAK2yI,kCAEL3yI,KAAK4yI,qCAlyC2C,KAsyCpDA,iCAAmC,KAAO,MAAD,EACS5yI,KAAKsB,MAA7C0pI,EAD+B,EAC/BA,eAAgBC,EADe,EACfA,oBACxB,IAAKD,EAAgB,OAErBvtH,YAAezd,KAAKsB,MAAM6pI,YAJa,QAKKnrI,KAAKC,MAAzCM,EAL+B,EAK/BA,KAAM6rI,EALyB,EAKzBA,0BAETA,EAA0BrhC,iBAI/BqhC,EACGrhC,gBAAgBigC,EAAgBC,GAChCx1H,KACC,EAAGi9H,WAAUpF,mBACPoF,IACE1yI,KAAKC,MAAM2oD,gBACb5oD,KAAKC,MAAM2oD,eAAe26D,qBAC5BvjH,KAAKyyI,kBAAkBlyI,EAAKG,EAAE,gCAE1B4sI,GACFttI,KAAK2B,SAAS,CACZspI,oBAAqBqC,MAK7Bn1H,IACEjC,YACE3V,EAAKG,EACH,sFAEFyX,MAt0C0C,KA40CpD05H,kBAAoB,KAClB,GACE7xI,KAAKC,MAAM2oD,gBACX5oD,KAAKC,MAAM2oD,eAAe9vC,kBAC1B,CACA,IAAK9Y,KAAKsB,MAAM0pI,eAAgB,OAAOn1H,QAAQlN,UAD/C,MAEQpI,EAASP,KAAKC,MAAdM,KAOR,IALeiD,IAAO4V,kBACpB7Y,EAAKG,EACH,+EAGS,OAAOmV,QAAQlN,UAE9B,OAAO3I,KAAK4tI,gBA31CsC,KA81CpDpB,0BAA4B,KAAO,MACzBxB,EAAmBhrI,KAAKsB,MAAxB0pI,eACHA,IAEoC,IAArCA,EAAeziC,kBACjBvoG,KAAKkwI,WAAWlF,EAAe5a,YAAY,GAAGprF,UAAW,CACvDorG,iBAAiB,EACjBD,kBAAkB,IAGpBnwI,KAAKuuI,uBAx2C2C,KA42CpDsE,iBAAmB,CAACjvI,GAAgB,KAClC5D,KAAK2B,SAAS,CACZurD,iBAAkBtpD,KA92C8B,KAk3CpDkvI,iBAAmB,CAAClvI,GAAgB,KAClC5D,KAAK2B,SAAS,CACZgpI,gBAAiB/mI,KAp3C+B,KAw3CpD6oI,uBAAyB,CAAC7oI,GAAgB,KACxC5D,KAAK2B,SAAS,CACZipI,sBAAuBhnI,KA13CyB,KA83CpDmvI,mBAAqB,CAACnvI,GAAgB,KACpC5D,KAAK2B,SAAS,CACZkpI,kBAAmBjnI,EACnBwnI,cAAe,QAj4CiC,KAq4CpD4H,gBAAkB,CAACpvI,GAAgB,KACjC5D,KAAK2B,SAAS,CACZ4pI,sBAAuB3nI,KAv4CyB,KA24CpDouI,aAAe,CAACpuI,GAAgB,KAC9B5D,KAAK2B,SAAS,CACZ6pI,mBAAoB5nI,KA74C4B,KAi5CpDqvI,YAAc,CAACrvI,GAAgB,KAC7B5D,KAAK2B,SAAS,CACZ8pI,kBAAmB7nI,KAn5C6B,KAu5CpDquI,iBAAmB,CAACruI,GAAgB,KAClC5D,KAAK2B,SAAS,CACZ+pI,uBAAwB9nI,KAz5CwB,KA65CpD0sI,sBAAyBrtI,IACvBjD,KAAK2B,SACH,CACE0oH,sBAAuBpnH,EACvBmnH,8BAA8B,GAEhC,KACEpqH,KAAKulD,mBAp6CyC,KAy6CpD2tF,mBAAsBhxI,IACpBlC,KAAK2B,SACH,CACEwpI,WAAY1uH,YAAiBzc,KAAKsB,MAAM6pI,WAAYjpI,IAEtD,IAAMlC,KAAKmzI,mBAAmB91H,YAAcrd,KAAKsB,MAAM6pI,eA96CP,KAk7CpDgI,mBAAsB92H,IACpBrc,KAAKulD,gBAGDlpC,EAAUG,WACZH,EAAUG,UAAU+wF,qBAv7C4B,KA27CpD6lC,kBAAqB/2H,IACnBoB,YAAezd,KAAKsB,MAAM6pI,YAC1BnrI,KAAK2B,SACH,CACEwpI,WAAYpuH,YAAe/c,KAAKsB,MAAM6pI,WAAY9uH,IAEpD,IAAMrc,KAAKulD,kBAj8CqC,KAq8CpD8tF,wBAA2Bh3H,IACzBoB,YAAezd,KAAKsB,MAAM6pI,YAC1BnrI,KAAK2B,SACH,CACEwpI,WAAYjuH,YAAqBld,KAAKsB,MAAM6pI,WAAY9uH,IAE1D,IAAMrc,KAAKulD,kBA38CqC,KA+8CpD+tF,sBAAwB,KACtB71H,YAAezd,KAAKsB,MAAM6pI,YAC1BnrI,KAAK2B,SACH,CACEwpI,WAAYruH,YAAmB9c,KAAKsB,MAAM6pI,aAE5C,IAAMnrI,KAAKulD,kBAr9CqC,KAy9CpDqrF,kBAAoB,CAClB2C,EACAhiB,GAA0B,KACD,MACjByZ,EAAmBhrI,KAAKsB,MAAxB0pI,eACFwI,EAAuBxzI,KAAKgsI,uBAAuBuH,GACzD,OAAKC,EAEEA,EAAqBC,gBAAgBzI,EAAgBzZ,GAF1B17G,QAAQlN,QAAQ,KA/9CA,KA8+CpDmpI,gBAAkB,CAACluI,GAAgB,KACjC5D,KAAK2B,SAAS,CACZ2rG,gBAAiB1pG,KAh/C+B,KAo/CpDwuI,kCAAoC,CAACxuI,GAAgB,KACnD5D,KAAK2B,SAAS,CACZgqI,kCAAmC/nI,KAt/Ca,KA0/CpD+uI,gCAAkC,CAAC/uI,GAAgB,KAC7CA,GAGF5D,KAAKuuI,oBAAmB,GAE1BvuI,KAAK2B,SAAS,CACZiqI,gCAAiChoI,KAjgDe,KAqgDpD8vI,2BAA6B,CAAC9vI,GAAgB,KAC5C5D,KAAK2B,SAAS,CACZkqI,iCAAkCjoI,KAvgDc,KA2gDpDmuI,qBAAuB,CAACnuI,GAAgB,KACtC5D,KAAK2B,SAAS,CACZmqI,qBAAsBloI,KA7gD0B,KAihDpD+vI,gBAAmB7vI,IACjB9D,KAAK2B,SAAS,CACZmC,iBAGF,MAAM8vI,EAAoBC,YAA2B/vI,GAC/CgwI,EAAmBC,YAA0BjwI,GACnD,GAAI8vI,EAAmB,CACA,IAAI16H,OAAO86H,aAAaJ,EAAmB,CAC9D9xD,KAAMgyD,IAEKG,QAAU,IAAMj0I,KAAK8xI,iBAAgB,KA5hDF,KAgiDpDoC,yBAA2B,IACzBl0I,KAAK2zI,gBAAgB,CACnB1vI,OAAQ,oBACRyP,QAAS,oBACT7K,KAAM,CACJsrI,YAAa,iBAriDiC,KAyiDpDC,wBAA0B,IACxBp0I,KAAK2zI,gBAAgB,CACnB1vI,OAAQ,mBACRyP,QAAS,qBA5iDuC,KA+iDpD++H,kBAAqBpH,GACnBrrI,KAAK2B,SAAS,CACZ0pI,eACAC,kBAAkB,IAljD8B,KAqjDpD+I,mBAAqB,IACnBr0I,KAAK2B,SAAS,CACZ2pI,kBAAkB,IAphDtBpwE,qBACOl7D,KAAKC,MAAMq0I,kBAAkBt0I,KAAK0xI,gBAGzCpyH,oBACEirH,EAAiB3/H,KAAK,CAAC,6BAA8B2pI,YAAY/sI,QAD/C,MAGV6kI,EAA8BrsI,KAAKC,MAAnCosI,0BAERrsI,KAAK0sI,kBACFx0H,MAAM,QAGNzC,KAAK,KAKJzV,KAAK2B,SAAS,CACZoqI,+BAA+B,MAGjCM,EACFrsI,KAAKksI,0BAAuD,GACnDlsI,KAAKC,MAAMu0I,cAAgBhxI,IAAOwV,SAC3ChZ,KAAK8yI,kBAAiB,GAExBvI,EAAiB3/H,KAAK,CACpB,qCACA2pI,YAAY/sI,QAEdoB,QAAQC,KAAK,iBAAkB4rI,eAqBjCC,qBAOE/oI,EAAGggB,WAAWxU,MAAMw9H,0BACpB30I,KAAK0sI,kBAAkBx0H,MAAM,QAq4C/BqtC,gBACE,MAAMlpC,EAAYgB,YAAcrd,KAAKsB,MAAM6pI,YACtC9uH,GAAcA,EAAUG,UAK7BH,EAAUG,UAAU+oC,gBAJlBvlD,KAAK0uI,iBAAiB,MAmF1B3uI,SAAU,MAAD,EAYHC,KAAKsB,MAVP0pI,EAFK,EAELA,eACAC,EAHK,EAGLA,oBACAG,EAJK,EAILA,cACAF,EALK,EAKLA,mBACAO,EANK,EAMLA,kBACAC,EAPK,EAOLA,uBACA5nI,EARK,EAQLA,aACAwpG,EATK,EASLA,gBACAw+B,EAVK,EAULA,qBACAxgC,EAXK,EAWLA,+BAXK,EAyBHtrG,KAAKC,MAXP20I,EAdK,EAcLA,mBACAC,EAfK,EAeLA,mBACAL,EAhBK,EAgBLA,YACAl/H,EAjBK,EAiBLA,gBACAk7H,EAlBK,EAkBLA,sBACAj5H,EAnBK,EAmBLA,wBACA41C,EApBK,EAoBLA,+BACA2nF,EArBK,EAqBLA,mBACAv0I,EAtBK,EAsBLA,KACAw0I,EAvBK,EAuBLA,6BACAC,EAxBK,EAwBLA,eAEIC,EACJj1I,KAAKsB,MAAMwpI,gBACX9qI,KAAKsB,MAAMypI,gBACX/qI,KAAKC,MAAMi1I,QAEb,OACE,uBAAK3zH,UAAU,gBACVyzH,GACDA,EAAe,CACbz0I,KAAMA,EACNqG,QAAS5G,KAAKsB,MAAM0pI,eACpBmK,gBAAiBn1I,KAAK2xI,cACtB7mC,cAAe9qG,KAAKuyI,YACpBxnC,gBAAiB/qG,KAAKwyI,cACtBvnC,eAAgBjrG,KAAK6xI,kBACrBuD,WAAYp1I,KAAKquI,SACjBrjC,gBAAiBhrG,KAAK6yI,iBACtBwC,gBAAiBr1I,KAAK4xI,iBACtBlkC,qBAAsB1tG,KAAKuuI,mBAC3B+G,gBAAiBt1I,KAAK0xI,cACtBl6F,eAAgBx3C,KAAK0wI,aACrB6E,YAAav1I,KAAK8xI,gBAClB5mC,kBAAmBlrG,KAAKgzI,gBACxBwC,eAAgBx1I,KAAKgyI,aACrB7mC,cAAenrG,KAAKizI,YACpBU,gBAAiB3zI,KAAK2zI,kBAE1B,gBAAC,IAAD,CAAiBrG,aAAcrC,IAC/B,gBAAC,IAAD,CACErnI,KAAMsnI,EACNuK,WAAY,CACVxwI,MAAOpC,EAAO2nI,eAEhB3mI,QAAS7D,KAAKwuI,sBAEd,gBAAC,IAAD,CACE/tI,MAAOuqI,EAAiBA,EAAehmG,UAAY,aACnD0wG,yBAAuB,EACvB7xI,QAAS7D,KAAKwuI,uBAEfxD,GACC,gBAAC,IAAD,CACEpkI,QAASokI,EACThqH,qBAAsBhhB,KAAK8wI,mBAC3B7vH,aAAcjhB,KAAKkwI,WACnB9jC,qBAAsBpsG,KAAKoxI,mBAC3B7kC,+BAAgCvsG,KAAKsxI,6BACrCtlC,YAAahsG,KAAK6uI,UAClBviC,oBAAqBtsG,KAAK8uI,kBAC1BriC,8BAA+BzsG,KAAKgvI,4BACpC9iC,oBAAqBlsG,KAAK+uI,kBAC1B7nC,eAAgBlnG,KAAKivI,aACrB5lC,uBAAwBrpG,KAAKmvI,qBAC7BnlC,iCACEhqG,KAAKuvI,+BAEP7mC,uBAAwB1oG,KAAKqvI,qBAC7BtjC,eAAgB/rG,KAAKyvI,aACrBpjC,uBAAwBrsG,KAAK0vI,qBAC7BljC,iCACExsG,KAAK4vI,+BAEP3jC,uBAAwBjsG,KAAK2vI,qBAC7B7kC,cAAe9qG,KAAKuyI,YACpBxnC,gBAAiB/qG,KAAKwyI,cACtBvnC,eAAgB,KACdjrG,KAAK6xI,qBAEP7mC,gBAAiBhrG,KAAK6yI,iBACtB3nC,kBAAmB,IAAMlrG,KAAKgzI,iBAAgB,GAC9C7nC,cAAe,IAAMnrG,KAAKizI,aAAY,GACtCpnC,gBAAiB,KACf7rG,KAAKyxI,gBACLzxI,KAAKuuI,oBAAmB,IAE1B3iC,6BAA8B,IAC5B5rG,KAAK0zI,6BAEPn2C,qBAAsB,IAAMv9F,KAAKiyI,kBAAiB,GAClD3mC,+BAAgCA,EAChCjB,kCAAmC,KAEjCl9C,EAA+B82D,uCAC7B+mB,IAGJjwE,cAAemwE,EACftiF,eAAgB5oD,KAAKC,MAAM2oD,kBAG7BoiF,GACA,gBAAC,IAAD,KACE,gBAAC,QAAD,kDAIN,gBAAC,IAAD,CACExoI,IAAK+yB,GAAYv1B,KAAKu1B,QAAUA,EAChCogH,kBAAmB31I,KAAKC,MAAMq0I,iBAC9BsB,aAAc51I,KAAKsB,MAAM0pI,eACzBwD,qBAAsBxuI,KAAKwuI,qBAC3BqH,cAAe,IAAM71I,KAAK6yI,kBAAiB,GAC3CiD,cAAe91I,KAAKC,MAAM61I,cAC1B5B,yBAA0Bl0I,KAAKk0I,yBAC/BE,wBAAyBp0I,KAAKo0I,0BAEhC,gBAAC,IAAD,CAAch6H,aAAcpa,KAAKC,MAAMq0I,kBACpCn3H,YAAWnd,KAAKsB,MAAM6pI,YAAY5lI,IAAI,CAAC8W,EAAW2xB,KACjD,MAAM1xB,EACJc,YAAmBpd,KAAKsB,MAAM6pI,cAAgBn9F,EAChD,OACE,gBAAC,IAAD,CACE1pC,MAAO+X,EAAU/X,MACjBD,IAAKgY,EAAUhY,IACf6V,OAAQoC,EACR9X,QAAS,IAAMxE,KAAKkzI,mBAAmBllG,GACvCnqC,QAAS,IAAM7D,KAAKozI,kBAAkB/2H,GACtC3B,cAAe,IAAM1a,KAAKqzI,wBAAwBh3H,GAClD1B,WAAY3a,KAAKszI,sBACjBz4H,YAAa,IAAM7a,KAAKmzI,mBAAmB92H,GAC3CzB,SAAUyB,EAAUzB,cAK3BuC,YAAWnd,KAAKsB,MAAM6pI,YAAY5lI,IAAI,CAAC8W,EAAW2xB,KACjD,MAAM1xB,EAAec,YAAmBpd,KAAKsB,MAAM6pI,cAAgBn9F,EACnE,OACE,gBAAC,IAAD,CAAqB3pC,IAAKgY,EAAUhY,IAAK6V,OAAQoC,GAC/C,gBAAC,IAAD,KAAgBD,EAAUtc,OAAOuc,OAIvC,gBAAC,IAAD,CAAahK,KAAM2iI,IACnB,gBAAC,IAAD,CACErxI,KAAMkoI,EACNjoI,QAAS,IAAM7D,KAAK+xI,sBAAqB,KAE3C,gBAAC,IAAD,CACEnuI,KAAM5D,KAAKsB,MAAMgqI,iBACjByK,iBAAkB,IAClBlyI,QAAS7D,KAAKq0I,mBACd2B,aAAc,CACZ,mBAAoB,oBAEtBtiI,QAAS,wBAAMs6B,GAAG,oBAAoBhuC,KAAKsB,MAAM+pI,kBAEhDuJ,GACD50I,KAAKsB,MAAM4rD,kBACX0nF,EAAmB,CACjB/wI,QAAS,IAAM7D,KAAK6yI,kBAAiB,GACrCt1C,qBAAsB,KACpBv9F,KAAK6yI,kBAAiB,GACtB7yI,KAAKiyI,kBAAiB,IAExBrrI,QAAS5G,KAAKsB,MAAM0pI,mBAErB6J,GACD70I,KAAKsB,MAAMopI,kBACXmK,EAAmB,CACjBjxI,KAAM5D,KAAKsB,MAAMopI,iBACjB7mI,QAAS,IAAM7D,KAAK4xI,kBAAiB,GACrCnkC,OAAQ,CAAC9pB,EAAiB2pD,KACxBttI,KAAK4xI,kBAAiB,GAEtBkD,EAAmBnxD,GAChBluE,KAAK,IAAMzV,KAAKusI,qBAAqBe,IACrC73H,KAAK,IAAMzV,KAAKwsI,8BAErBtsF,SAAU,CAACt5C,EAAS+8E,EAAiB2pD,KACnCttI,KAAK4xI,kBAAiB,GAEtBkD,EAAmBnxD,GAChBluE,KAAK,IAAMzV,KAAK2tI,gBAAgB/mI,EAAS0mI,IACzC73H,KAAK,IAAMzV,KAAKwsI,kCAGtBgI,GACD10I,eAAmB00I,EAAa,CAC9B5wI,KAAM5D,KAAKsB,MAAMqpI,gBACjB9mI,QAAS,IAAM7D,KAAK8yI,kBAAiB,OAEtC9yI,KAAKsB,MAAM0pI,gBACZhrI,KAAKsB,MAAMuqI,kCACT,gBAAC,IAAD,CACEjlI,QAAS5G,KAAKsB,MAAM0pI,eACpBpnI,MAAI,EACJqT,QAAS,KACHjX,KAAKC,MAAM2oD,gBACb5oD,KAAKC,MAAM2oD,eAAegC,wBAC5B5qD,KAAK0zI,4BAA2B,IAElC7vI,QAAS,IAAM7D,KAAK0zI,4BAA2B,GAC/Cp+H,gBAAiBA,EACjBC,iBAAkBvV,KAAK4wI,kBACvBr5H,wBAAyBA,MAG5B6zH,GACDtrI,eAAmBsrI,EAAe,CAChCxnI,KAAM5D,KAAKsB,MAAMupI,kBACjBhnI,QAAS,IAAM7D,KAAK+yI,oBAAmB,OAExCvC,GACDA,EACE,CACEyF,SAAU,IAAMj2I,KAAK6yI,kBAAiB,GACtCt1C,qBAAsB,IAAMv9F,KAAKiyI,kBAAiB,IAEnDiE,IACCl2I,KAAKisI,iBAAmBiK,IAG7B5gI,EAAgB/P,IACf,CAAC4wI,EAAgBtlI,KACf,MAAMkJ,EAAYo8H,EAAehkH,UACjC,OACE,gBAAC,IAAmBjxB,SAApB,CAA6BmD,IAAK8xI,EAAelzI,MAC9C,EAAG8P,kBAAiBE,qBAEjB,gBAAC8G,EAAD,CACEvX,IAAK67H,GACFr+H,KAAKgsI,uBACJmK,EAAelzI,MACbo7H,EAEN99H,KAAMA,EACNwS,gBAAiBA,EACjBE,gBAAiBA,OAQ9Bw4H,GACC,gBAAC,IAAD,CACE7nI,MAAI,EACJC,QAAS,IAAM7D,KAAKizI,aAAY,GAChC11C,qBAAsB,IAAMv9F,KAAKiyI,kBAAiB,KAGrDvG,GACC,gBAAC,IAAD,CACE7nI,QAAS,KACP7D,KAAKiyI,kBAAiB,IAExBruI,MAAI,IAGP5D,KAAKsB,MAAMiqI,uBACV,gBAAC,IAAD,CAAmB1nI,QAAS,IAAM7D,KAAKgzI,iBAAgB,KAExDhzI,KAAKsB,MAAMkqI,oBACV,gBAAC,IAAD,CACE5nI,MAAI,EACJC,QAASuyI,IACPp2I,KAAKgyI,cAAa,GACdoE,GACFp2I,KAAK00I,wBAKZpnC,GACC,gBAAC,IAAD,CACE1pG,MAAI,EACJC,QAAS,IAAM7D,KAAK8xI,iBAAgB,GACpChuI,aAAcA,IAGjB9D,KAAKsB,MAAMqqI,mCACV,gBAAC,IAAD,CACE9nI,QAAS,IAAM7D,KAAKoyI,mCAAkC,GACtD5uD,iBAAkBxjF,KAAKC,MAAMujF,iBAC7BC,iBAAkBE,IAChB3jF,KAAKoyI,mCAAkC,GACvC0C,EAAmBnxD,GAAiBluE,KAAK,KACvCzV,KAAKqyI,4CAGT3uD,mBAAoB,KAClB1jF,KAAKoyI,mCAAkC,GACvCpyI,KAAK4xI,kBAAiB,MAI3B5xI,KAAKsB,MAAMsqI,iCACV,gBAAC,IAAD,CACE/nI,QAAS,IAAM7D,KAAK2yI,iCAAgC,GACpDnvD,iBAAkBxjF,KAAKC,MAAMujF,iBAC7BC,iBAAkBE,IAChB3jF,KAAK2yI,iCAAgC,GACrCmC,EAAmBnxD,GAAiBluE,KAAK,KACvCzV,KAAK4yI,wCAKZ5yI,KAAKsB,MAAMspI,uBACV,gBAAC,IAAD,CACE/mI,QAAS,KACP7D,KAAKysI,wBAAuB,IAE9B1oD,UAAW,KACT/jF,KAAKysI,wBAAuB,GAC5BzsI,KAAKksI,0BAAuD,MAIlE,gBAAC,IAAD,CACErzH,eAAgB7Y,KAAKsB,MAAM0pI,eAC3BzqI,KAAMP,KAAKC,MAAMM,KACjB0Q,SAAUjR,KAAKC,MAAMM,KAAK0Q,SAC1B6H,oBACI9Y,KAAKC,MAAM2oD,gBACb5oD,KAAKC,MAAM2oD,eAAe9vC,oBAG9B,gBAAC,IAAD,MACC9Y,KAAKsB,MAAMyqI,+BACVgJ,GACAA,MAMKtK,Q,kDCpkEf,0DAOA,MAOM/uH,EACJ,gLAoJIygG,EAAQ,CACZh7G,cAxIoB,CACpB6rG,QAAS,CACPC,YALgB,WAOlBv5F,QAAS,CACPC,QAAS,UACTxG,MAAO,QAETooB,QAAS,CACP9c,gBAjBoB,UAkBpB2sF,eAAgB,WAElB5qF,aAAc,CACZkB,aACAjD,gBAtBoB,UAuBpB4C,UAAW,UACXE,wBApCsB,UAqCtBD,kBAAmB,UACnB7L,OAAQ,GACR4mI,iBAAkB,IAEpBC,eAAgB,CACdC,oBAxCyB,WA0C3BxwH,KAAM,CACJs+C,qBAAsB,WAExB9yC,SAAU,CACR4zE,qBApCoB,UAqCpBqxC,eAAgB,mBAChBC,yBAA0B,mBAC1BrxC,eAAgB,UAChB7pF,wBAlDyB,UAmDzBD,kBAAmB,UACnBsgH,eAAgB,UAChBC,iBAAkB,UAClBH,6BAA8B,UAC9BC,+BAAgC,WAElC/5E,aAAc,CACZC,YAAa,WAEf/+C,KAAM,CACJiC,IAAK,uBAEPg1H,oBAAqB,0BACrBv4G,yBAA0B,gCAC1Bi6C,mBAAoB,yBACpBwqB,sBAAuB,4BACvBzxE,uBAAwB,IAwFxBhB,SApFekjI,YAAe,CAC9BC,WAAY,CACVj7H,cAEFsxF,QAAS,CACPzqG,KAAM,QACNq0I,OAAQ,CAAEtgG,MAAO,uBAAwBD,MAAO,QAChD+tE,WAAY,CACVyyB,MAhEc,UAiEd36B,QAtEkB,WAwEpB33G,QAAS,CACPuyI,MAAOC,YArFa,UAqFc,KAClCC,KAtFoB,UAuFpBC,KAAMC,YAvFc,UAuFY,KAChCC,aAAc,QAEhBC,UAAW,CACTN,MAAOC,YA5FU,UA4Fc,KAC/BC,KA7FiB,UA8FjBC,KAAMC,YA9FW,UA8FY,KAC7BC,aAAc,SAGlBE,UAAW,CACTC,cAAe,CACbC,GAAI,CAEF56G,WAAY,MAGhB66G,SAAU,CACRC,UAAW,CACT,WAAY,CACV12G,aAAa,uBAInB22G,UAAW,CACTC,aAAc,CACZl/H,gBAlHe,YAqHnBm/H,cAAe,CACblwH,KAAM,CAEJjU,MAAO,SAGXokI,gBAAiB,CACfnwH,KAAM,CAEJjU,MAAO,SAIXqkI,QAAS,CACPpwH,KAAM,CACJjP,gBAnIkB,YAsItBs/H,OAAQ,CACNC,iBAAkB,CAChBvkI,MAAO,oBAGXwkI,cAAe,CAEbvwH,KAAM,CACJqD,OAAQ,YAIZmtH,UAAW,CACTxwH,KAAM,CACJw8F,aAAc,EACdvnF,WAAY,UAWLw/E,O,iCCxKf,0KAcO,MAAM03B,EAA8B/vI,GACb,qBAAxBA,EAAaG,OACR,6BAEF,GAGI8vI,EAA6BjwI,GACZ,qBAAxBA,EAAaG,OACR,iGAEF,GAGID,EAAwBC,GACpB,wBAAXA,EAAyC,yBAC9B,qBAAXA,EAAsC,6BAC3B,yBAAXA,EACK,wDACM,UAAXA,EAA2B,8BAChB,sBAAXA,EACK,sCACM,sBAAXA,EACK,sEACF,GAGIE,EAAwBF,GACpB,qBAAXA,EAAsC,oCACnC,8BAGIqB,EAAqBrB,GACd,qBAAXA,G,iCC/CT,+DA2BgBhE,QAAsB,MAC5BiG,EAAiBjG,EAAjBiG,aACR,OAAKA,EAGH,kBAAC,IAAD,CACE1B,QAAS,IAAMhB,IAAOC,gBAAgB0C,YAAYD,IAClD5F,SAAUL,EAAMK,SAChB2E,MAAOhF,EAAMgF,OAEb,kBAAC,IAAD,OARsB,O,0NCN5B,MAAM0G,EAAKC,EAAOD,GAEZwsI,EAAsB32E,0BAAgBp4D,KACtCgvI,EAAyB52E,0BAAgBmtC,KAE/C,MAAM0pC,UAA0Bv4I,YAC9BC,SACE,OAAO,2BAAMC,KAAKC,MAAMmB,WAI5B,MAAMk3I,EAA4B52E,4BAAkB22E,GACpDC,EAA0BltE,QAAU,YAiBrB,MAAMmtE,UAAsBz4I,YAA+B,eAAD,oBACvEwB,MAAQ,CACN8nE,WAAY,GACZovE,kBAAmBttI,cACnB04F,KAAM,UAJ+D,KAOvE60C,gBAAkB,CAACC,EAAkCltI,KACnDxL,KAAK2B,SAAS,CACZ62I,kBAAmBltI,YACjBtL,KAAKsB,MAAMk3I,kBACXE,EACAltI,MAZiE,KAiBvEqzH,cAAgB,KACdt4C,IAAUvvE,IACRrK,IACAxB,YAAanL,KAAKsB,MAAMk3I,mBAAmBjzI,IAAI,EAAGtC,OAAMoG,eAAT,CAC7CpG,OACA01I,mBAAoB9sI,YAAoBxC,QAtByB,KA2BvEuvI,MAAQ,KAAO,MAAD,EACgD54I,KAAKC,MAAzDmqC,EADI,EACJA,mBAAoBiwB,EADhB,EACgBA,4BACvBksB,IAAUllC,IAAI10C,OAED45E,IAAUpvE,IAAIxK,KACtB7E,QAAQ,EAAG7E,OAAM01I,yBACzB,MAAMtyF,EAAUgJ,YACdpsD,EACAA,GACEo3D,GACIA,EAA4BhZ,IAAIp+C,IAEhCmnC,EAAmBiX,IAAIp+C,GAC7B,UAEI41I,EAAc,IAAIltI,EAAGmtI,SAC3BtsI,YAAwBqsI,EAAaF,GACrCvuG,EAAmBgR,OACjBiL,EACAwyF,EACAzuG,EAAmBs1B,SAErBm5E,EAAYvsI,WAEdtM,KAAKif,gBAnDgE,KAsDvEwjD,gBAAkB,KAAO,MACfr4B,EAAuBpqC,KAAKC,MAA5BmqC,mBACFh/B,EAAoCD,YACxCnL,KAAKsB,MAAMk3I,mBAKiBptI,EAAUC,OAAOqtI,IAErCttI,EAAUiZ,KAChB00H,GACEL,IAAoBK,GACpBA,EAAqB1vI,SAASu7H,SAC5B8T,EAAgBrvI,UACD,KAODvB,QAAQ,EAAGuB,cAC/B+gC,EAAmB4uG,kBAAkB3vI,IAEvCrJ,KAAKizF,kBA/EgE,KAkFvEA,eAAiB,KACfjzF,KAAK2B,SAAS,CACZ62I,kBAAmBttI,iBApFgD,KAwFvE+tI,wBAA0B,CACxBh2I,EACAoG,EACA1G,EACAkO,EACA7G,KACI,MAAD,EACyDhK,KAAKC,MAAzDmqC,EADL,EACKA,mBAAoBiwB,EADzB,EACyBA,4BAE5B,GAAIA,GAA0C,WAAXrwD,EAAqB,CACtD,MAAM2uI,EAAqB9sI,YACzBwuD,EAA4BljD,IAAIlU,IAE5B41I,EAAc,IAAIltI,EAAGmtI,SAC3BtsI,YAAwBqsI,EAAaF,GACrCvuG,EAAmBgR,OAAOn4C,EAAM41I,EAAahoI,GAC7CgoI,EAAYvsI,SAEZ89B,EAAmBjzB,IAAIlU,GAAMg7D,UAAUt7D,QAEvC0G,EAAS40D,UAAUt7D,IA5GgD,KAuIvEu2I,mBAAsBj2I,IAAkB,MAAD,EACuBjD,KAAKC,MAAzDmqC,EAD6B,EAC7BA,mBAAoBiwB,EADS,EACTA,4BAE5B,OAAKA,GAAgCA,EAA4BhZ,IAAIp+C,GAE9DmnC,EAAmBiX,IAAIp+C,GAAQ,YAAc,SAD3C,IA3BXk2I,wBACEl2I,EACAm2I,EACA9vI,EACAU,GAEA,MAAMigI,EAAQmP,EAAelP,sBAAsB7kG,YAEnD,OAAO7C,IACLynG,EAAM1kI,IAAI,CAACtC,EAAM4N,KACf,MAAMxH,EAAW+vI,EAAeziB,SAAS1zH,GACzC,OAAOjD,KAAKq5I,+BACVp2I,EACAoG,EACAC,EAAQ,EACRuH,EACAuoI,EACApvI,MAcRqvI,+BACEp2I,EACAoG,EACAC,EACAuH,EACAuoI,EACAE,EAAgC,MAC/B,MACOlvG,EAAuBpqC,KAAKC,MAA5BmqC,mBACFngC,EAAcZ,EAASY,cAEvBD,EAASsvI,GAA8Bt5I,KAAKk5I,mBAAmBj2I,GAErE,OACE,gBAACk1I,EAAD,CACEl1I,KAAMA,EACN4N,MAAOA,EACPxM,IAAK,YAAcpB,EACnBoG,SAAUA,EACV/I,SAAoB,IAAVgJ,EACVA,MAAOA,EACPU,OAAQA,EACRT,UACEvJ,KAAKsB,MAAM8nE,WAAW//D,EAASvC,KAC3B,kCACAgE,EAENpB,cAAelI,IACbxB,KAAKi5I,wBAAwBh2I,EAAMoG,EAAU7H,EAAMqP,EAAO7G,GAE1DhK,KAAKif,cACDjf,KAAKC,MAAMysD,eAAe1sD,KAAKC,MAAMysD,iBAE3C/iD,sBAAuB,KACrBygC,EAAmB4uG,kBAAkB3vI,GACrCrJ,KAAKif,cACDjf,KAAKC,MAAMysD,eAAe1sD,KAAKC,MAAMysD,iBAE3CpqD,OAAQI,IACN,MAAMlB,EAAOkB,EAAM0D,OAAOlE,MAC1B,GAAIe,IAASzB,EAAM,OAEnB,IAAI8oE,GAAU,EAIZA,EAHG8uE,EAGOA,EAAeG,YAAYt2I,EAAMzB,GAFjC4oC,EAAmBovG,OAAOv2I,EAAMzB,GAK5CxB,KAAK2B,SAAS,CACZynE,WAAW,eACNppE,KAAKsB,MAAM8nE,WADN,CAER,CAAC//D,EAASvC,MAAOwjE,OAIvB9gE,SAAU,KACH4vI,EAGHA,EAAetwE,YAAY7lE,GAF3BmnC,EAAmBqlB,OAAOxsD,GAK5BjD,KAAKif,cACDjf,KAAKC,MAAMysD,eAAe1sD,KAAKC,MAAMysD,iBAE3CjjD,WAAY,KACV,MAAMxG,EAAOosD,YAAiB,gBAAiBpsD,GAC7CoG,EAASqtH,SAASzzH,IAEpBoG,EAASstH,SAAS1zH,GAAMg7D,UAAU,IAElCj+D,KAAKif,cACDjf,KAAKC,MAAMysD,eAAe1sD,KAAKC,MAAMysD,iBAE3CtrD,SACE6I,EACIjK,KAAKm5I,wBAAwBl2I,EAAMoG,EAAUC,EAAOU,GACpD,KAENJ,WAAgC,SAApB5J,KAAKsB,MAAMsiG,KACvB/5F,sBAA2C,WAApB7J,KAAKsB,MAAMsiG,KAClC95F,aAAc9J,KAAKsB,MAAMk3I,kBAAkBnvI,EAASvC,KACpDiD,SAAUyB,GACRxL,KAAKy4I,gBAAgB,CAAEx1I,OAAM6D,IAAKuC,EAASvC,IAAKuC,YAAYmC,KAMpEouD,eACE,QACI55D,KAAKC,MAAMuqC,yBACX,2BACE,gBAAC,IAAD,CACEvlC,MAAOpC,IAAO42I,iBACdC,aAAc72I,IAAO2nC,yBAEpBxqC,KAAKC,MAAMuqC,yBAEd,gBAAC,IAAD,CACEvlC,MAAOpC,IAAO42I,iBACdC,aAAc72I,IAAO2nC,yBAEpBxqC,KAAKC,MAAMwqC,gCAOtB1qC,SAAU,MAAD,EACqDC,KAAKC,MAAzDmqC,EADD,EACCA,mBAAoBiwB,EADrB,EACqBA,4BAC5B,IAAKjwB,EAAoB,OAAO,KAGhC,MAAMuvG,EAAkCt/E,EACpCr4C,iBAAO,EAAGq4C,EAA4BqF,QAAS7uD,IAC7C,MAAM5N,EAAOo3D,EAA4B+vE,UAAUv5H,GACnD,IAAKu5B,EAAmBiX,IAAIp+C,GAAO,CAEjC,MAAMoG,EAAWgxD,EAA4BsF,MAAM9uD,GACnD,OAAO7Q,KAAKq5I,+BACVp2I,EACAoG,EACA,EACAwH,OACA/F,EACA,aAIN,GAEE8uI,EAAyB53H,iBAC7B,EACAooB,EAAmBs1B,QACnB7uD,IACE,MAAMxH,EAAW+gC,EAAmBu1B,MAAM9uD,GACpC5N,EAAOmnC,EAAmBggG,UAAUv5H,GAE1C,OAAO7Q,KAAKq5I,+BACVp2I,EACAoG,EACA,EACAwH,OACA/F,KAKA+uI,EACJ,gBAACzB,EAAD,CACEvnI,MAAO,EACPxM,IAAK,mBACL/D,UAAQ,EACRsgE,MAAO,KACL,MAAMv3D,EAAW,IAAIsC,EAAGmtI,SACxBzvI,EAAS40D,UAAU,IACnB,MAAMh7D,EAAOosD,YAAiB,WAAYpsD,GACxCo3D,GACIA,EAA4BhZ,IAAIp+C,IAEhCmnC,EAAmBiX,IAAIp+C,IAE7BmnC,EAAmBgR,OAAOn4C,EAAMoG,EAAU+gC,EAAmBs1B,SAC7D1/D,KAAKif,cACDjf,KAAKC,MAAMysD,eAAe1sD,KAAKC,MAAMysD,iBAE3C/S,OAAQ35C,KAAK6+H,cACbhlF,QAAS75C,KAAK44I,MACd7hD,kBAAmB/2F,KAAKyiE,gBACxB/2D,aAAcA,YAAa1L,KAAKsB,MAAMk3I,mBACtC5pC,aAAcroB,IAAUllC,IAAI10C,OAIhC,OACE,gBAAC2rI,EAAD,CACEluG,mBAAoBpqC,KAAKC,MAAMmqC,mBAC/B63B,UAAW,EAAGtS,WAAUC,eACtB5vD,KAAKC,MAAMmqC,mBAAmBylB,KAAKF,EAAUC,GAC7C5vD,KAAKif,eAEPmkD,YAAY,kBACZC,eAAa,EACbmI,sBAAoB,KAEjBmuE,EAAgC/zI,QACjC+zI,GACAC,EAAuBh0I,QAAU5F,KAAK45D,iBACrCggF,EAAuBh0I,QAAUg0I,EACnCC,O,kDCpYM,KACbC,iBAAkB,CAChB1lI,UAAW,OACXghB,aAAc,GAEhBnqB,WAAY,CACVi/G,SAAU,GACVv6G,KAAM,EACNtK,eAAgB,YAElB+E,sBAAuB,GACvBnB,OAAQ,CACNoG,QAAS,OACTrJ,WAAY,SACZX,eAAgB,YAElB8D,gBAAiB,OACjBswI,iBAAkB,CAChBp0I,eAAgB,cAElBmlC,wBAAyB,CACvBp2B,UAAW,QAEbvJ,YAAa,CACX+c,QAAS,M,iCCvBb,oIAaO,MAAM67E,EAAuB/B,GAClB,sDAED34E,KAAK24E,GAKToB,EAAY,CAACrd,EAAc7+E,KACtC,MAAMitH,EAAwB,GAExBkmB,EAAW,CACf75C,EACA39F,EACAmR,EACAsmI,EAA2B,MAEtBnmB,EAAO3zB,KAAe2zB,EAAO3zB,GAAgB,IAElD2zB,EAAO3zB,GAAct1F,KAAK,CACxBrI,OACAmR,UACAsmI,sBA+CJ,OA3CKpzI,EAAQo8F,iBAOFp8F,EAAQo8F,iBAAiBp9F,QAAU,IAC5Cm0I,EACE,cACA,QACAt0D,EAAE,iCACFA,EAAE,oDAEMge,EAAoB78F,EAAQo8F,mBACtC+2C,EACE,cACA,QACAt0D,EACE,0IAEFA,EAAE,oDApBJs0D,EACE,cACA,QACAt0D,EAAE,8BACFA,EAAE,4DAoBD7+E,EAAQo+B,WACX+0G,EACE,OACA,QACAt0D,EAAE,sCACFA,EAAE,8CAID7+E,EAAQ8mD,cAAgB9mD,EAAQ8mD,aAAa5hB,MAAM,KAAKlmC,OAAS,IACpEm0I,EACE,cACA,QACAt0D,EAAE,wDACFA,EAAE,4CAICouC,GAGIhxB,EAA0B,CACrCpd,EACAouC,KAEKhjG,OAAOqrB,KAAK23E,GAAQjuH,SAEzBsQ,YACEuvE,EACE,4EAEA,OACA5gF,IAAOgvH,GACJtuH,IAAIsuH,GACHA,EAAOtuH,IAAK4H,GAAD,YAA8BA,EAAMuG,UAAWsC,KAAK,OAEhEA,KAAK,QAGL,I,6ICxFT,MAAMnT,EAAS,CACbo3I,KAAM,CACJzvI,OAAQ,GAEV0vI,UAAW,CACTjqI,UAAW,EACXZ,QAAS,OACTiL,SAAU,SAWC,MAAM6/H,UAA2BpgI,YAG9CuF,oBACMtf,KAAKw6D,YAAYx6D,KAAKw6D,WAAWv4D,QAGvClC,SAAU,MAAD,EAQHC,KAAKC,MANPukF,EAFK,EAELA,WACAC,EAHK,EAGLA,aACAviF,EAJK,EAILA,MACAC,EALK,EAKLA,SACAqlB,EANK,EAMLA,gBACA+8D,EAPK,EAOLA,MAGF,OACE,kBAAC,IAAD,CAAQ3/E,UAAQ,GACd,kBAAC,IAAD,CACE1C,MAAOA,EACPslB,gBAAiBA,EACjBrlB,SAAUD,IACRC,EAASD,IAEXM,IAAKkqG,GAAc1sG,KAAKw6D,WAAakyC,IAEvC,kBAAC,IAAD,KACE,kBAAC,IAAD,KACE,yBAAKznG,MAAOpC,EAAOq3I,WAChB31D,GACCA,EAAMh/E,IAAI,EAAG/D,OAAMU,YACjB,yBAAC,IAAD,CACEwS,KAAK,QACLrQ,IAAKnC,EACL+C,MAAK,eACApC,EAAOo3I,KADP,CAEHxhI,gBACG+rE,GAAcA,IAAetiF,OAE1B4I,GA/CNqzG,EA8CmBj8G,EA7ChCk4I,IAAY,CACjBC,KAAMl8B,EACNm8B,WAAY,WA6CM7mI,MACG+wE,GAAcA,IAAetiF,OAE1B4I,EADA,UAGRtG,QAAS,IACPigF,EAAaD,IAAetiF,EAAQ,GAAKA,GAE3CoC,MAAO9C,IAxDL28G,e,mNCZtB,MAAMxyG,EAAKC,EAAOD,GAuBH,MAAMghG,UAA8B5yF,YACjD5E,YAAYlV,GACVmV,MAAMnV,GADkB,KA2B1B6W,SAAW,KACT9W,KAAKC,MAAM0d,OAAO48H,sBAAsBv6I,KAAKsB,MAAM24E,aACnDj6E,KAAKC,MAAM0d,OAAO68H,uBAChBx6I,KAAKsB,MAAMm5I,2BAEbz6I,KAAKC,MAAM0d,OAAOm5B,mBAChB92C,KAAKsB,MAAMmX,gBAAgBszB,EAC3B/rC,KAAKsB,MAAMmX,gBAAgBwzB,EAC3BjsC,KAAKsB,MAAMmX,gBAAgByzB,GAE7BlsC,KAAKC,MAAMgX,WAnCXjX,KAAKsB,MAAQtB,KAAKkX,UAAUjX,EAAM0d,QAGpCzG,UAAUyG,GACR,MAAO,CACLs8D,YAAat8D,EAAOu8D,wBACpBugE,0BAA2B98H,EAAO+8H,sBAClCjiI,gBAAiB,CACfszB,EAAGpuB,EAAOoxB,wBACV9C,EAAGtuB,EAAOqxB,0BACV9C,EAAGvuB,EAAOsxB,yBACV9C,EAAG,IAKT/0B,0BAA0BC,KAEpBrX,KAAKC,MAAM2D,MAAQyT,EAASzT,MAC7ByT,EAASzT,MAAQ5D,KAAKC,MAAM0d,SAAWtG,EAASsG,SAEjD3d,KAAK2B,SAAS3B,KAAKkX,UAAUG,EAASsG,SAiB1C5d,SAAU,MAAD,EACqBC,KAAKC,MAAzB0d,EADD,EACCA,OAAQ/W,EADT,EACSA,QACVxC,EAAU,CASd,kBAAC,IAAD,CACEE,MAAO,kBAAC,QAAD,WACPD,IAAI,KACJE,SAAS,EACT+S,iBAAiB,EACjB9S,QAASxE,KAAK8W,YAQZ6jI,EAJ6Bh9H,EAChCi9H,gCACAv1G,YAGA9/B,IAAItC,IACH,MAAM43I,EAAoBl9H,EAAOm9H,sBAAsB73I,GACjDV,EAAOs4I,EAAkBjjE,cAEzBmjE,EAAqBpvI,EAAGggB,WAAWxU,MAAM6jI,uBAC7Cz4I,GAEF,GAAIg2E,YAAU5sE,EAAIovI,GAAqB,OAAO,KAE9C,MAAM5rF,EAAa4rF,EAAmBhkE,cACpC8jE,EAAkBv8C,aAClB13F,GAEIowE,EAAmBhd,YACvB7K,EACA0rF,GACEE,EAAmBhkE,cACjB8jE,EAAkBv8C,aAClB13F,GAEJ,CAACi0I,EAAmB53I,EAAMf,IACxB64I,EAAmB9jE,eACjB4jE,EAAkBv8C,aAClBr7F,EACAf,EACA0E,IAIN,QACIowE,EAAiBpxE,QACjB,kBAAC,IAAD,CACEvB,IAAKpB,EACL+1D,OAAQge,EACRvlB,UAAW,CAACopF,OAKnBxvI,OAAO4N,SAEV,OACE,kBAAC,IAAD,CACExY,MAAO,kBAAC,QAAD,yBACP2D,QAASA,EACTk8C,iBACE,kBAAC,IAAD,CACEh8C,MAAO,kBAAC,QAAD,6BACPoG,WAAS,EACTlG,QAAS,KACPxE,KAAKC,MAAM2sG,kBACX5sG,KAAKC,MAAM4D,aAIjBD,KAAM5D,KAAKC,MAAM2D,KACjBc,mBAAmB,EACnBD,eAAgBzE,KAAKC,MAAM4D,QAC3Bc,SAAS,MAET,kBAAC,IAAD,CACE8I,kBAAmB,kBAAC,QAAD,qBACnB/C,WAAS,EACTnI,KAAK,OACLL,MAAOlC,KAAKsB,MAAM24E,YAClB93E,SAAU,CAACoI,EAAGrI,IAAUlC,KAAK2B,SAAS,CAAEs4E,YAAa/3E,MAEvD,kBAAC,IAAD,CACEmI,QAASrK,KAAKsB,MAAMm5I,0BACpBn2I,MAAO,kBAAC,QAAD,0CACPgG,QAAS,CAACC,EAAG2uG,IACXl5G,KAAK2B,SAAS,CACZ84I,0BAA2BvhC,MAIjC,kBAAC,IAAD,CACEzrG,kBAAmB,kBAAC,QAAD,+BACnB/C,WAAS,EACT4hC,cAAY,EACZ74B,MAAOzT,KAAKsB,MAAMmX,gBAClB8zB,iBAAkB94B,GAChBzT,KAAK2B,SAAS,CAAE8W,gBAAiBhF,EAAM+4B,SAGzCyzF,IAAK0a,IACL,kBAAC,IAAD,KACE,kBAAC,QAAD,4GAMHA,EACA36I,KAAKC,MAAMg7I,oBACV,kBAAC,IAAD,CACE32I,MAAO,kBAAC,QAAD,+BACPoG,WAAS,EACTlG,QAAS,KACHxE,KAAKC,MAAMg7I,oBACbj7I,KAAKC,MAAMg7I,qBACbj7I,KAAKC,MAAM4D,kB,kDC5MzB,kCAAO,MAAM00E,EAAY,CACvB5sE,EACAJ,IACsC,IAA1BI,EAAGuvI,WAAW3vI,I,6DCQZtL,OAEZ,gBAAC,IAAD,CACE2D,KAAM3D,EAAM2D,KACZwmC,mBAAoBnqC,EAAM0d,OAAO0sB,eACjCE,SAAUtqC,EAAM4D,QAChBoT,QAAShX,EAAMgX,QACfxW,MAAO,gBAAC,QAAD,wBACP+pC,wBACE,gBAAC,QAAD,gFAKFC,8BACE,gBAAC,QAAD,2G,iHCvBR,MACa25B,EAA0B,CACrChsD,SAAU,WACV/I,QAAS,eACTtM,MAJkB,IAKlB0M,OALkB,IAMlBpK,eAAgB,SAChBW,WAAY,SACZmO,WAAYgnI,QACZ/mI,UAAW,SACXk6B,OAAQ,oBACRP,YAAa,WAGTlrC,EAAS,CACbu4I,gBAAgB,eACXh3E,EADU,CAEbggD,WAAY,0CAEdngD,qBAAsB,CACpBt/D,SApBgB,IAqBhB2P,UArBgB,IAsBhBC,cAAe,SACfoE,cAAe,QAEjB0iI,kBAAmB,CACjBjnI,UAAW,UACXgE,SAAU,WACVrV,MAAO,GACP0M,OAAQ,GACR+I,OAAQ,EACRD,MAAO,IAoDIqkH,IAhDQ,EACrBh2H,UACAmB,eACAgpB,kBACA9rB,QACAoqC,aACAlvB,WACApW,WACAyR,gBACAhI,cAGE,kBAAC,IAAD,KACGA,GACC,yBACE/S,MAAOsH,EACP9C,MAAK,eACApC,EAAOu4I,gBADP,CAEHrtG,YAAa5tB,EACT3M,EAAS8iI,eAAeC,yBACxBzrI,GACD7F,GAELuW,cAAejR,IACbA,EAAE2Q,kBACEM,GAAeA,EAAcjR,EAAE4Q,QAAS5Q,EAAE6Q,WAGhD,yBACEnW,MAAOpC,EAAOohE,qBACdj/D,IAAK+C,EACLhD,IAAKgsB,EAAgBiG,mBAAmBpwB,EAASmB,GACjDsM,YAAY,cAEbg7B,GACC,yBAAKpqC,MAAOpC,EAAOw4I,mBACjB,kBAAC,IAAD,CACEhxI,QAAS8V,EACT7V,QAAS,CAACC,EAAG2uG,IAAUnvG,EAASmvG,S,iCC5EhD,uGAOO,MAAMoiC,EAAkB,GASzBz4I,EAAS,CACb04I,OAAQ,CACN9rI,OAAQ6rI,EACRptG,UAAWotG,GAEb/lH,QAAS,CACP9lB,OAAQ6rI,EACRptG,UAAWotG,EACXnmH,YAAa,GACbC,aAAc,IAEhB30B,MAAO,CAAEoZ,SAAU,OAAQ+X,SAAU,IAGvB3xB,OAEZ,gBAAC,IAAD,CAAQmY,SAAS,SAASnT,MAAOpC,EAAO04I,OAAQ9nI,MAAM,WACpD,gBAAC,IAAD,CAASxO,MAAOpC,EAAO0yB,SACpBt1B,EAAMu7I,wBACL,gBAAC,IAAD,CAAYh3I,QAASvE,EAAM4D,QAAS43I,KAAK,QAAQhoI,MAAM,WACrD,gBAAC,IAAD,OAGJ,gBAAC,IAAD,CAAYo1B,QAAQ,KAAK5jC,MAAOpC,EAAOpC,OACpCR,EAAMQ,OAGRR,EAAMy1I,yBACL,gBAAC,IAAD,CAAYlxI,QAASvE,EAAM4D,QAAS43I,KAAK,MAAMhoI,MAAM,WACnD,gBAAC,IAAD,U,6FC9BG,MAAGC,UAASwqF,UAASC,qBAClC,gBAAC,IAAD,CAAQv5F,UAAQ,GACd,gBAAC,IAAD,KACE,gBAAC,IAAD,KACG8O,GACC,gBAAC,QAAD,iKAQN,gBAAC,IAAD,CAAMrO,eAAe,SAASW,WAAW,YACvC,gBAAC,IAAD,CACE1B,MAAO,gBAAC,QAAD,0BACPE,QAAS25F,EACT55F,SAAO,IAET,gBAAC,IAAD,MACA,gBAAC,IAAD,MACA,gBAAC,IAAD,WACA,gBAAC,IAAD,MACA,gBAAC,IAAD,CAAYD,MAAO,gBAAC,QAAD,cAAsBE,QAAS05F,O,iHCjCzC,MAAMw9C,UAAqB3hE,IAGxCx0B,gBACMvlD,KAAKoc,QAAQpc,KAAKoc,OAAOmpC,gBAG/BgoD,qBAIAvzB,wBACE,MAAMr8D,EAAS3d,KAAK6d,YACpB,OAAKF,EAEE,eACFo8D,IAAW4hE,4BAA4Bh+H,GAD5C,CAEEqF,OAAQnX,YAAoB8R,EAAOuoC,eAJjB,GAQtBroC,YAAwB,MAAD,EACW7d,KAAKC,MAA7B2G,EADa,EACbA,QAASqmC,EADI,EACJA,WACjB,OAAKrmC,GAAYA,EAAQoqC,eAAe/D,GAEjCrmC,EAAQiX,UAAUovB,GAFmC,KAK9DltC,SAAU,MAAD,EACyBC,KAAKC,MAA7B2G,EADD,EACCA,QAASqmC,EADV,EACUA,WACXtvB,EAAS3d,KAAK6d,YACpB,OAAKF,EAMH,gBAAC,IAAD,iBACM3d,KAAKC,MADX,CAEEuC,IAAK4Z,GAAWpc,KAAKoc,OAASA,EAC9BxV,QAASA,EACTgZ,MAAO,CACLjC,UAEFsC,uBAAwBrZ,EACxBsZ,iBAAkBvC,EAClBqF,OAAQrF,EAAOuoC,YACf7O,UAAWjkB,GAAWpzB,KAAKC,MAAMo3C,UAAUzwC,EAAS+W,EAAQyV,GAC5DpS,qBAAsBhhB,KAAKC,MAAM+gB,qBACjC1L,gBAAiBtV,KAAKC,MAAMqV,gBAC5BC,iBAAkBvV,KAAKC,MAAMsV,iBAC7BgC,wBAAyBvX,KAAKC,MAAMsX,wBACpCuxC,4BAA6B9oD,KAAKC,MAAM6oD,4BACxCF,eAAgB5oD,KAAKC,MAAM2oD,kBApBtB,+CAAuB3b,EAAvB,c,iCCtCb,sDAMe,SAAS8uF,GAAc,QAAEt2G,IACtC,OAAO,uBAAKlE,UAAWkE,EAAUzW,IAAgBC,Q,gCCRnD,0HACA,MAOaykE,EAAOzzE,GAClB,yBACEgF,MAAO,CACLoK,QAAS,OACTY,UAAWhQ,EAAM2E,SAAW,EAXd,EAYdgV,aAAc3Z,EAAM2E,SAAW,EAZjB,EAadoB,WAAY/F,EAAM+F,WAClBX,eAAgBpF,EAAMoF,eACtBsK,KAAM1P,EAAM8F,OAAS,OAAI+E,IAG1B7K,EAAMmB,UASEw6I,EAAS37I,GACpB,yBACEgF,MAAO,CACLoK,QAAS,OACTa,WAAYjQ,EAAM2E,SAAW,EAAIi3I,EACjC1oI,YAAalT,EAAM2E,SAAW,EAAIi3I,EAClCvsI,cAAe,SACftJ,WAAY/F,EAAM+F,YAAc,UAChCX,eAAgBpF,EAAMoF,eACtBsK,KAAM1P,EAAM8F,OAAS,OAAI+E,EACzBwJ,UAAWrU,EAAMurD,aAAe,YAAS1gD,IAG1C7K,EAAMmB,UASE06I,EAAS77I,GACpB,0BACEgF,MAAO,CACLlC,MApDc,EAqDd0M,OArDc,EAsDdK,WAAY,M,iCCtDlB,wFAKe,MAAMw1H,UAAqBxlI,YAGvC,eAAD,oBACA2B,OAAe,KAEfQ,QACMjC,KAAKyB,QAAQzB,KAAKyB,OAAOQ,QAG/BlC,SAAU,MACAotB,EAAsBntB,KAAKC,MAA3BktB,kBACFjqB,EAAciqB,EAChBA,EAAkBsB,sBAClB3jB,EAEJ,OACE,gBAAC,IAAD,CACEN,OAAQxK,KAAKC,MAAMyuB,SAAW,OAAS,QACvCtsB,cAAY,EACZF,MAAOlC,KAAKC,MAAMiC,MAClBuL,kBAAmBvK,EACnBoK,mBACE6f,EAAoBA,EAAkBwB,0BAAuB7jB,EAE/D3I,SAAWX,GAAiBxB,KAAKC,MAAMkC,SAASX,GAChDgB,IAAKC,GAAUzC,KAAKyB,OAASgB,EAC7BiI,WAAS,KAMV,MAAMk8H,EAA2B,EACtC1kI,QACAirB,oBACAM,2BAEKvrB,GAAUirB,EAAkB0rG,aAI1B32H,EAHE,gBAACurB,EAAD,O,2HCmCI,MAAMsuH,UAAuBj8I,YAM1CmC,QACMjC,KAAKyB,QAAQzB,KAAKyB,OAAOQ,QAG/BlC,SAAU,MAAD,EAcHC,KAAKC,MAZPiC,EAFK,EAELA,MACAC,EAHK,EAGLA,SACA8wB,EAJK,EAILA,SACArsB,EALK,EAKLA,QACAqZ,EANK,EAMLA,uBACAC,EAPK,EAOLA,iBACAgnH,EARK,EAQLA,kBACAn6E,EATK,EASLA,SACAo6E,EAVK,EAULA,mBACA38H,EAXK,EAWLA,OACA/F,EAZK,EAYLA,eACGu3I,EAbE,mLAgBDC,EAvE4B,GACpCr1I,UACAqZ,yBACAC,mBACA6sC,WACAm6E,wBAQA,MAAMnhH,EAAOqe,YACXnkB,EACAC,EACAgnH,QAAqBp8H,GA0BvB,MAAO,IAxBSib,EAAKse,eAAe9+B,IAAI,EAAGgG,aAClC,CACL/J,KAAM+J,EAAOy5B,UACb9iC,MAAOqJ,EAAOy5B,UACd5S,WAAYxrB,EACR,IAEE,gBAAC,IAAD,CACEsN,SA5BG,GA6BHnP,IAAK8Z,IAAwBD,aAAahY,EAAS2E,UAGvDT,KAYY,CAAEvI,KAAM,gBATbwqD,EACX,GACAhnC,EAAKue,cAAc/+B,IAAI,EAAG0/B,YACjB,CACLzjC,KAAMyjC,EAAMD,UACZ9iC,MAAO+iC,EAAMD,eAiCKk3G,CAA8B,CACpDt1I,UACAqZ,yBACAC,mBACA6sC,WACAm6E,sBAEIiV,EAGS,IAFbF,EAAgB5wI,OACd+9B,QAA0Bt+B,IAAhBs+B,EAAO5nC,MAAsBU,IAAUknC,EAAO5nC,MACxDoE,OAEJ,OACE,gBAAC,IAAD,eACE4E,OAAQA,EACRuD,SAAU,wBACV7L,MAAOA,EACPC,SAAUA,EACV8wB,SAAUA,EACVxuB,eAAgBA,EAChB4qB,WAAY4sH,EACZ1yI,UAAW4yI,OAAiBrxI,EAAYq8H,EACxC3kI,IAAKC,GAAUzC,KAAKyB,OAASgB,GACzBu5I,O,kCChIZ,gGAIA,MAAMrwI,EAAKC,EAAOD,GAEZywI,EAAqB,GACrBC,EAAiB,GACjBC,EAAiBrsH,UAAaw7D,UAAU,mBAQ/B,MAAMjpC,EACnB,0BAA0B5sC,EAAsBshB,GAC9C,GAA2B,UAAvBthB,EAAS6yE,UAAuB,OAEd98E,EAAG4wI,gBAAgB3mI,GACtB4mI,aACjBtlH,EAAQulH,YAAY76C,UAAY3xE,cAAiBysH,SAOrD,oBACE91I,EACA4+D,EACAm3E,EACAC,GAEA,MAAMh1I,EAAmBhB,EAAQiB,sBAC3Bg1I,EAAS5sH,SACf4sH,EAAOn+F,QACPm+F,EAAOC,qBAEP,MAAMC,EAAe,GACrBv3E,EAAc19D,QAAQC,IACpB,MAAM6N,EAAWhO,EAAiBM,YAAYH,GACxCf,EAAWS,IAAgBuvB,mBAC/BpwB,EACAmB,GAEF80I,EAAO59G,IAAIl3B,EAAcf,GACzB+1I,EAAah1I,GAAgB6N,IAG/B,MAAMonI,EAAax3E,EAAc5/D,OACjC,IAAKo3I,EAEH,YADAJ,IAIF,IAAIK,EAAe,EACnBJ,EAAOK,KAAK,YAAY,SAASL,EAAQM,GAEvC,IAAK,MAAMp1I,KAAgBo1I,EACzB,GAAIA,EAAgB76F,eAAev6C,GAAe,CAChD,MAAM6N,EAAWhO,EAAiBM,YAAYH,GAC9C,GAA2B,UAAvB6N,EAAS6yE,UAAuB,SAEpC4zD,EAAet0I,GAAgBo1I,EAAgBp1I,GAAcmvB,QAC7DsrB,EAAoB46F,mBAClBxnI,EACAymI,EAAet0I,IAKrB60I,OAEFC,EAAOpkH,GAAG,YAAY,WACpBwkH,IACAN,EAAWM,EAAcD,MAG3BH,EAAO39G,OAUT,sBAAsBt4B,EAAoBmB,GACxC,GAAIs0I,EAAet0I,GACjB,OAAOs0I,EAAet0I,GAGxB,IAAKnB,EAAQiB,sBAAsBG,YAAYD,GAC7C,OAAOu0I,EAET,MAAM1mI,EAAWhP,EAAQiB,sBAAsBK,YAAYH,GAC3D,MAA2B,UAAvB6N,EAAS6yE,UAA8B6zD,GAE3CD,EAAet0I,GAAgBkoB,UAAaw7D,UAC1ChkF,IAAgBuvB,mBAAmBpwB,EAASmB,IAC5C,GAGFy6C,EAAoB46F,mBAClBxnI,EACAymI,EAAet0I,IAEVs0I,EAAet0I,IAUxB,2BAA2BnB,EAAoBmB,GAC7C,GAAIs0I,EAAet0I,GACjB,OAAOs0I,EAAet0I,GAGxB,IAAKnB,EAAQiB,sBAAsBG,YAAYD,GAC7C,OAAOu0I,EAGT,MAA2B,UADV11I,EAAQiB,sBAAsBK,YAAYH,GAC9C0gF,UAA8B6zD,GAE3CD,EAAet0I,GAAgBkoB,UAAaotH,UAC1C51I,IAAgBuvB,mBACdpwB,EACAmB,GACA,GAEFkoB,cAAiBqtH,QACjB,GACA,GAKFjB,EAAet0I,GAAc00I,YAAYlvI,OAAOgwI,QAAU,OACnDlB,EAAet0I,IAQxB,sBACEnB,EACAmB,GAGA,GAAIq0I,EAAmBr0I,GACrB,OAAO8N,QAAQlN,QAAQyzI,EAAmBr0I,IAG5C,MAAM2T,EAAa8hI,IAAMz1I,GACzB,IAAI01I,EAAe,KACnB,GAAI72I,EAAQiB,sBAAsBG,YAAYD,GAAe,CAEhC,SADVnB,EAAQiB,sBAAsBK,YAAYH,GAC9C0gF,YACXg1D,EAAeh2I,IAAgBuvB,mBAC7BpwB,EACAmB,SAMJ01I,EAAeh2I,IAAgBsB,WAAWnC,EAASmB,GAIrD,OAAK01I,EAME9+G,YAAajjB,EAAD,eAAqB+hI,EAArB,MAAuC,IAAIhoI,KAC5DioI,IACEtB,EAAmBr0I,GAAgB2T,EAE5BA,IAPF7F,QAAQlN,QAAQ,SAiB3B,qBAAqB/B,EAAoBmB,GACvC,GAAIq0I,EAAmBr0I,GACrB,OAAOq0I,EAAmBr0I,GAI5B,OADmBy1I,IAAMz1I,GAI3B,+BACE,OAAOu0I,M,kDCzJX,kCAAO,MAAMv8G,EAA6B,CACxC79B,EACAirB,KAEA,GAAIjrB,EAAO,OAAOA,EAMlB,OAHEirB,GAAqBA,EAAkB0rG,aACnC1rG,EAAkBwwH,kBAClB,K,kCC7DR,oNAEA,MAAMhyI,EAAKC,EAAOD,GAIZiyI,EAAsB3+E,IAC1B,MAAMgpD,EAAkBhpD,EAAUC,2BAC5BgpD,EAAoBjpD,EAAUkpD,oBAEpC,OAAIF,EAAgBvzG,OAAS,GAAKwzG,EAAkBxzG,OAAS,GAEhC,kBAAxBuqD,EAAUj6B,UACP,qCACAi6B,EAAUvf,eAVI,IAcf,IAGHm+F,EAAiC,CACrChqI,EACAiqI,EACAl+H,IAEO6iB,oBAAUq7G,EAAY5hG,OAAQ7b,IACnC,MAAM09G,EAAeD,EAAY3mI,IAAIkpB,GACrC,IAAK09G,EAAaC,UAChB,OAAO,KAIT,IADA,IAAIh8G,EAAa,GACRjuB,EAAI,EAAGA,EAAIgqI,EAAanxH,qBAAsB7Y,IACjD6L,EAAMw/C,gBAAwB,IAANrrD,GACxB6L,EAAM2hC,kBAAoBxtC,GAAK,GAC/BgqI,EAAa3wH,aAAarZ,GAAGwoG,cAEjCv6E,EAAWp3B,KAAKmzI,EAAa3wH,aAAarZ,IAG5C,MAAO,CACLxR,KAAM89B,EACNp9B,KAAMo9B,EACN8lF,cAAe43B,EAAar+F,cAC5B4/D,cAAezrG,EAASkqI,EAAan2B,WACrC9/E,aAAci2G,EAAavxH,uBAC3BhB,SAAUuyH,EACV/7G,WAAYA,EACZpiB,QACAioG,UAAWk2B,EAAal2B,eAEzBx8G,OAAO4N,SAICgrB,EACX1hC,IAEA,MAAM88C,EAAgB1zC,EACnB2zC,WAAW3zC,EAAGggB,WAAWxU,OACzBooC,2BAEH,OAAO/c,IACLC,oBAAU4c,EAAe4f,IACvB,MAAMprD,EAAS+pI,EAAmB3+E,GAClC,OAAO4+E,EACLhqI,EACS,WAATtR,EACI08D,EAAUg/E,uBACVh/E,EAAUi/E,oBACd,CACE9+E,oBAAgBt0D,EAChBy2C,sBAAkBz2C,QAQf+4B,EAA6B,CACxCthC,EACAmhC,KAEA,MAAMy6G,EAA6BxyI,EAAG8f,iBAAiB2yH,8BACrDzyI,EAAGggB,WAAWxU,MACdusB,GAEIu7B,EAAYk/E,EAA2B3V,eAEvC5oH,EAAQ,CAAEw/C,eADO++E,EAA2Bx4E,eAGlD,IAAI04E,EAAqBR,EACvB,GACS,WAATt7I,EACI08D,EAAUq/E,8BAA8B56G,GACxCu7B,EAAUs/E,2BAA2B76G,GACzC9jB,GAIF,GADuB,KACnB8jB,EAA+B,CACjC,MAIMu7B,EAJ6BtzD,EAAG8f,iBAAiB2yH,8BACrDzyI,EAAGggB,WAAWxU,MAHK,IAMwBqxH,eAE7C6V,EAAqB,IAChBA,KACAR,EACD,GACS,WAATt7I,EACI08D,EAAUq/E,8BAbG,IAcbr/E,EAAUs/E,2BAdG,IAejB3+H,IAKN,OAAOy+H,GAII/6G,EAA+B,CAC1C/gC,EACA4gC,KAEA,MAAMq7G,EAA+B7yI,EAAG8f,iBAAiBgzH,gCACvD9yI,EAAGggB,WAAWxU,MACdgsB,GAEI87B,EAAYu/E,EAA6BhW,eAEzC5oH,EAAQ,CAAE2hC,iBADSi9F,EAA6B74E,eAGtD,OAAOk4E,EACL,GACS,WAATt7I,EACI08D,EAAUy/E,gCAAgCv7G,GAC1C87B,EAAU0/E,6BAA6Bx7G,GAC3CvjB,IAKS6gB,EACXl+B,IAEA,MAAMyhC,EAAkBC,EAAyB1hC,GAC3C87I,EAAqB,GACrBO,EAAuB,GAEvBv/F,EAAgB1zC,EACnB2zC,WAAW3zC,EAAGggB,WAAWxU,OACzBooC,2BAmCH,OAlCA9c,oBAAU4c,EAAe4f,IACvB,MAAMprD,EAAS+pI,EAAmB3+E,GAGlCx8B,oBAAUw8B,EAAUC,2BAA4Bx7B,IAC9C,MAAM07B,EAAiBH,EAAUE,kBAAkBz7B,GACnD26G,EAAmBzzI,KAAKi0I,MACtBR,EACAR,EACEhqI,EACS,WAATtR,EACI08D,EAAUq/E,8BAA8B56G,GACxCu7B,EAAUs/E,2BAA2B76G,GACzC,CAAE07B,sBAMR38B,oBAAUw8B,EAAUkpD,oBAAqBhlF,IACvC,MAAMoe,EAAmB0d,EAAUspD,oBAAoBplF,GACvDy7G,EAAqBh0I,KAAKi0I,MACxBD,EACAf,EACEhqI,EACS,WAATtR,EACI08D,EAAUy/E,gCAAgCv7G,GAC1C87B,EAAU0/E,6BAA6Bx7G,GAC3C,CAAEoe,0BAMH,IAAIvd,KAAoBq6G,KAAuBO,IAG3Cp7G,EAAoB,CAC/Bzd,EACA0e,KAEA,IAAKA,EAAY,OAAO1e,EAExB,MAAMu5C,EAAsB76B,EAAW3Q,cA8BvC,MAlBE/N,KAEA,IAAK0e,EACH,OAAO1e,EAGT,IAAK,IAAIhS,EAAI,EAAGA,EAAIgS,EAAKngB,SAAUmO,EACjC,GAAIgS,EAAKhS,GAAGxR,KAAKuxB,gBAAkBwrC,EAAqB,CACtD,MAAM+pD,EAAatjG,EAAKhS,GACxBgS,EAAKk7E,OAAOltF,EAAG,GACfgS,EAAKujG,QAAQD,GAIjB,OAAOtjG,GAIFwjG,CAAgBxjG,EAAK1a,OA3B1ByzI,IAIG,IADDA,EAAqBv8I,KAAKuxB,cAAcpsB,QAAQ43D,Q,kDClNtD,uEAaO,MAAM41D,EAAwC,EACnDC,kCACAjhH,WACA1P,UACA4wH,mBAGE,gBAAC,IAAD,CACE/wH,IAAKg7G,YAA0B8V,GAC/Bh1G,SACEi1G,IACA7V,YAA4B4V,EAAgC5yH,MAE9DkD,YAAa0vH,EAAgChP,cAC7CzgH,cAAeyvH,EAAgC7V,cAC/C9uD,SACE,gBAAC,IAAD,CACEt8C,SAAUA,EACVnP,IAAKowH,EAAgCrtF,eAGzCtjC,QAASA,K,6ICbR,MAAM6wH,EAAwB,EACnChP,sBACApzF,WACA/e,WACA8hC,gBACAo/E,gBACAG,kBACAD,0BAC8C,MAAD,EAE3CA,GAAuB,GAFoB,iBACtCypB,EADsC,KACfC,EADe,WAI7C,OAAOx8G,IACL3R,OAAOqrB,KAAKmqE,GAAqB9gH,IAAIlB,IAKnC,MAAMiiH,EAAqBD,EAAoBhiH,GAC/C,IAAKiiH,EAAoB,OAAO,KAEhC,GAAuC,kBAA5BA,EAAmB/jH,KAAmB,CAE/C,MAAM08I,EAAoE34B,EACpEpkH,EAAQq9G,YAA4B+G,EAAmB/jH,MACvD4d,EAAWi1G,IAAkBlzH,EACnC,OACE,gBAAC,IAAD,CACEmC,IAAKnC,EACLuD,YAAapB,EACb8b,SAAUA,EACVqwC,SACE,gBAAC,IAAD,CACEt8C,SAAUA,EACVnP,IAAKk6I,EAAuBn3G,eAGhCtjC,QAAS,KACPyuB,EAASgsH,EAAuB18I,KAAM08I,IAExCz8I,IAAK2d,EAAWo1G,OAAkBzqH,IAGjC,CAEL,MAAMo0I,EAAiE54B,EACvE,GAAItwE,EACF,MAAO,CACL,gBAAC,IAAD,CAAW3xC,IAAKm7G,YAAwBn7G,IAAOA,IAC/C81D,OACAk7D,EAAsB,CACpBhP,oBAAqB64B,EACrBjsH,WACA/e,WACA8hC,eAAe,EACfo/E,gBACAG,kBACAD,oBAAqB0pB,KAGpB,CACL,MAAMxzC,EAAgBuzC,IAAuB16I,EAC7C,OACE,gBAAC,IAAD,CACEA,IAAKA,EACLoB,YAAapB,EACbonG,6BAA6B,EAC7BD,cAAeA,EACfE,kBAAmB,IACjB2pB,EAAsB,CACpBhP,oBAAqB64B,EACrBjsH,WACA/e,WACAkhH,gBACAG,kBACAD,oBAAqB9pB,EACjBwzC,OACAl0I,a,kCCjGtB,oDAAMa,EAAKC,EAAOD,GAULq+B,EAA8B,EACzCF,sBACA1e,cACA2e,qBACAtE,aACA5Y,qBAQA,QAAuB/hB,IAAnB+hB,GAAkD,MAAlBA,EAElC,OAAO,KAGT,IAAIlJ,EAAa,KACjB,GAAImmB,GAAuB1e,EAAa,CACtC,MAAM88G,EAAuBv8H,EAAGwzI,uBAAuBC,2BACrDt1G,EAAoB6uF,gBACpB9rG,GAGAq7G,GAAwB,GACxBA,EAAuB98G,EAAYwB,uBAEnCjJ,EAAayH,EAAYgC,aAAa86G,SAEnC,GAAIn+F,GAAsBtE,EAAY,CAC3C,MAAMyiG,EAAuBv8H,EAAGwzI,uBAAuBC,2BACrDr1G,EAAmB4uF,gBACnB9rG,GAGAq7G,GAAwB,GACxBA,EAAuBziG,EAAW7Y,uBAElCjJ,EAAa8hB,EAAWrY,aAAa86G,IAIzC,OAAOvkH,K,kDCrDT,oEAAO,MAAM07H,EAAgB,CAACryH,EAAasyH,IAClCtyH,EAAIpnB,OAAS05I,EAAYtyH,EAAI0U,UAAU,EAAG49G,GAAa,MAAQtyH,EAG3D4f,EAAoB5f,GACxBA,EAAIlsB,QAAQ,MAAO,S,iCCN5B,sDAyCO,MAAMoqB,EACXu2D,IAEA,MAAM89D,EAAa,CACjB9iB,QAAQx8H,EAA+By3F,GACrC,MAAMoe,EAAOpe,EAAQ8nD,UACf/iB,EAAUx8H,EAAMw8H,SAAW,KACjC,OAAIA,GAAgBA,EAAQ3mB,IAG9BhqF,UAAU7rB,GACDA,EAAM6rB,aAajB,MAAM2zH,EAAa,CACjBh6H,QAAQxlB,EAA+By3F,GACrC,MAAMoe,EAAOpe,EAAQ8nD,UACrB,OAAO1pC,GAAQ71G,EAAMwlB,QAAQqwF,IAE/B9pF,KAAK/rB,EAA+By3F,GAC9BA,EAAQI,WAGZ73F,EAAM+rB,SAeV,MAAM0zH,EAA+BC,qBACnCl+D,EACA89D,GAnCF,SACEK,EACAloD,GAEA,MAAO,CACLzrE,kBAAmB2zH,EAAQC,gBA4BMF,CAKnC1tD,qBAAWxQ,EAAcg+D,GAhB3B,SACEG,EACAloD,GAEA,MAAO,CACLxrE,kBAAmB0zH,EAAQljB,aAC3BvwG,OAAQurE,EAAQvrE,OAAO,CAAE2zH,SAAS,IAClCr6H,QAASiyE,EAAQjyE,aASnBwsE,CACE,EAAG7wF,WAAU6qB,oBAAmBC,oBAAmBC,SAAQ1G,aAClDrkB,EAAS,CACd6qB,oBACAC,oBACAC,SACA1G,cAMR,OAAQxlB,GACN,gBAACy/I,EAAiCz/I,K,kCC3GtC,yRAgBA,MAAM0L,EAAKC,EAAOD,GAELgB,EAAiB,wBAEjBy4H,EAAqB,IAE9B7+C,IAAUllC,IAAI10C,IACd45E,IAAUpvE,IAAIxK,GAAgBozI,YAAc,EAInCt6B,EAAyB,IAElCl/B,IAAUllC,IAAI10C,IACd45E,IAAUpvE,IAAIxK,GAAgBqzI,gBAAkB,EAIvCt6B,EAAsB,IAE/Bn/B,IAAUllC,IAAI10C,IACd45E,IAAUpvE,IAAIxK,GAAgBszI,aAAe,EAIpC3d,EAA4Bl3H,IACvC,MAAMwW,EAAa,IAAIjW,EAAGy3H,WACpB1zF,EAAc,IAAI/jC,EAAGs5G,iBACrBi7B,EAAiB,IAAIv0I,EAAGs5G,iBAE9B2L,YAAkBxlH,GAAWtD,QAAQpF,GACnCkf,EAAWyhH,YAAY3gI,EAAOkf,EAAWK,mBAE3C+uG,YAAgC5lH,GAAWtD,QAAQs9G,IAC7CA,EAAmBrhG,YACrBm8H,EAAe9kG,OACbgqE,EAAmBh6F,YACnB80H,EAAexrI,QAGjBg7B,EAAY0L,OAAOgqE,EAAmBh6F,YAAaskB,EAAYh7B,UAInE6xE,IAAUvvE,IAAIrK,EAAgB,CAC5BiV,WAAY/V,YAAoB+V,GAChCm+H,YAAan+H,EAAWK,iBACxBytB,YAAa7jC,YAAoB6jC,GACjCuwG,aAAcvwG,EAAYh7B,OAC1BwrI,eAAgBr0I,YAAoBq0I,GACpCF,gBAAiBE,EAAexrI,SAGlCkN,EAAWtV,SACXojC,EAAYpjC,SACZ4zI,EAAe5zI,UAGJk2H,EAAsC,CACjD57H,EACAwE,KAEA,IAAK4xC,YAAiB5xC,KAAeg6H,IAAsB,OAAO,EAElE,MAAMxjH,EAAa,IAAIjW,EAAGy3H,WAiB1B,OAhBA52H,YACEoV,EACA2kE,IAAUpvE,IAAIxK,GAAgBiV,WAC9B,kBACAhb,GAEFkqH,YAAyB1lH,GAAWtD,QAAQ+oH,IAC1CA,EAAajvG,WAAWmiH,aACtBniH,EACA,EACAA,EAAWK,iBACX4uG,EAAaxuG,eAGjBT,EAAWtV,UAEJ,GAGIo2H,EAA4C,CACvD97H,EACAwE,KAEA,IACI8lH,YAAuB9lH,KACtBgmH,YAA4BhmH,KAC7Bq6G,MAA6BC,IAE/B,OAAO,EAET,MAAMy6B,EAAmB55D,IAAUpvE,IAAIxK,GACjC+iC,EAAc,IAAI/jC,EAAGs5G,iBACrBi7B,EAAiB,IAAIv0I,EAAGs5G,iBAoD9B,OAnDAz4G,YACEkjC,EACAywG,EAAiBzwG,YACjB,kBACA9oC,GAEF4F,YACE0zI,EACAC,EAAiBD,eACjB,kBACAt5I,GAEFoqH,YAAgC5lH,GAAWtD,QAAQs9G,IAC7CA,EAAmBrhG,YACrBqhG,EAAmB36F,WAAW21H,mBAC5BF,EACA,EACAA,EAAexrI,OACf0wG,EAAmB/iG,aAGrB+iG,EAAmB36F,WAAW21H,mBAC5B1wG,EACA,EACAA,EAAYh7B,OACZ0wG,EAAmB/iG,eAIzB4uG,YAAqC7lH,GAAWtD,QAC9Cw9G,IACMA,EAAwBvhG,YAC1BuhG,EAAwB76F,WAAW21H,mBACjCF,EACA,EACAA,EAAexrI,OACf4wG,EAAwB76F,WAAW/V,QAGrC4wG,EAAwB76F,WAAW21H,mBACjC1wG,EACA,EACAA,EAAYh7B,OACZ4wG,EAAwB76F,WAAW/V,UAK3CwrI,EAAe5zI,SACfojC,EAAYpjC,UAEL,GAGIs2H,EAAmD,CAC9Dh8H,EACA0+G,KAEA,IAAKG,MAA6BC,IAAuB,OAAO,EAEhE,MAAMy6B,EAAmB55D,IAAUpvE,IAAIxK,GACjC+iC,EAAc,IAAI/jC,EAAGs5G,iBACrBi7B,EAAiB,IAAIv0I,EAAGs5G,iBAgC9B,OA/BAz4G,YACEkjC,EACAywG,EAAiBzwG,YACjB,kBACA9oC,GAEF4F,YACE0zI,EACAC,EAAiBD,eACjB,kBACAt5I,GAGE0+G,EAAwBvhG,YAC1BuhG,EAAwB76F,WAAW21H,mBACjCF,EACA,EACAA,EAAexrI,OACf4wG,EAAwB76F,WAAW/V,QAGrC4wG,EAAwB76F,WAAW21H,mBACjC1wG,EACA,EACAA,EAAYh7B,OACZ4wG,EAAwB76F,WAAW/V,QAGvCwrI,EAAe5zI,SACfojC,EAAYpjC,UAEL,K,kDChNT,sDAyBO,MAAM4lF,EACXzQ,IAEA,MAAMg+D,EAAa,CACjBh6H,QAAQxlB,EAA+By3F,GACrC,MAAMoe,EAAOpe,EAAQ8nD,UACrB,OAAO1pC,GAAQ71G,EAAMwlB,QAAQqwF,IAE/Bre,MAAMx3F,EAA+By3F,GAC/Bz3F,EAAMw3F,OAAOx3F,EAAMw3F,MAAMC,IAE/B1rE,KAAK/rB,EAA+By3F,GAC9BA,EAAQI,WAGZ73F,EAAM+rB,KAAK0rE,KAef,MAAM2oD,EAAkBpuD,qBAAWxQ,EAAcg+D,GAXjD,SACEG,EACAloD,GAEA,MAAO,CACLxrE,kBAAmB0zH,EAAQljB,aAC3BvwG,OAAQurE,EAAQvrE,OAAO,CAAE2zH,SAAS,IAClCr6H,QAASiyE,EAAQjyE,aAIGwsE,CACtB,EAAG7wF,WAAU8qB,oBAAmBC,SAAQ1G,aAC/BrkB,EAAS,CACd8qB,oBACAC,SACA1G,aAKN,OAAQxlB,GAAkC,gBAACogJ,EAAoBpgJ,K,iCCjEjE,uCAIA,MAAM4C,EAAS,CACby9I,cAAe,CACbjxI,QAAS,OACTkL,UAAW,OACX/P,OAAQ,GAEVyvI,KAAM,CACJ/pI,WAAY,EACZiD,YAAa,IASF,MAAG+qG,OAAM/7G,cACjB+7G,EAAKt4G,OAGR,yBAAKX,MAAOpC,EAAOy9I,eAChBpiC,EAAK34G,IAAI44G,GACR,kBAAC,IAAD,CACE95G,IAAK85G,EACLzpG,KAAK,QACLzP,MAAOpC,EAAOo3I,KACdxgG,SAAU,IAAMt3C,EAAS87G,YAAUC,EAAMC,IACzC75G,MAAO65G,MAVU,M,iCCtB3B,qDAQO,MAAM1J,EAAiBx0G,IAC5B,MAAMkK,EAAUlK,EAAMk2C,aACtB,OACE,gBAAC,IAAD,CAAMvxC,UAAQ,EAACmB,QAAM,GAClBoE,EAAQ5E,IAAIg7I,GACXtgJ,EAAMu1C,gBAAgB+qG,GAClBtgJ,EAAMu1C,gBAAgB+qG,KACtB,S,wGCaG,MAAM5lD,UAAmB76F,YACtCC,SAAU,MAAD,EAC0DC,KAAKC,MAA9DqE,EADD,EACCA,MAAOC,EADR,EACQA,QAAS8B,EADjB,EACiBA,KAAMiR,EADvB,EACuBA,gBAAoBlX,EAD3C,4DASP,OACE,gBAAC,IAAD,eACEsU,KAAK,QACLjB,MAAOlP,EAAU,UAAY,UAC7Bg/F,UAAWjsF,EACXmE,aAPgB,GAQZrb,GAEHiG,EACAA,GAAQ,gBAAC,IAAD,MACR/B,M,iCChDT,yNAgBO,MAAM46H,EAAyB,CACpC7B,GACE8B,qBAEK,CACLqhB,YAAa,GACb1zI,QAASjB,YAAoBwxH,GAC7BojB,YAAa,GACbC,QAASvhB,IAQA9mF,EAAW4mF,KACbA,EAAQwhB,YAAY76I,OAOlBuyC,EAAW8mF,KACbA,EAAQuhB,YAAY56I,OAQlBm9H,EAAgB,CAC3B9D,EACA5B,KAEA,MAAMsjB,EAAiB,IAAI1hB,EAAQuhB,YAAavhB,EAAQnyH,SAKxD,OAJI6zI,EAAe/6I,OAASq5H,EAAQyhB,SAClCC,EAAe1/C,OAAO,EAAG0/C,EAAe/6I,OAASq5H,EAAQyhB,SAGpD,CACLF,YAAaG,EACb7zI,QAASjB,YAAoBwxH,GAC7BojB,YAAa,GACbC,QAASzhB,EAAQyhB,UAYRxoG,EAAO,CAClB+mF,EACA5B,EACAz2H,KAEA,IAAKq4H,EAAQuhB,YAAY56I,OACvB,OAAOq5H,EAGT,MAAM2hB,EAAa3hB,EAAQuhB,YAAYvhB,EAAQuhB,YAAY56I,OAAS,GAQpE,OAPA4G,YACE6wH,EACAujB,EACA,kBACAh6I,GAGK,CACL45I,YAAavhB,EAAQuhB,YAAY59H,MAAM,GAAI,GAC3C9V,QAAS8zI,EACTH,YAAa,IAAIxhB,EAAQwhB,YAAaxhB,EAAQnyH,SAC9C4zI,QAASzhB,EAAQyhB,UAYRtoG,EAAO,CAClB6mF,EACA5B,EACAz2H,KAEA,IAAKq4H,EAAQwhB,YAAY76I,OACvB,OAAOq5H,EAGT,MAAM2hB,EAAa3hB,EAAQwhB,YAAYxhB,EAAQwhB,YAAY76I,OAAS,GAQpE,OAPA4G,YACE6wH,EACAujB,EACA,kBACAh6I,GAGK,CACL45I,YAAa,IAAIvhB,EAAQuhB,YAAavhB,EAAQnyH,SAC9CA,QAAS8zI,EACTH,YAAaxhB,EAAQwhB,YAAY79H,MAAM,GAAI,GAC3C89H,QAASzhB,EAAQyhB,W,kCChIrB,oUAIA,MAAM/0I,EAAKC,EAAOD,GAOLq0C,EAA0B,EACrC//B,yBACAC,mBACA4/B,mBACAl5C,UACA+rC,qBASAA,EAAep8B,QAAQ,cACvBo8B,EAAekjE,gBAAgBlqG,EAAGo0C,eAAe2Q,QACjDlkD,YACEmmC,EAAeuT,YACfpG,EACA,kBACAl5C,GAIF,MAAMs8H,EAAwB,IAAIv3H,EAAGw3H,sBACnCx3H,EAAGggB,WAAWxU,MACd8I,EACAC,GAEFgjH,EAAsBd,OAAOzvF,EAAeuT,aAC5C,MAAM5K,EAAgB4nF,EAAsBI,mBAGtC5nF,EAAoCJ,EACvCK,kCACAF,oBACApW,YACGuyB,EAA6Btc,EAChCE,iBACAC,oBACApW,YACGw7G,EAA+BnlG,EAElCrwC,OACEwwC,IAC6C,IAA5C+b,EAAYlwD,QAAQm0C,IAEvBt2C,IAAIoiH,GACHzmE,YAAqBjhC,EAAwBC,EAAkBynG,IAEhEt8G,OAAO4N,SAIJ6nI,EAAwCD,EAAOx1I,OAAO45B,IAClDyW,EAAmBukF,KAAK8gB,GAC9B97G,EAAM5gB,KAAK08H,KAGTC,EAAqCF,EAAgBv7I,IAAI0/B,GAC7DA,EAAMD,WAIFi8G,EAAsCrpF,EAAYvsD,OAAOsY,IACrDm9H,EAAgB7gB,KAAKh7F,GAASA,EAAM5gB,KAAKV,KAI7Cqe,EAAa2Q,EAAegmF,gBAClC32F,EAAWrE,QACX,IAAIqjH,KAAwBC,GAAsBn5I,QAAQ6b,IACxD,MAAMu9H,EAAe,IAAIv1I,EAAGm5B,kBAC5Bo8G,EAAa/lG,QAAQ,cACrB+lG,EAAa3qI,QAAQoN,GACrBu9H,EAAarpB,aACXlsH,EAAGg4B,gBACD1jB,EACAC,EACAyD,GACA,IAGJqe,EAAWkuC,UAAUgxE,GAEgB5lG,EAClCS,gCAAgCp4B,GAChC83B,oBACApW,YAEWv9B,QAAQo7B,IACpB,MAAMg+G,EAAe,IAAIv1I,EAAGm5B,kBAC5Bo8G,EAAa/lG,QAAQ,YACrB+lG,EAAa3qI,QAAQ2sB,GACrBg+G,EAAarpB,aACXlsH,EAAGy3B,kBACDnjB,EACAC,EACAgjB,IAGJlB,EAAWkuC,UAAUgxE,OAMzBL,EACGx1I,OAAO45B,IAAU+7G,EAAoBxqG,SAASvR,EAAMD,YACpDl9B,QAAQm9B,IACHA,GACF0N,EAAeyO,kBAAkBhG,OAAOnW,EAAO,KAIrDi+F,EAAsB52H,UAMXw3H,EAAwC,CACnDlkF,EACAjN,KAEA,MAAMkxF,EAAS,IAAIl4H,EAAGwf,YAkBtB,OAdA04G,EAAO1oF,QAAQ0nE,YAA0BjjE,EAAejN,IACxDkxF,EAAOoE,mBACLt1F,EAAegmF,gBAAgBjkH,OALE,EACL,GAS9B+tB,oBAAUkQ,EAAegmF,gBAAiB,CAACxrG,EAAmBtc,KAC5DgzH,EAAOsB,aAX0B,EAYFt0H,EAC7Bsc,EAAkB6X,aAIf6+F,GAMIjjF,EAA8BF,GAClC/0C,EAAG46C,QAAQC,aAAa9F,GAMpBD,EAAyBb,GAC7Bj0C,EAAG46C,QAAQC,aAAa5G,GAMpBY,EAAkC,CAC7C55C,EACAg5C,KAEQh5C,EAAQu9F,iCAAiCvkD,GAMtCe,EAAuC,CAClD/5C,EACAg5C,EACAjN,KAEA,GAAI/rC,EAAQu9F,iCAAiCvkD,GAAgB,CAK3D,OAJiCh5C,EAAQ6X,4BACvCmhC,GAG+BkG,uBAC/BnT,EAAe3N,WAInB,OAAO,GAOIub,EAA0B,CACrC35C,EACAg5C,EACAjN,IAGoB,KAAlBiN,GACAa,EAAsBb,IACO,KAA7BjN,EAAe3N,WACf4b,EAA2BjO,EAAe3N,YAC1C2b,EACE/5C,EACAg5C,EACAjN,IAE+B,KAAjCA,EAAe+M,eACkB,KAAjC/M,EAAe4kF,cAONl3E,EACX1N,GAEOA,EAAegmF,gBAAgBjkH,OAAS,I,qTC5MjD,MAAM/I,EAAKC,EAAOD,GAeZ9I,EAAS,CACbklI,oBAAqB,CACnBp4H,KAAM,IA0BK,MAAMwxI,UAAuCrhJ,YAGzD,eAAD,oBACAwB,MAAQ,CACN8/I,4BAA6B,IAF/B,KAKAC,cAAgB,KAAO,MAEfr/G,EADqBhiC,KAAKC,MAAxB0yC,eAC0BgmF,gBAE5BuoB,EAAe,IAAIv1I,EAAGm5B,kBAC5Bo8G,EAAa/lG,QAAQ,cACrBnZ,EAAWkuC,UAAUgxE,GACrBA,EAAa50I,SACbtM,KAAKif,cACLjf,KAAKC,MAAM+gD,uBAdb,KAiBAsgG,iBAAoBzwI,IAAmB,MAE/BmxB,EADqBhiC,KAAKC,MAAxB0yC,eAC0BgmF,gBAElChtH,EAAG41I,kCAAkCv/G,EAAYnxB,GACjD7Q,KAAKif,cACLjf,KAAKC,MAAM+gD,uBAvBb,KA0BAwgG,oBAAuB3wI,IAErB7Q,KAAK2B,SAASL,IAAK,CACjB8/I,4BAA4B,eACvB9/I,EAAM8/I,4BADgB,CAEzB,CAACvwI,IAAQ,QA/Bf,KAoCA4wI,uBAA0B5wI,IACG7Q,KAAKC,MAAxB0yC,eAC0BgmF,gBACL16E,GAAGptC,GAGtB6wI,mBAAmB,IAC7B1hJ,KAAK2B,SAASL,IAAK,CACjB8/I,4BAA4B,eACvB9/I,EAAM8/I,4BADgB,CAEzB,CAACvwI,IAAQ,QAKf9Q,SAAU,MAAD,EAOHC,KAAKC,MALP2G,EAFK,EAELA,QACA+rC,EAHK,EAGLA,eACAkO,EAJK,EAILA,oBACAI,EALK,EAKLA,iBACA/6C,EANK,EAMLA,aAGI87B,EAAa2Q,EAAegmF,gBAIlC,KAFI93E,GACFgG,YAAkClU,EAAe3N,WAEjD,OACE,gBAAC,IAAD,KACE,gBAAC,QAAD,wMAWN,IAFG6b,GACD4F,YAAmC9T,EAAe3N,WAElD,OACE,gBAAC,WAAD,KACE,gBAAC,IAAD,CACEhyB,KAAK,OACLX,WAAW,6DAEX,gBAAC,QAAD,mRAQF,gBAAC,IAAD,KACE,gBAAC,QAAD,2MAUR,MAAMsvI,EAAsB9wI,KACjBowC,KAAuBJ,GAAuBhwC,EAAQ,EAE3D+wI,EAAqC/wI,IAGjCgwC,GAAuBhwC,GAAS,EAEpCgxI,EAAkC,CAACjpB,EAAW/nH,MAC7C+wI,EAAmC/wI,OAGpC+nH,EAAUjqG,wBACV3uB,KAAKsB,MAAM8/I,4BAA4BvwI,IAGvCixI,EAAwBh/B,cAC1BjiE,GAGJ,OACE,gBAAC,OAAD,KACG,EAAGtgD,UACF,gBAAC,IAAD,CAAQqE,UAAQ,GACd,gBAAC,IAAD,CAAMA,UAAQ,GACZ,uBAAKK,MAAOpC,EAAOklI,qBAChBtlG,oBACCT,EACA,CAAC42F,EAAgC7kH,IAC/B,gBAAC,WAAD,CAAgB1P,IAAK0P,GACnB,gBAAC,IAAD,KACE,gBAAC,IAAD,KACE,gBAAC,QAAD,gCAAmBA,EAAI+tI,MAEzB,gBAAC,IAAD,CAAQ/7I,QAAM,EAACnB,UAAQ,GACrB,gBAAC,IAAD,CACExC,cAAY,EACZoI,OAAO,OACPuD,SAAU,4CACV7L,MAAO02H,EAAU5zF,UACjB7iC,SAAUX,IAzKR,EAACjB,EAAgB8lD,IACxCA,IASA16C,EAAG46C,QAAQC,aAAaH,KAC3BpV,YACE1wC,EAAKG,EACH,4IAGG,IAdPuwC,YACE1wC,EAAKG,EACH,mHAGG,GAmKwBqhJ,CAAsBxhJ,EAAMiB,KAEjCo3H,EAAUriH,QAAQ/U,GAClBxB,KAAKif,cACLjf,KAAKC,MAAM+gD,wBAEb1gD,SAAUqhJ,EAAoB5tI,GAC9BrJ,WAAS,KAGb,gBAAC,IAAD,CACEyb,QACE,gBAAC,IAAD,KACE,gBAAC,IAAD,OAGJxK,kBAAmB,IAAM,CACvB,CACErX,MAAO/D,EAAKG,EAAE,eACdiS,SAAUgvI,EAAoB5tI,GAC9B6H,MAAO,IAAM5b,KAAKshJ,iBAAiBvtI,IAErC,CAAExR,KAAM,aACR,CACE+B,MAAO/D,EAAKG,EAAE,+BACdiS,SAAUgvI,EAAoB5tI,GAC9BigD,SAAU6tF,EACRjpB,EACA7kH,GAEF6H,MAAO,IAAM5b,KAAKwhJ,oBAAoBztI,IAExC,CACEzP,MAAO/D,EAAKG,EAAE,oCACdiS,SAAUgvI,EAAoB5tI,GAC9BigD,QAAS6tF,EACPjpB,EACA7kH,GAEF6H,MAAO,IAAM5b,KAAKyhJ,uBAAuB1tI,QAKjD,gBAAC,IAAD,CAAMhO,QAAM,EAACnB,UAAQ,GAClBg9I,EAAmC7tI,IAClC,gBAAC,IAAD,CAAQhO,QAAM,GACZ,gBAAC,IAAD,CACE0H,kBAAmB,gBAAC,QAAD,aACnBvL,MAAO02H,EAAUhtG,UACjBzpB,SAAU,CAACoI,EAAGwJ,EAAG7R,KACf02H,EAAUz9E,QAAQj5C,GAClBlC,KAAKif,cACLjf,KAAKC,MAAM+gD,uBAEb1gD,SAAUqhJ,EAAoB5tI,GAC9BrJ,WAAS,GAET,gBAAC,IAAD,CACExI,MAAM,aACNuD,YAAa,iBAEf,gBAAC,IAAD,CACEvD,MAAM,WACNuD,YAAa,4CAEf,gBAAC,IAAD,CACEvD,MAAM,aACNuD,YAAa,gBAEf,gBAAC,IAAD,CACEvD,MAAM,SACNuD,YAAa,uBAEf,gBAAC,IAAD,CACEvD,MAAM,MACNuD,YAAa,6BAEf,gBAAC,IAAD,CACEvD,MAAM,QACNuD,YAAa,6BAEf,gBAAC,IAAD,CACEvD,MAAM,QACNuD,YAAa,sBAEf,gBAAC,IAAD,CACEvD,MAAM,QACNuD,YAAa,sBAEf,gBAAC,IAAD,CACEvD,MAAM,YACNuD,YAAa,6BAKpBkG,EAAGm5B,kBAAkBC,SAAS6zF,EAAUhtG,YACvC,gBAAC,IAAD,CAAQ7lB,QAAM,GACZ,gBAAC,IAAD,CACEa,QAASA,EACT1E,MAAO02H,EAAU3vF,eACjB9mC,SAAWD,IACT02H,EAAUf,aAAa31H,GACvBlC,KAAKif,cACLjf,KAAKC,MAAM+gD,uBAEb1gD,SAAUqhJ,EAAoB5tI,MAIX,aAAxB6kH,EAAUhtG,WACT,gBAAC,IAAD,CAAQ7lB,QAAM,GACZ,gBAAC,IAAD,CACEa,QAASA,EACT1E,MAAO02H,EAAU3vF,eACjB9mC,SAAWD,IACT02H,EAAUf,aAAa31H,GACvBlC,KAAKif,cACLjf,KAAKC,MAAM+gD,uBAEb1gD,SAAUqhJ,EAAoB5tI,OAKrC6tI,EAAmC7tI,IAClC,gBAAC,IAAD,CAAMhO,QAAM,EAACnB,UAAQ,GACnB,gBAAC,IAAD,CAAQmB,QAAM,GACZ,gBAAC,IAAD,CACE3D,cAAY,EACZqL,kBAAmB,gBAAC,QAAD,cACnBkhD,oBAAkB,EAClBzsD,MAAO02H,EAAUnqG,iBACjBtsB,SAAUX,IACRo3H,EAAUnrE,eAAejsD,GACzBxB,KAAKif,eAEPvU,WAAS,EACTpK,UACE,MAMTuhJ,EAAgCjpB,EAAW7kH,IAC1C,gBAAC,IAAD,CAAMhO,QAAM,EAACnB,UAAQ,GACnB,gBAAC,IAAD,CAAQmB,QAAM,GACZ,gBAAC,IAAD,CACE3D,cAAY,EACZqL,kBACE,gBAAC,QAAD,yBAEFkhD,oBAAkB,EAClBzsD,MAAO02H,EAAUjqG,qBACjBxsB,SAAUX,IACRo3H,EAAU8oB,mBAAmBlgJ,GAC7BxB,KAAKif,eAEPjU,WAAS,EACTN,WAAS,EACTpK,UACE,QASO,IAAtB0hC,EAAWttB,OACV,gBAAC,IAAD,KACE,gBAAC,QAAD,0CAEA,KACJ,gBAAC,IAAD,KACE,gBAAC,IAAD,CAAMrP,eAAe,WAAWU,QAAM,IAClCk7C,GACA,gBAAC,IAAD,CACE18C,SAAO,EACPD,MAAO,gBAAC,QAAD,wBACPE,QAASxE,KAAKqhJ,cACdh7I,KAAM,gBAAC,IAAD,YAOjBH,EACC,gBAAC,IAAD,KACE,gBAAC,IAAD,CAAYA,aAAcA,KAG5B,gBAAC,IAAD,Y,kICxYC,MAAM87I,UAA2BliJ,YAA+B,eAAD,oBAC5EwB,MAAQ,CACN89D,eAAgBL,YAAqB/+D,KAAKC,MAAM2G,UAGlD7G,SAAU,MAAD,EAOHC,KAAKC,MALPK,EAFK,EAELA,SACA4B,EAHK,EAGLA,MACAC,EAJK,EAILA,SACAsL,EALK,EAKLA,kBACAqhD,EANK,EAMLA,mBAEMsQ,EAAmBp/D,KAAKsB,MAAxB89D,eAEFj9C,EAAc5f,KACbusD,IAEwC,IAAtCA,EAAmBpnD,QAAQnF,GAGpC,OACE,gBAAC,IAAD,CACEkL,kBAAmBA,GAAqB,gBAAC,QAAD,oBACxCvL,MAAOA,EACPC,SAAU,CAACoI,EAAGwJ,EAAG7R,KACfC,EAASD,IAEX5B,SAAUA,EACVoK,WAAS,GAET,gBAAC,IAAD,CACExI,MAAM,GACNuD,YAAa,kBACbnF,SAAU6hB,EAAW,MAEtBi9C,EAAe75D,IAAKimB,GACG,KAAlBA,EAASvoB,KAEJ,KAIP,gBAAC,IAAD,CACEoB,IAAKmnB,EAASvoB,KACdf,MAAOspB,EAASvoB,KAChBwC,YAAa+lB,EAASusB,SACtBz3C,SAAU6hB,EAAWqJ,EAASvoB,a,iCCtE5C,kGAcO,MAAMu+C,EAA6B,CACxCx4B,EACApiB,KAEA,MAAMo4D,EAAiBh2C,EAASu2B,2BAEhC,OAAO/c,IACLxgB,iBAAO,EAAGg9C,EAAetqD,OAAQX,IAC/B,MAAMkrD,EAAYD,EAAe/gB,GAAGlqC,GAEpC,OAAOkrD,EACJkpD,oBACA9iF,YACA9/B,IAAI49B,IAAY,CACfA,eACAoe,iBAAkB0d,EAAUspD,oBAAoBplF,MAEjD59B,IAAI,EAAG49B,eAAcoe,uBAAjB,CACH0d,YACA1d,mBACAh/C,KAAM4gC,EACN20C,YAAav2B,EAAiB0gG,iBAC9BlqG,SAAUwJ,EAAiB7B,cAC3Bx8C,YAAaq+C,EAAiB9yB,iBAC9BqZ,aAAcyZ,EAAiB8d,kBAC/B37B,WAAY6d,EAAiBqN,uBAM1BwqB,EAAmC,CAC9CrzD,EACA0e,KAEA,IAAKA,EAAY,OAAO1e,EAExB,MAAMu5C,EAAsB76B,EAAW3Q,cAEvC,OAAO/N,EAAK1a,OAAOm2C,IAIsB,IAFrCA,EAA2BzJ,SACxBjkB,cACApsB,QAAQ43D,KAG0B,IAFrC9d,EAA2Bt+C,YACxB4wB,cACApsB,QAAQ43D,M,kCC1DjB,iKAoBA,MAAM3zD,EAAKC,EAAOD,GAaZ9I,EAAS,CACbwD,KAAM,CACJtD,MAAO,GACP0M,OAAQ,GACR0D,YAAa,EACb+uI,UAAW,IAITC,EAAuB,CAC3B5hJ,EACAsgD,EACAlO,KAEA,MAAMyvG,EAAWzvG,EAAe4kF,cAChC,IAAK6qB,EACH,OAAO7hJ,EAAKG,EACV,sEAGJ,MAAMohJ,EAAwBh/B,cAA2BjiE,GAEnDwhG,EAAoB5/G,oBACxBkQ,EAAegmF,gBACf,CAACC,EAAW/nH,KACV,GAAIlF,EAAGm5B,kBAAkBw9G,WAAW1pB,EAAUhtG,WAC5C,OAAO,KAGT,MAAM22H,EAAc,gBAAY1xI,EAAQixI,EAApB,KACpB,OAA0C,IAAtCM,EAAS16I,QAAQ66I,GAA+BA,EAE7C,OAETl3I,OAAO4N,SAET,OAAIopI,EAAkBz8I,OAElBrF,EAAKG,EAAE,kEACP2hJ,EAAkBrsI,KAAK,WAH3B,GAUIwsI,EAAuBjgJ,GACvBA,IAASoJ,EAAGo0C,eAAeiR,UACvB,CAAC,4BACEzuD,IAASoJ,EAAGo0C,eAAejd,WAC9B,CAAC,8BACEvgC,IAASoJ,EAAGo0C,eAAeq3E,iBAC9B,CAAC,oCAGH,CAAC,gCAGHqrB,EAA0BlgJ,GAC1BA,IAASoJ,EAAGo0C,eAAeiR,UACvB,CAAC,gDACEzuD,IAASoJ,EAAGo0C,eAAejd,WAC9B,CAAC,8CACEvgC,IAASoJ,EAAGo0C,eAAeq3E,iBAC9B,CAAC,0DAGH,CAAC,oDAGM,MAAMsrB,UAAuC5iJ,YAI1DC,SAAU,MAAD,EAQHC,KAAKC,MANP0yC,EAFK,EAELA,eACAoO,EAHK,EAGLA,yBACAD,EAJK,EAILA,uBACA56C,EALK,EAKLA,aACAqlD,EANK,EAMLA,0BACA1K,EAPK,EAOLA,oBAGIt+C,EAAOowC,EAAeukF,kBAI5B,QAFIr2E,GACFgG,YAAkClU,EAAe3N,WAG/C,gBAAC,IAAD,KACE,gBAAC,QAAD,sJAUH6b,GACD4F,YAAmC9T,EAAe3N,WAGhD,gBAAC,WAAD,KACE,gBAAC,IAAD,CACEhyB,KAAK,OACLX,WAAW,6DAEX,gBAAC,QAAD,mRAQF,gBAAC,IAAD,KACE,gBAAC,QAAD,2MAWN,gBAAC,OAAD,KACG,EAAG9R,UACF,gBAAC,IAAD,KACGgrD,EAA4BA,IAA8B,KAC3D,gBAAC,IAAD,CAA2BvlD,WAAW,UACpC,gBAAC,IAAD,CAAMA,WAAW,SAASpB,UAAQ,GAChC,uBAAKG,IAAI,qBAAqBC,IAAI,GAAGC,MAAOpC,EAAOwD,OACnD,gBAAC,IAAD,CACEnE,MAAOK,EACPkL,kBAAmB,gBAAC,QAAD,sBACnB/C,WAAS,EACTpK,WAAYygD,EACZ5+C,SAAU,CAACoI,EAAGwJ,EAAG7R,KACfywC,EAAekjE,gBAAgB3zG,GAC3B4+C,GAAwBA,IAC5B9gD,KAAKif,gBAGP,gBAAC,IAAD,CACE/c,MAAOyJ,EAAGo0C,eAAe2Q,OACzBjrD,YAAa,gBAEf,gBAAC,IAAD,CACEvD,MAAOyJ,EAAGo0C,eAAeiR,UACzBvrD,YAAa,mBAEf,gBAAC,IAAD,CACEvD,MAAOyJ,EAAGo0C,eAAejd,WACzBr9B,YAAa,oBAEf,gBAAC,IAAD,CACEvD,MAAOyJ,EAAGo0C,eAAeq3E,iBACzB3xH,YAAa,6BAInB,gBAAC,IAAD,CACErD,cAAY,EACZqL,kBAAmB,gBAAC,QAAD,sCACnBM,SAAUy0I,EAAoBjgJ,GAC9BL,MAAOywC,EAAe+M,cACtBv9C,SAAUX,IACRmxC,EAAe2a,YAAY9rD,GACvBs/C,GAAwBA,IAC5B9gD,KAAKif,eAEPvU,WAAS,KAGb,gBAAC,IAAD,CAAM9F,UAAQ,GACZ,gBAAC,IAAD,CACExC,cAAY,EACZqL,kBACE,gBAAC,QAAD,yCAEFM,SAAU00I,EAAuBlgJ,GACjCmI,WAAS,EACTM,WAAS,EACT9I,MAAOywC,EAAelkB,iBACtBtsB,SAAUX,IACRmxC,EAAe8a,eAAejsD,GAC1Bs/C,GAAwBA,IAC5B9gD,KAAKif,kBAIX,gBAAC,IAAD,KACG1c,IAASoJ,EAAGo0C,eAAe2Q,QAC5BnuD,IAASoJ,EAAGo0C,eAAeiR,UACzB,gBAAC,IAAD,CACE5uD,cAAY,EACZqL,kBAAmB,gBAAC,QAAD,iCACnBM,SAAU,8EACVrD,WAAS,EACTxI,MAAOywC,EAAe4kF,cACtBp1H,SAAUX,IACRmxC,EAAegwG,YAAYnhJ,GACvBs/C,GAAwBA,IAC5B9gD,KAAKif,eAEP1V,UAAW44I,EACT5hJ,EACAsgD,EACAlO,KAGF,MAELzsC,EACC,gBAAC,IAAD,KACE,gBAAC,IAAD,CAAYA,aAAcA,KAG5B,gBAAC,IAAD,Y,8ECpOC,MAAG9E,WAAU6D,QAAOyP,OAAMinB,QAAOjG,cAC9C,gBAAC,IAAD,CACEmT,QAAkB,UAATn0B,EAAmB,KAAgB,UAATA,EAAmB,QAAU,QAChEzP,MAAK,eACAA,EADA,CAEH6K,WAAY4lB,EAAW,OAAI5qB,EAC3BmF,UAAW,GAAMhL,GAASA,EAAMgL,WAAc,GAC9C2J,aAAc,GAAM3U,GAASA,EAAM2U,cAAiB,KAEtD+hB,MAAOA,GAAS,WAEfv6B,I,wGCXU,MAAMsmF,UAAqB5nF,YACxCC,SAAU,MAAD,EACyCC,KAAKC,MAA7CqE,EADD,EACCA,MAAOC,EADR,EACQA,QAAS8B,EADjB,EACiBA,KAASjG,EAD1B,0CASP,OACE,gBAAC,IAAD,eACEyoC,QAAQ,YACRn0B,KAAK,QACLjB,MAAOlP,EAAU,UAAY,UAC7BkX,aAPgB,GAQZrb,GAEHiG,EACAA,GAAQ,gBAAC,IAAD,MACR/B,M,iCCnDT,0FAKA,MAAMzB,EAAS,CACbuM,UAAW,CACTqF,QAAS,EACT1R,MAAO,GACP0M,OAAQ,IAEVpJ,KAAM,CACJtD,MAAO,GACP0M,OAAQ,KAIG,MAAMmzI,UAAoB7oI,YACvCha,SACE,OACE,kBAAC,gBAAcmB,SAAf,KACG,EAAG2hJ,mBACF,kBAAC,sBAAoB3hJ,SAArB,KACG,EAAG4hJ,yBACF,kBAAC,IAAD,CACEt+I,QAAS,KACPq+I,EAAcpzF,OAAOqzF,EAAoBC,YAE3C99I,MAAOpC,EAAOuM,WAEd,kBAAC,IAAD,CAAOlG,UAAU,QAAQjE,MAAOpC,EAAOwD,a,oGCtBvD,MAAMxD,EAAS,CACbmgJ,YAAa,CACXzoI,UAAW,UAEb0oI,aAAc,CACZxuI,QAAS,EACT8F,UAAW,UAEbi6F,YAAa,CACXnlG,QAAS,OACTC,cAAe,OAEjBo/F,SAAU,CACRr/F,QAAS,QAEX6zI,qCAAsC,CACpC7zI,QAAS,OACThK,eAAgB,iBAElBq3D,cAAe,CACbjoD,QAAS,IAyCGxU,QAAkB,MAE9BqgD,EAWErgD,EAXFqgD,iBACAl8C,EAUEnE,EAVFmE,QACAR,EASE3D,EATF2D,KACAa,EAQExE,EARFwE,eACAE,EAOE1E,EAPF0E,SACAC,EAME3E,EANF2E,SACAnE,EAKER,EALFQ,MACAW,EAIEnB,EAJFmB,SACAozG,EAGEv0G,EAHFu0G,YACA9F,EAEEzuG,EAFFyuG,SACAhyC,EACEz8D,EADFy8D,cAEIymF,EAAgB7iG,EACpB,gBAAC,WAAD,KACE,uBAAKj8C,IAAI,qBAAqBi8C,GAC9B,uBAAKj8C,IAAI,WAAWD,IAGtBA,EAEIg/I,EAAsC,eACtCx+I,EAAW/B,EAAOogJ,aAAepgJ,EAAOmgJ,YADF,GAErCxuC,EAAc3xG,EAAO2xG,YAAc,GAFE,GAGrC9F,EAAW7rG,EAAO6rG,SAAW,IAGpC,OACE,gBAAC,IAAD,KACGh6F,GACC,gBAAC,IAAD,CACE9Q,KAAMA,EACNC,QAASY,EACTiG,WAAS,EACT24I,WAAqB,UAAT3uI,EACZ/P,cAAuBmG,IAAbnG,EAAyBA,EAAW,KAC9C2+I,sBAAsB,EACtBC,sBAAsB,GAErB9iJ,GACC,gBAAC,IAAD,CACEwE,MAAOy3D,EAAgB75D,EAAO65D,mBAAgB5xD,GAE7CrK,GAGL,gBAAC,IAAD,CAAewE,MAAOm+I,GAAqBhiJ,GAC3C,gBAAC,IAAD,CACE6D,MACEq7C,EACIz9C,EAAOqgJ,0CACPp4I,GAGLq4I,O,iCC3Hb,yEAKA,MAAMtgJ,EAAS,CACbuM,UAAW,CACTC,QAAS,OACTM,KAAM,IAIK,MAAM6O,UAA8Cu7D,IAAY,eAAD,oBA2B5EypE,kBAAoB,KAIlBxjJ,KAAKC,MAAMuxI,mCA5BbjsF,gBACMvlD,KAAKoc,QAAQpc,KAAKoc,OAAOmpC,gBAG/BgoD,qBAIAvzF,sBAAsBC,GAGpB,SAAKja,KAAKC,MAAMsc,WAAatC,EAAUsC,UAOzCoD,mBAAmBolE,GACbA,EAAUxoE,WAAavc,KAAKC,MAAMsc,UACpCvc,KAAKC,MAAMuxI,kCAWf/yH,8BAA4D,MAAD,EACPze,KAAKC,MAA/C2G,EADiD,EACjDA,QAAS2qI,EADwC,EACxCA,6BACjB,OACG3qI,EAAQu9F,iCAAiCotC,GAIrC3qI,EAAQ6X,4BAA4B8yH,GAFlC,KAKX9rF,2BACEmwD,EACA1yE,GAEIljC,KAAKoc,QACPpc,KAAKoc,OAAOqpC,2BAA2BmwD,EAAoB1yE,GAG/DnjC,SAAU,MAAD,EAC2CC,KAAKC,MAA/C2G,EADD,EACCA,QAAS2qI,EADV,EACUA,6BACXhzH,EAA2Bve,KAAKye,8BAEtC,OAAKF,EAQH,uBAAKtZ,MAAOpC,EAAOuM,WACjB,gBAAC,IAAD,CACE/K,IAAKka,EAAyBzX,IAC9BF,QAASA,EACT2X,yBAA0BA,EAC1BinC,WAAYxlD,KAAKC,MAAMulD,WACvBlwC,gBAAiBtV,KAAKC,MAAMqV,gBAC5BC,iBAAkBvV,KAAKC,MAAMsV,iBAC7BgC,wBAAyBvX,KAAKC,MAAMsX,wBACpCuxC,4BAA6B9oD,KAAKC,MAAM6oD,4BACxCC,uBAAwB/oD,KAAKC,MAAM8oD,uBACnCX,6BAA8BpoD,KAAKC,MAAMmoD,6BACzCC,6BAA8BroD,KAAKC,MAAMooD,6BACzChB,iBAAkBrnD,KAAKwjJ,kBACvBhhJ,IAAK4Z,GAAWpc,KAAKoc,OAASA,EAC9BwsC,eAAgB5oD,KAAKC,MAAM2oD,eAC3BtR,sBAAuBuR,OArBzB,kDAA0B0oF,EAA1B,c,+IClER,MAAM5lI,EAAKC,EAAOD,GAEX,MAAM83I,UAAgC1pI,YAC3Cha,SAAU,MAAD,EACoBC,KAAKC,MAAxB2G,EADD,EACCA,QAASq+B,EADV,EACUA,MACjB,IAAKA,EAAO,OAAO,KAEnB,MAAM7gC,EAAU,CACd,kBAAC,IAAD,CACEC,IAAI,SACJC,MAAO,kBAAC,QAAD,eACPgT,iBAAe,EACf9S,QAASxE,KAAKC,MAAMsqC,WAEtB,kBAAC,IAAD,CACElmC,IAAI,QACJC,MAAO,kBAAC,QAAD,cACPC,SAAO,EACP+S,iBAAe,EACf9S,QAASxE,KAAKC,MAAMgX,WAIxB,OACE,kBAAC,IAAD,CACE5S,IAAK4gC,EAAMn+B,IACX1C,QAASA,EACTQ,UAAQ,EACRF,mBAAmB,EACnBD,eAAgBzE,KAAKC,MAAMsqC,SAC3B3mC,KAAM5D,KAAKC,MAAM2D,KACjBnD,MAAK,eAAUwkC,EAAMD,UAAhB,WAEL,kBAAC,IAAD,CACEp+B,QAASA,EACTq+B,MAAOA,EACPhlB,uBAAwBjgB,KAAKC,MAAMggB,uBACnCC,iBAAkBlgB,KAAKC,MAAMigB,iBAC7BwsC,cACE,IACE1sD,KAAKif,kBAQJi+C,gBAAuBumF,EAAyB,CAC7DrmF,iBAAkB,IAAM,IAAIzxD,EAAG+3I,YAC/BvmF,SAAU,Y,kDCxDZ,6BAGel9D,OACb,kBAAC,IAAD,iBAAaA,EAAb,CAAoB0jJ,QAAQ,eAC1B,uBAAG31G,GAAG,SAASwjC,OAAO,OAAOC,YAAY,IAAIp0C,KAAK,OAAOumH,SAAS,WAChE,uBAAG51G,GAAG,SAAS41G,SAAS,WACtB,6BACE51G,GAAG,QACH3Q,KAAK,UACLmvC,OAAO,0CAET,uBAAGx+B,GAAG,UAAU3Q,KAAK,WACnB,0BACE2Q,GAAG,iBACHnmB,UAAU,oFACV7D,EAAE,aACFC,EAAE,cACFlhB,MAAM,aACN0M,OAAO,eAET,0BACEu+B,GAAG,iBACHnmB,UAAU,wFACV7D,EAAE,aACFC,EAAE,aACFlhB,MAAM,aACN0M,OAAO,eAET,0BACEu+B,GAAG,iBACHnmB,UAAU,uFACV7D,EAAE,aACFC,EAAE,aACFlhB,MAAM,aACN0M,OAAO,eAET,0BACEu+B,GAAG,iBACHnmB,UAAU,uFACV7D,EAAE,aACFC,EAAE,cACFlhB,MAAM,aACN0M,OAAO,oB,iCC3CnB,6BAGexP,OACb,kBAAC,IAAD,iBAAaA,EAAb,CAAoB0jJ,QAAQ,eAC1B,uBAAG31G,GAAG,SAASwjC,OAAO,OAAOC,YAAY,IAAIp0C,KAAK,OAAOumH,SAAS,WAChE,uBAAG51G,GAAG,OAAO41G,SAAS,WACpB,6BACE51G,GAAG,QACH3Q,KAAK,UACLmvC,OAAO,oCAET,4BAAQx+B,GAAG,OAAO3Q,KAAK,UAAUw0C,GAAG,KAAKC,GAAG,MAAM/lC,EAAE,MACpD,4BAAQiC,GAAG,OAAO3Q,KAAK,UAAUw0C,GAAG,KAAKC,GAAG,MAAM/lC,EAAE,QACpD,6BACEiC,GAAG,QACH3Q,KAAK,UACLmvC,OAAO,yD,iCCjBjB,6BAGevsE,OACb,kBAAC,IAAD,iBAAaA,EAAb,CAAoB0jJ,QAAQ,eAC1B,uBAAG31G,GAAG,SAASwjC,OAAO,OAAOC,YAAY,IAAIp0C,KAAK,OAAOumH,SAAS,WAChE,uBACE51G,GAAG,UACHnmB,UAAU,iCACV+7H,SAAS,WAET,uBAAG51G,GAAG,QAAQnmB,UAAU,iCACtB,6BACEmmB,GAAG,QACH3Q,KAAK,UACLmvC,OAAO,gKAET,0BACEx+B,GAAG,iBACH3Q,KAAK,UACLxV,UAAU,sFACV7D,EAAE,aACFC,EAAE,aACFlhB,MAAM,YACN0M,OAAO,eAET,0BACEu+B,GAAG,iBACH3Q,KAAK,UACLxV,UAAU,wFACV7D,EAAE,aACFC,EAAE,aACFlhB,MAAM,YACN0M,OAAO,eAET,0BACEu+B,GAAG,iBACH3Q,KAAK,UACLxV,UAAU,yFACV7D,EAAE,aACFC,EAAE,aACFlhB,MAAM,YACN0M,OAAO,eAET,0BACEu+B,GAAG,iBACH3Q,KAAK,UACLxV,UAAU,uFACV7D,EAAE,aACFC,EAAE,cACFlhB,MAAM,YACN0M,OAAO,gBAGX,uBAAGu+B,GAAG,QAAQpmB,QAAQ,MAAMC,UAAU,iCACpC,0BACEmmB,GAAG,iBACH3Q,KAAK,UACLxV,UAAU,sFACV7D,EAAE,aACFC,EAAE,aACFlhB,MAAM,YACN0M,OAAO,cAET,6BACEu+B,GAAG,QACH3Q,KAAK,UACLmvC,OAAO,2FAET,0BACEx+B,GAAG,iBACH3Q,KAAK,UACLxV,UAAU,qFACV7D,EAAE,aACFC,EAAE,aACFlhB,MAAM,aACN0M,OAAO,cAET,0BACEu+B,GAAG,iBACH3Q,KAAK,UACLxV,UAAU,yFACV7D,EAAE,YACFC,EAAE,aACFlhB,MAAM,aACN0M,OAAO,cAET,0BACEu+B,GAAG,iBACH3Q,KAAK,UACLxV,UAAU,mFACV7D,EAAE,aACFC,EAAE,aACFlhB,MAAM,YACN0M,OAAO,eAET,0BACEu+B,GAAG,iBACH3Q,KAAK,UACLxV,UAAU,uFACV7D,EAAE,aACFC,EAAE,aACFlhB,MAAM,YACN0M,OAAO,oB,iCCvGnB,6BAGexP,OACb,kBAAC,IAAYA,EACX,uBAAG+tC,GAAG,SAASwjC,OAAO,OAAOC,YAAY,IAAIp0C,KAAK,OAAOumH,SAAS,WAChE,uBAAG51G,GAAG,WAAW41G,SAAS,WACxB,0BACEl/C,EAAE,w+BACF12D,GAAG,QACH3Q,KAAK,YAEP,6BACE2Q,GAAG,QACH3Q,KAAK,UACLmvC,OAAO,0WAET,uBAAGx+B,GAAG,QAAQpmB,QAAQ,OACpB,0BACE88E,EAAE,wiBACF12D,GAAG,QACH3Q,KAAK,YAEP,0BACEqnE,EAAE,oiBACF12D,GAAG,QACH3Q,KAAK,iB,iCC1BjB,6BAGep9B,OACb,kBAAC,IAAD,iBAAaA,EAAb,CAAoB0jJ,QAAQ,eAC1B,uBAAG31G,GAAG,SAASwjC,OAAO,OAAOC,YAAY,IAAIp0C,KAAK,OAAOumH,SAAS,WAChE,uBAAG51G,GAAG,WAAW41G,SAAS,WACxB,0BACE51G,GAAG,iBACH3Q,KAAK,UACLrZ,EAAE,IACFC,EAAE,IACFlhB,MAAM,KACN0M,OAAO,eAET,0BACEu+B,GAAG,iBACH3Q,KAAK,UACLrZ,EAAE,aACFC,EAAE,aACFlhB,MAAM,aACN0M,OAAO,eAET,6BACEu+B,GAAG,QACH3Q,KAAK,UACLmvC,OAAO,oLAET,6BACEx+B,GAAG,QACH3Q,KAAK,UACLmvC,OAAO,kK,iCC/BjB,6BAGevsE,OACb,kBAAC,IAAD,iBAAaA,EAAb,CAAoB0jJ,QAAQ,eAC1B,uBAAG31G,GAAG,SAASwjC,OAAO,OAAOC,YAAY,IAAIp0C,KAAK,OAAOumH,SAAS,WAChE,uBAAG51G,GAAG,aAAa41G,SAAS,WAC1B,0BACE51G,GAAG,iBACH3Q,KAAK,UACLrZ,EAAE,IACFC,EAAE,IACFlhB,MAAM,KACN0M,OAAO,eAET,6BACEu+B,GAAG,QACH3Q,KAAK,UACLmvC,OAAO,4QAET,0BACEx+B,GAAG,iBACH3Q,KAAK,UACLrZ,EAAE,KACFC,EAAE,aACFlhB,MAAM,aACN0M,OAAO,mB,4KCdjB,MAAM5M,EAAS,CACbuM,UAAW,CACTC,QAAS,OACTM,KAAM,IAIK,MAAMyO,UAA6B27D,IAAY,eAAD,oBAG3Dz4E,MAAQ,CACNuiJ,mBAAmB,GAJsC,KA+C3DC,oBAAuB72G,IACrB,MAAM9uB,EAAiBne,KAAKqe,oBACvBF,IAELA,EAAe2lI,oBAAoB72G,GACnCjtC,KAAK2B,SACH,CACEkiJ,mBAAmB,GAErB,IAAM7jJ,KAAKulD,mBAxD4C,KA4D3Dw+F,kBAAoB,KAClB/jJ,KAAK2B,SAAS,CACZkiJ,mBAAmB,KAvDvBt+F,gBACMvlD,KAAKoc,QAAQpc,KAAKoc,OAAOmpC,gBAG/BgoD,qBAIAvzB,wBACE,MAAM77D,EAAiBne,KAAKqe,oBACtBV,EAAS3d,KAAK6d,YACpB,OAAKM,EAEE,eACF47D,IAAW4hE,4BAA4Bh+H,GAD5C,CAEEqF,OAAQnX,YAAoBsS,KAJF,GAQ9BE,oBAAwC,MAAD,EACGre,KAAKC,MAArC2G,EAD6B,EAC7BA,QAASuqI,EADoB,EACpBA,mBACjB,OAAKvqI,EAAQmqC,uBAAuBogG,GAG7BvqI,EAAQyX,kBAAkB8yH,GAFxB,KAKXtzH,YAAa,MACHjX,EAAY5G,KAAKC,MAAjB2G,QAEFuX,EAAiBne,KAAKqe,oBAC5B,IAAKF,EAAgB,OAAO,KAE5B,MAAM8uB,EAAa9uB,EAAe6lI,sBAClC,OAAKp9I,EAAQoqC,eAAe/D,GAGrBrmC,EAAQiX,UAAUovB,GAFhB,KAwBXltC,SAAU,MAAD,EACiCC,KAAKC,MAArC2G,EADD,EACCA,QAASuqI,EADV,EACUA,mBACXhzH,EAAiBne,KAAKqe,oBACtBV,EAAS3d,KAAK6d,YAEpB,OAAKM,EAMH,yBAAKlZ,MAAOpC,EAAOuM,WAChBuO,GACC,kBAAC,IAAD,iBACM3d,KAAKC,MADX,CAEEuC,IAAK4Z,GAAWpc,KAAKoc,OAASA,EAC9BxV,QAASA,EACTgZ,MAAO,CACLjC,UAEFsC,uBAAwBrZ,EACxBsZ,iBAAkBvC,EAClBqF,OAAQ7E,EAAe+nC,YACvB7O,UAAW,IAAMr3C,KAAKC,MAAMo3C,UAAUzwC,EAAS+W,GAC/C46B,eAAgBv4C,KAAK+jJ,kBACrB/iI,qBAAsBhhB,KAAKC,MAAM+gB,qBACjC1L,gBAAiBtV,KAAKC,MAAMqV,gBAC5BC,iBAAkBvV,KAAKC,MAAMsV,iBAC7BgC,wBAAyBvX,KAAKC,MAAMsX,wBACpCuxC,4BAA6B9oD,KAAKC,MAAM6oD,4BACxCF,eAAgB5oD,KAAKC,MAAM2oD,mBAG7BjrC,GACA,kBAAC,IAAD,KACE,kBAAC,IAAD,KACE,kBAAC,QAAD,qFAKF,kBAAC,IAAD,CAAMtY,eAAe,UACnB,kBAAC,IAAD,CACEf,MAAO,kBAAC,QAAD,yBACPC,SAAO,EACPC,QAASxE,KAAK+jJ,sBAKtB,kBAAC,IAAD,CACEtjJ,MAAO,kBAAC,QAAD,oCACPwjJ,SAAS,gFACTrgJ,KAAM5D,KAAKsB,MAAMuiJ,kBACjBj9I,QAASA,EACTqsB,SAAUjzB,KAAK8jJ,oBACfjgJ,QAAS,IAAM7D,KAAK2B,SAAS,CAAEkiJ,mBAAmB,OAjD/C,0DAAgC1S,EAAhC,c,6JClFE,MAAM+S,UAA4BnqI,YAC/C5E,YAAYlV,GACVmV,MAAMnV,GACND,KAAKsB,MAAQ,CACX6iJ,mBAAoBlkJ,EAAMgtC,YAI9B71B,0BAA0BC,GACpBA,EAAS41B,aAAejtC,KAAKC,MAAMgtC,YACrCjtC,KAAK2B,SAAS,CACZwiJ,mBAAoB9sI,EAAS41B,aAKnCm3G,aAAan3G,GACXjtC,KAAK2B,SAAS,CACZwiJ,mBAAoBl3G,IAIxBltC,SACE,MAAMqE,EAAU,CACd,kBAAC,IAAD,CACEC,IAAI,SACJC,MAAO,kBAAC,QAAD,eACPC,SAAS,EACTC,QAASxE,KAAKC,MAAM4D,UAEtB,kBAAC,IAAD,CACEQ,IAAI,SACJC,MAAO,kBAAC,QAAD,eACPC,SAAS,EACT+S,iBAAiB,EACjB9S,QAAS,IAAMxE,KAAKC,MAAMgzB,SAASjzB,KAAKsB,MAAM6iJ,oBAC9C7jJ,UAAWN,KAAKsB,MAAM6iJ,sBAIlBv9I,EAAY5G,KAAKC,MAAjB2G,QACAu9I,EAAuBnkJ,KAAKsB,MAA5B6iJ,mBACFp3G,EAAc/qB,iBAAO,EAAGpb,EAAQ2hG,kBAAmBx0F,GAChDnN,EAAQwpH,YAAYr8G,GAAGixB,WAGhC,OACE,kBAAC,IAAD,CACE5gC,QAASA,EACTR,KAAM5D,KAAKC,MAAM2D,KACjBnD,MAAOT,KAAKC,MAAMQ,MAClBgE,eAAgBzE,KAAKC,MAAM4D,QAC3Ba,mBAAmB,EACnBgG,WAAS,EACT/F,SAAS,MAER3E,KAAKC,MAAMgkJ,UAAY,kBAAC,IAAD,KAAOjkJ,KAAKC,MAAMgkJ,UAC1C,kBAAC,IAAD,CACEI,aAAW,mBACXphJ,KAAK,oBACLf,MAAOiiJ,EACPhiJ,SAAUO,GAAS1C,KAAKokJ,aAAa1hJ,EAAM0D,OAAOlE,QAEjD6qC,EAAYxnC,IAAItC,GACf,kBAAC,IAAD,CACEoB,IAAKpB,EACLf,MAAOe,EACP6R,QAAS,kBAAC,IAAD,CAAOrB,MAAM,YACtBnP,MAAOrB,U,mKC9DrB,MAAMJ,EAAS,CACbuM,UAAW,CACTC,QAAS,OACTM,KAAM,IAIK,MAAMqO,UAA6B+7D,IAAY,eAAD,oBAE3Dz4E,MAAQ,CACNuiJ,mBAAmB,GAHsC,KA2D3DC,oBAAuB72G,IACrB,MAAMlvB,EAAiB/d,KAAKie,oBACvBF,IAELA,EAAe+lI,oBAAoB72G,GACnCjtC,KAAK2B,SACH,CACEkiJ,mBAAmB,GAErB,IAAM7jJ,KAAKulD,mBApE4C,KAwE3Dw+F,kBAAoB,KAClB/jJ,KAAK2B,SAAS,CACZkiJ,mBAAmB,KA1EoC,KA8E3DpmI,eAAiB,KACf,MAAME,EAAS3d,KAAKie,oBACd7B,EAASpc,KAAKoc,OAEhBA,GAAUuB,GACZnR,YACEmR,EAAO2mI,wBACPloI,EAAOmoI,kBA/EbvqI,sBAAsBC,GAKpB,SAAKja,KAAKC,MAAMsc,WAAatC,EAAUsC,UAOzCgpC,gBACMvlD,KAAKoc,QAAQpc,KAAKoc,OAAOmpC,gBAG/BgoD,qBAIAvzB,wBACE,MAAMj8D,EAAiB/d,KAAKie,oBACtBN,EAAS3d,KAAK6d,YACpB,OAAKE,GAAmBJ,EAEjB,eACFo8D,IAAW4hE,4BAA4Bh+H,GAD5C,CAEE8zC,UAAW5lD,YAAoBkS,EAAeymI,uBAC9CC,WAAYzkJ,KAAKoc,OAASpc,KAAKoc,OAAOmoI,gBAAkB,KALnB,GASzCtmI,oBAAwC,MAAD,EACGje,KAAKC,MAArC2G,EAD6B,EAC7BA,QAASyqI,EADoB,EACpBA,mBACjB,OAAKzqI,EAAQohG,uBAAuBqpC,GAG7BzqI,EAAQqX,kBAAkBozH,GAFxB,KAKXxzH,YAAwB,MACdjX,EAAY5G,KAAKC,MAAjB2G,QAEFmX,EAAiB/d,KAAKie,oBAC5B,IAAKF,EAAgB,OAAO,KAE5B,MAAMkvB,EAAalvB,EAAeimI,sBAClC,OAAKp9I,EAAQoqC,eAAe/D,GAGrBrmC,EAAQiX,UAAUovB,GAFhB,KAoCXltC,SAAU,MAAD,EAC2CC,KAAKC,MAA/C2G,EADD,EACCA,QAASyqI,EADV,EACUA,mBAAoB90H,EAD9B,EAC8BA,SAC/BwB,EAAiB/d,KAAKie,oBACtBN,EAAS3d,KAAK6d,YAEpB,OAAKE,EAMH,uBAAK9Y,MAAOpC,EAAOuM,WAChBuO,GACC,gBAAC,IAAD,iBACM3d,KAAKC,MADX,CAEEuC,IAAK4Z,GAAWpc,KAAKoc,OAASA,EAC9BxV,QAASA,EACT+W,OAAQA,EACRq2E,iBAAkBj2E,EAAeymI,sBACjCE,kBAAmB74I,YACjBkS,EAAeumI,yBAEjBjtG,UAAWjkB,GACTpzB,KAAKC,MAAMo3C,UAAUzwC,EAAS+W,EAAQI,EAAgBqV,GAExDkkB,sBAAuBt3C,KAAKC,MAAMq3C,sBAClCE,eAAgBx3C,KAAKC,MAAMu3C,eAC3ByjG,mBAAoBj7I,KAAK+jJ,kBACzBxnI,SAAUA,MAGZoB,GACA,gBAAC,IAAD,KACE,gBAAC,IAAD,KACE,gBAAC,QAAD,qFAKF,gBAAC,IAAD,CAAMtY,eAAe,UACnB,gBAAC,IAAD,CACEf,MAAO,gBAAC,QAAD,yBACPC,SAAO,EACPC,QAASxE,KAAK+jJ,sBAKtB,gBAAC,IAAD,CACEtjJ,MAAO,gBAAC,QAAD,oCACPmD,KAAM5D,KAAKsB,MAAMuiJ,kBACjBj9I,QAASA,EACTqsB,SAAUjzB,KAAK8jJ,oBACfjgJ,QAAS,IAAM7D,KAAK2B,SAAS,CAAEkiJ,mBAAmB,OA9C/C,wDAAgCxS,EAAhC,c,odC/Cb,MAAM1lI,EAAKC,EAAOD,GAIZg5I,EAA0BrpE,YAAaM,YAAcgpE,KAAkB,CAC3EppE,SAAS,IAGL34E,EAAS,CACbuM,UAAW,CACTC,QAAS,OACTM,KAAM,EACNyI,SAAU,WACVqB,SAAU,WAIRorI,EAA4B,CAChC5/I,MAAO,CACLlC,MAAO,IACP0W,SAAU,WAIRqrI,EAAiB,CACrB5sH,UAAW,MACXuyB,MAAO,aACPE,gBAAiB,GACjBD,OAAQ,CACNxyB,UAAW,MACXuyB,MAAO,mBACPC,OAAQ,eACRC,gBAAiB,KAIfo6F,EAA4B,CAChC7sH,UAAW,MACXuyB,MAAO,mBACPC,OAAQ,eACRC,gBAAiB,IAsDJ,MAAMq6F,UAAoBllJ,YAavCqV,YAAYlV,GACVmV,MAAMnV,GADkB,KAkG1Bm6E,gBAAkB,KACXp6E,KAAKuqD,eACLvqD,KAAKuqD,aAAapE,WAAW,eAAgB,MAAO,GAAI,WAC3DnmD,KAAK2B,SAAS,CACZsjJ,wBAAwB,MAtGJ,KA2G1B3qE,eAAiB,KACVt6E,KAAKuqD,eACLvqD,KAAKuqD,aAAapE,WAAW,aAAc,QAAS,GAAI,WAC3DnmD,KAAK2B,SAAS,CACZujJ,uBAAuB,MA/GH,KAoH1B7qE,qBAAuB,KAChBr6E,KAAKuqD,cACVvqD,KAAKuqD,aAAapE,WAAW,qBAAsB,MAAO,GAAI,WAtHtC,KAyH1Bs0B,oBAAsB,KACpBz6E,KAAK2B,SAAS,CAAEwjJ,mBAAoBnlJ,KAAKsB,MAAM6jJ,qBA1HvB,KA6H1BzqE,iBAAmB,KACZ16E,KAAKuqD,eACLvqD,KAAKuqD,aAAapE,WAAW,SAAU,MAAO,GAAI,QACrDnmD,KAAK2B,SAAS,CACZyjJ,mBAAmB,MAjIC,KAsI1BxqE,iBAAmB,KACjB56E,KAAK2B,SAAS,CACZ8iJ,WAAW,eACNzkJ,KAAKsB,MAAMmjJ,WADN,CAERl0D,YAAavwF,KAAKsB,MAAMmjJ,WAAWl0D,gBA1If,KA+I1BzV,WAAa,KACX96E,KAAK2B,SAAS,CACZ8iJ,WAAW,eACNzkJ,KAAKsB,MAAMmjJ,WADN,CAERxtF,MAAOj3D,KAAKsB,MAAMmjJ,WAAWxtF,KAC7BC,MAAOl3D,KAAKsB,MAAMmjJ,WAAWxtF,UApJT,KAyJ1B8jB,cAAgB,CAACn3E,GAAgB,KAC/B5D,KAAK2B,SAAS,CAAE0jJ,cAAezhJ,KA1JP,KA6J1B0hJ,oBAAsB,CAAC1hJ,GAAgB,KACrC5D,KAAK2B,SAAS,CAAE4jJ,0BAA2B3hJ,KA9JnB,KAiK1B4hJ,iBAAmB,KACjB,IAAKxlJ,KAAKu6E,mBAAmBovD,uBAC3B,OAEF,MAAM8b,EAA6BzlJ,KAAKu6E,mBACrCC,uBAAuB,GACvBz3C,gBACH/iC,KAAK0lJ,iBAAiBD,IAxKE,KA2K1BrrF,sBAAyB1qC,IACvB1vB,KAAK2B,SAAS,CAAEgkJ,wBAAyBj2H,KA5KjB,KA+K1Bk2H,oBAAuBr6I,IACrBvL,KAAK2B,SAAS,CAAEkkJ,sBAAuBt6I,KAhLf,KAmL1Bu6I,oBAAsB,CAACliJ,GAAgB,KACrC5D,KAAK2B,SAAS,CAAEmlG,0BAA2BljG,KApLnB,KAuL1ByuC,WAAc0zG,IAA6B,MACjCn/I,EAAY5G,KAAKC,MAAjB2G,QACJm/I,EACF/lJ,KAAK2B,SAAS,CACZqkJ,wBAAyB,CACvBz6I,OAAQw6I,EACRn6I,OAAQhF,EAAQmkC,eAAeg7G,EAAa/gH,cAIhDhlC,KAAK2B,SAAS,CACZqkJ,wBAAyB,QAlML,KAuM1BN,iBAAoB/hI,IAAwB,MAAD,EACb3jB,KAAKC,MAAzB2G,EADiC,EACjCA,QAAS+W,EADwB,EACxBA,OACbA,EAAOotB,eAAepnB,GACxB3jB,KAAKqyC,WAAW10B,EAAOqtB,UAAUrnB,IAC1B/c,EAAQmkC,eAAepnB,IAC9B3jB,KAAKqyC,WAAWzrC,EAAQokC,UAAUrnB,KA5MZ,KA+M1BuoC,UAAajnB,IACXjlC,KAAK2B,SAAS,CAAEsqD,YAAahnB,KAhNL,KAmN1BghH,cAAiBxB,IACfzkJ,KAAK2B,SAAS,CACZ8iJ,WAAW,eACNzkJ,KAAKsB,MAAMmjJ,WADN,GAELA,MAvNiB,KA4N1BvsG,KAAO,KACLl4C,KAAKu6E,mBAAmB0Y,iBACxBjzF,KAAK2B,SACH,CACEs9H,QAAS/mF,YAAKl4C,KAAKsB,MAAM29H,QAASj/H,KAAKC,MAAM+zF,mBAE/C,KAGMh0F,KAAKoc,QAAQpc,KAAKoc,OAAO+6E,eAC7Bn3F,KAAKulD,mBAtOe,KA2O1BnN,KAAO,KACLp4C,KAAKu6E,mBAAmB0Y,iBACxBjzF,KAAK2B,SACH,CACEs9H,QAAS7mF,YAAKp4C,KAAKsB,MAAM29H,QAASj/H,KAAKC,MAAM+zF,mBAE/C,KAGMh0F,KAAKoc,QAAQpc,KAAKoc,OAAO+6E,eAC7Bn3F,KAAKulD,mBArPe,KA0P1B2gG,kBAAqBC,IACdA,EAKHnmJ,KAAK2B,SAAS,CACZk2F,oBAAqB,CAACsuD,KALxBnmJ,KAAK2B,SAAS,CACZk2F,oBAAqB,MA7PD,KAsQ1BuuD,uCAAyC,KAClCpmJ,KAAKoc,SAKVpc,KAAK2B,SAAS,CACZ0kJ,kCAAmCrmJ,KAAKoc,OAAOm1E,kCAG7CvxF,KAAKsmJ,cACPtmJ,KAAKsmJ,aAAa3kJ,SAAS,CAAE4kJ,qBAAqB,MAjR5B,KAoR1BC,0BAA4B,KAC1B,IAAKxmJ,KAAKsB,MAAMu2F,oBAAoBjyF,SAAW5F,KAAKoc,OAClD,OAGF,MAAMqqI,EAAiBzmJ,KAAKsB,MAAMu2F,oBAAoB,GAChDm7B,EAAiBhzH,KAAKoc,OAAOm1E,gCACnCvxF,KAAK0mJ,aAAa1zB,EAAgByzB,GAClCzmJ,KAAK2B,SAAS,CACZk2F,oBAAqB,CAAC4uD,MA7RA,KAiS1BC,aAAe,CAAC3vF,EAAuBpzC,KAChCA,GAAe3jB,KAAKoc,SAEzBpc,KAAKoc,OAAOu7C,aAAaZ,EAAK,CAACpzC,IAC/B3jB,KAAK2B,SACH,CACEk2F,oBAAqB,GACrBonC,QAAS8D,YAAc/iI,KAAKsB,MAAM29H,QAASj/H,KAAKC,MAAM+zF,mBAExD,IAAMh0F,KAAKulD,mBA1SW,KA8S1BohG,kBAAoB,KAClB3mJ,KAAK2B,SACH,CACEs9H,QAAS8D,YAAc/iI,KAAKsB,MAAM29H,QAASj/H,KAAKC,MAAM+zF,mBAExD,IAAMh0F,KAAKulD,kBAnTW,KAuT1BqhG,qBAAwBn1F,IACtBzxD,KAAK2B,SAAS,CACZk2F,oBAAqBgvD,IACnBp1F,EAAUlsD,IAAImqB,GAAYA,EAASqT,oBAGvC/iC,KAAK8mJ,8BACL9mJ,KAAKulD,iBA9TmB,KAiU1BsuC,yBAA4BnkE,IAC1B1vB,KAAK0lJ,iBAAiBh2H,EAASqT,kBAlUP,KAqU1BgkH,kBAAqBt1F,IACnBzxD,KAAK2B,SACH,CACEs9H,QAAS8D,YAAc/iI,KAAKsB,MAAM29H,QAASj/H,KAAKC,MAAM+zF,mBAExD,IAAMh0F,KAAK8mJ,gCA1UW,KA8U1BE,oBAAuBv1F,IACrBzxD,KAAK2B,SACH,CACEs9H,QAAS8D,YAAc/iI,KAAKsB,MAAM29H,QAASj/H,KAAKC,MAAM+zF,mBAExD,IAAMh0F,KAAK8mJ,gCAnVW,KAuV1BG,oBAAuBx1F,IACrBzxD,KAAK2B,SACH,CACEs9H,QAAS8D,YAAc/iI,KAAKsB,MAAM29H,QAASj/H,KAAKC,MAAM+zF,mBAExD,IAAMh0F,KAAK8mJ,gCA5VW,KAgW1BxpC,qBAAwB7rD,IACtBzxD,KAAKif,eAjWmB,KAqW1BioI,mBAAqB,CACnBz1F,EACAypB,GAAsB,KAEtBl7E,KAAKu6E,mBAAmBoZ,gBAAgBliC,GAAW,GAE/CypB,GACEl7E,KAAKoc,QAAQpc,KAAKoc,OAAOm7E,aAAa9lC,GAE5CzxD,KAAK8mJ,8BACL9mJ,KAAKulD,iBA/WmB,KAsX1B4hG,yBAA4B36F,IAA2B,MAC7C65F,EAAsCrmJ,KAAKsB,MAA3C+kJ,kCACHA,IAILrmJ,KAAK0mJ,aAAaL,EAAmC75F,GACrDxsD,KAAK2B,SAAS,CAAE0kJ,kCAAmC,SA7X3B,KAgY1Be,eAAiB,CAAC97G,EAAmBgb,KACnCtmD,KAAK2B,SAAS,CACZ0lJ,uBAAuB,EACvBjrF,aAAc9wB,EACdg8G,yBAA0B,CAACxrD,EAAUyrD,KACnCvnJ,KAAK2B,SACH,CACE0lJ,uBAAuB,GAEzB,KACMvrD,IACe,OAAbyrD,EACFvnJ,KAAKC,MAAM+zF,iBAAiBwzD,0BAC1Bl8G,GAGFtrC,KAAKC,MAAM+zF,iBAAiByzD,qBAC1Bn8G,EACAi8G,IAKNjhG,EAAKw1C,GAGD97F,KAAKoc,QAAQpc,KAAKoc,OAAO+6E,eAC7Bn3F,KAAKulD,sBA3ZW,KAka1BmiG,eAAiB,CACf5/F,EACAzB,EACAC,KAEAtmD,KAAKC,MAAM+zF,iBAAiByzD,qBAAqB3/F,EAASzB,GAC1DC,GAAK,IAxamB,KA2a1BqhG,gBAAkB,CAChBnpF,EACAlY,KACI,MACI/6C,EAAmBizD,EAAnBjzD,OAAQK,EAAW4yD,EAAX5yD,OADb,EAEyB5L,KAAKC,MAAzB2G,EAFL,EAEKA,QAAS+W,EAFd,EAEcA,OAEXutC,EAAS1nD,IAAO4V,kBACpB,uHAGExN,EACFD,EAAG+6C,uBAAuBkhG,2BACxBhhJ,EACA2E,EAAOy5B,WACa,IAClBkmB,GAGJv/C,EAAG+6C,uBAAuBmhG,6BACxBjhJ,EACA+W,EACApS,EAAOy5B,WACa,IAClBkmB,GAGN5E,GAAK,IAtcmB,KAyc1ByE,4BAA+B1E,IAAqB,MAAD,EACrBrmD,KAAKC,MAAzB2G,EADyC,EACzCA,QAAS+W,EADgC,EAChCA,OAEjB,OACEA,EAAOotB,eAAesb,IACtBz/C,EAAQmkC,eAAesb,IACvB1oC,EAAOyjC,kBAAkBC,IAAIgF,IAC7Bz/C,EAAQw6C,kBAAkBC,IAAIgF,IAE9BpV,YAAe,2DACR,KACGtlC,EAAG46C,QAAQC,aAAaH,KAClCpV,YACE,sIAEK,IAxde,KA8d1B62G,sBAAyBzhG,IAAqB,MACpC2/F,EAA4BhmJ,KAAKsB,MAAjC0kJ,wBAEJA,GACFhmJ,KAAK+nJ,gBAAgB/B,EAAyB3/F,EAAS,SAlejC,KAse1B0hG,gBAAkB,CAChBvpF,EACAnY,EACAC,KACI,MACI/6C,EAAmBizD,EAAnBjzD,OAAQK,EAAW4yD,EAAX5yD,OADb,EAEyB5L,KAAKC,MAAzB2G,EAFL,EAEKA,QAAS+W,EAFd,EAEcA,OAKbpS,EAAOy5B,YAAcqhB,IACnBz6C,EACFD,EAAG+6C,uBAAuBshG,2BACxBphJ,EACA2E,EAAOy5B,UACPqhB,GACoB,GAGtB16C,EAAG+6C,uBAAuBuhG,6BACxBrhJ,EACA+W,EACApS,EAAOy5B,UACPqhB,GACoB,IAK1B96C,EAAOgL,QAAQ8vC,GACfC,GAAK,IArgBmB,KAwgB1B0E,eAAiB,CACfC,EACA3E,KACI,MACIrhB,EAAkBgmB,EAAlBhmB,MAAOr5B,EAAWq/C,EAAXr/C,OADZ,EAEyB5L,KAAKC,MAAzB2G,EAFL,EAEKA,QAAS+W,EAFd,EAEcA,OAEXutC,EAAS1nD,IAAO4V,kBACpB,0GAGExN,EACFD,EAAG+6C,uBAAuBkhG,2BACxBhhJ,EACAq+B,EAAMD,WACc,IAClBkmB,GAGJv/C,EAAG+6C,uBAAuBmhG,6BACxBjhJ,EACA+W,EACAsnB,EAAMD,WACc,IAClBkmB,GAGN5E,GAAK,IAniBmB,KAsiB1B8E,eAAiB,CACfH,EACA5E,EACAC,KACI,MACIrhB,EAAkBgmB,EAAlBhmB,MAAOr5B,EAAWq/C,EAAXr/C,OADZ,EAEyB5L,KAAKC,MAAzB2G,EAFL,EAEKA,QAAS+W,EAFd,EAEcA,OAKbsnB,EAAMD,YAAcqhB,IAClBz6C,EACFD,EAAG+6C,uBAAuBshG,2BACxBphJ,EACAq+B,EAAMD,UACNqhB,GACoB,GAGtB16C,EAAG+6C,uBAAuBuhG,6BACxBrhJ,EACA+W,EACAsnB,EAAMD,UACNqhB,GACoB,IAK1BC,GAAK,IApkBmB,KAukB1Bmc,gBAAkB,KACUziE,KAAKu6E,mBAAmBC,uBAChCj1E,IAAImqB,GACpB1vB,KAAKC,MAAM+zF,iBAAiBr7B,eAAejpC,IAG7C1vB,KAAKu6E,mBAAmB0Y,iBACpBjzF,KAAKoc,QAAQpc,KAAKoc,OAAO64E,2BAE7Bj1F,KAAK2B,SACH,CACEk2F,oBAAqB,GACrBonC,QAAS8D,YAAc/iI,KAAKsB,MAAM29H,QAASj/H,KAAKC,MAAM+zF,mBAExD,KACEh0F,KAAKulD,gBACLvlD,KAAK8mJ,iCAvlBe,KA4lB1B5rE,WAAa,KACPl7E,KAAKoc,QAAQpc,KAAKoc,OAAO8+D,cA7lBL,KAgmB1BC,cAAiBwX,IACX3yF,KAAKoc,QAAQpc,KAAKoc,OAAO++D,cAAcwX,IAjmBnB,KAomB1B3X,OAAS,KACHh7E,KAAKoc,QAAQpc,KAAKoc,OAAOm6E,OAAO,KArmBZ,KAwmB1Btb,QAAU,KACJj7E,KAAKoc,QAAQpc,KAAKoc,OAAOm6E,QAAQ,KAzmBb,KA4mB1B2xD,eAAiB,CAAClkI,EAAWC,KACvBjkB,KAAK+a,aAAa/a,KAAK+a,YAAYnX,KAAKogB,EAAGC,IA7mBvB,KAgnB1B46G,cAAgB,EAAGspB,yBAA+C,MAChE,MAAMC,EAAsBpoJ,KAAKu6E,mBAC9BC,uBACAj1E,IAAImqB,GAAY7jB,YAAoB6jB,IAEvC,GAAI1vB,KAAKoc,OAAQ,CACf,MAAMhE,EAAW+vI,EACbnoJ,KAAKoc,OAAOm1E,gCACZvxF,KAAKoc,OAAO+4E,qCAChB5O,IAAUvvE,IAluBiB,YAkuBa,CACtCgN,EAAG5L,EAAS,GACZ6L,EAAG7L,EAAS,GACZq5C,UAAW22F,MA5nBS,KAioB1BtpB,aAAe,CAAC1rG,EAA+B,MAC7CpzB,KAAK6+H,cAAczrG,GACnBpzB,KAAKyiE,mBAnoBmB,KAsoB1Bm2E,MAAQ,EAAGuP,yBAA+C,MACxD,MAAMhI,EAAmB55D,IAAUpvE,IAhvBN,aAivB7B,IAAKgpI,IAAqBngJ,KAAKoc,OAAQ,OAEvC,MAAMhE,EAAW+vI,EACbnoJ,KAAKoc,OAAOm1E,gCACZvxF,KAAKoc,OAAO+4E,qCACRnxE,EAASm8H,EAATn8H,EAAGC,EAAMk8H,EAANl8H,EACXk8H,EAAiB1uF,UACdlsD,IAAI8iJ,IACH,MAAM34H,EAAW,IAAI/jB,EAAG6nD,gBAExB,OADAhnD,YAAwBkjB,EAAU24H,GAC3B34H,IAER5nB,QAAQ4nB,IACPA,EAASwoC,KAAKxoC,EAASwB,OAASlN,EAAI5L,EAAS,IAC7CsX,EAASyoC,KAAKzoC,EAASyB,OAASlN,EAAI7L,EAAS,IAC7CpY,KAAKC,MAAM+zF,iBAAiBC,sBAAsBvkE,GAClDA,EAASpjB,YAxpBW,KA4pB1Bi7F,0BAA4B,KAAO,MAAD,EACJvnG,KAAKC,MAAzB0d,EADwB,EACxBA,OAAQ/W,EADgB,EAChBA,QAChB+W,EAAO4pF,0BAA0B3gG,IA9pBT,KAiqB1B0hJ,uBAAyB,KACnBtoJ,KAAKsmJ,cAActmJ,KAAKsmJ,aAAatmE,mBAlqBjB,KAqqB1B8mE,4BAA8B,KACxB9mJ,KAAKuoJ,mBAAmBvoJ,KAAKuoJ,kBAAkBtpI,eAtqB3B,KAyqB1BupI,mBAAsBj9I,IAAsB,MAClC3E,EAAY5G,KAAKC,MAAjB2G,QAEF6hJ,EAAiB,IAAI98I,EAAG+8I,qBAC9Bn9I,EAAOo9I,gBAAgBF,GACvB,MAAMG,EAAsBH,EACzBI,eACAptG,oBACApW,YAEHmd,IAAoBsmG,aAClBliJ,EACAgiJ,EACA,OACA,KACM5oJ,KAAKoc,QAAQpc,KAAKoc,OAAOs4C,kBAAkBnpD,EAAOy5B,cAxrBlC,KA6rB1B+jH,kBAAoB,KAAsB,MAAD,EACX/oJ,KAAKC,MAAzB2G,EAD+B,EAC/BA,QAAS+W,EADsB,EACtBA,OAEXqrI,EAAuB,IAAInqC,IAKjC,OAJApgD,YAAiB73D,EAAS+W,GAAQ0mB,eAAev8B,QAAQ,EAAGyD,aAC1DuzG,YAAkBvzG,EAAOqiD,WAAW9lD,QAAQq2G,GAAO6qC,EAAQ/pH,IAAIk/E,MAG1Dxd,MAAMie,KAAKoqC,IArsBM,KAwsB1BC,6BAAgC1oJ,IAAgC,MACtD2oJ,EAAuBlpJ,KAAKsB,MAA5B4nJ,mBAER,OAAO7gI,YAAsB,CAC3Bg2F,WAAY99G,EAAKG,EAAE,+CACnB49G,WAAYt+G,KAAK+oJ,kBACjBrkH,aAAcwkH,EACd/mJ,SAAU+mJ,IACRlpJ,KAAK2B,SAAS,CAAEunJ,2BA7sBpBlpJ,KAAKu6E,mBAAqB,IAAI0S,IAC9BjtF,KAAKsB,MAAQ,CACX6nJ,iBAAiB,EACjBhE,mBAAmB,EACnBE,eAAe,EACfE,2BAA2B,EAC3B6D,gBAAgB,EAChB/B,uBAAuB,EACvBC,yBAA0B,KAC1BlrF,aAAc,KACd4pF,wBAAyB,KACzBL,wBAAyB,KACzBE,sBAAuB,KACvBhuD,oBAAqB,GACrBwuD,kCAAmC,KACnCp6F,YAAa,KAEbw4F,WAAYxkJ,EAAMykJ,kBAClBzlB,QAASC,YAAuBj/H,EAAM+zF,iBAAkB,CACtDmrC,eAAgB,KAGlB8lB,wBAAwB,EACxBn+C,2BAA2B,EAC3Bo+C,uBAAuB,EACvBE,mBAAmB,EAEnB8D,mBAAoB,IAIxBhuF,qBACEl7D,KAAKqpJ,aAAe,IAAI19I,EAAG+rD,oBAG7B/3C,mBAAmBolE,EAAkB8/C,GAC/B7kI,KAAKsB,MAAM29H,UAAY4F,EAAU5F,SAC/Bj/H,KAAKC,MAAM2oD,gBACb5oD,KAAKC,MAAM2oD,eAAegC,wBAGhC25F,gBACE,OAAOvkJ,KAAKsB,MAAMmjJ,WAGpBl/F,gBACEvlD,KAAKC,MAAMulD,WACT,gBAAC,IAAD,CACElO,sBAAuBt3C,KAAKC,MAAMq3C,sBAClCF,kBAAmBp3C,KAAKC,MAAMm3C,kBAC9BC,UAAW,IAAMr3C,KAAKC,MAAMo3C,UAAU,IACtCI,yBAA0Bz3C,KAAKC,MAAMw3C,yBACrCF,iBAAkB,IAAMv3C,KAAKC,MAAMo3C,UAAU,CAAEytF,gBAAgB,IAC/DttF,eAAgB,KACdx3C,KAAKC,MAAMu3C,iBACXx3C,KAAKC,MAAMo3C,UAAU,KAEvBkjC,mBAAoBv6E,KAAKu6E,mBACzBH,gBAAiBp6E,KAAKo6E,gBACtBC,qBAAsBr6E,KAAKq6E,qBAC3BC,eAAgBt6E,KAAKs6E,eACrB7X,gBAAiBziE,KAAKyiE,gBACtBgY,oBAAqBz6E,KAAKy6E,oBAC1BC,iBAAkB16E,KAAK06E,iBACvBE,iBAAkB56E,KAAK46E,iBACvBE,WAAY96E,KAAK86E,WACjBD,YAAa,MAAQ76E,KAAKsB,MAAMmjJ,WAAWxtF,KAC3C0jB,kBAAmB,MAAQ36E,KAAKsB,MAAMmjJ,WAAWl0D,WACjDxV,cAAe/6E,KAAK+6E,cACpBI,cAAen7E,KAAKm7E,cACpBD,WAAYl7E,KAAKk7E,WACjB/iC,QAASA,YAAQn4C,KAAKsB,MAAM29H,SAC5B5mF,QAASA,YAAQr4C,KAAKsB,MAAM29H,SAC5B/mF,KAAMl4C,KAAKk4C,KACXE,KAAMp4C,KAAKo4C,KACX4iC,OAAQh7E,KAAKg7E,OACbC,QAASj7E,KAAKi7E,QACd1iC,eAAgBv4C,KAAKslJ,uBAK3BluI,0BAA0B6C,GAEtBja,KAAKC,MAAM0d,SAAW1D,EAAU0D,QAChC3d,KAAKC,MAAM+zF,mBAAqB/5E,EAAU+5E,kBAC1Ch0F,KAAKC,MAAM2G,UAAYqT,EAAUrT,UAEjC5G,KAAKu6E,mBAAmB0Y,iBACxBjzF,KAAK+6E,eAAc,GACnB/6E,KAAKo6D,sBAAsB,MAC3Bp6D,KAAKslJ,qBAAoB,IAunB7BvlJ,SAAU,MAAD,EASHC,KAAKC,MAPP2G,EAFK,EAELA,QACA+W,EAHK,EAGLA,OACAq2E,EAJK,EAILA,iBACA1+E,EALK,EAKLA,gBACAC,EANK,EAMLA,iBACAgC,EAPK,EAOLA,wBACAgF,EARK,EAQLA,SAEIs+C,EAAoB76D,KAAKu6E,mBAAmBC,uBAE5C1+D,EAAU,CACdqzC,WAAY,CACV5sD,KAAM,YACN9B,MAAO,kBACPub,aAAc,IACZ,gBAAC,IAAD,CACEpV,QAASA,EACT+W,OAAQA,EACR8zC,UAAWoJ,EACXT,sBAAuBp6D,KAAKo6D,sBAC5BwrF,oBAAqB5lJ,KAAK4lJ,oBAC1BzsF,mBAAoBn5D,KAAK0lJ,iBACzBljJ,IAAK8mJ,GACFtpJ,KAAKuoJ,kBAAoBe,EAE5B1gG,eAAgB5oD,KAAKC,MAAM2oD,kBAIjCuxB,OAAQ,CACN53E,KAAM,YACN9B,MAAO,cACPub,aAAc,IACZ,gBAAC,IAAD,CACEpV,QAASA,EACT0O,gBAAiBA,EACjBiC,wBAAyBA,EACzBhC,iBAAkBA,EAClBwlD,cAAc,EACd8gC,cAAe77F,KAAKonJ,eACpBxrD,cAAe57F,KAAK0nJ,eACpBxrF,gBAAiBv+C,EACjBirC,eAAgB5oD,KAAKC,MAAM2oD,kBAIjC,mBAAoB,CAClBrmD,KAAM,UACN+lD,YAAY,EACZtsC,aAAc,IACZ,gBAAC,IAAD,KACGmF,GACC,gBAACwjI,EAAD,CACE/9I,QAASA,EACT+W,OAAQA,EACRq2E,iBAAkBA,EAClB5gE,QAASpzB,KAAKsB,MAAMmjJ,WACpB7xD,gBAAiB5yF,KAAKimJ,cACtB1rE,mBAAoBv6E,KAAKu6E,mBACzBwc,kBAAmB/2F,KAAKyiE,gBACxBs1B,iBAAkB/3F,KAAK2mJ,kBACvBzzD,oBAAqBlzF,KAAK4mJ,qBAC1Bj1F,wBAAyB3xD,KAAK6zF,yBAC9BW,iBAAkBx0F,KAAK+mJ,kBACvBnyD,mBAAoB50F,KAAKgnJ,oBACzBhyD,mBAAoBh1F,KAAKinJ,oBACzBpvD,oBAAqB73F,KAAKsB,MAAMu2F,oBAChCr8E,cAAexb,KAAKkoJ,eACpBvuG,OAAQ,IACN35C,KAAK6+H,cAAc,CAAEspB,uBAAuB,IAE9CvuG,MAAO,IAAM55C,KAAK8+H,aAAa,CAAEqpB,uBAAuB,IACxDtuG,QAAS,IAAM75C,KAAK44I,MAAM,CAAEuP,uBAAuB,IACnDruG,OAAQ95C,KAAKk4C,KACb6B,OAAQ/5C,KAAKo4C,KACb6B,UAAWj6C,KAAKi7E,QAChB/gC,SAAUl6C,KAAKg7E,OACf8B,iBAAkB1gE,GAAWpc,KAAKoc,OAASA,EAC3Ck7E,gBAAiB/6E,EACjB4E,WAAYA,MAMtB,eAAgB,CACd5e,KAAM,YACN9B,MAAO,eACPioD,gBAAiB,CACf,gBAAC,OAAD,CAAMrkD,IAAI,QACP,EAAG9D,UACF,gBAAC,IAAD,CACEob,kBAAmB,IACjB3b,KAAKipJ,6BAA6B1oJ,MAK1C,gBAAC,IAAD,CAAa8D,IAAI,WAEnB2X,aAAc,IACZ,gBAAC,IAAD,CACE4C,aAAcC,IAAwBD,aAAaE,KACjDD,KAEFjY,QAASA,EACTsZ,iBAAkBvC,EAClBk6E,oBAAqB73F,KAAKsB,MAAMu2F,oBAChC84C,aAAc3wI,KAAKC,MAAM0wI,cAAgB3wI,KAAKqyC,WAC9Ck3G,eAAgBvpJ,KAAK2nJ,gBACrBhrF,gBAAiB38D,KAAK+qD,4BACtBy+F,gBAAiBxpJ,KAAKmnJ,yBACtBsC,iBAAkBzpJ,KAAKkmJ,kBACvBwD,eAAgB1pJ,KAAK+nJ,gBACrB4B,eAAgB,IAAM3pJ,KAAKunG,4BAC3B2hD,mBAAoBlpJ,KAAKsB,MAAM4nJ,mBAC/BU,2BAA4BV,GAC1BlpJ,KAAK2B,SAAS,CACZunJ,uBAGJW,iBAAkB7pJ,KAAK+oJ,kBACvBvmJ,IAAKsnJ,GAAgB9pJ,KAAKsmJ,aAAewD,EACzClhG,eAAgB5oD,KAAKC,MAAM2oD,kBAIjC,qBAAsB,CACpBrmD,KAAM,YACN9B,MAAO,qBACPub,aAAc,IACZ,gBAAC,IAAD,CACEyvC,mBAAoB7kD,EAAQw6C,kBAC5BsK,aAAc/tC,EAAOyjC,kBACrB+K,YAAansD,KAAKksD,UAClBL,cAAe7rD,KAAKgrD,eACpBY,cAAe5rD,KAAKorD,eACpBO,eAAgB3rD,KAAK+qD,4BACrBnC,eAAgB5oD,KAAKC,MAAM2oD,mBAKnC,OACE,uBAAK3jD,MAAOpC,EAAOuM,WACjB,gBAAC,IAAD,KACGwB,GACC,gBAAC,IAAD,CACEkL,QAASA,EACT49G,0BAA2C,UAAhB9oH,EAC3B45C,aACkB,UAAhB55C,EACIm0I,EACAD,EAENtiJ,IAAK+nD,GAAiBvqD,KAAKuqD,aAAeA,KAI/CvqD,KAAKsB,MAAM0kJ,yBACV,gBAAC,IAAD,CACEpiJ,MAAI,EACJ2H,OAAQvL,KAAKsB,MAAM0kJ,wBAAwBz6I,OAC3C3E,QAASA,EACT0O,gBAAiBA,EACjBiC,wBAAyBA,EACzBhC,iBAAkBA,EAClBg1B,SAAU,KACJvqC,KAAKsB,MAAM0kJ,yBACbhmJ,KAAKwoJ,mBACHxoJ,KAAKsB,MAAM0kJ,wBAAwBz6I,QAGvCvL,KAAKqyC,WAAW,OAElBsqB,gBAAiB38D,KAAK+qD,4BACtBwR,SAAUlW,IACRrmD,KAAK8nJ,sBAAsBzhG,IAE7BpvC,QAAS,KACHjX,KAAKsB,MAAM0kJ,yBACbhmJ,KAAKwoJ,mBACHxoJ,KAAKsB,MAAM0kJ,wBAAwBz6I,QAGvCvL,KAAKqyC,WAAW,MAChBryC,KAAKunG,4BACLvnG,KAAKsoJ,yBAEDtoJ,KAAKC,MAAM2oD,gBACb5oD,KAAKC,MAAM2oD,eAAegC,6BAI/B5qD,KAAKsB,MAAM2qD,aACZ,gBAAC,IAAD,CACErlD,QAASA,EACThD,MAAI,EACJqhC,MAAOjlC,KAAKsB,MAAM2qD,YAClB/rC,iBAAkBvC,EAClBsC,uBAAwBrZ,EACxB2jC,SAAU,IAAMvqC,KAAKksD,UAAU,MAC/Bj1C,QAAS,IAAMjX,KAAKksD,UAAU,QAGlC,gBAAC,IAAD,CACEtoD,KAAM5D,KAAKsB,MAAM6jJ,kBACjB1P,WAAYoP,EACZ5tH,OAAO,QACPpzB,QAAS7D,KAAKy6E,qBAEd,gBAAC,IAAD,CACEh6E,MAAO,gBAAC,QAAD,kBACP+6I,wBAAsB,EACtB33I,QAAS7D,KAAKy6E,sBAEhB,gBAAC,IAAD,CACE1f,cAAe/6D,KAAKsB,MAAM6jJ,kBAC1B1zF,UAAWuiC,EACXn5B,kBAAmBA,EACnBH,kBAAmB16D,KAAKknJ,mBACxBjiJ,MAAO,CACLwK,OAAO,eAAD,OAAiB6rI,IAAjB,WAIZ,gBAAC,IAAD,CACEjpI,WAAW,mCACXqB,QACE,gBAAC,QAAD,oGAKF2xH,mBACE,gBAAC,QAAD,qGAKF/yH,OAAQtS,KAAKsB,MAAMu2F,oBAAoBjyF,SAEzC,gBAAC,IAAD,CACEyM,WAAW,4BACXqB,QACE,gBAAC,QAAD,yEAIFpB,OAAQtS,KAAKsB,MAAM2jJ,yBAErB,gBAAC,IAAD,CACE5yI,WAAW,wCACXqB,QACE,gBAAC,QAAD,yIAKFpB,OAAQtS,KAAKsB,MAAM4jJ,wBAErB,gBAAC,IAAD,CACE7yI,WAAW,2BACXqB,QACE,gBAAC,QAAD,0GAKFpB,OAAQtS,KAAKsB,MAAM8jJ,oBAEpBplJ,KAAKsB,MAAM+jJ,eACV,gBAAC,IAAD,CACEzhJ,MAAI,EACJk2E,YAAa95E,KAAKsB,MAAMmjJ,WACxBl6G,SAAU,IAAMvqC,KAAK+6E,eAAc,GACnC9jE,QAAS6iE,IACP95E,KAAKimJ,cAAcnsE,GACnB95E,KAAK+6E,eAAc,QAItB/6E,KAAKsB,MAAMqkJ,yBACZ,gBAAC,IAAD,CACE/hJ,MAAI,EACJwmC,mBACEpqC,KAAKsB,MAAMqkJ,yBACX3lJ,KAAKsB,MAAMqkJ,wBAAwBt7G,eAErCE,SAAU,IAAMvqC,KAAKo6D,sBAAsB,MAC3CnjD,QAAS,IAAMjX,KAAKo6D,sBAAsB,MAC1C5vB,wBACE,gBAAC,QAAD,4FAKF/pC,MAAO,gBAAC,QAAD,2BACPylF,sBAAuB,KACrB,IAAKlmF,KAAKu6E,mBAAmBovD,uBAC3B,OAEF,MAAMn3E,EAAuBxyD,KAAKu6E,mBAC/BC,uBAAuB,GACvBz3C,gBACGx3B,EAASsY,YACbjd,EACA+W,EACA60C,GAEEjnD,IACFvL,KAAK4lJ,oBAAoBr6I,GACzBvL,KAAKo6D,sBAAsB,YAKhCp6D,KAAKsB,MAAMukJ,uBACZ,gBAAC,IAAD,CACEjiJ,MAAI,EACJwmC,mBACEpqC,KAAKsB,MAAMukJ,uBACX7lJ,KAAKsB,MAAMukJ,sBAAsBx7G,eAEnCE,SAAU,IAAMvqC,KAAK4lJ,oBAAoB,MACzC3uI,QAAS,IAAMjX,KAAK4lJ,oBAAoB,MACxCp7G,wBACE,gBAAC,QAAD,8JAMF/pC,MAAO,gBAAC,QAAD,6BAGRT,KAAKsB,MAAM+lJ,uBACZ,gBAAC,IAAD,CACEzjJ,MAAI,EACJs4D,gBAAiBv+C,EACjBy+C,aAAcp8D,KAAKsB,MAAM86D,aACzBv4D,QAAS7D,KAAKsB,MAAMgmJ,2BAGvBtnJ,KAAKsB,MAAMikJ,2BACV,gBAAC,IAAD,CACE3hJ,MAAI,EACJgD,QAASA,EACT+W,OAAQA,EACR9Z,QAAS,IAAM7D,KAAKslJ,qBAAoB,GACxCruI,QAAS,IAAMjX,KAAKslJ,qBAAoB,GACxC14C,gBAAiB,IAAM5sG,KAAK8lJ,qBAAoB,GAChD7K,mBAAoBj7I,KAAKC,MAAMg7I,uBAGhCj7I,KAAKsB,MAAMwlG,2BACZ,gBAAC,IAAD,CACEljG,MAAI,EACJ+Z,OAAQA,EACR1G,QAAS,IAAMjX,KAAK8lJ,qBAAoB,GACxCjiJ,QAAS,IAAM7D,KAAK8lJ,qBAAoB,KAG5C,gBAAC,IAAD,CACEtjJ,IAAKuY,GAAgB/a,KAAK+a,YAAcA,EACxCY,kBAAmB,IAAM,CACvB,CACErX,MAAOtE,KAAKsB,MAAMu2F,oBAAoBjyF,OAClC,sBACAy5I,YAAcr/I,KAAKsB,MAAMu2F,oBAAoB,GAAI,GACjD,GACJj8E,MAAO,IAAM5b,KAAKwmJ,4BAClBxyF,QAASh0D,KAAKsB,MAAMu2F,oBAAoBjyF,OAAS,GAEnD,CACEtB,MAAO,sBACPsX,MAAO,IAAM5b,KAAKomJ,yCAClBpyF,QAAmD,IAA1Ch0D,KAAKsB,MAAMu2F,oBAAoBjyF,QAE1C,CACEtB,MAAOtE,KAAKsB,MAAMu2F,oBAAoBjyF,OAClC,eACAy5I,YAAcr/I,KAAKsB,MAAMu2F,oBAAoB,GAAI,IACjD,GACJj8E,MAAO,IACL5b,KAAK0lJ,iBAAiB1lJ,KAAKsB,MAAMu2F,oBAAoB,IACvD7jC,QAASh0D,KAAKsB,MAAMu2F,oBAAoBjyF,OAAS,GAEnD,CACEtB,MAAO,mBACPsX,MAAO,IAAM5b,KAAKslJ,qBAAoB,IAExC,CAAE/iJ,KAAM,aACR,CACE+B,MAAO,OACPsX,MAAO,IAAM5b,KAAK6+H,gBAClBlsH,QAAS3S,KAAKu6E,mBAAmBovD,uBACjChpI,YAAa,eAEf,CACE2D,MAAO,MACPsX,MAAO,IAAM5b,KAAK8+H,eAClBnsH,QAAS3S,KAAKu6E,mBAAmBovD,uBACjChpI,YAAa,eAEf,CACE2D,MAAO,QACPsX,MAAO,IAAM5b,KAAK44I,QAClBjmI,QAAS4zE,IAAUllC,IAxtCA,aAytCnB1gD,YAAa,eAEf,CAAE4B,KAAM,aACR,CACE+B,MAAO,OACPsX,MAAO5b,KAAKk4C,KACZvlC,QAASwlC,YAAQn4C,KAAKsB,MAAM29H,SAC5Bt+H,YAAa,eAEf,CACE2D,MAAO,OACPsX,MAAO5b,KAAKo4C,KACZzlC,QAAS0lC,YAAQr4C,KAAKsB,MAAM29H,SAC5Bt+H,YAAa,qBAEf,CACE2D,MAAO,SACPsX,MAAO,IAAM5b,KAAKyiE,kBAClB9vD,QAAS3S,KAAKu6E,mBAAmBovD,6BA/oC1Bqb,EACZ/+H,aAAe,CACpBu/B,WAAY,U,kDCxKhB,2EAEO,MAAMqN,EAA0BnwD,IACrC,IAAKA,EAAO,OAAO,EADyC,MAGpDqnJ,EAAkBrnJ,EAAlBqnJ,cACR,OAAOA,GAAiBA,EAAcnkJ,QAAU,GAiGnC,MAAMqxF,EAQnB9hF,aAAY,OAAE28E,EAAF,cAAU3W,EAAV,cAAyBuX,EAAzB,aAAwClhC,IAAwB,KAP5Ew4F,kBAAmC,KAOwC,KAN3EC,kBAAmC,KAMwC,KAY3EC,YAAc,OAZ6D,KAgB3EC,aAAe,CAACC,EAAiBC,EAAiB/yH,KAChD,GAA+B,OAA3Bt3B,KAAKgqJ,mBAAyD,OAA3BhqJ,KAAKiqJ,kBAG1C,OAFAjqJ,KAAKgqJ,kBAAoBI,OACzBpqJ,KAAKiqJ,kBAAoBI,GAI3B,MAAMt3F,EAASq3F,EAAUpqJ,KAAKgqJ,kBACxBh3F,EAASq3F,EAAUrqJ,KAAKiqJ,kBACxB72D,EAAcrgC,EAAS/yD,KAAKsqJ,iBAC5Bj3D,EAAcrgC,EAAShzD,KAAKsqJ,iBAClCtqJ,KAAKuqJ,cAAcj3D,UAAUF,GAAcC,GAC3CrzF,KAAKgqJ,kBAAoBI,EACzBpqJ,KAAKiqJ,kBAAoBI,EAEzBrqJ,KAAKwqJ,eAAexqJ,KAAKsqJ,iBAAmBhzH,IA/B6B,KAkC3EmzH,UAAY,KACVzqJ,KAAKgqJ,kBAAoB,KACzBhqJ,KAAKiqJ,kBAAoB,MApCgD,KAuC3EpxF,QAAU,KACR74D,KAAK0qJ,kCAvCL1qJ,KAAKwqJ,eAAiBrvE,EACtBn7E,KAAKsqJ,eAAiB53D,EACtB1yF,KAAKuqJ,cAAgB/4F,EACrBxxD,KAAK0qJ,+BA9F2B,GAClC54D,SACA64D,eACAC,cACAC,iBAEA,IAAIC,EAAY,KAEhB,SAAS96D,IACP8B,EAAOxH,iBAAiB,YAAaz6B,GAGvC,SAASA,EAAKtlD,GACZ,IAAKsoD,EAAuBtoD,GAC1B,OAEF,IAAIk7E,EAAIl7E,EAAEw/I,cAENgB,EAAKtlE,EAAE,GAAGtqE,QAAUsqE,EAAE,GAAGtqE,QACzB6vI,EAAKvlE,EAAE,GAAGrqE,QAAUqqE,EAAE,GAAGrqE,QACzB6vI,EAAWtuI,KAAKuuI,KAAKH,EAAKA,EAAKC,EAAKA,GACxC,IAAKF,EAQH,OAPAA,EAAY,CACVn3G,EAAG,CACDs3G,SAAUA,EACVE,KAAM,IAAI5jJ,YAGdojJ,IAGF,IAAInjJ,EAAM,IAAID,KAEd,GADeC,EAAMsjJ,EAAUn3G,EAAEw3G,KAClB,GACb,OAEF,MAAMC,EAAY,CAChBpnI,GAAIyhE,EAAE,GAAGtqE,QAAUsqE,EAAE,GAAGtqE,SAAW,EACnC8I,GAAIwhE,EAAE,GAAGrqE,QAAUqqE,EAAE,GAAGrqE,SAAW,GAE/BiwI,EAAcJ,EAAWH,EAAUn3G,EAAEs3G,SAE3CL,EAAYQ,EAAUpnI,EAAGonI,EAAUnnI,EAAGonI,GACtCP,EAAUn3G,EAAI,CACZs3G,SAAUA,EACVE,KAAM3jJ,GAIV,SAASm6B,EAAIp3B,GACXunF,EAAOvH,oBAAoB,YAAa16B,GACnCi7F,IAILD,IACAC,EAAY,MAYd,OATAh5D,EAAOxH,iBAAiB,aAAc0F,GACtC8B,EAAOxH,iBAAiB,WAAY3oD,GAEpC,WACEmwD,EAAOvH,oBAAoB,aAAcyF,GACzC8B,EAAOvH,oBAAoB,YAAa16B,GACxCiiC,EAAOvH,oBAAoB,WAAY5oD,KA6BD2pH,CAA4B,CAChEx5D,SACA64D,aAAc3qJ,KAAKkqJ,YACnBU,YAAa5qJ,KAAKmqJ,aAClBU,WAAY7qJ,KAAKyqJ,e,iCCtHvB,kCAAO,MAAMtzF,EAAgB,CAC3BJ,EACAw0F,EACAC,IAEID,GAAY,EACP5uI,KAAKgK,MAAMowC,GAEbp6C,KAAKsb,OAAO8+B,EAAMy0F,GAAcD,GAAYA,EAAWC,G,iCCVhE,YAEetvF,OACbl6C,iBAAO,EAAGk6C,EAAgB9wB,iBAAkBr3B,IACnC,CACL7R,MAAOg6D,EAAgB7wB,WAAWt3B,GAAGixB,UACrC1gC,MAAO43D,EAAgB7wB,WAAWt3B,GAAGixB,WAAa,iB,2ICkCzC,MAAMymH,UAAuB3rJ,YAC1CC,SAAU,MAAD,EAeHC,KAAKC,MAbPq2B,EAFK,EAELA,aACAwwC,EAHK,EAGLA,eACAC,EAJK,EAILA,eACAC,EALK,EAKLA,YACAsB,EANK,EAMLA,qBACAC,EAPK,EAOLA,kBACAhB,EARK,EAQLA,gBACAE,EATK,EASLA,gBACAC,EAVK,EAULA,aACAc,EAXK,EAWLA,wBACAC,EAZK,EAYLA,qBACAC,EAbK,EAaLA,6BACAC,EAdK,EAcLA,0BAdK,EAsBHvB,YACF9wC,EACAwwC,EACAC,EACAC,GARAqlD,EAlBK,EAkBLA,kBACAx0F,EAnBK,EAmBLA,UACAy0F,EApBK,EAoBLA,kBACAp0F,EArBK,EAqBLA,UAQF,OACE,gBAAC,WAAD,KACE,gBAAC,IAAD,KACE,gBAAC,IAAD,CACEzqB,kBAAmB,gBAAC,QAAD,kBACnBvL,MAAOlC,KAAKC,MAAM6mE,eAClB3kE,SAAU,CAACoI,EAAGwJ,EAAG7R,IACfqlE,EAAgBv7B,SAAS9pC,EAAO,KAAO,IAGxC8f,iBAAO,EAAGsU,EAAaE,qBAAsBziB,IAC5C,MAAM8jB,EAAYvB,EAAaG,aAAa1iB,GAC5C,OACE,gBAAC,IAAD,CACE1P,IAAK0P,EACL7R,MAAO6R,EACPtO,YAAa,mCAAoBoyB,EAAUmN,UAAfjxB,WAKnCs4G,GAAqBx0F,EAAUnB,qBAAuB,GACrD,gBAAC,IAAD,CACEjpB,kBAAmB,gBAAC,QAAD,kBACnBvL,MAAOlC,KAAKC,MAAM8mE,eAClB5kE,SAAU,CAACoI,EAAGwJ,EAAG7R,IACfulE,EAAgBz7B,SAAS9pC,EAAO,KAAO,IAGxC8f,iBAAO,EAAG6V,EAAUnB,qBAAsB3iB,GAEvC,gBAAC,IAAD,CACE7R,MAAO6R,EACP1P,IAAK0P,EACLtO,YAAa,6BAAesO,UAMrCu4G,GACC,gBAAC,IAAD,CACE7+G,kBAAmB,gBAAC,QAAD,cACnBvL,MAAOlC,KAAKC,MAAM+mE,YAClB7kE,SAAU,CAACoI,EAAGwJ,EAAG7R,IACfwlE,EAAa17B,SAAS9pC,EAAO,KAAO,IAGrC8f,iBAAO,EAAGkW,EAAUtB,kBAAmB7iB,GAEpC,gBAAC,IAAD,CACE7R,MAAO6R,EACP1P,IAAK0P,EACLtO,YAAa,yBAAWsO,WAOpC,gBAAC,IAAD,CACEzP,MAAOokE,EACPsgE,cAAc,QACdrlB,QAASr7C,EACTs7C,SAAU,CAACr5G,EAAGF,IAAYm+D,EAAwBn+D,KAEpD,gBAAC,IAAD,CACE/F,MAAOqkE,EACPqgE,cAAc,QACdrlB,QAASp7C,EACTq7C,SAAU,CAACr5G,EAAGF,IAAYo+D,EAAqBp+D,S,iHClI1C,MAAMqhJ,UAA6B3xE,IAAY,eAAD,oBAyC3Dt8D,eAAiB,KACf,MAAME,EAAS3d,KAAK6d,YACdzB,EAASpc,KAAKoc,OAEhBA,GAAUuB,GACZnR,YACEmR,EAAO2mI,wBACPloI,EAAOmoI,kBA7CbvqI,sBAAsBC,GAKpB,SAAKja,KAAKC,MAAMsc,WAAatC,EAAUsC,UAOzCgpC,gBACMvlD,KAAKoc,QAAQpc,KAAKoc,OAAOmpC,gBAG/BgoD,oBACMvtG,KAAKoc,QAAQpc,KAAKoc,OAAOksI,yBAG/BtuE,wBACE,MAAMr8D,EAAS3d,KAAK6d,YACpB,OAAKF,EAEE,eACFo8D,IAAW4hE,4BAA4Bh+H,GAD5C,CAEE8zC,UAAW5lD,YAAoB8R,EAAO6mI,uBACtCC,WAAYzkJ,KAAKoc,OAASpc,KAAKoc,OAAOmoI,gBAAkB,KALtC,GAStB1mI,YAAwB,MAAD,EACW7d,KAAKC,MAA7B2G,EADa,EACbA,QAASqmC,EADI,EACJA,WACjB,OAAKrmC,GAAYA,EAAQoqC,eAAe/D,GAEjCrmC,EAAQiX,UAAUovB,GAFmC,KAiB9DltC,SAAU,MAAD,EACmCC,KAAKC,MAAvC2G,EADD,EACCA,QAASqmC,EADV,EACUA,WAAY1wB,EADtB,EACsBA,SACvBoB,EAAS3d,KAAK6d,YACpB,OAAKF,EAMH,gBAAC,IAAD,iBACM3d,KAAKC,MADX,CAEEuC,IAAK4Z,GAAWpc,KAAKoc,OAASA,EAC9BxV,QAASA,EACT+W,OAAQA,EACRq2E,iBAAkBr2E,EAAO6mI,sBACzBE,kBAAmB74I,YAAoB8R,EAAO2mI,yBAC9CjtG,UAAYjkB,GACVpzB,KAAKC,MAAMo3C,UAAUzwC,EAAS+W,EAAQyV,GAExCkkB,sBAAuBt3C,KAAKC,MAAMq3C,sBAClCE,eAAgBx3C,KAAKC,MAAMu3C,eAC3Bj7B,SAAUA,KAhBL,+CAAuB0wB,EAAvB,c,iCClEb,oEAAO,MAAM0+G,EAAe,CAACC,EAAcC,KACzC,IAAIC,EAAKvX,YAAY/sI,MACrBokJ,IAEAC,EADStX,YAAY/sI,MACPskJ,IAGHve,EAAc,CACzBwe,EACAF,KAEA,MAAMC,EAAKvX,YAAY/sI,MACvB,OAAOukJ,IAAYt2I,KAAKo6F,IACtB,MAAMm8C,EAAKzX,YAAY/sI,MAGvB,OAFAqkJ,EAASG,EAAKF,GAEPj8C,M,iCCZX,oEAMO,MAAM3qB,EAA0B3kF,IACrC,MAAM0rJ,EAAa1rJ,EACnB,OAAI0rJ,EACMj/H,GAAgBi/H,EAAWvrJ,EAAEssB,GAGhC,MASI6/G,EACXtsI,IAEA,MAAM0rJ,EAAa1rJ,EACnB,OAAI0rJ,EACMj/H,GAAgBi/H,EAAWvrJ,EAAEssB,GAG/BA,GAAgBA,I,kBCjC1BzD,EAAOC,QAAU,CACf,MAAS,CACP,YAAe,uKACf,eAAkB,CAChB,CACE,SAAY,SACZ,KAAQ,UAEV,CACE,SAAY,cACZ,KAAQ,cAEV,CACE,SAAY,4BACZ,KAAQ,gBAEV,CACE,SAAY,2BACZ,KAAQ,iBAEV,CACE,SAAY,iBACZ,KAAQ,gBAEV,CACE,SAAY,kBACZ,KAAQ,6BAEV,CACE,SAAY,oBACZ,KAAQ,oBAEV,CACE,SAAY,QACZ,KAAQ,WAId,+BAAgC,CAC9B,YAAe,wEACf,eAAkB,CAChB,CACE,SAAY,oBACZ,KAAQ,oBAEV,CACE,SAAY,SACZ,KAAQ,UAEV,CACE,SAAY,cACZ,KAAQ,cAEV,CACE,SAAY,4BACZ,KAAQ,gBAEV,CACE,SAAY,iBACZ,KAAQ,gBAEV,CACE,SAAY,kBACZ,KAAQ,6BAEV,CACE,SAAY,2BACZ,KAAQ,iBAEV,CACE,SAAY,oBACZ,KAAQ,sBAId,wBAAyB,CACvB,YAAe,kFACf,eAAkB,CAChB,CACE,SAAY,SACZ,KAAQ,UAEV,CACE,SAAY,sBACZ,KAAQ,qBAEV,CACE,SAAY,cACZ,KAAQ,cAEV,CACE,SAAY,oBACZ,KAAQ,oBAEV,CACE,SAAY,4BACZ,KAAQ,gBAEV,CACE,SAAY,qBACZ,KAAQ,cAEV,CACE,SAAY,2BACZ,KAAQ,iBAEV,CACE,SAAY,oBACZ,KAAQ,mBAEV,CACE,SAAY,oBACZ,KAAQ,oBAEV,CACE,SAAY,kBACZ,KAAQ,6BAEV,CACE,SAAY,8BACZ,KAAQ,iBAEV,CACE,SAAY,iBACZ,KAAQ,gBAEV,CACE,SAAY,OACZ,KAAQ,iBAId,UAAa,CACX,YAAe,mEACf,eAAkB,CAChB,CACE,SAAY,cACZ,KAAQ,cAEV,CACE,SAAY,4BACZ,KAAQ,gBAEV,CACE,SAAY,2BACZ,KAAQ,iBAEV,CACE,SAAY,kBACZ,KAAQ,6BAEV,CACE,SAAY,iBACZ,KAAQ,gBAEV,CACE,SAAY,SACZ,KAAQ,UAEV,CACE,SAAY,kCACZ,KAAQ,0BAEV,CACE,SAAY,qBACZ,KAAQ,cAEV,CACE,SAAY,oBACZ,KAAQ,oBAEV,CACE,SAAY,OACZ,KAAQ,eAEV,CACE,SAAY,oBACZ,KAAQ,mBAEV,CACE,SAAY,8BACZ,KAAQ,iBAEV,CACE,SAAY,QACZ,KAAQ,kBAId,4BAA6B,CAC3B,YAAe,gEACf,eAAkB,CAChB,CACE,SAAY,SACZ,KAAQ,UAEV,CACE,SAAY,cACZ,KAAQ,cAEV,CACE,SAAY,uBACZ,KAAQ,uBAEV,CACE,SAAY,oBACZ,KAAQ,mBAEV,CACE,SAAY,iBACZ,KAAQ,gBAEV,CACE,SAAY,2BACZ,KAAQ,iBAEV,CACE,SAAY,iBACZ,KAAQ,iBAEV,CACE,SAAY,OACZ,KAAQ,iBAId,gCAAiC,CAC/B,YAAe,iFACf,eAAkB,CAChB,CACE,SAAY,SACZ,KAAQ,UAEV,CACE,SAAY,cACZ,KAAQ,cAEV,CACE,SAAY,oBACZ,KAAQ,mBAEV,CACE,SAAY,iBACZ,KAAQ,gBAEV,CACE,SAAY,2BACZ,KAAQ,iBAEV,CACE,SAAY,iBACZ,KAAQ,iBAEV,CACE,SAAY,OACZ,KAAQ,iBAId,4BAA6B,CAC3B,YAAe,iEACf,eAAkB,CAChB,CACE,SAAY,SACZ,KAAQ,UAEV,CACE,SAAY,cACZ,KAAQ,cAEV,CACE,SAAY,4BACZ,KAAQ,gBAEV,CACE,SAAY,qBACZ,KAAQ,cAEV,CACE,SAAY,kBACZ,KAAQ,6BAEV,CACE,SAAY,2BACZ,KAAQ,iBAEV,CACE,SAAY,oBACZ,KAAQ,mBAEV,CACE,SAAY,8BACZ,KAAQ,iBAEV,CACE,SAAY,iBACZ,KAAQ,gBAEV,CACE,SAAY,OACZ,KAAQ,eAEV,CACE,SAAY,QACZ,KAAQ,kBAId,qBAAsB,CACpB,YAAe,yFACf,eAAkB,CAChB,CACE,SAAY,cACZ,KAAQ,cAEV,CACE,SAAY,qBACZ,KAAQ,UAEV,CACE,SAAY,qBACZ,KAAQ,qBAEV,CACE,SAAY,kBACZ,KAAQ,6BAEV,CACE,SAAY,oBACZ,KAAQ,mBAEV,CACE,SAAY,iBACZ,KAAQ,gBAEV,CACE,SAAY,oBACZ,KAAQ,oBAEV,CACE,SAAY,2BACZ,KAAQ,mBAId,qCAAsC,CACpC,YAAe,sFACf,eAAkB,CAChB,CACE,SAAY,SACZ,KAAQ,UAEV,CACE,SAAY,gCACZ,KAAQ,qBAEV,CACE,SAAY,sBACZ,KAAQ,qBAEV,CACE,SAAY,kBACZ,KAAQ,kBAEV,CACE,SAAY,cACZ,KAAQ,cAEV,CACE,SAAY,kCACZ,KAAQ,0BAEV,CACE,SAAY,oBACZ,KAAQ,oBAEV,CACE,SAAY,SACZ,KAAQ,kBAEV,CACE,SAAY,4BACZ,KAAQ,gBAEV,CACE,SAAY,oBACZ,KAAQ,mBAEV,CACE,SAAY,kBACZ,KAAQ,6BAEV,CACE,SAAY,8BACZ,KAAQ,iBAEV,CACE,SAAY,2BACZ,KAAQ,iBAEV,CACE,SAAY,qBACZ,KAAQ,cAEV,CACE,SAAY,oBACZ,KAAQ,oBAEV,CACE,SAAY,QACZ,KAAQ,gBAEV,CACE,SAAY,iBACZ,KAAQ,kBAId,iBAAkB,CAChB,YAAe,+GACf,eAAkB,CAChB,CACE,SAAY,SACZ,KAAQ,UAEV,CACE,SAAY,sBACZ,KAAQ,qBAEV,CACE,SAAY,cACZ,KAAQ,cAEV,CACE,SAAY,oBACZ,KAAQ,mBAEV,CACE,SAAY,kBACZ,KAAQ,6BAEV,CACE,SAAY,2BACZ,KAAQ,mBAId,yBAA0B,CACxB,YAAe,2FACf,eAAkB,CAChB,CACE,SAAY,cACZ,KAAQ,cAEV,CACE,SAAY,SACZ,KAAQ,UAEV,CACE,SAAY,sBACZ,KAAQ,qBAEV,CACE,SAAY,4BACZ,KAAQ,gBAEV,CACE,SAAY,iBACZ,KAAQ,gBAEV,CACE,SAAY,8BACZ,KAAQ,iBAEV,CACE,SAAY,oBACZ,KAAQ,oBAEV,CACE,SAAY,gCACZ,KAAQ,qBAEV,CACE,SAAY,qBACZ,KAAQ,YAEV,CACE,SAAY,oBACZ,KAAQ,oBAEV,CACE,SAAY,2BACZ,KAAQ,iBAEV,CACE,SAAY,kBACZ,KAAQ,6BAEV,CACE,SAAY,iBACZ,KAAQ,mBAId,SAAY,CACV,YAAe,4HACf,eAAkB,CAChB,CACE,SAAY,cACZ,KAAQ,cAEV,CACE,SAAY,2BACZ,KAAQ,iBAEV,CACE,SAAY,iBACZ,KAAQ,gBAEV,CACE,SAAY,4BACZ,KAAQ,gBAEV,CACE,SAAY,SACZ,KAAQ,UAEV,CACE,SAAY,kBACZ,KAAQ,kBAEV,CACE,SAAY,GACZ,KAAQ,IAEV,CACE,SAAY,oBACZ,KAAQ,mBAEV,CACE,SAAY,kBACZ,KAAQ,6BAEV,CACE,SAAY,oBACZ,KAAQ,oBAEV,CACE,SAAY,mBACZ,KAAQ,0BAEV,CACE,SAAY,qBACZ,KAAQ,cAId,QAAW,CACT,YAAe,wDACf,eAAkB,CAChB,CACE,SAAY,SACZ,KAAQ,UAEV,CACE,SAAY,cACZ,KAAQ,cAEV,CACE,SAAY,2BACZ,KAAQ,iBAEV,CACE,SAAY,iBACZ,KAAQ,gBAEV,CACE,SAAY,4BACZ,KAAQ,kBAId,2BAA4B,CAC1B,YAAe,yFACf,eAAkB,CAChB,CACE,SAAY,SACZ,KAAQ,UAEV,CACE,SAAY,sBACZ,KAAQ,qBAEV,CACE,SAAY,cACZ,KAAQ,cAEV,CACE,SAAY,qBACZ,KAAQ,YAEV,CACE,SAAY,4BACZ,KAAQ,gBAEV,CACE,SAAY,iBACZ,KAAQ,gBAEV,CACE,SAAY,kBACZ,KAAQ,6BAEV,CACE,SAAY,2BACZ,KAAQ,iBAEV,CACE,SAAY,UACZ,KAAQ,iBAId,cAAe,CACb,YAAe,oCACf,eAAkB,CAChB,CACE,SAAY,SACZ,KAAQ,UAEV,CACE,SAAY,cACZ,KAAQ,cAEV,CACE,SAAY,qBACZ,KAAQ,YAEV,CACE,SAAY,4BACZ,KAAQ,gBAEV,CACE,SAAY,kBACZ,KAAQ,6BAEV,CACE,SAAY,oBACZ,KAAQ,mBAEV,CACE,SAAY,2BACZ,KAAQ,iBAEV,CACE,SAAY,8BACZ,KAAQ,mBAId,+BAAgC,CAC9B,YAAe,gDACf,eAAkB,CAChB,CACE,SAAY,SACZ,KAAQ,UAEV,CACE,SAAY,cACZ,KAAQ,cAEV,CACE,SAAY,iBACZ,KAAQ,gBAEV,CACE,SAAY,kBACZ,KAAQ,6BAEV,CACE,SAAY,2BACZ,KAAQ,mBAId,4BAA6B,CAC3B,YAAe,+DACf,eAAkB,CAChB,CACE,SAAY,SACZ,KAAQ,UAEV,CACE,SAAY,cACZ,KAAQ,cAEV,CACE,SAAY,oBACZ,KAAQ,mBAEV,CACE,SAAY,iBACZ,KAAQ,gBAEV,CACE,SAAY,kBACZ,KAAQ,6BAEV,CACE,SAAY,2BACZ,KAAQ,mBAId,0BAA2B,CACzB,YAAe,gFACf,eAAkB,CAChB,CACE,SAAY,SACZ,KAAQ,UAEV,CACE,SAAY,cACZ,KAAQ,cAEV,CACE,SAAY,iBACZ,KAAQ,gBAEV,CACE,SAAY,kBACZ,KAAQ,6BAEV,CACE,SAAY,2BACZ,KAAQ,mBAId,0BAA2B,CACzB,YAAe,6IACf,eAAkB,CAChB,CACE,SAAY,SACZ,KAAQ,UAEV,CACE,SAAY,cACZ,KAAQ,cAEV,CACE,SAAY,kBACZ,KAAQ,6BAEV,CACE,SAAY,iBACZ,KAAQ,gBAEV,CACE,SAAY,oBACZ,KAAQ,mBAEV,CACE,SAAY,2BACZ,KAAQ,iBAEV,CACE,SAAY,oBACZ,KAAQ,sBAId,sBAAuB,CACrB,YAAe,wJACf,eAAkB,CAChB,CACE,SAAY,SACZ,KAAQ,UAEV,CACE,SAAY,kCACZ,KAAQ,0BAEV,CACE,SAAY,2BACZ,KAAQ,iBAEV,CACE,SAAY,oBACZ,KAAQ,sBAId,sBAAuB,CACrB,YAAe,mGACf,eAAkB,CAChB,CACE,SAAY,SACZ,KAAQ,UAEV,CACE,SAAY,cACZ,KAAQ,cAEV,CACE,SAAY,iBACZ,KAAQ,gBAEV,CACE,SAAY,2BACZ,KAAQ,iBAEV,CACE,SAAY,oBACZ,KAAQ,oBAEV,CACE,SAAY,4BACZ,KAAQ,gBAEV,CACE,SAAY,sBACZ,KAAQ,qBAEV,CACE,SAAY,oBACZ,KAAQ,oBAEV,CACE,SAAY,SACZ,KAAQ,kBAEV,CACE,SAAY,oBACZ,KAAQ,mBAEV,CACE,SAAY,kBACZ,KAAQ,6BAEV,CACE,SAAY,qBACZ,KAAQ,cAEV,CACE,SAAY,QACZ,KAAQ,gBAEV,CACE,SAAY,8BACZ,KAAQ,mBAId,mBAAoB,CAClB,YAAe,iGACf,eAAkB,CAChB,CACE,SAAY,cACZ,KAAQ,cAEV,CACE,SAAY,4BACZ,KAAQ,gBAEV,CACE,SAAY,oBACZ,KAAQ,sBAId,gCAAiC,CAC/B,YAAe,6DACf,eAAkB,CAChB,CACE,SAAY,SACZ,KAAQ,UAEV,CACE,SAAY,cACZ,KAAQ,cAEV,CACE,SAAY,iBACZ,KAAQ,gBAEV,CACE,SAAY,kBACZ,KAAQ,6BAEV,CACE,SAAY,2BACZ,KAAQ,mBAId,uBAAwB,CACtB,YAAe,2DACf,eAAkB,CAChB,CACE,SAAY,SACZ,KAAQ,UAEV,CACE,SAAY,cACZ,KAAQ,cAEV,CACE,SAAY,iBACZ,KAAQ,gBAEV,CACE,SAAY,kBACZ,KAAQ,6BAEV,CACE,SAAY,oBACZ,KAAQ,oBAEV,CACE,SAAY,2BACZ,KAAQ,mBAId,cAAe,CACb,YAAe,2DACf,eAAkB,CAChB,CACE,SAAY,cACZ,KAAQ,cAEV,CACE,SAAY,4BACZ,KAAQ,kBAId,uBAAwB,CACtB,YAAe,6DACf,eAAkB,CAChB,CACE,SAAY,SACZ,KAAQ,UAEV,CACE,SAAY,cACZ,KAAQ,cAEV,CACE,SAAY,4BACZ,KAAQ,gBAEV,CACE,SAAY,iBACZ,KAAQ,gBAEV,CACE,SAAY,2BACZ,KAAQ,mBAId,qCAAsC,CACpC,YAAe,qGACf,eAAkB,CAChB,CACE,SAAY,cACZ,KAAQ,cAEV,CACE,SAAY,SACZ,KAAQ,UAEV,CACE,SAAY,4BACZ,KAAQ,gBAEV,CACE,SAAY,oBACZ,KAAQ,mBAEV,CACE,SAAY,2BACZ,KAAQ,iBAEV,CACE,SAAY,iBACZ,KAAQ,gBAEV,CACE,SAAY,oBACZ,KAAQ,sBAId,8BAA+B,CAC7B,YAAe,0EACf,eAAkB,CAChB,CACE,SAAY,SACZ,KAAQ,UAEV,CACE,SAAY,cACZ,KAAQ,cAEV,CACE,SAAY,4BACZ,KAAQ,gBAEV,CACE,SAAY,iBACZ,KAAQ,iBAEV,CACE,SAAY,2BACZ,KAAQ,iBAEV,CACE,SAAY,kBACZ,KAAQ,6BAEV,CACE,SAAY,8BACZ,KAAQ,mBAId,6BAA8B,CAC5B,YAAe,yEACf,eAAkB,CAChB,CACE,SAAY,SACZ,KAAQ,UAEV,CACE,SAAY,4BACZ,KAAQ,gBAEV,CACE,SAAY,iBACZ,KAAQ,iBAEV,CACE,SAAY,2BACZ,KAAQ,mBAId,mBAAoB,CAClB,YAAe,uCACf,eAAkB,CAChB,CACE,SAAY,cACZ,KAAQ,cAEV,CACE,SAAY,SACZ,KAAQ,UAEV,CACE,SAAY,2BACZ,KAAQ,iBAEV,CACE,SAAY,iBACZ,KAAQ,gBAEV,CACE,SAAY,mBACZ,KAAQ,qBAId,0BAA2B,CACzB,YAAe,8HACf,eAAkB,CAChB,CACE,SAAY,SACZ,KAAQ,UAEV,CACE,SAAY,sBACZ,KAAQ,qBAEV,CACE,SAAY,cACZ,KAAQ,cAEV,CACE,SAAY,gCACZ,KAAQ,qBAEV,CACE,SAAY,qBACZ,KAAQ,UAEV,CACE,SAAY,oBACZ,KAAQ,oBAEV,CACE,SAAY,SACZ,KAAQ,kBAEV,CACE,SAAY,2BACZ,KAAQ,iBAEV,CACE,SAAY,kBACZ,KAAQ,6BAEV,CACE,SAAY,4BACZ,KAAQ,gBAEV,CACE,SAAY,+BACZ,KAAQ,gBAEV,CACE,SAAY,oBACZ,KAAQ,mBAEV,CACE,SAAY,qBACZ,KAAQ,cAEV,CACE,SAAY,OACZ,KAAQ,eAEV,CACE,SAAY,8BACZ,KAAQ,iBAEV,CACE,SAAY,QACZ,KAAQ,gBAEV,CACE,SAAY,iBACZ,KAAQ,gBAEV,CACE,SAAY,oBACZ,KAAQ,sBAId,6BAA8B,CAC5B,YAAe,sLACf,eAAkB,CAChB,CACE,SAAY,SACZ,KAAQ,UAEV,CACE,SAAY,cACZ,KAAQ,cAEV,CACE,SAAY,sBACZ,KAAQ,qBAEV,CACE,SAAY,gCACZ,KAAQ,qBAEV,CACE,SAAY,oBACZ,KAAQ,oBAEV,CACE,SAAY,qBACZ,KAAQ,YAEV,CACE,SAAY,4BACZ,KAAQ,gBAEV,CACE,SAAY,qBACZ,KAAQ,cAEV,CACE,SAAY,4BACZ,KAAQ,mBAEV,CACE,SAAY,oBACZ,KAAQ,oBAEV,CACE,SAAY,kBACZ,KAAQ,6BAEV,CACE,SAAY,oBACZ,KAAQ,mBAEV,CACE,SAAY,2BACZ,KAAQ,iBAEV,CACE,SAAY,iBACZ,KAAQ,gBAEV,CACE,SAAY,8BACZ,KAAQ,iBAEV,CACE,SAAY,kBACZ,KAAQ,iBAEV,CACE,SAAY,mBACZ,KAAQ,mBAEV,CACE,SAAY,OACZ,KAAQ,iBAId,yBAA0B,CACxB,YAAe,oEACf,eAAkB,CAChB,CACE,SAAY,SACZ,KAAQ,UAEV,CACE,SAAY,cACZ,KAAQ,cAEV,CACE,SAAY,iBACZ,KAAQ,gBAEV,CACE,SAAY,kBACZ,KAAQ,6BAEV,CACE,SAAY,oBACZ,KAAQ,oBAEV,CACE,SAAY,8BACZ,KAAQ,mBAId,kCAAmC,CACjC,YAAe,qEACf,eAAkB,CAChB,CACE,SAAY,SACZ,KAAQ,UAEV,CACE,SAAY,cACZ,KAAQ,cAEV,CACE,SAAY,iBACZ,KAAQ,gBAEV,CACE,SAAY,2BACZ,KAAQ,iBAEV,CACE,SAAY,kBACZ,KAAQ,+BAId,oBAAqB,CACnB,YAAe,sKACf,eAAkB,CAChB,CACE,SAAY,SACZ,KAAQ,UAEV,CACE,SAAY,cACZ,KAAQ,cAEV,CACE,SAAY,oBACZ,KAAQ,oBAEV,CACE,SAAY,4BACZ,KAAQ,gBAEV,CACE,SAAY,qBACZ,KAAQ,cAEV,CACE,SAAY,oBACZ,KAAQ,oBAEV,CACE,SAAY,kBACZ,KAAQ,6BAEV,CACE,SAAY,oBACZ,KAAQ,mBAEV,CACE,SAAY,2BACZ,KAAQ,iBAEV,CACE,SAAY,8BACZ,KAAQ,iBAEV,CACE,SAAY,OACZ,KAAQ,eAEV,CACE,SAAY,iBACZ,KAAQ,kBAId,WAAY,CACV,YAAe,iDACf,eAAkB,CAChB,CACE,SAAY,cACZ,KAAQ,cAEV,CACE,SAAY,iBACZ,KAAQ,gBAEV,CACE,SAAY,4BACZ,KAAQ,kBAId,wBAAyB,CACvB,YAAe,2IACf,eAAkB,CAChB,CACE,SAAY,SACZ,KAAQ,UAEV,CACE,SAAY,cACZ,KAAQ,cAEV,CACE,SAAY,4BACZ,KAAQ,gBAEV,CACE,SAAY,iBACZ,KAAQ,gBAEV,CACE,SAAY,2BACZ,KAAQ,iBAEV,CACE,SAAY,kBACZ,KAAQ,6BAEV,CACE,SAAY,oBACZ,KAAQ,oBAEV,CACE,SAAY,yBACZ,KAAQ,0BAId,8BAA+B,CAC7B,YAAe,0EACf,eAAkB,CAChB,CACE,SAAY,SACZ,KAAQ,UAEV,CACE,SAAY,cACZ,KAAQ,cAEV,CACE,SAAY,2BACZ,KAAQ,iBAEV,CACE,SAAY,iBACZ,KAAQ,gBAEV,CACE,SAAY,4BACZ,KAAQ,gBAEV,CACE,SAAY,oBACZ,KAAQ,mBAEV,CACE,SAAY,oBACZ,KAAQ,mBAEV,CACE,SAAY,oBACZ,KAAQ,oBAEV,CACE,SAAY,aACZ,KAAQ,gBAId,iBAAkB,CAChB,YAAe,2GACf,eAAkB,CAChB,CACE,SAAY,SACZ,KAAQ,UAEV,CACE,SAAY,cACZ,KAAQ,cAEV,CACE,SAAY,iBACZ,KAAQ,gBAEV,CACE,SAAY,kBACZ,KAAQ,6BAEV,CACE,SAAY,2BACZ,KAAQ,iBAEV,CACE,SAAY,4BACZ,KAAQ,gBAEV,CACE,SAAY,oBACZ,KAAQ,sBAId,cAAe,CACb,YAAe,gHACf,eAAkB,CAChB,CACE,SAAY,SACZ,KAAQ,UAEV,CACE,SAAY,sBACZ,KAAQ,qBAEV,CACE,SAAY,cACZ,KAAQ,cAEV,CACE,SAAY,GACZ,KAAQ,IAEV,CACE,SAAY,4BACZ,KAAQ,gBAEV,CACE,SAAY,iBACZ,KAAQ,gBAEV,CACE,SAAY,2BACZ,KAAQ,iBAEV,CACE,SAAY,oBACZ,KAAQ,oBAEV,CACE,SAAY,kBACZ,KAAQ,6BAEV,CACE,SAAY,QACZ,KAAQ,gBAEV,CACE,SAAY,UACZ,KAAQ,eAEV,CACE,SAAY,oBACZ,KAAQ,oBAEV,CACE,SAAY,kCACZ,KAAQ,0BAEV,CACE,SAAY,oBACZ,KAAQ,mBAEV,CACE,SAAY,qBACZ,KAAQ,cAEV,CACE,SAAY,OACZ,KAAQ,iBAId,QAAW,CACT,YAAe,6DACf,eAAkB,CAChB,CACE,SAAY,SACZ,KAAQ,UAEV,CACE,SAAY,cACZ,KAAQ,cAEV,CACE,SAAY,4BACZ,KAAQ,gBAEV,CACE,SAAY,QACZ,KAAQ,gBAEV,CACE,SAAY,iBACZ,KAAQ,gBAEV,CACE,SAAY,oBACZ,KAAQ,oBAEV,CACE,SAAY,8BACZ,KAAQ,iBAEV,CACE,SAAY,sBACZ,KAAQ,qBAEV,CACE,SAAY,gCACZ,KAAQ,qBAEV,CACE,SAAY,kBACZ,KAAQ,kBAEV,CACE,SAAY,oBACZ,KAAQ,oBAEV,CACE,SAAY,OACZ,KAAQ,eAEV,CACE,SAAY,kBACZ,KAAQ,6BAEV,CACE,SAAY,2BACZ,KAAQ,iBAEV,CACE,SAAY,oBACZ,KAAQ,qBAId,mBAAoB,CAClB,YAAe,8HACf,eAAkB,CAChB,CACE,SAAY,SACZ,KAAQ,UAEV,CACE,SAAY,GACZ,KAAQ,IAEV,CACE,SAAY,2BACZ,KAAQ,iBAEV,CACE,SAAY,iBACZ,KAAQ,gBAEV,CACE,SAAY,4BACZ,KAAQ,gBAEV,CACE,SAAY,cACZ,KAAQ,cAEV,CACE,SAAY,kBACZ,KAAQ,kBAEV,CACE,SAAY,oBACZ,KAAQ,mBAEV,CACE,SAAY,OACZ,KAAQ,eAEV,CACE,SAAY,QACZ,KAAQ,gBAEV,CACE,SAAY,oBACZ,KAAQ,sBAId,aAAc,CACZ,YAAe,2HACf,eAAkB,CAChB,CACE,SAAY,SACZ,KAAQ,UAEV,CACE,SAAY,sBACZ,KAAQ,qBAEV,CACE,SAAY,cACZ,KAAQ,cAEV,CACE,SAAY,oBACZ,KAAQ,oBAEV,CACE,SAAY,SACZ,KAAQ,kBAEV,CACE,SAAY,4BACZ,KAAQ,gBAEV,CACE,SAAY,oBACZ,KAAQ,mBAEV,CACE,SAAY,kBACZ,KAAQ,6BAEV,CACE,SAAY,2BACZ,KAAQ,iBAEV,CACE,SAAY,qBACZ,KAAQ,cAEV,CACE,SAAY,oBACZ,KAAQ,oBAEV,CACE,SAAY,QACZ,KAAQ,gBAEV,CACE,SAAY,8BACZ,KAAQ,iBAEV,CACE,SAAY,iBACZ,KAAQ,kBAId,gCAAiC,CAC/B,YAAe,gEACf,eAAkB,CAChB,CACE,SAAY,SACZ,KAAQ,UAEV,CACE,SAAY,4BACZ,KAAQ,gBAEV,CACE,SAAY,2BACZ,KAAQ,iBAEV,CACE,SAAY,oBACZ,KAAQ,sBAId,mBAAoB,CAClB,YAAe,kHACf,eAAkB,CAChB,CACE,SAAY,SACZ,KAAQ,UAEV,CACE,SAAY,cACZ,KAAQ,cAEV,CACE,SAAY,4BACZ,KAAQ,gBAEV,CACE,SAAY,iBACZ,KAAQ,gBAEV,CACE,SAAY,2BACZ,KAAQ,iBAEV,CACE,SAAY,oBACZ,KAAQ,oBAEV,CACE,SAAY,8BACZ,KAAQ,iBAEV,CACE,SAAY,YACZ,KAAQ,aAEV,CACE,SAAY,kBACZ,KAAQ,6BAEV,CACE,SAAY,oBACZ,KAAQ,mBAEV,CACE,SAAY,iBACZ,KAAQ,iBAEV,CACE,SAAY,UACZ,KAAQ,iBAId,iBAAkB,CAChB,YAAe,0CACf,eAAkB,CAChB,CACE,SAAY,SACZ,KAAQ,UAEV,CACE,SAAY,sBACZ,KAAQ,qBAEV,CACE,SAAY,oBACZ,KAAQ,2BAEV,CACE,SAAY,iBACZ,KAAQ,gBAEV,CACE,SAAY,2BACZ,KAAQ,iBAEV,CACE,SAAY,4BACZ,KAAQ,gBAEV,CACE,SAAY,8BACZ,KAAQ,mBAId,kCAAmC,CACjC,YAAe,8FACf,eAAkB,CAChB,CACE,SAAY,SACZ,KAAQ,UAEV,CACE,SAAY,sBACZ,KAAQ,qBAEV,CACE,SAAY,cACZ,KAAQ,cAEV,CACE,SAAY,oBACZ,KAAQ,oBAEV,CACE,SAAY,SACZ,KAAQ,kBAEV,CACE,SAAY,4BACZ,KAAQ,gBAEV,CACE,SAAY,oBACZ,KAAQ,mBAEV,CACE,SAAY,kBACZ,KAAQ,6BAEV,CACE,SAAY,2BACZ,KAAQ,iBAEV,CACE,SAAY,qBACZ,KAAQ,cAEV,CACE,SAAY,QACZ,KAAQ,gBAEV,CACE,SAAY,8BACZ,KAAQ,iBAEV,CACE,SAAY,iBACZ,KAAQ,gBAEV,CACE,SAAY,oBACZ,KAAQ,sBAId,oBAAqB,CACnB,YAAe,gGACf,eAAkB,CAChB,CACE,SAAY,SACZ,KAAQ,UAEV,CACE,SAAY,cACZ,KAAQ,cAEV,CACE,SAAY,4BACZ,KAAQ,gBAEV,CACE,SAAY,oBACZ,KAAQ,oBAEV,CACE,SAAY,2BACZ,KAAQ,iBAEV,CACE,SAAY,oBACZ,KAAQ,mBAEV,CACE,SAAY,iBACZ,KAAQ,gBAEV,CACE,SAAY,kBACZ,KAAQ,6BAEV,CACE,SAAY,OACZ,KAAQ,eAEV,CACE,SAAY,QACZ,KAAQ,kBAId,eAAgB,CACd,YAAe,qKACf,eAAkB,CAChB,CACE,SAAY,cACZ,KAAQ,cAEV,CACE,SAAY,2BACZ,KAAQ,iBAEV,CACE,SAAY,kBACZ,KAAQ,6BAEV,CACE,SAAY,iBACZ,KAAQ,gBAEV,CACE,SAAY,oBACZ,KAAQ,oBAEV,CACE,SAAY,4BACZ,KAAQ,gBAEV,CACE,SAAY,oBACZ,KAAQ,oBAEV,CACE,SAAY,SACZ,KAAQ,UAEV,CACE,SAAY,sBACZ,KAAQ,qBAEV,CACE,SAAY,qBACZ,KAAQ,qBAEV,CACE,SAAY,oBACZ,KAAQ,mBAEV,CACE,SAAY,8BACZ,KAAQ,iBAEV,CACE,SAAY,UACZ,KAAQ,eAEV,CACE,SAAY,GACZ,KAAQ,MAId,yBAA0B,CACxB,YAAe,oEACf,eAAkB,CAChB,CACE,SAAY,SACZ,KAAQ,UAEV,CACE,SAAY,cACZ,KAAQ,cAEV,CACE,SAAY,4BACZ,KAAQ,gBAEV,CACE,SAAY,UACZ,KAAQ,eAEV,CACE,SAAY,iBACZ,KAAQ,gBAEV,CACE,SAAY,kBACZ,KAAQ,6BAEV,CACE,SAAY,2BACZ,KAAQ,mBAId,sBAAuB,CACrB,YAAe,wFACf,eAAkB,CAChB,CACE,SAAY,SACZ,KAAQ,UAEV,CACE,SAAY,cACZ,KAAQ,cAEV,CACE,SAAY,4BACZ,KAAQ,gBAEV,CACE,SAAY,kBACZ,KAAQ,6BAEV,CACE,SAAY,oBACZ,KAAQ,mBAEV,CACE,SAAY,iBACZ,KAAQ,gBAEV,CACE,SAAY,oBACZ,KAAQ,sBAId,OAAU,CACR,YAAe,8DACf,eAAkB,CAChB,CACE,SAAY,SACZ,KAAQ,UAEV,CACE,SAAY,4BACZ,KAAQ,gBAEV,CACE,SAAY,2BACZ,KAAQ,iBAEV,CACE,SAAY,iBACZ,KAAQ,iBAEV,CACE,SAAY,8BACZ,KAAQ,mBAId,yBAA0B,CACxB,YAAe,8EACf,eAAkB,CAChB,CACE,SAAY,cACZ,KAAQ,cAEV,CACE,SAAY,qBACZ,KAAQ,qBAEV,CACE,SAAY,oBACZ,KAAQ,mBAEV,CACE,SAAY,iBACZ,KAAQ,gBAEV,CACE,SAAY,kBACZ,KAAQ,6BAEV,CACE,SAAY,2BACZ,KAAQ,mBAId,uCAAwC,CACtC,YAAe,oHACf,eAAkB,CAChB,CACE,SAAY,cACZ,KAAQ,cAEV,CACE,SAAY,SACZ,KAAQ,UAEV,CACE,SAAY,GACZ,KAAQ,MAId,0BAA2B,CACzB,YAAe,2EACf,eAAkB,CAChB,CACE,SAAY,SACZ,KAAQ,UAEV,CACE,SAAY,cACZ,KAAQ,cAEV,CACE,SAAY,sBACZ,KAAQ,qBAEV,CACE,SAAY,qBACZ,KAAQ,qBAEV,CACE,SAAY,4BACZ,KAAQ,gBAEV,CACE,SAAY,kBACZ,KAAQ,6BAEV,CACE,SAAY,8BACZ,KAAQ,iBAEV,CACE,SAAY,oBACZ,KAAQ,sBAId,6BAA8B,CAC5B,YAAe,0EACf,eAAkB,CAChB,CACE,SAAY,SACZ,KAAQ,UAEV,CACE,SAAY,4BACZ,KAAQ,gBAEV,CACE,SAAY,oBACZ,KAAQ,oBAEV,CACE,SAAY,2BACZ,KAAQ,iBAEV,CACE,SAAY,kBACZ,KAAQ,+BAId,wBAAyB,CACvB,YAAe,qEACf,eAAkB,CAChB,CACE,SAAY,SACZ,KAAQ,UAEV,CACE,SAAY,cACZ,KAAQ,cAEV,CACE,SAAY,oBACZ,KAAQ,oBAEV,CACE,SAAY,2BACZ,KAAQ,mBAId,8BAA+B,CAC7B,YAAe,2EACf,eAAkB,CAChB,CACE,SAAY,SACZ,KAAQ,UAEV,CACE,SAAY,cACZ,KAAQ,cAEV,CACE,SAAY,oBACZ,KAAQ,mBAEV,CACE,SAAY,iBACZ,KAAQ,gBAEV,CACE,SAAY,kBACZ,KAAQ,6BAEV,CACE,SAAY,2BACZ,KAAQ,mBAId,+BAAgC,CAC9B,YAAe,kGACf,eAAkB,CAChB,CACE,SAAY,SACZ,KAAQ,UAEV,CACE,SAAY,sBACZ,KAAQ,qBAEV,CACE,SAAY,qBACZ,KAAQ,YAEV,CACE,SAAY,iBACZ,KAAQ,gBAEV,CACE,SAAY,oBACZ,KAAQ,oBAEV,CACE,SAAY,2BACZ,KAAQ,mBAId,2BAA4B,CAC1B,YAAe,wEACf,eAAkB,CAChB,CACE,SAAY,SACZ,KAAQ,UAEV,CACE,SAAY,cACZ,KAAQ,cAEV,CACE,SAAY,oBACZ,KAAQ,mBAEV,CACE,SAAY,iBACZ,KAAQ,gBAEV,CACE,SAAY,kBACZ,KAAQ,6BAEV,CACE,SAAY,2BACZ,KAAQ,mBAId,sBAAuB,CACrB,YAAe,kIACf,eAAkB,CAChB,CACE,SAAY,cACZ,KAAQ,cAEV,CACE,SAAY,4BACZ,KAAQ,gBAEV,CACE,SAAY,UACZ,KAAQ,eAEV,CACE,SAAY,2BACZ,KAAQ,iBAEV,CACE,SAAY,iBACZ,KAAQ,gBAEV,CACE,SAAY,oBACZ,KAAQ,oBAEV,CACE,SAAY,kBACZ,KAAQ,+BAId,uCAAwC,CACtC,YAAe,qHACf,eAAkB,CAChB,CACE,SAAY,SACZ,KAAQ,UAEV,CACE,SAAY,sBACZ,KAAQ,qBAEV,CACE,SAAY,cACZ,KAAQ,cAEV,CACE,SAAY,oBACZ,KAAQ,oBAEV,CACE,SAAY,SACZ,KAAQ,kBAEV,CACE,SAAY,4BACZ,KAAQ,gBAEV,CACE,SAAY,oBACZ,KAAQ,mBAEV,CACE,SAAY,kBACZ,KAAQ,6BAEV,CACE,SAAY,2BACZ,KAAQ,iBAEV,CACE,SAAY,qBACZ,KAAQ,cAEV,CACE,SAAY,QACZ,KAAQ,gBAEV,CACE,SAAY,8BACZ,KAAQ,iBAEV,CACE,SAAY,iBACZ,KAAQ,gBAEV,CACE,SAAY,oBACZ,KAAQ,oBAEV,CACE,SAAY,GACZ,KAAQ,MAId,WAAc,CACZ,YAAe,+EACf,eAAkB,CAChB,CACE,SAAY,SACZ,KAAQ,UAEV,CACE,SAAY,cACZ,KAAQ,cAEV,CACE,SAAY,iBACZ,KAAQ,gBAEV,CACE,SAAY,2BACZ,KAAQ,mBAId,iBAAkB,CAChB,YAAe,yEACf,eAAkB,CAChB,CACE,SAAY,SACZ,KAAQ,UAEV,CACE,SAAY,cACZ,KAAQ,cAEV,CACE,SAAY,qBACZ,KAAQ,YAEV,CACE,SAAY,kBACZ,KAAQ,6BAEV,CACE,SAAY,2BACZ,KAAQ,iBAEV,CACE,SAAY,oBACZ,KAAQ,qBAId,mBAAoB,CAClB,YAAe,yGACf,eAAkB,CAChB,CACE,SAAY,SACZ,KAAQ,UAEV,CACE,SAAY,cACZ,KAAQ,cAEV,CACE,SAAY,iBACZ,KAAQ,gBAEV,CACE,SAAY,kBACZ,KAAQ,6BAEV,CACE,SAAY,2BACZ,KAAQ,iBAEV,CACE,SAAY,oBACZ,KAAQ,sBAId,iBAAkB,CAChB,YAAe,6KACf,eAAkB,CAChB,CACE,SAAY,SACZ,KAAQ,UAEV,CACE,SAAY,cACZ,KAAQ,cAEV,CACE,SAAY,4BACZ,KAAQ,gBAEV,CACE,SAAY,2BACZ,KAAQ,iBAEV,CACE,SAAY,iBACZ,KAAQ,gBAEV,CACE,SAAY,kBACZ,KAAQ,+BAId,sBAAuB,CACrB,YAAe,kEACf,eAAkB,CAChB,CACE,SAAY,cACZ,KAAQ,cAEV,CACE,SAAY,iBACZ,KAAQ,gBAEV,CACE,SAAY,kBACZ,KAAQ,6BAEV,CACE,SAAY,UACZ,KAAQ,iBAId,MAAS,CACP,YAAe,+HACf,eAAkB,CAChB,CACE,SAAY,SACZ,KAAQ,UAEV,CACE,SAAY,cACZ,KAAQ,cAEV,CACE,SAAY,kBACZ,KAAQ,kBAEV,CACE,SAAY,kBACZ,KAAQ,SAEV,CACE,SAAY,4BACZ,KAAQ,gBAEV,CACE,SAAY,2BACZ,KAAQ,iBAEV,CACE,SAAY,oBACZ,KAAQ,oBAEV,CACE,SAAY,iBACZ,KAAQ,gBAEV,CACE,SAAY,OACZ,KAAQ,eAEV,CACE,SAAY,kBACZ,KAAQ,6BAEV,CACE,SAAY,8BACZ,KAAQ,iBAEV,CACE,SAAY,QACZ,KAAQ,kBAId,SAAY,CACV,YAAe,0HACf,eAAkB,CAChB,CACE,SAAY,SACZ,KAAQ,UAEV,CACE,SAAY,oBACZ,KAAQ,mBAEV,CACE,SAAY,2BACZ,KAAQ,iBAEV,CACE,SAAY,8BACZ,KAAQ,mBAId,qBAAsB,CACpB,YAAe,4IACf,eAAkB,CAChB,CACE,SAAY,SACZ,KAAQ,UAEV,CACE,SAAY,cACZ,KAAQ,cAEV,CACE,SAAY,oBACZ,KAAQ,oBAEV,CACE,SAAY,4BACZ,KAAQ,gBAEV,CACE,SAAY,oBACZ,KAAQ,mBAEV,CACE,SAAY,2BACZ,KAAQ,iBAEV,CACE,SAAY,8BACZ,KAAQ,mBAId,sBAAuB,CACrB,YAAe,mGACf,eAAkB,CAChB,CACE,SAAY,SACZ,KAAQ,UAEV,CACE,SAAY,cACZ,KAAQ,cAEV,CACE,SAAY,4BACZ,KAAQ,gBAEV,CACE,SAAY,kBACZ,KAAQ,6BAEV,CACE,SAAY,oBACZ,KAAQ,mBAEV,CACE,SAAY,iBACZ,KAAQ,gBAEV,CACE,SAAY,oBACZ,KAAQ,oBAEV,CACE,SAAY,0BACZ,KAAQ,oBAId,oBAAqB,CACnB,YAAe,oFACf,eAAkB,CAChB,CACE,SAAY,cACZ,KAAQ,cAEV,CACE,SAAY,4BACZ,KAAQ,gBAEV,CACE,SAAY,0BACZ,KAAQ,oBAId,uBAAwB,CACtB,YAAe,sDACf,eAAkB,CAChB,CACE,SAAY,kBACZ,KAAQ,kBAEV,CACE,SAAY,OACZ,KAAQ,eAEV,CACE,SAAY,2BACZ,KAAQ,mBAId,4BAA6B,CAC3B,YAAe,oDACf,eAAkB,CAChB,CACE,SAAY,kBACZ,KAAQ,kBAEV,CACE,SAAY,OACZ,KAAQ,eAEV,CACE,SAAY,2BACZ,KAAQ,mBAId,YAAe,CACb,YAAe,wGACf,eAAkB,CAChB,CACE,SAAY,SACZ,KAAQ,UAEV,CACE,SAAY,sBACZ,KAAQ,qBAEV,CACE,SAAY,uBACZ,KAAQ,uBAEV,CACE,SAAY,iBACZ,KAAQ,gBAEV,CACE,SAAY,kBACZ,KAAQ,6BAEV,CACE,SAAY,oBACZ,KAAQ,oBAEV,CACE,SAAY,2BACZ,KAAQ,mBAId,qBAAsB,CACpB,YAAe,8HACf,eAAkB,CAChB,CACE,SAAY,SACZ,KAAQ,UAEV,CACE,SAAY,cACZ,KAAQ,cAEV,CACE,SAAY,uBACZ,KAAQ,uBAEV,CACE,SAAY,qBACZ,KAAQ,qBAEV,CACE,SAAY,iBACZ,KAAQ,gBAEV,CACE,SAAY,kBACZ,KAAQ,6BAEV,CACE,SAAY,2BACZ,KAAQ,mBAId,QAAW,CACT,YAAe,qFACf,eAAkB,CAChB,CACE,SAAY,SACZ,KAAQ,UAEV,CACE,SAAY,cACZ,KAAQ,cAEV,CACE,SAAY,qBACZ,KAAQ,YAEV,CACE,SAAY,4BACZ,KAAQ,gBAEV,CACE,SAAY,iBACZ,KAAQ,gBAEV,CACE,SAAY,kBACZ,KAAQ,6BAEV,CACE,SAAY,2BACZ,KAAQ,mBAId,sBAAuB,CACrB,YAAe,yEACf,eAAkB,CAChB,CACE,SAAY,SACZ,KAAQ,UAEV,CACE,SAAY,oBACZ,KAAQ,oBAEV,CACE,SAAY,qBACZ,KAAQ,YAEV,CACE,SAAY,4BACZ,KAAQ,gBAEV,CACE,SAAY,oBACZ,KAAQ,mBAEV,CACE,SAAY,kBACZ,KAAQ,6BAEV,CACE,SAAY,iBACZ,KAAQ,gBAEV,CACE,SAAY,2BACZ,KAAQ,iBAEV,CACE,SAAY,oBACZ,KAAQ,sBAId,+BAAgC,CAC9B,YAAe,0FACf,eAAkB,CAChB,CACE,SAAY,4BACZ,KAAQ,gBAEV,CACE,SAAY,2BACZ,KAAQ,iBAEV,CACE,SAAY,qBACZ,KAAQ,YAEV,CACE,SAAY,iBACZ,KAAQ,gBAEV,CACE,SAAY,cACZ,KAAQ,cAEV,CACE,SAAY,SACZ,KAAQ,UAEV,CACE,SAAY,oBACZ,KAAQ,oBAEV,CACE,SAAY,GACZ,KAAQ,IAEV,CACE,SAAY,kBACZ,KAAQ,6BAEV,CACE,SAAY,oBACZ,KAAQ,sBAId,wBAAyB,CACvB,YAAe,yIACf,eAAkB,CAChB,CACE,SAAY,cACZ,KAAQ,cAEV,CACE,SAAY,SACZ,KAAQ,UAEV,CACE,SAAY,qBACZ,KAAQ,qBAEV,CACE,SAAY,4BACZ,KAAQ,gBAEV,CACE,SAAY,oBACZ,KAAQ,mBAEV,CACE,SAAY,2BACZ,KAAQ,mBAId,yCAA0C,CACxC,YAAe,wJACf,eAAkB,CAChB,CACE,SAAY,cACZ,KAAQ,cAEV,CACE,SAAY,SACZ,KAAQ,UAEV,CACE,SAAY,qBACZ,KAAQ,qBAEV,CACE,SAAY,4BACZ,KAAQ,gBAEV,CACE,SAAY,2BACZ,KAAQ,iBAEV,CACE,SAAY,oBACZ,KAAQ,mBAEV,CACE,SAAY,iBACZ,KAAQ,mBAId,8BAA+B,CAC7B,YAAe,2HACf,eAAkB,CAChB,CACE,SAAY,SACZ,KAAQ,UAEV,CACE,SAAY,sBACZ,KAAQ,qBAEV,CACE,SAAY,cACZ,KAAQ,cAEV,CACE,SAAY,oBACZ,KAAQ,sBAId,mBAAoB,CAClB,YAAe,kEACf,eAAkB,CAChB,CACE,SAAY,SACZ,KAAQ,UAEV,CACE,SAAY,kBACZ,KAAQ,kBAEV,CACE,SAAY,4BACZ,KAAQ,gBAEV,CACE,SAAY,2BACZ,KAAQ,iBAEV,CACE,SAAY,oBACZ,KAAQ,oBAEV,CACE,SAAY,iBACZ,KAAQ,gBAEV,CACE,SAAY,8BACZ,KAAQ,mBAId,WAAc,CACZ,YAAe,yEACf,eAAkB,CAChB,CACE,SAAY,SACZ,KAAQ,UAEV,CACE,SAAY,sBACZ,KAAQ,qBAEV,CACE,SAAY,cACZ,KAAQ,cAEV,CACE,SAAY,oBACZ,KAAQ,oBAEV,CACE,SAAY,SACZ,KAAQ,kBAEV,CACE,SAAY,4BACZ,KAAQ,gBAEV,CACE,SAAY,oBACZ,KAAQ,mBAEV,CACE,SAAY,kBACZ,KAAQ,6BAEV,CACE,SAAY,2BACZ,KAAQ,iBAEV,CACE,SAAY,qBACZ,KAAQ,cAEV,CACE,SAAY,QACZ,KAAQ,gBAEV,CACE,SAAY,8BACZ,KAAQ,iBAEV,CACE,SAAY,iBACZ,KAAQ,gBAEV,CACE,SAAY,oBACZ,KAAQ,sBAId,yBAA0B,CACxB,YAAe,2EACf,eAAkB,CAChB,CACE,SAAY,SACZ,KAAQ,UAEV,CACE,SAAY,sBACZ,KAAQ,qBAEV,CACE,SAAY,cACZ,KAAQ,cAEV,CACE,SAAY,oBACZ,KAAQ,oBAEV,CACE,SAAY,SACZ,KAAQ,kBAEV,CACE,SAAY,4BACZ,KAAQ,gBAEV,CACE,SAAY,oBACZ,KAAQ,mBAEV,CACE,SAAY,kBACZ,KAAQ,6BAEV,CACE,SAAY,2BACZ,KAAQ,iBAEV,CACE,SAAY,qBACZ,KAAQ,cAEV,CACE,SAAY,QACZ,KAAQ,gBAEV,CACE,SAAY,8BACZ,KAAQ,iBAEV,CACE,SAAY,iBACZ,KAAQ,gBAEV,CACE,SAAY,oBACZ,KAAQ,sBAId,uBAAwB,CACtB,YAAe,gEACf,eAAkB,CAChB,CACE,SAAY,cACZ,KAAQ,cAEV,CACE,SAAY,4BACZ,KAAQ,gBAEV,CACE,SAAY,QACZ,KAAQ,kBAId,6BAA8B,CAC5B,YAAe,4DACf,eAAkB,CAChB,CACE,SAAY,SACZ,KAAQ,UAEV,CACE,SAAY,cACZ,KAAQ,cAEV,CACE,SAAY,oBACZ,KAAQ,mBAEV,CACE,SAAY,iBACZ,KAAQ,gBAEV,CACE,SAAY,kBACZ,KAAQ,6BAEV,CACE,SAAY,oBACZ,KAAQ,oBAEV,CACE,SAAY,2BACZ,KAAQ,mBAId,cAAe,CACb,YAAe,wDACf,eAAkB,CAChB,CACE,SAAY,SACZ,KAAQ,UAEV,CACE,SAAY,sBACZ,KAAQ,qBAEV,CACE,SAAY,qBACZ,KAAQ,YAEV,CACE,SAAY,4BACZ,KAAQ,gBAEV,CACE,SAAY,2BACZ,KAAQ,iBAEV,CACE,SAAY,8BACZ,KAAQ,iBAEV,CACE,SAAY,oBACZ,KAAQ,mBAEV,CACE,SAAY,QACZ,KAAQ,gBAEV,CACE,SAAY,oBACZ,KAAQ,sBAId,QAAW,CACT,YAAe,qDACf,eAAkB,CAChB,CACE,SAAY,SACZ,KAAQ,UAEV,CACE,SAAY,cACZ,KAAQ,cAEV,CACE,SAAY,kBACZ,KAAQ,kBAEV,CACE,SAAY,qBACZ,KAAQ,YAEV,CACE,SAAY,4BACZ,KAAQ,gBAEV,CACE,SAAY,oBACZ,KAAQ,oBAEV,CACE,SAAY,iBACZ,KAAQ,gBAEV,CACE,SAAY,4BACZ,KAAQ,mBAEV,CACE,SAAY,OACZ,KAAQ,eAEV,CACE,SAAY,kBACZ,KAAQ,6BAEV,CACE,SAAY,oBACZ,KAAQ,mBAEV,CACE,SAAY,2BACZ,KAAQ,iBAEV,CACE,SAAY,8BACZ,KAAQ,mBAId,KAAQ,CACN,YAAe,kEACf,eAAkB,CAChB,CACE,SAAY,SACZ,KAAQ,UAEV,CACE,SAAY,kCACZ,KAAQ,0BAEV,CACE,SAAY,4BACZ,KAAQ,gBAEV,CACE,SAAY,OACZ,KAAQ,eAEV,CACE,SAAY,oBACZ,KAAQ,mBAEV,CACE,SAAY,oBACZ,KAAQ,oBAEV,CACE,SAAY,2BACZ,KAAQ,iBAEV,CACE,SAAY,kBACZ,KAAQ,mBAId,sBAAuB,CACrB,YAAe,oFACf,eAAkB,CAChB,CACE,SAAY,SACZ,KAAQ,UAEV,CACE,SAAY,cACZ,KAAQ,cAEV,CACE,SAAY,4BACZ,KAAQ,gBAEV,CACE,SAAY,iBACZ,KAAQ,gBAEV,CACE,SAAY,2BACZ,KAAQ,mBAId,sBAAuB,CACrB,YAAe,0EACf,eAAkB,CAChB,CACE,SAAY,SACZ,KAAQ,UAEV,CACE,SAAY,2BACZ,KAAQ,mBAId,yBAA0B,CACxB,YAAe,0FACf,eAAkB,CAChB,CACE,SAAY,SACZ,KAAQ,UAEV,CACE,SAAY,cACZ,KAAQ,cAEV,CACE,SAAY,iBACZ,KAAQ,gBAEV,CACE,SAAY,kBACZ,KAAQ,6BAEV,CACE,SAAY,2BACZ,KAAQ,mBAId,uBAAwB,CACtB,YAAe,iDACf,eAAkB,CAChB,CACE,SAAY,SACZ,KAAQ,UAEV,CACE,SAAY,cACZ,KAAQ,cAEV,CACE,SAAY,oBACZ,KAAQ,mBAEV,CACE,SAAY,2BACZ,KAAQ,mBAId,YAAa,CACX,YAAe,+JACf,eAAkB,CAChB,CACE,SAAY,SACZ,KAAQ,UAEV,CACE,SAAY,cACZ,KAAQ,cAEV,CACE,SAAY,iBACZ,KAAQ,gBAEV,CACE,SAAY,2BACZ,KAAQ,iBAEV,CACE,SAAY,oBACZ,KAAQ,oBAEV,CACE,SAAY,4BACZ,KAAQ,gBAEV,CACE,SAAY,qBACZ,KAAQ,qBAEV,CACE,SAAY,UACZ,KAAQ,iBAId,eAAgB,CACd,YAAe,gDACf,eAAkB,CAChB,CACE,SAAY,SACZ,KAAQ,UAEV,CACE,SAAY,sBACZ,KAAQ,qBAEV,CACE,SAAY,oBACZ,KAAQ,oBAEV,CACE,SAAY,4BACZ,KAAQ,gBAEV,CACE,SAAY,kBACZ,KAAQ,6BAEV,CACE,SAAY,oBACZ,KAAQ,oBAEV,CACE,SAAY,oBACZ,KAAQ,mBAEV,CACE,SAAY,2BACZ,KAAQ,iBAEV,CACE,SAAY,8BACZ,KAAQ,iBAEV,CACE,SAAY,QACZ,KAAQ,kBAId,2BAA4B,CAC1B,YAAe,gGACf,eAAkB,CAChB,CACE,SAAY,SACZ,KAAQ,UAEV,CACE,SAAY,cACZ,KAAQ,cAEV,CACE,SAAY,qBACZ,KAAQ,qBAEV,CACE,SAAY,iBACZ,KAAQ,gBAEV,CACE,SAAY,2BACZ,KAAQ,iBAEV,CACE,SAAY,oBACZ,KAAQ,oBAEV,CACE,SAAY,kBACZ,KAAQ,6BAEV,CACE,SAAY,4BACZ,KAAQ,kBAId,gBAAiB,CACf,YAAe,6DACf,eAAkB,CAChB,CACE,SAAY,SACZ,KAAQ,UAEV,CACE,SAAY,cACZ,KAAQ,cAEV,CACE,SAAY,kCACZ,KAAQ,0BAEV,CACE,SAAY,4BACZ,KAAQ,gBAEV,CACE,SAAY,kBACZ,KAAQ,6BAEV,CACE,SAAY,iBACZ,KAAQ,gBAEV,CACE,SAAY,oBACZ,KAAQ,mBAEV,CACE,SAAY,OACZ,KAAQ,eAEV,CACE,SAAY,2BACZ,KAAQ,mBAId,+BAAgC,CAC9B,YAAe,4FACf,eAAkB,CAChB,CACE,SAAY,SACZ,KAAQ,UAEV,CACE,SAAY,kCACZ,KAAQ,0BAEV,CACE,SAAY,iBACZ,KAAQ,gBAEV,CACE,SAAY,OACZ,KAAQ,eAEV,CACE,SAAY,2BACZ,KAAQ,mBAId,uBAAwB,CACtB,YAAe,yMACf,eAAkB,CAChB,CACE,SAAY,SACZ,KAAQ,UAEV,CACE,SAAY,sBACZ,KAAQ,qBAEV,CACE,SAAY,cACZ,KAAQ,cAEV,CACE,SAAY,oBACZ,KAAQ,2BAEV,CACE,SAAY,kCACZ,KAAQ,0BAEV,CACE,SAAY,oBACZ,KAAQ,oBAEV,CACE,SAAY,4BACZ,KAAQ,gBAEV,CACE,SAAY,2BACZ,KAAQ,iBAEV,CACE,SAAY,OACZ,KAAQ,eAEV,CACE,SAAY,iBACZ,KAAQ,gBAEV,CACE,SAAY,kBACZ,KAAQ,6BAEV,CACE,SAAY,8BACZ,KAAQ,iBAEV,CACE,SAAY,QACZ,KAAQ,kBAId,sBAAuB,CACrB,YAAe,6EACf,eAAkB,CAChB,CACE,SAAY,SACZ,KAAQ,UAEV,CACE,SAAY,oBACZ,KAAQ,oBAEV,CACE,SAAY,cACZ,KAAQ,cAEV,CACE,SAAY,qBACZ,KAAQ,qBAEV,CACE,SAAY,4BACZ,KAAQ,gBAEV,CACE,SAAY,oBACZ,KAAQ,oBAEV,CACE,SAAY,kBACZ,KAAQ,iBAEV,CACE,SAAY,2BACZ,KAAQ,mBAId,iBAAkB,CAChB,YAAe,gGACf,eAAkB,CAChB,CACE,SAAY,SACZ,KAAQ,UAEV,CACE,SAAY,cACZ,KAAQ,cAEV,CACE,SAAY,kCACZ,KAAQ,0BAEV,CACE,SAAY,4BACZ,KAAQ,gBAEV,CACE,SAAY,qBACZ,KAAQ,cAEV,CACE,SAAY,oBACZ,KAAQ,oBAEV,CACE,SAAY,OACZ,KAAQ,eAEV,CACE,SAAY,kBACZ,KAAQ,6BAEV,CACE,SAAY,2BACZ,KAAQ,iBAEV,CACE,SAAY,8BACZ,KAAQ,iBAEV,CACE,SAAY,iBACZ,KAAQ,gBAEV,CACE,SAAY,oBACZ,KAAQ,mBAEV,CACE,SAAY,QACZ,KAAQ,gBAEV,CACE,SAAY,kBACZ,KAAQ,mBAId,gBAAiB,CACf,YAAe,iJACf,eAAkB,CAChB,CACE,SAAY,SACZ,KAAQ,UAEV,CACE,SAAY,sBACZ,KAAQ,qBAEV,CACE,SAAY,gCACZ,KAAQ,qBAEV,CACE,SAAY,GACZ,KAAQ,IAEV,CACE,SAAY,oBACZ,KAAQ,2BAEV,CACE,SAAY,kCACZ,KAAQ,0BAEV,CACE,SAAY,4BACZ,KAAQ,gBAEV,CACE,SAAY,oBACZ,KAAQ,oBAEV,CACE,SAAY,2BACZ,KAAQ,iBAEV,CACE,SAAY,kBACZ,KAAQ,6BAEV,CACE,SAAY,OACZ,KAAQ,eAEV,CACE,SAAY,QACZ,KAAQ,gBAEV,CACE,SAAY,8BACZ,KAAQ,mBAId,gBAAiB,CACf,YAAe,mEACf,eAAkB,CAChB,CACE,SAAY,SACZ,KAAQ,UAEV,CACE,SAAY,4BACZ,KAAQ,gBAEV,CACE,SAAY,QACZ,KAAQ,gBAEV,CACE,SAAY,2BACZ,KAAQ,mBAId,qBAAsB,CACpB,YAAe,iEACf,eAAkB,CAChB,CACE,SAAY,cACZ,KAAQ,cAEV,CACE,SAAY,SACZ,KAAQ,UAEV,CACE,SAAY,4BACZ,KAAQ,gBAEV,CACE,SAAY,oBACZ,KAAQ,sBAId,kBAAmB,CACjB,YAAe,uFACf,eAAkB,CAChB,CACE,SAAY,SACZ,KAAQ,UAEV,CACE,SAAY,cACZ,KAAQ,cAEV,CACE,SAAY,4BACZ,KAAQ,gBAEV,CACE,SAAY,2BACZ,KAAQ,iBAEV,CACE,SAAY,iBACZ,KAAQ,gBAEV,CACE,SAAY,aACZ,KAAQ,cAEV,CACE,SAAY,QACZ,KAAQ,kBAId,oBAAqB,CACnB,YAAe,0FACf,eAAkB,CAChB,CACE,SAAY,oBACZ,KAAQ,mBAEV,CACE,SAAY,cACZ,KAAQ,gBAId,mBAAoB,CAClB,YAAe,+DACf,eAAkB,CAChB,CACE,SAAY,cACZ,KAAQ,cAEV,CACE,SAAY,4BACZ,KAAQ,gBAEV,CACE,SAAY,oBACZ,KAAQ,sBAId,iBAAkB,CAChB,YAAe,qGACf,eAAkB,CAChB,CACE,SAAY,oBACZ,KAAQ,mBAEV,CACE,SAAY,cACZ,KAAQ,cAEV,CACE,SAAY,4BACZ,KAAQ,gBAEV,CACE,SAAY,oBACZ,KAAQ,mBAEV,CACE,SAAY,oBACZ,KAAQ,sBAId,0BAA2B,CACzB,YAAe,gIACf,eAAkB,CAChB,CACE,SAAY,SACZ,KAAQ,UAEV,CACE,SAAY,cACZ,KAAQ,cAEV,CACE,SAAY,4BACZ,KAAQ,gBAEV,CACE,SAAY,iBACZ,KAAQ,gBAEV,CACE,SAAY,2BACZ,KAAQ,iBAEV,CACE,SAAY,kBACZ,KAAQ,6BAEV,CACE,SAAY,oBACZ,KAAQ,oBAEV,CACE,SAAY,QACZ,KAAQ,kBAId,sBAAuB,CACrB,YAAe,uFACf,eAAkB,CAChB,CACE,SAAY,cACZ,KAAQ,cAEV,CACE,SAAY,4BACZ,KAAQ,gBAEV,CACE,SAAY,oBACZ,KAAQ,oBAEV,CACE,SAAY,kBACZ,KAAQ,6BAEV,CACE,SAAY,oBACZ,KAAQ,mBAEV,CACE,SAAY,iBACZ,KAAQ,gBAEV,CACE,SAAY,OACZ,KAAQ,eAEV,CACE,SAAY,QACZ,KAAQ,kBAId,eAAgB,CACd,YAAe,sJACf,eAAkB,CAChB,CACE,SAAY,SACZ,KAAQ,UAEV,CACE,SAAY,cACZ,KAAQ,cAEV,CACE,SAAY,4BACZ,KAAQ,gBAEV,CACE,SAAY,iBACZ,KAAQ,gBAEV,CACE,SAAY,2BACZ,KAAQ,iBAEV,CACE,SAAY,UACZ,KAAQ,eAEV,CACE,SAAY,oBACZ,KAAQ,sBAId,eAAgB,CACd,YAAe,2HACf,eAAkB,CAChB,CACE,SAAY,QACZ,KAAQ,SAEV,CACE,SAAY,SACZ,KAAQ,UAEV,CACE,SAAY,cACZ,KAAQ,cAEV,CACE,SAAY,kBACZ,KAAQ,SAEV,CACE,SAAY,2BACZ,KAAQ,iBAEV,CACE,SAAY,kBACZ,KAAQ,6BAEV,CACE,SAAY,iBACZ,KAAQ,gBAEV,CACE,SAAY,4BACZ,KAAQ,gBAEV,CACE,SAAY,oBACZ,KAAQ,mBAEV,CACE,SAAY,OACZ,KAAQ,eAEV,CACE,SAAY,4BACZ,KAAQ,mBAEV,CACE,SAAY,oBACZ,KAAQ,oBAEV,CACE,SAAY,GACZ,KAAQ,IAEV,CACE,SAAY,kBACZ,KAAQ,mBAId,UAAW,CACT,YAAe,wJACf,eAAkB,CAChB,CACE,SAAY,SACZ,KAAQ,UAEV,CACE,SAAY,cACZ,KAAQ,cAEV,CACE,SAAY,4BACZ,KAAQ,gBAEV,CACE,SAAY,kBACZ,KAAQ,6BAEV,CACE,SAAY,iBACZ,KAAQ,gBAEV,CACE,SAAY,oBACZ,KAAQ,mBAEV,CACE,SAAY,2BACZ,KAAQ,mBAId,eAAgB,CACd,YAAe,iGACf,eAAkB,CAChB,CACE,SAAY,SACZ,KAAQ,UAEV,CACE,SAAY,oBACZ,KAAQ,oBAEV,CACE,SAAY,cACZ,KAAQ,cAEV,CACE,SAAY,uBACZ,KAAQ,uBAEV,CACE,SAAY,4BACZ,KAAQ,gBAEV,CACE,SAAY,oBACZ,KAAQ,oBAEV,CACE,SAAY,iBACZ,KAAQ,gBAEV,CACE,SAAY,2BACZ,KAAQ,iBAEV,CACE,SAAY,OACZ,KAAQ,eAEV,CACE,SAAY,8BACZ,KAAQ,qB,wICxkIT,MAAM0iI,EAAoB,IAC/B,gBAAC,IAAD,KACE,gBAAC,QAAD,+IAOSC,EAAa,EACxBC,sBAIA,gBAAC,IAAD,CAAQxnJ,UAAQ,GACd,gBAAC,IAAD,KACE,gBAAC,QAAD,mJAKF,gBAAC,IAAD,CAAMS,eAAe,UAAU+mJ,O,wICrB5B,MAAMF,EAAoB,IAC/B,gBAAC,IAAD,KACE,gBAAC,QAAD,yLAQSC,EAAa,EACxBC,sBAIA,gBAAC,IAAD,CAAQxnJ,UAAQ,GACd,gBAAC,IAAD,KACE,gBAAC,QAAD,uLAMF,gBAAC,IAAD,CAAMS,eAAe,UAAU+mJ,O,yKCnB5B,MAAMF,EAAoB,IAC/B,gBAAC,IAAD,KACE,gBAAC,QAAD,gDACA,gBAAC,QAAD,+JAQSC,EAAa,EACxBC,sBAIA,gBAAC,IAAD,CAAQxnJ,UAAQ,GACd,gBAAC,IAAD,KACE,gBAAC,QAAD,2EAIF,gBAAC,IAAD,CAAcoO,KAAK,WACjB,gBAAC,QAAD,oKAMF,gBAAC,IAAD,MACCo5I,IACD,gBAAC,IAAD,MACA,gBAAC,IAAD,CACE1hJ,WAAS,EACTnG,SAAO,EACPC,QAAS,IACPhB,IAAOC,gBACL0C,YAAY,6CAGhB7B,MAAO,gBAAC,QAAD,yCAET,gBAAC,IAAD,CACEoG,WAAS,EACTnG,SAAO,EACPC,QAAS,IACPhB,IAAOC,gBACL0C,YAAY,+CAGhB7B,MAAO,gBAAC,QAAD,0CAET,gBAAC,IAAD,CACEoG,WAAS,EACTnG,SAAO,EACPC,QAAS,IACPhB,IAAOC,gBAAgB0C,YAAY,sCAErC7B,MAAO,gBAAC,QAAD,uCAET,gBAAC,IAAD,CACEoG,WAAS,EACTnG,SAAO,EACPC,QAAS,IAAMhB,IAAOC,gBAAgB,iCACtCa,MAAO,gBAAC,QAAD,wCAET,gBAAC,IAAD,CACEoG,WAAS,EACTlG,QAAS,IAAMhB,IAAOC,gBAAgB0C,YAAY,gBAClD7B,MAAO,gBAAC,QAAD,wC,iJCxEN,MAAM4nJ,EAAoB,IAC/B,gBAAC,IAAD,CAAQtnJ,UAAQ,GACd,gBAAC,IAAD,KACE,gBAAC,QAAD,yJAKF,gBAAC,IAAD,MACA,gBAAC,IAAD,CAAcoO,KAAK,QACjB,gBAAC,QAAD,qOAUOm5I,EAAa,EACxBC,sBAIA,gBAAC,IAAD,CAAQxnJ,UAAQ,GACd,gBAAC,IAAD,KACE,gBAAC,QAAD,8LAMF,gBAAC,IAAD,CAAMS,eAAe,UAAU+mJ,O,iBCrCnC,MAAMpqI,EAAoB,CACxBguE,EACAruD,EACA0qH,KAEA,MAAMx8C,EAAS,GACf,IAAK,IAAI97F,EAAIi8E,EAAOj8E,EAAI4tB,EAAK5tB,IAC3B87F,EAAOjlG,KAAKyhJ,EAAKt4I,IAEnB,OAAO87F,GA6BTtmF,EAAOC,QAAU,CACfxH,SACA05E,cA5B+B,CAC/B1L,EACAruD,EACA0qH,KAEA,MAAMx8C,EAAS,GACf,IAAK,IAAI97F,EAAI4tB,EAAM,EAAG5tB,GAAKi8E,EAAOj8E,IAChC87F,EAAOjlG,KAAKyhJ,EAAKt4I,IAEnB,OAAO87F,GAoBPptE,UAV8B,CAC9B6pH,EACAD,IAEOrqI,EAAO,EAAGsqI,EAAU53I,OAAQX,GAAKs4I,EAAKC,EAAUruG,GAAGlqC,GAAIA,M,gKC7BzD,MAAMm4I,EAAoB,IAC/B,gBAAC,IAAD,KACE,gBAAC,QAAD,mMAQSC,EAAa,EACxBC,sBAWE,gBAAC,IAAD,CAAQxnJ,UAAQ,GACd,gBAAC,IAAD,KACE,gBAAC,QAAD,qHAKF,gBAAC,IAAD,CAAMS,eAAe,UAClB+mJ,IACD,gBAAC,IAAD,CACE9nJ,MAAO,gBAAC,QAAD,mDACPC,SAAO,EACPC,QAnBc,KACpBhB,IAAOC,gBACL0C,YAAY,2D,8FCrBX,MAAM+lJ,EAAoB,IAC/B,gBAAC,IAAD,KACE,gBAAC,QAAD,0I,uHCaG,MAAMK,EAAoB,EAC/BC,cACAC,wBAEA,MAAMt7G,EAAY,CAACu7G,EAAwB5kF,KACzC2kF,EAAkBE,GACZ7kF,IAA2D,IAAjD6kF,EAAgBlpG,QAAQ/7C,QAAQglJ,GACrC,eACFC,EADL,CAEElpG,QAAS,IAAIkpG,EAAgBlpG,QAASipG,KAGvC5kF,IACgD,IAAjD6kF,EAAgBlpG,QAAQ/7C,QAAQglJ,GAQ3BC,EANE,eACFA,EADL,CAEElpG,QAASkpG,EAAgBlpG,QAAQp4C,OAAOpI,GAAQA,IAASypJ,OAQjE,OACE,gBAAC,WAAD,KACE,gBAAC,IAAD,CAAQ9nJ,UAAQ,GACd,gBAAC,IAAD,KACE,gBAAC,IAAD,KACE,gBAAC,QAAD,gHAMJ,gBAAC,IAAD,CACEN,MAAO,gBAAC,QAAD,2BACP+F,SAAoD,IAA3CmiJ,EAAY/oG,QAAQ/7C,QAAQ,UACrC4C,QAAS,CAACC,EAAGF,IAAY8mC,EAAU,SAAU9mC,KAE/C,gBAAC,IAAD,CACE/F,MAAO,gBAAC,QAAD,sCACP+F,SAAoD,IAA3CmiJ,EAAY/oG,QAAQ/7C,QAAQ,UACrC4C,QAAS,CAACC,EAAGF,IAAY8mC,EAAU,SAAU9mC,KAE/C,gBAAC,IAAD,CACE/F,MAAO,gBAAC,QAAD,yBACP+F,SAAoD,IAA3CmiJ,EAAY/oG,QAAQ/7C,QAAQ,UACrC4C,QAAS,CAACC,EAAGF,IAAY8mC,EAAU,SAAU9mC,KAE/C,gBAAC,IAAD,CACE/F,MAAO,gBAAC,QAAD,yBACP+F,SAA2D,IAAlDmiJ,EAAY/oG,QAAQ/7C,QAAQ,iBACrC4C,QAAS,CAACC,EAAGF,IAAY8mC,EAAU,gBAAiB9mC,S,8FCrEvD,MAAM6hJ,EAAoB,IAC/B,gBAAC,IAAD,KACE,gBAAC,QAAD,mO,iCCPJ,6BAGepsJ,QAAM0kG,KAAKvkG,GACxB,kBAAC,IAAYA,EACX,0BAAMykG,EAAE,sK,iCCLZ,6BAGe5kG,QAAM0kG,KAAKvkG,GACxB,kBAAC,IAAYA,EACX,0BAAMykG,EAAE,wgB,iCCLZ,6BAGe5kG,QAAM0kG,KAAKvkG,GACxB,kBAAC,IAAYA,EACX,0BAAMykG,EAAE,uf,oBCFZ,MAAMu7B,EAAOv3G,EAAQ,KA0BfkkI,EAA0B,CAC9BjhJ,EACAszD,EACA4tF,KAEA,IAAKA,EAAkBD,wBACrB,MAAO,CACLz/I,OAAO,EACPuG,QACE,mEAIN,MAAMo5I,EAAcD,EAAkBD,wBAAwBjhJ,EAAIszD,GAClE,OAAIghE,EAAK6sB,GACA,CACL3/I,OAAO,EACPuG,QAAS,iEACTq5I,SAAUD,GAIP,CACL3/I,OAAO,EACPuG,QAAS,8BAoEb6V,EAAOC,QAAU,CACfojI,0BACAI,cA9DoB,CACpBtsJ,EACAiL,EACAqd,EACA6jI,KAEA,IAAKA,EAAkBI,gBACrB,MAAO,CACLv5I,QACE,oEACFvG,OAAO,GAIX,IAAI8xD,EAAY,KAChB,IAEE,GADAA,EAAY4tF,EAAkBI,gBAAgBvsJ,EAAGiL,IAC5CszD,EACH,MAAO,CACLvrD,QAAQ,gGACRvG,OAAO,GAGX,MAAO+/I,GACP,MAAO,CACLx5I,QAAQ,kJACRvG,OAAO,EACP+/H,WAAW,EACX6f,SAAUG,GAId,IACE,MAAMC,EAAcP,EAClBjhJ,EACAszD,EACA4tF,GAEF,GAAIM,EAAYhgJ,MAEd,OADA8xD,EAAU3yD,SACH6gJ,EAET,MAAOD,GACP,MAAO,CACLx5I,QAAQ,0JACRvG,OAAO,EACP+/H,WAAW,EACX6f,SAAUG,GAOd,OAHAlkI,EAASk3F,gBAAgBjhD,GACzBA,EAAU3yD,SAEH,CACLoH,QAAS,4CACTvG,OAAO,M,sFCzGX,MAAMigJ,EAAwC,CAC5CvpE,aAAc,QACd5gF,KAAM,aACNoqJ,iBAAkB,MAChB/a,iBAAkB,IAAMz8H,QAAQ6T,OAAO,8BACvC+jF,OAAQ,IAAM53F,QAAQ6T,OAAO,8BAC7BskH,YAAa,IAAMn4H,QAAQlN,SAAQ,GACnCmiG,cAAgBlkG,GACdiP,QAAQ6T,OAAO,8BACjBqhF,gBAAkBnkG,GAChBiP,QAAQ6T,OAAO,8BACjB6mH,kBAAoB3pI,SAyDT,MAAM0mJ,UAAgCxtJ,YAGlD,eAAD,oBACAwB,MADA,eAlCuC,EACvCisJ,EACA/pE,EACAgqE,KAEA,MAAMC,EAAajqE,EAChBj+E,IAAImoJ,IACI,CACLA,yBACArhB,0BAA2BqhB,EAAuBC,gCAC9CD,EAAuBC,gCAAgCH,GACvD,QAGPniJ,OAAO,EAAGghI,iCAAkCA,GAE/C,OAA0B,IAAtBohB,EAAW7nJ,OACN,CACL8nJ,uBAAwBH,EACxBlhB,0BAA2B,OAG3BohB,EAAW7nJ,OAAS,GACtBgD,QAAQ8zB,KACN,6FAIG+wH,EAAW,KAQbG,CACD5tJ,KAAKC,MAAMstJ,uBACXvtJ,KAAKC,MAAMujF,iBACXxjF,KAAKC,MAAMutJ,cALf,CAOEK,aAAc,OAPhB,KAUAC,WAAcD,IACZ7tJ,KAAK2B,SAAS,CACZksJ,kBAZJ,KAgBA5vB,aAAe,KACbj+H,KAAK2B,SAAS,CACZksJ,aAAc,QAlBlB,KAsBAE,oBAAuBpqE,GAChBA,EAEE,IAAI9tE,QAAQlN,IACjB3I,KAAK2B,SACH,CACE+rJ,uBAAwB/pE,GAE1B,KACEh7E,QARuBkN,QAAQlN,UAcvC5I,SAAU,MAAD,EACgCC,KAAKC,MAApCmB,EADD,EACCA,SAAUoiF,EADX,EACWA,iBADX,EAE6CxjF,KAAKsB,MAAjDusJ,EAFD,EAECA,aAAcxhB,EAFf,EAEeA,0BAChBqhB,EACJ1tJ,KAAKsB,MAAMosJ,wBAA0BN,EAEvC,OACE,gBAAC,WAAD,KACGhsJ,EAAS,CACR4sJ,iCAAkCN,EAAuBL,iBACvD,CACEY,UAAWjuJ,KAAK8tJ,WAChBI,YAAaluJ,KAAKi+H,eAGtBz6C,mBACAsxD,mBAAoB90I,KAAK+tJ,oBACzB1hB,8BAEDwhB,GAAgBA,Q,uFC5HlB,MAAM32G,UAAgBp3C,gBAC3BC,SAAU,MAAD,EACwDC,KAAKC,MAA5DkuJ,EADD,EACCA,OAAQC,EADT,EACSA,QAASC,EADlB,EACkBA,QAASC,EAD3B,EAC2BA,SAAUC,EADrC,EACqCA,eAE5C,OACE,gBAAC,IAAD,CAAcp3G,WAAS,GACrB,gBAAC42D,EAAA,EAAD,CACEvpG,QAAS2pJ,EACTppJ,IAAI,mCACJzE,UAAW+tJ,EACXnuJ,QAAS,uBAEX,gBAAC6tG,EAAA,EAAD,CACEvpG,QAAS4pJ,EACTrpJ,IAAI,iCACJzE,UAAWguJ,EACXpuJ,QAAS,wBAEX,gBAACsuJ,EAAA,EAAD,MACA,gBAACzgD,EAAA,EAAD,CACEvpG,QAAS+pJ,EACTxpJ,IAAI,oCACJ7E,QAAS,yCAOJg3C,Q,4DCzBf,MAAMr0C,EAAS,CACbuM,UAAW,CACTO,KAAM,EACNN,QAAS,QAEX0W,KAAM,CACJm0C,UAAW,SACXvqD,KAAM,IAOK,MAAM8+I,UAAuB3uJ,YAC1C4uJ,qBACEC,EACAC,EACApoJ,GAEA,OAAOooJ,EAAyBD,GAAUppJ,IAAIspJ,IAC5C,IAAKA,EAAsB,OAAO,KAClC,MAAMC,EAAoBtoJ,EAAK2zD,OAAO00F,EAAqBxqJ,KAErD0qJ,EAAmBF,EAAqBE,iBAE9C,OACE,gBAAC7pD,EAAA,EAAD,CACE7gG,IAAKyqJ,EAAkB94I,KAAK,KAC5BvQ,YAAaopJ,EAAqBvqJ,MAClCknG,gBAAiBqjD,EAAqBrjD,cACtChnG,QAAS,IACPxE,KAAKC,MAAM+uJ,kBACTH,EACAC,GAGJpjD,kBACEqjD,EACI,IACE/uJ,KAAK0uJ,qBACHv3I,IAAIw3I,EAAUE,EAAqBxqJ,IAAK,MACxC0qJ,EACAD,QAEJhkJ,MAOd/K,SACE,OAAOC,KAAKC,MAAM0uJ,SAChB,gBAACzpD,EAAA,EAAD,CAAMjgG,MAAOpC,EAAOkjB,MACjB/lB,KAAK0uJ,qBACJ1uJ,KAAKC,MAAM0uJ,SACX3uJ,KAAKC,MAAM2uJ,yBACX,KAGF,M,wCChER,MAAM/rJ,EAAS,CACbuM,UAAW,CACTO,KAAM,EACNuqD,UAAW,WAIT+0F,EAAoB5lJ,GACnBA,EAEAA,EAAS6lJ,aAGP7lJ,EAAS8lJ,UAEPC,IAAU/lJ,EAAS8lJ,UAAWF,GAFL,KAFzB5lJ,EAASgmJ,aAAehmJ,EAASimJ,OAASjmJ,EAASkmJ,KAHtC,KA2CRtvJ,UACd,8BAAKgF,MAAOpC,EAAOuM,WACjB,gBAAC,IAAD,CACEogJ,WAAW,EACXvsJ,MAAM,EACN8B,IACE9E,EAAMmqC,oBAtCIA,EAsC2BnqC,EAAMmqC,mBApC9CA,GACAA,EAAmBqlH,YACnBrlH,EAAmBqlH,WAAWC,MAI1BN,IAAUhlH,EAAmBqlH,WAAWC,MAAOT,GAF7C,MAgC8D,KAEnEU,iBAAiB,EACjBC,kBAAkB,EAClBC,mBAAmB,EACnB/kF,OAAQ19B,GAhCK,EAACA,GAAQ0iH,SAAQhlF,aAElC,MAAMtkE,EAAO,CAAC,aAAc,SAgB5B,OAfA4mC,EAAK2iH,UAAUjoJ,QAAQwiI,IACrB9jI,EAAKoE,KAAK0/H,GACV9jI,EAAKoE,KAAK,eAEZpE,EAAKoE,KAAKwiC,EAAKnqC,MAGXwoE,WAAWr+B,EAAK4iH,WAAWhwD,aAAe5yD,EAAK4iH,WACjDxpJ,EAAKoE,KAAK,aACVklJ,EAAOtpJ,EAAM,CAACilE,WAAWr+B,EAAK4iH,eAE9BxpJ,EAAKoE,KAAK,aACVklJ,EAAOtpJ,EAAM,CAAC,GAAK4mC,EAAK4iH,cAGnB,GAcaC,CAAW7iH,EAAMntC,GACjCiwJ,uBAAwB,GACxB/zC,MAAM,aA7CM/xE,O,QChBlB,MAAMvnC,EAAS,CACbuM,UAAW,CACTO,KAAM,EACNuqD,UAAW,WAkCCj6D,UACd,8BAAKgF,MAAOpC,EAAOuM,WACjB,gBAAC4tF,EAAA,EAAD,KACE,gBAAC,QAAD,kBAEF,gBAAC,IAAD,CACEwyD,WAAW,EACXvsJ,MAAM,EACN8B,KAtCYorJ,EAsCGlwJ,EAAMkwJ,cArCpBA,EACE,CACL,aAAcA,EAAcnsI,EAC5B,aAAcmsI,EAAclsI,EAC5BmsI,MAAOD,EAAc70F,MACrB+0F,MAAOF,EAAc5+F,MACrB,UAAW4+F,EAAcx8F,OACzB,aAAcw8F,EAAcG,QAPH,MAsCvBX,iBAAiB,EACjBC,kBAAkB,EAClBC,mBAAmB,EACnB/kF,OAAQ19B,GA9BK,EAACA,GAAQ0iH,SAAQhlF,aAClC,GAAkB,eAAd19B,EAAKnqC,KACP6sJ,EAAO,CAAC,QAAS,CAACrkF,WAAWr+B,EAAK4iH,kBAC7B,GAAkB,eAAd5iH,EAAKnqC,KACd6sJ,EAAO,CAAC,QAAS,CAACrkF,WAAWr+B,EAAK4iH,kBAC7B,GAAkB,UAAd5iH,EAAKnqC,KACd6sJ,EAAO,CAAC,YAAa,CAACrkF,WAAWr+B,EAAK4iH,kBACjC,GAAkB,UAAd5iH,EAAKnqC,KACd6sJ,EAAO,CAAC,YAAa,CAAC1iH,EAAK4iH,iBACtB,GAAkB,YAAd5iH,EAAKnqC,KACd6sJ,EAAO,CAAC,aAAc,CAACrkF,WAAWr+B,EAAK4iH,iBAClC,IAAkB,eAAd5iH,EAAKnqC,KAET,OAAO,EADZ6sJ,EAAO,CAAC,QAAS,GAAG1iH,EAAK4iH,YAG3B,OAAO,GAeaC,CAAW7iH,EAAMntC,GACjCiwJ,uBAAwB,GACxB/zC,MAAM,YAER,gBAACnf,EAAA,EAAD,KACE,gBAAC,QAAD,6BAEF,gBAACuzD,EAAD,CACEnmH,mBACEnqC,EAAMkwJ,cAAgBlwJ,EAAMkwJ,cAAcV,WAAa,KAIzD3kF,OAAQ,CAACtkE,EAAM7D,IACb1C,EAAM6qE,OAAO,CAAC,cAAc3Q,OAAO3zD,GAAO7D,GAE5CmtJ,OAAQ,CAACtpJ,EAAMgqJ,IAASvwJ,EAAM6vJ,OAAO,CAAC,cAAc31F,OAAO3zD,GAAOgqJ,MA1DtDL,O,kBCClB,MAAMttJ,EAAS,CACbuM,UAAW,CACTO,KAAM,EACNuqD,UAAW,WAITu2F,EAAiBl/F,GAChBA,EACE,CACL,2BAA4BA,EAAMm/F,gBAClC,cAAen/F,EAAMo/F,YACrB,oBAAqBp/F,EAAMq/F,QAC3B,oBAAqBr/F,EAAMs/F,SAC3B,oBAAqBt/F,EAAMu/F,SAC3B,aAAcv/F,EAAMw/F,YAPH,KAWflpI,EAAYmpI,GACXA,EAEE,CACL,aAAcA,EAAaC,aACvBD,EAAaC,aAAaF,WAC1B,KACJG,OACEF,EAAaG,SAAWH,EAAaG,QAAQzB,MACzCN,IAAU4B,EAAaG,QAAQzB,MAAOe,GACtC,MATkB,KAuDb,MAAMW,UAA8BtxJ,YAGhD,eAAD,oBACAwB,MAAQ,CACNkrD,cAAe,IAGjBzsD,SAAU,MAAD,EAC0BC,KAAKC,MAA9B+wJ,EADD,EACCA,aAAclB,EADf,EACeA,OACtB,OAAKkB,EAGH,uBAAK/rJ,MAAOpC,EAAOuM,WACjB,gBAAC4tF,EAAA,EAAD,KACE,gBAAC,QAAD,iBAEF,gBAAC,IAAD,CACEwyD,WAAW,EACXvsJ,MAAM,EACN8B,IAAK8iB,EAAUmpI,GACfrB,iBAAiB,EACjBC,kBAAkB,EAClBC,mBAAmB,EACnB/kF,OAAQ19B,GAlEC,EAACA,GAAQ0iH,SAAQhlF,aAClC,GAA8B,IAA1B19B,EAAK2iH,UAAUnqJ,QAA8B,eAAdwnC,EAAKnqC,KACtC6sJ,EAAO,CAAC,eAAgB,gBAAiB,CAACrkF,WAAWr+B,EAAK4iH,iBACrD,MAAI5iH,EAAK2iH,UAAUnqJ,QAAU,GAkC7B,OAAO,EAjCc,WAAtBwnC,EAAK2iH,UAAU,KACC,6BAAd3iH,EAAKnqC,KACP6sJ,EACE,CAAC,UAAW,QAAS1iH,EAAK2iH,UAAU,GAAI,qBACxC,CAACtkF,WAAWr+B,EAAK4iH,aAEI,gBAAd5iH,EAAKnqC,KACd6sJ,EACE,CAAC,UAAW,QAAS1iH,EAAK2iH,UAAU,GAAI,iBACxC,CAACtkF,WAAWr+B,EAAK4iH,aAEI,oBAAd5iH,EAAKnqC,KACd6sJ,EACE,CAAC,UAAW,QAAS1iH,EAAK2iH,UAAU,GAAI,QACxC,EAAE3iH,EAAK4iH,YAEc,sBAAd5iH,EAAKnqC,KACd6sJ,EACE,CAAC,UAAW,QAAS1iH,EAAK2iH,UAAU,GAAI,cACxC,CAACtkF,WAAWr+B,EAAK4iH,aAEI,sBAAd5iH,EAAKnqC,KACd6sJ,EACE,CAAC,UAAW,QAAS1iH,EAAK2iH,UAAU,GAAI,cACxC,CAACtkF,WAAWr+B,EAAK4iH,aAEI,eAAd5iH,EAAKnqC,MACd6sJ,EACE,CAAC,UAAW,QAAS1iH,EAAK2iH,UAAU,GAAI,gBACxC,CAACtkF,WAAWr+B,EAAK4iH,cAMzB,OAAO,GA2BiBC,CAAW7iH,EAAMptC,KAAKC,OACtCiwJ,uBAAwB,GACxB/zC,MAAM,YAER,gBAACnf,EAAA,EAAD,KACE,gBAAC,QAAD,uEAIDg0D,EAAaK,UAAYL,EAAaK,SAAS3B,OAC9C,gBAAC,IAAD,CACEn/I,qBAAmB,EACnBC,gBAAiB,IACf,gBAACs4E,EAAA,EAAD,CACE/6E,SAAU,oCACV7L,MAAOlC,KAAKsB,MAAMkrD,cAClBrqD,SAAUD,IACRlC,KAAK2B,SAAS,CACZ6qD,cAAetqD,KAGnBmtB,WAAYwB,OAAOqrB,KAAK80G,EAAaK,SAAS3B,OAAOnqJ,IACnDoe,IAAU,CACRniB,KAAMmiB,EACNzhB,MAAOyhB,KAGX4L,aAAW,EACX7kB,WAAS,IAGb+F,aAAcxL,GACZ,gBAACyiF,EAAA,EAAD,CACEziF,MAAOA,EACPX,MAAO,gBAAC,QAAD,eACPC,SAAO,EACPC,QAAS,KACPsrJ,EAAO,CAAC,gBAAiB,CAAC9vJ,KAAKsB,MAAMkrD,sBAnDzB,MChFvB,MAAMoiG,EACX0C,GAEO,CACL,CACEhtJ,MAAO,mBACPD,IAAK,aACLktJ,gBAAiB,CAAC5C,GAAYmB,SAAQhlF,YACpC,gBAACylF,EAAD,CACEnmH,mBAAoBukH,EACpBmB,OAAQA,EACRhlF,OAAQA,KAId,CACExmE,MAAO,SACPD,IAAK,CAAC,cAAe,UACrBktJ,gBAAiB,IAAM,KACvB/lD,eAAe,EACfujD,iBAAkByC,GACXA,EAEEA,EAAUjsJ,IAAI,CAACyrJ,EAAcngJ,KAAf,CACnBvM,MAAO0sJ,EAAaS,MACpBptJ,IAAKwM,EACL0gJ,gBAAiB,CAAC5C,GAAYmB,SAAQhlF,YACpC,gBAAC,EAAD,CACEkmF,aAAcrC,EACdmB,OAAQA,EACRhlF,OAAQA,IAGZ0gC,eAAe,EACfujD,iBAAkBiC,GAAgB,CAChC,CACE1sJ,MAAO,kBACPD,IAAI,aACJktJ,gBAAiB,CAAC5C,GAAYmB,SAAQhlF,YACpC,gBAACylF,EAAD,CACEnmH,mBAAoBukH,EACpBmB,OAAQA,EACRhlF,OAAQA,KAId,CACExmE,MAAO,YACPD,IAAI,aACJktJ,gBAAiB,IAAM,KACvB/lD,eAAe,EACfujD,iBAAkBt9F,GACXA,GAAcA,EAAUi+F,MAEtB7+H,OAAOqrB,KAAKuV,EAAUi+F,OAAOnqJ,IAAIoe,GAEnC8tC,EAAUi+F,MAAM/rI,SAC6B7Y,WAAvC2mD,EAAUi+F,MAAM/rI,GAAY/d,OAI9B,CACLtB,MAAM,GAAD,OAAKqf,EAAL,aACH8tC,EAAUi+F,MAAM/rI,GAAY/d,OADzB,KAGLvB,IAAK,CAAC,QAASsf,GACf4tI,gBAAiB,IAAM,KACvBxC,iBAAkB2C,GAChBA,EACIA,EACGrmJ,OAAO8kJ,KAAmBA,GAC1B5qJ,IAAI,CAAC4qJ,EAAet/I,KACZ,CACLvM,MAAM,IAAD,OAAM6rJ,EAAcniH,IACzB3pC,IAAKwM,EACL0gJ,gBAAiB,CACf5C,GACEmB,SAAQhlF,YAEV,gBAAC6mF,EAAD,CACExB,cAAexB,EACfmB,OAAQA,EACRhlF,OAAQA,OAKlB,IA5BC,MAPgC,QA/B5B,K,YCxC/B,MAAMjoE,EAAS,CACbuM,UAAW,CACTO,KAAM,EACNuqD,UAAW,WAQA,QAAGy0F,WAAU7jF,YAC1B,uBAAK7lE,MAAOpC,EAAOuM,WACjB,gBAACorF,EAAA,EAAD,KACE,gBAAC,QAAD,8IAKF,gBAAC,IAAD,CACEg1D,UAAW,EACXvsJ,MAAM,EACN8B,IAAK4pJ,EACL7jF,OAAQ19B,GACC09B,EAAO19B,EAAK2iH,UAAU51F,OAAO/sB,EAAKnqC,MAAOmqC,EAAK4iH,WAEvDE,uBAAwB,GACxB/zC,MAAM,a,2IC5BZ,MAAMt5G,GAAS,CACboG,OAAQ,CACNoG,QAAS,OACTrJ,WAAY,WAuBD,MAAM4rJ,WAAsB9xJ,YAA+B,eAAD,oBACvEwB,MAAQ,CACNuwJ,eAAgB,IAFqD,KAKvEC,mBAAqB,CACnB7uJ,EACA8uJ,EACAC,EACA1oJ,EAAgB,EAChB9C,EAAe,MACa,MACpByrJ,EAAqBjyJ,KAAKC,MAA1BgyJ,iBAEFC,EACJH,GAAiBC,EAAQ55C,MAA+B,IAAvB25C,EAAc35C,KAC1C45C,EAAQ55C,KAAO25C,EAAc35C,KAAQ,IACtC,IACA+5C,EACJF,GAAoBD,EAAQ55C,MAAkC,IAA1B65C,EAAiB75C,KAChD45C,EAAQ55C,KAAO65C,EAAiB75C,KAAQ,IACzC,IACAg6C,EAAcpyJ,KAAKqyJ,oBAAoB7rJ,GAE7C,MAAO,CACL,CACEvD,OACAm1G,KAAM45C,EAAQ55C,KAAR,UAAkB45C,EAAQ55C,KAAK/8C,QAAQ,GAAvC,MAAgD,IACtD62F,cAAc,GAAD,OAAKA,EAAc72F,QAAQ,GAA3B,KACb82F,aAAa,GAAD,OAAKA,EAAa92F,QAAQ,GAA1B,KACZ/xD,QACAgpJ,iBAAkBzhI,OAAOqrB,KAAK81G,EAAQO,aAAa3sJ,OACnDY,OACA4rJ,kBAEEA,EACA,GACAI,IAAQR,EAAQO,YAAa,CAACE,EAAYC,IACxC1yJ,KAAK8xJ,mBACHY,EACAV,EACAS,EACAnpJ,EAAQ,EAJV,UAKK9C,EALL,YAKa8C,EALb,YAKsBopJ,OA3CuC,KAiDvEL,oBAAuB7rJ,GACdxG,KAAKsB,MAAMuwJ,eAAerrJ,GAlDoC,KAqDvEmsJ,eAAkBnsJ,IAChBxG,KAAK2B,SAASL,IAAK,CACjBuwJ,eAAe,eACVvwJ,EAAMuwJ,eADG,CAEZ,CAACrrJ,IAAQlF,EAAMuwJ,eAAerrJ,SAzDmC,KA8DvEo0D,cAAgB,EAAG/pD,WACbA,EAAQ,EACH,iBAEAA,EAAQ,IAAM,EAAI,eAAiB,cAlEyB,KAsEvE+hJ,uBAAyB,EAAGC,aAExB,uBAAK5tJ,MAAOpC,GAAOoG,QACjB,uBAAKhE,MAAO,CAAElC,MAAuB,EAAhB8vJ,EAAQvpJ,SAC5BupJ,EAAQP,eACP,gBAACzyJ,EAAA,EAAD,CAAY2E,QAAS,IAAMxE,KAAK2yJ,eAAeE,EAAQrsJ,OACpDqsJ,EAAQT,YAAc,gBAAC,KAAD,MAAmB,gBAAC,IAAD,OAG5C,uBAAKntJ,MAAO,CAAElC,MAAO,MAEtB8vJ,EAAQ5vJ,MAKflD,SAAU,MACAkyJ,EAAqBjyJ,KAAKC,MAA1BgyJ,iBACR,IAAKA,EAAkB,OAAO,KAE9B,MAAMa,EAAW9yJ,KAAK8xJ,mBAAmB,MAAO,KAAMG,GAEtD,OACE,gBAAChxJ,EAAA,EAAD,KACGuS,GACC,gBAAC,IAAD,KACG,EAAG/D,SAAQ1M,WACV,gBAAC,IAAD,CACEy4D,aAAc,GACd/rD,OAAQA,EACR8R,UAAW/N,EAASioD,mBACpBC,gBAAiB,oBACjBC,SAAUm3F,EAASltJ,OACnBg2D,UAAW,EAAG/qD,WAAYiiJ,EAASjiJ,GACnC6U,UAAW,GACXm2C,WAAY,OACZC,aAAc97D,KAAK46D,cACnB73D,MAAOA,GAEP,gBAAC,IAAD,CACEuB,MAAO,gBAAC,QAAD,qBACPy3D,QAAQ,OACRh5D,MAAe,GAARA,EACPwe,UAAW,cACXwxI,aAAc/yJ,KAAK4yJ,yBAErB,gBAAC,IAAD,CACEtuJ,MAAO,gBAAC,QAAD,kBACPy3D,QAAQ,OACRh5D,MAAe,GAARA,EACPwe,UAAW,gBAEb,gBAAC,IAAD,CACEjd,MAAO,gBAAC,QAAD,oBACPy3D,QAAQ,gBACRh5D,MAAe,GAARA,EACPwe,UAAW,gBAEb,gBAAC,IAAD,CACEjd,MAAO,gBAAC,QAAD,mBACPy3D,QAAQ,eACRh5D,MAAe,GAARA,EACPwe,UAAW,oB,eC7J7B,MAAM1e,GAAS,CACbmwJ,eAAgB,CACdrjJ,KAAM,IAWK,MAAMsjJ,WAAiBnzJ,YACpCC,SAAU,MAAD,EAC0DC,KAAKC,MAA9DizJ,EADD,EACCA,QAASC,EADV,EACUA,OAAQC,EADlB,EACkBA,eAAgBC,EADlC,EACkCA,oBAEzC,OACE,gBAAC9jJ,EAAA,EAAD,KACE,gBAAC,IAAD,CAAMvJ,WAAW,SAASX,eAAe,WACrCguJ,GAAuBD,GACvB,gBAACp2D,EAAA,EAAD,KACE,gBAAC,QAAD,kDACyBo2D,EAAeE,MAAMC,iBAIhDF,GAAuBD,GACvB,gBAAC1rE,EAAA,EAAD,CAAcpjF,MAAO,gBAAC,QAAD,gBAAwBE,QAAS0uJ,KAEtDG,IAAwBD,GACxB,gBAAC1rE,EAAA,EAAD,CACEpjF,MAAO,gBAAC,QAAD,wBACPE,QAAS0uJ,IAGZG,GACC,gBAAC3rE,EAAA,EAAD,CACEpjF,MAAO,gBAAC,QAAD,uBACPE,QAAS2uJ,KAIdE,GACC,gBAAC,IAAD,CAAMrtJ,WAAW,UACf,gBAACwtJ,GAAA,EAAD,CAAgBvuJ,MAAO,CAAE0K,KAAM,GAAKk5B,QAAS,mBAGjD,uBAAK5jC,MAAOpC,GAAOmwJ,gBAChBI,GACC,gBAAC,GAAD,CACEnB,iBAAkBmB,EAAeK,yBAGnCL,GACA,gBAAC54D,EAAA,EAAD,KACE,gBAAC,QAAD,qFCpBC,MAAMk5D,WAAwB5zJ,YAA+B,eAAD,oBACzEwB,MAAQ,CACNqyJ,kBAAmB,KACnBC,0BAA2B,GAC3BC,SAAS,GAJ8D,KAOzEC,SAA0B,KAP+C,KASzEC,aAAe,KACT/zJ,KAAK8zJ,UAAU9zJ,KAAK8zJ,SAAS3tG,WAAW,WAAY,MAAO,GAAI,QAGrEpmD,SAAU,MAAD,EAUHC,KAAKC,MARP0uJ,EAFK,EAELA,SACA3pD,EAHK,EAGLA,UACA8qD,EAJK,EAILA,OACAhlF,EALK,EAKLA,OACAkpF,EANK,EAMLA,gBACAC,EAPK,EAOLA,eACAb,EARK,EAQLA,eACAC,EATK,EASLA,oBATK,EAeHrzJ,KAAKsB,MAHPqyJ,EAZK,EAYLA,kBACAC,EAbK,EAaLA,0BACAC,EAdK,EAcLA,QAGF,OACE,gBAACr6B,EAAA,EAAD,CACEh3H,IAAKsZ,GAAY9b,KAAK8zJ,SAAWh4I,EACjCA,QAAS,CACPo4I,WAAY,CACV3xJ,KAAM,UACN9B,MAAO,kBACPioD,gBAAiB,GACjB1sC,aAAc,IACZ,gBAACzM,EAAA,EAAD,KACE,gBAAC,IAAD,CAAQxJ,QAAM,EAACnB,UAAQ,EAAC4mD,cAAY,GAClC,gBAAC,IAAD,CAAMnmD,eAAe,UACnB,gBAACqiF,EAAA,EAAD,CACEpjF,MAAO,gBAAC,QAAD,gBACPE,QAASwgG,EACTzgG,SAAO,KAGX,gBAAC,EAAD,CACEoqJ,SAAUA,EACVC,yBAA0BA,EAC1BI,kBAAmB,CACjB2E,EACAC,IAEA5zJ,KAAK2B,SAAS,CACZgyJ,oBACAC,mCAQd,qBAAsB,CACpBrxJ,KAAM,UACN+lD,YAAY,EACZtsC,aAAc,IACZ,gBAACzM,EAAA,EAAD,KACE,gBAAC,IAAD,CAAQxJ,QAAM,EAACnB,UAAQ,GACpB+uJ,EACCE,EACE,gBAACM,EAAD,CACExF,SAAUx3I,IACRw3I,EACAiF,EACA,MAEF9oF,OAAQ,CAACtkE,EAAM7D,IACbmoE,EACE8oF,EAA0Bz5F,OAAO3zD,GACjC7D,KAKNgxJ,EAAkBpC,gBAChBp6I,IAAIw3I,EAAUiF,EAA2B,MACzC,CACE9D,OAAQ,CAACtpJ,EAAMgqJ,IACbV,EACE8D,EAA0Bz5F,OAAO3zD,GACjCgqJ,GAEJ1lF,OAAQ,CAACtkE,EAAM7D,IACbmoE,EACE8oF,EAA0Bz5F,OAAO3zD,GACjC7D,MAIN,gBAAC63F,EAAA,EAAD,KACE,gBAAC,QAAD,uFAQN,gBAACA,EAAA,EAAD,KACGm0D,EACC,gBAAC,QAAD,iDAEA,gBAAC,QAAD,4FAON,gBAAC,IAAD,KACE,gBAAC,IAAD,CAAMtpJ,eAAe,gBAAgBW,WAAW,UAC9C,gBAACC,EAAA,EAAD,CAAYC,aAAa,wBACzB,2BACE,gBAACm6F,EAAA,EAAD,CACExrF,YAAa,gBAAC,IAAD,MACbD,cAAe,gBAAC,IAAD,MACfvK,QAASwpJ,EACTvpJ,QAAS,CAACC,EAAGoI,IACX3S,KAAK2B,SAAS,CACZkyJ,QAASlhJ,YAW7ByhJ,SAAU,CACR7xJ,KAAM,YACN9B,MAAO,gBACPub,aAAc,IACZ,gBAAC,GAAD,CACEk3I,QAASc,EACTb,OAAQc,EACRb,eAAgBA,EAChBC,oBAAqBA,MAK7B7oG,aAAc,CACZtyB,UAAW,SACXuyB,MAAO,CACLvyB,UAAW,MACXuyB,MAAO,aACPC,OAAQ,qBACRC,gBAAiB,IAEnBD,OAAQ,WACRC,gBAAiB,O,wBCxMZ,MAAM0pG,WAAyBv0J,YAC5CC,SACE,MAAMu0J,IAAiBt0J,KAAKC,MAAMs0J,YAAY3uJ,OAC9C,OACE,gBAAC,IAAD,KACE,gBAACgH,GAAA,EAAD,CACElC,WAAS,EACTxI,MAAOoyJ,EAAet0J,KAAKC,MAAMu0J,WAAa,EAC9CryJ,SAAU,CAACoI,EAAGwJ,EAAG7R,IACflC,KAAKC,MAAMw0J,iBAAiBzoH,SAAS9pC,EAAO,KAAO,GAErD5B,UAAWg0J,GAEVt0J,KAAKC,MAAMs0J,YAAYhvJ,IAAIyoC,GAC1B,gBAAChgC,GAAA,EAAD,CACE9L,MAAO8rC,EACP3pC,IAAK2pC,EACLvoC,YAAa,iCAAkBuoC,WAGjCsmH,GACA,gBAACtmJ,GAAA,EAAD,CACE9L,MAAO,EACPuD,YAAa,mG,gCCvB3B,MAAMa,G,OAAWC,GAAgB,YAC3BmuJ,GAAcpuJ,GAAWA,GAASouJ,YAAc,KAsCvC,MAAMC,WAAiB70J,YAA+B,eAAD,oBAClEwB,MAAQ,CACNszJ,uBAAuB,EACvBC,oBAAqB,KACrBN,YAAa,GACbO,iBAAkB,GAClBC,gBAAiB,GACjB1B,oBAAqB,GACrBmB,WAAY,GARoD,KAWlEQ,kBAAwD,GAXU,KA8ClEC,uBAAyB,KAClBP,KAELA,GAAY5X,mBAAmB,8BAC/B4X,GAAY5X,mBAAmB,2BAC/B4X,GAAY5X,mBAAmB,8BAC/B4X,GAAY5X,mBAAmB,8BAC/B4X,GAAY5X,mBAAmB,8BAC/B4X,GAAY5X,mBAAmB,+BAtDiC,KAyDlEoY,aAAe,KACRR,KAEL10J,KAAK2B,SAAS,CACZizJ,uBAAuB,IAEzB50J,KAAKi1J,yBAELP,GAAYj8H,GAAG,0BAA2B,CAAC/1B,EAAOyV,KAChDnY,KAAK2B,SACH,CACEkzJ,oBAAqB18I,GAEvB,IAAMnY,KAAKulD,mBAIfmvG,GAAYj8H,GAAG,6BAA8B,CAAC/1B,GAASsrC,SAAU,MAAD,EAC1BhuC,KAAKsB,MAAjCizJ,EADsD,EACtDA,YAAaC,EADyC,EACzCA,WACfW,EAAuBZ,EAAYlpJ,OACvC+pJ,GAAcA,IAAepnH,GAE/BhuC,KAAK2B,SACH,CACE4yJ,YAAaY,EACbX,WACEA,IAAexmH,EACXwmH,EACAW,EAAqBvvJ,OACrBuvJ,EAAqBA,EAAqBvvJ,OAAS,GACnD4uJ,GAER,IAAMx0J,KAAKulD,mBAIfmvG,GAAYj8H,GAAG,6BAA8B,CAAC/1B,GAASsrC,SACrDhuC,KAAK2B,SACH,CACE4yJ,YAAa,IAAIv0J,KAAKsB,MAAMizJ,YAAavmH,GACzCwmH,WAAYxmH,GAEd,IAAMhuC,KAAKulD,mBAIfmvG,GAAYj8H,GAAG,6BAA8B/1B,IAC3C1C,KAAK2B,SACH,CACEizJ,uBAAuB,GAEzB,IAAM50J,KAAKulD,mBAIfmvG,GAAYj8H,GAAG,4BAA6B,CAAC/1B,GAASsrC,KAAIt6B,cACxD9K,QAAQ6C,IAAI,4CACZ,IACE,MAAM04C,EAAOj4C,KAAKC,MAAMuH,GACxB1T,KAAKq1J,eAAernH,EAAImW,GACxB,MAAO55C,GACP3B,QAAQ8zB,KACN,6DACAnyB,MAINmqJ,GAAYY,KAAK,2BA5H+C,KA+HlED,eAAiB,CAACrnH,EAAgBmW,KACX,SAAjBA,EAAKoxG,QACPv1J,KAAK2B,SAAS,CACZmzJ,iBAAiB,eACZ90J,KAAKsB,MAAMwzJ,iBADA,CAEd,CAAC9mH,GAAKmW,EAAKqxG,YAGW,oBAAjBrxG,EAAKoxG,QACdv1J,KAAK2B,SAAS,CACZozJ,gBAAgB,eACX/0J,KAAKsB,MAAMyzJ,gBADD,CAEb,CAAC/mH,GAAKmW,EAAKqxG,YAGW,qBAAjBrxG,EAAKoxG,QACdv1J,KAAK2B,SAASL,IAAK,CACjB+xJ,oBAAoB,eAAM/xJ,EAAM+xJ,oBAAb,CAAkC,CAACrlH,IAAK,OAEnC,qBAAjBmW,EAAKoxG,QACdv1J,KAAK2B,SAASL,IAAK,CACjB+xJ,oBAAoB,eAAM/xJ,EAAM+xJ,oBAAb,CAAkC,CAACrlH,IAAK,OAG7DplC,QAAQ8zB,KACN,iDACAynB,EAAKoxG,UAzJuD,KA8JlEE,MAASznH,IACF0mH,IAELA,GAAYY,KAAK,wBAAyB,CACxCtnH,KACAt6B,QAAS,yBAnKqD,KAuKlEgiJ,OAAU1nH,IACH0mH,IAELA,GAAYY,KAAK,wBAAyB,CACxCtnH,KACAt6B,QAAS,0BA5KqD,KAgLlEiiJ,SAAY3nH,IACL0mH,IAELA,GAAYY,KAAK,wBAAyB,CACxCtnH,KACAt6B,QAAS,4BArLqD,KAyLlEkiJ,MAAQ,CAAC5nH,EAAgBxnC,EAAqB7D,MACvC+xJ,KAELA,GAAYY,KAAK,wBAAyB,CACxCtnH,KACAt6B,QAASxH,KAAKw6D,UAAU,CACtB6uF,QAAS,MACT/uJ,OACA7D,eAIJ+T,WAAW,IAAM1W,KAAK21J,SAAS3nH,GAAK,MAC7B,GAtMyD,KAyMlE6nH,MAAQ,CAAC7nH,EAAgBxnC,EAAqBgqJ,MACvCkE,KAELA,GAAYY,KAAK,wBAAyB,CACxCtnH,KACAt6B,QAASxH,KAAKw6D,UAAU,CACtB6uF,QAAS,OACT/uJ,OACAgqJ,WAIJ95I,WAAW,IAAM1W,KAAK21J,SAAS3nH,GAAK,MAC7B,GAtNyD,KAyNlE8nH,eAAkB9nH,IACX0mH,IAELA,GAAYY,KAAK,wBAAyB,CACxCtnH,KACAt6B,QAAS,mCA9NqD,KAkOlEqiJ,cAAiB/nH,IACV0mH,IAELA,GAAYY,KAAK,wBAAyB,CACxCtnH,KACAt6B,QAAS,kCAvOqD,KA2OlEsiJ,qBAAuB,KAAO,MAAD,EACSh2J,KAAKsB,MAAjCkzJ,EADmB,EACnBA,WACR,OAA4C,IAFjB,EACPD,YACD7sJ,QAAQ8sJ,IAhO7BjvG,gBACOvlD,KAAKC,MAAMsc,UAEhBvc,KAAKC,MAAMulD,WACT,gBAAC,EAAD,CACE2oG,OAAQ,IAAMnuJ,KAAKy1J,MAAMz1J,KAAKsB,MAAMkzJ,YACpCpG,QAAS,IAAMpuJ,KAAK01J,OAAO11J,KAAKsB,MAAMkzJ,YACtCnG,QAASruJ,KAAKg2J,uBACd1H,SAAUtuJ,KAAKg2J,uBACfzH,eAAgB,KACVvuJ,KAAKg1J,kBAAkBh1J,KAAKsB,MAAMkzJ,aACpCx0J,KAAKg1J,kBAAkBh1J,KAAKsB,MAAMkzJ,YAAYT,mBAMxDz0I,oBACMtf,KAAKC,MAAMsc,UACbvc,KAAKk1J,eAIT99I,0BAA0B6C,GACpBA,EAAUsC,WAAavc,KAAKC,MAAMsc,UACpCvc,KAAKk1J,eAITz2G,uBACEz+C,KAAKi1J,yBAqMPl1J,SAAU,MAAD,EASHC,KAAKsB,MAPPuzJ,EAFK,EAELA,oBACAD,EAHK,EAGLA,sBACAJ,EAJK,EAILA,WACAD,EALK,EAKLA,YACAO,EANK,EAMLA,iBACAC,EAPK,EAOLA,gBACA1B,EARK,EAQLA,oBAGF,OACE,gBAAC9jJ,EAAA,EAAD,MACIqlJ,IAA0BC,GAC1B,gBAACxhD,GAAA,EAAD,KACE,gBAACpW,GAAA,EAAD,MACA,gBAACD,EAAA,EAAD,KACE,gBAAC,QAAD,mCAIJ43D,GAAyBC,GACzB,gBAACxhD,GAAA,EAAD,KACE,gBAACrW,EAAA,EAAD,KACE,gBAAC,QAAD,kHAOL43D,GACC,gBAAC,IAAD,CAAQ7uJ,QAAM,EAACnB,UAAQ,GACrB,gBAAC,GAAD,CACE4vJ,WAAYA,EACZD,YAAaA,EACbE,iBAAkBzmH,GAChBhuC,KAAK2B,SAAS,CACZ6yJ,WAAYxmH,MAIjBhuC,KAAKg2J,wBACJ,gBAAC,GAAD,CACExzJ,IAAKyzJ,GACFj2J,KAAKg1J,kBAAkBR,GAAcyB,EAExCtH,SAAUmG,EAAiBN,GAC3BrG,OAAQ,IAAMnuJ,KAAKy1J,MAAMjB,GACzBpG,QAAS,IAAMpuJ,KAAK01J,OAAOlB,GAC3BxvD,UAAW,IAAMhlG,KAAK21J,SAASnB,GAC/B1pF,OAAQ,CAACtkE,EAAMgqJ,IAASxwJ,KAAK41J,MAAMpB,EAAYhuJ,EAAMgqJ,GACrDV,OAAQ,CAACtpJ,EAAMgqJ,IAASxwJ,KAAK61J,MAAMrB,EAAYhuJ,EAAMgqJ,GACrDwD,gBAAiB,IAAMh0J,KAAK81J,eAAetB,GAC3CP,eAAgB,IAAMj0J,KAAK+1J,cAAcvB,GACzCpB,eAAgB2B,EAAgBP,GAChCnB,oBAAqBA,EAAoBmB,MAG3Cx0J,KAAKg2J,wBACL,gBAACx7D,EAAA,EAAD,KACE,gBAAC,QAAD,gF,2DC1VD,MAAM07D,WAAuBn8E,KAAY,eAAD,oBAGrDz4E,MAAQ,CACN60J,qBAAqB,GAGvB5wG,gBACMvlD,KAAKoc,QAAQpc,KAAKoc,OAAOmpC,gBAG/BgoD,qBAIAn2F,4BACEpX,KAAKo2J,wBAGP92I,oBACEtf,KAAKo2J,wBAGPA,wBAEIp2J,KAAKohG,sBACLphG,KAAKC,MAAMsc,WACVvc,KAAKsB,MAAM60J,sBAEZn2J,KAAKohG,qBAAqBoC,uBAC1BxjG,KAAK2B,SAAS,CACZw0J,qBAAqB,KAK3Bp2J,SACE,OACE,gBAAC,WAAD,KACE,gBAAC,GAAD,iBAAcC,KAAKC,MAAnB,CAA0BuC,IAAK4Z,GAAWpc,KAAKoc,OAASA,KACxD,gBAACsnF,GAAA,EAAD,CACElhG,IAAKmhG,GACF3jG,KAAKohG,qBAAuBuC,EAE/BpG,qBAAsB,KAChBv9F,KAAKC,MAAMs9F,sBACbv9F,KAAKC,MAAMs9F,wBAEfvvD,GAAG,WACHvtC,MAAO,gBAAC,QAAD,iBACPmjG,KAAK,Y,2NCzCf,MAAMyyD,EAAmB,CACvB,gBAAiB,CACfC,uBAAyBvzG,GAAiB,IAC1CwzG,oBACE,6DAEJ,iBAAkB,CAChBD,uBAAyBvzG,GACvB,GAAK,KAAOA,EAAMU,QAAUV,EAAMU,QAAQ79C,OAAS,GACrD2wJ,oBAAqB,IAEvB,YAAa,CACXD,uBAAyBvzG,GAAiB,EAC1CwzG,oBAAqB,KAInBC,EAAU,CACd,CACEhuE,YAAa,gBACbnkF,IAAK,UAEP,CACEmkF,YAAa,qBACbnkF,IAAK,iBAEP,CACEmkF,YAAa,qBACbnkF,IAAK,iBAEP,CACEmkF,YAAa,mBACbnkF,IAAK,eAEP,CACEmkF,YAAa,wBACbnkF,IAAK,oBAEP,CACEmkF,YAAa,YACbnkF,IAAK,UAaM,QAAG0+C,QAAO0zG,iBACvB,MAAMC,EAASL,EAAiBtzG,EAAMxgD,MAChCo0J,EAAyBh6I,KAAK4a,IAClCq/H,IAAsB7zG,EAAM8zG,UAAWtvJ,KAAKC,QAExCsvJ,EAAyBn6I,KAAKC,IAClC85I,EAASA,EAAOJ,uBAAuBvzG,GAAS4zG,EAAyB,EACzE,GAGF,OACE,gBAAC,OAAD,KACG,EAAGp2J,UACe,UAAjBwiD,EAAM9+C,OACJ,gBAAC,WAAD,KACE,gBAAC,IAAD,CAAM+B,WAAW,UACf,gBAACg3F,EAAA,EAAD,KACE,gBAAC,QAAD,qCAEF,gBAAC,IAAD,MACA,gBAACtV,EAAA,EAAD,CACEpjF,MAAO,gBAAC,QAAD,iBACPE,QAAS,IAAMiyJ,EAAW,cAG9B,gBAAC,IAAD,CAAMzwJ,WAAW,UACf,gBAACw0F,EAAA,EAAD,KACE,gBAAC,QAAD,uGAOa,YAAjBz3C,EAAM9+C,OACR,gBAAC,IAAD,CAAM+B,WAAW,SAASD,QAAM,GAC9B,gBAACytJ,EAAA,EAAD,CACEvuJ,MAAO,CAAE0K,KAAM,GACfzN,MACEw0J,EAAOJ,uBAAuBvzG,GAAS,GACjC2zG,EAAOJ,uBAAuBvzG,GAC9B+zG,GACAJ,EAAOJ,uBAAuBvzG,GAChC,IACA,EAENla,QACEiuH,EAAyB,EAAI,cAAgB,kBAGjD,gBAAC,IAAD,MACCA,EAAyB,EACxB,gBAAC95D,EAAA,EAAD,KACE,gBAAC,QAAD,8BACIrgF,KAAKgK,MAAMmwI,EAAyB,QAI1C,gBAAC95D,EAAA,EAAD,KACE,gBAAC,QAAD,8BAIa,aAAjBj6C,EAAM9+C,OACR,gBAAC,WAAD,KACE,gBAAC,IAAD,CAAM8B,QAAM,GACTywJ,EACEnrJ,OAAOo0B,KAAYsjB,EAAMtjB,EAAOp7B,MAChCkB,IAAI,CAACk6B,EAAQ5uB,IACZ,gBAAC,WAAD,CAAgBxM,IAAKo7B,EAAOp7B,KACf,IAAVwM,GAAe,gBAAC,IAAD,MAChB,gBAAC62E,EAAA,EAAD,CACEpjF,MAAO/D,EAAKG,EAAE++B,EAAO+oD,aACrBjkF,SAAO,EACPC,QAAS,IAAMiyJ,EAAWh3H,EAAOp7B,SAIzC,gBAACs2F,EAAA,EAAD,CACEr2F,MAAO,gBAAC,QAAD,iBACPE,QAAS,IAAMiyJ,EAAW,cAG9B,gBAAC,IAAD,CAAM1wJ,QAAM,GACT2wJ,GAAU,gBAAC15D,EAAA,EAAD,KAAO05D,EAAOH,uBAI7B,gBAAC,IAAD,KACE,gBAAC,QAAD,0B,oCCvIZ,MAAM1zJ,EAAS,CACbk0J,eAAgB,CACdtiJ,QAAS,KAmBE,QAAGuiJ,SAAQr5D,cAAa84D,gBAEnC,gBAAC,IAAD,CAAQ7xJ,UAAQ,EAACmB,QAAM,GACrB,gBAAC,IAAD,KACE,gBAAC,IAAD,KACE,gBAACy0F,EAAA,EAAD,KACE,gBAAC,QAAD,yJAQN,gBAAC,IAAD,KACImD,EAAYC,cAITo5D,EAEiB,IAAlBA,EAAOpxJ,OACT,gBAAC40F,EAAA,EAAD,KACE,gBAAC,QAAD,mEAKF,gBAAC,IAAD,CAAQ51F,UAAQ,EAACmB,QAAM,GACpBixJ,EAAOzxJ,IAAKw9C,IACX,MAAMk0G,EACJl0G,GACAm0G,IAA4B3vJ,KAAKC,MAAOu7C,EAAM8zG,WAAa,EAE7D,OACE,gBAAC/oD,EAAA,EAAD,CAAO7oG,MAAOpC,EAAOk0J,eAAgB1yJ,IAAK0+C,EAAM/U,IAC9C,gBAACgvD,EAAA,EAAD,KAlDhBm6D,KAEA,OAAQA,GACN,IAAK,gBACH,OAAO,gBAAC,QAAD,sBACT,IAAK,iBACH,OAAO,gBAAC,QAAD,kCACT,IAAK,YACH,OAAO,gBAAC,QAAD,kCACT,QACE,OAAOA,IAyCQC,CAAgBr0G,EAAMxgD,MADzB,KACkC,IAChC,gBAAC,QAAD,wBAA+B,IAC9B66F,IAAOr6C,EAAM8zG,UAAW,yBAEzBI,GACA,gBAACI,EAAD,CACEt0G,MAAOA,EACP0zG,WAAYpyJ,GAAOoyJ,EAAW1zG,EAAO1+C,KAGxC4yJ,GACC,gBAACz8D,EAAA,EAAD,KACE,gBAAC,QAAD,oFA7BZ,gBAACyC,EAAA,EAAD,MAJA,gBAACzC,EAAA,EAAD,KACE,gBAAC,QAAD,uD,2CC7DL,MAAMuW,EAASumD,GACpB,IAAIzhJ,QAAQ2oE,GAAO9nE,WAAW8nE,EAAK84E,ICOtB,MAAMC,EAAe,cAAD,gBACjCC,gBAAyC,GADR,KAEjCC,cAAgB,EAFiB,KA6CjCC,WA7CiC,uCA6CpB,WAAOnzG,EAAiBozG,GAAxB,uBAAAxrH,EAAA,sDACLyrH,EAAY,EAAKH,cAAcz3D,WACrC,EAAKy3D,gBAEL,EAAKD,gBAAgBI,IAAa,EAE9B70G,EAAQ,KAND,UAQJ,EAAK46C,YARD,sDAUmC,EAAKA,YAAzCp6C,EAVC,EAUDA,uBAAwBu5C,EAVvB,EAUuBA,QAVvB,iEAcPl0F,QAAQC,KAAR,qCAA2C07C,EAA3C,QAdO,UAeOD,YAASf,EAAwBu5C,EAAQmV,IAAK1tD,GAfrD,QAePxB,EAfO,OAgBH,EAAK80G,gBAAgB,EAAKA,eAAe90G,GAhBtC,kDAkBPn6C,QAAQ8zB,KAAK,uCAAb,MAlBO,yBAqBHq0E,EAAM4mD,GArBH,WAsBJ,EAAKH,gBAAgBI,GAtBjB,wBAuBPhvJ,QAAQC,KAAR,kCAAwC07C,EAAxC,MAvBO,8BA0BFxB,GAA0B,YAAjBA,EAAM9+C,OA1Bb,wBA4BX2E,QAAQC,KAAR,yBAA+B07C,EAA/B,eA5BW,0DA7CoB,wDAMjCyrC,OAAM,YACJ2N,EADI,OAEJq5D,EAFI,eAGJa,IAMA73J,KAAKqxF,OACLrxF,KAAK29F,YAAcA,EACnB39F,KAAK63J,eAAiBA,EAEtBb,EAAOlvJ,QAAQi7C,IACQ,YAAjBA,EAAM9+C,WAEJ8+C,EAAMs6C,WACNt6C,EAAMs6C,UAAY91F,KAAKC,MAzBL,UA0BlBu7C,EAAM8zG,WACN9zG,EAAM8zG,UAAYtvJ,KAAKC,MA3BL,OA6BpBoB,QAAQC,KACN,iEACAk6C,GAGF/iD,KAAK03J,WACH30G,EAAM/U,GACNgpH,EAAOpxJ,OAAS,EArCP,IADJ,SA6CfyrF,OACErxF,KAAKw3J,gBAAkB,IC9BZ,MAAMM,UAAe/9I,YAAyB,eAAD,oBAC1DzY,MAAQ,CACN01J,OAAQ,MAFgD,KAI1De,cAAgB,IAAIR,EAJsC,KAc1DS,oBAAsB,KACfh4J,KAAKsB,MAAM01J,QAEhBh3J,KAAK+3J,cAAc/nE,MAAM,CACvB2N,YAAa39F,KAAKC,MAAM09F,YACxBq5D,OAAQh3J,KAAKsB,MAAM01J,OACnBa,eAAiBI,IACVj4J,KAAKsB,MAAM01J,QAEhBh3J,KAAK2B,SAAS,CACZq1J,OAAQh3J,KAAKsB,MAAM01J,OAAOzxJ,IAAK2yJ,GACzBD,EAASjqH,KAAOkqH,EAASlqH,GAAWiqH,EAEjCC,SA3ByC,KAkC1DC,eAAiB,KAAO,MAAD,EACuBn4J,KAAKC,MAAM09F,YAA/Cp6C,EADa,EACbA,uBAAwBu5C,EADX,EACWA,QAC3BA,GAELt4C,YAAUjB,EAAwBu5C,EAAQmV,KAAKx8F,KAC7CuhJ,IACEh3J,KAAK2B,SACH,CACEq1J,UAEF,KACEh3J,KAAKg4J,sBACDh4J,KAAKC,MAAMm4J,iBAAiBp4J,KAAKC,MAAMm4J,qBAIjD,SAlDsD,KAwD1DC,UAAY,CAACt1G,EAAc1+C,KACzB,MAAM6C,EAAM47C,YAAoBC,EAAO1+C,GACnC6C,GAAK1D,IAAOC,gBAAgByD,IApDlCoY,oBACEtf,KAAKm4J,iBAGP15G,uBACEz+C,KAAK+3J,cAAc1mE,OAkDrBtxF,SACE,OACE,kBAACu4J,EAAD,CACEtB,OAAQh3J,KAAKsB,MAAM01J,OACnBr5D,YAAa39F,KAAKC,MAAM09F,YACxB84D,WAAYz2J,KAAKq4J,aCtEV,MAAME,UAAqBx+I,YAAyB,eAAD,oBAChEy+I,iBAAmB,KAEjBx4J,KAAKif,eAGPlf,SAAU,MAAD,EACgCC,KAAKC,MAApC2D,EADD,EACCA,KAAMC,EADP,EACOA,QAAS85F,EADhB,EACgBA,YACvB,OAAK/5F,EAGH,kBAAC82F,EAAA,EAAD,CACEj6F,MAAO,kBAAC,QAAD,wBACPgE,eAAgBZ,EAChBO,QAAS,CACP,kBAACu2F,EAAA,EAAD,CACEr2F,MAAO,kBAAC,QAAD,cACPD,IAAI,QACJE,SAAS,EACTC,QAASX,KAGby8C,iBAAkB,CAChB,kBAACr6C,EAAA,EAAD,CAAY5B,IAAI,OAAO6B,aAAc,iBAEvCxB,mBAAmB,EACnBd,KAAMA,EACNgB,UAAQ,GAER,kBAAC,EAAD,CACEwzJ,gBAAiBp4J,KAAKw4J,iBACtB76D,YAAaA,KAvBD,M,6CCTP,IAAGL,eAAcm7D,QAAOl7D,2BACrC,IAAKk7D,EAAO,OAAO,gBAACx7D,EAAA,EAAD,MACnB,MAAMy7D,EAAkBp7D,KAAkBA,EAAaE,OACjDm7D,EAAiBr7D,IAAiBA,EAAaE,OAErD,OACE,gBAAC,IAAD,CAAQ54F,UAAQ,GACd,gBAACo4F,EAAA,EAAD,KACE,gBAAC,QAAD,sEACYrgF,KAAKC,IAAI67I,EAAM77I,IAAM67I,EAAM3rJ,QAAS,GADhD,EAEiB2rJ,EAAM77I,QAGxB87I,GAAmBD,EAAMG,cACxB,gBAAC57D,EAAA,EAAD,KACE,gBAAC,QAAD,+EAMH07D,GAAmBD,EAAMG,cACxB,gBAAC,IAAD,CAAMvzJ,eAAe,SAASW,WAAW,UACvC,gBAAC0hF,EAAA,EAAD,CACEpjF,MAAO,gBAAC,QAAD,2BACPE,QAAS+4F,EACTh5F,SAAO,KAIZo0J,GACC,gBAAC37D,EAAA,EAAD,KACE,gBAAC,QAAD,wEAKH27D,GACC,gBAAC,IAAD,CAAMtzJ,eAAe,SAASW,WAAW,UACvC,gBAAC0hF,EAAA,EAAD,CACEpjF,MAAO,gBAAC,QAAD,2BACPE,QAAS+4F,EACTh5F,SAAO,O,qECtCnB,MAAM1B,GAAS,CACbg2J,QAAS,CAAElpJ,KAAM,GACjBmpJ,eAAgB,CAAEnpJ,KAAM,IA4BX,SACbopJ,aACAtC,aACA1zG,QACAi2G,kBACAC,sBACAhuC,UACAiuC,eACAC,mCAEA,gBAACC,EAAA,EAAD,CACEC,WACiB,WAAfN,GAA0C,uBAAfA,EACvB,EACe,aAAfA,GAA4C,WAAfA,EAC7B,EACe,sBAAfA,GAAqD,UAAfA,EACtC,EACe,SAAfA,EACAG,EACE,EACA,GACD,EAEPl8E,YAAY,WACZ/3E,MAAOpC,GAAOg2J,SAEd,gBAACS,EAAA,EAAD,KACE,gBAACC,EAAA,EAAD,KACE,gBAAC,QAAD,qBAEF,gBAACC,EAAA,EAAD,KACGvuC,EACC,gBAAC53G,GAAA,EAAD,CAAcL,KAAK,SACjB,gBAAC,QAAD,wCAA+C,IAC/C,gBAAC,QAAD,mEAIe,uBAAf+lJ,EACF,gBAAC,IAAD,CAAQhzJ,QAAM,EAACnB,UAAQ,GACrB,gBAACo4F,EAAA,EAAD,KACE,gBAAC,QAAD,uCAEF,gBAAC,IAAD,CAAMj3F,QAAM,GACV,gBAACytJ,EAAA,EAAD,CACEvuJ,MAAOpC,GAAOi2J,eACd52J,MACE82J,EAAkB,EACbC,EAAsBD,EAAmB,IAC1C,EAENnwH,QAAQ,kBAKd,gBAAC,IAAD,CAAQ9iC,QAAM,EAACnB,UAAQ,GACrB,gBAACo4F,EAAA,EAAD,KACE,gBAAC,QAAD,+BAEF,gBAAC,IAAD,CAAMj3F,QAAM,GACV,gBAACytJ,EAAA,EAAD,CAAgBvuJ,MAAOpC,GAAOi2J,qBAMvCI,GACC,gBAACI,EAAA,EAAD,KACE,gBAACC,EAAA,EAAD,KACE,gBAAC,QAAD,iCAEF,gBAACC,EAAA,EAAD,KACGvuC,EACC,gBAAC53G,GAAA,EAAD,CAAcL,KAAK,SACjB,gBAAC,QAAD,qDAA4D,IAC5D,gBAAC,QAAD,mEAIe,aAAf+lJ,EACF,gBAAC,IAAD,CAAM/yJ,WAAW,UACf,gBAACorG,EAAA,EAAD,CAAkB18F,KAAM,KACxB,gBAAC,IAAD,MACA,gBAACsoF,EAAA,EAAD,KACE,gBAAC,QAAD,uCAIJ,gBAAC,IAAD,CAAMh3F,WAAW,SAASD,QAAM,GAC9B,gBAACytJ,EAAA,EAAD,CACEvuJ,MAAOpC,GAAOi2J,eACd52J,MACE82J,EAAkB,EACbC,EAAsBD,EAAmB,IAC1C,EAENnwH,QAAQ,mBAOnBqwH,GACC,gBAACI,EAAA,EAAD,KACE,gBAACC,EAAA,EAAD,KACE,gBAAC,QAAD,4BAEF,gBAACC,EAAA,EAAD,KACGvuC,GACC,gBAAC53G,GAAA,EAAD,CAAcL,KAAK,SACjB,gBAAC,QAAD,sGAMF+vC,IAAUkoE,GACV,gBAACjuB,EAAA,EAAD,KACE,gBAAC,QAAD,8BAGHj6C,GAAS,gBAACs0G,EAAD,CAAet0G,MAAOA,EAAO0zG,WAAYA,IAClD0C,GACC,gBAAC3+D,EAAA,EAAD,KACE,gBAAC,QAAD,iKAUR0+D,GACA,gBAACI,EAAA,EAAD,KACE,gBAACC,EAAA,EAAD,KACE,gBAAC,QAAD,cAEF,gBAACC,EAAA,EAAD,QC/IO,MAAMC,WAAuB1/I,YAAyB,eAAD,oBAClEzY,MAAQ,CACNy3J,WAAY,GACZh2G,MAAO,KACP22G,kBAAmB,KACnBT,oBAAqB,EACrBD,gBAAiB,EACjBW,gBAAgB,EAChB1uC,SAAS,EACTuhC,YAAaxsJ,KAAKC,MAAM25J,eAAeC,sBACrC75J,KAAKC,MAAM2G,UAVmD,KAalEmxJ,cAAgB,IAAIR,EAb8C,KAmBlEuC,oBAAsB,CACpBb,EACAD,IAEAh5J,KAAK2B,SAAS,CACZs3J,sBACAD,oBAzB8D,KA4BlEe,iBAAoBp8D,IACb39F,KAAKsB,MAAMyhD,OAEhB/iD,KAAK+3J,cAAc/nE,MAAM,CACvB2N,cACAq5D,OAAQ,CAACh3J,KAAKsB,MAAMyhD,OACpB80G,eAAiB90G,GAAiB/iD,KAAK2B,SAAS,CAAEohD,aAlCY,KAsClEi3G,kBAAqBr8D,IACnB,MAAMlY,EAAIz4D,GAAOA,EAD+B,EAEZhtB,KAAKC,MAAjC2G,EAFwC,EAExCA,QAASgzJ,EAF+B,EAE/BA,eAGjB,GAFAK,YAAmBL,EAAe32J,OAE7B4/F,YAAwBpd,EAAGqd,YAAUrd,EAAG7+E,IAAW,OAExD,MAAMszJ,EAAexmJ,GAAqByE,IAWxC,MAVKnY,KAAKsB,MAAM2pH,UACdjrH,KAAK2B,SAAS,CACZspH,SAAS,IAEX/0G,YAAaxC,GAAWyE,EAAIzE,QAAJ,YAAmByE,EAAIzE,SAAY,IAAK,CAC9DqlJ,WAAY/4J,KAAKsB,MAAMy3J,WACvBhM,SAAU50I,KAIRA,GAGFgiJ,EAAwB,CAC5BvzJ,UACAwzJ,mBAAoBp6J,KAAK85J,oBACzBtN,YAAaxsJ,KAAKsB,MAAMkrJ,aAG1BxsJ,KAAK2B,SAAS,CACZo3J,WAAY,SACZE,oBAAqB,EACrBD,gBAAiB,EACjB/tC,SAAS,EACTloE,MAAO,OAET62G,EACGS,gBAAgBF,GAChB1kJ,KAAK6kJ,GACGV,EAAeW,aACpBJ,EACAG,GAEDJ,EAAc,wCAChBzkJ,KAAK+kJ,IACJx6J,KAAK2B,SAAS,CACZo3J,WAAY,uBAEPa,EAAea,wBACpBN,EACAK,IAEDN,EAAc,oCAChBzkJ,KAAKilJ,IACJ16J,KAAK2B,SAAS,CACZo3J,WAAY,aAEPa,EAAee,kBACpBR,EACAO,IAEDR,EAAc,oCAChBzkJ,KAAKikJ,IAAsB,MAClBkB,EAAoChB,EAApCgB,aAAcC,EAAsBjB,EAAtBiB,kBACtB,OAAMD,GAAkBC,GACtB76J,KAAK2B,SAAS,CACZo3J,WAAY,WAEP6B,EAAaT,EAAuBT,GACxCjkJ,KAAMqlJ,IACL96J,KAAK2B,SAAS,CACZo3J,WAAY,sBAEP8B,EACL76J,KAAKsB,MAAMkrJ,YACX7uD,EACAm9D,IAEDZ,EAAc,uFAChBzkJ,KAAKstC,IACJ/iD,KAAK2B,SACH,CACEohD,QACAg2G,WAAY,SAEd,KACE/4J,KAAK+5J,iBAAiBp8D,KAInB,CAAE+7D,sBACRQ,EAAc,iDAGd,CAAER,sBACRQ,EAAc,sCAChBzkJ,KAAK,EAAGikJ,wBACP15J,KAAK2B,SAAS,CACZ+3J,oBACAC,gBAAgB,EAChBZ,WAAY,WAGf7gJ,MAAM,SA3IuD,KAgJlE6iJ,eAAkB12J,IAChB,MAAM6C,EAAM47C,YAAoB9iD,KAAKsB,MAAMyhD,MAAO1+C,GAC9C6C,GAAK1D,IAAOC,gBAAgByD,IAlJgC,KAqJlE8zJ,iBAAmB,IACjBh7J,KAAK2B,SAAS,CACZg4J,gBAAgB,IAvJ8C,KA0JlEsB,mBAAsBC,IACpBl7J,KAAK2B,SAASkjI,GAAS,eAClBA,EADkB,CAErB2nB,YAAa0O,EAAQr2B,EAAU2nB,iBA9InC/tG,uBACEz+C,KAAK+3J,cAAc1mE,OAiJrBtxF,SAAU,MAAD,EAUHC,KAAKsB,MARPy3J,EAFK,EAELA,WACAW,EAHK,EAGLA,kBACA32G,EAJK,EAILA,MACAi2G,EALK,EAKLA,gBACAC,EANK,EAMLA,oBACAhuC,EAPK,EAOLA,QACA0uC,EARK,EAQLA,eACAnN,EATK,EASLA,YATK,EAW0CxsJ,KAAKC,MAA9C2G,EAXD,EAWCA,QAAS+2F,EAXV,EAWUA,YAAai8D,EAXvB,EAWuBA,eAC9B,IAAKhzJ,EAAS,OAAO,KAErB,MAAMu0J,EAAiBx9D,GACrBA,EAAYmmB,QAAU81C,EAAewB,gBACjCz9D,EAAYmmB,OAAO81C,EAAewB,iBAClC,KAUN,OACE,kBAAC,IAAD,CAAQx2J,UAAQ,GACd,kBAAC,IAAD,KACGg1J,EAAerwG,aAAa,CAC3B3iD,UACA4lJ,cACAC,kBAAmBzsJ,KAAKi7J,wBAGzBrB,EAAewB,iBAAmBz9D,EAAYC,gBAC/C,kBAAC,IAAD,CAAMv4F,eAAe,UACnB,kBAACqiF,EAAA,EAAD,CACEpjF,MAAOs1J,EAAeyB,0BACtB92J,SAAO,EACPC,QAAS,IAAMxE,KAAKg6J,kBAAkBr8D,GACtCr9F,UAxBcq9F,KACtB,IAAKstB,GAA0B,KAAf8tC,GAAoC,SAAfA,EAAuB,OAAO,EAEnE,MAAMN,EAAgB0C,EAAcx9D,GACpC,QAAI86D,IAASA,EAAMG,eAEZgB,EAAe0B,eAAe9O,IAkBlB8O,CAAe39D,QAI7Bi8D,EAAewB,iBAAmBz9D,EAAYC,eAC/C,kBAAC29D,EAAD,CACEj+D,aAAcK,EAAYL,aAC1Bm7D,MAAO0C,EAAcx9D,GACrBJ,qBAAsBv9F,KAAKC,MAAMs9F,yBAGlCq8D,EAAewB,kBAAoBz9D,EAAYC,eAChD,kBAACK,EAAA,EAAD,CACEC,QAASP,EAAYO,QACrBC,gBAAiBR,EAAYQ,kBAGjC,kBAAC,IAAD,CAAMp4F,QAAM,GACV,kBAACy1J,GAAD,CACEzC,WAAYA,EACZG,eAAgBU,EAAewB,gBAC/Br4G,MAAOA,EACP0zG,WAAYz2J,KAAK+6J,eACjB/B,gBAAiBA,EACjBC,oBAAqBA,EACrBhuC,QAASA,KAGZ0uC,GACCC,EAAe6B,kBACf7B,EAAe6B,iBAAiB,CAC9B/B,oBACAlN,cACA3oJ,QAAS7D,KAAKg7J,qB,cChRnB,MAAMU,GAAkB,KAAO,MAAD,EACK57J,WAVZ,qBAAd67J,WACgB,mBAArBA,UAAUC,QACfD,UAAUC,QAOqB,oBAC5BC,EAD4B,KACdC,EADc,KAG7BC,EAAW,IAAMD,GAAgB,GAEjCE,EAAY,IAAMF,GAAgB,GAYxC,OAVAh8J,YAAgB,KACdoZ,OAAOoxE,iBAAiB,SAAUyxE,GAClC7iJ,OAAOoxE,iBAAiB,UAAW0xE,GAE5B,KACL9iJ,OAAOqxE,oBAAoB,SAAUwxE,GACrC7iJ,OAAOqxE,oBAAoB,UAAWyxE,KAEvC,IAEIH,GAWII,GAAe,EAAG76J,cAEtBA,EADcs6J,M,mCCtBvB,MAAM74J,GAAS,CACbwD,KAAM,CAAEtD,MAAO,GAAI0M,OAAQ,IAC3B6gD,aAAc,CAAE1oC,QAAS,IACzBxU,QAAS,CAAEqB,QAAS,KAmCP,MAAMynJ,WAAqBp8J,YAA+B,eAAD,oBACtEwB,MAAQ,CACN66J,kBAAmB,GACnBC,kBAAkB,EAClBC,kBAAkB,GAJkD,KAOtEC,eAAkBj4J,IAChBrE,KAAK2B,SAAS,CACZw6J,kBAAmB93J,KAT+C,KAatEk4J,kBAAoB,CAACjqJ,GAAgB,KACnCtS,KAAK2B,SAAS,CACZy6J,iBAAkB9pJ,KAfgD,KAmBtEkqJ,kBAAoB,CAAC54J,GAAgB,KACnC5D,KAAK2B,SAAS,CACZ06J,iBAAkBz4J,KArBgD,KAyBtE64J,wBAA0B,CACxBC,EACA7rJ,EACA8rJ,IAGE,gBAACz3D,EAAA,EAAD,CACE7gG,IAAKq4J,EAASr4J,IACd/D,SAAUq8J,GAAgBD,EAASp8J,SACnC2E,MACE03J,GAAgBD,EAASp8J,SAAWuC,GAAOytD,kBAAexlD,EAE5D0lD,SAAUksG,EAAStqI,WAAW,CAAEntB,MAAOpC,GAAOwD,OAC9CZ,YAAai3J,EAASz5J,KACtByC,cAAeg3J,EAASx5J,YACxByC,mBAAoB,EACpBnB,QAAS,IAAMxE,KAAKs8J,eAAeI,EAASr4J,OAKlDtE,SAAU,MAAD,EAOHC,KAAKC,MALP2G,EAFK,EAELA,QACA/C,EAHK,EAGLA,QACA+4J,EAJK,EAILA,0BACAr/D,EALK,EAKLA,qBACAs/D,EANK,EAMLA,UANK,EAQyC78J,KAAKsB,MAA7C86J,EARD,EAQCA,iBAAkBD,EARnB,EAQmBA,kBAC1B,IAAKv1J,EAAS,OAAO,KAErB,MAAM81J,EAAWG,EAAUx4I,KACzBq4I,GAAYA,EAASr4J,MAAQ83J,GAG/B,OACE,gBAACz+D,EAAA,EAAmBx8F,SAApB,KACIy8F,GACA,gBAACs+D,GAAD,KACGJ,IACC,MAAMiB,IACFF,IAA8Bf,EAClC,OACE,gBAACnhE,EAAA,EAAD,CACEj6F,MAAO,gBAAC,QAAD,4CACPgE,eAAgBZ,EAChBa,mBAAmB,EACnBN,QAAS,CACP+3J,GACE,gBAACxhE,EAAA,EAAD,CACEr2F,MAAO,gBAAC,QAAD,aACPD,IAAI,OACJE,SAAS,EACTC,QAAS,IAAMxE,KAAKs8J,eAAe,MAGvC,gBAAC3hE,EAAA,EAAD,CACEr2F,MAAO,gBAAC,QAAD,cACPD,IAAI,QACJE,SAAS,EACTC,QAASX,KAGby8C,iBAAkB,CAChB,gBAACr6C,EAAA,EAAD,CACE5B,IAAI,OACJ6B,aACGw2J,GAAYA,EAAS/zB,UAAa,gBAGvC,gBAAChuC,EAAA,EAAD,CACEt2F,IAAI,SACJC,MAAO,gBAAC,QAAD,0BACPE,QAAS,IAAMxE,KAAKw8J,mBAAkB,MAG1C54J,MAAI,EACJgB,UAAQ,GAEPk4J,GACC,gBAACzpJ,GAAA,EAAD,CAAcL,KAAK,SACjB,gBAAC,QAAD,wFAMF0pJ,GACA,gBAAC,WAAD,KACE,gBAACx3D,EAAA,EAAD,KACG23D,EACExxJ,OACCqxJ,IACGA,EAASK,WAAaL,EAASM,cAEnCz3J,IAAI,CAACm3J,EAAU7rJ,IACd7Q,KAAKy8J,wBACHC,EACA7rJ,EACAisJ,IAIN,gBAACG,EAAA,EAAD,iBACCJ,EACExxJ,OAAOqxJ,GAAYA,EAASK,UAC5Bx3J,IAAI,CAACm3J,EAAU7rJ,IACd7Q,KAAKy8J,wBACHC,EACA7rJ,EACAisJ,IAILV,GACC,gBAACa,EAAA,EAAD,qBAEDb,GACCS,EACGxxJ,OAAOqxJ,GAAYA,EAASM,cAC5Bz3J,IAAI,CAACm3J,EAAU7rJ,IACd7Q,KAAKy8J,wBACHC,EACA7rJ,EACAisJ,KAIV,gBAAC,IAAD,CAAMz3J,eAAe,SAASW,WAAW,UACrCo2J,EASA,gBAACzhE,EAAA,EAAD,CACEt2F,IAAI,sBACJgC,KAAM,gBAAC,IAAD,MACN9B,SAAS,EACTC,QAAS,IAAMxE,KAAKu8J,mBAAkB,GACtCj4J,MAAO,gBAAC,QAAD,oCAbT,gBAACq2F,EAAA,EAAD,CACEt2F,IAAI,sBACJgC,KAAM,gBAAC,IAAD,MACN9B,SAAS,EACTC,QAAS,IAAMxE,KAAKu8J,mBAAkB,GACtCj4J,MAAO,gBAAC,QAAD,sCAchBo4J,GAAYA,EAAS9C,gBACpB,uBAAK30J,MAAOpC,GAAOuQ,SACjB,gBAAC,GAAD,CACEwmJ,eAAgB8C,EAAS9C,eACzBhzJ,QAASA,EACT22F,qBAAsBA,EACtBI,YAAaA,KAInB,gBAAC,EAAD,CACE/5F,KAAM5D,KAAKsB,MAAM+6J,iBACjBx4J,QAAS,IAAM7D,KAAKw8J,mBAAkB,GACtC7+D,YAAaA,W,kGCjPjC,MAAMu/D,UAAmCnjJ,YACvCha,SACE,OAAOC,KAAKC,MAAMmB,UAYP+7J,gCAAgBC,IAAaC,KAA7BF,CACbD,G,sGChBF,MAAMr6J,EAAS,CACbkhH,SAAU,CAAE7zG,WAAY,EAAGqE,cAAe,WAG7B,QACbnT,WACAswG,eAKA,4BACGtwG,EACAswG,GAAa,gBAACN,EAAA,EAAD,CAAkB18F,KAAM,GAAIzP,MAAOpC,EAAOkhH,Y,0BCWrD,MAAMu5C,EAAqBnwJ,IAChC,GAAKA,EAEL,MAAmB,uBAAfA,EAAMo4E,KAAsC,wBAC7B,uBAAfp4E,EAAMo4E,KAAsC,wBAC7B,wBAAfp4E,EAAMo4E,KACD,0DACU,8BAAfp4E,EAAMo4E,KACD,kDACU,+BAAfp4E,EAAMo4E,KACD,+DADT,GAKWg4E,EAAwBpwJ,IACnC,GAAKA,EAEL,MAAmB,wBAAfA,EAAMo4E,KAAuC,0BAC9B,uBAAfp4E,EAAMo4E,KACD,qEADT,GAKa,MAAMi4E,UAA4BzjJ,YAAyB,eAAD,oBACvEzY,MAAQ,CACNm8J,KAAM,CACJ9gE,MAAO,GACP+gE,SAAU,KAJyD,KAQvEC,iBAAmB,KAAO,MAChBF,EAASz9J,KAAKsB,MAAdm8J,KACRz9J,KAAKC,MAAMk+F,gBAAgBs/D,IAG7B19J,SAAU,MAAD,EAC0DC,KAAKC,MAA9D4D,EADD,EACCA,QAAS+5J,EADV,EACUA,wBAAyBC,EADnC,EACmCA,YAAa1wJ,EADhD,EACgDA,MAEvD,OACE,kBAACutF,EAAA,EAAD,CACEj6F,MAAO,kBAAC,QAAD,sCACP2D,QAAS,CACP,kBAACu2F,EAAA,EAAD,CACEr2F,MAAO,kBAAC,QAAD,aACPhE,SAAUs9J,EACVv5J,IAAI,QACJE,SAAS,EACTC,QAASX,IAEX,kBAACuvG,EAAA,EAAD,CAAY1B,UAAWksD,EAAyBv5J,IAAI,kBAClD,kBAACqjF,EAAA,EAAD,CACEpjF,MAAO,kBAAC,QAAD,0BACPC,SAAO,EACPjE,SAAUs9J,EACVp5J,QAASxE,KAAK29J,qBAIpBr9G,iBAAkB,CAChB,kBAACq6C,EAAA,EAAD,CACEr2F,MAAO,kBAAC,QAAD,iCACPC,SAAS,EACTF,IAAI,uBACJG,QAASq5J,KAGbp5J,eAAgB,KACTm5J,GAAyB/5J,KAEhCc,SAAS,KACTD,mBAAmB,EACnBd,MAAI,GAEJ,kBAAC,IAAD,CAAQgB,UAAQ,GACd,kBAAC88C,EAAA,EAAD,KACE,kBAAC,QAAD,iNAOF,kBAACo5C,EAAA,EAAD,CACE54F,MAAOlC,KAAKsB,MAAMm8J,KAAK9gE,MACvBlvF,kBAAmB,kBAAC,QAAD,cACnBlE,UAAW+zJ,EAAkBnwJ,GAC7BzC,WAAS,EACTvI,SAAU,CAACoI,EAAGrI,KACZlC,KAAK2B,SAAS,CACZ87J,KAAK,eACAz9J,KAAKsB,MAAMm8J,KADZ,CAEF9gE,MAAOz6F,SAKf,kBAAC44F,EAAA,EAAD,CACE54F,MAAOlC,KAAKsB,MAAMm8J,KAAKC,SACvBjwJ,kBAAmB,kBAAC,QAAD,iBACnBlE,UAAWg0J,EAAqBpwJ,GAChC5K,KAAK,WACLmI,WAAS,EACTvI,SAAU,CAACoI,EAAGrI,KACZlC,KAAK2B,SAAS,CACZ87J,KAAK,eACAz9J,KAAKsB,MAAMm8J,KADZ,CAEFC,SAAUx7J,Y,aCpGb,MAAM47J,UAAoB/jJ,YAAyB,eAAD,oBAC/DzY,MAAQ,CACNm8J,KAAM,CACJ9gE,MAAO,GACP+gE,SAAU,KAJiD,KAQ/DK,SAAW,KAAO,MACRN,EAASz9J,KAAKsB,MAAdm8J,KACRz9J,KAAKC,MAAMi+F,QAAQu/D,IAV0C,KAa/DO,kBAAoB,KAAO,MACjBP,EAASz9J,KAAKsB,MAAdm8J,KACRz9J,KAAKC,MAAMg+J,iBAAiBR,IAG9B19J,SAAU,MAAD,EASHC,KAAKC,MAPP4D,EAFK,EAELA,QACAq6J,EAHK,EAGLA,oBACAC,EAJK,EAILA,gBACAhxJ,EALK,EAKLA,MACAixJ,EANK,EAMLA,wBACAC,EAPK,EAOLA,2BACAC,EARK,EAQLA,yBAEIl6J,EAAU,CACd,kBAACu2F,EAAA,EAAD,CACEr2F,MAAO,kBAAC,QAAD,aACPhE,SAAU69J,GAAmBG,EAC7Bj6J,IAAI,OACJE,SAAS,EACTC,QAASX,IAEX,kBAACuvG,EAAA,EAAD,CAAY1B,UAAWysD,EAAiB95J,IAAI,SAC1C,kBAACqjF,EAAA,EAAD,CACEpjF,MAAO,kBAAC,QAAD,cACPC,SAAO,EACPC,QAASxE,KAAK+9J,SACdz9J,SAAU69J,GAAmBG,MAKnC,OACE,kBAAC5jE,EAAA,EAAD,CACEj6F,MAAO,kBAAC,QAAD,uCACP2D,QAASA,EACTk8C,iBAAkB,CAChB,kBAACi+G,EAAD,CACE7sD,UAAW4sD,EACXj6J,IAAI,mBAEJ,kBAACs2F,EAAA,EAAD,CACEr2F,MAAO,kBAAC,QAAD,6BACPC,SAAS,EACTjE,SAAU69J,GAAmBG,EAC7B95J,QAASxE,KAAKg+J,sBAIpBv5J,eAAgB,KACT05J,GAAoBG,GAA0Bz6J,KAErDc,SAAS,KACTD,mBAAmB,EACnBd,MAAI,GAEJ,kBAAC,IAAD,CAAQgB,UAAQ,GACd,kBAACyO,EAAA,EAAD,CACEL,KAAK,OACLO,kBAAmB,IACjB,kBAAConF,EAAA,EAAD,CACEr2F,MAAO,kBAAC,QAAD,0BACPhE,SAAU69J,GAAmBG,EAC7B/5J,SAAO,EACPC,QAAS05J,KAIb,kBAAC,QAAD,oCAEF,kBAACpjE,EAAA,EAAD,CACE54F,MAAOlC,KAAKsB,MAAMm8J,KAAK9gE,MACvBlvF,kBAAmB,kBAAC,QAAD,cACnBlE,UAAW+zJ,EAAkBnwJ,GAC7BzC,WAAS,EACTvI,SAAU,CAACoI,EAAGrI,KACZlC,KAAK2B,SAAS,CACZ87J,KAAK,eACAz9J,KAAKsB,MAAMm8J,KADZ,CAEF9gE,MAAOz6F,SAKf,kBAAC44F,EAAA,EAAD,CACE54F,MAAOlC,KAAKsB,MAAMm8J,KAAKC,SACvBjwJ,kBAAmB,kBAAC,QAAD,iBACnBlE,UAAWg0J,EAAqBpwJ,GAChC5K,KAAK,WACLmI,WAAS,EACTvI,SAAU,CAACoI,EAAGrI,KACZlC,KAAK2B,SAAS,CACZ87J,KAAK,eACAz9J,KAAKsB,MAAMm8J,KADZ,CAEFC,SAAUx7J,UAMpB,kBAACw4F,EAAA,EAAD,CACEh2F,mBAAmB,EACnBd,KAAMw6J,EACN39J,MAAO,kBAAC,QAAD,4BACP2D,QAAS,CACP,kBAACu2F,EAAA,EAAD,CACEr2F,MAAO,kBAAC,QAAD,cACPD,IAAI,QACJG,QAAS65J,MAIb,kBAAC,IAAD,CAAQz5J,UAAQ,GACd,kBAACo4F,EAAA,EAAD,KACE,kBAAC,QAAD,mKChKP,MAAMwhE,EAAsB,CACjCrsI,EACAssI,EACA7S,KAEAz5H,EAAUxwB,SAAS,CACjB,CAAC88J,IAAa,IAET7S,IACJn2I,KAAKvT,IACJiwB,EAAUxwB,SAAS,CACjB,CAAC88J,IAAa,IAETv8J,IAERgW,MAAMC,IAIL,MAHAga,EAAUxwB,SAAS,CACjB,CAAC88J,IAAa,IAEVtmJ,K,4BCiBG,MAAMumJ,UAA4B5+J,YAA+B,eAAD,oBAC7EwB,MAAQ,CACNq8F,YAAakmB,IACb86C,iBAAiB,EACjBC,yBAAyB,EACzBT,iBAAiB,EACjBP,yBAAyB,EACzBiB,WAAY,KACZT,yBAAyB,EACzBE,0BAA0B,GATiD,KA+B7EQ,kBAAoB,KAAO,MACjBC,EAAqB/+J,KAAKC,MAA1B8+J,iBAERA,EAAiBC,eAAe,CAAC7mJ,EAAK2kF,KACpC,GAAI3kF,GAAOA,EAAI8mJ,gBACb,OAAOj/J,KAAK2B,SAAS,CACnBg8F,YAAY,eACP39F,KAAKsB,MAAMq8F,YADL,CAETC,eAAe,EACfd,QAAS,KACTI,OAAQ,KACR4mB,OAAQ,KACRxmB,aAAc,UAGTnlF,GAAQ2kF,EAKnB98F,KAAK2B,SACH,CACEg8F,YAAY,eACP39F,KAAKsB,MAAMq8F,YADL,CAETC,eAAe,EACfd,aAGJ,KACOA,IAELk+B,YACE+jC,EAAiBx7G,uBACjBu5C,EAAQmV,KACRx8F,KAAKynF,GACLl9F,KAAK2B,SAAS,CACZg8F,YAAY,eACP39F,KAAKsB,MAAMq8F,YADL,CAETT,cAINi+B,YACE4jC,EAAiBx7G,uBACjBu5C,EAAQmV,KACRx8F,KAAK6nF,GACLt9F,KAAK2B,SAAS,CACZg8F,YAAY,eACP39F,KAAKsB,MAAMq8F,YADL,CAETL,oBAIN49B,YACE6jC,EAAiBx7G,uBACjBu5C,EAAQmV,KACRx8F,KAAKquG,GACL9jH,KAAK2B,SAAS,CACZg8F,YAAY,eACP39F,KAAKsB,MAAMq8F,YADL,CAETmmB,iBA5CRl7G,QAAQ6C,IAAI,+BAAgC0M,MA/C2B,KAoG7E+mJ,UAAY,KACNl/J,KAAKC,MAAM8+J,kBAAkB/+J,KAAKC,MAAM8+J,iBAAiBI,SAC7Dn/J,KAAKo/J,qBAtGsE,KAyG7EC,SAAY5B,IAAqB,MACvBsB,EAAqB/+J,KAAKC,MAA1B8+J,iBACHA,GAELP,EAAoBx+J,KAAM,kBAAmB,IAC3C++J,EAAiBO,MAAM7B,GAAMhoJ,KAC3B,KACEzV,KAAK8+J,oBACL9+J,KAAKu/J,iBAAgB,IAEtBV,IACC7+J,KAAK2B,SAAS,CACZk9J,mBArHmE,KA4H7EW,iBAAoB/B,IAAqB,MAC/BsB,EAAqB/+J,KAAKC,MAA1B8+J,iBACHA,GAELP,EAAoBx+J,KAAM,0BAA2B,IACnD++J,EAAiBU,cAAchC,GAAMhoJ,KACnC,KACEzV,KAAK8+J,oBACL9+J,KAAKu/J,iBAAgB,GACrBG,YAAejC,EAAK9gE,QAErBkiE,IACC7+J,KAAK2B,SAAS,CACZk9J,mBAzImE,KAgJ7Ec,kBAAqBlC,IAAqB,MAChCsB,EAAqB/+J,KAAKC,MAA1B8+J,iBACHA,GAELP,EAAoBx+J,KAAM,2BAA4B,IACpD++J,EAAiBa,eAAenC,GAAMhoJ,KACpC,KACEzV,KAAK6/J,mBAAkB,IAExBhB,IACC7+J,KAAK2B,SAAS,CACZk9J,eAEF5tH,YACE,oIA9JmE,KAqK7E4uH,kBAAoB,CAACj8J,GAAgB,KACnC5D,KAAK2B,SAAS,CACZy8J,wBAAyBx6J,KAvKgD,KA2K7E27J,gBAAkB,CAAC37J,GAAgB,KACjC5D,KAAK2B,SAAS,CACZg9J,gBAAiB/6J,EACjBg7J,yBAAyB,KA9KgD,KAkL7EkB,wBAA0B,CAACl8J,GAAgB,KACzC5D,KAAK2B,SAAS,CACZg9J,iBAAiB,EACjBC,wBAAyBh7J,KAzK7B0b,oBACEtf,KAAKo/J,oBACLp/J,KAAKC,MAAM8+J,iBAAiBgB,aAAa//J,KAAK8+J,mBAGhDM,oBACEp/J,KAAK2B,SAAS,CACZg8F,YAAY,eACPkmB,IADM,CAET/lB,SAAU99F,KAAKk/J,UACfhhE,QAAS,IAAMl+F,KAAKu/J,iBAAgB,GACpCphE,gBAAiB,IAAMn+F,KAAK8/J,yBAAwB,GACpDjiE,qBAAsB79F,KAAK8+J,kBAC3Bv7G,uBAAwB,IACtBvjD,KAAKC,MAAM8+J,iBAAiBx7G,6BA+JpCxjD,SACE,OACE,gBAAC,WAAD,KACE,gBAAC29F,EAAA,EAAmB+lB,SAApB,CAA6BvhH,MAAOlC,KAAKsB,MAAMq8F,aAC5C39F,KAAKC,MAAMmB,UAEbpB,KAAKsB,MAAMq9J,iBACV,gBAAC,EAAD,CACE96J,QAAS,IAAM7D,KAAKu/J,iBAAgB,GACpCrB,oBAAqB,IAAMl+J,KAAK8/J,yBAAwB,GACxD5hE,QAASl+F,KAAKq/J,SACdlB,gBAAiBn+J,KAAKsB,MAAM68J,gBAC5BhxJ,MAAOnN,KAAKsB,MAAMu9J,WAClBZ,iBAAkBj+J,KAAK2/J,kBACvBvB,wBAAyBp+J,KAAKsB,MAAM88J,wBACpCC,2BAA4B,IAAMr+J,KAAK6/J,mBAAkB,GACzDvB,yBAA0Bt+J,KAAKsB,MAAMg9J,2BAGxCt+J,KAAKsB,MAAMs9J,yBACV,gBAAC,EAAD,CACE/6J,QAAS,IAAM7D,KAAK8/J,yBAAwB,GAC5CjC,YAAa,IAAM79J,KAAKu/J,iBAAgB,GACxCphE,gBAAiBn+F,KAAKw/J,iBACtB5B,wBAAyB59J,KAAKsB,MAAMs8J,wBACpCzwJ,MAAOnN,KAAKsB,MAAMu9J,e,oCC7O9B,MAAMv4J,EAAWC,IAAgB,YAC3BmuJ,EAAcpuJ,EAAWA,EAASouJ,YAAc,KAWvC,MAAMsL,UAA4BlgK,YAA+B,eAAD,oBAC7EwB,MAAQ,CACNuD,OAAQ7E,KAAKigK,+BAAiCjvJ,IAAmBnM,OACjEkN,YAAa/R,KAAKkgK,aAAaphJ,KAAK9e,MACpCgS,aAAchS,KAAKmgK,cAAcrhJ,KAAK9e,MACtCiS,uBAAwBjS,KAAKogK,wBAAwBthJ,KAAK9e,MAC1DkS,uBAAwBlS,KAAKqgK,wBAAwBvhJ,KAAK9e,MAC1D8E,aAAc9E,KAAKsgK,cAAcxhJ,KAAK9e,MACtCmS,wBAAyBnS,KAAKugK,yBAAyBzhJ,KAAK9e,MAC5DoS,iBAAkBpS,KAAKwgK,kBAAkB1hJ,KAAK9e,MAC9CuS,qBAAsBvS,KAAKygK,sBAAsB3hJ,KAAK9e,MACtDwS,mCAAoCxS,KAAK0gK,oCAAoC5hJ,KAC3E9e,MAEFyS,qBAAsBzS,KAAK2gK,sBAAsB7hJ,KAAK9e,MACtD0S,iCAAkC1S,KAAK4gK,kCAAkC9hJ,KACvE9e,MAEF4S,6BAA8B5S,KAAK6gK,8BAA8B/hJ,KAAK9e,MACtE6S,qCAAsC7S,KAAK8gK,sCAAsChiJ,KAC/E9e,MAEF8S,4BAA6B9S,KAAK+gK,6BAA6BjiJ,KAAK9e,MACpE+S,gBAAiB/S,KAAKghK,iBAAiBliJ,KAAK9e,MAC5CiT,gBAAiBjT,KAAKihK,iBAAiBniJ,KAAK9e,OAG9Csf,oBACE5I,WAAW,IAAM1W,KAAKsgK,gBAAiB,KAGzCJ,aAAajvJ,GACXjR,KAAK2B,SACHL,IAAK,CACHuD,OAAO,eACFvD,EAAMuD,OADL,CAEJoM,eAGJ,IAAMjR,KAAKkhK,6BAA6BlhK,KAAKsB,QAIjDo/J,oCACElvJ,GAEAxR,KAAK2B,SACHL,IAAK,CACHuD,OAAO,eACFvD,EAAMuD,OADL,CAEJ2M,sCAGJ,IAAMxR,KAAKkhK,6BAA6BlhK,KAAKsB,QAIjDq/J,sBAAsBlvJ,GACpBzR,KAAK2B,SACHL,IAAK,CACHuD,OAAO,eACFvD,EAAMuD,OADL,CAEJ4M,wBAGJ,IAAMzR,KAAKkhK,6BAA6BlhK,KAAKsB,QAIjDs/J,kCAAkClvJ,GAChC1R,KAAK2B,SACHL,IAAK,CACHuD,OAAO,eACFvD,EAAMuD,OADL,CAEJ6M,oCAGJ,IAAM1R,KAAKkhK,6BAA6BlhK,KAAKsB,QAIjDu/J,8BAA8BlvJ,GAC5B3R,KAAK2B,SACHL,IAAK,CACHuD,OAAO,eACFvD,EAAMuD,OADL,CAEJ8M,gCAGJ,IAAM3R,KAAKkhK,6BAA6BlhK,KAAKsB,QAIjDw/J,sCACElvJ,GAEA5R,KAAK2B,SACHL,IAAK,CACHuD,OAAO,eACFvD,EAAMuD,OADL,CAEJ+M,wCAGJ,IAAM5R,KAAKkhK,6BAA6BlhK,KAAKsB,QAIjDy/J,6BAA6BlvJ,GAC3B7R,KAAK2B,SACHL,IAAK,CACHuD,OAAO,eACFvD,EAAMuD,OADL,CAEJgN,+BAGJ,IAAM7R,KAAKkhK,6BAA6BlhK,KAAKsB,QAIjD6+J,cAAchvJ,GACZnR,KAAK2B,SACHL,IAAK,CACHuD,OAAO,eACFvD,EAAMuD,OADL,CAEJsM,gBAGJ,IAAMnR,KAAKkhK,6BAA6BlhK,KAAKsB,QAIjD8+J,wBAAwBhvJ,GACtBpR,KAAK2B,SACHL,IAAK,CACHuD,OAAO,eACFvD,EAAMuD,OADL,CAEJuM,0BAGJ,IAAMpR,KAAKkhK,6BAA6BlhK,KAAKsB,QAIjD++J,wBAAwBnvJ,GACtBlR,KAAK2B,SACHL,IAAK,CACHuD,OAAO,eACFvD,EAAMuD,OADL,CAEJqM,0BAGJ,IAAMlR,KAAKkhK,6BAA6BlhK,KAAKsB,QAIjDi/J,yBAAyBjvJ,GACvBtR,KAAK2B,SACHL,IAAK,CACHuD,OAAO,eACFvD,EAAMuD,OADL,CAEJyM,2BAGJ,IAAMtR,KAAKkhK,6BAA6BlhK,KAAKsB,QAIjDg/J,cAAca,GAAyB,MAI7BC,EAA2BphK,KAAKC,MAAhCmhK,uBACH1M,IAAe0M,IAEdD,GAAiBnhK,KAAKsB,MAAMuD,OAAOqM,oBACvCwjJ,EAAYY,KAAK,8BAEjBZ,EAAYY,KAAK,kBAIrBmL,wBACE,MAAMY,EAAiBl8J,cACfoM,EAAwBvR,KAAKsB,MAAMuD,OAAnC0M,oBACR,OAAIA,IAAwB8vJ,IAM5BrhK,KAAK2B,SACHL,IAAK,CACHuD,OAAO,eACFvD,EAAMuD,OADL,CAEJ0M,oBAAqB8vJ,MAGzB,IAAMrhK,KAAKkhK,6BAA6BlhK,KAAKsB,aAGnBwJ,IAAxByG,GASNivJ,kBAAkBnuJ,EAAoCC,GACpDtS,KAAK2B,SACHL,IAAK,CACHuD,OAAO,eACFvD,EAAMuD,OADL,CAEJwM,oBAAoB,eACf/P,EAAMuD,OAAOwM,oBADC,CAGjB,CAACgB,IAAcC,QAIrB,IAAMtS,KAAKkhK,6BAA6BlhK,KAAKsB,QAIjD2+J,8BACE,IACE,MAAMqB,EAAiBC,aAAa/hB,QArOjB,kBAsOnB,IAAK8hB,EAAgB,OAAO,KAE5B,MAAMz8J,EAASqH,KAAKC,MAAMm1J,GAK1B,IAAK,MAAMj9J,KAAO2M,IAAmBnM,OAEjCmM,IAAmBnM,OAAOy9C,eAAej+C,IAClB,qBAAhBQ,EAAOR,KAEdQ,EAAOR,GAAO2M,IAAmBnM,OAAOR,IAI5C,OAAOQ,EACP,MAAO0F,GACP,OAAO,MAIX22J,6BAA6BzoE,GAC3B,IACE8oE,aAAaC,QA9PM,iBAgQjBt1J,KAAKw6D,UAAU+xB,EAAY5zF,SAE7B,MAAO0F,GACP3B,QAAQ8zB,KAAK,gCAAiCnyB,GAGhD,OAAOkuF,EAGTuoE,iBAAiBp6J,EAAoBoM,GACnC,MAAMxK,EAAc5B,EAAQ2B,iBAEtBk5J,EADazhK,KAAKsB,MAAhBuD,OACoBiN,qBAAqBtJ,GACjD,OAAIi5J,GAAgBA,EAAazuJ,GACxByuJ,EAAazuJ,GAEjBxK,OAAL,EAAyB,KAG3By4J,iBAAiBr6J,EAAoBoM,EAAoB0uJ,GACvD,MAAMl5J,EAAc5B,EAAQ2B,iBAEpB1D,EAAW7E,KAAKsB,MAAhBuD,OACF88J,EACJ98J,EAAOiN,qBAAqBtJ,IAAgB,GAC9Cm5J,EAAwB3uJ,GAAQ0uJ,EAEhC1hK,KAAK2B,SACH,CACEkD,OAAO,eACFA,EADC,CAEJiN,qBAAqB,eAChBjN,EAAOiN,qBADQ,CAElB,CAACtJ,GAAcm5J,OAIrB,IAAM3hK,KAAKkhK,6BAA6BlhK,KAAKsB,QAIjDvB,SACE,OACE,gBAACmT,EAAA,EAAmBuwG,SAApB,CAA6BvhH,MAAOlC,KAAKsB,OACtCtB,KAAKC,MAAMmB,W,gCC/RL,MAAMwgK,UAA0C9hK,YAG5D,eAAD,oBACAwB,MAAQ,CACNgqG,+BAAgC,KAChCsU,qCAAsC5/G,KAAK6hK,sCAAsC/iJ,KAC/E9e,MAEFwiH,uCAAwCxiH,KAAK8hK,wCAAwChjJ,KACnF9e,MAEFikH,uCAAwCjkH,KAAK+hK,wCAAwCjjJ,KACnF9e,MAEFqtD,kCAAmC,IACjCrtD,KAAKC,MAAMmtD,+BACb42C,kCAAmC,IACjChkG,KAAKC,MAAM8jG,gCAGf89D,sCAAsCj7J,GAAqC,MAAD,EAC7B5G,KAAKC,MAAxCM,EADgE,EAChEA,KAAMs/G,EAD0D,EAC1DA,yBACd,OAAKj5G,GAAYi5G,EAEVD,YACLh5G,EACAi5G,EACAt/G,GAECkV,KAAK,IACJzV,KAAK2B,SAAS,CACZ2pG,+BAAgC,QAGnCpzF,MAAOozF,IACNtrG,KAAK2B,SAAS,CACZ2pG,mCAEFp1F,YACE3V,EAAKG,EACH,wQAEF4qG,KApB4Cz1F,QAAQlN,UAyB5Dm5J,wCAAwCl7J,GACtC47G,YAAuC57G,GAGzCm7J,wCAAwCn7J,GAItC,OAHIA,GACF5G,KAAK8hK,wCAAwCl7J,GAExC5G,KAAK6hK,sCAAsCj7J,GAGpD7G,SACE,OACE,gBAAC+jG,EAAA,EAAiC2f,SAAlC,CAA2CvhH,MAAOlC,KAAKsB,OACpDtB,KAAKC,MAAMmB,W,sBChGpB,kCAuCe,MAAM4gK,UAAkBliK,YACrCC,SAAU,MAAD,EAQHC,KAAKC,MANPmhK,EAFK,EAELA,uBACArC,EAHK,EAGLA,iBACA39J,EAJK,EAILA,SACAy+G,EALK,EAKLA,yBACAzyD,EANK,EAMLA,+BACA22C,EAPK,EAOLA,+BAEF,OACE,gBAAC,EAAD,KACE,gBAACuf,EAAA,EAAD,KACE,gBAAC,EAAD,CAAqB89C,uBAAwBA,GAC3C,gBAACluJ,EAAA,EAAmBhS,SAApB,KACG,EAAG2D,aACF,MAAMs3G,EAAQ8lD,YAASp9J,EAAOsM,WAC9B,OACE,gBAACuzE,EAAA,EAAD,CAAgBzzE,SAAUpM,EAAOoM,UAC/B,gBAAC,IAAqBwyG,SAAtB,CAA+BvhH,MAAOi6G,EAAMh7G,eAC1C,gBAAC+gK,EAAA,EAAD,CAAe/lD,MAAOA,EAAM3oG,UAC1B,gBAAC,EAAD,CACEurJ,iBAAkBA,GAElB,gBAAC,OAAD,CAAM/tI,QAAM,GACT,EAAGzwB,UACF,gBAAC,EAAD,CACEA,KAAMA,EACNs/G,yBACEA,EAEFzyD,+BACEA,EAEF22C,+BACEA,GAGF,gBAACD,EAAA,EAAiC5iG,SAAlC,KACGisD,GACC/rD,EAAS,CACPb,OACA4sD,kD,iCCoGvB,OACblqD,KAAM,iBACNkO,UAAW,iBACXkpG,UAzLgB,CAChB8nD,KAAM,UACNC,SAAS,EACTC,MAAO,CACL,CACEC,WAAY,SACZC,MAAO,WAET,CACED,WAAY,SACZC,MAAO,0BAET,CACED,WAAY,SACZC,MAAO,kBAET,CACED,WAAY,SACZC,MAAO,4BAET,CACED,WAAY,SACZC,MAAO,YAET,CACED,WAAY,SACZC,MAAO,0BAET,CACED,WAAY,SACZC,MAAO,qBAET,CACED,WAAY,SACZC,MAAO,iBAET,CACED,WAAY,SACZC,MAAO,mBAET,CACED,WAAY,SACZC,MAAO,+BAET,CACED,WAAY,SACZC,MAAO,YAET,CACED,WAAY,SACZC,MAAO,mBAET,CACED,WAAY,SACZC,MAAO,oBAET,CACED,WAAY,SACZC,MAAO,qBAET,CACED,WAAY,SACZC,MAAO,oBAET,CACED,WAAY,SACZC,MAAO,sBAET,CACED,WAAY,SACZC,MAAO,sBAET,CACED,WAAY,SACZC,MAAO,gCAET,CACED,WAAY,SACZC,MAAO,sBAET,CACED,WAAY,SACZC,MAAO,qBAET,CACED,WAAY,SACZC,MAAO,0BAET,CACED,WAAY,SACZC,MAAO,gBAET,CACED,WAAY,SACZC,MAAO,iBAET,CACED,WAAY,SACZC,MAAO,UAET,CACED,WAAY,SACZC,MAAO,yBAET,CACED,WAAY,SACZC,MAAO,gCAET,CACED,WAAY,SACZC,MAAO,kBAET,CACED,WAAY,SACZC,MAAO,oBAET,CACED,WAAY,SACZC,MAAO,wBAET,CACED,WAAY,SACZC,MAAO,wBAET,CACED,WAAY,SACZC,MAAO,sBAET,CACED,WAAY,SACZC,MAAO,oBAET,CACED,WAAY,SACZC,MAAO,gCAET,CACED,WAAY,SACZC,MAAO,oBAET,CACED,WAAY,SACZC,MAAO,WAET,CACED,WAAY,SACZC,MAAO,WAET,CACED,WAAY,SACZC,MAAO,gBAET,CACED,WAAY,SACZC,MAAO,uBAET,CACED,WAAY,SACZl+C,WAAY,SACZm+C,MAAO,WAET,CACED,WAAY,SACZl+C,WAAY,SACZm+C,MAAO,kBAET,CACED,WAAY,SACZl+C,WAAY,SACZm+C,MAAO,uBAGX12H,OAAQ,CACN,oBAAqB,UACrB,oBAAqB,UACrB,6BAA8B,UAC9B,iCAAkC,UAClC,0BAA2B,UAC3B,8BAA+B,aCrCpB,OACb5oC,KAAM,UACNkO,UAAW,UACXkpG,UAhJgB,CAChB8nD,KAAM,UACNC,SAAS,EACTC,MAAO,CACL,CACEC,WAAY,SACZC,MAAO,WAET,CACED,WAAY,SACZC,MAAO,UAET,CACED,WAAY,SACZC,MAAO,oBAET,CACED,WAAY,SACZC,MAAO,qBAET,CACED,WAAY,SACZC,MAAO,sBAET,CACED,WAAY,SACZC,MAAO,kBAET,CACED,WAAY,SACZC,MAAO,WAET,CACED,WAAY,SACZC,MAAO,WAET,CACED,WAAY,SACZ73J,UAAW,SACX83J,MAAO,gBAET,CACED,WAAY,SACZ73J,UAAW,YACX83J,MAAO,qBAET,CACED,WAAY,SACZ73J,UAAW,mBACX83J,MAAO,gCAET,CACED,WAAY,SACZC,MAAO,wBAET,CACED,WAAY,SACZ73J,UAAW,SACX83J,MAAO,sBAET,CACED,WAAY,SACZC,MAAO,mBAET,CACED,WAAY,SACZC,MAAO,+BAET,CACED,WAAY,SACZC,MAAO,oBAET,CACED,WAAY,SACZC,MAAO,oBAET,CACED,WAAY,SACZ73J,UAAW,SACX83J,MAAO,gBAET,CACED,WAAY,SACZ73J,UAAW,SACX83J,MAAO,iBAET,CACED,WAAY,SACZl+C,WAAY,SACZm+C,MAAO,WAET,CACED,WAAY,SACZl+C,WAAY,SACZm+C,MAAO,sBAET,CACED,WAAY,SACZC,MAAO,4DAET,CACED,WAAY,SACZC,MAAO,aAET,CACED,WAAY,SACZC,MAAO,oBAET,CACED,WAAY,SACZC,MAAO,kBAET,CACED,WAAY,SACZC,MAAO,mBAET,CACED,WAAY,SACZC,MAAO,kBAET,CACED,WAAY,SACZC,MAAO,sDAET,CACED,WAAY,SACZC,MAAO,uCAGX12H,OAAQ,CACN,oBAAqB,UACrB,oBAAqB,UACrB,6BAA8B,UAC9B,iCAAkC,UAClC,0BAA2B,UAC3B,8BAA+B,UAC/B,qCAAsC,UACtC,kCAAmC,aCyCxB,OACb5oC,KAAM,WACNkO,UAAW,WACXkpG,UArLgB,CAChB8nD,KAAM,KACNC,SAAS,EACTC,MAAO,CACL,CACEC,WAAY,SACZC,MAAO,WAET,CACED,WAAY,SACZC,MAAO,0BAET,CACED,WAAY,SACZC,MAAO,kBAET,CACED,WAAY,SACZC,MAAO,4BAET,CACED,WAAY,SACZC,MAAO,YAET,CACED,WAAY,SACZC,MAAO,0BAET,CACED,WAAY,SACZC,MAAO,qBAET,CACED,WAAY,SACZC,MAAO,iBAET,CACED,WAAY,SACZC,MAAO,mBAET,CACED,WAAY,SACZC,MAAO,+BAET,CACED,WAAY,SACZC,MAAO,YAET,CACED,WAAY,SACZC,MAAO,mBAET,CACED,WAAY,SACZC,MAAO,oBAET,CACED,WAAY,SACZC,MAAO,qBAET,CACED,WAAY,SACZC,MAAO,oBAET,CACED,WAAY,SACZC,MAAO,sBAET,CACED,WAAY,SACZC,MAAO,sBAET,CACED,WAAY,SACZC,MAAO,gCAET,CACED,WAAY,SACZC,MAAO,sBAET,CACED,WAAY,SACZC,MAAO,qBAET,CACED,WAAY,SACZC,MAAO,0BAET,CACED,WAAY,SACZC,MAAO,gBAET,CACED,WAAY,SACZC,MAAO,iBAET,CACED,WAAY,SACZC,MAAO,UAET,CACED,WAAY,SACZC,MAAO,yBAET,CACED,WAAY,SACZC,MAAO,gCAET,CACED,WAAY,SACZC,MAAO,kBAET,CACED,WAAY,SACZC,MAAO,oBAET,CACED,WAAY,SACZC,MAAO,wBAET,CACED,WAAY,SACZC,MAAO,wBAET,CACED,WAAY,SACZC,MAAO,sBAET,CACED,WAAY,SACZC,MAAO,oBAET,CACED,WAAY,SACZC,MAAO,gCAET,CACED,WAAY,SACZC,MAAO,oBAET,CACED,WAAY,SACZC,MAAO,WAET,CACED,WAAY,SACZC,MAAO,WAET,CACED,WAAY,SACZC,MAAO,gBAET,CACED,WAAY,SACZl+C,WAAY,SACZm+C,MAAO,WAET,CACED,WAAY,SACZl+C,WAAY,SACZm+C,MAAO,kBAET,CACED,WAAY,SACZl+C,WAAY,SACZm+C,MAAO,uBAGX12H,OAAQ,CACN,oBAAqB,UACrB,oBAAqB,UACrB,6BAA8B,UAC9B,iCAAkC,UAClC,0BAA2B,UAC3B,8BAA+B,aCxCpB,OACb5oC,KAAM,iBACNkO,UAAW,iBACXkpG,UAzIgB,CAChB8nD,KAAM,UACNC,SAAS,EACTC,MAAO,CACL,CACEC,WAAY,SACZ73J,UAAW,SACX83J,MAAO,WAET,CACED,WAAY,SACZC,MAAO,UAET,CACED,WAAY,SACZC,MAAO,iBAET,CACED,WAAY,SACZC,MAAO,oBAET,CACED,WAAY,SACZC,MAAO,qBAET,CACED,WAAY,SACZC,MAAO,kBAET,CACED,WAAY,SACZC,MAAO,WAET,CACED,WAAY,SACZ73J,UAAW,OACX83J,MAAO,WAET,CACED,WAAY,SACZC,MAAO,qBAET,CACED,WAAY,SACZC,MAAO,0BAET,CACED,WAAY,SACZC,MAAO,wBAET,CACED,WAAY,SACZC,MAAO,mCAET,CACED,WAAY,SACZC,MAAO,sCAET,CACED,WAAY,SACZC,MAAO,oCAET,CACED,WAAY,SACZC,MAAO,qBAET,CACED,WAAY,SACZC,MAAO,qBAET,CACED,WAAY,SACZC,MAAO,8BAET,CACED,WAAY,SACZC,MAAO,qBAET,CACED,WAAY,SACZC,MAAO,sBAET,CACED,WAAY,SACZC,MAAO,kBAET,CACED,WAAY,SACZC,MAAO,gCAET,CACED,WAAY,SACZ73J,UAAW,OACX83J,MAAO,mBAET,CACED,WAAY,SACZC,MAAO,8BAET,CACED,WAAY,SACZC,MAAO,+BAET,CACED,WAAY,SACZC,MAAO,oBAET,CACED,WAAY,SACZC,MAAO,sCAET,CACED,WAAY,SACZC,MAAO,gBAET,CACED,WAAY,SACZC,MAAO,iBAET,CACED,WAAY,SACZC,MAAO,2BAGX12H,OAAQ,CACN,oBAAqB,UACrB,oBAAqB,UACrB,6BAA8B,UAC9B,iCAAkC,UAClC,0BAA2B,UAC3B,8BAA+B,aCGpB,OACb5oC,KAAM,kBACNkO,UAAW,kBACXkpG,UAxIgB,CAChB8nD,KAAM,KACNC,SAAS,EACTC,MAAO,CACL,CACEC,WAAY,SACZC,MAAO,WAET,CACED,WAAY,SACZC,MAAO,UAET,CACED,WAAY,SACZC,MAAO,iBAET,CACED,WAAY,SACZC,MAAO,oBAET,CACED,WAAY,SACZC,MAAO,qBAET,CACED,WAAY,SACZC,MAAO,kBAET,CACED,WAAY,SACZC,MAAO,WAET,CACED,WAAY,SACZ73J,UAAW,OACX83J,MAAO,WAET,CACED,WAAY,SACZC,MAAO,qBAET,CACED,WAAY,SACZC,MAAO,0BAET,CACED,WAAY,SACZC,MAAO,wBAET,CACED,WAAY,SACZC,MAAO,mCAET,CACED,WAAY,SACZC,MAAO,sCAET,CACED,WAAY,SACZC,MAAO,oCAET,CACED,WAAY,SACZC,MAAO,qBAET,CACED,WAAY,SACZC,MAAO,qBAET,CACED,WAAY,SACZC,MAAO,8BAET,CACED,WAAY,SACZC,MAAO,qBAET,CACED,WAAY,SACZC,MAAO,sBAET,CACED,WAAY,SACZC,MAAO,kBAET,CACED,WAAY,SACZ73J,UAAW,OACX83J,MAAO,mBAET,CACED,WAAY,SACZC,MAAO,oCAET,CACED,WAAY,SACZC,MAAO,kCAET,CACED,WAAY,SACZC,MAAO,+BAET,CACED,WAAY,SACZC,MAAO,oBAET,CACED,WAAY,SACZC,MAAO,sCAET,CACED,WAAY,SACZC,MAAO,gBAET,CACED,WAAY,SACZC,MAAO,iBAET,CACED,WAAY,SACZC,MAAO,2BAGX12H,OAAQ,CACN,oBAAqB,UACrB,oBAAqB,UACrB,6BAA8B,UAC9B,iCAAkC,UAClC,0BAA2B,UAC3B,8BAA+B,aC0EpB,OACb5oC,KAAM,cACNkO,UAAW,cACXkpG,UA9MgB,CAChB8nD,KAAM,UACNC,SAAS,EACTC,MAAO,CACL,CACEC,WAAY,SACZl+C,WAAY,SACZm+C,MAAO,QAET,CACEn+C,WAAY,SACZm+C,MAAO,mCAET,CACED,WAAY,SACZl+C,WAAY,SACZm+C,MAAO,kBAET,CACED,WAAY,SACZl+C,WAAY,SACZm+C,MAAO,WAET,CACED,WAAY,SACZl+C,WAAY,SACZm+C,MAAO,sBAET,CACED,WAAY,SACZC,MAAO,oBAET,CACED,WAAY,SACZl+C,WAAY,SACZm+C,MAAO,UAET,CACED,WAAY,SACZC,MAAO,WAET,CACED,WAAY,SACZC,MAAO,YAET,CACED,WAAY,SACZC,MAAO,WAET,CACED,WAAY,SACZC,MAAO,wBAET,CACED,WAAY,SACZC,MAAO,kCAET,CACED,WAAY,SACZC,MAAO,wBAET,CACED,WAAY,SACZC,MAAO,4BAET,CACE93J,UAAW,SACX83J,MAAO,sBAET,CACED,WAAY,SACZl+C,WAAY,SACZm+C,MAAO,wBAET,CACED,WAAY,SACZC,MAAO,kBAET,CACED,WAAY,SACZC,MAAO,oBAET,CACED,WAAY,SACZC,MAAO,UAET,CACED,WAAY,SACZC,MAAO,oCAET,CACED,WAAY,SACZl+C,WAAY,SACZm+C,MAAO,uBAET,CACED,WAAY,SACZC,MAAO,iBAET,CACED,WAAY,SACZC,MAAO,kBAET,CACED,WAAY,SACZC,MAAO,iDAET,CACE93J,UAAW,YACX83J,MAAO,qBAET,CACE93J,UAAW,YACX83J,MAAO,oBAET,CACE93J,UAAW,mBACX83J,MAAO,gCAET,CACED,WAAY,SACZC,MAAO,4BAET,CACED,WAAY,SACZC,MAAO,2BAET,CACED,WAAY,SACZ73J,UAAW,SACX83J,MAAO,+BAET,CACED,WAAY,SACZC,MAAO,iBAET,CACED,WAAY,SACZC,MAAO,qBAET,CACED,WAAY,SACZC,MAAO,gDAET,CACED,WAAY,SACZC,MAAO,gCAET,CACED,WAAY,SACZC,MAAO,sCAET,CACED,WAAY,SACZC,MAAO,yCAET,CACED,WAAY,SACZC,MAAO,kCAET,CACED,WAAY,SACZC,MAAO,0BAET,CACED,WAAY,SACZC,MAAO,gCAET,CACED,WAAY,SACZC,MAAO,wBAET,CACED,WAAY,SACZC,MAAO,qCAET,CACED,WAAY,SACZC,MAAO,uBAET,CACED,WAAY,SACZC,MAAO,sBAET,CACED,WAAY,SACZC,MAAO,8BAET,CACED,WAAY,SACZC,MAAO,0CAGX12H,OAAQ,CACN,oBAAqB,UACrB,oBAAqB,UACrB,6BAA8B,UAC9B,iCAAkC,UAClC,0BAA2B,UAC3B,8BAA+B,aC6CpB,OACb5oC,KAAM,SACNkO,UAAW,SACXkpG,UAvPgB,CAChB8nD,KAAM,KACNC,SAAS,EACTC,MAAO,CACL,CACEC,WAAY,SACZ73J,UAAW,SACX83J,MAAO,WAET,CACED,WAAY,SACZ73J,UAAW,OACX83J,MAAO,8BAET,CACED,WAAY,SACZ73J,UAAW,cACX83J,MAAO,yBAET,CACED,WAAY,SACZ73J,UAAW,cACX83J,MAAO,+BAET,CACED,WAAY,SACZl+C,WAAY,SACZm+C,MAAO,mBAET,CACE93J,UAAW,OACX83J,MAAO,WAET,CACE93J,UAAW,OACX83J,MAAO,WAET,CACE93J,UAAW,OACX83J,MAAO,oBAET,CACE93J,UAAW,OACX83J,MAAO,qBAET,CACE93J,UAAW,OACX83J,MAAO,oBAET,CACED,WAAY,SACZ73J,UAAW,OACX83J,MAAO,gBAET,CACED,WAAY,SACZ73J,UAAW,OACX83J,MAAO,gBAET,CACED,WAAY,SACZC,MAAO,+BAET,CACED,WAAY,SACZC,MAAO,kBAET,CACED,WAAY,SACZC,MAAO,qBAET,CACED,WAAY,SACZ73J,UAAW,OACX83J,MAAO,oBAET,CACED,WAAY,SACZ73J,UAAW,OACX83J,MAAO,gCAET,CACED,WAAY,SACZ73J,UAAW,OACX83J,MAAO,iBAET,CACED,WAAY,SACZC,MAAO,2BAET,CACED,WAAY,SACZC,MAAO,6BAET,CACED,WAAY,SACZC,MAAO,yBAET,CACED,WAAY,SACZC,MAAO,wBAET,CACED,WAAY,SACZC,MAAO,oBAET,CACED,WAAY,SACZC,MAAO,mCAET,CACED,WAAY,SACZC,MAAO,uBAET,CACED,WAAY,SACZC,MAAO,mBAET,CACED,WAAY,SACZC,MAAO,sBAET,CACED,WAAY,SACZC,MAAO,oBAET,CACED,WAAY,SACZC,MAAO,oBAET,CACED,WAAY,SACZC,MAAO,kBAET,CACED,WAAY,SACZC,MAAO,0BAET,CACED,WAAY,SACZC,MAAO,sBAET,CACED,WAAY,SACZC,MAAO,iBAET,CACED,WAAY,SACZC,MAAO,yBAET,CACE93J,UAAW,OACX83J,MAAO,eAET,CACED,WAAY,SACZl+C,WAAY,SACZm+C,MAAO,kBAET,CACE93J,UAAW,SACX83J,MAAO,iBAET,CACED,WAAY,SACZC,MAAO,gBAET,CACED,WAAY,SACZC,MAAO,oBAET,CACED,WAAY,SACZl+C,WAAY,SACZm+C,MAAO,mBAET,CACED,WAAY,SACZC,MAAO,iBAET,CACED,WAAY,SACZC,MAAO,cAET,CACED,WAAY,SACZC,MAAO,iBAET,CACE93J,UAAW,OACX83J,MAAO,eAET,CACED,WAAY,SACZC,MAAO,kBAET,CACED,WAAY,SACZC,MAAO,oBAET,CACE93J,UAAW,YACX83J,MAAO,oBAET,CACED,WAAY,SACZl+C,WAAY,SACZm+C,MAAO,mBAET,CACED,WAAY,SACZl+C,WAAY,SACZm+C,MAAO,mBAET,CACED,WAAY,SACZl+C,WAAY,SACZm+C,MAAO,kBAET,CACED,WAAY,SACZl+C,WAAY,SACZm+C,MAAO,8BAET,CACED,WAAY,SACZl+C,WAAY,SACZm+C,MAAO,4BAET,CACED,WAAY,SACZC,MAAO,cAGX12H,OAAQ,CACN,oBAAqB,UACrB,oBAAqB,UACrB,6BAA8B,UAC9B,iCAAkC,UAClC,0BAA2B,UAC3B,8BAA+B,aC/OnC,kCAkBA,MAAM22H,EAAiC,CAErC,CACEv/J,KAAM,gBACNkO,UAAW,MAEb,CACElO,KAAM,qBACNkO,UAAW,WAGbsxJ,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,GAGW5oD,EAAe,IAAMqoD,G,qECjClC,MAAM3/J,EACY,CACdwM,QAAS,OACTrJ,WAAY,SACZX,eAAgB,SAChBsK,KAAM,EACN8E,QAAS,IAsBE+lF,IAZOv6F,GACpB,gBAAC,IAAD,KACGuT,GACC,uBAAKvO,MAAK,eAAOpC,EAAP,GAAiC5C,EAAMgF,QAC/C,gBAAC,IAAD,CAAgBA,MAAOhF,EAAMy5I,cAC1Bz5I,EAAMmB,a,4HC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","file":"static/js/1.b9743d5d.chunk.js","sourcesContent":["// @flow\nimport * as React from 'react';\nimport MUIIconButton from '@material-ui/core/IconButton';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport { I18n } from '@lingui/react';\nimport { type MessageDescriptor } from '../Utils/i18n/MessageDescriptor.flow';\nimport { adaptAcceleratorString } from '../UI/AcceleratorString';\n\ntype IconProps =\n  | {|\n      children: React.Node,\n    |}\n  // Support a few specific icons from iconmoon-font.css\n  | {|\n      className: 'icon-twitter' | 'icon-facebook' | 'icon-discord',\n    |};\n\n// We support a subset of the props supported by Material-UI v0.x IconButton\n// They should be self descriptive - refer to Material UI docs otherwise.\ntype Props = {|\n  ...IconProps,\n  onClick?: () => void,\n  onContextMenu?: () => void,\n  disabled?: boolean,\n\n  style?: {|\n    padding?: number,\n    width?: number,\n    height?: number,\n    transform?: string,\n    transition?: string,\n    opacity?: number,\n    margin?: number,\n    marginRight?: number,\n    marginLeft?: number,\n    marginTop?: number,\n    marginBottom?: number,\n  |},\n  size?: 'small',\n\n  tooltip?: MessageDescriptor,\n  acceleratorString?: string,\n|};\n\n/**\n * A button showing just an icon, based on Material-UI icon button.\n * Supports displaying a tooltip.\n */\nexport default class IconButton extends React.Component<Props, {||}> {\n  render() {\n    const { tooltip, acceleratorString, ...otherProps } = this.props;\n    const iconButton = <MUIIconButton {...otherProps} />;\n\n    return tooltip && !this.props.disabled ? (\n      <I18n>\n        {({ i18n }) => (\n          <Tooltip\n            title={\n              i18n._(tooltip) +\n              (acceleratorString\n                ? ' ' + adaptAcceleratorString(acceleratorString)\n                : '')\n            }\n            placement=\"bottom\"\n            enterDelay={300}\n          >\n            {iconButton}\n          </Tooltip>\n        )}\n      </I18n>\n    ) : (\n      iconButton\n    );\n  }\n}\n","// @flow\nimport { isMacLike, isMobile } from '../Utils/Platform';\n\nexport const adaptAcceleratorString = (accelerator: string): string => {\n  if (isMobile()) {\n    return ''; // Do not display accelerators on mobile devices\n  } else if (isMacLike()) {\n    return accelerator\n      .replace(/CmdOrCtrl\\+/, '⌘')\n      .replace(/CommandOrControl\\+/, '⌘')\n      .replace(/Super\\+/, '⌘')\n      .replace(/Shift\\+/, '⇧')\n      .replace(/Alt\\+/, '⌥')\n      .replace(/Option\\+/, '⌥')\n      .replace(/Delete/, '⌦')\n      .replace(/Backspace/, '⌫');\n  } else {\n    return accelerator\n      .replace(/CmdOrCtrl\\+/, 'Ctrl+')\n      .replace(/CommandOrControl\\+/, 'Ctrl+')\n      .replace(/Super\\+/, 'Win+')\n      .replace(/Option\\+/, 'Alt+')\n      .replace(/Delete/, 'DEL');\n  }\n};\n","// @flow\nimport * as React from 'react';\nimport { type GDevelopTheme } from '.';\nimport GDevelopThemeContext from './ThemeContext';\n\ntype Props = {|\n  children: (gdevelopTheme: GDevelopTheme) => React.Node,\n|};\n\n/**\n * Expose the Material UI theme.\n */\nconst ThemeConsumer = (props: Props) => (\n  <GDevelopThemeContext.Consumer>\n    {gdevelopTheme => props.children(gdevelopTheme)}\n  </GDevelopThemeContext.Consumer>\n);\n\nexport default ThemeConsumer;\n","// @flow\nimport * as React from 'react';\nimport TextField from './TextField';\n\ntype State = {|\n  focused: boolean,\n  text: ?any,\n|};\n\ntype Props = {|\n  onChange: string => void,\n  value: string,\n  commitOnBlur?: boolean,\n  onFocus?: ({\n    currentTarget: {\n      value: string,\n    },\n    preventDefault: () => void,\n  }) => void,\n  onBlur?: ({\n    currentTarget: {\n      value: string,\n    },\n  }) => void,\n  type?: 'text' | 'number',\n\n  // Some TextField props that can be reused:\n  onClick?: () => void,\n  onKeyPress?: (event: SyntheticKeyboardEvent<>) => void,\n  onKeyUp?: (event: SyntheticKeyboardEvent<>) => void,\n  onKeyDown?: (event: SyntheticKeyboardEvent<>) => void,\n  margin?: 'none' | 'dense',\n  disabled?: boolean,\n  errorText?: React.Node,\n  floatingLabelFixed?: boolean,\n  floatingLabelText?: React.Node,\n  fullWidth?: boolean,\n  hintText?: React.Node,\n  helperMarkdownText?: ?string,\n  id?: string,\n  inputStyle?: Object,\n  max?: number,\n  min?: number,\n  multiLine?: boolean,\n  name?: string,\n  step?: number,\n  style?: Object,\n  rows?: number,\n  rowsMax?: number,\n  autoFocus?: boolean,\n|};\n\n/**\n * This component works like a material-ui TextField, except that\n * the value passed as props is not forced into the text field when the user\n * is typing. This is useful if the parent component can do modifications on the value:\n * the user won't be interrupted or have the value changed until he blurs the field.\n */\nexport default class SemiControlledTextField extends React.Component<\n  Props,\n  State\n> {\n  state = {\n    focused: false,\n    text: null,\n  };\n\n  _field: ?TextField = null;\n\n  forceSetValue(text: string) {\n    this.setState({ text });\n  }\n\n  forceSetSelection(selectionStart: number, selectionEnd: number) {\n    const input = this.getInputNode();\n    if (input) {\n      input.selectionStart = selectionStart;\n      input.selectionEnd = selectionEnd;\n    }\n  }\n\n  focus() {\n    if (this._field) this._field.focus();\n  }\n\n  getInputNode(): ?HTMLInputElement {\n    if (this._field) return this._field.getInputNode();\n  }\n\n  render() {\n    const {\n      value,\n      onChange,\n      commitOnBlur,\n      onFocus,\n      onBlur,\n      type,\n      ...otherProps\n    } = this.props;\n\n    return (\n      // $FlowFixMe\n      <TextField\n        {...otherProps}\n        type={type || 'text'}\n        ref={field => (this._field = field)}\n        value={this.state.focused ? this.state.text : value}\n        onFocus={event => {\n          this.setState({\n            focused: true,\n            text: this.props.value,\n          });\n\n          if (onFocus) onFocus(event);\n        }}\n        onChange={(event, newValue) => {\n          this.setState({\n            text: newValue,\n          });\n\n          if (!commitOnBlur) onChange(newValue);\n        }}\n        onBlur={event => {\n          onChange(event.currentTarget.value);\n          this.setState({\n            focused: false,\n            text: null,\n          });\n\n          if (onBlur) onBlur(event);\n        }}\n      />\n    );\n  }\n}\n","// @flow\nimport { Trans } from '@lingui/macro';\n\nimport React, { PureComponent } from 'react';\nimport { List, ListItem } from '../UI/List';\nimport Dialog from '../UI/Dialog';\nimport FlatButton from '../UI/FlatButton';\nimport { Tabs, Tab } from '../UI/Tabs';\nimport { Column, Line } from '../UI/Grid';\nimport Window from '../Utils/Window';\nimport Text from '../UI/Text';\nimport PreferencesContext from './Preferences/PreferencesContext';\nimport {\n  getUpdateStatusLabel,\n  getUpdateButtonLabel,\n  canDownloadUpdate,\n  type UpdateStatus,\n} from './UpdaterTools';\nimport Changelog from './Changelog';\nimport { getIDEVersion, getGDCoreVersion } from '../Version';\n\ntype Props = {\n  open: boolean,\n  onClose: Function,\n  updateStatus: UpdateStatus,\n};\n\ntype State = {|\n  currentTab: string,\n|};\n\nconst styles = {\n  logo: {\n    width: '100%',\n  },\n};\n\n// There must be missing tons of people.\n// If you contributed to GDevelop but you're not in the list, please\n// send a Pull Request on GitHub or open an issue ;)\nconst contributors = [\n  // GitHub contributors\n  {\n    name: 'Victor Levasseur',\n    description:\n      'Numerous contributions to GDevelop core and various extensions',\n  },\n  {\n    name: 'Lizard-13',\n    description:\n      'Numerous contributions to GDevelop (particle engine, bugfixes, new conditions, examples, tutorials...)',\n  },\n  {\n    name: \"Christina 'Castpixel' Antoinette Neofotistou\",\n    description: 'Art and assets for the 8-bit Space Shooter example.',\n    link: 'https://www.patreon.com/castpixel',\n  },\n  { name: 'ale26reg', description: 'Contributions to GDevelop' },\n  { name: 'dos1', description: 'Contributions to GDevelop' },\n  {\n    name: 'Aurélien Vivet',\n    description:\n      'Numerous contributions to GDevelop (Video extension, advanced shapes, bugfixes, new conditions, examples...)',\n    link: 'https://www.witly.fr',\n  },\n  {\n    name: 'Todor Imreorov',\n    description:\n      'Numerous contributions to GDevelop, added Piskel sprite editor and jfxr',\n  },\n  { name: 'brylie', description: 'Contributions to GDevelop' },\n  { name: 'Nnarol', description: 'Contributions to GDevelop' },\n  { name: 'wild-master', description: 'Contributions to GDevelop' },\n  { name: 'RandomShaper', description: 'Contributions to GDevelop' },\n  { name: 'RyanNerd', description: 'Contributions to GDevelop' },\n  { name: 'greater', description: 'Contributions to GDevelop' },\n  { name: 'triptych', description: 'Contributions to GDevelop' },\n  {\n    name: 'Wend1go',\n    description: 'Contributions to GDevelop, Tutorials, Examples',\n  },\n  { name: 'mattiascibien', description: 'Contributions to GDevelop' },\n  { name: 'araujo921', description: 'Contributions to GDevelop' },\n  { name: 'ronnystandtke', description: 'Contributions to GDevelop' },\n  {\n    name: 'Thomas Flecy',\n    description: 'Contributions to GDevelop (original sound object extension)',\n  },\n  {\n    name: 'Arthur Pacaud (arthuro555)',\n    description: 'Contributions to GDevelop and Moderation on the Forum',\n    link: 'https://forum.gdevelop-app.com/u/arthuro555/summary',\n  },\n\n  // Community members:\n  {\n    name: 'ddabrahim',\n    description: 'Lots of examples bundled with GDevelop',\n    link: 'https://gametemplates.itch.io/',\n  },\n  {\n    name: 'Gametemplates',\n    description: 'Examples bundled with GDevelop',\n    link: 'https://gametemplates.itch.io/',\n  },\n  { name: 'Mats', description: 'Tutorials, Examples' },\n  { name: 'erdo', description: 'Tutorials, Examples' },\n  { name: 'Jubileuksen3', description: 'Tutorials, Examples' },\n  { name: 'LucaTexas', description: 'Tutorials, Examples' },\n  { name: 'Kink', description: 'Forum moderator, tutorials, Examples' },\n  { name: 'RicoTrooper', description: 'Tutorials' },\n  { name: 'kalel', description: 'Tutorials' },\n  { name: 'mtarzaim', description: 'Tutorials' },\n  { name: 'Darkhog', description: 'Examples' },\n  { name: 'Ricardo Graca', description: 'Tutorials, Examples' },\n  { name: 'Diego Schiavon', description: 'Indiegogo Ubuntu contributor' },\n  { name: 'conceptgame', description: 'Indiegogo super contributor' },\n  {\n    name: 'Jose David Cuartas Correa',\n    description:\n      'Author of Digitopolis (a book on how to make games with GDevelop4)',\n  },\n\n  {\n    name: 'François Dumortier',\n    description: 'GDevelop logo design',\n    link: 'http://www.fdumortier.com',\n  },\n  {\n    name: 'Constantine Shvetsov',\n    description: 'Design of all the awesome icons',\n  },\n  {\n    name: 'MillionthVector',\n    description: 'Assets of various examples',\n  },\n];\n\nexport default class AboutDialog extends PureComponent<Props, State> {\n  state = {\n    currentTab: 'about',\n  };\n\n  _openContributePage = () => {\n    Window.openExternalURL('https://gdevelop-app.com/contribute/');\n  };\n\n  _openLink = (link: string) => {\n    if (!link) return;\n\n    Window.openExternalURL(link);\n  };\n\n  _changeTab = (currentTab: string) => {\n    this.setState({ currentTab });\n  };\n\n  render() {\n    const { open, onClose, updateStatus } = this.props;\n    const { currentTab } = this.state;\n    if (!open) return null;\n\n    const updateStatusString = getUpdateStatusLabel(updateStatus.status);\n    const updateButtonLabel = getUpdateButtonLabel(updateStatus.status);\n\n    return (\n      <Dialog\n        actions={[\n          <FlatButton\n            key=\"website\"\n            label={<Trans>GDevelop Website</Trans>}\n            primary={false}\n            onClick={() => Window.openExternalURL('http://gdevelop-app.com')}\n          />,\n          <FlatButton\n            key=\"close\"\n            label={<Trans>Close</Trans>}\n            primary={false}\n            onClick={onClose}\n          />,\n        ]}\n        onRequestClose={onClose}\n        cannotBeDismissed={false}\n        open={open}\n        maxWidth=\"sm\"\n        noMargin\n      >\n        <PreferencesContext.Consumer>\n          {({ values, checkUpdates }) => (\n            <Column noMargin>\n              <img\n                src=\"res/GD-logo.png\"\n                alt=\"GDevelop logo\"\n                style={styles.logo}\n              />\n              <Tabs value={currentTab} onChange={this._changeTab}>\n                <Tab label={<Trans>About GDevelop</Trans>} value=\"about\" />\n                <Tab label={<Trans>What's new?</Trans>} value=\"changelog\" />\n                <Tab label={<Trans>Contributors</Trans>} value=\"contributors\" />\n              </Tabs>\n              {currentTab === 'about' && (\n                <React.Fragment>\n                  <Column>\n                    <Line>\n                      <Text>\n                        <Trans>\n                          GDevelop {getIDEVersion()} based on GDevelop.js{' '}\n                          {getGDCoreVersion()}\n                        </Trans>\n                      </Text>\n                    </Line>\n                    <Line>\n                      <Text>{updateStatusString}</Text>\n                    </Line>\n                    <Line justifyContent=\"center\">\n                      {!!updateStatusString && (\n                        <FlatButton\n                          label={updateButtonLabel}\n                          onClick={() =>\n                            checkUpdates(canDownloadUpdate(updateStatus.status))\n                          }\n                        />\n                      )}\n                    </Line>\n                  </Column>\n                </React.Fragment>\n              )}\n              {currentTab === 'changelog' && (\n                <Column>\n                  <Changelog />\n                </Column>\n              )}\n              {currentTab === 'contributors' && (\n                <React.Fragment>\n                  <Column>\n                    <Text>\n                      <Trans>\n                        GDevelop was created by Florian \"4ian\" Rival.\n                      </Trans>\n                    </Text>\n                    <Text>\n                      <Trans>Contributors, in no particular order:</Trans>\n                    </Text>\n                  </Column>\n                  <List>\n                    {contributors.map(contributor => (\n                      <ListItem\n                        key={contributor.name}\n                        primaryText={contributor.name}\n                        secondaryText={contributor.description}\n                        secondaryTextLines={\n                          contributor.description.length < 30 ? 1 : 2\n                        }\n                        displayLinkButton={contributor.link ? true : false}\n                        onOpenLink={() =>\n                          this._openLink(contributor.link || '')\n                        }\n                      />\n                    ))}\n                  </List>\n                  <Column expand>\n                    <Text>\n                      <Trans>\n                        Thanks to all users of GDevelop! There must be missing\n                        tons of people, please send your name if you've\n                        contributed and you're not listed.\n                      </Trans>\n                    </Text>\n                    <Line alignItems=\"center\" justifyContent=\"center\">\n                      <FlatButton\n                        label={<Trans>Contribute to GDevelop</Trans>}\n                        onClick={this._openContributePage}\n                      />\n                    </Line>\n                  </Column>\n                </React.Fragment>\n              )}\n            </Column>\n          )}\n        </PreferencesContext.Consumer>\n      </Dialog>\n    );\n  }\n}\n","// @flow\nimport * as React from 'react';\nimport FlatButton from '../FlatButton';\nimport HelpOutline from '@material-ui/icons/HelpOutline';\nimport Window from '../../Utils/Window';\nimport { getHelpLink } from '../../Utils/HelpLink';\nimport { Trans } from '@lingui/macro';\n\ntype PropsType = {\n  helpPagePath: ?string,\n  label?: React.Node,\n};\n\n/**\n * The button that can be used in any dialog to open a help page\n */\nconst HelpButton = (props: PropsType) => {\n  if (!props.helpPagePath) return null;\n\n  return (\n    <FlatButton\n      onClick={() => {\n        if (props.helpPagePath) {\n          Window.openExternalURL(getHelpLink(props.helpPagePath));\n        }\n      }}\n      target=\"_blank\"\n      label={props.label || <Trans>Help</Trans>}\n      icon={<HelpOutline />}\n    />\n  );\n};\n\nexport default HelpButton;\n","// @flow\nimport optionalRequire from '../Utils/OptionalRequire.js';\nconst electron = optionalRequire('electron');\nconst path = optionalRequire('path');\n\nclass UrlsCache {\n  projectCache = {};\n\n  _getProjectCache(project: gdProject) {\n    const cache = this.projectCache[project.ptr];\n    if (!cache) {\n      return (this.projectCache[project.ptr] = {});\n    }\n\n    return cache;\n  }\n\n  getCachedUrl(project: gdProject, filename: string) {\n    const cache = this._getProjectCache(project);\n    return cache[filename];\n  }\n\n  cacheUrl(project: gdProject, url: string) {\n    const cache = this._getProjectCache(project);\n    return (cache[url] = url);\n  }\n\n  burstUrl(project: gdProject, url: string) {\n    const cache = this._getProjectCache(project);\n    delete cache[url];\n  }\n\n  cacheLocalFileUrl(\n    project: gdProject,\n    filename: string,\n    systemFilename: string,\n    disableCacheBurst: boolean\n  ) {\n    const cache = this._getProjectCache(project);\n\n    if (!disableCacheBurst) {\n      // The URL is cached with an extra \"cache-bursting\" parameter.\n      // If the cache is emptied or changed, local files will have another\n      // value for this parameter, forcing the browser to reload the images.\n      return (cache[filename] = `${systemFilename}?cache=${Date.now()}`);\n    } else {\n      return (cache[filename] = systemFilename);\n    }\n  }\n}\n\n/**\n * A class globally used in the whole IDE to get URLs to resources of games\n * (notably images).\n */\nexport default class ResourcesLoader {\n  static _cache = new UrlsCache();\n\n  static _isLocalFile(filename: string): boolean {\n    return (\n      filename.indexOf('data:') !== 0 &&\n      filename.indexOf('http://') !== 0 &&\n      filename.indexOf('https://') !== 0 &&\n      filename.indexOf('ftp://') !== 0\n    );\n  }\n\n  /**\n   * Remove the specified resources resolved URLs from the cache. Useful if the\n   * file represented by these resources has changed. This force these local files to be loaded again.\n   */\n  static burstUrlsCacheForResources(\n    project: gdProject,\n    resourcesNames: Array<string>\n  ) {\n    const resourcesManager = project.getResourcesManager();\n    resourcesNames.forEach(resourceName => {\n      if (resourcesManager.hasResource(resourceName)) {\n        ResourcesLoader._cache.burstUrl(\n          project,\n          resourcesManager.getResource(resourceName).getFile()\n        );\n      }\n    });\n  }\n\n  /**\n   * Re-create a new cache for URLs. Call this to force local\n   * file to be loaded again.\n   */\n  static burstAllUrlsCache() {\n    ResourcesLoader._cache = new UrlsCache();\n  }\n\n  /**\n   * Get the fully qualified URL/filename for a URL/filename relative to the project.\n   */\n  static getFullUrl(\n    project: gdProject,\n    filename: string,\n    disableCacheBurst: boolean = false\n  ) {\n    const cachedUrl = ResourcesLoader._cache.getCachedUrl(project, filename);\n    if (cachedUrl) return cachedUrl;\n\n    if (electron && ResourcesLoader._isLocalFile(filename)) {\n      // Support local filesystem with Electron\n      const file = project.getProjectFile();\n      const projectPath = path.dirname(file);\n      const resourceAbsolutePath = path\n        .resolve(projectPath, filename)\n        .replace(/\\\\/g, '/');\n\n      console.info('Caching resolved local filename:', resourceAbsolutePath);\n      return this._cache.cacheLocalFileUrl(\n        project,\n        filename,\n        'file://' + resourceAbsolutePath,\n        disableCacheBurst\n      );\n    }\n\n    // URLs to non local files are unchanged\n    return this._cache.cacheUrl(project, filename);\n  }\n\n  /**\n   * Get the fully qualified URL/filename associated with the given resource.\n   */\n  static getResourceFullUrl(\n    project: gdProject,\n    resourceName: string,\n    disableCacheBurst: boolean = false\n  ) {\n    if (project.getResourcesManager().hasResource(resourceName)) {\n      const resourceRelativePath = project\n        .getResourcesManager()\n        .getResource(resourceName)\n        .getFile();\n      return ResourcesLoader.getFullUrl(\n        project,\n        resourceRelativePath,\n        disableCacheBurst\n      );\n    }\n\n    return resourceName;\n  }\n}\n","// @flow\nimport { t } from '@lingui/macro';\nimport * as React from 'react';\nimport { TreeTableRow, TreeTableCell } from '../UI/TreeTable';\nimport DragHandle from '../UI/DragHandle';\nimport SemiControlledTextField from '../UI/SemiControlledTextField';\nimport Checkbox from '../UI/Checkbox';\nimport AddCircle from '@material-ui/icons/AddCircle';\nimport SubdirectoryArrowRight from '@material-ui/icons/SubdirectoryArrowRight';\nimport TextField from '../UI/TextField';\nimport IconButton from '../UI/IconButton';\nimport Replay from '@material-ui/icons/Replay';\nimport styles from './styles';\nimport { type VariableOrigin } from './VariablesList.flow';\nimport Text from '../UI/Text';\n\n//TODO: Refactor into TreeTable?\nconst Indent = ({ width }) => (\n  <div style={{ ...styles.indent, width }}>\n    <SubdirectoryArrowRight htmlColor={styles.indentIconColor} />\n  </div>\n);\n\ntype Props = {|\n  name: string,\n  variable: gdVariable,\n  depth: number,\n  errorText?: ?string,\n  onBlur: () => void,\n  onRemove: () => void,\n  onAddChild: () => void,\n  onChangeValue: string => void,\n  onResetToDefaultValue: () => void,\n  children?: React.Node,\n  showHandle: boolean,\n  showSelectionCheckbox: boolean,\n  isSelected: boolean,\n  onSelect: boolean => void,\n  origin: VariableOrigin,\n|};\n\nconst VariableRow = ({\n  name,\n  variable,\n  depth,\n  errorText,\n  onBlur,\n  onRemove,\n  onAddChild,\n  onChangeValue,\n  onResetToDefaultValue,\n  children,\n  showHandle,\n  showSelectionCheckbox,\n  isSelected,\n  onSelect,\n  origin,\n}: Props) => {\n  const isStructure = variable.isStructure();\n  const key = '' + depth + name;\n\n  const limitEditing = origin === 'parent' || origin === 'inherited';\n\n  const columns = [\n    <TreeTableCell key=\"name\" expand>\n      {depth > 0 && (\n        <Indent width={(depth + 1) * styles.tableChildIndentation} />\n      )}\n      {depth === 0 && showHandle && <DragHandle />}\n      {showSelectionCheckbox && !limitEditing && (\n        <Checkbox\n          checked={isSelected}\n          onCheck={(e, checked) => onSelect(checked)}\n        />\n      )}\n      <TextField\n        margin=\"none\"\n        style={{\n          fontStyle: origin !== 'inherited' ? 'normal' : 'italic',\n        }}\n        fullWidth\n        name={key + 'name'}\n        defaultValue={name}\n        errorText={errorText}\n        onBlur={onBlur}\n        disabled={origin === 'parent'}\n      />\n    </TreeTableCell>,\n  ];\n  if (!isStructure) {\n    columns.push(\n      <TreeTableCell key=\"value\" expand>\n        <SemiControlledTextField\n          margin=\"none\"\n          commitOnBlur\n          fullWidth\n          name={key + 'value'}\n          value={variable.getString()}\n          onChange={text => {\n            if (variable.getString() !== text) {\n              onChangeValue(text);\n            }\n          }}\n          multiLine\n          disabled={origin === 'parent' && depth !== 0}\n        />\n      </TreeTableCell>\n    );\n  } else {\n    columns.push(\n      <TreeTableCell\n        expand\n        key=\"value\"\n        style={limitEditing ? styles.fadedButton : undefined}\n      >\n        <Text>(Structure)</Text>\n      </TreeTableCell>\n    );\n  }\n  columns.push(\n    <TreeTableCell key=\"tools\" style={styles.toolColumn}>\n      {origin === 'inherited' && depth === 0 && (\n        <IconButton\n          onClick={onResetToDefaultValue}\n          style={isStructure ? undefined : styles.fadedButton}\n          tooltip={t`Reset`}\n        >\n          <Replay />\n        </IconButton>\n      )}\n      {!(origin === 'inherited' && depth === 0) && origin !== 'parent' && (\n        <IconButton\n          onClick={onAddChild}\n          style={isStructure ? undefined : styles.fadedButton}\n          tooltip={t`Add child variable`}\n        >\n          <AddCircle />\n        </IconButton>\n      )}\n    </TreeTableCell>\n  );\n\n  return (\n    <div>\n      <TreeTableRow>{columns}</TreeTableRow>\n      {children}\n    </div>\n  );\n};\n\nexport default VariableRow;\n","// @flow\n/**\n * Export functions to manipulate a selection of objects.\n */\n\nimport values from 'lodash/values';\n\ntype ObjectType = { ptr: number };\n\ntype SelectionState<T> = {\n  [number]: ?T,\n};\n\nexport const getInitialSelection = () => ({});\n\nexport const clearSelection = () => getInitialSelection();\n\nexport const getSelection = <T: ObjectType>(\n  selection: SelectionState<T>\n): Array<T> => values(selection).filter(value => !!value);\n\nexport const addToSelection = <T: ObjectType>(\n  selection: SelectionState<T>,\n  object: T,\n  select: boolean = true\n): SelectionState<T> => {\n  console.log(object, select);\n  return {\n    ...selection,\n    [object.ptr]: select ? object : null,\n  };\n};\n\nexport const isSelected = <T: ObjectType>(\n  selection: SelectionState<T>,\n  object: T\n): boolean => !!selection[object.ptr];\n\nexport const hasSelection = <T: ObjectType>(\n  selection: SelectionState<T>\n): boolean => {\n  return !!values(selection).filter(value => !!value).length;\n};\n","// @flow\n\nconst gd = global.gd;\n\n/**\n * Tool function to save a serializable object to a JS object.\n * Most gd.* objects are \"serializable\", meaning they have a serializeTo\n * and unserializeFrom method.\n *\n * @param {*} serializable\n * @param {*} methodName The name of the serialization method. \"unserializeFrom\" by default\n */\nexport function serializeToJSObject(\n  serializable: gdSerializable,\n  methodName: string = 'serializeTo'\n) {\n  const serializedElement = new gd.SerializerElement();\n  serializable[methodName](serializedElement);\n  const object = JSON.parse(gd.Serializer.toJSON(serializedElement));\n  serializedElement.delete();\n\n  return object;\n}\n\n/**\n * Tool function to save a serializable object to a JSON.\n * Most gd.* objects are \"serializable\", meaning they have a serializeTo\n * and unserializeFrom method.\n *\n * @param {*} serializable\n * @param {*} methodName The name of the serialization method. \"unserializeFrom\" by default\n */\nexport function serializeToJSON(\n  serializable: gdSerializable,\n  methodName: string = 'serializeTo'\n): string {\n  const serializedElement = new gd.SerializerElement();\n  serializable[methodName](serializedElement);\n\n  return gd.Serializer.toJSON(serializedElement);\n}\n\n/**\n * Tool function to restore a serializable object from a JS object.\n * Most gd.* objects are \"serializable\", meaning they have a serializeTo\n * and unserializeFrom method.\n * @param {*} serializable A gd.* object to restore\n * @param {*} object The JS object to be used to restore the serializable.\n * @param {*} methodName The name of the unserialization method. \"unserializeFrom\" by default\n * @param {*} optionalProject The project to pass as argument for unserialization\n */\nexport function unserializeFromJSObject(\n  serializable: gdSerializable,\n  object: Object,\n  methodName: string = 'unserializeFrom',\n  optionalProject: ?gdProject = undefined\n) {\n  const serializedElement = gd.Serializer.fromJSObject(object);\n  if (!optionalProject) {\n    serializable[methodName](serializedElement);\n  } else {\n    // It's not uncommon for unserializeFrom methods of gd.* classes\n    // to require the project to be passed as first argument.\n    serializable[methodName](optionalProject, serializedElement);\n  }\n  serializedElement.delete();\n}\n","export const CLIPBOARD_KIND = 'Variables';\n","// @flow\nimport { t } from '@lingui/macro';\nimport * as React from 'react';\nimport { I18n } from '@lingui/react';\nimport TextField from '@material-ui/core/TextField';\nimport { type MessageDescriptor } from '../Utils/i18n/MessageDescriptor.flow';\nimport { computeTextFieldStyleProps } from './TextField';\nimport { MarkdownText } from './MarkdownText';\n\ntype ValueProps = {|\n  value: number | string,\n  // event and index should not be used, and be removed eventually\n  onChange?: (\n    event: {| target: {| value: string |} |},\n    index: number,\n    text: string // Note that even for number values, a string is returned\n  ) => void,\n|};\n\n// We support a subset of the props supported by Material-UI v0.x SelectField\n// They should be self descriptive - refer to Material UI docs otherwise.\ntype Props = {|\n  ...ValueProps,\n  fullWidth?: boolean,\n  children: React.Node,\n  disabled?: boolean,\n\n  style?: {\n    flex?: 1,\n    width?: 'auto',\n  },\n  margin?: 'none' | 'dense',\n\n  floatingLabelText?: React.Node,\n  helperMarkdownText?: ?string,\n\n  // If a hint text is specified, will be shown as an option for the empty\n  // value (\"\"), disabled.\n  hintText?: MessageDescriptor,\n|};\n\nconst INVALID_VALUE = '';\n\n/**\n * A select field based on Material-UI select field.\n * To be used with `SelectOption`.\n */\nexport default class SelectField extends React.Component<Props, {||}> {\n  _input = React.createRef<HTMLInputElement>();\n\n  focus() {\n    if (this._input.current) this._input.current.focus();\n  }\n\n  render() {\n    const { props } = this;\n    const onChange = props.onChange || undefined;\n\n    // Dig into children props to see if the current value is valid or not.\n    let hasValidValue = true;\n    const childrenValues = React.Children.map(props.children, child => {\n      if (child === null || !child.props) return null;\n\n      return child.props.value;\n    });\n    if (!childrenValues) {\n      console.error(\n        'SelectField has been passed no or invalid children. Only SelectOption and null are supported.'\n      );\n    } else {\n      hasValidValue =\n        childrenValues.filter(childValue => childValue === props.value)\n          .length !== 0;\n    }\n    const displayedValue = hasValidValue ? props.value : INVALID_VALUE;\n\n    const helperText = props.helperMarkdownText ? (\n      <MarkdownText source={props.helperMarkdownText} />\n    ) : null;\n\n    return (\n      <I18n>\n        {({ i18n }) => (\n          <TextField\n            select\n            {...computeTextFieldStyleProps(props)}\n            disabled={props.disabled}\n            fullWidth={props.fullWidth}\n            label={props.floatingLabelText}\n            helperText={helperText}\n            value={displayedValue}\n            onChange={\n              onChange\n                ? event => {\n                    onChange(event, -1, event.target.value);\n                  }\n                : undefined\n            }\n            InputLabelProps={{\n              shrink: true,\n            }}\n            SelectProps={{\n              native: true,\n            }}\n            style={props.style}\n            inputRef={this._input}\n          >\n            {!hasValidValue ? (\n              <option value={INVALID_VALUE} disabled>\n                {props.hintText\n                  ? i18n._(props.hintText)\n                  : i18n._(t`Choose an option`)}\n              </option>\n            ) : null}\n            {props.children}\n          </TextField>\n        )}\n      </I18n>\n    );\n  }\n}\n","// @flow\nimport * as React from 'react';\nimport { I18n } from '@lingui/react';\nimport { type MessageDescriptor } from '../Utils/i18n/MessageDescriptor.flow';\n\n// We support a subset of the props supported by Material-UI v0.x MenuItem\n// They should be self descriptive - refer to Material UI docs otherwise.\ntype Props = {|\n  value: string | number | boolean,\n  primaryText: MessageDescriptor,\n  disabled?: boolean,\n|};\n\n/**\n * A native select option to be used with `SelectField`.\n */\nexport default class SelectOption extends React.Component<Props, {||}> {\n  render() {\n    return (\n      <I18n>\n        {({ i18n }) => (\n          <option value={this.props.value} disabled={this.props.disabled}>\n            {i18n._(this.props.primaryText)}\n          </option>\n        )}\n      </I18n>\n    );\n  }\n}\n","// @flow\nexport const selectableArea = 'selectable';\nexport const selectedArea = 'selected';\nexport const icon = 'icon';\n\nexport const largeSelectableArea = 'large-selectable';\nexport const largeSelectedArea = 'large-selected';\n\nexport const executableEventContainer = 'executable-event-container';\nexport const actionsContainer = 'actions-container';\nexport const conditionsContainer = 'conditions-container';\nexport const subInstructionsContainer = 'sub-instructions-container';\nexport const smallWidthContainer = 'small-width-container';\nexport const instructionParameter = 'instruction-parameter';\nexport const instructionInvalidParameter = 'instruction-invalid-parameter';\nexport const instructionMissingParameter = 'instruction-missing-parameter';\nexport const disabledText = 'disabled-text';\n\nexport const background = 'background';\n\nexport const eventsTree = 'events-tree';\nexport const eventsTreeWithSearchResults = 'with-search-results';\n\nexport const dropIndicator = 'drop-indicator';\nexport const cantDropIndicator = 'cant-drop-indicator';\n\nexport const linkContainer = 'link-container';\n\nexport const nameAndIconContainer = 'name-and-icon-container';\n","// @flow\nimport * as React from 'react';\nimport Paper from '@material-ui/core/Paper';\n\nconst styles = {\n  container: {\n    display: 'flex',\n    flexDirection: 'column',\n  },\n  maxWidth: {\n    maxWidth: '100%',\n  },\n};\n\ntype Props = {|\n  children: ?React.Node,\n  maxWidth?: boolean,\n  width?: number | string,\n  noFullHeight?: boolean,\n  noExpand?: boolean,\n|};\n\n/**\n * This is the component to be used to display the standard\n * background of editor/windows/dialogs.\n */\nconst Background = (props: Props) => (\n  <Paper\n    square\n    style={{\n      ...styles.container,\n      height: props.noFullHeight ? undefined : '100%',\n      width: props.width ? props.width : undefined,\n      flex: props.noExpand ? undefined : 1,\n      ...(props.maxWidth ? styles.maxWidth : undefined),\n    }}\n  >\n    {props.children}\n  </Paper>\n);\n\nexport default Background;\n","// @flow\nimport * as React from 'react';\nimport { Spacer, Line } from './Grid';\nimport { ResponsiveWindowMeasurer } from './Reponsive/ResponsiveWindowMeasurer';\n\ntype TextFieldWithButtonLayoutProps = {|\n  renderTextField: () => React.Node,\n  renderButton: (style: {|\n    marginTop?: number,\n    marginBottom?: number,\n    marginLeft?: number,\n    marginRight?: number,\n    margin?: number,\n    flexShrink?: 0,\n  |}) => React.Node,\n  margin?: 'none' | 'dense',\n  noFloatingLabelText?: boolean,\n|};\n\nconst buttonCommonStyles = {\n  // Ensure the button is not shrinked, even if the text field\n  // (in particular with a long helper text) is large.\n  flexShrink: 0,\n};\n\nconst textFieldWithButtonLayoutStyles = {\n  container: {\n    flex: 1,\n    display: 'flex',\n    alignItems: 'flex-start', // Align from the top to stay at the same position when error/multiline\n  },\n  filledTextFieldWithLabelRightButtonMargins: {\n    ...buttonCommonStyles,\n    marginTop: 24, // Properly align with the text field (only dense \"filled\" text fields supported)\n    marginLeft: 10,\n  },\n  filledTextFieldWithoutLabelRightButtonMargins: {\n    ...buttonCommonStyles,\n    marginTop: 15, // Properly align with the text field (only dense \"filled\" text fields supported)\n    marginLeft: 10,\n  },\n  standardTextFieldWithLabelRightButtonMargins: {\n    ...buttonCommonStyles,\n    marginTop: 17, // Properly align with the text field (only \"standard\" text fields with margin \"none\" supported)\n    marginLeft: 10,\n  },\n  standardTextFieldWithoutLabelRightButtonMargins: {\n    ...buttonCommonStyles,\n    marginTop: 0, // Properly align with the text field (only \"standard\" text fields with margin \"none\" supported)\n    marginLeft: 10,\n  },\n};\n\n/**\n * Position a button on the right of a TextField.\n */\nexport const TextFieldWithButtonLayout = ({\n  margin,\n  noFloatingLabelText,\n  renderTextField,\n  renderButton,\n}: TextFieldWithButtonLayoutProps) => {\n  return (\n    <div style={textFieldWithButtonLayoutStyles.container}>\n      {renderTextField()}\n      {renderButton(\n        margin === 'none'\n          ? noFloatingLabelText\n            ? textFieldWithButtonLayoutStyles.standardTextFieldWithoutLabelRightButtonMargins\n            : textFieldWithButtonLayoutStyles.standardTextFieldWithLabelRightButtonMargins\n          : noFloatingLabelText\n          ? textFieldWithButtonLayoutStyles.filledTextFieldWithoutLabelRightButtonMargins\n          : textFieldWithButtonLayoutStyles.filledTextFieldWithLabelRightButtonMargins\n      )}\n    </div>\n  );\n};\n\ntype ResponsiveLineStackLayoutProps = {|\n  alignItems?: string,\n  justifyContent?: string,\n  expand?: boolean,\n  noMargin?: boolean,\n  children: React.Node,\n|};\n\nexport const ResponsiveLineStackLayout = ({\n  alignItems,\n  justifyContent,\n  expand,\n  noMargin,\n  children,\n}: ResponsiveLineStackLayoutProps) => {\n  let isFirstChild = true;\n  return (\n    <ResponsiveWindowMeasurer>\n      {windowWidth =>\n        windowWidth === 'small' ? (\n          React.Children.map(children, (child, index) => {\n            return <Line expand>{child}</Line>;\n          })\n        ) : (\n          <Line\n            alignItems={alignItems}\n            justifyContent={justifyContent}\n            expand={expand}\n            noMargin={noMargin}\n          >\n            {React.Children.map(children, (child, index) => {\n              if (!child) return null;\n\n              const addSpacers = !isFirstChild;\n              isFirstChild = false;\n\n              return (\n                <React.Fragment>\n                  {addSpacers && <Spacer />}\n                  {addSpacers && <Spacer />}\n                  {child}\n                </React.Fragment>\n              );\n            })}\n          </Line>\n        )\n      }\n    </ResponsiveWindowMeasurer>\n  );\n};\n","// @flow\nimport { Trans } from '@lingui/macro';\nimport * as React from 'react';\nimport type { ResourceKind } from '../../ResourcesList/ResourceSource.flow';\n\nexport type AlertMessageIdentifier =\n  | 'use-non-smoothed-textures'\n  | 'use-nearest-scale-mode'\n  | 'maximum-fps-too-low'\n  | 'minimum-fps-too-low'\n  | 'function-extractor-explanation'\n  | 'events-based-behavior-explanation'\n  | 'empty-events-based-behavior-explanation'\n  | 'too-much-effects'\n  | 'effects-usage'\n  | 'resource-properties-panel-explanation'\n  | 'instance-drag-n-drop-explanation'\n  | 'objects-panel-explanation'\n  | 'instance-properties-panel-explanation'\n  | 'layers-panel-explanation'\n  | 'physics2-shape-collisions'\n  | 'edit-instruction-explanation'\n  | 'lifecycle-events-function-included-only-if-extension-used';\n\nexport const allAlertMessages: Array<{\n  key: AlertMessageIdentifier,\n  label: React.Node,\n}> = [\n  {\n    key: 'use-non-smoothed-textures',\n    label: <Trans>Using non smoothed textures</Trans>,\n  },\n  {\n    key: 'use-nearest-scale-mode',\n    label: <Trans>Using Nearest Scale Mode</Trans>,\n  },\n  {\n    key: 'maximum-fps-too-low',\n    label: <Trans>Maximum Fps is too low</Trans>,\n  },\n  {\n    key: 'minimum-fps-too-low',\n    label: <Trans>Minimum Fps is too low</Trans>,\n  },\n  {\n    key: 'function-extractor-explanation',\n    label: <Trans>Using function extractor</Trans>,\n  },\n  {\n    key: 'events-based-behavior-explanation',\n    label: <Trans>Using events based behavior</Trans>,\n  },\n  {\n    key: 'empty-events-based-behavior-explanation',\n    label: <Trans>Using empty events based behavior</Trans>,\n  },\n  {\n    key: 'too-much-effects',\n    label: <Trans>Using too much effects</Trans>,\n  },\n  {\n    key: 'effects-usage',\n    label: <Trans>Using effects</Trans>,\n  },\n  {\n    key: 'resource-properties-panel-explanation',\n    label: <Trans>Using the resource properties panel</Trans>,\n  },\n  {\n    key: 'instance-drag-n-drop-explanation',\n    label: <Trans>Using instance drag'n'drop</Trans>,\n  },\n  {\n    key: 'objects-panel-explanation',\n    label: <Trans>Using the objects panel</Trans>,\n  },\n  {\n    key: 'instance-properties-panel-explanation',\n    label: <Trans>Using the instance properties panel</Trans>,\n  },\n  {\n    key: 'layers-panel-explanation',\n    label: <Trans>Using the layers panel</Trans>,\n  },\n  {\n    key: 'physics2-shape-collisions',\n    label: <Trans>Collisions handling with the Physics engine</Trans>,\n  },\n  {\n    key: 'edit-instruction-explanation',\n    label: <Trans>How to edit instructions</Trans>,\n  },\n  {\n    key: 'lifecycle-events-function-included-only-if-extension-used',\n    label: <Trans>Lifecycle functions only included when extension used</Trans>,\n  },\n];\n\n/**\n * All the preferences of GDevelop. To add a new preference, add it into this\n * type and add a setter into `Preferences` type. Then, update the\n * preference dialog.\n */\nexport type PreferencesValues = {|\n  language: string,\n  autoDownloadUpdates: boolean,\n  themeName: string,\n  codeEditorThemeName: string,\n  hiddenAlertMessages: { [AlertMessageIdentifier]: boolean },\n  autoDisplayChangelog: boolean,\n  lastLaunchedVersion: ?string,\n  eventsSheetShowObjectThumbnails: boolean,\n  autosaveOnPreview: boolean,\n  useNewInstructionEditorDialog: boolean,\n  useGDJSDevelopmentWatcher: boolean,\n  eventsSheetUseAssignmentOperators: boolean,\n  showEffectParameterNames: boolean,\n  projectLastUsedPaths: { [string]: { [ResourceKind]: string } },\n|};\n\n/**\n * Type containing all the preferences of GDevelop and their setters.\n */\nexport type Preferences = {|\n  values: PreferencesValues,\n  setLanguage: (language: string) => void,\n  setThemeName: (themeName: string) => void,\n  setCodeEditorThemeName: (codeEditorThemeName: string) => void,\n  setAutoDownloadUpdates: (enabled: boolean) => void,\n  checkUpdates: (forceDownload?: boolean) => void,\n  setAutoDisplayChangelog: (enabled: boolean) => void,\n  showAlertMessage: (identifier: AlertMessageIdentifier, show: boolean) => void,\n  verifyIfIsNewVersion: () => boolean,\n  setEventsSheetShowObjectThumbnails: (enabled: boolean) => void,\n  setAutosaveOnPreview: (enabled: boolean) => void,\n  setUseNewInstructionEditorDialog: (enabled: boolean) => void,\n  setUseGDJSDevelopmentWatcher: (enabled: boolean) => void,\n  setEventsSheetUseAssignmentOperators: (enabled: boolean) => void,\n  setShowEffectParameterNames: (enabled: boolean) => void,\n  getLastUsedPath: (project: gdProject, kind: ResourceKind) => string,\n  setLastUsedPath: (\n    project: gdProject,\n    kind: ResourceKind,\n    path: string\n  ) => void,\n|};\n\nexport const initialPreferences = {\n  values: {\n    language: 'en',\n    autoDownloadUpdates: true,\n    themeName: 'GDevelop default',\n    codeEditorThemeName: 'vs-dark',\n    hiddenAlertMessages: {},\n    autoDisplayChangelog: true,\n    lastLaunchedVersion: undefined,\n    eventsSheetShowObjectThumbnails: true,\n    autosaveOnPreview: true,\n    useNewInstructionEditorDialog: false,\n    useGDJSDevelopmentWatcher: true,\n    eventsSheetUseAssignmentOperators: false,\n    showEffectParameterNames: false,\n    projectLastUsedPaths: {},\n  },\n  setLanguage: () => {},\n  setThemeName: () => {},\n  setCodeEditorThemeName: () => {},\n  setAutoDownloadUpdates: () => {},\n  checkUpdates: () => {},\n  setAutoDisplayChangelog: () => {},\n  showAlertMessage: (identifier: AlertMessageIdentifier, show: boolean) => {},\n  verifyIfIsNewVersion: () => false,\n  setEventsSheetShowObjectThumbnails: () => {},\n  setAutosaveOnPreview: () => {},\n  setUseNewInstructionEditorDialog: (enabled: boolean) => {},\n  setUseGDJSDevelopmentWatcher: (enabled: boolean) => {},\n  setEventsSheetUseAssignmentOperators: (enabled: boolean) => {},\n  setShowEffectParameterNames: (enabled: boolean) => {},\n  getLastUsedPath: (project: gdProject, kind: ResourceKind) => '',\n  setLastUsedPath: (project: gdProject, kind: ResourceKind, path: string) => {},\n};\n\nconst PreferencesContext = React.createContext<Preferences>(initialPreferences);\n\nexport default PreferencesContext;\n","// @flow\nimport { Trans } from '@lingui/macro';\n\nimport * as React from 'react';\nimport Paper from '@material-ui/core/Paper';\nimport Info from '@material-ui/icons/Info';\nimport Warning from '@material-ui/icons/Warning';\nimport Error from '@material-ui/icons/Error';\nimport { Line } from './Grid';\nimport FlatButton from './FlatButton';\nimport Text from './Text';\nimport ThemeConsumer from './Theme/ThemeConsumer';\n\nconst styles = {\n  icon: { width: 28, height: 28, marginRight: 10, marginLeft: 10 },\n  content: { flex: 1 },\n};\n\ntype Props = {|\n  kind: 'info' | 'warning' | 'error',\n  children: React.Node,\n  onHide?: () => void,\n  renderRightButton?: () => React.Node,\n|};\n\n/**\n * Show an hint, warning or other message. If you want to allow the user\n * to permanently hide the hint/alert/message, see DismissableAlertMessage.\n */\nconst AlertMessage = ({ kind, children, onHide, renderRightButton }: Props) => (\n  <Paper>\n    <ThemeConsumer>\n      {muiTheme => (\n        <Line noMargin alignItems=\"center\">\n          {kind === 'info' && <Info style={styles.icon} />}\n          {kind === 'warning' && (\n            <Warning\n              style={{\n                ...styles.icon,\n                color: muiTheme.message.warning,\n              }}\n            />\n          )}\n          {kind === 'error' && (\n            <Error\n              style={{\n                ...styles.icon,\n                color: muiTheme.message.error,\n              }}\n            />\n          )}\n          <Text style={styles.content}>{children}</Text>\n          {renderRightButton && renderRightButton()}\n          {onHide && (\n            <FlatButton label={<Trans>Hide</Trans>} onClick={() => onHide()} />\n          )}\n        </Line>\n      )}\n    </ThemeConsumer>\n  </Paper>\n);\n\nexport default AlertMessage;\n","// @flow\n\nexport default (\n  name /*:string */,\n  exists /*:(string) => boolean */,\n  prefix /*: string */ = ''\n) => {\n  if (!exists(name)) return name;\n\n  let potentialName = prefix + name;\n  for (let i = 2; exists(potentialName); ++i) {\n    potentialName = prefix + name + i;\n  }\n\n  return potentialName;\n};\n","// @flow\nimport React, { PureComponent } from 'react';\nimport ThemeConsumer from './Theme/ThemeConsumer';\n// No i18n in this file\n\ntype Props = {|\n  src: string,\n  tooltip?: string,\n  disabled?: boolean,\n  isGDevelopIcon?: boolean,\n  iconSize: number,\n|};\n\n/**\n * An icon that can be used as the leftIcon of a ListItem.\n * See also ToolbarIcon.\n */\nexport default class ListIcon extends PureComponent<Props> {\n  render() {\n    const { src, tooltip, disabled, isGDevelopIcon, iconSize } = this.props;\n\n    return (\n      <ThemeConsumer>\n        {muiTheme => (\n          <div\n            style={{\n              width: iconSize,\n              height: iconSize,\n              lineHeight: `${iconSize}px`, // Vertical centering\n              textAlign: 'center', // Horizontal centering\n            }}\n          >\n            <img\n              title={tooltip}\n              alt={tooltip}\n              src={src}\n              crossOrigin=\"anonymous\"\n              style={{\n                maxWidth: iconSize,\n                maxHeight: iconSize,\n                verticalAlign: 'middle', // Vertical centering\n                filter: !isGDevelopIcon\n                  ? undefined\n                  : disabled\n                  ? 'grayscale(100%)'\n                  : muiTheme.gdevelopIconsCSSFilter,\n              }}\n            />\n          </div>\n        )}\n      </ThemeConsumer>\n    );\n  }\n}\n","import React from 'react';\nimport CircularProgress from '@material-ui/core/CircularProgress';\n\nconst styles = {\n  containerStyle: {\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n    flex: 1,\n    padding: 10,\n  },\n};\n\nexport default props => (\n  <div style={{ ...styles.containerStyle, ...props.style }}>\n    <CircularProgress size={40} />\n  </div>\n);\n","// @flow\nimport * as React from 'react';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport Checkbox from '@material-ui/core/Checkbox';\n\n// We support a subset of the props supported by Material-UI v0.x Checkbox\n// They should be self descriptive - refer to Material UI docs otherwise.\ntype Props = {|\n  label?: ?React.Node,\n  checked: boolean,\n  onCheck?: (e: {||}, checked: boolean) => void,\n  checkedIcon?: React.Node,\n  uncheckedIcon?: React.Node,\n  disabled?: boolean,\n\n  style?: {|\n    display?: 'inline-block',\n    marginRight?: number,\n  |},\n|};\n\n/**\n * A text field based on Material-UI text field.\n */\nexport default (props: Props) => {\n  const { onCheck } = props;\n  const checkbox = (\n    <Checkbox\n      disabled={props.disabled}\n      checked={props.checked}\n      onChange={\n        onCheck ? event => onCheck(event, event.target.checked) : undefined\n      }\n      icon={props.uncheckedIcon}\n      checkedIcon={props.checkedIcon}\n      color=\"primary\"\n      style={props.label ? undefined : props.style}\n    />\n  );\n  return props.label ? (\n    <FormControlLabel\n      control={checkbox}\n      label={props.label}\n      style={props.style}\n    />\n  ) : (\n    checkbox\n  );\n};\n","// @flow\nimport { Trans } from '@lingui/macro';\n\nimport * as React from 'react';\nimport FlatButton from '../UI/FlatButton';\nimport RaisedButton from '../UI/RaisedButton';\nimport Dialog from '../UI/Dialog';\nimport { Line } from '../UI/Grid';\nimport ResourcesLoader from '../ResourcesLoader';\nimport ResourceSelectorWithThumbnail from '../ResourcesList/ResourceSelectorWithThumbnail';\nimport {\n  type ResourceSource,\n  type ChooseResourceFunction,\n} from '../ResourcesList/ResourceSource.flow';\nimport { type ResourceExternalEditor } from '../ResourcesList/ResourceExternalEditor.flow';\nimport { resizeImage, isResizeSupported } from './ImageResizer';\nimport { showErrorBox } from '../UI/Messages/MessageBox';\nimport optionalRequire from '../Utils/OptionalRequire';\nimport Text from '../UI/Text';\nconst path = optionalRequire('path');\nconst gd = global.gd;\n\ntype Props = {|\n  project: gdProject,\n  open: boolean,\n  onClose: Function,\n  onApply: Function,\n  resourceSources: Array<ResourceSource>,\n  onChooseResource: ChooseResourceFunction,\n  resourceExternalEditors: Array<ResourceExternalEditor>,\n|};\n\ntype State = {|\n  desktopIconResourceNames: Array<string>,\n  androidIconResourceNames: Array<string>,\n  iosIconResourceNames: Array<string>,\n|};\n\nconst desktopSizes = [512];\nconst androidSizes = [192, 144, 96, 72, 48, 36];\nconst iosSizes = [\n  180,\n  167,\n  152,\n  144,\n  120,\n  114,\n  100,\n  80,\n  76,\n  72,\n  60,\n  58,\n  57,\n  50,\n  40,\n  29,\n];\n\nexport default class PlatformSpecificAssetsDialog extends React.Component<\n  Props,\n  State\n> {\n  constructor(props: Props) {\n    super(props);\n    this.state = this._loadFrom(props.project);\n  }\n\n  _loadFrom(project: gdProject): State {\n    return {\n      desktopIconResourceNames: desktopSizes.map(size =>\n        project.getPlatformSpecificAssets().get('desktop', `icon-${size}`)\n      ),\n      androidIconResourceNames: androidSizes.map(size =>\n        project.getPlatformSpecificAssets().get('android', `icon-${size}`)\n      ),\n      iosIconResourceNames: iosSizes.map(size =>\n        project.getPlatformSpecificAssets().get('ios', `icon-${size}`)\n      ),\n    };\n  }\n\n  componentWillReceiveProps(newProps: Props) {\n    if (\n      (!this.props.open && newProps.open) ||\n      (newProps.open && this.props.project !== newProps.project)\n    ) {\n      this.setState(this._loadFrom(newProps.project));\n    }\n  }\n\n  _generateFromFile = () => {\n    const { project, resourceSources, onChooseResource } = this.props;\n\n    const sources = resourceSources.filter(source => source.kind === 'image');\n    if (!sources.length) return;\n\n    onChooseResource(sources[0].name, false).then(resources => {\n      if (!resources.length || !path) {\n        return;\n      }\n\n      const resourcesManager = project.getResourcesManager();\n      const projectPath = path.dirname(project.getProjectFile());\n      const fullPath = path.resolve(projectPath, resources[0].getFile());\n\n      // Important, we are responsible for deleting the resources that were given to us.\n      // Otherwise we have a memory leak.\n      resources.forEach(resource => resource.delete());\n\n      Promise.all([\n        ...desktopSizes.map(size =>\n          resizeImage(\n            fullPath,\n            path.join(projectPath, `desktop-icon-${size}.png`),\n            {\n              width: size,\n              height: size,\n            }\n          )\n        ),\n        ...androidSizes.map(size =>\n          resizeImage(\n            fullPath,\n            path.join(projectPath, `android-icon-${size}.png`),\n            {\n              width: size,\n              height: size,\n            }\n          )\n        ),\n        ...iosSizes.map(size =>\n          resizeImage(\n            fullPath,\n            path.join(projectPath, `ios-icon-${size}.png`),\n            {\n              width: size,\n              height: size,\n            }\n          )\n        ),\n      ]).then(results => {\n        if (results.indexOf(false) !== -1) {\n          showErrorBox('Some icons could not be generated!');\n          return;\n        }\n\n        // Add resources to the game\n        const allResourcesNames = [\n          ...desktopSizes.map(size => `desktop-icon-${size}.png`),\n          ...androidSizes.map(size => `android-icon-${size}.png`),\n          ...iosSizes.map(size => `ios-icon-${size}.png`),\n        ];\n        allResourcesNames.forEach(resourceName => {\n          if (!resourcesManager.hasResource(resourceName)) {\n            const imageResource = new gd.ImageResource();\n            imageResource.setFile(resourceName);\n            imageResource.setName(resourceName);\n\n            resourcesManager.addResource(imageResource);\n\n            // Important, we are responsible for deleting the resources that we created\n            // Otherwise we have a memory leak, as calling addResource is making a copy of the resource.\n            imageResource.delete();\n          } else {\n            resourcesManager.getResource(resourceName).setFile(resourceName);\n          }\n        });\n\n        // Make sure the resources are (re)loaded.\n        ResourcesLoader.burstUrlsCacheForResources(project, allResourcesNames);\n        setTimeout(() => {\n          this.setState({\n            desktopIconResourceNames: desktopSizes.map(\n              size => `desktop-icon-${size}.png`\n            ),\n            androidIconResourceNames: androidSizes.map(\n              size => `android-icon-${size}.png`\n            ),\n            iosIconResourceNames: iosSizes.map(size => `ios-icon-${size}.png`),\n          });\n        }, 200 /* Let a bit of time so that image files can be found */);\n      });\n    });\n  };\n\n  _onApply = () => {\n    const { project } = this.props;\n    const {\n      desktopIconResourceNames,\n      androidIconResourceNames,\n      iosIconResourceNames,\n    } = this.state;\n\n    desktopSizes.forEach((size, index) => {\n      project\n        .getPlatformSpecificAssets()\n        .set('desktop', `icon-${size}`, desktopIconResourceNames[index]);\n    });\n    androidSizes.forEach((size, index) => {\n      project\n        .getPlatformSpecificAssets()\n        .set('android', `icon-${size}`, androidIconResourceNames[index]);\n    });\n    iosSizes.forEach((size, index) => {\n      project\n        .getPlatformSpecificAssets()\n        .set('ios', `icon-${size}`, iosIconResourceNames[index]);\n    });\n\n    this.props.onApply();\n  };\n\n  render() {\n    const actions = [\n      <FlatButton\n        key=\"cancel\"\n        label={<Trans>Cancel</Trans>}\n        primary={false}\n        onClick={this.props.onClose}\n      />,\n      <FlatButton\n        key=\"apply\"\n        label={<Trans>Apply</Trans>}\n        primary={true}\n        keyboardFocused={true}\n        onClick={this._onApply}\n      />,\n    ];\n    const {\n      project,\n      resourceSources,\n      onChooseResource,\n      resourceExternalEditors,\n    } = this.props;\n    const {\n      desktopIconResourceNames,\n      androidIconResourceNames,\n      iosIconResourceNames,\n    } = this.state;\n\n    return (\n      <Dialog\n        title={<Trans>Project icons</Trans>}\n        actions={actions}\n        open={this.props.open}\n        cannotBeDismissed={true}\n        onRequestClose={this.props.onClose}\n      >\n        <Line justifyContent=\"center\">\n          {isResizeSupported() ? (\n            <RaisedButton\n              primary\n              label={<Trans>Generate icons from a file</Trans>}\n              onClick={this._generateFromFile}\n            />\n          ) : (\n            <Text>\n              <Trans>\n                Download GDevelop desktop version to generate the Android and\n                iOS icons of your game.\n              </Trans>\n            </Text>\n          )}\n        </Line>\n        <Text>\n          <Trans>Desktop (Windows, macOS and Linux) icon:</Trans>\n        </Text>\n        {desktopSizes.map((size, index) => (\n          <ResourceSelectorWithThumbnail\n            key={size}\n            floatingLabelText={`Desktop icon (${size}x${size} px)`}\n            project={project}\n            resourceSources={resourceSources}\n            onChooseResource={onChooseResource}\n            resourceExternalEditors={resourceExternalEditors}\n            resourceKind=\"image\"\n            resourceName={desktopIconResourceNames[index]}\n            onChange={resourceName => {\n              const newIcons = [...desktopIconResourceNames];\n              newIcons[index] = resourceName;\n              this.setState({\n                desktopIconResourceNames: newIcons,\n              });\n            }}\n          />\n        ))}\n        <Text>\n          <Trans>Android icons:</Trans>\n        </Text>\n        {androidSizes.map((size, index) => (\n          <ResourceSelectorWithThumbnail\n            key={size}\n            floatingLabelText={`Android icon (${size}x${size} px)`}\n            project={project}\n            resourceSources={resourceSources}\n            onChooseResource={onChooseResource}\n            resourceExternalEditors={resourceExternalEditors}\n            resourceKind=\"image\"\n            resourceName={androidIconResourceNames[index]}\n            onChange={resourceName => {\n              const newIcons = [...androidIconResourceNames];\n              newIcons[index] = resourceName;\n              this.setState({\n                androidIconResourceNames: newIcons,\n              });\n            }}\n          />\n        ))}\n        <Text>\n          <Trans>iOS (iPhone and iPad) icons:</Trans>\n        </Text>\n        {iosSizes.map((size, index) => (\n          <ResourceSelectorWithThumbnail\n            key={size}\n            floatingLabelText={`iOS icon (${size}x${size} px)`}\n            project={project}\n            resourceSources={resourceSources}\n            onChooseResource={onChooseResource}\n            resourceKind=\"image\"\n            resourceName={iosIconResourceNames[index]}\n            resourceExternalEditors={resourceExternalEditors}\n            onChange={resourceName => {\n              const newIcons = [...iosIconResourceNames];\n              newIcons[index] = resourceName;\n              this.setState({\n                iosIconResourceNames: newIcons,\n              });\n            }}\n          />\n        ))}\n      </Dialog>\n    );\n  }\n}\n","//@flow\nimport optionalRequire from '../Utils/OptionalRequire';\nconst Jimp = optionalRequire('jimp');\n\nexport const isResizeSupported = () => !!Jimp;\n\nexport const resizeImage = (\n  inputFile: string,\n  outputFile: string,\n  { width, height }: { width: number, height: number }\n): Promise<any> => {\n  if (!Jimp) return Promise.resolve(false);\n\n  return Jimp.read(inputFile)\n    .then(function(jimpImage) {\n      return jimpImage.contain(width, height).write(outputFile);\n    })\n    .then(() => {\n      return true;\n    })\n    .catch(function(err) {\n      console.error(err);\n      return false;\n    });\n};\n","import React from 'react';\nimport CircularProgress from '@material-ui/core/CircularProgress';\n\nconst loaderSize = 50;\n\nexport default props => {\n  return (\n    <div\n      style={{\n        position: 'fixed',\n        top: 0,\n        left: 0,\n        right: 0,\n        bottom: 0,\n        backgroundColor: 'rgba(0,0,0,0.5)',\n        zIndex: 2000, // 2000 is higher than any Material-UI modal\n        pointerEvents: props.show ? 'cursor' : 'none',\n        display: props.show ? 'block' : 'none',\n      }}\n    >\n      <div\n        style={{\n          position: 'absolute',\n          top: '50%',\n          left: '50%',\n          marginTop: -loaderSize / 2,\n          marginLeft: -loaderSize / 2,\n          width: loaderSize,\n          height: loaderSize,\n        }}\n      >\n        {props.show /* Don't render CircularProgress to avoid it to use a timeout that would wake regularly the CPU  */ && (\n          <CircularProgress size={loaderSize} disableShrink />\n        )}\n      </div>\n    </div>\n  );\n};\n","// @flow\nimport { t } from '@lingui/macro';\nimport { type I18n as I18nType } from '@lingui/core';\nimport * as React from 'react';\nimport optionalRequire from '../Utils/OptionalRequire';\nimport Window from '../Utils/Window';\nconst electron = optionalRequire('electron');\n\ntype Props = {|\n  shouldPrompt: boolean,\n  i18n: I18nType,\n  language: string, // Should be i18n.language.\n  hasUnsavedChanges: boolean,\n|};\n\nexport default React.memo<Props>(function CloseConfirmDialog({\n  shouldPrompt,\n  i18n,\n  language,\n  hasUnsavedChanges,\n}: Props) {\n  const delayElectronClose = React.useRef(true);\n\n  React.useEffect(\n    () => {\n      if (Window.isDev()) return; // Don't prevent live-reload in development\n\n      const quitMessage = i18n._(t`Are you sure you want to quit GDevelop?`);\n      const unsavedChangesMessage = hasUnsavedChanges\n        ? i18n._(t`Any unsaved changes in the project will be lost.`)\n        : '';\n      const message = [quitMessage, unsavedChangesMessage]\n        .filter(Boolean)\n        .join('\\n');\n\n      if (electron) {\n        window.onbeforeunload = e => {\n          if (delayElectronClose.current && shouldPrompt) {\n            // Use setTimeout to avoiding blocking the thread with the \"confirm\" dialog,\n            // which would make Electron to close the window for some weird reason.\n            // See https://github.com/electron/electron/issues/7977\n            setTimeout(() => {\n              const answer = Window.showConfirmDialog(message);\n              if (answer) {\n                // If answer is positive, re-trigger the close\n                delayElectronClose.current = false;\n                electron.remote.getCurrentWindow().close();\n              }\n            }, 10);\n\n            // Prevents closing the window immediately. See https://github.com/electron/electron/blob/master/docs/api/browser-window.md#event-close\n            e.returnValue = true; //\"It is recommended to always set the event.returnValue explicitly, instead of only returning a value, as the former works more consistently within Electron.\"\"\n            return false; //\"In Electron, returning any value other than undefined would cancel the close\"\n          } else {\n            // Returning undefined will let the window close\n          }\n        };\n      } else if (window) {\n        if (shouldPrompt) {\n          window.onbeforeunload = () => message;\n        } else {\n          window.onbeforeunload = null;\n        }\n      }\n    },\n    [shouldPrompt, i18n, language, hasUnsavedChanges]\n  );\n\n  return null;\n});\n","// @flow\nimport React, { Component, useEffect, type Node, useRef } from 'react';\nimport Close from '@material-ui/icons/Close';\nimport ButtonBase from '@material-ui/core/ButtonBase';\nimport ThemeConsumer from './Theme/ThemeConsumer';\nimport ContextMenu from './Menu/ContextMenu';\n\nconst styles = {\n  tabsContainerStyle: {\n    maxWidth: '100%',\n    flex: 1,\n    display: 'flex',\n    flexDirection: 'column',\n  },\n  tabContentContainer: {\n    width: '100%',\n    position: 'relative',\n    textAlign: 'initial',\n    height: '100%',\n    display: 'flex',\n    flex: 1,\n  },\n  tabLabel: {\n    maxWidth: 400,\n    overflow: 'hidden',\n    textOverflow: 'ellipsis',\n    whiteSpace: 'nowrap',\n    marginTop: 6,\n    marginBottom: 6,\n    marginLeft: 10,\n    marginRight: 10,\n    fontSize: '15px', // Same as in Mosaic.css (for mosaic-window-title)\n  },\n  closeButton: {\n    marginTop: 7,\n    marginBottom: 7,\n    marginRight: 5,\n    marginLeft: 5,\n  },\n};\n\ntype TabContentContainerProps = {|\n  active: boolean,\n  children: Node,\n|};\n\n/**\n * Contains the content of a tab. Two important things:\n *\n * 1) Instead of setting the \"height\" of hidden tabs to \"0\", we set \"display\" to \"none\" to avoid\n * messing with components (in particular components where you can scroll: when collapsed because of height=0,\n * they will lose they scrolling position).\n *\n * 2) shouldComponentUpdate is used to avoid updating the content of a tab that is not selected.\n */\nexport class TabContentContainer extends Component<TabContentContainerProps> {\n  shouldComponentUpdate(nextProps: TabContentContainerProps) {\n    return this.props.active || nextProps.active;\n  }\n\n  render() {\n    const { children, active } = this.props;\n    return (\n      <div\n        style={{\n          ...styles.tabContentContainer,\n          ...(active ? undefined : { display: 'none' }),\n        }}\n      >\n        {children}\n      </div>\n    );\n  }\n}\n\ntype ClosableTabsProps = {|\n  hideLabels?: boolean,\n  children: Node,\n|};\n\nexport class ClosableTabs extends Component<ClosableTabsProps> {\n  render() {\n    const { hideLabels, children } = this.props;\n\n    return (\n      <ThemeConsumer>\n        {muiTheme => {\n          const tabItemContainerStyle = {\n            maxWidth: '100%', // Tabs should take all width\n            flexShrink: 0, // Tabs height should never be reduced\n            display: hideLabels ? 'none' : 'flex',\n            flexWrap: 'nowrap', // Single line of tab...\n            overflowX: 'auto', // ...scroll horizontally if needed\n            backgroundColor: muiTheme.closableTabs.backgroundColor,\n          };\n\n          return <div style={tabItemContainerStyle}>{children}</div>;\n        }}\n      </ThemeConsumer>\n    );\n  }\n}\n\ntype ClosableTabProps = {|\n  active: boolean,\n  label: Node,\n  closable: boolean,\n  onClose: () => void,\n  onCloseOthers: () => void,\n  onCloseAll: () => void,\n  onClick: () => void,\n  onActivated: () => void,\n|};\n\nexport function ClosableTab({\n  active,\n  onClose,\n  onCloseOthers,\n  onCloseAll,\n  label,\n  closable,\n  onClick,\n  onActivated,\n}: ClosableTabProps) {\n  useEffect(\n    () => {\n      if (active) {\n        onActivated();\n      }\n    },\n    [active, onActivated]\n  );\n  const contextMenu = useRef<ContextMenu>(null);\n\n  const openContextMenu = event => {\n    event.stopPropagation();\n    if (contextMenu.current) {\n      contextMenu.current.open(event.clientX, event.clientY);\n    }\n  };\n\n  return (\n    <ThemeConsumer>\n      {muiTheme => {\n        const textColor = !active\n          ? muiTheme.closableTabs.textColor\n          : muiTheme.closableTabs.selectedTextColor;\n\n        return (\n          <React.Fragment>\n            <span\n              style={{\n                flexShrink: 0, // Tabs are never resized to fit in flex container\n                position: 'relative',\n                display: 'inline-block',\n                backgroundColor: !active\n                  ? muiTheme.closableTabs.backgroundColor\n                  : muiTheme.closableTabs.selectedBackgroundColor,\n              }}\n            >\n              <ButtonBase\n                onClick={onClick}\n                onContextMenu={openContextMenu}\n                focusRipple\n              >\n                <span\n                  style={{\n                    ...styles.tabLabel,\n                    color: textColor,\n                    fontFamily: muiTheme.closableTabs.fontFamily,\n                  }}\n                >\n                  {label}\n                </span>\n              </ButtonBase>\n              {closable && (\n                <ButtonBase\n                  onClick={onClose}\n                  onContextMenu={openContextMenu}\n                  focusRipple\n                >\n                  <Close\n                    style={{\n                      ...styles.closeButton,\n                      width: muiTheme.closableTabs.height / 2,\n                      height: muiTheme.closableTabs.height / 2,\n                    }}\n                    htmlColor={textColor}\n                  />\n                </ButtonBase>\n              )}\n            </span>\n            <ContextMenu\n              ref={contextMenu}\n              buildMenuTemplate={() => [\n                {\n                  label: 'Close',\n                  click: onClose,\n                  enabled: closable,\n                },\n                {\n                  label: 'Close others',\n                  click: onCloseOthers,\n                },\n                {\n                  label: 'Close all',\n                  click: onCloseAll,\n                },\n              ]}\n            />\n          </React.Fragment>\n        );\n      }}\n    </ThemeConsumer>\n  );\n}\n","// @flow\nimport findIndex from 'lodash/findIndex';\nimport EventsEditor from './Editors/EventsEditor';\nimport DebuggerEditor from './Editors/DebuggerEditor';\nimport EventsFunctionsExtensionEditorWrapper from './Editors/EventsFunctionsExtensionEditor';\nimport ExternalEventsEditor from './Editors/ExternalEventsEditor';\nimport ExternalLayoutEditor from './Editors/ExternalLayoutEditor';\nimport ResourcesEditor from './Editors/ResourcesEditor';\nimport SceneEditor from './Editors/SceneEditor';\n\n// Supported editors\ntype EditorRef =\n  | DebuggerEditor\n  | EventsEditor\n  | EventsFunctionsExtensionEditorWrapper\n  | ExternalEventsEditor\n  | ExternalLayoutEditor\n  | ResourcesEditor\n  | SceneEditor;\n\nexport type EditorTab = {|\n  render: (isCurrentTab: boolean) => React$Element<*>,\n  editorRef: ?EditorRef,\n  label: string,\n  key: string,\n  closable: boolean,\n|};\n\nexport type EditorTabsState = {\n  editors: Array<EditorTab>,\n  currentTab: number,\n};\n\nexport const getEditorTabsInitialState = (): EditorTabsState => {\n  return {\n    editors: [],\n    currentTab: 0,\n  };\n};\n\ntype renderEditorProps = {|\n  isActive: boolean,\n  editorRef: Function,\n|};\n\nexport const openEditorTab = (\n  state: EditorTabsState,\n  {\n    label,\n    renderEditor,\n    key,\n    dontFocusTab,\n    closable,\n  }: {\n    label: string,\n    renderEditor: (props: renderEditorProps) => React$Element<*>,\n    key: string,\n    dontFocusTab?: boolean,\n    closable?: boolean,\n  }\n): EditorTabsState => {\n  const existingEditorId = findIndex(\n    state.editors,\n    editor => editor.key === key\n  );\n  if (existingEditorId !== -1) {\n    return {\n      ...state,\n      currentTab: dontFocusTab ? state.currentTab : existingEditorId,\n    };\n  }\n\n  const editorTab: EditorTab = {\n    render: (isCurrentTab: boolean) =>\n      renderEditor({\n        isActive: isCurrentTab,\n        editorRef: editorRef => (editorTab.editorRef = editorRef),\n      }),\n    editorRef: null,\n    label,\n    key,\n    closable: typeof closable === 'undefined' ? true : !!closable,\n  };\n\n  return {\n    ...state,\n    editors: [...state.editors, editorTab],\n    currentTab: dontFocusTab ? state.currentTab : state.editors.length,\n  };\n};\n\nexport const changeCurrentTab = (\n  state: EditorTabsState,\n  newTabId: number\n): EditorTabsState => {\n  return {\n    ...state,\n    currentTab: Math.max(0, Math.min(newTabId, state.editors.length - 1)),\n  };\n};\n\nexport const closeAllEditorTabs = (state: EditorTabsState): EditorTabsState => {\n  return changeCurrentTab(\n    {\n      ...state,\n      editors: state.editors.filter(editorTab => !editorTab.closable),\n    },\n    0\n  );\n};\n\nexport const closeEditorTab = (\n  state: EditorTabsState,\n  chosenEditorTab: EditorTab\n): EditorTabsState => {\n  const chosenEditorTabId = state.editors.indexOf(chosenEditorTab);\n  return changeCurrentTab(\n    {\n      ...state,\n      editors: state.editors.filter(editorTab => editorTab !== chosenEditorTab),\n    },\n    chosenEditorTabId >= state.currentTab\n      ? state.currentTab\n      : state.currentTab - 1\n  );\n};\n\nexport const closeOtherEditorTabs = (\n  state: EditorTabsState,\n  chosenEditorTab: EditorTab\n): EditorTabsState => {\n  return changeCurrentTab(\n    {\n      ...state,\n      editors: state.editors.filter(\n        editorTab => !editorTab.closable || editorTab === chosenEditorTab\n      ),\n    },\n    state.currentTab\n  );\n};\n\nexport const getEditors = (state: EditorTabsState): Array<EditorTab> => {\n  return state.editors;\n};\n\nexport const getCurrentTabIndex = (state: EditorTabsState): number => {\n  return state.currentTab;\n};\n\nexport const getCurrentTab = (state: EditorTabsState): EditorTab => {\n  return state.editors[state.currentTab];\n};\n\nexport const closeProjectTabs = (\n  state: EditorTabsState,\n  project: ?gdProject\n) => {\n  return changeCurrentTab(\n    {\n      ...state,\n      editors: state.editors.filter(editorTab => {\n        const editorProject =\n          editorTab.editorRef && editorTab.editorRef.getProject();\n        return !editorProject || editorProject !== project;\n      }),\n    },\n    state.currentTab\n  );\n};\n\n/*\n * Ask the editors to persist their UI settings\n * to the project.\n */\nexport const saveUiSettings = (state: EditorTabsState) => {\n  state.editors.forEach(editorTab => {\n    if (editorTab.editorRef && editorTab.editorRef.saveUiSettings) {\n      editorTab.editorRef.saveUiSettings();\n    }\n  });\n};\n\nexport const closeLayoutTabs = (state: EditorTabsState, layout: gdLayout) => {\n  return changeCurrentTab(\n    {\n      ...state,\n      editors: state.editors.filter(editorTab => {\n        const editorLayout =\n          editorTab.editorRef && editorTab.editorRef.getLayout();\n        return !editorLayout || editorLayout !== layout;\n      }),\n    },\n    state.currentTab\n  );\n};\n\nexport const closeExternalLayoutTabs = (\n  state: EditorTabsState,\n  externalLayout: gdExternalLayout\n) => {\n  return changeCurrentTab(\n    {\n      ...state,\n      editors: state.editors.filter(editorTab => {\n        const editor = editorTab.editorRef;\n\n        if (editor instanceof ExternalLayoutEditor) {\n          return (\n            !editor.getExternalLayout() ||\n            editor.getExternalLayout() !== externalLayout\n          );\n        }\n\n        return true;\n      }),\n    },\n    state.currentTab\n  );\n};\n\nexport const closeExternalEventsTabs = (\n  state: EditorTabsState,\n  externalEvents: gdExternalEvents\n) => {\n  return changeCurrentTab(\n    {\n      ...state,\n      editors: state.editors.filter(editorTab => {\n        const editor = editorTab.editorRef;\n        if (editor instanceof ExternalEventsEditor) {\n          return (\n            !editor.getExternalEvents() ||\n            editor.getExternalEvents() !== externalEvents\n          );\n        }\n\n        return true;\n      }),\n    },\n    state.currentTab\n  );\n};\n\nexport const closeEventsFunctionsExtensionTabs = (\n  state: EditorTabsState,\n  eventsFunctionsExtension: gdEventsFunctionsExtension\n) => {\n  return changeCurrentTab(\n    {\n      ...state,\n      editors: state.editors.filter(editorTab => {\n        const editor = editorTab.editorRef;\n        if (editor instanceof EventsFunctionsExtensionEditorWrapper) {\n          return (\n            !editor.getEventsFunctionsExtension() ||\n            editor.getEventsFunctionsExtension() !== eventsFunctionsExtension\n          );\n        }\n\n        return true;\n      }),\n    },\n    state.currentTab\n  );\n};\n\nexport const getEventsFunctionsExtensionEditor = (\n  state: EditorTabsState,\n  eventsFunctionsExtension: gdEventsFunctionsExtension\n): ?{| editor: EventsFunctionsExtensionEditorWrapper, tabIndex: number |} => {\n  for (let tabIndex = 0; tabIndex < state.editors.length; ++tabIndex) {\n    const editor = state.editors[tabIndex].editorRef;\n    if (\n      editor instanceof EventsFunctionsExtensionEditorWrapper &&\n      editor.getEventsFunctionsExtension() === eventsFunctionsExtension\n    ) {\n      return { editor, tabIndex };\n    }\n  }\n\n  return null;\n};\n","// @flow\nimport React, { Component, type Node } from 'react';\nimport findIndex from 'lodash/findIndex';\nimport {\n  SortableTreeWithoutDndContext,\n  getNodeAtPath,\n} from 'react-sortable-tree';\nimport { mapFor } from '../../Utils/MapFor';\nimport { getInitialSelection, isEventSelected } from '../SelectionHandler';\nimport EventsRenderingService from './EventsRenderingService';\nimport EventHeightsCache from './EventHeightsCache';\nimport classNames from 'classnames';\nimport { eventsTree, eventsTreeWithSearchResults, icon } from './ClassNames';\nimport {\n  type SelectionState,\n  type EventContext,\n  type InstructionsListContext,\n  type InstructionContext,\n  type ParameterContext,\n} from '../SelectionHandler';\nimport { type EventsScope } from '../../InstructionOrExpression/EventsScope.flow';\nimport getObjectByName from '../../Utils/GetObjectByName';\nimport ObjectsRenderingService from '../../ObjectsRendering/ObjectsRenderingService';\nimport { type ScreenType } from '../../UI/Reponsive/ScreenTypeMeasurer';\nimport { type WidthType } from '../../UI/Reponsive/ResponsiveWindowMeasurer';\n\n// Import default style of react-sortable-tree and the override made for EventsSheet.\nimport 'react-sortable-tree/style.css';\nimport './style.css';\nimport ThemeConsumer from '../../UI/Theme/ThemeConsumer';\n\nconst getThumbnail = ObjectsRenderingService.getThumbnail.bind(\n  ObjectsRenderingService\n);\n\nconst gd = global.gd;\n\nconst indentWidth = 22;\n\nconst styles = {\n  container: { flex: 1 },\n};\n\ntype EventsContainerProps = {|\n  eventsHeightsCache: EventHeightsCache,\n  event: gdBaseEvent,\n  leftIndentWidth: number,\n  disabled: boolean,\n  project: gdProject,\n  scope: EventsScope,\n  globalObjectsContainer: gdObjectsContainer,\n  objectsContainer: gdObjectsContainer,\n  selection: SelectionState,\n  onAddNewInstruction: InstructionsListContext => void,\n  onPasteInstructions: InstructionsListContext => void,\n  onMoveToInstruction: (destinationContext: InstructionContext) => void,\n  onMoveToInstructionsList: (\n    destinationContext: InstructionsListContext\n  ) => void,\n  onInstructionClick: InstructionContext => void,\n  onInstructionDoubleClick: InstructionContext => void,\n  onInstructionContextMenu: (x: number, y: number, InstructionContext) => void,\n  onAddInstructionContextMenu: (\n    HTMLButtonElement,\n    InstructionsListContext\n  ) => void,\n  onParameterClick: ParameterContext => void,\n\n  onEventClick: (eventContext: EventContext) => void,\n  onEventContextMenu: (x: number, y: number) => void,\n  onOpenExternalEvents: string => void,\n  onOpenLayout: string => void,\n  renderObjectThumbnail: string => Node,\n\n  screenType: ScreenType,\n  windowWidth: WidthType,\n|};\n\n/**\n * The component containing an event.\n * It will report the rendered event height so that the EventsTree can\n * update accordingly.\n */\nclass EventContainer extends Component<EventsContainerProps, {||}> {\n  _container: ?any;\n  componentDidMount() {\n    const height = this._container ? this._container.offsetHeight : 0;\n    this.props.eventsHeightsCache.setEventHeight(this.props.event, height);\n  }\n\n  componentDidUpdate() {\n    const height = this._container ? this._container.offsetHeight : 0;\n    this.props.eventsHeightsCache.setEventHeight(this.props.event, height);\n  }\n\n  _onEventUpdated = () => {\n    this.forceUpdate();\n  };\n\n  _onEventContextMenu = (domEvent: any) => {\n    domEvent.preventDefault();\n    this.props.onEventContextMenu(domEvent.clientX, domEvent.clientY);\n  };\n\n  render() {\n    const { event, project, scope, disabled } = this.props;\n    const EventComponent = EventsRenderingService.getEventComponent(event);\n\n    return (\n      <div\n        ref={container => (this._container = container)}\n        onClick={this.props.onEventClick}\n        onContextMenu={this._onEventContextMenu}\n      >\n        {EventComponent && (\n          <EventComponent\n            project={project}\n            scope={scope}\n            event={event}\n            globalObjectsContainer={this.props.globalObjectsContainer}\n            objectsContainer={this.props.objectsContainer}\n            selected={isEventSelected(this.props.selection, event)}\n            selection={this.props.selection}\n            leftIndentWidth={this.props.leftIndentWidth}\n            onUpdate={this._onEventUpdated}\n            onAddNewInstruction={this.props.onAddNewInstruction}\n            onPasteInstructions={this.props.onPasteInstructions}\n            onMoveToInstruction={this.props.onMoveToInstruction}\n            onMoveToInstructionsList={this.props.onMoveToInstructionsList}\n            onInstructionClick={this.props.onInstructionClick}\n            onInstructionDoubleClick={this.props.onInstructionDoubleClick}\n            onInstructionContextMenu={this.props.onInstructionContextMenu}\n            onAddInstructionContextMenu={this.props.onAddInstructionContextMenu}\n            onParameterClick={this.props.onParameterClick}\n            onOpenExternalEvents={this.props.onOpenExternalEvents}\n            onOpenLayout={this.props.onOpenLayout}\n            disabled={\n              disabled /* Use disabled (not event.disabled) as it is true if a parent event is disabled*/\n            }\n            renderObjectThumbnail={this.props.renderObjectThumbnail}\n            screenType={this.props.screenType}\n            windowWidth={this.props.windowWidth}\n          />\n        )}\n      </div>\n    );\n  }\n}\n\nconst getNodeKey = ({ treeIndex }) => treeIndex;\n\nconst SortableTree = ({ className, ...otherProps }) => (\n  <ThemeConsumer>\n    {muiTheme => (\n      <SortableTreeWithoutDndContext\n        className={`${eventsTree} ${\n          muiTheme.eventsSheetRootClassName\n        } ${className}`}\n        {...otherProps}\n      />\n    )}\n  </ThemeConsumer>\n);\n\nconst noop = () => {};\n\ntype EventsTreeProps = {|\n  events: gdEventsList,\n  project: gdProject,\n  scope: EventsScope,\n  globalObjectsContainer: gdObjectsContainer,\n  objectsContainer: gdObjectsContainer,\n  selection: SelectionState,\n  onAddNewInstruction: InstructionsListContext => void,\n  onPasteInstructions: InstructionsListContext => void,\n  onMoveToInstruction: (destinationContext: InstructionContext) => void,\n  onMoveToInstructionsList: (\n    destinationContext: InstructionsListContext\n  ) => void,\n  onInstructionClick: InstructionContext => void,\n  onInstructionDoubleClick: InstructionContext => void,\n  onInstructionContextMenu: (x: number, y: number, InstructionContext) => void,\n  onAddInstructionContextMenu: (\n    HTMLButtonElement,\n    InstructionsListContext\n  ) => void,\n  onParameterClick: ParameterContext => void,\n\n  onEventClick: (eventContext: EventContext) => void,\n  onEventContextMenu: (\n    x: number,\n    y: number,\n    eventContext: EventContext\n  ) => void,\n  onAddNewEvent: (eventContext: EventContext) => void,\n  onOpenExternalEvents: string => void,\n  onOpenLayout: string => void,\n  showObjectThumbnails: boolean,\n\n  searchResults: ?Array<gdBaseEvent>,\n  searchFocusOffset: ?number,\n\n  onEventMoved: () => void,\n  onScroll?: () => void,\n\n  screenType: ScreenType,\n  windowWidth: WidthType,\n|};\n\ntype SortableTreeNode = {\n  eventsList: gdEventsList,\n  event: gdBaseEvent,\n  depth: number,\n  disabled: boolean,\n  isCondition: boolean,\n  indexInList: number,\n};\n\n/**\n * Display a tree of event. Builtin on react-sortable-tree so that event\n * can be drag'n'dropped and events rows are virtualized.\n */\nexport default class ThemableEventsTree extends Component<EventsTreeProps, *> {\n  static defaultProps = {\n    selection: getInitialSelection(),\n  };\n  _list: ?any;\n  eventsHeightsCache: EventHeightsCache;\n\n  constructor(props: EventsTreeProps) {\n    super(props);\n\n    this.eventsHeightsCache = new EventHeightsCache(this);\n    this.state = {\n      ...this._eventsToTreeData(props.events),\n    };\n  }\n\n  componentDidMount() {\n    this.onHeightsChanged();\n  }\n\n  /**\n   * Should be called whenever an event height has changed\n   */\n  onHeightsChanged(cb: ?() => void) {\n    this.forceUpdate(() => {\n      if (this._list && this._list.wrappedInstance.current) {\n        this._list.wrappedInstance.current.recomputeRowHeights();\n      }\n      if (cb) cb();\n    });\n  }\n\n  /**\n   * Should be called whenever events changed (new event...)\n   * from outside this component.\n   */\n  forceEventsUpdate(cb: ?() => void) {\n    this.setState(this._eventsToTreeData(this.props.events), () => {\n      if (this._list && this._list.wrappedInstance.current) {\n        this._list.wrappedInstance.current.recomputeRowHeights();\n      }\n      if (cb) cb();\n    });\n  }\n\n  scrollToEvent(event: gdBaseEvent) {\n    const row = this._getEventRow(event);\n    if (row !== -1) {\n      if (this._list && this._list.wrappedInstance.current) {\n        this._list.wrappedInstance.current.scrollToRow(row);\n      }\n    }\n  }\n\n  /**\n   * Unfold events so that the given one is visible\n   */\n  unfoldForEvent(event: gdBaseEvent) {\n    gd.EventsListUnfolder.unfoldWhenContaining(this.props.events, event);\n    this.forceEventsUpdate();\n  }\n\n  _getEventRow(searchedEvent: gdBaseEvent) {\n    // TODO: flatData could be replaced by a hashmap of events to row index\n    return findIndex(\n      this.state.flatData,\n      event => event.ptr === searchedEvent.ptr\n    );\n  }\n\n  _eventsToTreeData = (\n    eventsList: gdEventsList,\n    flatData: Array<gdBaseEvent> = [],\n    depth: number = 0,\n    parentDisabled: boolean = false\n  ) => {\n    const treeData = mapFor<any>(0, eventsList.getEventsCount(), i => {\n      const event = eventsList.getEventAt(i);\n      flatData.push(event);\n\n      const disabled = parentDisabled || event.isDisabled();\n\n      return {\n        title: this._renderEvent,\n        event,\n        eventsList,\n        indexInList: i,\n        expanded: !event.isFolded(),\n        disabled,\n        depth,\n        key: event.ptr, //TODO: useless?\n        children: this._eventsToTreeData(\n          event.getSubEvents(),\n          // flatData is a flat representation of events, one for each line.\n          // Hence it should not contain the folded events.\n          !event.isFolded() ? flatData : [],\n          depth + 1,\n          disabled\n        ).treeData,\n      };\n    });\n\n    return {\n      treeData,\n      flatData,\n    };\n  };\n\n  _onMoveNode = ({\n    treeData,\n    path,\n    node,\n  }: {\n    treeData: any,\n    path: Array<any>,\n    node: SortableTreeNode,\n  }) => {\n    // Get the event list where the event should be moved to.\n    const targetPath = path.slice(0, -1);\n    const target = getNodeAtPath({\n      getNodeKey,\n      treeData: treeData,\n      path: targetPath,\n    });\n    const targetNode = target.node;\n    const targetEventsList =\n      targetNode && targetNode.event\n        ? targetNode.event.getSubEvents()\n        : this.props.events;\n    const targetPosition =\n      targetNode && targetNode.children ? targetNode.children.indexOf(node) : 0;\n\n    // Get the moved event and its list from the moved node.\n    const { event, eventsList } = node;\n\n    // Do the move\n    // Note that moveEventToAnotherEventsList does not invalidate the\n    // references to the event in memory - so things refering to this event like the\n    // selection in EventsSheet remain valid. This might not be needed anymore\n    // if events drag'n'drop is reworked to be similar to instructions drag'n'drop.\n    eventsList.moveEventToAnotherEventsList(\n      event,\n      targetEventsList,\n      targetPosition\n    );\n\n    this.forceEventsUpdate();\n    this.props.onEventMoved();\n  };\n\n  _canDrop = ({ nextParent }: { nextParent: ?SortableTreeNode }) => {\n    if (nextParent && nextParent.event)\n      return nextParent.event.canHaveSubEvents();\n\n    return true;\n  };\n\n  _onVisibilityToggle = ({ node }: { node: SortableTreeNode }) => {\n    const { event } = node;\n\n    event.setFolded(!event.isFolded());\n    this.forceEventsUpdate();\n  };\n\n  _renderObjectThumbnail = (objectName: string) => {\n    const { project, scope, showObjectThumbnails } = this.props;\n    if (!showObjectThumbnails) return null;\n\n    const object = getObjectByName(project, scope.layout, objectName);\n    if (!object) return null;\n\n    return (\n      <img\n        className={classNames({\n          [icon]: true,\n        })}\n        alt=\"\"\n        src={getThumbnail(project, object)}\n        crossOrigin=\"anonymous\"\n      />\n    );\n  };\n\n  _renderEvent = ({ node }: { node: SortableTreeNode }) => {\n    const { event, depth, disabled } = node;\n\n    return (\n      <EventContainer\n        project={this.props.project}\n        scope={this.props.scope}\n        globalObjectsContainer={this.props.globalObjectsContainer}\n        objectsContainer={this.props.objectsContainer}\n        event={event}\n        key={event.ptr}\n        eventsHeightsCache={this.eventsHeightsCache}\n        selection={this.props.selection}\n        leftIndentWidth={depth * indentWidth}\n        onAddNewInstruction={this.props.onAddNewInstruction}\n        onPasteInstructions={this.props.onPasteInstructions}\n        onMoveToInstruction={this.props.onMoveToInstruction}\n        onMoveToInstructionsList={this.props.onMoveToInstructionsList}\n        onInstructionClick={this.props.onInstructionClick}\n        onInstructionDoubleClick={this.props.onInstructionDoubleClick}\n        onParameterClick={this.props.onParameterClick}\n        onEventClick={() =>\n          this.props.onEventClick({\n            eventsList: node.eventsList,\n            event: node.event,\n            indexInList: node.indexInList,\n            isCondition: node.isCondition,\n          })\n        }\n        onEventContextMenu={(x, y) =>\n          this.props.onEventContextMenu(x, y, {\n            eventsList: node.eventsList,\n            event: node.event,\n            indexInList: node.indexInList,\n            isCondition: node.isCondition,\n          })\n        }\n        onInstructionContextMenu={this.props.onInstructionContextMenu}\n        onAddInstructionContextMenu={this.props.onAddInstructionContextMenu}\n        onOpenExternalEvents={this.props.onOpenExternalEvents}\n        onOpenLayout={this.props.onOpenLayout}\n        disabled={\n          disabled /* Use node.disabled (not event.disabled) as it is true if a parent event is disabled*/\n        }\n        renderObjectThumbnail={this._renderObjectThumbnail}\n        screenType={this.props.screenType}\n        windowWidth={this.props.windowWidth}\n      />\n    );\n  };\n\n  _treeSearchMethod = ({\n    node,\n    searchQuery,\n  }: {\n    node: SortableTreeNode,\n    searchQuery: ?Array<gdBaseEvent>,\n  }) => {\n    const searchResults = searchQuery;\n    if (!searchResults) return false;\n    const { event } = node;\n\n    return searchResults.find(highlightedEvent =>\n      gd.compare(highlightedEvent, event)\n    );\n  };\n\n  render() {\n    // react-sortable-tree does the rendering by transforming treeData\n    // into a flat array, the result being memoized. This hack forces\n    // a re-rendering of events, by discarding the memoized flat array\n    // (otherwise, no re-rendering would be done).\n    const treeData = this.state.treeData ? [...this.state.treeData] : null;\n\n    return (\n      <div style={styles.container}>\n        <SortableTree\n          treeData={treeData}\n          scaffoldBlockPxWidth={indentWidth}\n          onChange={noop}\n          onVisibilityToggle={this._onVisibilityToggle}\n          onMoveNode={this._onMoveNode}\n          canDrop={this._canDrop}\n          rowHeight={({ node }: { node: SortableTreeNode }) => {\n            if (!node.event) return 0;\n\n            return this.eventsHeightsCache.getEventHeight(node.event);\n          }}\n          searchMethod={this._treeSearchMethod}\n          searchQuery={this.props.searchResults}\n          searchFocusOffset={this.props.searchFocusOffset}\n          className={\n            this.props.searchResults ? eventsTreeWithSearchResults : ''\n          }\n          reactVirtualizedListProps={{\n            ref: list => (this._list = list),\n            onScroll: this.props.onScroll,\n          }}\n        />\n      </div>\n    );\n  }\n}\n","// @flow\nimport * as React from 'react';\nimport ReactDOM from 'react-dom';\nimport ContextMenu from './ContextMenu';\nimport { type MenuItemTemplate } from './Menu.flow';\n\ntype Props = {|\n  element: React$Element<any>,\n  buildMenuTemplate: () => Array<MenuItemTemplate>,\n  openMenuWithSecondaryClick?: boolean,\n|};\n\ntype State = {||};\n\n/**\n * Wrap an element and display a menu when `onClick` prop is called on the element.\n */\n\nexport default class ElementWithMenu extends React.Component<Props, State> {\n  _contextMenu: ?ContextMenu;\n  _wrappedElement: ?any;\n\n  open = (element: any) => {\n    const { _contextMenu } = this;\n    if (!_contextMenu) return;\n\n    const node = ReactDOM.findDOMNode(this._wrappedElement);\n    if (node instanceof HTMLElement) {\n      const dimensions = node.getBoundingClientRect();\n\n      _contextMenu.open(\n        Math.round(dimensions.left + dimensions.width / 2),\n        Math.round(dimensions.top + dimensions.height)\n      );\n    }\n  };\n\n  render() {\n    const {\n      element,\n      buildMenuTemplate,\n      openMenuWithSecondaryClick,\n    } = this.props;\n\n    return (\n      <React.Fragment>\n        {React.cloneElement(element, {\n          ...(openMenuWithSecondaryClick\n            ? { onContextMenu: this.open }\n            : { onClick: this.open }),\n          ref: wrappedElement => (this._wrappedElement = wrappedElement),\n        })}\n        <ContextMenu\n          ref={contextMenu => (this._contextMenu = contextMenu)}\n          buildMenuTemplate={buildMenuTemplate}\n        />\n      </React.Fragment>\n    );\n  }\n}\n","// @flow\nimport { t } from '@lingui/macro';\n\nimport * as React from 'react';\nimport IconButton from './IconButton';\nimport TextField from './TextField';\nimport Paper from '@material-ui/core/Paper';\nimport Close from '@material-ui/icons/Close';\nimport Search from '@material-ui/icons/Search';\nimport FilterList from '@material-ui/icons/FilterList';\nimport ElementWithMenu from './Menu/ElementWithMenu';\nimport HelpIcon from './HelpIcon';\nimport { type MessageDescriptor } from '../Utils/i18n/MessageDescriptor.flow';\n\ntype Props = {|\n  /** Disables text field. */\n  disabled?: boolean,\n  /** Sets placeholder for the embedded text field. */\n  placeholder?: MessageDescriptor,\n  /** Fired when the text value changes. */\n  onChange?: string => void,\n  /** Fired when the search icon is clicked. */\n  onRequestSearch: string => void,\n  /** Override the inline-styles of the root element. */\n  style?: Object,\n  /** The value of the text field. */\n  value: string,\n  /** If tags are supported, the function to list the tags menu */\n  buildTagsMenuTemplate?: () => any,\n  /** If defined, a help icon button redirecting to this page will be shown */\n  helpPagePath?: ?string,\n  /** Elevation of Paper Component */\n  elevation?: number,\n|};\n\ntype State = {|\n  focus: boolean,\n  value: string,\n  active: boolean,\n|};\n\nconst getStyles = (props: Props, state: State) => {\n  const { disabled } = props;\n  const { value } = state;\n  const nonEmpty = value.length > 0;\n\n  return {\n    root: {\n      height: 48,\n      display: 'flex',\n      justifyContent: 'space-between',\n    },\n    iconButtonClose: {\n      style: {\n        opacity: !disabled ? 0.54 : 0.38,\n        transform: nonEmpty ? 'scale(1, 1)' : 'scale(0, 0)',\n        transition: 'transform 200ms cubic-bezier(0.4, 0.0, 0.2, 1)',\n      },\n      iconStyle: {\n        opacity: nonEmpty ? 1 : 0,\n        transition: 'opacity 200ms cubic-bezier(0.4, 0.0, 0.2, 1)',\n      },\n    },\n    iconButtonSearch: {\n      style: {\n        opacity: !disabled ? 0.54 : 0.38,\n        transform: nonEmpty ? 'scale(0, 0)' : 'scale(1, 1)',\n        transition: 'transform 200ms cubic-bezier(0.4, 0.0, 0.2, 1)',\n        marginRight: -48,\n      },\n      iconStyle: {\n        opacity: nonEmpty ? 0 : 1,\n        transition: 'opacity 200ms cubic-bezier(0.4, 0.0, 0.2, 1)',\n      },\n    },\n    iconButtonFilter: {\n      style: {\n        opacity: !disabled ? 0.54 : 0.38,\n      },\n    },\n    iconButtonHelp: {\n      style: {\n        opacity: !disabled ? 0.54 : 0.38,\n      },\n    },\n    input: {\n      width: '100%',\n    },\n    searchContainer: {\n      margin: 'auto 16px',\n      width: '100%',\n    },\n  };\n};\n\n/**\n * Material design search bar,\n * inspired from https://github.com/TeamWertarbyte/material-ui-search-bar\n *\n * Customized to add optional tags button.\n */\nexport default class SearchBar extends React.PureComponent<Props, State> {\n  state = {\n    focus: false,\n    value: this.props.value,\n    active: false,\n  };\n  _textField = React.createRef<TextField>();\n\n  componentWillReceiveProps(nextProps: Props) {\n    if (this.props.value !== nextProps.value) {\n      this.setState({ ...this.state, value: nextProps.value });\n    }\n  }\n\n  focus = () => {\n    if (this._textField.current) {\n      this._textField.current.focus();\n    }\n  };\n\n  blur = () => {\n    if (this._textField.current) {\n      this._textField.current.blur();\n    }\n  };\n\n  handleFocus = () => {\n    this.setState({ focus: true });\n  };\n\n  handleBlur = () => {\n    this.setState({ focus: false });\n    if (this.state.value.trim().length === 0) {\n      this.setState({ value: '' });\n    }\n  };\n\n  handleInput = (e: {| target: {| value: string |} |}) => {\n    this.setState({ value: e.target.value });\n    this.props.onChange && this.props.onChange(e.target.value);\n  };\n\n  handleCancel = () => {\n    this.setState({ active: false, value: '' });\n    this.props.onChange && this.props.onChange('');\n  };\n\n  handleKeyPressed = (e: { charCode: number, key: string }) => {\n    if (e.charCode === 13 || e.key === 'Enter') {\n      this.props.onRequestSearch(this.state.value);\n    }\n  };\n\n  render() {\n    const styles = getStyles(this.props, this.state);\n    const { value } = this.state;\n    const { disabled, style, buildTagsMenuTemplate, helpPagePath } = this.props;\n\n    return (\n      <Paper\n        style={{\n          ...styles.root,\n          ...style,\n        }}\n        elevation={this.props.elevation || 1}\n      >\n        <div style={styles.searchContainer}>\n          <TextField\n            margin=\"none\"\n            hintText={this.props.placeholder || t`Search`}\n            onBlur={this.handleBlur}\n            value={value}\n            onChange={this.handleInput}\n            onKeyUp={this.handleKeyPressed}\n            onFocus={this.handleFocus}\n            fullWidth\n            style={styles.input}\n            underlineShow={false}\n            disabled={disabled}\n            ref={this._textField}\n          />\n        </div>\n        {buildTagsMenuTemplate && (\n          <ElementWithMenu\n            element={\n              <IconButton\n                style={styles.iconButtonFilter.style}\n                disabled={disabled}\n              >\n                <FilterList />\n              </IconButton>\n            }\n            buildMenuTemplate={buildTagsMenuTemplate}\n          />\n        )}\n        {helpPagePath && (\n          <HelpIcon\n            disabled={disabled}\n            helpPagePath={helpPagePath}\n            style={styles.iconButtonHelp.style}\n          />\n        )}\n        <IconButton style={styles.iconButtonSearch.style} disabled={disabled}>\n          <Search style={styles.iconButtonSearch.iconStyle} />\n        </IconButton>\n        <IconButton\n          onClick={this.handleCancel}\n          style={styles.iconButtonClose.style}\n          disabled={disabled}\n        >\n          <Close style={styles.iconButtonClose.iconStyle} />\n        </IconButton>\n      </Paper>\n    );\n  }\n}\n","// @flow\n// Note: this file don't use export/imports nor Flow to allow its usage from Node.js\n\nconst optionalRequire = require('../Utils/OptionalRequire.js');\nconst electron = optionalRequire('electron');\nconst app = electron ? electron.remote.app : null;\nconst fs = optionalRequire('fs');\nconst path = optionalRequire('path');\nconst process = optionalRequire('process');\nvar isDarwin = process && /^darwin/.test(process.platform);\n\nconst tryPath = (\n  path /*: string*/,\n  onExists /*: string => void*/,\n  onNoAccess /*: Function*/\n) =>\n  fs.access(path, fs.constants.R_OK, err => {\n    if (!err) onExists(path);\n    else onNoAccess();\n  });\n\nconst findGDJS = () /*: Promise<{|gdjsRoot: string|}> */ => {\n  if (!path || !process || !fs) return Promise.reject(new Error('Unsupported'));\n\n  const appPath = app ? app.getAppPath() : process.cwd();\n\n  // The app path is [...]/*.app/Contents/Resources/app.asar on macOS\n  // and [...]/resources/app.asar on other OSes.\n  const pathToRoot = isDarwin ? '../../../../' : path.join('..', '..');\n  const rootPath = path.join(appPath, pathToRoot);\n\n  return new Promise((resolve, reject) => {\n    const onFound = gdjsRoot => resolve({ gdjsRoot });\n    const onNotFound = () => reject(new Error('Could not find GDJS'));\n\n    // First try to find GDJS in the parent folder (when newIDE is inside IDE)\n    tryPath(path.join(rootPath, '..', 'JsPlatform'), onFound, () => {\n      // Or in the resources (for a standalone newIDE)\n      tryPath(path.join(appPath, '..', 'GDJS'), onFound, () => {\n        // Or in the resources when developing with Electron\n        const devPath = path.join(\n          appPath,\n          '..',\n          '..',\n          'app',\n          'resources',\n          'GDJS'\n        );\n        tryPath(devPath, onFound, onNotFound);\n      });\n    });\n  });\n};\n\nmodule.exports = {\n  findGDJS,\n};\n","// @flow\nimport * as React from 'react';\nimport InstructionsList from '../InstructionsList';\nimport classNames from 'classnames';\nimport {\n  largeSelectedArea,\n  largeSelectableArea,\n  executableEventContainer,\n} from '../ClassNames';\nimport { type EventRendererProps } from './EventRenderer';\nimport ConditionsActionsColumns from '../ConditionsActionsColumns';\nconst gd = global.gd;\n\nconst styles = {\n  actionsList: {\n    flex: 1,\n  },\n};\n\nexport default class StandardEvent extends React.Component<\n  EventRendererProps,\n  *\n> {\n  render() {\n    var standardEvent = gd.asStandardEvent(this.props.event);\n\n    return (\n      <ConditionsActionsColumns\n        leftIndentWidth={this.props.leftIndentWidth}\n        windowWidth={this.props.windowWidth}\n        className={classNames({\n          [largeSelectableArea]: true,\n          [largeSelectedArea]: this.props.selected,\n          [executableEventContainer]: true,\n        })}\n        renderConditionsList={({ style, className }) => (\n          <InstructionsList\n            instrsList={standardEvent.getConditions()}\n            style={style}\n            className={className}\n            selection={this.props.selection}\n            areConditions\n            onAddNewInstruction={this.props.onAddNewInstruction}\n            onPasteInstructions={this.props.onPasteInstructions}\n            onMoveToInstruction={this.props.onMoveToInstruction}\n            onMoveToInstructionsList={this.props.onMoveToInstructionsList}\n            onInstructionClick={this.props.onInstructionClick}\n            onInstructionDoubleClick={this.props.onInstructionDoubleClick}\n            onInstructionContextMenu={this.props.onInstructionContextMenu}\n            onAddInstructionContextMenu={this.props.onAddInstructionContextMenu}\n            onParameterClick={this.props.onParameterClick}\n            disabled={this.props.disabled}\n            renderObjectThumbnail={this.props.renderObjectThumbnail}\n            screenType={this.props.screenType}\n            windowWidth={this.props.windowWidth}\n          />\n        )}\n        renderActionsList={({ className }) => (\n          <InstructionsList\n            instrsList={standardEvent.getActions()}\n            style={\n              {\n                ...styles.actionsList,\n              } /* TODO: Use a new object to force update - somehow updates are not always propagated otherwise */\n            }\n            className={className}\n            selection={this.props.selection}\n            areConditions={false}\n            onAddNewInstruction={this.props.onAddNewInstruction}\n            onPasteInstructions={this.props.onPasteInstructions}\n            onMoveToInstruction={this.props.onMoveToInstruction}\n            onMoveToInstructionsList={this.props.onMoveToInstructionsList}\n            onInstructionClick={this.props.onInstructionClick}\n            onInstructionDoubleClick={this.props.onInstructionDoubleClick}\n            onInstructionContextMenu={this.props.onInstructionContextMenu}\n            onAddInstructionContextMenu={this.props.onAddInstructionContextMenu}\n            onParameterClick={this.props.onParameterClick}\n            disabled={this.props.disabled}\n            renderObjectThumbnail={this.props.renderObjectThumbnail}\n            screenType={this.props.screenType}\n            windowWidth={this.props.windowWidth}\n          />\n        )}\n      />\n    );\n  }\n}\n","// @flow\nimport { Trans } from '@lingui/macro';\n\nimport * as React from 'react';\nimport { mapFor } from '../../Utils/MapFor';\nimport classNames from 'classnames';\nimport {\n  selectedArea,\n  selectableArea,\n  subInstructionsContainer,\n  instructionParameter,\n  disabledText,\n  icon,\n} from './ClassNames';\nimport {\n  type InstructionsListContext,\n  type InstructionContext,\n} from '../SelectionHandler';\nimport InstructionsList from './InstructionsList';\nimport DropIndicator from './DropIndicator';\nimport ParameterRenderingService from '../ParameterRenderingService';\nimport InvalidParameterValue from './InvalidParameterValue';\nimport MissingParameterValue from './MissingParameterValue';\nimport { makeDragSourceAndDropTarget } from '../../UI/DragAndDrop/DragSourceAndDropTarget';\nimport { type ScreenType } from '../../UI/Reponsive/ScreenTypeMeasurer';\nimport { type WidthType } from '../../UI/Reponsive/ResponsiveWindowMeasurer';\nimport PreferencesContext from '../../MainFrame/Preferences/PreferencesContext';\nconst gd = global.gd;\n\nconst styles = {\n  container: {\n    whiteSpace: 'normal',\n    wordWrap: 'break-word',\n    cursor: 'pointer',\n    marginBottom: 1,\n  },\n};\n\nexport const reactDndInstructionType = 'GD_DRAGGED_INSTRUCTION';\n\nconst capitalize = (str: string) => {\n  if (!str) return '';\n\n  return str[0].toUpperCase() + str.substr(1);\n};\n\nconst DragSourceAndDropTarget = makeDragSourceAndDropTarget<{\n  isCondition: boolean,\n}>(reactDndInstructionType);\n\ntype Props = {|\n  instruction: gdInstruction,\n  isCondition: boolean,\n  onClick: Function,\n  selected: boolean,\n  disabled: boolean,\n  onDoubleClick: () => void,\n  onContextMenu: (x: number, y: number) => void,\n  onMoveToInstruction: () => void,\n\n  // For potential sub-instructions list:\n  selection: Object,\n  onAddNewSubInstruction: InstructionsListContext => void,\n  onPasteSubInstructions: InstructionsListContext => void,\n  onMoveToSubInstruction: (destinationContext: InstructionContext) => void,\n  onMoveToSubInstructionsList: (\n    destinationContext: InstructionsListContext\n  ) => void,\n  onSubInstructionClick: InstructionContext => void,\n  onSubInstructionDoubleClick: InstructionContext => void,\n  onAddSubInstructionContextMenu: (\n    button: HTMLButtonElement,\n    instructionsListContext: InstructionsListContext\n  ) => void,\n  onSubParameterClick: Function,\n  onSubInstructionContextMenu: (\n    x: number,\n    y: number,\n    instructionContext: InstructionContext\n  ) => void,\n  onParameterClick: (event: any, parameterIndex: number) => void,\n  renderObjectThumbnail: string => React.Node,\n\n  screenType: ScreenType,\n  windowWidth: WidthType,\n|};\n\nconst Instruction = (props: Props) => {\n  const { instruction, isCondition, onClick, onMoveToInstruction } = props;\n\n  const instrFormatter = React.useMemo(\n    () => gd.InstructionSentenceFormatter.get(),\n    []\n  );\n  const preferences = React.useContext(PreferencesContext);\n  const useAssignmentOperators =\n    preferences.values.eventsSheetUseAssignmentOperators;\n\n  /**\n   * Render the different parts of the text of the instruction.\n   * Parameter can have formatting, be hovered and clicked. The rest\n   * has not particular styling.\n   */\n  const renderInstructionText = (metadata: gdInstructionMetadata) => {\n    const { instruction, disabled, renderObjectThumbnail } = props;\n    const formattedTexts = instrFormatter.getAsFormattedText(\n      instruction,\n      metadata\n    );\n    const parametersCount = metadata.getParametersCount();\n\n    return (\n      <span\n        className={classNames({\n          [disabledText]: disabled,\n        })}\n      >\n        {mapFor(0, formattedTexts.size(), i => {\n          const formatting = formattedTexts.getTextFormatting(i);\n          const parameterIndex = formatting.getUserData();\n          const isParameter =\n            parameterIndex >= 0 && parameterIndex < parametersCount;\n\n          if (!isParameter) {\n            return (\n              <span key={i}>\n                {i === 0\n                  ? capitalize(formattedTexts.getString(i))\n                  : formattedTexts.getString(i)}\n              </span>\n            );\n          }\n\n          const parameterMetadata = metadata.getParameter(parameterIndex);\n          const parameterType = parameterMetadata.getType();\n          return (\n            <span\n              key={i}\n              className={classNames({\n                [selectableArea]: true,\n                [instructionParameter]: true,\n                [parameterType]: true,\n              })}\n              onClick={domEvent => {\n                props.onParameterClick(domEvent, parameterIndex);\n\n                // On touchscreen, don't propagate the click to the instruction div,\n                // as it's listening for taps to simulate double \"clicks\".\n                if (props.screenType === 'touch') {\n                  domEvent.stopPropagation();\n                }\n              }}\n              onKeyPress={event => {\n                if (event.key === 'Enter' || event.key === ' ') {\n                  props.onParameterClick(event, parameterIndex);\n                  event.stopPropagation();\n                  event.preventDefault();\n                }\n              }}\n              tabIndex={0}\n            >\n              {ParameterRenderingService.renderInlineParameter({\n                value: formattedTexts.getString(i),\n                parameterMetadata,\n                renderObjectThumbnail,\n                InvalidParameterValue,\n                MissingParameterValue,\n                useAssignmentOperators,\n              })}\n            </span>\n          );\n        })}\n      </span>\n    );\n  };\n\n  //TODO: Metadata could be cached for performance boost.\n  const metadata = isCondition\n    ? gd.MetadataProvider.getConditionMetadata(\n        gd.JsPlatform.get(),\n        instruction.getType()\n      )\n    : gd.MetadataProvider.getActionMetadata(\n        gd.JsPlatform.get(),\n        instruction.getType()\n      );\n\n  return (\n    <DragSourceAndDropTarget\n      beginDrag={() => {\n        onClick(); // Select the dragged instruction\n\n        // No need to save here what is being dragged,\n        // as its the entire selection that is considered to be dragged.\n        return {\n          isCondition,\n        };\n      }}\n      canDrop={draggedItem => draggedItem.isCondition === isCondition}\n      drop={() => {\n        onMoveToInstruction();\n      }}\n    >\n      {({ connectDragSource, connectDropTarget, isOver, canDrop }) => {\n        // The instruction itself can be dragged and is a target for\n        // another instruction to be dropped. It's IMPORTANT NOT to have\n        // the subinstructions list inside the connectDropTarget/connectDragSource\n        // as otherwise this can confuse react-dnd (\"Expected to find a valid target\")\n        // (surely due to components re-mounting/rerendering ?).\n        const instructionDragSourceElement = connectDragSource(\n          <div\n            style={styles.container}\n            className={classNames({\n              [selectableArea]: true,\n              [selectedArea]: props.selected,\n            })}\n            onClick={e => {\n              e.stopPropagation();\n\n              if (props.screenType === 'touch' && props.selected) {\n                // On touch screens, tapping again a selected instruction should edit it.\n                props.onDoubleClick();\n              } else {\n                props.onClick();\n              }\n            }}\n            onDoubleClick={e => {\n              e.stopPropagation();\n              props.onDoubleClick();\n            }}\n            onContextMenu={e => {\n              e.stopPropagation();\n              props.onContextMenu(e.clientX, e.clientY);\n            }}\n            onKeyPress={event => {\n              if (event.key === 'Enter') {\n                props.onDoubleClick();\n                event.stopPropagation();\n                event.preventDefault();\n              } else if (event.key === ' ') {\n                props.onClick();\n                event.stopPropagation();\n                event.preventDefault();\n              }\n            }}\n            tabIndex={0}\n          >\n            {instruction.isInverted() && (\n              <img\n                className={classNames({\n                  [icon]: true,\n                })}\n                src=\"res/contraire.png\"\n                alt=\"Condition is negated\"\n              />\n            )}\n            <img\n              className={classNames({\n                [icon]: true,\n              })}\n              src={metadata.getSmallIconFilename()}\n              alt=\"\"\n            />\n            {renderInstructionText(metadata)}\n          </div>\n        );\n\n        const instructionDragSourceDropTargetElement = instructionDragSourceElement\n          ? connectDropTarget(instructionDragSourceElement)\n          : null;\n\n        return (\n          <React.Fragment>\n            {isOver && <DropIndicator canDrop={canDrop} />}\n            {instructionDragSourceDropTargetElement}\n            {metadata.canHaveSubInstructions() && (\n              <InstructionsList\n                style={\n                  {} /* TODO: Use a new object to force update - somehow updates are not always propagated otherwise */\n                }\n                className={subInstructionsContainer}\n                instrsList={instruction.getSubInstructions()}\n                areConditions={props.isCondition}\n                selection={props.selection}\n                onAddNewInstruction={props.onAddNewSubInstruction}\n                onPasteInstructions={props.onPasteSubInstructions}\n                onMoveToInstruction={props.onMoveToSubInstruction}\n                onMoveToInstructionsList={props.onMoveToSubInstructionsList}\n                onInstructionClick={props.onSubInstructionClick}\n                onInstructionDoubleClick={props.onSubInstructionDoubleClick}\n                onInstructionContextMenu={props.onSubInstructionContextMenu}\n                onAddInstructionContextMenu={\n                  props.onAddSubInstructionContextMenu\n                }\n                onParameterClick={props.onSubParameterClick}\n                addButtonLabel={<Trans>Add a sub-condition</Trans>}\n                disabled={props.disabled}\n                renderObjectThumbnail={props.renderObjectThumbnail}\n                screenType={props.screenType}\n                windowWidth={props.windowWidth}\n              />\n            )}\n          </React.Fragment>\n        );\n      }}\n    </DragSourceAndDropTarget>\n  );\n};\n\nexport default Instruction;\n","// @flow\nimport { Trans } from '@lingui/macro';\nimport { t } from '@lingui/macro';\nimport React, { Component } from 'react';\nimport { type ParameterInlineRendererProps } from './ParameterInlineRenderer.flow';\nimport { type ParameterFieldProps } from './ParameterFieldCommons';\nimport SelectField from '../../UI/SelectField';\nimport SelectOption from '../../UI/SelectOption';\n\nexport default class RelationalOperatorField extends Component<ParameterFieldProps> {\n  _field: ?SelectField;\n  focus() {\n    if (this._field && this._field.focus) this._field.focus();\n  }\n\n  render() {\n    const { parameterMetadata } = this.props;\n    const description = parameterMetadata\n      ? parameterMetadata.getDescription()\n      : undefined;\n\n    return (\n      <SelectField\n        margin={this.props.isInline ? 'none' : 'dense'}\n        fullWidth\n        floatingLabelText={description}\n        helperMarkdownText={\n          parameterMetadata ? parameterMetadata.getLongDescription() : undefined\n        }\n        value={this.props.value}\n        onChange={(e, i, value: string) => this.props.onChange(value)}\n        ref={field => (this._field = field)}\n        hintText={t`Choose an operator`}\n      >\n        <SelectOption value=\"=\" primaryText={t`= (equal to)`} />\n        <SelectOption value=\"<\" primaryText={t`< (less than)`} />\n        <SelectOption value=\">\" primaryText={t`> (greater than)`} />\n        <SelectOption value=\"<=\" primaryText={t`≤ (less or equal to)`} />\n        <SelectOption value=\">=\" primaryText={t`≥ (greater or equal to)`} />\n        <SelectOption value=\"!=\" primaryText={t`≠ (not equal to)`} />\n      </SelectField>\n    );\n  }\n}\n\nexport const renderInlineRelationalOperator = ({\n  value,\n  InvalidParameterValue,\n}: ParameterInlineRendererProps) => {\n  if (!value) {\n    return (\n      <InvalidParameterValue isEmpty>\n        <Trans>Choose an operator</Trans>\n      </InvalidParameterValue>\n    );\n  }\n\n  if (\n    value !== '=' &&\n    value !== '<' &&\n    value !== '>' &&\n    value !== '<=' &&\n    value !== '>=' &&\n    value !== '!='\n  ) {\n    return <InvalidParameterValue>{value}</InvalidParameterValue>;\n  }\n\n  if (value === '<=') return '\\u2264';\n  if (value === '>=') return '\\u2265';\n  else if (value === '!=') return '\\u2260';\n\n  return value;\n};\n","// @flow\nimport { Trans } from '@lingui/macro';\nimport { t } from '@lingui/macro';\nimport React, { Component } from 'react';\nimport { type ParameterInlineRendererProps } from './ParameterInlineRenderer.flow';\nimport { type ParameterFieldProps } from './ParameterFieldCommons';\nimport SelectField from '../../UI/SelectField';\nimport SelectOption from '../../UI/SelectOption';\n\nexport default class OperatorField extends Component<ParameterFieldProps> {\n  _field: ?SelectField;\n  focus() {\n    if (this._field && this._field.focus) this._field.focus();\n  }\n\n  render() {\n    const { parameterMetadata } = this.props;\n    const description = parameterMetadata\n      ? parameterMetadata.getDescription()\n      : undefined;\n\n    return (\n      <SelectField\n        margin={this.props.isInline ? 'none' : 'dense'}\n        fullWidth\n        floatingLabelText={description}\n        helperMarkdownText={\n          parameterMetadata ? parameterMetadata.getLongDescription() : undefined\n        }\n        value={this.props.value}\n        onChange={(e, i, value: string) => this.props.onChange(value)}\n        ref={field => (this._field = field)}\n        hintText={t`Choose an operator`}\n      >\n        <SelectOption value=\"=\" primaryText={t`= (set to)`} />\n        <SelectOption value=\"+\" primaryText={t`+ (add)`} />\n        <SelectOption value=\"-\" primaryText={t`- (subtract)`} />\n        <SelectOption value=\"*\" primaryText={t`* (multiply by)`} />\n        <SelectOption value=\"/\" primaryText={t`/ (divide by)`} />\n      </SelectField>\n    );\n  }\n}\n\nexport const renderInlineOperator = ({\n  value,\n  InvalidParameterValue,\n  useAssignmentOperators,\n}: ParameterInlineRendererProps) => {\n  if (!value) {\n    return (\n      <InvalidParameterValue isEmpty>\n        <Trans>Choose an operator</Trans>\n      </InvalidParameterValue>\n    );\n  }\n\n  if (useAssignmentOperators) {\n    if (value === '=') return '=';\n    else if (value === '+') return '+=';\n    else if (value === '-') return '-=';\n    else if (value === '/') return '/=';\n    else if (value === '*') return '*=';\n  } else {\n    if (value === '=') return <Trans>set to</Trans>;\n    else if (value === '+') return <Trans>add</Trans>;\n    else if (value === '-') return <Trans>subtract</Trans>;\n    else if (value === '/') return <Trans>divide by</Trans>;\n    else if (value === '*') return <Trans>multiply by</Trans>;\n  }\n\n  return <InvalidParameterValue>{value}</InvalidParameterValue>;\n};\n","import { Trans } from '@lingui/macro';\nimport { t } from '@lingui/macro';\nimport { type ParameterInlineRendererProps } from './ParameterInlineRenderer.flow';\nimport React, { Component } from 'react';\nimport SelectField from '../../UI/SelectField';\nimport SelectOption from '../../UI/SelectOption';\n\nexport default class MouseField extends Component {\n  focus() {}\n\n  render() {\n    const { parameterMetadata, value } = this.props;\n    const description = parameterMetadata\n      ? parameterMetadata.getDescription()\n      : undefined;\n\n    return (\n      <SelectField\n        margin={this.props.isInline ? 'none' : 'dense'}\n        fullWidth\n        floatingLabelText={description}\n        helperMarkdownText={\n          parameterMetadata ? parameterMetadata.getLongDescription() : undefined\n        }\n        value={value}\n        ref={field => (this._field = field)}\n        onChange={(e, i, value) => this.props.onChange(value)}\n        errorText={value ? undefined : <Trans>You must select a button</Trans>}\n      >\n        <SelectOption value=\"Left\" primaryText={t`Left (primary)`} />\n        <SelectOption value=\"Right\" primaryText={t`Right (secondary)`} />\n        <SelectOption\n          value=\"Middle\"\n          primaryText={t`Middle (Auxiliary button, usually the wheel button)`}\n        />\n        {/* TODO: Add support for these buttons in the game engine\n         <SelectOption\n          value=\"XButton1\"\n          primaryText={t`Special button #1`}\n        />\n        <SelectOption\n          value=\"XButton2\"\n          primaryText={t`Special button #2`}\n        /> */}\n      </SelectField>\n    );\n  }\n}\n\nexport const renderInlineMouse = ({\n  value,\n  InvalidParameterValue,\n}: ParameterInlineRendererProps) => {\n  return value ? (\n    value\n  ) : (\n    <InvalidParameterValue isEmpty>\n      <Trans>Choose a mouse button</Trans>\n    </InvalidParameterValue>\n  );\n};\n","// @flow\nimport { Trans } from '@lingui/macro';\nimport { type ParameterInlineRendererProps } from './ParameterInlineRenderer.flow';\nimport React, { Component } from 'react';\nimport { type ParameterFieldProps } from './ParameterFieldCommons';\nimport SemiControlledAutoComplete from '../../UI/SemiControlledAutoComplete';\n\nconst keyNames = [\n  'Num0',\n  'Num1',\n  'Num2',\n  'Num3',\n  'Num4',\n  'Num5',\n  'Num6',\n  'Num7',\n  'Num8',\n  'Num9',\n  'a',\n  'b',\n  'c',\n  'd',\n  'e',\n  'f',\n  'g',\n  'h',\n  'i',\n  'j',\n  'k',\n  'l',\n  'm',\n  'n',\n  'o',\n  'p',\n  'q',\n  'r',\n  's',\n  't',\n  'u',\n  'v',\n  'w',\n  'x',\n  'y',\n  'z',\n  'LBracket',\n  'RBracket',\n  'SemiColon',\n  'Numpad0',\n  'Numpad1',\n  'Numpad2',\n  'Numpad3',\n  'Numpad4',\n  'Numpad5',\n  'Numpad6',\n  'Numpad7',\n  'Numpad8',\n  'Numpad9',\n  'Escape',\n  'Space',\n  'Return',\n  'Back',\n  'Tab',\n  'PageUp',\n  'PageDown',\n  'End',\n  'Home',\n  'Insert',\n  'Delete',\n  'Add',\n  'Subtract',\n  'Multiply',\n  'Divide',\n  'Left',\n  'Right',\n  'Up',\n  'Down',\n  'F1',\n  'F2',\n  'F3',\n  'F4',\n  'F5',\n  'F6',\n  'F7',\n  'F8',\n  'F9',\n  'F10',\n  'F11',\n  'F12',\n  'Pause',\n  'RControl',\n  'LControl',\n  'RAlt',\n  'LAlt',\n  'RShift',\n  'LShift',\n];\n\nconst isKeyValid = (key: string) => keyNames.indexOf(key) !== -1;\n\nexport default class KeyField extends Component<ParameterFieldProps, {||}> {\n  _field: ?any;\n\n  focus() {\n    if (this._field) this._field.focus();\n  }\n\n  render() {\n    const {\n      value,\n      onChange,\n      isInline,\n      parameterMetadata,\n      onRequestClose,\n    } = this.props;\n\n    return (\n      <SemiControlledAutoComplete\n        margin={this.props.isInline ? 'none' : 'dense'}\n        floatingLabelText={\n          parameterMetadata ? parameterMetadata.getDescription() : undefined\n        }\n        helperMarkdownText={\n          parameterMetadata ? parameterMetadata.getLongDescription() : undefined\n        }\n        fullWidth\n        value={value}\n        onChange={onChange}\n        dataSource={keyNames.map(keyName => ({\n          text: keyName,\n          value: keyName,\n        }))}\n        openOnFocus={!isInline}\n        onRequestClose={onRequestClose}\n        ref={field => (this._field = field)}\n        errorText={\n          !value ? (\n            <Trans>You must select a key.</Trans>\n          ) : !isKeyValid(value) ? (\n            <Trans>You must select a valid key. \"{value}\" is not valid.</Trans>\n          ) : (\n            undefined\n          )\n        }\n      />\n    );\n  }\n}\n\nexport const renderInlineKey = ({\n  value,\n  InvalidParameterValue,\n}: ParameterInlineRendererProps) => {\n  if (!value) {\n    return (\n      <InvalidParameterValue isEmpty>\n        <Trans>Choose a key</Trans>\n      </InvalidParameterValue>\n    );\n  }\n\n  return isKeyValid(value) ? (\n    value\n  ) : (\n    <InvalidParameterValue>{value}</InvalidParameterValue>\n  );\n};\n","import RenderedInstance from './RenderedInstance';\nimport * as PIXI from 'pixi.js';\n\n/**\n * Objects with an unknown type are rendered with a placeholder rectangle.\n *\n * @extends RenderedInstance\n * @class RenderedUnknownInstance\n * @constructor\n */\nfunction RenderedUnknownInstance(\n  project,\n  layout,\n  instance,\n  associatedObject,\n  pixiContainer,\n  pixiResourcesLoader\n) {\n  RenderedInstance.call(\n    this,\n    project,\n    layout,\n    instance,\n    associatedObject,\n    pixiContainer,\n    pixiResourcesLoader\n  );\n\n  //This renderer show a placeholder for the object:\n  this._pixiObject = new PIXI.Graphics();\n  this._pixiContainer.addChild(this._pixiObject);\n\n  var width = instance.hasCustomSize() ? instance.getCustomWidth() : 32;\n  var height = instance.hasCustomSize() ? instance.getCustomHeight() : 32;\n\n  this._pixiObject.beginFill(0x0033ff);\n  this._pixiObject.lineStyle(1, 0xffd900, 1);\n  this._pixiObject.moveTo(0, 0);\n  this._pixiObject.lineTo(width, 0);\n  this._pixiObject.lineTo(width, height);\n  this._pixiObject.lineTo(0, height);\n  this._pixiObject.endFill();\n}\nRenderedUnknownInstance.prototype = Object.create(RenderedInstance.prototype);\nRenderedUnknownInstance.getThumbnail = function(\n  project,\n  resourcesLoader,\n  object\n) {\n  return 'res/unknown32.png';\n};\n\nRenderedUnknownInstance.prototype.update = function() {\n  this._pixiObject.position.x = this._instance.getX();\n  this._pixiObject.position.y = this._instance.getY();\n  this._pixiObject.rotation = (this._instance.getAngle() * Math.PI) / 180.0;\n};\n\nexport default RenderedUnknownInstance;\n","// @flow\nimport * as React from 'react';\nimport { useState } from 'react';\nimport { I18n } from '@lingui/react';\nimport TextField from '@material-ui/core/TextField';\nimport { type MessageDescriptor } from '../Utils/i18n/MessageDescriptor.flow';\nimport ListIcon from './ListIcon';\nimport SvgIcon from '@material-ui/core/SvgIcon';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport { MarkdownText } from './MarkdownText';\nimport Autocomplete from '@material-ui/lab/Autocomplete';\nimport ListItem from '@material-ui/core/ListItem';\nimport { computeTextFieldStyleProps } from './TextField';\nimport { makeStyles } from '@material-ui/core/styles';\nimport muiZIndex from '@material-ui/core/styles/zIndex';\n\ntype Option =\n  | {|\n      type: 'separator',\n    |}\n  | {|\n      text: string, // The text used for filtering. If empty, item is always shown.\n      value: string, // The value to show on screen and to be selected\n      onClick?: () => void, // If defined, will be called when the item is clicked. onChange/onChoose won't be called.\n      renderIcon?: ?() => React.Element<typeof ListIcon | typeof SvgIcon>,\n    |};\n\nexport type DataSource = Array<Option>;\n\ntype Props = {|\n  value: string,\n  onChange: string => void,\n  onChoose?: string => void,\n  dataSource: DataSource,\n\n  id?: string,\n  onBlur?: (event: SyntheticFocusEvent<HTMLInputElement>) => void,\n  onRequestClose?: () => void,\n  errorText?: React.Node,\n  disabled?: boolean,\n  floatingLabelText?: React.Node,\n  helperMarkdownText?: ?string,\n  hintText?: MessageDescriptor | string,\n  fullWidth?: boolean,\n  margin?: 'none' | 'dense',\n  textFieldStyle?: Object,\n  openOnFocus?: boolean,\n|};\n\nexport type SemiControlledAutoCompleteInterface = {|\n  focus: () => void,\n  forceInputValueTo: (newValue: string) => void,\n|};\n\nconst styles = {\n  container: {\n    position: 'relative',\n    width: '100%',\n  },\n  listItem: {\n    padding: 0,\n    margin: 0,\n    display: 'inline-block',\n    whiteSpace: 'nowrap',\n    width: 'calc(100%)',\n    overflow: 'hidden',\n    textOverflow: 'ellipsis',\n  },\n};\n\nconst useStyles = makeStyles({\n  option: {\n    cursor: 'default',\n  },\n  listbox: {\n    padding: 0,\n    margin: 0,\n  },\n  input: {\n    width: 'auto',\n    flexGrow: 1,\n  },\n  inputRoot: {\n    flexWrap: 'wrap',\n  },\n  popper: {\n    zIndex: muiZIndex.tooltip + 100,\n  },\n});\n\nconst renderItem = (option: Option, state: Object): React.Node => {\n  if (option.type && option.type === 'separator') {\n    return (\n      <ListItem\n        divider\n        disableGutters\n        component={'div'}\n        style={styles.listItem}\n      />\n    );\n  }\n  return (\n    <ListItem component={'div'} style={styles.listItem}>\n      {option.renderIcon && <ListItemIcon>{option.renderIcon()}</ListItemIcon>}\n      {option.value}\n    </ListItem>\n  );\n};\n\nconst isOptionDisabled = (option: Option) =>\n  option.type === 'separator' ? true : false;\n\nconst filterFunction = (\n  options: DataSource,\n  state: Object,\n  value: string\n): DataSource => {\n  const lowercaseInputValue = value.toLowerCase();\n  const optionList = options.filter(option => {\n    if (option.type === 'separator') return true;\n    if (!option.text) return true;\n    return option.text.toLowerCase().indexOf(lowercaseInputValue) !== -1;\n  });\n\n  if (\n    !optionList.filter(option => option.type !== 'separator' && option.value)\n      .length\n  )\n    return [];\n\n  // Remove divider(s) if they are at the start or end of array\n  while (\n    optionList[optionList.length - 1] !== undefined &&\n    optionList[optionList.length - 1].type !== undefined\n  )\n    optionList.pop();\n  while (optionList[0] !== undefined && optionList[0].type !== undefined)\n    optionList.shift();\n\n  return optionList;\n};\n\nconst handleChange = (\n  event: SyntheticKeyboardEvent<HTMLInputElement>,\n  option: Option,\n  props: Props\n): void => {\n  if (option.type !== 'separator') {\n    if (option.onClick) option.onClick();\n    else {\n      props.onChoose\n        ? props.onChoose(option.value)\n        : props.onChange(option.value);\n      if (props.onRequestClose) props.onRequestClose();\n    }\n  }\n};\n\nconst getDefaultStylingProps = (\n  params: Object,\n  value: string,\n  props: Props\n): Object => {\n  const { InputProps, inputProps, InputLabelProps, ...other } = params;\n  return {\n    ...other,\n    InputProps: {\n      ...InputProps,\n      className: null,\n      endAdornment: null,\n    },\n    inputProps: {\n      ...inputProps,\n      className: null,\n      disabled: props.disabled,\n      onKeyDown: (event: SyntheticKeyboardEvent<HTMLInputElement>): void => {\n        if (event.key === 'Escape' && props.onRequestClose)\n          props.onRequestClose();\n      },\n    },\n  };\n};\n\nconst getOptionLabel = (option: Option, value: string): string =>\n  option.value ? option.value : value;\n\nexport default React.forwardRef<Props, SemiControlledAutoCompleteInterface>(\n  function SemiControlledAutoComplete(props: Props, ref) {\n    const input = React.useRef((null: ?HTMLInputElement));\n    const [inputValue, setInputValue] = useState((null: string | null));\n    const [isMenuOpen, setIsMenuOpen] = useState(false);\n    const classes = useStyles();\n\n    React.useImperativeHandle(ref, () => ({\n      focus: () => {\n        if (input.current) input.current.focus();\n      },\n      forceInputValueTo: (newValue: string) => {\n        if (inputValue !== null) setInputValue(newValue);\n      },\n    }));\n\n    const currentInputValue = inputValue !== null ? inputValue : props.value;\n\n    const helperText = props.helperMarkdownText ? (\n      <MarkdownText source={props.helperMarkdownText} />\n    ) : null;\n\n    const handleInputChange = (\n      event: SyntheticKeyboardEvent<HTMLInputElement>,\n      value: string,\n      reason: string\n    ): void => {\n      setInputValue(value);\n      if (!isMenuOpen) setIsMenuOpen(true);\n    };\n\n    return (\n      <I18n>\n        {({ i18n }) => (\n          <Autocomplete\n            freeSolo\n            classes={classes}\n            onChange={(\n              event: SyntheticKeyboardEvent<HTMLInputElement>,\n              option: Option | null\n            ) => {\n              if (option !== null) {\n                handleChange(event, option, props);\n                setIsMenuOpen(false);\n              }\n            }}\n            open={isMenuOpen}\n            style={styles.container}\n            inputValue={currentInputValue}\n            value={currentInputValue}\n            onInputChange={handleInputChange}\n            options={props.dataSource}\n            renderOption={renderItem}\n            getOptionDisabled={isOptionDisabled}\n            ListboxProps={{\n              // We need to stop the propagation since ClickAwayListener of InlinePopover does not\n              // recognise listbox as a part of Autocomplete, which is fair since it's in a different DOM tree.\n              // We have basically killed these events completely by using stopImmediatePropagation() since Portals dont\n              // stop propagation by simply using stopPropagation(), more about this issue https://github.com/facebook/react/issues/11387\n              // Material-UI has issues regarding this too, https://github.com/mui-org/material-ui/issues/18586.\n              // This change was implemented in this PR https://github.com/4ian/GDevelop/pull/1586,\n              // which is meant to solve this issue, https://github.com/4ian/GDevelop/issues/1562\n              // Important takeaway: Never try to catch these events, our underlying assumption is that we don't need these events\n              // anymore after selection of option. Stopping propagation of events is never a good idea,\n              // but this is meant to be a hack and not a proper solution.\n              onClick: (event: SyntheticMouseEvent<HTMLUListElement>) => {\n                event.nativeEvent.stopImmediatePropagation();\n              },\n              onTouchEnd: (event: SyntheticTouchEvent<HTMLUListElement>) => {\n                event.nativeEvent.stopImmediatePropagation();\n              },\n            }}\n            getOptionLabel={(option: Option) =>\n              getOptionLabel(option, currentInputValue)\n            }\n            filterOptions={(options: DataSource, state) =>\n              filterFunction(options, state, currentInputValue)\n            }\n            renderInput={params => {\n              const {\n                InputProps,\n                inputProps,\n                ...other\n              } = getDefaultStylingProps(params, currentInputValue, props);\n              return (\n                <TextField\n                  InputProps={{\n                    ...InputProps,\n                    placeholder:\n                      typeof props.hintText === 'string'\n                        ? props.hintText\n                        : i18n._(props.hintText),\n                  }}\n                  inputProps={{\n                    ...inputProps,\n                    onFocus: (\n                      event: SyntheticFocusEvent<HTMLInputElement>\n                    ): void => {\n                      setIsMenuOpen(true);\n                      if (input.current)\n                        input.current.selectionStart =\n                          input.current.value.length;\n                    },\n                    onBlur: (\n                      event: SyntheticFocusEvent<HTMLInputElement>\n                    ): void => {\n                      setInputValue(null);\n                      setIsMenuOpen(false);\n                      props.onChange(event.currentTarget.value);\n                      if (props.onBlur) props.onBlur(event);\n                    },\n                    onMouseDown: (\n                      event: SyntheticMouseEvent<HTMLInputElement>\n                    ): void => {\n                      if (input.current && !input.current.value.length)\n                        setIsMenuOpen(!isMenuOpen);\n                    },\n                  }}\n                  {...other}\n                  {...computeTextFieldStyleProps(props)}\n                  style={props.textFieldStyle}\n                  label={props.floatingLabelText}\n                  inputRef={input}\n                  disabled={props.disabled}\n                  error={!!props.errorText}\n                  helperText={helperText || props.errorText}\n                  fullWidth={props.fullWidth}\n                />\n              );\n            }}\n          />\n        )}\n      </I18n>\n    );\n  }\n);\n","// @flow\nimport * as React from 'react';\nimport MUITable from '@material-ui/core/Table';\nimport MUITableBody from '@material-ui/core/TableBody';\nimport MUITableCell from '@material-ui/core/TableCell';\nimport MUITableHead from '@material-ui/core/TableHead';\nimport MUITableRow from '@material-ui/core/TableRow';\n\ntype TableProps = {|\n  children: React.Node, // Should be TableHeader, TableBody or TableFooter\n|};\n\n/**\n * A Table based on Material-UI Table.\n * See https://material-ui.com/components/tables/\n */\nexport class Table extends React.Component<TableProps, {||}> {\n  render() {\n    return <MUITable size=\"small\" {...this.props} />;\n  }\n}\n\ntype TableBodyProps = {|\n  children?: React.Node, // Should be TableRow\n|};\n\n/**\n * A TableBody based on Material-UI TableBody.\n */\nexport class TableBody extends React.Component<TableBodyProps, {||}> {\n  render() {\n    return <MUITableBody {...this.props} />;\n  }\n}\n\ntype TableHeaderProps = {|\n  children: React.Node, // Should be a TableRow\n|};\n\n/**\n * A TableHeader based on Material-UI TableHead.\n */\nexport class TableHeader extends React.Component<TableHeaderProps, {||}> {\n  render() {\n    return <MUITableHead {...this.props} />;\n  }\n}\n\ntype TableHeaderColumnProps = {|\n  children?: React.Node, // Text of the column\n  style?: {|\n    textAlign: 'left' | 'right',\n    paddingRight: number,\n  |},\n|};\n\n/**\n * A TableHeaderColumn based on Material-UI TableCell.\n */\nexport class TableHeaderColumn extends React.Component<\n  TableHeaderColumnProps,\n  {||}\n> {\n  render() {\n    return <MUITableCell {...this.props} />;\n  }\n}\n\ntype TableRowProps = {|\n  children: React.Node,\n  style?: {|\n    backgroundColor: string,\n  |},\n|};\n\n/**\n * A TableRow based on Material-UI TableRow.\n */\nexport class TableRow extends React.Component<TableRowProps, {||}> {\n  render() {\n    return <MUITableRow {...this.props} />;\n  }\n}\n\ntype TableRowColumnProps = {|\n  children?: React.Node, // Content for the cell\n  style?: {|\n    width?: number,\n    paddingLeft?: number,\n    paddingRight?: number,\n    textAlign?: string,\n  |},\n|};\n\n/**\n * A TableRowColumn based on Material-UI TableRowColumn.\n */\nexport class TableRowColumn extends React.Component<TableRowColumnProps, {||}> {\n  render() {\n    return <MUITableCell {...this.props} />;\n  }\n}\n","import React, { Component } from 'react';\nimport ThemeConsumer from './Theme/ThemeConsumer';\nimport Text from './Text';\n\nconst style = {\n  display: 'flex',\n  alignItems: 'center',\n  paddingLeft: 8,\n  paddingRight: 8,\n};\n\nclass MiniToolbar extends Component {\n  render() {\n    const { justifyContent, smallest } = this.props;\n\n    return (\n      <ThemeConsumer>\n        {muiTheme => (\n          <div\n            style={{\n              ...style,\n              height: smallest ? 34 : 48,\n              backgroundColor: muiTheme.toolbar.backgroundColor,\n              justifyContent,\n            }}\n          >\n            {this.props.children}\n          </div>\n        )}\n      </ThemeConsumer>\n    );\n  }\n}\n\nconst toolbarTextStyle = {\n  marginRight: 5,\n};\n\nexport const MiniToolbarText = ({ children }) => (\n  <Text noShrink style={toolbarTextStyle}>\n    {children}\n  </Text>\n);\n\nexport default MiniToolbar;\n","import RenderedInstance from './RenderedInstance';\nimport * as PIXI from 'pixi.js';\nconst gd = global.gd;\n\n/**\n * Renderer for gd.SpriteObject\n *\n * @extends RenderedInstance\n * @class RenderedSpriteInstance\n * @constructor\n */\nfunction RenderedSpriteInstance(\n  project,\n  layout,\n  instance,\n  associatedObject,\n  pixiContainer,\n  pixiResourcesLoader\n) {\n  RenderedInstance.call(\n    this,\n    project,\n    layout,\n    instance,\n    associatedObject,\n    pixiContainer,\n    pixiResourcesLoader\n  );\n\n  this._renderedAnimation = 0;\n  this._renderedDirection = 0;\n  this._centerX = 0;\n  this._centerY = 0;\n  this._originX = 0;\n  this._originY = 0;\n\n  //Setup the PIXI object:\n  this._pixiObject = new PIXI.Sprite(\n    this._pixiResourcesLoader.getInvalidPIXITexture()\n  );\n  this._pixiContainer.addChild(this._pixiObject);\n  this.updatePIXITexture();\n  this.updatePIXISprite();\n}\nRenderedSpriteInstance.prototype = Object.create(RenderedInstance.prototype);\n\n/**\n * Return a URL for thumbnail of the specified object.\n */\nRenderedSpriteInstance.getThumbnail = function(\n  project,\n  resourcesLoader,\n  object\n) {\n  const spriteObject = gd.asSpriteObject(object);\n\n  if (\n    spriteObject.getAnimationsCount() > 0 &&\n    spriteObject.getAnimation(0).getDirectionsCount() > 0 &&\n    spriteObject\n      .getAnimation(0)\n      .getDirection(0)\n      .getSpritesCount() > 0\n  ) {\n    const imageName = spriteObject\n      .getAnimation(0)\n      .getDirection(0)\n      .getSprite(0)\n      .getImageName();\n    return resourcesLoader.getResourceFullUrl(project, imageName);\n  }\n\n  return 'res/unknown32.png';\n};\n\nRenderedSpriteInstance.prototype.updatePIXISprite = function() {\n  this._pixiObject.anchor.x =\n    this._centerX / this._pixiObject.texture.frame.width;\n  this._pixiObject.anchor.y =\n    this._centerY / this._pixiObject.texture.frame.height;\n  this._pixiObject.rotation = this._shouldNotRotate\n    ? 0\n    : RenderedInstance.toRad(this._instance.getAngle());\n  if (this._instance.hasCustomSize()) {\n    this._pixiObject.scale.x =\n      this._instance.getCustomWidth() / this._pixiObject.texture.frame.width;\n    this._pixiObject.scale.y =\n      this._instance.getCustomHeight() / this._pixiObject.texture.frame.height;\n  } else {\n    this._pixiObject.scale.x = 1;\n    this._pixiObject.scale.y = 1;\n  }\n  this._pixiObject.position.x =\n    this._instance.getX() +\n    (this._centerX - this._originX) * Math.abs(this._pixiObject.scale.x);\n  this._pixiObject.position.y =\n    this._instance.getY() +\n    (this._centerY - this._originY) * Math.abs(this._pixiObject.scale.y);\n};\n\nRenderedSpriteInstance.prototype.updateSprite = function() {\n  this._sprite = null;\n  this._shouldNotRotate = false;\n\n  const spriteObject = gd.asSpriteObject(this._associatedObject);\n  if (spriteObject.hasNoAnimations()) return false;\n\n  this._renderedAnimation = this._instance.getRawFloatProperty('animation');\n  if (this._renderedAnimation >= spriteObject.getAnimationsCount())\n    this._renderedAnimation = 0;\n\n  const animation = spriteObject.getAnimation(this._renderedAnimation);\n  if (animation.hasNoDirections()) return false;\n\n  this._renderedDirection = 0;\n  if (animation.useMultipleDirections()) {\n    let normalizedAngle = Math.floor(this._instance.getAngle()) % 360;\n    if (normalizedAngle < 0) normalizedAngle += 360;\n\n    this._renderedDirection = Math.round(normalizedAngle / 45) % 8;\n  }\n\n  if (this._renderedDirection >= animation.getDirectionsCount())\n    this._renderedDirection = 0;\n\n  const direction = animation.getDirection(this._renderedDirection);\n\n  if (direction.getSpritesCount() === 0) return false;\n\n  this._shouldNotRotate = animation.useMultipleDirections();\n  this._sprite = direction.getSprite(0);\n  return true;\n};\n\nRenderedSpriteInstance.prototype.updatePIXITexture = function() {\n  this.updateSprite();\n  if (!this._sprite) return;\n\n  this._pixiObject.texture = this._pixiResourcesLoader.getPIXITexture(\n    this._project,\n    this._sprite.getImageName()\n  );\n\n  const origin = this._sprite.getOrigin();\n  this._originX = origin.getX();\n  this._originY = origin.getY();\n\n  if (this._sprite.isDefaultCenterPoint()) {\n    if (this._pixiObject.texture.noFrame) {\n      var that = this;\n      // We might have to wait for the texture to load\n      this._pixiObject.texture.on('update', function() {\n        that._centerX = that._pixiObject.texture.width / 2;\n        that._centerY = that._pixiObject.texture.height / 2;\n        that._pixiObject.texture.off('update', this);\n      });\n    } else {\n      this._centerX = this._pixiObject.texture.width / 2;\n      this._centerY = this._pixiObject.texture.height / 2;\n    }\n  } else {\n    const center = this._sprite.getCenter();\n    this._centerX = center.getX();\n    this._centerY = center.getY();\n  }\n};\n\nRenderedSpriteInstance.prototype.update = function() {\n  const animation = this._instance.getRawFloatProperty('animation');\n  if (this._renderedAnimation !== animation) this.updatePIXITexture();\n\n  this.updatePIXISprite();\n};\n\nRenderedSpriteInstance.prototype.getOriginX = function() {\n  if (!this._sprite || !this._pixiObject) return 0;\n\n  return this._sprite.getOrigin().getX() * this._pixiObject.scale.x;\n};\n\nRenderedSpriteInstance.prototype.getOriginY = function() {\n  if (!this._sprite || !this._pixiObject) return 0;\n\n  return this._sprite.getOrigin().getY() * this._pixiObject.scale.y;\n};\n\nRenderedSpriteInstance.prototype.getDefaultWidth = function() {\n  return Math.abs(this._pixiObject.width);\n};\n\nRenderedSpriteInstance.prototype.getDefaultHeight = function() {\n  return Math.abs(this._pixiObject.height);\n};\n\nexport default RenderedSpriteInstance;\n","import RenderedInstance from './RenderedInstance';\nimport * as PIXI from 'pixi.js';\nconst gd = global.gd;\n\n/**\n * Renderer for gd.TiledSpriteObject\n *\n * @extends RenderedInstance\n * @class RenderedTiledSpriteInstance\n * @constructor\n */\nfunction RenderedTiledSpriteInstance(\n  project,\n  layout,\n  instance,\n  associatedObject,\n  pixiContainer,\n  pixiResourcesLoader\n) {\n  RenderedInstance.call(\n    this,\n    project,\n    layout,\n    instance,\n    associatedObject,\n    pixiContainer,\n    pixiResourcesLoader\n  );\n\n  //Setup the PIXI object:\n  var tiledSprite = gd.asTiledSpriteObject(associatedObject);\n  this._texture = tiledSprite.getTexture();\n  this._pixiObject = new PIXI.extras.TilingSprite(\n    this._pixiResourcesLoader.getPIXITexture(project, tiledSprite.getTexture()),\n    tiledSprite.getWidth(),\n    tiledSprite.getHeight()\n  );\n  this._pixiObject.anchor.x = 0.5;\n  this._pixiObject.anchor.y = 0.5;\n  this._pixiContainer.addChild(this._pixiObject);\n}\nRenderedTiledSpriteInstance.prototype = Object.create(\n  RenderedInstance.prototype\n);\n\n/**\n * Return a URL for thumbnail of the specified object.\n */\nRenderedTiledSpriteInstance.getThumbnail = function(\n  project,\n  resourcesLoader,\n  object\n) {\n  var tiledSprite = gd.asTiledSpriteObject(object);\n\n  return resourcesLoader.getResourceFullUrl(project, tiledSprite.getTexture());\n};\n\nRenderedTiledSpriteInstance.prototype.update = function() {\n  var tiledSprite = gd.asTiledSpriteObject(this._associatedObject);\n  if (this._instance.hasCustomSize()) {\n    this._pixiObject.width = this._instance.getCustomWidth();\n    this._pixiObject.height = this._instance.getCustomHeight();\n  } else {\n    this._pixiObject.width = tiledSprite.getWidth();\n    this._pixiObject.height = tiledSprite.getHeight();\n  }\n\n  if (this._texture !== tiledSprite.getTexture()) {\n    this._texture = tiledSprite.getTexture();\n    this._pixiObject.texture = this._pixiResourcesLoader.getPIXITexture(\n      this._project,\n      tiledSprite.getTexture()\n    );\n  }\n\n  this._pixiObject.x = this._instance.getX() + this._pixiObject.width / 2;\n  this._pixiObject.y = this._instance.getY() + this._pixiObject.height / 2;\n  this._pixiObject.rotation = RenderedInstance.toRad(this._instance.getAngle());\n};\n\nRenderedTiledSpriteInstance.prototype.getDefaultWidth = function() {\n  var tiledSprite = gd.asTiledSpriteObject(this._associatedObject);\n  return tiledSprite.getWidth();\n};\n\nRenderedTiledSpriteInstance.prototype.getDefaultHeight = function() {\n  var tiledSprite = gd.asTiledSpriteObject(this._associatedObject);\n  return tiledSprite.getHeight();\n};\n\nexport default RenderedTiledSpriteInstance;\n","import RenderedInstance from './RenderedInstance';\nimport * as PIXI from 'pixi.js';\nconst gd = global.gd;\n\n/**\n * Renderer for gd.PanelSpriteObject\n *\n * Heavily inspired from the GDJS PIXI renderer for PanelSprite objects.\n * TODO: Find a way to factor GDJS objects and IDE instances renderers.\n *\n * @extends RenderedInstance\n * @class RenderedPanelSpriteInstance\n * @constructor\n */\nfunction RenderedPanelSpriteInstance(\n  project,\n  layout,\n  instance,\n  associatedObject,\n  pixiContainer,\n  pixiResourcesLoader\n) {\n  RenderedInstance.call(\n    this,\n    project,\n    layout,\n    instance,\n    associatedObject,\n    pixiContainer,\n    pixiResourcesLoader\n  );\n\n  this.makeObjects();\n  this.updateTexture();\n}\nRenderedPanelSpriteInstance.prototype = Object.create(\n  RenderedInstance.prototype\n);\n\nRenderedPanelSpriteInstance.prototype.update = function() {\n  //TODO\n  // if (this._pixiObject.visible && this._wasRendered) {\n  //   this._pixiObject.cacheAsBitmap = true;\n  // }\n  // this._wasRendered = true;\n\n  const panelSprite = gd.asPanelSpriteObject(this._associatedObject);\n  if (panelSprite.isTiled() !== this._tiled) {\n    this.makeObjects();\n  }\n  if (panelSprite.getTexture() !== this._textureName) {\n    this.updateTexture();\n  }\n\n  this.updateAngle();\n  this.updatePosition();\n\n  const oldWidth = this._width;\n  const oldHeight = this._height;\n  if (this._instance.hasCustomSize()) {\n    this._width = this._instance.getCustomWidth();\n    this._height = this._instance.getCustomHeight();\n  } else {\n    var tiledSprite = gd.asPanelSpriteObject(this._associatedObject);\n    this._width = tiledSprite.getWidth();\n    this._height = tiledSprite.getHeight();\n  }\n\n  if (this._width !== oldWidth || this._height !== oldHeight) {\n    this.updateWidthHeight();\n  }\n};\n\nRenderedPanelSpriteInstance.prototype.makeObjects = function() {\n  const panelSprite = gd.asPanelSpriteObject(this._associatedObject);\n  this._textureName = panelSprite.getTexture();\n  const texture = this._pixiResourcesLoader.getPIXITexture(\n    this._project,\n    this._textureName\n  );\n\n  this._tiled = panelSprite.isTiled();\n  var StretchedSprite = !this._tiled ? PIXI.Sprite : PIXI.extras.TilingSprite;\n\n  if (!this._pixiObject) {\n    this._pixiObject = new PIXI.Container();\n    this._pixiContainer.addChild(this._pixiObject);\n  }\n  this._centerSprite = new StretchedSprite(new PIXI.Texture(texture));\n  this._borderSprites = [\n    new StretchedSprite(new PIXI.Texture(texture)), //Right\n    new PIXI.Sprite(texture), //Top-Right\n    new StretchedSprite(new PIXI.Texture(texture)), //Top\n    new PIXI.Sprite(texture), //Top-Left\n    new StretchedSprite(new PIXI.Texture(texture)), //Left\n    new PIXI.Sprite(texture), //Bottom-Left\n    new StretchedSprite(new PIXI.Texture(texture)), //Bottom\n    new PIXI.Sprite(texture), //Bottom-Right\n  ];\n\n  this._pixiObject.removeChildren();\n  this._pixiObject.addChild(this._centerSprite);\n  for (var i = 0; i < this._borderSprites.length; ++i) {\n    this._pixiObject.addChild(this._borderSprites[i]);\n  }\n};\n\nRenderedPanelSpriteInstance.prototype.updateAngle = function() {\n  this._pixiObject.rotation = RenderedInstance.toRad(this._instance.getAngle());\n};\n\nRenderedPanelSpriteInstance.prototype.updatePosition = function() {\n  this._pixiObject.x = this._instance.getX() + this._width / 2;\n  this._pixiObject.y = this._instance.getY() + this._height / 2;\n};\n\nRenderedPanelSpriteInstance.prototype._updateLocalPositions = function() {\n  const panelSprite = gd.asPanelSpriteObject(this._associatedObject);\n\n  this._centerSprite.position.x = panelSprite.getLeftMargin();\n  this._centerSprite.position.y = panelSprite.getTopMargin();\n\n  //Right\n  this._borderSprites[0].position.x =\n    this._width - panelSprite.getRightMargin();\n  this._borderSprites[0].position.y = panelSprite.getTopMargin();\n\n  //Top-right\n  this._borderSprites[1].position.x =\n    this._width - this._borderSprites[1].width;\n  this._borderSprites[1].position.y = 0;\n\n  //Top\n  this._borderSprites[2].position.x = panelSprite.getLeftMargin();\n  this._borderSprites[2].position.y = 0;\n\n  //Top-Left\n  this._borderSprites[3].position.x = 0;\n  this._borderSprites[3].position.y = 0;\n\n  //Left\n  this._borderSprites[4].position.x = 0;\n  this._borderSprites[4].position.y = panelSprite.getTopMargin();\n\n  //Bottom-Left\n  this._borderSprites[5].position.x = 0;\n  this._borderSprites[5].position.y =\n    this._height - this._borderSprites[5].height;\n\n  //Bottom\n  this._borderSprites[6].position.x = panelSprite.getLeftMargin();\n  this._borderSprites[6].position.y =\n    this._height - panelSprite.getBottomMargin();\n\n  //Bottom-Right\n  this._borderSprites[7].position.x =\n    this._width - this._borderSprites[7].width;\n  this._borderSprites[7].position.y =\n    this._height - this._borderSprites[7].height;\n};\n\nRenderedPanelSpriteInstance.prototype._updateSpritesAndTexturesSize = function() {\n  const panelSprite = gd.asPanelSpriteObject(this._associatedObject);\n  this._centerSprite.width = Math.max(\n    this._width - panelSprite.getRightMargin() - panelSprite.getLeftMargin(),\n    0\n  );\n  this._centerSprite.height = Math.max(\n    this._height - panelSprite.getTopMargin() - panelSprite.getBottomMargin(),\n    0\n  );\n\n  //Right\n  this._borderSprites[0].width = panelSprite.getRightMargin();\n  this._borderSprites[0].height = Math.max(\n    this._height - panelSprite.getTopMargin() - panelSprite.getBottomMargin(),\n    0\n  );\n\n  //Top\n  this._borderSprites[2].height = panelSprite.getTopMargin();\n  this._borderSprites[2].width = Math.max(\n    this._width - panelSprite.getRightMargin() - panelSprite.getLeftMargin(),\n    0\n  );\n\n  //Left\n  this._borderSprites[4].width = panelSprite.getLeftMargin();\n  this._borderSprites[4].height = Math.max(\n    this._height - panelSprite.getTopMargin() - panelSprite.getBottomMargin(),\n    0\n  );\n\n  //Bottom\n  this._borderSprites[6].height = panelSprite.getBottomMargin();\n  this._borderSprites[6].width = Math.max(\n    this._width - panelSprite.getRightMargin() - panelSprite.getLeftMargin(),\n    0\n  );\n\n  this._wasRendered = true;\n  this._pixiObject.cacheAsBitmap = false;\n};\n\nRenderedPanelSpriteInstance.prototype.updateTexture = function() {\n  const panelSprite = gd.asPanelSpriteObject(this._associatedObject);\n  this._textureName = panelSprite.getTexture();\n  const texture = this._pixiResourcesLoader.getPIXITexture(\n    this._project,\n    this._textureName\n  );\n\n  if (texture.noFrame) {\n    //Post pone texture update if texture is not loaded\n    const renderer = this;\n    texture.on('update', function() {\n      renderer.updateTexture();\n      texture.off('update', this);\n    });\n\n    return;\n  }\n\n  console.log('Updating PanelSprite instance texture');\n  function makeInsideTexture(rect) {\n    if (rect.width < 0) rect.width = 0;\n    if (rect.height < 0) rect.height = 0;\n    if (rect.x < 0) rect.x = 0;\n    if (rect.y < 0) rect.y = 0;\n    if (rect.x > texture.width) rect.x = texture.width;\n    if (rect.y > texture.height) rect.y = texture.height;\n    if (rect.x + rect.width > texture.width)\n      rect.width = texture.width - rect.x;\n    if (rect.y + rect.height > texture.height)\n      rect.height = texture.height - rect.y;\n\n    return rect;\n  }\n\n  this._centerSprite.texture = new PIXI.Texture(\n    texture,\n    makeInsideTexture(\n      new PIXI.Rectangle(\n        panelSprite.getLeftMargin(),\n        panelSprite.getTopMargin(),\n        texture.width -\n          panelSprite.getLeftMargin() -\n          panelSprite.getRightMargin(),\n        texture.height -\n          panelSprite.getTopMargin() -\n          panelSprite.getBottomMargin()\n      )\n    )\n  );\n\n  //Right\n  this._borderSprites[0].texture = new PIXI.Texture(\n    texture,\n    makeInsideTexture(\n      new PIXI.Rectangle(\n        texture.width - panelSprite.getRightMargin(),\n        panelSprite.getTopMargin(),\n        panelSprite.getRightMargin(),\n        texture.height -\n          panelSprite.getTopMargin() -\n          panelSprite.getBottomMargin()\n      )\n    )\n  );\n\n  //Top-right\n  this._borderSprites[1].texture = new PIXI.Texture(\n    texture,\n    makeInsideTexture(\n      new PIXI.Rectangle(\n        this._borderSprites[1].width - panelSprite.getRightMargin(),\n        0,\n        panelSprite.getRightMargin(),\n        panelSprite.getTopMargin()\n      )\n    )\n  );\n\n  //Top\n  this._borderSprites[2].texture = new PIXI.Texture(\n    texture,\n    makeInsideTexture(\n      new PIXI.Rectangle(\n        panelSprite.getLeftMargin(),\n        0,\n        texture.width -\n          panelSprite.getLeftMargin() -\n          panelSprite.getRightMargin(),\n        panelSprite.getTopMargin()\n      )\n    )\n  );\n\n  //Top-Left\n  this._borderSprites[3].texture = new PIXI.Texture(\n    texture,\n    makeInsideTexture(\n      new PIXI.Rectangle(\n        0,\n        0,\n        panelSprite.getLeftMargin(),\n        panelSprite.getTopMargin()\n      )\n    )\n  );\n\n  //Left\n  this._borderSprites[4].texture = new PIXI.Texture(\n    texture,\n    makeInsideTexture(\n      new PIXI.Rectangle(\n        0,\n        panelSprite.getTopMargin(),\n        panelSprite.getLeftMargin(),\n        texture.height -\n          panelSprite.getTopMargin() -\n          panelSprite.getBottomMargin()\n      )\n    )\n  );\n\n  //Bottom-Left\n  this._borderSprites[5].texture = new PIXI.Texture(\n    texture,\n    makeInsideTexture(\n      new PIXI.Rectangle(\n        0,\n        this._borderSprites[5].height - panelSprite.getBottomMargin(),\n        panelSprite.getLeftMargin(),\n        panelSprite.getBottomMargin()\n      )\n    )\n  );\n\n  //Bottom\n  this._borderSprites[6].texture = new PIXI.Texture(\n    texture,\n    makeInsideTexture(\n      new PIXI.Rectangle(\n        panelSprite.getLeftMargin(),\n        texture.height - panelSprite.getBottomMargin(),\n        texture.width -\n          panelSprite.getLeftMargin() -\n          panelSprite.getRightMargin(),\n        panelSprite.getBottomMargin()\n      )\n    )\n  );\n\n  //Bottom-Right\n  this._borderSprites[7].texture = new PIXI.Texture(\n    texture,\n    makeInsideTexture(\n      new PIXI.Rectangle(\n        this._borderSprites[7].width - panelSprite.getRightMargin(),\n        this._borderSprites[7].height - panelSprite.getBottomMargin(),\n        panelSprite.getRightMargin(),\n        panelSprite.getBottomMargin()\n      )\n    )\n  );\n\n  this._updateSpritesAndTexturesSize();\n  this._updateLocalPositions();\n  this.updatePosition();\n};\n\nRenderedPanelSpriteInstance.prototype.updateWidthHeight = function() {\n  this._pixiObject.pivot.x = this._width / 2;\n  this._pixiObject.pivot.y = this._height / 2;\n  this._updateSpritesAndTexturesSize();\n  this._updateLocalPositions();\n  this.updatePosition();\n};\n\nRenderedPanelSpriteInstance.prototype.getDefaultWidth = function() {\n  const panelSprite = gd.asPanelSpriteObject(this._associatedObject);\n  return panelSprite.getWidth();\n};\n\nRenderedPanelSpriteInstance.prototype.getDefaultHeight = function() {\n  const panelSprite = gd.asPanelSpriteObject(this._associatedObject);\n  return panelSprite.getHeight();\n};\n\n/**\n * Return a URL for thumbnail of the specified object.\n */\nRenderedPanelSpriteInstance.getThumbnail = function(\n  project,\n  resourcesLoader,\n  object\n) {\n  const panelSprite = gd.asPanelSpriteObject(object);\n\n  return resourcesLoader.getResourceFullUrl(project, panelSprite.getTexture());\n};\n\nexport default RenderedPanelSpriteInstance;\n","import RenderedInstance from './RenderedInstance';\nimport * as PIXI from 'pixi.js';\nconst gd = global.gd;\n\n/**\n * Renderer for a Text object.\n *\n * @extends RenderedInstance\n * @class RenderedTextInstance\n * @constructor\n */\nfunction RenderedTextInstance(\n  project,\n  layout,\n  instance,\n  associatedObject,\n  pixiContainer,\n  pixiResourcesLoader\n) {\n  RenderedInstance.call(\n    this,\n    project,\n    layout,\n    instance,\n    associatedObject,\n    pixiContainer,\n    pixiResourcesLoader\n  );\n\n  //Setup the PIXI object:\n  const textObject = gd.asTextObject(this._associatedObject);\n  this._pixiObject = new PIXI.Text(' ', { align: 'left' });\n  this._pixiObject.anchor.x = 0.5;\n  this._pixiObject.anchor.y = 0.5;\n  this._pixiContainer.addChild(this._pixiObject);\n  this._styleFontDirty = true;\n  this._fontFamily = this._pixiResourcesLoader.getFontFamily(\n    this._project,\n    textObject.getFontName()\n  );\n  this.update();\n}\nRenderedTextInstance.prototype = Object.create(RenderedInstance.prototype);\n\n/**\n * Return a URL for thumbnail of the specified object.\n */\nRenderedTextInstance.getThumbnail = function(project, resourcesLoader, object) {\n  return 'CppPlatform/Extensions/texticon24.png';\n};\n\nRenderedTextInstance.prototype.update = function() {\n  const textObject = gd.asTextObject(this._associatedObject);\n  this._pixiObject.text = textObject.getString();\n\n  //Update style, only if needed to avoid destroying text rendering performances\n  if (\n    textObject.isItalic() !== this._isItalic ||\n    textObject.isBold() !== this._isBold ||\n    textObject.getCharacterSize() !== this._characterSize ||\n    this._instance.hasCustomSize() !== this._wrapping ||\n    (this._instance.getCustomWidth() !== this._wrappingWidth && this._wrapping)\n  ) {\n    this._isItalic = textObject.isItalic();\n    this._isBold = textObject.isBold();\n    this._characterSize = textObject.getCharacterSize();\n    this._wrapping = this._instance.hasCustomSize();\n    this._wrappingWidth = this._instance.getCustomWidth();\n    this._styleFontDirty = true;\n  }\n\n  if (this._fontName !== textObject.getFontName()) {\n    //Avoid calling loadFontFamily if the font didn't changed.\n    this._fontName = textObject.getFontName();\n    this._pixiResourcesLoader\n      .loadFontFamily(this._project, textObject.getFontName())\n      .then(fontFamily => {\n        // Once the font is loaded, we can use the given fontFamily.\n        this._fontFamily = fontFamily;\n        this._styleFontDirty = true;\n      })\n      .catch(err => {\n        // Ignore errors\n        console.warn('Unable to load font family', err);\n      });\n  }\n\n  if (this._styleFontDirty) {\n    this._pixiObject.style.fontFamily = this._fontFamily || 'Arial';\n    this._pixiObject.style.fontSize = Math.max(1, this._characterSize) + 'px';\n    this._pixiObject.style.fontStyle = this._isItalic ? 'italic' : 'normal';\n    this._pixiObject.style.fontWeight = this._isBold ? 'bold' : 'normal';\n    this._pixiObject.style.wordWrap = this._wrapping;\n    this._pixiObject.style.wordWrapWidth =\n      this._wrappingWidth <= 1 ? 1 : this._wrappingWidth;\n    this._pixiObject.style.breakWords = true;\n\n    // Manually ask the PIXI object to re-render as we changed a style property\n    // see http://www.html5gamedevs.com/topic/16924-change-text-style-post-render/\n    this._pixiObject.dirty = true;\n    this._styleFontDirty = false;\n  }\n\n  if (\n    textObject.getColorR() !== this._colorR ||\n    textObject.getColorG() !== this._colorG ||\n    textObject.getColorB() !== this._colorB\n  ) {\n    this._colorR = textObject.getColorR();\n    this._colorG = textObject.getColorG();\n    this._colorB = textObject.getColorB();\n    this._pixiObject.style.fill =\n      'rgb(' + this._colorR + ',' + this._colorG + ',' + this._colorB + ')';\n\n    // Manually ask the PIXI object to re-render as we changed a style property\n    // see http://www.html5gamedevs.com/topic/16924-change-text-style-post-render/\n    this._pixiObject.dirty = true;\n  }\n\n  this._pixiObject.position.x =\n    this._instance.getX() + this._pixiObject.width / 2;\n  this._pixiObject.position.y =\n    this._instance.getY() + this._pixiObject.height / 2;\n  this._pixiObject.rotation = RenderedInstance.toRad(this._instance.getAngle());\n};\n\nRenderedTextInstance.prototype.getDefaultWidth = function() {\n  return this._pixiObject.width;\n};\n\nRenderedTextInstance.prototype.getDefaultHeight = function() {\n  return this._pixiObject.height;\n};\n\nexport default RenderedTextInstance;\n","import makeRenderer from './RenderedIconInstance';\nexport default makeRenderer('CppPlatform/Extensions/primitivedrawingicon.png');\n","import makeRenderer from './RenderedIconInstance';\nexport default makeRenderer('CppPlatform/Extensions/textentry.png');\n","import RenderedInstance from './RenderedInstance';\nimport * as PIXI from 'pixi.js';\nimport { rgbToHexNumber } from '../../Utils/ColorTransformer';\nconst gd = global.gd;\n\n/**\n * Renderer for an ParticleEmitter object.\n *\n * @extends RenderedInstance\n * @class RenderedParticleEmitterInstance\n * @constructor\n */\nfunction RenderedParticleEmitterInstance(\n  project,\n  layout,\n  instance,\n  associatedObject,\n  pixiContainer,\n  pixiResourcesLoader\n) {\n  RenderedInstance.call(\n    this,\n    project,\n    layout,\n    instance,\n    associatedObject,\n    pixiContainer,\n    pixiResourcesLoader\n  );\n\n  this._pixiObject = new PIXI.Graphics();\n  this._pixiContainer.addChild(this._pixiObject);\n  this.updateGraphics();\n}\nRenderedParticleEmitterInstance.prototype = Object.create(\n  RenderedInstance.prototype\n);\n\n/**\n * Return a URL for thumbnail of the specified object.\n */\nRenderedParticleEmitterInstance.getThumbnail = function(\n  project,\n  resourcesLoader,\n  object\n) {\n  return 'CppPlatform/Extensions/particleSystemicon.png';\n};\n\nRenderedParticleEmitterInstance.prototype.update = function() {\n  this._pixiObject.position.x = this._instance.getX();\n  this._pixiObject.position.y = this._instance.getY();\n  this.updateGraphics();\n};\n\n/**\n * Render the preview of the particle emitter according to the setup of the object\n */\nRenderedParticleEmitterInstance.prototype.updateGraphics = function() {\n  const particleEmitterObject = gd.asParticleEmitterObject(\n    this._associatedObject\n  );\n\n  this._pixiObject.clear();\n\n  const emitterAngle = (this._instance.getAngle() / 180) * 3.14159;\n  const sprayConeAngle = particleEmitterObject.getConeSprayAngle();\n  const line1Angle = emitterAngle - (sprayConeAngle / 2.0 / 180.0) * 3.14159;\n  const line2Angle = emitterAngle + (sprayConeAngle / 2.0 / 180.0) * 3.14159;\n  const length = 64;\n\n  this._pixiObject.beginFill(0, 0);\n  this._pixiObject.lineStyle(\n    3,\n    rgbToHexNumber(\n      particleEmitterObject.getParticleRed2(),\n      particleEmitterObject.getParticleGreen2(),\n      particleEmitterObject.getParticleBlue2()\n    ),\n    1\n  );\n  this._pixiObject.moveTo(0, 0);\n  this._pixiObject.lineTo(\n    Math.cos(line1Angle) * length,\n    Math.sin(line1Angle) * length\n  );\n  this._pixiObject.moveTo(0, 0);\n  this._pixiObject.lineTo(\n    Math.cos(line2Angle) * length,\n    Math.sin(line2Angle) * length\n  );\n  this._pixiObject.endFill();\n\n  this._pixiObject.lineStyle(0, 0x000000, 1);\n  this._pixiObject.beginFill(\n    rgbToHexNumber(\n      particleEmitterObject.getParticleRed1(),\n      particleEmitterObject.getParticleGreen1(),\n      particleEmitterObject.getParticleBlue1()\n    )\n  );\n  this._pixiObject.drawCircle(0, 0, 8);\n  this._pixiObject.endFill();\n};\n\nRenderedParticleEmitterInstance.prototype.getDefaultWidth = function() {\n  return 128;\n};\n\nRenderedParticleEmitterInstance.prototype.getDefaultHeight = function() {\n  return 128;\n};\n\nRenderedParticleEmitterInstance.prototype.getOriginX = function() {\n  return 64;\n};\n\nRenderedParticleEmitterInstance.prototype.getOriginY = function() {\n  return 64;\n};\n\nexport default RenderedParticleEmitterInstance;\n","import makeRenderer from './RenderedIconInstance';\nexport default makeRenderer('JsPlatform/Extensions/skeletonicon24.png');\n","import FontFaceObserver from 'fontfaceobserver';\n\n/**\n * A simple wrapper around FontFace (if supported) or @font-face + FontFaceObserver\n * to load a font from an url and be notified when loading is done (or failed).\n * @param {*} fontFamily\n * @param {*} src\n * @param {*} descriptors\n */\nexport const loadFontFace = (fontFamily, src, descriptors = {}) => {\n  if (typeof FontFace !== 'undefined') {\n    // Load the given font using CSS Font Loading API.\n    const fontFace = new FontFace(fontFamily, src, descriptors);\n    document.fonts.add(fontFace);\n    return fontFace.load();\n  } else {\n    // Add @font-face and use FontFaceObserver to be notified when the\n    // font is ready.\n    const newStyle = document.createElement('style');\n    newStyle.appendChild(\n      document.createTextNode(\n        `@font-face {\n          font-family: ${fontFamily};\n          src: ${src};\n        }`\n      )\n    );\n\n    document.head.appendChild(newStyle);\n    return new FontFaceObserver(fontFamily, descriptors).load().catch(err => {\n      console.warn(`Error while loading font ${fontFamily}`, err);\n\n      throw err;\n    });\n  }\n};\n","// @flow\nimport { Trans } from '@lingui/macro';\nimport { type ParameterInlineRendererProps } from './ParameterInlineRenderer.flow';\nimport React, { Component } from 'react';\nimport RaisedButton from '../../UI/RaisedButton';\nimport { Line, Column } from '../../UI/Grid';\nimport {\n  type ParameterFieldProps,\n  getParameterValueOrDefault,\n} from './ParameterFieldCommons';\nimport { focusButton } from '../../UI/Button';\nimport Text from '../../UI/Text';\n\nconst styles = {\n  button: {\n    margin: 5,\n  },\n  description: {\n    display: 'inline-block',\n    marginRight: 5,\n  },\n};\n\nexport default class YesNoField extends Component<ParameterFieldProps, void> {\n  _yesButton = React.createRef<RaisedButton>();\n\n  focus() {\n    focusButton(this._yesButton);\n  }\n\n  render() {\n    const { parameterMetadata, value } = this.props;\n    const description = parameterMetadata\n      ? parameterMetadata.getDescription()\n      : undefined;\n    const effectiveValue = getParameterValueOrDefault(value, parameterMetadata);\n\n    return (\n      <Line>\n        <Text style={styles.description}>{description}</Text>\n        <Column noMargin>\n          <RaisedButton\n            style={styles.button}\n            label={<Trans>Yes</Trans>}\n            primary={effectiveValue === 'yes'}\n            onClick={() => this.props.onChange('yes')}\n            ref={this._yesButton}\n          />\n        </Column>\n        <Column noMargin>\n          <RaisedButton\n            style={styles.button}\n            label={<Trans>No</Trans>}\n            primary={effectiveValue !== 'yes'}\n            onClick={() => this.props.onChange('no')}\n          />\n        </Column>\n      </Line>\n    );\n  }\n}\n\nexport const renderInlineYesNo = ({\n  value,\n  parameterMetadata,\n}: ParameterInlineRendererProps) => {\n  if (getParameterValueOrDefault(value, parameterMetadata) === 'yes') {\n    return <Trans>yes</Trans>;\n  } else {\n    return <Trans>no</Trans>;\n  }\n};\n","// @flow\nimport { Trans } from '@lingui/macro';\nimport { type ParameterInlineRendererProps } from './ParameterInlineRenderer.flow';\nimport React, { Component } from 'react';\nimport RaisedButton from '../../UI/RaisedButton';\nimport { Line, Column } from '../../UI/Grid';\nimport {\n  type ParameterFieldProps,\n  getParameterValueOrDefault,\n} from './ParameterFieldCommons';\nimport { focusButton } from '../../UI/Button';\nimport Text from '../../UI/Text';\n\nconst styles = {\n  button: {\n    margin: 5,\n  },\n  description: {\n    display: 'inline-block',\n    marginRight: 5,\n  },\n};\n\nexport default class TrueFalseField extends Component<\n  ParameterFieldProps,\n  void\n> {\n  _trueButton = React.createRef<RaisedButton>();\n\n  focus() {\n    focusButton(this._trueButton);\n  }\n\n  render() {\n    const { parameterMetadata, value } = this.props;\n    const description = parameterMetadata\n      ? parameterMetadata.getDescription()\n      : undefined;\n    const effectiveValue = getParameterValueOrDefault(value, parameterMetadata);\n\n    return (\n      <Line>\n        <Text style={styles.description}>{description}</Text>\n        <Column noMargin>\n          <RaisedButton\n            style={styles.button}\n            label={<Trans>True</Trans>}\n            primary={effectiveValue === 'True'}\n            onClick={() => this.props.onChange('True')}\n            ref={this._trueButton}\n          />\n        </Column>\n        <Column noMargin>\n          <RaisedButton\n            style={styles.button}\n            label={<Trans>False</Trans>}\n            primary={effectiveValue !== 'True'}\n            onClick={() => this.props.onChange('False')}\n          />\n        </Column>\n      </Line>\n    );\n  }\n}\n\nexport const renderInlineTrueFalse = ({\n  value,\n  parameterMetadata,\n}: ParameterInlineRendererProps) => {\n  if (getParameterValueOrDefault(value, parameterMetadata) === 'True') {\n    return <Trans>true</Trans>;\n  } else {\n    return <Trans>false</Trans>;\n  }\n};\n","// @flow\nimport React, { Component } from 'react';\nimport GenericExpressionField from './GenericExpressionField';\nimport { type ParameterFieldProps } from './ParameterFieldCommons';\n\nexport default class ExpressionField extends Component<\n  ParameterFieldProps,\n  void\n> {\n  _field: ?GenericExpressionField;\n\n  focus() {\n    if (this._field) this._field.focus();\n  }\n\n  render() {\n    return (\n      <GenericExpressionField\n        expressionType=\"number\"\n        ref={field => (this._field = field)}\n        {...this.props}\n      />\n    );\n  }\n}\n","// @flow\nimport React, { Component } from 'react';\nimport { enumerateAllExpressions } from '../../../InstructionOrExpression/EnumerateExpressions';\nimport InstructionOrExpressionSelector from './index';\nimport {\n  createTree,\n  type InstructionOrExpressionTreeNode,\n} from '../../../InstructionOrExpression/CreateTree';\nimport {\n  type EnumeratedInstructionOrExpressionMetadata,\n  filterEnumeratedInstructionOrExpressionMetadataByScope,\n} from '../../../InstructionOrExpression/EnumeratedInstructionOrExpressionMetadata.js';\nimport { type EventsScope } from '../../../InstructionOrExpression/EventsScope.flow';\n\ntype Props = {|\n  expressionType: string,\n  focusOnMount?: boolean,\n  selectedType: string,\n  onChoose: (type: string, EnumeratedInstructionOrExpressionMetadata) => void,\n  scope: EventsScope,\n|};\n\nconst style = {\n  flex: 1,\n  display: 'flex',\n  flexDirection: 'column',\n};\n\nexport default class ExpressionSelector extends Component<Props, {||}> {\n  instructionsInfo: Array<EnumeratedInstructionOrExpressionMetadata> = filterEnumeratedInstructionOrExpressionMetadataByScope(\n    enumerateAllExpressions(this.props.expressionType),\n    this.props.scope\n  );\n  instructionsInfoTree: InstructionOrExpressionTreeNode = createTree(\n    this.instructionsInfo\n  );\n\n  render() {\n    const { expressionType, scope, ...otherProps } = this.props;\n    return (\n      <InstructionOrExpressionSelector\n        style={style}\n        instructionsInfo={this.instructionsInfo}\n        instructionsInfoTree={this.instructionsInfoTree}\n        iconSize={16}\n        helpPagePath=\"/all-features/expressions-reference\"\n        {...otherProps}\n      />\n    );\n  }\n}\n","// @flow\nimport * as React from 'react';\n\nexport type Highlight = {|\n  begin: number,\n  end: number,\n  type?: 'error',\n  message: string,\n|};\n\ntype Props = {|\n  value: string,\n  style: Object,\n  highlights: Array<Highlight>,\n|};\n\nconst defaultStyle = {\n  width: '100%',\n  position: 'absolute',\n  whiteSpace: 'pre-wrap',\n  wordWrap: 'break-word',\n  color: 'transparent',\n};\n\nconst highlightedText = {\n  backgroundColor: 'rgba(244, 67, 54, 0.15)',\n  borderSizing: 'border-box',\n  borderBottom: '3px solid rgba(244, 67, 54, 0.7)',\n};\n\nexport default ({ value, style, highlights }: Props) => {\n  const sortedHighlights = highlights\n    .slice()\n    .sort((highlight1, highlight2) => highlight1.begin - highlight2.begin);\n\n  const elements = [];\n  let lastPos = 0;\n\n  sortedHighlights.forEach((highlight, i) => {\n    const startPos = Math.max(highlight.begin, lastPos);\n    if (startPos !== lastPos) {\n      elements.push(\n        <span key={`defaultText-${i}`}>\n          {value.substring(lastPos, startPos)}\n        </span>\n      );\n    }\n\n    if (lastPos < highlight.end) {\n      elements.push(\n        <span key={`highlightedText-${i}`} style={highlightedText}>\n          {value.substring(startPos, highlight.end)}\n        </span>\n      );\n      lastPos = highlight.end;\n    }\n  });\n  if (lastPos < value.length) {\n    elements.push(\n      <span key={`defaultText-end`}>{value.substring(lastPos)}</span>\n    );\n  }\n\n  return <div style={{ ...defaultStyle, ...style }}>{elements}</div>;\n};\n","// @flow\nimport { mapVector } from '../Utils/MapFor';\nimport {\n  enumerateObjectsAndGroups,\n  filterObjectsList,\n  filterGroupsList,\n} from '../ObjectsList/EnumerateObjects';\nimport flatten from 'lodash/flatten';\nimport { type EventsScope } from '../InstructionOrExpression/EventsScope.flow';\nimport {\n  enumerateFreeExpressions,\n  filterExpressions,\n  enumerateObjectExpressions,\n  enumerateBehaviorExpressions,\n} from '../InstructionOrExpression/EnumerateExpressions';\nimport {\n  type EnumeratedInstructionOrExpressionMetadata,\n  filterEnumeratedInstructionOrExpressionMetadataByScope,\n} from '../InstructionOrExpression/EnumeratedInstructionOrExpressionMetadata';\nimport { getVisibleParameterTypes } from '../EventsSheet/ParameterFields/GenericExpressionField/FormatExpressionCall';\n\ntype BaseExpressionAutocompletion = {|\n  completion: string,\n  addParenthesis?: boolean,\n  addDot?: boolean,\n  addNamespaceSeparator?: boolean,\n  addClosingParenthesis?: boolean,\n  isExact?: boolean,\n|};\n\nexport type ExpressionAutocompletion =\n  | {|\n      ...BaseExpressionAutocompletion,\n      kind: 'Expression',\n      enumeratedExpressionMetadata: EnumeratedInstructionOrExpressionMetadata,\n    |}\n  | {|\n      ...BaseExpressionAutocompletion,\n      object?: gdObject,\n      kind: 'Object',\n    |}\n  | {|\n      ...BaseExpressionAutocompletion,\n      kind: 'Behavior',\n    |};\n\ntype ExpressionAutocompletionContext = {|\n  gd: libGDevelop,\n  globalObjectsContainer: gdObjectsContainer,\n  objectsContainer: gdObjectsContainer,\n  scope: EventsScope,\n|};\n\nconst getAutocompletionsForExpressions = (\n  expressionMetadatas: Array<EnumeratedInstructionOrExpressionMetadata>,\n  prefix: string,\n  isExact: boolean\n): Array<ExpressionAutocompletion> => {\n  return expressionMetadatas\n    .filter(\n      enumeratedExpressionMetadata =>\n        !isExact || enumeratedExpressionMetadata.type === prefix\n    )\n    .map(enumeratedExpressionMetadata => {\n      // All enumeratedExpressionMetadata should have a name.\n      if (\n        !enumeratedExpressionMetadata.name ||\n        !enumeratedExpressionMetadata.parameters\n      )\n        return null;\n\n      return {\n        kind: 'Expression',\n        completion: enumeratedExpressionMetadata.name,\n        enumeratedExpressionMetadata: enumeratedExpressionMetadata,\n        addParenthesis: true,\n        addClosingParenthesis:\n          getVisibleParameterTypes(enumeratedExpressionMetadata).length === 0,\n        isExact,\n      };\n    })\n    .filter(Boolean);\n};\n\nconst getAutocompletionsForFreeExpressions = function(\n  expressionAutocompletionContext: ExpressionAutocompletionContext,\n  completionDescription: gdExpressionCompletionDescription\n): Array<ExpressionAutocompletion> {\n  const prefix: string = completionDescription.getPrefix();\n  const type: string = completionDescription.getType();\n  const isExact: boolean = completionDescription.isExact();\n\n  const freeExpressions = enumerateFreeExpressions(type);\n\n  const filteredFreeExpressions = filterEnumeratedInstructionOrExpressionMetadataByScope(\n    filterExpressions(freeExpressions, prefix),\n    expressionAutocompletionContext.scope\n  );\n  return getAutocompletionsForExpressions(\n    filteredFreeExpressions,\n    prefix,\n    isExact\n  );\n};\n\nconst getAutocompletionsForObjectExpressions = function(\n  expressionAutocompletionContext: ExpressionAutocompletionContext,\n  completionDescription: gdExpressionCompletionDescription\n): Array<ExpressionAutocompletion> {\n  const prefix: string = completionDescription.getPrefix();\n  const type: string = completionDescription.getType();\n  const objectName: string = completionDescription.getObjectName();\n  const isExact: boolean = completionDescription.isExact();\n  const {\n    gd,\n    globalObjectsContainer,\n    objectsContainer,\n  } = expressionAutocompletionContext;\n\n  const objectType: string = gd.getTypeOfObject(\n    globalObjectsContainer,\n    objectsContainer,\n    objectName,\n    /* searchInGroups= */ true\n  );\n  const objectExpressions = enumerateObjectExpressions(type, objectType);\n  const filteredObjectExpressions = filterEnumeratedInstructionOrExpressionMetadataByScope(\n    filterExpressions(objectExpressions, prefix),\n    expressionAutocompletionContext.scope\n  );\n\n  return getAutocompletionsForExpressions(\n    filteredObjectExpressions,\n    prefix,\n    isExact\n  );\n};\n\nconst getAutocompletionsForBehaviorExpressions = function(\n  expressionAutocompletionContext: ExpressionAutocompletionContext,\n  completionDescription: gdExpressionCompletionDescription\n): Array<ExpressionAutocompletion> {\n  const prefix: string = completionDescription.getPrefix();\n  const type: string = completionDescription.getType();\n  const behaviorName: string = completionDescription.getBehaviorName();\n  const isExact: boolean = completionDescription.isExact();\n  const {\n    gd,\n    globalObjectsContainer,\n    objectsContainer,\n  } = expressionAutocompletionContext;\n\n  // TODO: could be made more precise with the object name\n  const behaviorType = gd.getTypeOfBehavior(\n    globalObjectsContainer,\n    objectsContainer,\n    behaviorName,\n    /* searchInGroups= */ true\n  );\n\n  const behaviorExpressions = enumerateBehaviorExpressions(type, behaviorType);\n\n  const filteredBehaviorExpressions = filterEnumeratedInstructionOrExpressionMetadataByScope(\n    filterExpressions(behaviorExpressions, prefix),\n    expressionAutocompletionContext.scope\n  );\n\n  return getAutocompletionsForExpressions(\n    filteredBehaviorExpressions,\n    prefix,\n    isExact\n  );\n};\n\nconst getAutocompletionsForObject = function(\n  expressionAutocompletionContext: ExpressionAutocompletionContext,\n  completionDescription: gdExpressionCompletionDescription\n): Array<ExpressionAutocompletion> {\n  const prefix: string = completionDescription.getPrefix();\n  const type: string = completionDescription.getType();\n  const {\n    gd,\n    globalObjectsContainer,\n    objectsContainer,\n  } = expressionAutocompletionContext;\n\n  const { allObjectsList, allGroupsList } = enumerateObjectsAndGroups(\n    globalObjectsContainer,\n    objectsContainer\n  );\n\n  const filteredObjectsList = filterObjectsList(allObjectsList, {\n    searchText: prefix,\n    selectedTags: [],\n  });\n  const filteredGroupsList = filterGroupsList(allGroupsList, prefix);\n\n  // If we expect an object, don't add a dot. Otherwise (number, string...),\n  // add a dot to prepare for an object function.\n  const addDot = !gd.ParameterMetadata.isObject(type);\n\n  return [\n    ...filteredObjectsList.map(({ object }) => ({\n      kind: 'Object',\n      completion: object.getName(),\n      object,\n      addDot,\n    })),\n    ...filteredGroupsList.map(({ group }) => ({\n      kind: 'Object',\n      completion: group.getName(),\n      addDot,\n    })),\n  ];\n};\n\nconst getAutocompletionsForBehavior = function(\n  expressionAutocompletionContext: ExpressionAutocompletionContext,\n  completionDescription: gdExpressionCompletionDescription\n): Array<ExpressionAutocompletion> {\n  const prefix: string = completionDescription.getPrefix();\n  const isExact: boolean = completionDescription.isExact();\n  const objectName: string = completionDescription.getObjectName();\n\n  const {\n    gd,\n    globalObjectsContainer,\n    objectsContainer,\n  } = expressionAutocompletionContext;\n  return gd\n    .getBehaviorsOfObject(\n      globalObjectsContainer,\n      objectsContainer,\n      objectName,\n      true\n    )\n    .toJSArray()\n    .filter(behaviorName => behaviorName.indexOf(prefix) !== -1)\n    .map(behaviorName => ({\n      kind: 'Behavior',\n      completion: behaviorName,\n      addNamespaceSeparator: true,\n      isExact,\n    }));\n};\n\nexport const getAutocompletionsFromDescriptions = (\n  expressionAutocompletionContext: ExpressionAutocompletionContext,\n  expressionCompletionDescriptions: gdVectorExpressionCompletionDescription\n): Array<ExpressionAutocompletion> => {\n  const { gd } = expressionAutocompletionContext;\n\n  return flatten(\n    mapVector(expressionCompletionDescriptions, completionDescription => {\n      const completionKind = completionDescription.getCompletionKind();\n\n      if (completionKind === gd.ExpressionCompletionDescription.Expression) {\n        const objectName: string = completionDescription.getObjectName();\n        const behaviorName: string = completionDescription.getBehaviorName();\n\n        if (behaviorName) {\n          return getAutocompletionsForBehaviorExpressions(\n            expressionAutocompletionContext,\n            completionDescription\n          );\n        } else if (objectName) {\n          return getAutocompletionsForObjectExpressions(\n            expressionAutocompletionContext,\n            completionDescription\n          );\n        } else {\n          return getAutocompletionsForFreeExpressions(\n            expressionAutocompletionContext,\n            completionDescription\n          );\n        }\n      } else if (completionKind === gd.ExpressionCompletionDescription.Object) {\n        return getAutocompletionsForObject(\n          expressionAutocompletionContext,\n          completionDescription\n        );\n      } else if (\n        completionKind === gd.ExpressionCompletionDescription.Behavior\n      ) {\n        return getAutocompletionsForBehavior(\n          expressionAutocompletionContext,\n          completionDescription\n        );\n      }\n\n      return [];\n    })\n  );\n};\n\nconst separatorChars = ' .:+-/*=()<>[]@!?|\\\\^%#';\n\ntype InsertedAutocompletion = {|\n  completion: string,\n  addParenthesis?: ?boolean,\n  addClosingParenthesis?: ?boolean,\n  addDot?: ?boolean,\n  addNamespaceSeparator?: ?boolean,\n|};\n\ntype ExpressionAndCaretLocation = {|\n  expression: string,\n  caretLocation: number,\n|};\n\nexport const insertAutocompletionInExpression = (\n  { expression, caretLocation }: ExpressionAndCaretLocation,\n  insertedAutocompletion: InsertedAutocompletion\n): ExpressionAndCaretLocation => {\n  const formatCompletion = (nextCharacter: ?string) => {\n    const suffix = insertedAutocompletion.addDot\n      ? '.'\n      : insertedAutocompletion.addNamespaceSeparator\n      ? '::'\n      : insertedAutocompletion.addParenthesis\n      ? insertedAutocompletion.addClosingParenthesis\n        ? '()'\n        : '('\n      : '';\n\n    const addSuffix =\n      !nextCharacter || !suffix || nextCharacter[0] !== suffix[0];\n\n    return insertedAutocompletion.completion + (addSuffix ? suffix : '');\n  };\n\n  if (caretLocation > expression.length) {\n    caretLocation = expression.length;\n  }\n\n  if (caretLocation === 0 || !expression) {\n    const newExpression = formatCompletion(undefined) + expression;\n    return {\n      caretLocation: newExpression.length,\n      expression: newExpression,\n    };\n  }\n\n  // Start from the character just before the caret.\n  const startPosition = caretLocation - 1;\n\n  const isSeparatorChar = (char: string) => {\n    return separatorChars.indexOf(char) !== -1;\n  };\n\n  // Find the start position of the current word, unless we're already on a separator.\n  let wordStartPosition = startPosition;\n  const startPositionIsSeparator = isSeparatorChar(\n    expression[wordStartPosition]\n  );\n  if (!startPositionIsSeparator) {\n    while (\n      wordStartPosition > 0 &&\n      !isSeparatorChar(expression[wordStartPosition - 1])\n    ) {\n      wordStartPosition--;\n    }\n  } else {\n    // If the start position is a separator, the new word start position\n    // must be after the separator.\n    wordStartPosition++;\n  }\n\n  // Find the end position of the current word\n  let wordEndPosition = startPosition;\n  while (\n    wordEndPosition < expression.length &&\n    !isSeparatorChar(expression[wordEndPosition + 1])\n  ) {\n    wordEndPosition++;\n  }\n\n  // The next character, if any, will be useful to format the completion\n  // (to avoid repeating an existing character).\n  const maybeNextCharacter: ?string = expression[wordEndPosition + 1];\n\n  const newExpressionStart = expression.substring(0, wordStartPosition);\n  const insertedWord = formatCompletion(maybeNextCharacter);\n  const newExpressionEnd = expression.substring(wordEndPosition + 1);\n\n  return {\n    caretLocation: newExpressionStart.length + insertedWord.length,\n    expression: newExpressionStart + insertedWord + newExpressionEnd,\n  };\n};\n","// @flow\nimport { type ExpressionAutocompletion } from '../../../ExpressionAutocompletion';\n\nexport type AutocompletionsState = {|\n  autocompletions: Array<ExpressionAutocompletion>,\n  selectedCompletionIndex: number,\n|};\n\nexport const getAutocompletionsInitialState = (): AutocompletionsState => {\n  return {\n    autocompletions: [],\n    selectedCompletionIndex: 0,\n  };\n};\n\nconst MAX_VISIBLE_COUNT = 25;\n\nexport const getRemainingCount = (state: AutocompletionsState): number => {\n  return Math.max(0, state.autocompletions.length - MAX_VISIBLE_COUNT);\n};\n\nexport const getVisibleAutocompletions = (\n  state: AutocompletionsState\n): Array<ExpressionAutocompletion> => {\n  const remainingCount = getRemainingCount(state);\n  return remainingCount === 0\n    ? state.autocompletions\n    : state.autocompletions.slice(0, MAX_VISIBLE_COUNT);\n};\n\nexport const setNewAutocompletions = (\n  state: AutocompletionsState,\n  autocompletions: Array<ExpressionAutocompletion>\n): AutocompletionsState => {\n  const completionsChanged =\n    state.autocompletions.length !== autocompletions.length;\n\n  // Reset the selected completion only if completions changed.\n  const selectedCompletionIndex = completionsChanged\n    ? 0\n    : state.selectedCompletionIndex;\n\n  return {\n    autocompletions,\n    selectedCompletionIndex,\n  };\n};\n\nexport const handleAutocompletionsKeyDown = (\n  state: AutocompletionsState,\n  {\n    event,\n    onUpdateAutocompletions,\n    onInsertAutocompletion,\n  }: {|\n    event: SyntheticKeyboardEvent<>,\n    onUpdateAutocompletions: () => void,\n    onInsertAutocompletion: ExpressionAutocompletion => void,\n  |}\n): AutocompletionsState => {\n  if (\n    event.key === 'ArrowDown' ||\n    event.key === 'ArrowUp' ||\n    event.key === 'ArrowLeft' ||\n    event.key === 'ArrowRight'\n  ) {\n    onUpdateAutocompletions();\n  }\n\n  if (!state.autocompletions.length) return state;\n\n  const visibleAutocompletionsLength = Math.min(\n    MAX_VISIBLE_COUNT,\n    state.autocompletions.length\n  );\n\n  if (event.key === 'ArrowDown') {\n    event.preventDefault();\n\n    return {\n      ...state,\n      selectedCompletionIndex:\n        (state.selectedCompletionIndex + 1) % visibleAutocompletionsLength,\n    };\n  } else if (event.key === 'ArrowUp') {\n    event.preventDefault();\n\n    return {\n      ...state,\n      selectedCompletionIndex:\n        (visibleAutocompletionsLength + state.selectedCompletionIndex - 1) %\n        visibleAutocompletionsLength,\n    };\n  } else if (event.key === 'Escape') {\n    // Stop propagation to avoid closing the modal the\n    // field is contained in.\n    event.preventDefault();\n    event.stopPropagation();\n\n    return getAutocompletionsInitialState();\n  } else if (event.key === 'Enter' || event.key === 'Tab') {\n    const autocompletion = state.autocompletions[state.selectedCompletionIndex];\n    if (autocompletion) onInsertAutocompletion(autocompletion);\n\n    // Avoid entering a new line or tabbing to the next field.\n    event.preventDefault();\n  }\n\n  return state;\n};\n","// @flow\nimport { I18n } from '@lingui/react';\nimport { type I18n as I18nType } from '@lingui/core';\nimport * as React from 'react';\nimport Popper from '@material-ui/core/Popper';\nimport Paper from '@material-ui/core/Paper';\nimport muiZIndex from '@material-ui/core/styles/zIndex';\nimport ButtonBase from '@material-ui/core/ButtonBase';\nimport { type ExpressionAutocompletion } from '../../../ExpressionAutocompletion';\nimport Text from '../../../UI/Text';\nimport ScrollView, { type ScrollViewInterface } from '../../../UI/ScrollView';\nimport { getVisibleParameterTypes } from './FormatExpressionCall';\nimport { type ParameterRenderingServiceType } from '../ParameterFieldCommons';\nimport { type EnumeratedInstructionOrExpressionMetadata } from '../../../InstructionOrExpression/EnumeratedInstructionOrExpressionMetadata';\nimport { Column, Line, Spacer } from '../../../UI/Grid';\nimport ObjectsRenderingService from '../../../ObjectsRendering/ObjectsRenderingService';\n\nconst defaultTextStyle = {\n  // Cancel the default Text margins.\n  marginTop: -5,\n  marginBottom: -5,\n\n  // Break words if they are too long to fit on a single line.\n  overflow: 'hidden',\n  overflowWrap: 'break-word',\n};\n\nconst AutocompletionIcon = React.memo(({ src }) => (\n  <img\n    alt=\"\"\n    src={src}\n    crossOrigin=\"anonymous\"\n    style={{\n      maxWidth: 16,\n      maxHeight: 16,\n    }}\n  />\n));\n\nconst formatParameterTypesString = (\n  parameterRenderingService: ParameterRenderingServiceType,\n  i18n: I18nType,\n  enumeratedExpressionMetadata: EnumeratedInstructionOrExpressionMetadata\n) => {\n  return getVisibleParameterTypes(enumeratedExpressionMetadata)\n    .map(type => {\n      const userFriendlyName = parameterRenderingService.getUserFriendlyTypeName(\n        type\n      );\n\n      return userFriendlyName ? i18n._(userFriendlyName) : type;\n    })\n    .join(', ');\n};\n\nconst DisplayedExpressionAutocompletion = React.forwardRef(\n  (\n    {\n      expressionAutocompletion,\n      isSelected,\n      onClick,\n      i18n,\n      parameterRenderingService,\n    }: {|\n      expressionAutocompletion: ExpressionAutocompletion,\n      isSelected: boolean,\n      onClick: () => void,\n      i18n: I18nType,\n      parameterRenderingService: ParameterRenderingServiceType,\n    |},\n    ref\n  ) => {\n    if (!expressionAutocompletion.enumeratedExpressionMetadata) return null;\n\n    const title = isSelected ? (\n      <b>{expressionAutocompletion.completion}</b>\n    ) : (\n      expressionAutocompletion.completion\n    );\n\n    return (\n      <ButtonBase\n        style={styles.button}\n        onMouseDown={() => {\n          // When using a mouse, trigger the onClick on the mouse down\n          // to avoid the blur event of the text field to discard the autocompletions.\n          onClick();\n        }}\n        onClick={() => {\n          onClick();\n        }}\n        ref={ref}\n      >\n        <AutocompletionIcon\n          src={\n            expressionAutocompletion.enumeratedExpressionMetadata.iconFilename\n          }\n        />\n        <Spacer />\n        <Text style={defaultTextStyle} align=\"left\">\n          {title}(\n          <i>\n            {formatParameterTypesString(\n              parameterRenderingService,\n              i18n,\n              expressionAutocompletion.enumeratedExpressionMetadata\n            )}\n          </i>\n          )\n        </Text>\n      </ButtonBase>\n    );\n  }\n);\n\nconst DisplayedExactExpressionAutocompletion = ({\n  expressionAutocompletion,\n  i18n,\n  parameterRenderingService,\n}: {|\n  expressionAutocompletion: ExpressionAutocompletion,\n  i18n: I18nType,\n  parameterRenderingService: ParameterRenderingServiceType,\n|}) => {\n  if (!expressionAutocompletion.enumeratedExpressionMetadata) return null;\n\n  return (\n    <Column>\n      <Line noMargin expand alignItems=\"center\">\n        <AutocompletionIcon\n          src={\n            expressionAutocompletion.enumeratedExpressionMetadata.iconFilename\n          }\n        />\n        <Spacer />\n        <Text style={defaultTextStyle} align=\"left\">\n          <b>{expressionAutocompletion.completion}</b>(\n          <i>\n            {formatParameterTypesString(\n              parameterRenderingService,\n              i18n,\n              expressionAutocompletion.enumeratedExpressionMetadata\n            )}\n          </i>\n          )\n        </Text>\n      </Line>\n      <Text style={defaultTextStyle} size=\"body2\">\n        {expressionAutocompletion.enumeratedExpressionMetadata.metadata.getDescription()}\n      </Text>\n    </Column>\n  );\n};\n\nconst DisplayedObjectAutocompletion = React.forwardRef(\n  (\n    {\n      project,\n      expressionAutocompletion,\n      isSelected,\n      onClick,\n    }: {|\n      project: ?gdProject,\n      expressionAutocompletion: ExpressionAutocompletion,\n      isSelected: boolean,\n      onClick: () => void,\n    |},\n    ref\n  ) => {\n    const thumbnail =\n      project && expressionAutocompletion.object\n        ? ObjectsRenderingService.getThumbnail(\n            project,\n            expressionAutocompletion.object\n          )\n        : 'res/types/object.png';\n\n    const title = isSelected ? (\n      <b>{expressionAutocompletion.completion}</b>\n    ) : (\n      expressionAutocompletion.completion\n    );\n\n    return (\n      <ButtonBase\n        style={styles.button}\n        onMouseDown={() => {\n          // When using a mouse, trigger the onClick on the mouse down\n          // to avoid the blur event of the text field to discard the autocompletions.\n          onClick();\n        }}\n        onClick={() => {\n          onClick();\n        }}\n        ref={ref}\n      >\n        <AutocompletionIcon src={thumbnail} />\n        <Spacer />\n        <Text style={defaultTextStyle} align=\"left\">\n          {title}\n        </Text>\n      </ButtonBase>\n    );\n  }\n);\n\nconst DisplayedBehaviorAutocompletion = React.forwardRef(\n  (\n    {\n      expressionAutocompletion,\n      isSelected,\n      onClick,\n    }: {|\n      expressionAutocompletion: ExpressionAutocompletion,\n      isSelected: boolean,\n      onClick: () => void,\n    |},\n    ref\n  ) => {\n    const title = isSelected ? (\n      <b>{expressionAutocompletion.completion}</b>\n    ) : (\n      expressionAutocompletion.completion\n    );\n    return (\n      <ButtonBase\n        style={styles.button}\n        onMouseDown={() => {\n          // When using a mouse, trigger the onClick on the mouse down\n          // to avoid the blur event of the text field to discard the autocompletions.\n          onClick();\n        }}\n        onClick={() => {\n          onClick();\n        }}\n        ref={ref}\n      >\n        <AutocompletionIcon src={'res/types/behavior.png'} />\n        <Spacer />\n        <Text style={defaultTextStyle} align=\"left\">\n          {title}\n        </Text>\n      </ButtonBase>\n    );\n  }\n);\n\ntype Props = {|\n  project: ?gdProject,\n  expressionAutocompletions: Array<ExpressionAutocompletion>,\n  remainingCount: number,\n  selectedCompletionIndex: number,\n  anchorEl: Element,\n  onChoose: (chosenExpressionAutocompletion: ExpressionAutocompletion) => void,\n  parameterRenderingService: ParameterRenderingServiceType,\n|};\n\nconst styles = {\n  container: {\n    width: 370,\n    maxHeight: 150,\n    display: 'flex',\n    overflowX: 'hidden',\n  },\n  button: {\n    width: '100%',\n    paddingLeft: 8,\n    paddingRight: 8,\n    justifyContent: 'flex-start',\n  },\n  tooManyTextContainer: {\n    width: '100%',\n  },\n  popperStyle: {\n    // Ensure the popper is above everything (modal, dialog, snackbar, tooltips, etc).\n    // There will be only one ExpressionAutocompletionsDisplay opened at a time, so it's fair to put the\n    // highest z index. If this is breaking, check the z-index of material-ui.\n    zIndex: muiZIndex.tooltip + 100,\n  },\n};\n\nexport default function ExpressionAutocompletionsDisplayer({\n  project,\n  expressionAutocompletions,\n  remainingCount,\n  selectedCompletionIndex,\n  anchorEl,\n  onChoose,\n  parameterRenderingService,\n}: Props) {\n  const scrollView = React.useRef((null: ?ScrollViewInterface));\n  const selectedAutocompletionElement = React.useRef(\n    (null: ?React$Component<any, any>)\n  );\n  React.useEffect(\n    () => {\n      if (scrollView.current && selectedAutocompletionElement.current) {\n        scrollView.current.scrollTo(selectedAutocompletionElement.current);\n      }\n    },\n    [scrollView, selectedAutocompletionElement, selectedCompletionIndex]\n  );\n\n  if (expressionAutocompletions.length === 0) return null;\n\n  return (\n    <I18n>\n      {({ i18n }) => (\n        <Popper\n          style={styles.popperStyle}\n          open\n          anchorEl={anchorEl}\n          placement=\"bottom-start\"\n          disablePortal={\n            // We can use a portal to display this component, because even if it\n            // used inside a modal, which has a focus trap, it's entirely\n            // controlled by the parent component.\n            false\n          }\n        >\n          <Paper variant=\"outlined\" square style={styles.container}>\n            <ScrollView autoHideScrollbar ref={scrollView}>\n              {expressionAutocompletions.map(\n                (expressionAutocompletion, index) => {\n                  const isSelected = selectedCompletionIndex === index;\n                  const ref = isSelected\n                    ? selectedAutocompletionElement\n                    : undefined;\n\n                  return expressionAutocompletion.kind === 'Expression' ? (\n                    !expressionAutocompletion.isExact ? (\n                      <DisplayedExpressionAutocompletion\n                        key={index}\n                        expressionAutocompletion={expressionAutocompletion}\n                        onClick={() => onChoose(expressionAutocompletion)}\n                        isSelected={isSelected}\n                        i18n={i18n}\n                        parameterRenderingService={parameterRenderingService}\n                        ref={ref}\n                      />\n                    ) : (\n                      <DisplayedExactExpressionAutocompletion\n                        key={index}\n                        expressionAutocompletion={expressionAutocompletion}\n                        i18n={i18n}\n                        parameterRenderingService={parameterRenderingService}\n                      />\n                    )\n                  ) : expressionAutocompletion.kind === 'Object' ? (\n                    <DisplayedObjectAutocompletion\n                      key={index}\n                      project={project}\n                      expressionAutocompletion={expressionAutocompletion}\n                      onClick={() => onChoose(expressionAutocompletion)}\n                      isSelected={isSelected}\n                      ref={ref}\n                    />\n                  ) : expressionAutocompletion.kind === 'Behavior' ? (\n                    <DisplayedBehaviorAutocompletion\n                      key={index}\n                      expressionAutocompletion={expressionAutocompletion}\n                      onClick={() => onChoose(expressionAutocompletion)}\n                      isSelected={isSelected}\n                      ref={ref}\n                    />\n                  ) : null;\n                }\n              )}\n              {remainingCount > 0 && (\n                <Column justifyContent=\"flex-start\">\n                  <Text>And {remainingCount} others...</Text>\n                </Column>\n              )}\n            </ScrollView>\n          </Paper>\n        </Popper>\n      )}\n    </I18n>\n  );\n}\n","// @flow\nimport React, { Component } from 'react';\nimport GenericExpressionField from './GenericExpressionField';\nimport { type ParameterFieldProps } from './ParameterFieldCommons';\n\nexport default class StringField extends Component<ParameterFieldProps, void> {\n  _field: ?GenericExpressionField;\n\n  focus() {\n    if (this._field) this._field.focus();\n  }\n\n  render() {\n    return (\n      <GenericExpressionField\n        expressionType=\"string\"\n        ref={field => (this._field = field)}\n        {...this.props}\n      />\n    );\n  }\n}\n","// @flow\nimport React, { Component } from 'react';\nimport { type ParameterFieldProps } from './ParameterFieldCommons';\nimport SemiControlledAutoComplete from '../../UI/SemiControlledAutoComplete';\n\nconst getChoices = (parameterMetadata: ?gdParameterMetadata) => {\n  if (!parameterMetadata) {\n    return [];\n  }\n\n  try {\n    return JSON.parse(parameterMetadata.getExtraInfo());\n  } catch (exception) {\n    console.error(\n      'The parameter seems misconfigured, as an array of choices could not be extracted - verify that your properly wrote a list of choices in JSON format. Full exception is:',\n      exception\n    );\n  }\n\n  return [];\n};\n\nexport default class StringWithSelectorField extends Component<\n  ParameterFieldProps,\n  {||}\n> {\n  _field: ?any;\n\n  focus() {\n    if (this._field) this._field.focus();\n  }\n\n  render() {\n    const { value, onChange, isInline, parameterMetadata } = this.props;\n\n    return (\n      <SemiControlledAutoComplete\n        margin={this.props.isInline ? 'none' : 'dense'}\n        floatingLabelText={\n          parameterMetadata ? parameterMetadata.getDescription() : undefined\n        }\n        helperMarkdownText={\n          parameterMetadata ? parameterMetadata.getLongDescription() : undefined\n        }\n        fullWidth\n        value={value}\n        onChange={onChange}\n        dataSource={getChoices(parameterMetadata).map(choice => ({\n          text: '\"' + choice + '\"',\n          value: '\"' + choice + '\"',\n        }))}\n        openOnFocus={!isInline}\n        ref={field => (this._field = field)}\n      />\n    );\n  }\n}\n","// @flow\nimport { Trans } from '@lingui/macro';\nimport * as React from 'react';\nimport { type ParameterFieldProps } from './ParameterFieldCommons';\nimport { getLastObjectParameterValue } from './ParameterMetadataTools';\nimport SemiControlledAutoComplete, {\n  type SemiControlledAutoCompleteInterface,\n} from '../../UI/SemiControlledAutoComplete';\nconst gd = global.gd;\n\ntype State = {|\n  errorText: ?string,\n|};\n\nexport default class BehaviorField extends React.Component<\n  ParameterFieldProps,\n  State\n> {\n  state = { errorText: null };\n  _description: ?string;\n  _longDescription: ?string;\n  _behaviorTypeAllowed: ?string;\n  _behaviorNames: Array<string> = [];\n  _field: ?SemiControlledAutoCompleteInterface;\n\n  constructor(props: ParameterFieldProps) {\n    super(props);\n\n    const { parameterMetadata } = this.props;\n    this._description = parameterMetadata\n      ? parameterMetadata.getDescription()\n      : undefined;\n\n    this._longDescription = parameterMetadata\n      ? parameterMetadata.getLongDescription()\n      : undefined;\n\n    this._behaviorTypeAllowed = parameterMetadata\n      ? parameterMetadata.getExtraInfo()\n      : undefined;\n  }\n\n  _updateBehaviorsList() {\n    const {\n      instructionMetadata,\n      instruction,\n      expressionMetadata,\n      expression,\n      parameterIndex,\n    } = this.props;\n\n    const objectName = getLastObjectParameterValue({\n      instructionMetadata,\n      instruction,\n      expressionMetadata,\n      expression,\n      parameterIndex,\n    });\n    if (!objectName) return;\n\n    this._behaviorNames = gd\n      .getBehaviorsOfObject(\n        this.props.globalObjectsContainer,\n        this.props.objectsContainer,\n        objectName,\n        true\n      )\n      .toJSArray()\n      .filter(behaviorName => {\n        return (\n          !this._behaviorTypeAllowed ||\n          gd.getTypeOfBehavior(\n            this.props.globalObjectsContainer,\n            this.props.objectsContainer,\n            behaviorName\n          ) === this._behaviorTypeAllowed\n        );\n      });\n  }\n\n  focus() {\n    if (this._field) this._field.focus();\n  }\n\n  _getError = (value?: string) => {\n    if (!value && !this.props.value) return null;\n\n    const isValidChoice =\n      this._behaviorNames.filter(choice => this.props.value === choice)\n        .length !== 0;\n\n    if (!isValidChoice) return 'This behavior is not attached to the object';\n\n    return null;\n  };\n\n  _doValidation = (value?: string) => {\n    this.setState({ errorText: this._getError(value) });\n  };\n\n  _forceChooseBehavior = () => {\n    // This is a bit hacky:\n    // force the behavior selection if there is only one selectable behavior\n    if (this._behaviorNames.length === 1) {\n      if (this.props.value !== this._behaviorNames[0]) {\n        this.props.onChange(this._behaviorNames[0]);\n      }\n    }\n  };\n\n  componentDidUpdate() {\n    this._forceChooseBehavior();\n  }\n\n  componentDidMount() {\n    this._forceChooseBehavior();\n  }\n\n  render() {\n    this._updateBehaviorsList();\n\n    const noBehaviorErrorText =\n      this._behaviorTypeAllowed !== '' ? (\n        <Trans>\n          The behavior is not attached to this object. Please select another\n          object or add this behavior.\n        </Trans>\n      ) : (\n        <Trans>\n          This object has no behaviors: please add this behavior to the object\n          first.\n        </Trans>\n      );\n\n    return (\n      <SemiControlledAutoComplete\n        margin={this.props.isInline ? 'none' : 'dense'}\n        floatingLabelText={this._description}\n        helperMarkdownText={this._longDescription}\n        fullWidth\n        errorText={\n          !this._behaviorNames.length\n            ? noBehaviorErrorText\n            : this.state.errorText\n        }\n        value={this.props.value}\n        onChange={this.props.onChange}\n        onRequestClose={this.props.onRequestClose}\n        onBlur={event => {\n          this._doValidation(event.currentTarget.value);\n        }}\n        dataSource={this._behaviorNames.map(behaviorName => ({\n          text: behaviorName,\n          value: behaviorName,\n        }))}\n        openOnFocus={!this.props.isInline}\n        disabled={this._behaviorNames.length <= 1}\n        ref={field => (this._field = field)}\n      />\n    );\n  }\n}\n","// @flow\nimport { Trans } from '@lingui/macro';\nimport * as React from 'react';\nimport { type ParameterInlineRendererProps } from './ParameterInlineRenderer.flow';\nimport VariableField, { renderVariableWithIcon } from './VariableField';\nimport VariablesEditorDialog from '../../VariablesList/VariablesEditorDialog';\nimport { type ParameterFieldProps } from './ParameterFieldCommons';\n\ntype State = {|\n  editorOpen: boolean,\n|};\n\nexport default class SceneVariableField extends React.Component<\n  ParameterFieldProps,\n  State\n> {\n  _field: ?VariableField;\n  state = {\n    editorOpen: false,\n  };\n\n  focus() {\n    if (this._field) this._field.focus();\n  }\n\n  render() {\n    const { scope } = this.props;\n    const { layout } = scope;\n\n    return (\n      <React.Fragment>\n        <VariableField\n          variablesContainer={layout ? layout.getVariables() : null}\n          parameterMetadata={this.props.parameterMetadata}\n          value={this.props.value}\n          onChange={this.props.onChange}\n          isInline={this.props.isInline}\n          onRequestClose={this.props.onRequestClose}\n          ref={field => (this._field = field)}\n          onOpenDialog={() => this.setState({ editorOpen: true })}\n          globalObjectsContainer={this.props.globalObjectsContainer}\n          objectsContainer={this.props.objectsContainer}\n          scope={scope}\n        />\n        {this.state.editorOpen && layout && (\n          <VariablesEditorDialog\n            open\n            variablesContainer={layout.getVariables()}\n            onCancel={() => this.setState({ editorOpen: false })}\n            onApply={() => {\n              this.setState({ editorOpen: false });\n            }}\n            emptyExplanationMessage={\n              <Trans>\n                Scene variables can be used to store any value or text during\n                the game.\n              </Trans>\n            }\n            emptyExplanationSecondMessage={\n              <Trans>\n                For example, you can have a variable called Score representing\n                the current score of the player.\n              </Trans>\n            }\n          />\n        )}\n      </React.Fragment>\n    );\n  }\n}\n\nexport const renderInlineSceneVariable = (\n  props: ParameterInlineRendererProps\n) => {\n  return renderVariableWithIcon(\n    props,\n    'res/types/scenevar.png',\n    'scene variable'\n  );\n};\n","// @flow\nimport { Trans } from '@lingui/macro';\nimport * as React from 'react';\nimport { type ParameterInlineRendererProps } from './ParameterInlineRenderer.flow';\nimport VariableField, { renderVariableWithIcon } from './VariableField';\nimport VariablesEditorDialog from '../../VariablesList/VariablesEditorDialog';\nimport { type ParameterFieldProps } from './ParameterFieldCommons';\n\ntype State = {|\n  editorOpen: boolean,\n|};\n\nexport default class GlobalVariableField extends React.Component<\n  ParameterFieldProps,\n  State\n> {\n  _field: ?VariableField;\n  state = {\n    editorOpen: false,\n  };\n\n  focus() {\n    if (this._field) this._field.focus();\n  }\n\n  render() {\n    const { project, scope } = this.props;\n\n    return (\n      <React.Fragment>\n        <VariableField\n          variablesContainer={project ? project.getVariables() : null}\n          parameterMetadata={this.props.parameterMetadata}\n          value={this.props.value}\n          onChange={this.props.onChange}\n          isInline={this.props.isInline}\n          ref={field => (this._field = field)}\n          onOpenDialog={() => this.setState({ editorOpen: true })}\n          globalObjectsContainer={this.props.globalObjectsContainer}\n          objectsContainer={this.props.objectsContainer}\n          scope={scope}\n        />\n        {this.state.editorOpen && project && (\n          <VariablesEditorDialog\n            open={this.state.editorOpen}\n            variablesContainer={project.getVariables()}\n            onCancel={() => this.setState({ editorOpen: false })}\n            onApply={() => {\n              this.setState({ editorOpen: false });\n            }}\n            emptyExplanationMessage={\n              <Trans>\n                Global variables are variables that are persisted across the\n                scenes during the game.\n              </Trans>\n            }\n          />\n        )}\n      </React.Fragment>\n    );\n  }\n}\n\nexport const renderInlineGlobalVariable = (\n  props: ParameterInlineRendererProps\n) => {\n  return renderVariableWithIcon(\n    props,\n    'res/types/globalvar.png',\n    'global variable'\n  );\n};\n","// @flow\nimport * as React from 'react';\nimport { type ParameterInlineRendererProps } from './ParameterInlineRenderer.flow';\nimport VariableField, { renderVariableWithIcon } from './VariableField';\nimport VariablesEditorDialog from '../../VariablesList/VariablesEditorDialog';\nimport { type ParameterFieldProps } from './ParameterFieldCommons';\nimport { getLastObjectParameterValue } from './ParameterMetadataTools';\n\ntype State = {|\n  editorOpen: boolean,\n|};\n\nexport default class ObjectVariableField extends React.Component<\n  ParameterFieldProps,\n  State\n> {\n  _field: ?VariableField;\n  state = {\n    editorOpen: false,\n  };\n\n  focus() {\n    if (this._field) this._field.focus();\n  }\n\n  render() {\n    const {\n      project,\n      scope,\n      instructionMetadata,\n      instruction,\n      expressionMetadata,\n      expression,\n      parameterIndex,\n    } = this.props;\n\n    const objectName = getLastObjectParameterValue({\n      instructionMetadata,\n      instruction,\n      expressionMetadata,\n      expression,\n      parameterIndex,\n    });\n\n    let variablesContainer = null;\n    if (objectName) {\n      const { layout } = scope;\n      if (layout && layout.hasObjectNamed(objectName)) {\n        variablesContainer = layout.getObject(objectName).getVariables();\n      } else if (project && project.hasObjectNamed(objectName)) {\n        variablesContainer = project.getObject(objectName).getVariables();\n      }\n    }\n\n    return (\n      <React.Fragment>\n        <VariableField\n          variablesContainer={variablesContainer}\n          parameterMetadata={this.props.parameterMetadata}\n          value={this.props.value}\n          onChange={this.props.onChange}\n          isInline={this.props.isInline}\n          ref={field => (this._field = field)}\n          onOpenDialog={() => this.setState({ editorOpen: true })}\n          globalObjectsContainer={this.props.globalObjectsContainer}\n          objectsContainer={this.props.objectsContainer}\n          scope={scope}\n        />\n        {this.state.editorOpen && variablesContainer && (\n          <VariablesEditorDialog\n            open={this.state.editorOpen}\n            variablesContainer={variablesContainer}\n            onCancel={() => this.setState({ editorOpen: false })}\n            onApply={() => {\n              this.setState({ editorOpen: false });\n            }}\n          />\n        )}\n      </React.Fragment>\n    );\n  }\n}\n\nexport const renderInlineObjectVariable = (\n  props: ParameterInlineRendererProps\n) => {\n  return renderVariableWithIcon(\n    props,\n    'res/types/objectvar.png',\n    'object variable'\n  );\n};\n","// @flow\nimport React, { Component } from 'react';\nimport { mapFor } from '../../Utils/MapFor';\nimport { type ParameterFieldProps } from './ParameterFieldCommons';\nimport SemiControlledAutoComplete, {\n  type SemiControlledAutoCompleteInterface,\n} from '../../UI/SemiControlledAutoComplete';\n\nexport default class LayerField extends Component<ParameterFieldProps, {||}> {\n  _field: ?SemiControlledAutoCompleteInterface;\n\n  focus() {\n    if (this._field) this._field.focus();\n  }\n\n  render() {\n    const { value, onChange, isInline, scope, parameterMetadata } = this.props;\n    const { layout } = scope;\n    const layerNames = layout\n      ? mapFor(0, layout.getLayersCount(), i => {\n          const layer = layout.getLayerAt(i);\n          return layer.getName();\n        })\n      : [];\n\n    return (\n      <SemiControlledAutoComplete\n        margin={this.props.isInline ? 'none' : 'dense'}\n        floatingLabelText={\n          parameterMetadata ? parameterMetadata.getDescription() : undefined\n        }\n        helperMarkdownText={\n          parameterMetadata ? parameterMetadata.getLongDescription() : undefined\n        }\n        fullWidth\n        value={value}\n        onChange={onChange}\n        onRequestClose={this.props.onRequestClose}\n        openOnFocus={isInline}\n        dataSource={layerNames.map(layerName => ({\n          text: layerName ? `\"${layerName}\"` : '\"\" (Base layer)',\n          value: `\"${layerName}\"`,\n        }))}\n        hintText={'\"\"'}\n        ref={field => (this._field = field)}\n      />\n    );\n  }\n}\n","// @flow\nimport { Trans } from '@lingui/macro';\n\nimport React, { Component } from 'react';\nimport ResourceSelector from '../../ResourcesList/ResourceSelector';\nimport ResourcesLoader from '../../ResourcesLoader';\nimport { type ParameterFieldProps } from './ParameterFieldCommons';\n\nexport default class AudioResourceField extends Component<\n  ParameterFieldProps,\n  void\n> {\n  _field: ?ResourceSelector;\n\n  focus() {\n    if (this._field) this._field.focus();\n  }\n\n  render() {\n    if (\n      !this.props.resourceSources ||\n      !this.props.onChooseResource ||\n      !this.props.resourceExternalEditors ||\n      !this.props.project\n    ) {\n      console.error(\n        'Missing project, resourceSources, onChooseResource or resourceExternalEditors for AudioResourceField'\n      );\n      return null;\n    }\n\n    return (\n      <ResourceSelector\n        margin={this.props.isInline ? 'none' : 'dense'}\n        project={this.props.project}\n        resourceSources={this.props.resourceSources}\n        onChooseResource={this.props.onChooseResource}\n        resourceExternalEditors={this.props.resourceExternalEditors}\n        resourcesLoader={ResourcesLoader}\n        resourceKind=\"audio\"\n        fullWidth\n        initialResourceName={this.props.value}\n        onChange={this.props.onChange}\n        floatingLabelText={<Trans>Choose the audio file to use</Trans>}\n        ref={field => (this._field = field)}\n      />\n    );\n  }\n}\n","// @flow\nimport { Trans } from '@lingui/macro';\n\nimport React, { Component } from 'react';\nimport ResourceSelector from '../../ResourcesList/ResourceSelector';\nimport ResourcesLoader from '../../ResourcesLoader';\nimport { type ParameterFieldProps } from './ParameterFieldCommons';\n\nexport default class VideoResourceField extends Component<\n  ParameterFieldProps,\n  void\n> {\n  _field: ?ResourceSelector;\n\n  focus() {\n    if (this._field) this._field.focus();\n  }\n\n  render() {\n    if (\n      !this.props.resourceSources ||\n      !this.props.onChooseResource ||\n      !this.props.resourceExternalEditors ||\n      !this.props.project\n    ) {\n      console.error(\n        'Missing project, resourceSources, onChooseResource or resourceExternalEditors for VideoResourceField'\n      );\n      return null;\n    }\n\n    return (\n      <ResourceSelector\n        margin={this.props.isInline ? 'none' : 'dense'}\n        project={this.props.project}\n        resourceSources={this.props.resourceSources}\n        onChooseResource={this.props.onChooseResource}\n        resourceExternalEditors={this.props.resourceExternalEditors}\n        resourcesLoader={ResourcesLoader}\n        resourceKind=\"video\"\n        fullWidth\n        initialResourceName={this.props.value}\n        onChange={this.props.onChange}\n        floatingLabelText={<Trans>Choose the video file to use</Trans>}\n        ref={field => (this._field = field)}\n      />\n    );\n  }\n}\n","// @flow\nimport { Trans } from '@lingui/macro';\n\nimport React, { Component } from 'react';\nimport ResourceSelector from '../../ResourcesList/ResourceSelector';\nimport ResourcesLoader from '../../ResourcesLoader';\nimport { type ParameterFieldProps } from './ParameterFieldCommons';\n\nexport default class JsonResourceField extends Component<\n  ParameterFieldProps,\n  void\n> {\n  _field: ?ResourceSelector;\n\n  focus() {\n    if (this._field) this._field.focus();\n  }\n\n  render() {\n    if (\n      !this.props.resourceSources ||\n      !this.props.onChooseResource ||\n      !this.props.resourceExternalEditors ||\n      !this.props.project\n    ) {\n      console.error(\n        'Missing project, resourceSources, onChooseResource or resourceExternalEditors for JsonResourceField'\n      );\n      return null;\n    }\n\n    return (\n      <ResourceSelector\n        margin={this.props.isInline ? 'none' : 'dense'}\n        project={this.props.project}\n        resourceSources={this.props.resourceSources}\n        onChooseResource={this.props.onChooseResource}\n        resourceExternalEditors={this.props.resourceExternalEditors}\n        resourcesLoader={ResourcesLoader}\n        resourceKind=\"json\"\n        fullWidth\n        initialResourceName={this.props.value}\n        onChange={this.props.onChange}\n        floatingLabelText={<Trans>Choose the json file to use</Trans>}\n        ref={field => (this._field = field)}\n      />\n    );\n  }\n}\n","// @flow\nimport React, { Component } from 'react';\nimport { type ParameterFieldProps } from './ParameterFieldCommons';\nimport GenericExpressionField from './GenericExpressionField';\nimport ColorPicker from '../../UI/ColorField/ColorPicker';\n\nconst parseColor = (rgbColor: string) => {\n  const colors = rgbColor.replace(/\"/g, '').split(';');\n  if (colors.length !== 3) {\n    return null;\n  }\n\n  const r = parseInt(colors[0], 10);\n  const g = parseInt(colors[1], 10);\n  const b = parseInt(colors[2], 10);\n\n  // Check if parsing of number was done properly (if not,\n  // we receive NaN which is not equal to itself).\n  // eslint-disable-next-line\n  if (r !== r || g !== g || b !== b) return null;\n\n  return {\n    r,\n    g,\n    b,\n    a: 255,\n  };\n};\n\nexport default class ParameterColorField extends Component<ParameterFieldProps> {\n  _field: ?GenericExpressionField;\n\n  focus() {\n    if (this._field) this._field.focus();\n  }\n\n  render() {\n    return (\n      <GenericExpressionField\n        expressionType=\"string\"\n        ref={field => (this._field = field)}\n        renderExtraButton={({ style }) => (\n          <ColorPicker\n            style={style}\n            disableAlpha\n            color={parseColor(this.props.value)}\n            onChangeComplete={color => {\n              this.props.onChange(\n                '\"' + color.rgb.r + ';' + color.rgb.g + ';' + color.rgb.b + '\"'\n              );\n            }}\n          />\n        )}\n        {...this.props}\n      />\n    );\n  }\n}\n","// @flow\nimport { Trans } from '@lingui/macro';\nimport { type ParameterInlineRendererProps } from './ParameterInlineRenderer.flow';\nimport React, { Component } from 'react';\nimport RaisedButton from '../../UI/RaisedButton';\nimport { Line, Column } from '../../UI/Grid';\nimport { makeNonBreakable } from '../../Utils/StringHelpers';\nimport { type ParameterFieldProps } from './ParameterFieldCommons';\nimport GenericExpressionField from './GenericExpressionField';\nimport BackgroundText from '../../UI/BackgroundText';\nimport { focusButton } from '../../UI/Button';\nimport Text from '../../UI/Text';\n\ntype State = {|\n  showDeprecatedNumericValue: boolean,\n|};\n\nexport default class ForceMultiplierField extends Component<\n  ParameterFieldProps,\n  State\n> {\n  _instantButton = React.createRef<RaisedButton>();\n  state = {\n    showDeprecatedNumericValue:\n      this.props.value !== '' &&\n      this.props.value !== '1' &&\n      this.props.value !== '0',\n  };\n\n  focus() {\n    focusButton(this._instantButton);\n  }\n\n  render() {\n    const { showDeprecatedNumericValue } = this.state;\n    return (\n      <Column expand noMargin>\n        <Line expand alignItems=\"center\">\n          <Column>\n            <RaisedButton\n              label={makeNonBreakable('Instant')}\n              primary={this.props.value === '' || this.props.value === '0'}\n              onClick={() => this.props.onChange('0')}\n              ref={this._instantButton}\n            />\n          </Column>\n          <Column>\n            <Text>\n              <Trans>\n                The force will only push the object during the time of one\n                frame. Typically used in an event with no conditions or with\n                conditions that stay valid for a certain amount of time.\n              </Trans>\n            </Text>\n          </Column>\n        </Line>\n        <Line expand alignItems=\"center\">\n          <Column>\n            <RaisedButton\n              label={<Trans>Permanent</Trans>}\n              primary={this.props.value === '1'}\n              onClick={() => this.props.onChange('1')}\n            />\n          </Column>\n          <Column>\n            <Text>\n              <Trans>\n                The force will push the object forever, unless you use the\n                action \"Stop the object\". Typically used in an event with\n                conditions that are only true once, or with a \"Trigger Once\"\n                condition.\n              </Trans>\n            </Text>\n          </Column>\n        </Line>\n        {showDeprecatedNumericValue && (\n          <React.Fragment>\n            <BackgroundText>\n              <Trans>or</Trans>\n            </BackgroundText>\n            <Line expand>\n              <Column expand>\n                <GenericExpressionField\n                  expressionType=\"number\"\n                  {...this.props}\n                />\n              </Column>\n            </Line>\n            <BackgroundText>\n              <Trans>\n                The usage of a number or expression is deprecated. Please now\n                use only \"Permanent\" or \"Instant\" for configuring forces.\n              </Trans>\n            </BackgroundText>\n          </React.Fragment>\n        )}\n      </Column>\n    );\n  }\n}\n\nexport const renderInlineForceMultiplier = ({\n  value,\n}: ParameterInlineRendererProps) => {\n  if (value === '1') return 'a permanent';\n  else if (value === '0' || value === '') return 'an instant';\n\n  return 'a (multiplier: ' + value + ')';\n};\n","// @flow\nimport React, { Component } from 'react';\nimport { type ParameterFieldProps } from './ParameterFieldCommons';\nimport SemiControlledAutoComplete, {\n  type SemiControlledAutoCompleteInterface,\n} from '../../UI/SemiControlledAutoComplete';\nimport { enumerateLayouts } from '../../ProjectManager/EnumerateProjectItems';\n\nexport default class SceneNameField extends Component<\n  ParameterFieldProps,\n  {||}\n> {\n  _field: ?SemiControlledAutoCompleteInterface;\n\n  focus() {\n    if (this._field) this._field.focus();\n  }\n\n  render() {\n    const {\n      value,\n      onChange,\n      isInline,\n      project,\n      parameterMetadata,\n    } = this.props;\n    const layoutNames = project\n      ? enumerateLayouts(project).map(layout => layout.getName())\n      : [];\n\n    return (\n      <SemiControlledAutoComplete\n        margin={this.props.isInline ? 'none' : 'dense'}\n        floatingLabelText={\n          parameterMetadata ? parameterMetadata.getDescription() : undefined\n        }\n        helperMarkdownText={\n          parameterMetadata ? parameterMetadata.getLongDescription() : undefined\n        }\n        fullWidth\n        value={value}\n        onChange={onChange}\n        openOnFocus={isInline}\n        dataSource={layoutNames.map(layoutName => ({\n          text: `\"${layoutName}\"`,\n          value: `\"${layoutName}\"`,\n        }))}\n        hintText={'\"\"'}\n        ref={field => (this._field = field)}\n      />\n    );\n  }\n}\n","// @flow\nimport * as React from 'react';\nimport { instructionInvalidParameter } from './ClassNames';\n\ntype Props = {| children: React.Node, isEmpty?: boolean |};\n\n/**\n * Displayed when a parameter is invalid\n */\nexport default ({ children, isEmpty }: Props) =>\n  isEmpty ? (\n    <span className={instructionInvalidParameter}>&lt; {children} &gt;</span>\n  ) : (\n    <span className={instructionInvalidParameter}>{children}</span>\n  );\n","// @flow\nimport * as React from 'react';\nimport { instructionMissingParameter } from './ClassNames';\n\n/**\n * Displayed when a parameter is missing (i.e: empty and not optional)\n */\nexport default () => <span className={instructionMissingParameter} />;\n","// @flow\nimport { t } from '@lingui/macro';\n\nimport * as React from 'react';\nimport classNames from 'classnames';\nimport TextField from '../../../UI/TextField';\nimport {\n  largeSelectedArea,\n  largeSelectableArea,\n  selectableArea,\n  disabledText,\n} from '../ClassNames';\nimport { type EventRendererProps } from './EventRenderer';\nconst gd = global.gd;\n\nconst styles = {\n  container: {\n    height: 40,\n    display: 'flex',\n    alignItems: 'center',\n    padding: 5,\n    overflow: 'hidden',\n  },\n  title: {\n    fontSize: 18,\n    width: '100%',\n  },\n};\n\nexport default class GroupEvent extends React.Component<EventRendererProps, *> {\n  state = {\n    editing: false,\n  };\n  _textField: ?TextField = null;\n\n  edit = () => {\n    this.setState(\n      {\n        editing: true,\n      },\n      () => {\n        if (this._textField) this._textField.focus();\n      }\n    );\n  };\n\n  endEditing = () => {\n    this.setState({\n      editing: false,\n    });\n  };\n\n  render() {\n    var groupEvent = gd.asGroupEvent(this.props.event);\n\n    const r = groupEvent.getBackgroundColorR(),\n      g = groupEvent.getBackgroundColorG(),\n      b = groupEvent.getBackgroundColorB();\n\n    const textColor = (r + g + b) / 3 > 200 ? 'black' : 'white';\n\n    return (\n      <div\n        className={classNames({\n          [largeSelectableArea]: true,\n          [largeSelectedArea]: this.props.selected,\n        })}\n        style={{\n          ...styles.container,\n          backgroundColor: `rgb(${r}, ${g}, ${b})`,\n        }}\n        onClick={this.edit}\n      >\n        {this.state.editing ? (\n          <TextField\n            ref={textField => (this._textField = textField)}\n            value={groupEvent.getName()}\n            hintText={t`<Enter group name>`}\n            onBlur={this.endEditing}\n            onChange={(e, text) => {\n              groupEvent.setName(text);\n              this.forceUpdate();\n            }}\n            style={styles.title}\n            inputStyle={{\n              color: textColor,\n              WebkitTextFillColor: textColor,\n            }}\n            underlineFocusStyle={{\n              borderColor: textColor,\n            }}\n            fullWidth\n            id=\"group-title\"\n            onKeyUp={event => {\n              if (event.key === 'Escape') {\n                this.endEditing();\n              }\n            }}\n            onKeyPress={event => {\n              if (event.key === 'Enter') {\n                this.endEditing();\n              }\n            }}\n          />\n        ) : (\n          <span\n            className={classNames({\n              [selectableArea]: true,\n              [disabledText]: this.props.disabled,\n            })}\n            style={{ ...styles.title, color: textColor }}\n          >\n            {groupEvent.getName() || '<Enter group name>'}\n          </span>\n        )}\n      </div>\n    );\n  }\n}\n","// @flow\nimport { t } from '@lingui/macro';\n\nimport * as React from 'react';\nimport classNames from 'classnames';\nimport TextField from '../../../UI/TextField';\nimport { rgbToHex } from '../../../Utils/ColorTransformer';\nimport {\n  largeSelectedArea,\n  largeSelectableArea,\n  selectableArea,\n  disabledText,\n} from '../ClassNames';\nimport { type EventRendererProps } from './EventRenderer';\nconst gd = global.gd;\n\nconst commentTextStyle = {\n  width: '100%',\n  fontSize: 14,\n};\n\nconst styles = {\n  container: {\n    display: 'flex',\n    flexWrap: 'wrap',\n    padding: 5,\n    overflow: 'hidden',\n    minHeight: 35,\n  },\n  commentTextField: commentTextStyle,\n  commentSpan: {\n    ...commentTextStyle,\n    boxSizing: 'border-box',\n    alignItems: 'center',\n    height: '100%',\n    whiteSpace: 'pre-wrap',\n    lineHeight: 1.5,\n    border: 1,\n  },\n};\n\ntype State = {|\n  editing: boolean,\n|};\n\nexport default class CommentEvent extends React.Component<\n  EventRendererProps,\n  State\n> {\n  state = {\n    editing: false,\n  };\n\n  _selectable: ?HTMLSpanElement;\n  _textField: ?TextField;\n\n  edit = () => {\n    this.setState(\n      {\n        editing: true,\n      },\n      () => {\n        if (this._textField) this._textField.focus();\n      }\n    );\n  };\n\n  onEvent = (e: any, text: string) => {\n    const commentEvent = gd.asCommentEvent(this.props.event);\n    commentEvent.setComment(text);\n\n    this.props.onUpdate();\n    this.forceUpdate();\n  };\n\n  endEditing = () => {\n    if (!this._textField) return;\n\n    this.setState(\n      {\n        editing: false,\n      },\n      () => this.props.onUpdate()\n    );\n  };\n\n  _getCommentHTML = () => {\n    const commentEvent = gd.asCommentEvent(this.props.event);\n    return commentEvent\n      .getComment()\n      .replace(/&/g, '&amp;')\n      .replace(/</g, '&lt;')\n      .replace(/>/g, '&gt;')\n      .replace(/\\n/g, '<br>');\n  };\n\n  render() {\n    const commentEvent = gd.asCommentEvent(this.props.event);\n\n    const backgroundColor = rgbToHex(\n      commentEvent.getBackgroundColorRed(),\n      commentEvent.getBackgroundColorGreen(),\n      commentEvent.getBackgroundColorBlue()\n    );\n\n    const textColor = rgbToHex(\n      commentEvent.getTextColorRed(),\n      commentEvent.getTextColorGreen(),\n      commentEvent.getTextColorBlue()\n    );\n\n    return (\n      <div\n        className={classNames({\n          [largeSelectableArea]: true,\n          [largeSelectedArea]: this.props.selected,\n        })}\n        style={{\n          ...styles.container,\n          backgroundColor: `#${backgroundColor}`,\n        }}\n        onClick={this.edit}\n      >\n        {this.state.editing ? (\n          <TextField\n            multiLine\n            margin=\"none\"\n            ref={textField => (this._textField = textField)}\n            value={commentEvent.getComment()}\n            hintText={t`<Enter comment>`}\n            onBlur={this.endEditing}\n            onChange={this.onEvent}\n            style={styles.commentTextField}\n            inputStyle={{\n              color: `#${textColor}`,\n              padding: 0,\n              lineHeight: 1.5,\n            }}\n            underlineFocusStyle={{\n              borderColor: `#${textColor}`,\n            }}\n            fullWidth\n            id=\"comment-title\"\n            onKeyUp={event => {\n              if (event.key === 'Escape') {\n                this.endEditing();\n              }\n            }}\n          />\n        ) : (\n          <span\n            ref={selectable => (this._selectable = selectable)}\n            className={classNames({\n              [selectableArea]: true,\n              [disabledText]: this.props.disabled,\n            })}\n            style={{\n              ...styles.commentSpan,\n              color: `#${textColor}`,\n            }}\n            dangerouslySetInnerHTML={{\n              __html: this._getCommentHTML(),\n            }}\n          />\n        )}\n      </div>\n    );\n  }\n}\n","// @flow\nimport * as React from 'react';\nimport InstructionsList from '../InstructionsList.js';\nimport classNames from 'classnames';\nimport {\n  largeSelectedArea,\n  largeSelectableArea,\n  selectableArea,\n  executableEventContainer,\n  disabledText,\n} from '../ClassNames';\nimport InlinePopover from '../../InlinePopover';\nimport ObjectField from '../../ParameterFields/ObjectField';\nimport { type EventRendererProps } from './EventRenderer';\nimport ConditionsActionsColumns from '../ConditionsActionsColumns';\nconst gd = global.gd;\n\nconst styles = {\n  container: {\n    display: 'flex',\n    flexDirection: 'column',\n  },\n  instructionsContainer: {\n    display: 'flex',\n  },\n  actionsList: {\n    flex: 1,\n  },\n};\n\nexport default class ForEachEvent extends React.Component<\n  EventRendererProps,\n  *\n> {\n  _objectField: ?ObjectField = null;\n  state = {\n    editing: false,\n    anchorEl: null,\n  };\n\n  edit = (domEvent: any) => {\n    // We should not need to use a timeout, but\n    // if we don't do this, the InlinePopover's clickaway listener\n    // is immediately picking up the event and closing.\n    // Search the rest of the codebase for inlinepopover-event-hack\n    const anchorEl = domEvent.currentTarget;\n    setTimeout(\n      () =>\n        this.setState(\n          {\n            editing: true,\n            anchorEl,\n          },\n          () => {\n            // Give a bit of time for the popover to mount itself\n            setTimeout(() => {\n              if (this._objectField) this._objectField.focus();\n            }, 10);\n          }\n        ),\n      10\n    );\n  };\n\n  endEditing = () => {\n    this.setState({\n      editing: false,\n      anchorEl: null,\n    });\n  };\n\n  render() {\n    var forEachEvent = gd.asForEachEvent(this.props.event);\n\n    const objectName = forEachEvent.getObjectToPick();\n    return (\n      <div\n        style={styles.container}\n        className={classNames({\n          [largeSelectableArea]: true,\n          [largeSelectedArea]: this.props.selected,\n          [executableEventContainer]: true,\n        })}\n      >\n        <div>\n          <span\n            className={classNames({\n              [selectableArea]: true,\n              [disabledText]: this.props.disabled,\n            })}\n            onClick={this.edit}\n          >\n            {objectName ? (\n              `Repeat for each instance of ${objectName}:`\n            ) : (\n              <i>\n                Click to choose for which objects this event will be repeated\n              </i>\n            )}\n          </span>\n        </div>\n        <ConditionsActionsColumns\n          leftIndentWidth={this.props.leftIndentWidth}\n          windowWidth={this.props.windowWidth}\n          renderConditionsList={({ style, className }) => (\n            <InstructionsList\n              instrsList={forEachEvent.getConditions()}\n              style={style}\n              className={className}\n              selection={this.props.selection}\n              areConditions\n              onAddNewInstruction={this.props.onAddNewInstruction}\n              onPasteInstructions={this.props.onPasteInstructions}\n              onMoveToInstruction={this.props.onMoveToInstruction}\n              onMoveToInstructionsList={this.props.onMoveToInstructionsList}\n              onInstructionClick={this.props.onInstructionClick}\n              onInstructionDoubleClick={this.props.onInstructionDoubleClick}\n              onInstructionContextMenu={this.props.onInstructionContextMenu}\n              onAddInstructionContextMenu={\n                this.props.onAddInstructionContextMenu\n              }\n              onParameterClick={this.props.onParameterClick}\n              disabled={this.props.disabled}\n              renderObjectThumbnail={this.props.renderObjectThumbnail}\n              screenType={this.props.screenType}\n              windowWidth={this.props.windowWidth}\n            />\n          )}\n          renderActionsList={({ className }) => (\n            <InstructionsList\n              instrsList={forEachEvent.getActions()}\n              style={\n                {\n                  ...styles.actionsList,\n                } /* TODO: Use a new object to force update - somehow updates are not always propagated otherwise */\n              }\n              className={className}\n              selection={this.props.selection}\n              areConditions={false}\n              onAddNewInstruction={this.props.onAddNewInstruction}\n              onPasteInstructions={this.props.onPasteInstructions}\n              onMoveToInstruction={this.props.onMoveToInstruction}\n              onMoveToInstructionsList={this.props.onMoveToInstructionsList}\n              onInstructionClick={this.props.onInstructionClick}\n              onInstructionDoubleClick={this.props.onInstructionDoubleClick}\n              onInstructionContextMenu={this.props.onInstructionContextMenu}\n              onAddInstructionContextMenu={\n                this.props.onAddInstructionContextMenu\n              }\n              onParameterClick={this.props.onParameterClick}\n              disabled={this.props.disabled}\n              renderObjectThumbnail={this.props.renderObjectThumbnail}\n              screenType={this.props.screenType}\n              windowWidth={this.props.windowWidth}\n            />\n          )}\n        />\n        <InlinePopover\n          open={this.state.editing}\n          anchorEl={this.state.anchorEl}\n          onRequestClose={this.endEditing}\n        >\n          <ObjectField\n            project={this.props.project}\n            scope={this.props.scope}\n            globalObjectsContainer={this.props.globalObjectsContainer}\n            objectsContainer={this.props.objectsContainer}\n            value={objectName}\n            onChange={text => {\n              forEachEvent.setObjectToPick(text);\n              this.props.onUpdate();\n            }}\n            isInline\n            ref={objectField => (this._objectField = objectField)}\n          />\n        </InlinePopover>\n      </div>\n    );\n  }\n}\n","// @flow\nimport * as React from 'react';\nimport InstructionsList from '../InstructionsList.js';\nimport classNames from 'classnames';\nimport {\n  largeSelectedArea,\n  largeSelectableArea,\n  selectableArea,\n  executableEventContainer,\n  disabledText,\n} from '../ClassNames';\nimport InlinePopover from '../../InlinePopover';\nimport DefaultField from '../../ParameterFields/DefaultField';\nimport { type EventRendererProps } from './EventRenderer';\nimport ConditionsActionsColumns from '../ConditionsActionsColumns';\nconst gd = global.gd;\n\nconst styles = {\n  container: {\n    display: 'flex',\n    flexDirection: 'column',\n  },\n  instructionsContainer: {\n    display: 'flex',\n  },\n  actionsList: {\n    flex: 1,\n  },\n};\n\nexport default class RepeatEvent extends React.Component<\n  EventRendererProps,\n  *\n> {\n  _field: ?DefaultField = null;\n  state = {\n    editing: false,\n    anchorEl: null,\n  };\n\n  edit = (domEvent: any) => {\n    // We should not need to use a timeout, but\n    // if we don't do this, the InlinePopover's clickaway listener\n    // is immediately picking up the event and closing.\n    // Search the rest of the codebase for inlinepopover-event-hack\n    const anchorEl = domEvent.currentTarget;\n    setTimeout(\n      () =>\n        this.setState(\n          {\n            editing: true,\n            anchorEl,\n          },\n          () => {\n            // Give a bit of time for the popover to mount itself\n            setTimeout(() => {\n              if (this._field) this._field.focus();\n            }, 10);\n          }\n        ),\n      10\n    );\n  };\n\n  endEditing = () => {\n    this.setState({\n      editing: false,\n      anchorEl: null,\n    });\n  };\n\n  render() {\n    var repeatEvent = gd.asRepeatEvent(this.props.event);\n\n    const expression = repeatEvent.getRepeatExpression();\n    return (\n      <div\n        style={styles.container}\n        className={classNames({\n          [largeSelectableArea]: true,\n          [largeSelectedArea]: this.props.selected,\n          [executableEventContainer]: true,\n        })}\n      >\n        <div>\n          <span\n            className={classNames({\n              [selectableArea]: true,\n              [disabledText]: this.props.disabled,\n            })}\n            onClick={this.edit}\n          >\n            {expression ? (\n              `Repeat ${expression} times:`\n            ) : (\n              <i>Click to choose how many times will be repeated</i>\n            )}\n          </span>\n        </div>\n        <ConditionsActionsColumns\n          leftIndentWidth={this.props.leftIndentWidth}\n          windowWidth={this.props.windowWidth}\n          renderConditionsList={({ style, className }) => (\n            <InstructionsList\n              instrsList={repeatEvent.getConditions()}\n              style={style}\n              className={className}\n              selection={this.props.selection}\n              areConditions\n              onAddNewInstruction={this.props.onAddNewInstruction}\n              onPasteInstructions={this.props.onPasteInstructions}\n              onMoveToInstruction={this.props.onMoveToInstruction}\n              onMoveToInstructionsList={this.props.onMoveToInstructionsList}\n              onInstructionClick={this.props.onInstructionClick}\n              onInstructionDoubleClick={this.props.onInstructionDoubleClick}\n              onInstructionContextMenu={this.props.onInstructionContextMenu}\n              onAddInstructionContextMenu={\n                this.props.onAddInstructionContextMenu\n              }\n              onParameterClick={this.props.onParameterClick}\n              disabled={this.props.disabled}\n              renderObjectThumbnail={this.props.renderObjectThumbnail}\n              screenType={this.props.screenType}\n              windowWidth={this.props.windowWidth}\n            />\n          )}\n          renderActionsList={({ className }) => (\n            <InstructionsList\n              instrsList={repeatEvent.getActions()}\n              style={\n                {\n                  ...styles.actionsList,\n                } /* TODO: Use a new object to force update - somehow updates are not always propagated otherwise */\n              }\n              className={className}\n              selection={this.props.selection}\n              areConditions={false}\n              onAddNewInstruction={this.props.onAddNewInstruction}\n              onPasteInstructions={this.props.onPasteInstructions}\n              onMoveToInstruction={this.props.onMoveToInstruction}\n              onMoveToInstructionsList={this.props.onMoveToInstructionsList}\n              onInstructionClick={this.props.onInstructionClick}\n              onInstructionDoubleClick={this.props.onInstructionDoubleClick}\n              onInstructionContextMenu={this.props.onInstructionContextMenu}\n              onAddInstructionContextMenu={\n                this.props.onAddInstructionContextMenu\n              }\n              onParameterClick={this.props.onParameterClick}\n              disabled={this.props.disabled}\n              renderObjectThumbnail={this.props.renderObjectThumbnail}\n              screenType={this.props.screenType}\n              windowWidth={this.props.windowWidth}\n            />\n          )}\n        />\n        <InlinePopover\n          open={this.state.editing}\n          anchorEl={this.state.anchorEl}\n          onRequestClose={this.endEditing}\n        >\n          <DefaultField\n            project={this.props.project}\n            scope={this.props.scope}\n            globalObjectsContainer={this.props.globalObjectsContainer}\n            objectsContainer={this.props.objectsContainer}\n            value={expression}\n            onChange={text => {\n              repeatEvent.setRepeatExpression(text);\n              this.props.onUpdate();\n            }}\n            isInline\n            ref={field => (this._field = field)}\n          />\n        </InlinePopover>\n      </div>\n    );\n  }\n}\n","// @flow\nimport * as React from 'react';\nimport InstructionsList from '../InstructionsList';\nimport classNames from 'classnames';\nimport {\n  largeSelectedArea,\n  largeSelectableArea,\n  executableEventContainer,\n  disabledText,\n  conditionsContainer,\n} from '../ClassNames';\nimport { type EventRendererProps } from './EventRenderer';\nimport ConditionsActionsColumns from '../ConditionsActionsColumns';\nconst gd = global.gd;\n\nconst styles = {\n  container: {\n    display: 'flex',\n    flexDirection: 'column',\n  },\n  instructionsContainer: {\n    display: 'flex',\n  },\n  actionsList: {\n    flex: 1,\n  },\n};\n\nexport default class ForEachEvent extends React.Component<\n  EventRendererProps,\n  *\n> {\n  render() {\n    var whileEvent = gd.asWhileEvent(this.props.event);\n\n    return (\n      <div\n        style={styles.container}\n        className={classNames({\n          [largeSelectableArea]: true,\n          [largeSelectedArea]: this.props.selected,\n          [executableEventContainer]: true,\n        })}\n      >\n        <div\n          className={classNames({\n            [disabledText]: this.props.disabled,\n          })}\n        >\n          While these conditions are true:\n        </div>\n        <InstructionsList\n          instrsList={whileEvent.getWhileConditions()}\n          style={\n            {} /* TODO: Use a new object to force update - somehow updates are not always propagated otherwise */\n          }\n          className={conditionsContainer}\n          selection={this.props.selection}\n          areConditions\n          onAddNewInstruction={this.props.onAddNewInstruction}\n          onPasteInstructions={this.props.onPasteInstructions}\n          onMoveToInstruction={this.props.onMoveToInstruction}\n          onMoveToInstructionsList={this.props.onMoveToInstructionsList}\n          onInstructionClick={this.props.onInstructionClick}\n          onInstructionDoubleClick={this.props.onInstructionDoubleClick}\n          onInstructionContextMenu={this.props.onInstructionContextMenu}\n          onAddInstructionContextMenu={this.props.onAddInstructionContextMenu}\n          onParameterClick={this.props.onParameterClick}\n          disabled={this.props.disabled}\n          renderObjectThumbnail={this.props.renderObjectThumbnail}\n          screenType={this.props.screenType}\n          windowWidth={this.props.windowWidth}\n        />\n        <div\n          className={classNames({\n            [disabledText]: this.props.disabled,\n          })}\n        >\n          Repeat these:\n        </div>\n        <ConditionsActionsColumns\n          leftIndentWidth={this.props.leftIndentWidth}\n          windowWidth={this.props.windowWidth}\n          renderConditionsList={({ style, className }) => (\n            <InstructionsList\n              instrsList={whileEvent.getConditions()}\n              style={style}\n              className={className}\n              selection={this.props.selection}\n              areConditions\n              onAddNewInstruction={this.props.onAddNewInstruction}\n              onPasteInstructions={this.props.onPasteInstructions}\n              onMoveToInstruction={this.props.onMoveToInstruction}\n              onMoveToInstructionsList={this.props.onMoveToInstructionsList}\n              onInstructionClick={this.props.onInstructionClick}\n              onInstructionDoubleClick={this.props.onInstructionDoubleClick}\n              onInstructionContextMenu={this.props.onInstructionContextMenu}\n              onAddInstructionContextMenu={\n                this.props.onAddInstructionContextMenu\n              }\n              onParameterClick={this.props.onParameterClick}\n              disabled={this.props.disabled}\n              renderObjectThumbnail={this.props.renderObjectThumbnail}\n              screenType={this.props.screenType}\n              windowWidth={this.props.windowWidth}\n            />\n          )}\n          renderActionsList={({ className }) => (\n            <InstructionsList\n              instrsList={whileEvent.getActions()}\n              style={\n                {\n                  ...styles.actionsList,\n                } /* TODO: Use a new object to force update - somehow updates are not always propagated otherwise */\n              }\n              className={className}\n              selection={this.props.selection}\n              areConditions={false}\n              onAddNewInstruction={this.props.onAddNewInstruction}\n              onPasteInstructions={this.props.onPasteInstructions}\n              onMoveToInstruction={this.props.onMoveToInstruction}\n              onMoveToInstructionsList={this.props.onMoveToInstructionsList}\n              onInstructionClick={this.props.onInstructionClick}\n              onInstructionDoubleClick={this.props.onInstructionDoubleClick}\n              onInstructionContextMenu={this.props.onInstructionContextMenu}\n              onAddInstructionContextMenu={\n                this.props.onAddInstructionContextMenu\n              }\n              onParameterClick={this.props.onParameterClick}\n              disabled={this.props.disabled}\n              renderObjectThumbnail={this.props.renderObjectThumbnail}\n              screenType={this.props.screenType}\n              windowWidth={this.props.windowWidth}\n            />\n          )}\n        />\n      </div>\n    );\n  }\n}\n","// @flow\nimport { Trans } from '@lingui/macro';\nimport { t } from '@lingui/macro';\nimport { I18n } from '@lingui/react';\nimport { type I18n as I18nType } from '@lingui/core';\n\nimport * as React from 'react';\nimport OpenInNew from '@material-ui/icons/OpenInNew';\nimport IconButton from '../../../UI/IconButton';\nimport classNames from 'classnames';\nimport {\n  largeSelectedArea,\n  largeSelectableArea,\n  selectableArea,\n  linkContainer,\n  disabledText,\n} from '../ClassNames';\nimport InlinePopover from '../../InlinePopover';\nimport ExternalEventsField from '../../ParameterFields/ExternalEventsField';\nimport { showWarningBox } from '../../../UI/Messages/MessageBox';\nimport { type EventRendererProps } from './EventRenderer';\nconst gd = global.gd;\n\nconst styles = {\n  container: {\n    height: 60,\n    display: 'flex',\n    alignItems: 'center',\n    padding: 5,\n  },\n  title: {\n    fontSize: 18,\n  },\n};\n\nexport default class LinkEvent extends React.Component<EventRendererProps, *> {\n  _externalEventsField: ?ExternalEventsField = null;\n\n  state = {\n    editing: false,\n    anchorEl: null,\n  };\n\n  edit = (domEvent: any) => {\n    // We should not need to use a timeout, but\n    // if we don't do this, the InlinePopover's clickaway listener\n    // is immediately picking up the event and closing.\n    // Search the rest of the codebase for inlinepopover-event-hack\n    const anchorEl = domEvent.currentTarget;\n    setTimeout(\n      () =>\n        this.setState(\n          {\n            editing: true,\n            anchorEl,\n          },\n          () => {\n            // Give a bit of time for the popover to mount itself\n            setTimeout(() => {\n              if (this._externalEventsField) this._externalEventsField.focus();\n            }, 10);\n          }\n        ),\n      10\n    );\n  };\n\n  openTarget = (i18n: I18nType) => {\n    const { project, event, onOpenLayout, onOpenExternalEvents } = this.props;\n    const linkEvent = gd.asLinkEvent(event);\n    const target = linkEvent.getTarget();\n\n    if (project.hasExternalEventsNamed(target)) {\n      onOpenExternalEvents(target);\n    } else if (project.hasLayoutNamed(target)) {\n      onOpenLayout(target);\n    } else {\n      showWarningBox(\n        i18n._(\n          t`The specified external events do not exist in the game. Be sure that the name is correctly spelled or create them using the project manager.`\n        )\n      );\n    }\n  };\n\n  endEditing = () => {\n    this.setState({\n      editing: false,\n      anchorEl: null,\n    });\n  };\n\n  render() {\n    const linkEvent = gd.asLinkEvent(this.props.event);\n    const target = linkEvent.getTarget();\n\n    return (\n      <I18n>\n        {({ i18n }) => (\n          <div\n            className={classNames({\n              [largeSelectableArea]: true,\n              [largeSelectedArea]: this.props.selected,\n              [linkContainer]: true,\n            })}\n            style={styles.container}\n          >\n            <span\n              style={styles.title}\n              className={classNames({\n                [disabledText]: this.props.disabled,\n              })}\n            >\n              <Trans>Include events from</Trans>{' '}\n              <i\n                className={classNames({\n                  [selectableArea]: true,\n                })}\n                onClick={this.edit}\n              >\n                {target || (\n                  <Trans>&lt; Enter the name of external events &gt;</Trans>\n                )}\n              </i>\n            </span>\n            <IconButton\n              onClick={() => this.openTarget(i18n)}\n              disabled={!target}\n            >\n              <OpenInNew />\n            </IconButton>\n            <InlinePopover\n              open={this.state.editing}\n              anchorEl={this.state.anchorEl}\n              onRequestClose={this.endEditing}\n            >\n              <ExternalEventsField\n                project={this.props.project}\n                scope={this.props.scope}\n                globalObjectsContainer={this.props.globalObjectsContainer}\n                objectsContainer={this.props.objectsContainer}\n                value={target}\n                onChange={text => {\n                  linkEvent.setTarget(text);\n                  this.props.onUpdate();\n                }}\n                isInline\n                ref={externalEventsField =>\n                  (this._externalEventsField = externalEventsField)\n                }\n              />\n            </InlinePopover>\n          </div>\n        )}\n      </I18n>\n    );\n  }\n}\n","// @flow\nimport * as React from 'react';\n\nexport type WidthType = 'small' | 'medium' | 'large';\n\ntype Props = {|\n  children: (width: WidthType) => React.Node,\n|};\n\n/**\n * Pass the proper size to the children according to the window size.\n * This consider a window to be \"small\" if *both* the width and height\n * are small.\n */\nexport const ResponsiveWindowMeasurer = ({ children }: Props) => {\n  if (typeof window === 'undefined') {\n    return children('medium');\n  }\n\n  return children(\n    window.innerWidth < 750 || window.innerHeight < 475\n      ? 'small'\n      : window.innerWidth < 1150\n      ? 'medium'\n      : 'large'\n  );\n};\n","// @flow\nimport * as React from 'react';\nimport {\n  enumerateLayouts,\n  enumerateExternalEvents,\n} from '../../ProjectManager/EnumerateProjectItems';\nimport { type ParameterFieldProps } from './ParameterFieldCommons';\nimport SemiControlledAutoComplete, {\n  type DataSource,\n} from '../../UI/SemiControlledAutoComplete';\n\nconst getList = (project: ?gdProject): DataSource => {\n  if (!project) {\n    return [];\n  }\n\n  const externalEvents = enumerateExternalEvents(project).map(\n    externalEvents => ({\n      text: externalEvents.getName(),\n      value: externalEvents.getName(),\n    })\n  );\n  const layouts = enumerateLayouts(project).map(layout => ({\n    text: layout.getName(),\n    value: layout.getName(),\n  }));\n  return [...externalEvents, { type: 'separator' }, ...layouts];\n};\n\nexport default class ExternalEventsField extends React.Component<\n  ParameterFieldProps,\n  {||}\n> {\n  _field: ?any;\n\n  focus() {\n    if (this._field) this._field.focus();\n  }\n\n  render() {\n    const {\n      value,\n      onChange,\n      onRequestClose,\n      isInline,\n      project,\n      parameterMetadata,\n    } = this.props;\n\n    return (\n      <SemiControlledAutoComplete\n        margin={this.props.isInline ? 'none' : 'dense'}\n        floatingLabelText={\n          parameterMetadata ? parameterMetadata.getDescription() : undefined\n        }\n        helperMarkdownText={\n          parameterMetadata ? parameterMetadata.getLongDescription() : undefined\n        }\n        fullWidth\n        id=\"external-events-field\"\n        value={value}\n        onChange={onChange}\n        onRequestClose={onRequestClose}\n        dataSource={getList(project)}\n        openOnFocus={!isInline}\n        ref={field => (this._field = field)}\n      />\n    );\n  }\n}\n","// @flow\nimport * as React from 'react';\nimport ReactDOM from 'react-dom';\nimport classNames from 'classnames';\nimport InlinePopover from '../../InlinePopover';\nimport ObjectField from '../../ParameterFields/ObjectField';\nimport {\n  largeSelectedArea,\n  largeSelectableArea,\n  selectableArea,\n} from '../ClassNames';\nimport { getHelpLink } from '../../../Utils/HelpLink';\nimport { type EventRendererProps } from './EventRenderer';\nimport Measure from 'react-measure';\nimport { CodeEditor } from '../../../CodeEditor';\nconst gd = global.gd;\n\nconst fontFamily = '\"Lucida Console\", Monaco, monospace';\n\nconst styles = {\n  container: {\n    minHeight: 30,\n    display: 'flex',\n    flexDirection: 'column',\n    backgroundColor: '#1e1e1e',\n  },\n  wrappingText: {\n    fontFamily,\n    fontSize: '12px',\n    paddingLeft: 5,\n    paddingRight: 5,\n    margin: 0,\n    backgroundColor: '#1e1e1e',\n    color: '#d4d4d4',\n    overflowX: 'hidden',\n    maxWidth: '100%',\n  },\n  comment: {\n    color: '#777',\n  },\n  commentLink: {\n    cursor: 'pointer',\n    color: '#777',\n    textDecoration: 'underline',\n  },\n};\n\ntype State = {|\n  width: number,\n  editing: boolean,\n  editingObject: boolean,\n  anchorEl: ?any,\n|};\n\nexport default class JsCodeEvent extends React.Component<\n  EventRendererProps,\n  State\n> {\n  _objectField: ?ObjectField = null;\n  state = {\n    width: 0,\n    editing: false,\n    editingObject: false,\n    anchorEl: null,\n  };\n\n  _input: ?any;\n  _container: ?any;\n\n  edit = () => {\n    if (!this._container) return;\n\n    this.setState(\n      {\n        editing: true,\n      },\n      () => {\n        // $FlowFixMe\n        const input: ?HTMLInputElement = ReactDOM.findDOMNode(this._input);\n        if (input) {\n          input.focus();\n          input.value = gd.asJsCodeEvent(this.props.event).getInlineCode();\n        }\n      }\n    );\n  };\n\n  endEditing = () => {\n    const jsCodeEvent = gd.asJsCodeEvent(this.props.event);\n\n    // $FlowFixMe\n    const input: ?HTMLInputElement = ReactDOM.findDOMNode(this._input);\n    if (input) jsCodeEvent.setInlineCode(input.value);\n\n    this.setState(\n      {\n        editing: false,\n      },\n      () => this.props.onUpdate()\n    );\n  };\n\n  onChange = (newValue: string) => {\n    const jsCodeEvent = gd.asJsCodeEvent(this.props.event);\n    jsCodeEvent.setInlineCode(newValue);\n  };\n\n  editObject = (domEvent: any) => {\n    // We should not need to use a timeout, but\n    // if we don't do this, the InlinePopover's clickaway listener\n    // is immediately picking up the event and closing.\n    // Search the rest of the codebase for inlinepopover-event-hack\n    const anchorEl = domEvent.currentTarget;\n    setTimeout(\n      () =>\n        this.setState(\n          {\n            editingObject: true,\n            anchorEl,\n          },\n          () => {\n            // Give a bit of time for the popover to mount itself\n            setTimeout(() => {\n              if (this._objectField) this._objectField.focus();\n            }, 10);\n          }\n        ),\n      10\n    );\n  };\n\n  endObjectEditing = () => {\n    this.setState({\n      editingObject: false,\n      anchorEl: null,\n    });\n  };\n\n  render() {\n    const jsCodeEvent = gd.asJsCodeEvent(this.props.event);\n    const parameterObjects = jsCodeEvent.getParameterObjects();\n    const objects = (\n      <span\n        className={classNames({\n          [selectableArea]: true,\n        })}\n        onClick={this.editObject}\n      >\n        {parameterObjects\n          ? `, objects /*${parameterObjects}*/`\n          : ' /* Click here to choose objects to pass to JavaScript */'}\n      </span>\n    );\n\n    const eventsFunctionContext = this.props.scope.eventsFunction ? (\n      <span>, eventsFunctionContext</span>\n    ) : null;\n\n    const functionStart = (\n      <p style={styles.wrappingText}>\n        <span>{'(function(runtimeScene'}</span>\n        {objects}\n        {eventsFunctionContext}\n        <span>{') {'}</span>\n      </p>\n    );\n    const functionEnd = (\n      <p style={styles.wrappingText}>\n        <span>{'})(runtimeScene'}</span>\n        {objects}\n        {eventsFunctionContext}\n        <span>{');'}</span>\n        <span style={styles.comment}>\n          {' // '}\n          <a\n            href={getHelpLink('/events/js-code')}\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n            style={styles.commentLink}\n          >\n            Read the documentation and help\n          </a>\n        </span>\n      </p>\n    );\n\n    return (\n      <Measure onMeasure={({ width }) => this.setState({ width })}>\n        <div\n          style={styles.container}\n          className={classNames({\n            [largeSelectableArea]: true,\n            [largeSelectedArea]: this.props.selected,\n          })}\n          ref={container => (this._container = container)}\n        >\n          {functionStart}\n          <CodeEditor\n            value={jsCodeEvent.getInlineCode()}\n            onChange={this.onChange}\n            width={this.state.width}\n            onEditorMounted={() => this.props.onUpdate()}\n          />\n          {functionEnd}\n          <InlinePopover\n            open={this.state.editingObject}\n            anchorEl={this.state.anchorEl}\n            onRequestClose={this.endObjectEditing}\n          >\n            <ObjectField\n              project={this.props.project}\n              scope={this.props.scope}\n              globalObjectsContainer={this.props.globalObjectsContainer}\n              objectsContainer={this.props.objectsContainer}\n              value={parameterObjects}\n              onChange={text => {\n                jsCodeEvent.setParameterObjects(text);\n                this.props.onUpdate();\n              }}\n              isInline\n              ref={objectField => (this._objectField = objectField)}\n            />\n          </InlinePopover>\n        </div>\n      </Measure>\n    );\n  }\n}\n","// @flow\n\ntype WatchedComponent = {\n  +onHeightsChanged: Function => void,\n};\n\n/**\n * Store the height of events and notify a component whenever\n * heights have changed.\n * Needed for EventsTree as we need to tell it when heights have changed\n * so it can recompute the internal row heights of the react-virtualized List.\n */\nexport default class EventHeightsCache {\n  eventHeights = {};\n  updateTimeoutId: ?TimeoutID = null;\n  component: ?WatchedComponent = null;\n\n  constructor(component: WatchedComponent) {\n    this.component = component;\n  }\n\n  _notifyComponent() {\n    if (this.updateTimeoutId) {\n      return; // An update is already scheduled.\n    }\n\n    // Notify the component, on the next tick, that heights have changed\n    this.updateTimeoutId = setTimeout(() => {\n      if (this.component) {\n        this.component.onHeightsChanged(() => (this.updateTimeoutId = null));\n      } else {\n        this.updateTimeoutId = null;\n      }\n    }, 0);\n  }\n\n  setEventHeight(event: gdBaseEvent, height: number) {\n    const cachedHeight = this.eventHeights[event.ptr];\n    if (cachedHeight === undefined || cachedHeight !== height) {\n      // console.log(event.ptr, 'has a new height', height, 'old:', cachedHeight);\n      this._notifyComponent();\n    }\n\n    this.eventHeights[event.ptr] = height;\n  }\n\n  getEventHeight(event: gdBaseEvent): number {\n    return this.eventHeights[event.ptr] || 60;\n  }\n}\n","// @flow\n\n/*\n * Case Sensitive Slug method\n * Inspired by Aaron Stannard module (https://github.com/Aaronontheweb/node-slugs)\n */\nexport const caseSensitiveSlug = (\n  incString: string,\n  separator?: string,\n  preserved?: Array<string>\n): string => {\n  var p = ['.', '=', '-'];\n  var s = '-';\n\n  if (typeof preserved != 'undefined') {\n    p = preserved;\n  }\n\n  if (typeof separator != 'undefined') {\n    s = separator;\n  }\n\n  return incString\n    .replace(/ü/g, 'ue')\n    .replace(/ä/g, 'ae')\n    .replace(/ö/g, 'oe')\n    .replace(/ß/g, 'ss')\n    .replace(new RegExp('[' + p.join('') + ']', 'g'), ' ') //  replace preserved characters with spaces\n    .replace(/-{2,}/g, ' ') //  remove duplicate spaces\n    .replace(/^\\s\\s*/, '')\n    .replace(/\\s\\s*$/, '') //  trim both sides of string\n    .replace(/[^\\w ]/gi, '') //  replaces all non-alphanumeric with empty string\n    .replace(/[ ]/gi, s); //  Convert spaces to dashes\n};\n","// @flow\nimport Popover from '@material-ui/core/Popover';\n\nimport * as React from 'react';\nimport {\n  type ResourceSource,\n  type ChooseResourceFunction,\n} from '../../ResourcesList/ResourceSource.flow';\nimport { type ResourceExternalEditor } from '../../ResourcesList/ResourceExternalEditor.flow';\nimport { setupInstruction } from './InstructionParametersEditor';\nimport {\n  useNewInstructionEditor,\n  getInstructionMetadata,\n} from './NewInstructionEditor';\nimport InstructionOrObjectSelector, {\n  type TabName,\n} from './InstructionOrObjectSelector';\nimport InstructionOrExpressionSelector from './InstructionOrExpressionSelector';\nimport { type EventsScope } from '../../InstructionOrExpression/EventsScope.flow';\nimport { SelectColumns } from '../../UI/Reponsive/SelectColumns';\nimport useForceUpdate from '../../Utils/UseForceUpdate';\n\nconst styles = {\n  fullHeightSelector: {\n    flex: 1,\n    display: 'flex',\n    flexDirection: 'column',\n    height: '400px',\n    width: '400px',\n  },\n};\n\ntype StepName = 'object-or-free-instructions' | 'object-instructions';\n\ntype Props = {|\n  project: gdProject,\n  scope: EventsScope,\n  globalObjectsContainer: gdObjectsContainer,\n  objectsContainer: gdObjectsContainer,\n  instruction: gdInstruction,\n  isCondition: boolean,\n  resourceSources: Array<ResourceSource>,\n  onChooseResource: ChooseResourceFunction,\n  resourceExternalEditors: Array<ResourceExternalEditor>,\n  style?: Object,\n  anchorEl: ?HTMLElement,\n  isNewInstruction: boolean,\n  onCancel: () => void,\n  onSubmit: () => void,\n  open: boolean,\n  openInstructionOrExpression: (\n    extension: gdPlatformExtension,\n    type: string\n  ) => void,\n|};\n\n/**\n * An instruction editor in a popover.\n * Does not show the parameters for the instruction.\n */\nexport default function NewInstructionEditorMenu({\n  project,\n  globalObjectsContainer,\n  objectsContainer,\n  onCancel,\n  open,\n  instruction,\n  isCondition,\n  isNewInstruction,\n  anchorEl,\n  scope,\n  onSubmit,\n}: Props) {\n  const forceUpdate = useForceUpdate();\n  const [\n    newInstructionEditorState,\n    newInstructionEditorSetters,\n  ] = useNewInstructionEditor({\n    instruction,\n    isCondition,\n    project,\n    isNewInstruction,\n    scope,\n    globalObjectsContainer,\n    objectsContainer,\n  });\n  const {\n    chosenObjectName,\n    chosenObjectInstructionsInfo,\n    chosenObjectInstructionsInfoTree,\n  } = newInstructionEditorState;\n  const {\n    chooseFreeInstruction,\n    chooseObject,\n    chooseObjectInstruction,\n  } = newInstructionEditorSetters;\n  // As we're in a context menu, always start from 'object-or-free-instructions' step and with 'objects' tab.\n  const [step, setStep] = React.useState<StepName>(\n    'object-or-free-instructions'\n  );\n  const [\n    currentInstructionOrObjectSelectorTab,\n    setCurrentInstructionOrObjectSelectorTab,\n  ] = React.useState<TabName>('objects');\n  const instructionType: string = instruction.getType();\n\n  const submitInstruction = ({\n    instruction,\n    chosenObjectName,\n  }: {\n    instruction: gdInstruction,\n    chosenObjectName: ?string,\n  }) => {\n    const instructionMetadata = getInstructionMetadata({\n      instructionType: instruction.getType(),\n      isCondition,\n      project,\n    });\n    if (instructionMetadata) {\n      setupInstruction(instruction, instructionMetadata, chosenObjectName);\n    }\n    onSubmit();\n  };\n\n  const renderInstructionOrObjectSelector = () => (\n    <InstructionOrObjectSelector\n      key=\"instruction-or-object-selector\"\n      style={styles.fullHeightSelector}\n      project={project}\n      currentTab={currentInstructionOrObjectSelectorTab}\n      onChangeTab={setCurrentInstructionOrObjectSelectorTab}\n      globalObjectsContainer={globalObjectsContainer}\n      objectsContainer={objectsContainer}\n      isCondition={isCondition}\n      chosenInstructionType={!chosenObjectName ? instructionType : undefined}\n      onChooseInstruction={(instructionType: string) => {\n        const { instruction, chosenObjectName } = chooseFreeInstruction(\n          instructionType\n        );\n        submitInstruction({ instruction, chosenObjectName });\n      }}\n      chosenObjectName={chosenObjectName}\n      onChooseObject={chosenObjectName => {\n        chooseObject(chosenObjectName);\n        setStep('object-instructions');\n      }}\n      focusOnMount={!instructionType}\n      onSearchStartOrReset={forceUpdate}\n    />\n  );\n\n  const renderObjectInstructionSelector = () =>\n    chosenObjectInstructionsInfoTree && chosenObjectInstructionsInfo ? (\n      <InstructionOrExpressionSelector\n        key=\"object-instruction-selector\"\n        style={styles.fullHeightSelector}\n        instructionsInfo={chosenObjectInstructionsInfo}\n        instructionsInfoTree={chosenObjectInstructionsInfoTree}\n        iconSize={24}\n        onChoose={(instructionType: string) => {\n          const { instruction, chosenObjectName } = chooseObjectInstruction(\n            instructionType\n          );\n          submitInstruction({ instruction, chosenObjectName });\n        }}\n        selectedType={instructionType}\n        useSubheaders\n        focusOnMount={!instructionType}\n        searchPlaceholderObjectName={chosenObjectName}\n        searchPlaceholderIsCondition={isCondition}\n      />\n    ) : null;\n\n  return (\n    <Popover\n      open={open}\n      onClose={onCancel}\n      anchorEl={anchorEl}\n      anchorOrigin={{\n        vertical: 'bottom',\n        horizontal: 'left',\n      }}\n      transformOrigin={{\n        vertical: 'top',\n        horizontal: 'left',\n      }}\n    >\n      <SelectColumns\n        columnsRenderer={{\n          'instruction-or-object-selector': renderInstructionOrObjectSelector,\n          'object-instruction-selector': renderObjectInstructionSelector,\n        }}\n        getColumns={() => {\n          if (step === 'object-or-free-instructions') {\n            return ['instruction-or-object-selector'];\n          } else {\n            return ['object-instruction-selector'];\n          }\n        }}\n      />\n    </Popover>\n  );\n}\n","// @flow\nimport { Trans } from '@lingui/macro';\nimport { t } from '@lingui/macro';\n\nimport * as React from 'react';\nimport Dialog from '../../UI/Dialog';\nimport FlatButton from '../../UI/FlatButton';\nimport { Line, Column } from '../../UI/Grid';\nimport ColorPicker, { type RGBColor } from '../../UI/ColorField/ColorPicker';\nimport MiniToolbar, { MiniToolbarText } from '../../UI/MiniToolbar';\nimport SemiControlledTextField from '../../UI/SemiControlledTextField';\n\nconst gd = global.gd;\n\nconst styles = {\n  sizeTextField: {\n    width: 90,\n  },\n};\n\ntype Props = {|\n  event: gdBaseEvent,\n  onClose: () => void,\n  onApply: () => void,\n|};\n\ntype State = {|\n  textValue: string,\n  textColor: RGBColor,\n  backgroundColor: RGBColor,\n|};\n\nconst white: RGBColor = {\n  r: 255,\n  g: 255,\n  b: 255,\n};\n\nconst black: RGBColor = {\n  r: 0,\n  g: 0,\n  b: 0,\n};\n\nexport const filterEditableWithEventTextDialog = (\n  events: Array<gdBaseEvent>\n): Array<gdBaseEvent> => {\n  return events.filter(event =>\n    [\n      'BuiltinCommonInstructions::Group',\n      'BuiltinCommonInstructions::Comment',\n    ].includes(event.getType())\n  );\n};\n\nexport default class EventTextDialog extends React.Component<Props, State> {\n  _applyChangesOnEvent = () => {\n    const { event } = this.props;\n    const { textValue, textColor, backgroundColor } = this.state;\n    const eventType = event.getType();\n\n    if (eventType === 'BuiltinCommonInstructions::Comment') {\n      //Text value\n      gd.asCommentEvent(event).setComment(textValue);\n\n      //Text color\n      gd.asCommentEvent(event).setTextColor(\n        textColor.r,\n        textColor.g,\n        textColor.b\n      );\n      //Background color\n      gd.asCommentEvent(event).setBackgroundColor(\n        backgroundColor.r,\n        backgroundColor.g,\n        backgroundColor.b\n      );\n    } else if (eventType === 'BuiltinCommonInstructions::Group') {\n      //Text value\n      gd.asGroupEvent(event).setName(textValue);\n\n      //Text color for group not supported in Core, instead GroupEvent.js handle this\n      //Background color\n      gd.asGroupEvent(event).setBackgroundColor(\n        backgroundColor.r,\n        backgroundColor.g,\n        backgroundColor.b\n      );\n      return;\n    }\n  };\n\n  _getInitialStateFromEvent = (): State => {\n    const { event } = this.props;\n    const eventType = event.getType();\n\n    let textValue: string = '';\n    let textColor = black;\n    let backgroundColor = black;\n\n    if (eventType === 'BuiltinCommonInstructions::Comment') {\n      const commentEvent = gd.asCommentEvent(event);\n      textColor = {\n        r: commentEvent.getTextColorRed(),\n        g: commentEvent.getTextColorGreen(),\n        b: commentEvent.getTextColorBlue(),\n      };\n\n      backgroundColor = {\n        r: commentEvent.getBackgroundColorRed(),\n        g: commentEvent.getBackgroundColorGreen(),\n        b: commentEvent.getBackgroundColorBlue(),\n      };\n\n      textValue = gd.asCommentEvent(event).getComment();\n    } else if (eventType === 'BuiltinCommonInstructions::Group') {\n      var groupEvent = gd.asGroupEvent(event);\n      const r = groupEvent.getBackgroundColorR(),\n        g = groupEvent.getBackgroundColorG(),\n        b = groupEvent.getBackgroundColorB();\n\n      // Text color is automatically chosen for groups.\n      textColor = (r + g + b) / 3 > 200 ? black : white;\n\n      backgroundColor = {\n        r: groupEvent.getBackgroundColorR(),\n        g: groupEvent.getBackgroundColorG(),\n        b: groupEvent.getBackgroundColorB(),\n      };\n\n      textValue = gd.asGroupEvent(event).getName();\n    } else {\n      console.error(\n        'Dialog was opened for an unsupported event type: ' + eventType\n      );\n    }\n\n    return {\n      textValue,\n      textColor,\n      backgroundColor,\n    };\n  };\n\n  state = this._getInitialStateFromEvent();\n\n  render() {\n    const { event, onApply, onClose } = this.props;\n    const { textValue, textColor, backgroundColor } = this.state;\n    const eventType = event.getType();\n\n    return (\n      <Dialog\n        title={<Trans>Edit the event text</Trans>}\n        onRequestClose={onClose}\n        cannotBeDismissed={true}\n        open\n        noMargin\n        actions={[\n          <FlatButton\n            key=\"close\"\n            label={<Trans>Cancel</Trans>}\n            primary={false}\n            onClick={onClose}\n          />,\n          <FlatButton\n            key={'Apply'}\n            label={<Trans>Apply</Trans>}\n            primary\n            keyboardFocused\n            onClick={() => {\n              this._applyChangesOnEvent();\n              onApply();\n            }}\n          />,\n        ]}\n      >\n        <Column noMargin>\n          <MiniToolbar>\n            <MiniToolbarText>\n              <Trans>Background color:</Trans>\n            </MiniToolbarText>\n            <ColorPicker\n              style={styles.sizeTextField}\n              disableAlpha\n              color={backgroundColor}\n              onChangeComplete={color => {\n                this.setState({ backgroundColor: color.rgb });\n              }}\n            />\n\n            {eventType === 'BuiltinCommonInstructions::Comment' && (\n              <React.Fragment>\n                <MiniToolbarText>\n                  <Trans>Text color:</Trans>\n                </MiniToolbarText>\n                <ColorPicker\n                  style={styles.sizeTextField}\n                  disableAlpha\n                  color={textColor}\n                  onChangeComplete={color => {\n                    this.setState({ textColor: color.rgb });\n                  }}\n                />\n              </React.Fragment>\n            )}\n          </MiniToolbar>\n          <Line noMargin>\n            <Column expand>\n              <Line>\n                <SemiControlledTextField\n                  commitOnBlur\n                  hintText={t`Enter the text to be displayed`}\n                  fullWidth\n                  multiLine\n                  rows={8}\n                  rowsMax={30}\n                  value={textValue}\n                  onChange={value => {\n                    this.setState({\n                      textValue: value,\n                    });\n                  }}\n                />\n              </Line>\n            </Column>\n          </Line>\n        </Column>\n      </Dialog>\n    );\n  }\n}\n","//@flow\nimport { t } from '@lingui/macro';\nimport React, { PureComponent } from 'react';\nimport { ToolbarGroup } from '../UI/Toolbar';\nimport ToolbarSeparator from '../UI/ToolbarSeparator';\nimport ToolbarIcon from '../UI/ToolbarIcon';\nimport ElementWithMenu from '../UI/Menu/ElementWithMenu';\nimport { type EventMetadata } from './EnumerateEventsMetadata';\nimport PreviewButtons, {\n  type PreviewButtonSettings,\n} from '../MainFrame/Toolbar/PreviewButtons.js';\n\ntype Props = {|\n  showPreviewButton: boolean,\n  onPreview: () => void,\n  previewButtonSettings: PreviewButtonSettings,\n  showNetworkPreviewButton: boolean,\n  onNetworkPreview: () => void,\n  onOpenDebugger: () => void,\n  onAddStandardEvent: () => void,\n  onAddSubEvent: () => void,\n  canAddSubEvent: boolean,\n  onAddCommentEvent: () => void,\n  allEventsMetadata: Array<EventMetadata>,\n  onAddEvent: (eventType: string) => void,\n  onRemove: () => void,\n  canRemove: boolean,\n  undo: () => void,\n  canUndo: boolean,\n  redo: () => void,\n  canRedo: boolean,\n  onToggleSearchPanel: () => void,\n  onOpenSettings?: ?() => void,\n|};\n\nexport class Toolbar extends PureComponent<Props> {\n  render() {\n    return (\n      <ToolbarGroup lastChild>\n        <PreviewButtons\n          showPreviewButton={this.props.showPreviewButton}\n          onPreview={this.props.onPreview}\n          previewButtonSettings={this.props.previewButtonSettings}\n          onNetworkPreview={this.props.onNetworkPreview}\n          onOpenDebugger={this.props.onOpenDebugger}\n          showNetworkPreviewButton={this.props.showNetworkPreviewButton}\n        />\n        {this.props.showPreviewButton && <ToolbarSeparator />}\n        <ToolbarIcon\n          onClick={this.props.onAddStandardEvent}\n          src=\"res/ribbon_default/eventadd32.png\"\n          tooltip={t`Add a new empty event`}\n        />\n        <ToolbarIcon\n          onClick={this.props.onAddSubEvent}\n          src=\"res/ribbon_default/subeventadd32.png\"\n          disabled={!this.props.canAddSubEvent}\n          tooltip={t`Add a sub-event to the selected event`}\n        />\n        <ToolbarIcon\n          onClick={this.props.onAddCommentEvent}\n          src=\"res/ribbon_default/commentaireadd32.png\"\n          tooltip={t`Add a comment`}\n        />\n        <ElementWithMenu\n          element={\n            <ToolbarIcon\n              src=\"res/ribbon_default/add32.png\"\n              tooltip={t`Choose and add an event`}\n            />\n          }\n          buildMenuTemplate={() =>\n            this.props.allEventsMetadata.map(metadata => {\n              return {\n                label: metadata.fullName,\n                click: () => this.props.onAddEvent(metadata.type),\n              };\n            })\n          }\n        />\n        <ToolbarSeparator />\n        <ToolbarIcon\n          onClick={this.props.onRemove}\n          src=\"res/ribbon_default/deleteselected32.png\"\n          disabled={!this.props.canRemove}\n          tooltip={t`Delete the selected event(s)`}\n        />\n        <ToolbarIcon\n          onClick={this.props.undo}\n          src=\"res/ribbon_default/undo32.png\"\n          disabled={!this.props.canUndo}\n          tooltip={t`Undo the last changes`}\n        />\n        <ToolbarIcon\n          onClick={this.props.redo}\n          src=\"res/ribbon_default/redo32.png\"\n          disabled={!this.props.canRedo}\n          tooltip={t`Redo the last changes`}\n        />\n        <ToolbarSeparator />\n        <ToolbarIcon\n          onClick={() => this.props.onToggleSearchPanel()}\n          src=\"res/ribbon_default/search32.png\"\n          tooltip={t`Search in events`}\n          acceleratorString={'CmdOrCtrl+F'}\n        />\n        {this.props.onOpenSettings && <ToolbarSeparator />}\n        {this.props.onOpenSettings && (\n          <ToolbarIcon\n            onClick={this.props.onOpenSettings}\n            src=\"res/ribbon_default/pref32.png\"\n            tooltip={t`Open settings`}\n          />\n        )}\n      </ToolbarGroup>\n    );\n  }\n}\n\nexport default Toolbar;\n","// @flow\nconst LEFT_KEY = 37;\nconst UP_KEY = 38;\nconst RIGHT_KEY = 39;\nconst DOWN_KEY = 40;\nconst BACKSPACE_KEY = 8;\nconst DELETE_KEY = 46;\nconst EQUAL_KEY = 187;\nconst MINUS_KEY = 189;\nconst NUMPAD_ADD = 107;\nconst NUMPAD_SUBTRACT = 109;\nconst C_KEY = 67;\nconst F_KEY = 70;\nconst V_KEY = 86;\nconst X_KEY = 88;\nconst Y_KEY = 89;\nconst Z_KEY = 90;\n\ntype ShortcutCallbacks = {|\n  onDelete?: () => void,\n  onMove?: (number, number) => void,\n  onCopy?: () => void,\n  onCut?: () => void,\n  onPaste?: () => void,\n  onUndo?: () => void,\n  onRedo?: () => void,\n  onSearch?: () => void,\n  onZoomOut?: () => void,\n  onZoomIn?: () => void,\n|};\n\ntype ConstructorArgs = {|\n  isActive?: () => boolean,\n  shortcutCallbacks: ShortcutCallbacks,\n|};\n\n/**\n * Listen to keyboard shorcuts and call callbacks according to them.\n * Also store the state of the modifier keys (shift, ctrl, alt, meta) to know\n * if some special operations (multi selection, selection duplication) must\n * be done.\n *\n * `onKeyDown`, `onKeyUp` and other methods handling events (`onDragOver`...)\n * must be binded to the `div` element containing your component. We're not\n * using `document` to avoid issues with shortcuts being detected while a\n * component is not focused.\n */\nexport default class KeyboardShortcuts {\n  _shortcutCallbacks: ShortcutCallbacks;\n  _isActive: ?() => boolean;\n  _shiftPressed = false;\n  _ctrlPressed = false;\n  _altPressed = false;\n  _metaPressed = false;\n\n  constructor({ isActive, shortcutCallbacks }: ConstructorArgs) {\n    this._shortcutCallbacks = shortcutCallbacks;\n    this._isActive = isActive;\n  }\n\n  shouldCloneInstances() {\n    return this._isControlOrCmdPressed();\n  }\n\n  shouldMultiSelect() {\n    return this._shiftPressed;\n  }\n\n  _updateModifiersFromEvent = (evt: KeyboardEvent | DragEvent) => {\n    this._metaPressed = evt.metaKey;\n    this._altPressed = evt.altKey;\n    this._ctrlPressed = evt.ctrlKey;\n    this._shiftPressed = evt.shiftKey;\n  };\n\n  _isControlOrCmdPressed = () => {\n    // On macOS, meta key (Apple/Command key) acts as Control key on Windows/Linux.\n    return this._metaPressed || this._ctrlPressed;\n  };\n\n  onDragOver = (evt: DragEvent) => {\n    this._updateModifiersFromEvent(evt);\n  };\n\n  onKeyUp = (evt: KeyboardEvent) => {\n    this._updateModifiersFromEvent(evt);\n  };\n\n  onKeyDown = (evt: KeyboardEvent) => {\n    this._updateModifiersFromEvent(evt);\n\n    if (this._isActive && !this._isActive()) return;\n\n    const textEditorSelectors = 'textarea, input, [contenteditable=\"true\"]';\n    // $FlowFixMe\n    if (evt.target && evt.target.closest(textEditorSelectors)) {\n      return; // Something else is currently being edited.\n    }\n\n    const {\n      onDelete,\n      onMove,\n      onCopy,\n      onCut,\n      onPaste,\n      onUndo,\n      onRedo,\n      onSearch,\n      onZoomOut,\n      onZoomIn,\n    } = this._shortcutCallbacks;\n\n    if (onMove) {\n      if (evt.which === UP_KEY) {\n        onMove(0, -1);\n      } else if (evt.which === DOWN_KEY) {\n        onMove(0, 1);\n      } else if (evt.which === LEFT_KEY) {\n        onMove(-1, 0);\n      } else if (evt.which === RIGHT_KEY) {\n        onMove(1, 0);\n      }\n    }\n    if (onDelete && (evt.which === BACKSPACE_KEY || evt.which === DELETE_KEY)) {\n      onDelete();\n    }\n    if (onCopy && this._isControlOrCmdPressed() && evt.which === C_KEY) {\n      onCopy();\n    }\n    if (onCut && this._isControlOrCmdPressed() && evt.which === X_KEY) {\n      onCut();\n    }\n    if (onPaste && this._isControlOrCmdPressed() && evt.which === V_KEY) {\n      onPaste();\n    }\n    if (onUndo && this._isControlOrCmdPressed() && evt.which === Z_KEY) {\n      onUndo();\n    }\n    if (\n      onRedo &&\n      this._isControlOrCmdPressed() &&\n      evt.shiftKey &&\n      evt.which === Z_KEY\n    ) {\n      onRedo();\n    }\n    if (onRedo && this._isControlOrCmdPressed() && evt.which === Y_KEY) {\n      onRedo();\n    }\n    if (onSearch && this._isControlOrCmdPressed() && evt.which === F_KEY) {\n      onSearch();\n    }\n\n    if (onZoomOut && this._isControlOrCmdPressed() && evt.which === MINUS_KEY) {\n      onZoomOut();\n    }\n    if (onZoomOut && evt.which === NUMPAD_SUBTRACT) {\n      onZoomOut();\n    }\n\n    if (onZoomIn && this._isControlOrCmdPressed() && evt.which === EQUAL_KEY) {\n      onZoomIn();\n    }\n    if (onZoomIn && evt.which === NUMPAD_ADD) {\n      onZoomIn();\n    }\n  };\n}\n","// @flow\nimport * as React from 'react';\nimport InlinePopover from './InlinePopover';\nimport ParameterRenderingService from './ParameterRenderingService';\nimport {\n  type ResourceSource,\n  type ChooseResourceFunction,\n} from '../ResourcesList/ResourceSource.flow';\nimport { type ResourceExternalEditor } from '../ResourcesList/ResourceExternalEditor.flow';\nimport { type EventsScope } from '../InstructionOrExpression/EventsScope.flow';\nconst gd = global.gd;\n\ntype Props = {|\n  project: gdProject,\n  scope: EventsScope,\n  globalObjectsContainer: gdObjectsContainer,\n  objectsContainer: gdObjectsContainer,\n\n  open: boolean,\n  onRequestClose: () => void,\n  onChange: string => void,\n\n  instruction: ?gdInstruction,\n  isCondition: boolean,\n  parameterIndex: number,\n\n  anchorEl: ?any,\n\n  resourceSources: Array<ResourceSource>,\n  onChooseResource: ChooseResourceFunction,\n  resourceExternalEditors: Array<ResourceExternalEditor>,\n|};\n\ntype State = {|\n  parameterMetadata: ?gdParameterMetadata,\n  instructionMetadata: ?gdInstructionMetadata,\n  ParameterComponent: ?any,\n|};\n\nexport default class InlineParameterEditor extends React.Component<\n  Props,\n  State\n> {\n  state = {\n    parameterMetadata: null,\n    instructionMetadata: null,\n    ParameterComponent: null,\n  };\n\n  _field: ?any;\n\n  componentWillReceiveProps(newProps: Props) {\n    if (\n      (newProps.open && !this.props.open) ||\n      newProps.instruction !== this.props.instruction\n    ) {\n      this._loadComponentFromInstruction(newProps);\n    }\n  }\n\n  _unload() {\n    this.setState({\n      ParameterComponent: null,\n      parameterMetadata: null,\n      instructionMetadata: null,\n    });\n  }\n\n  _loadComponentFromInstruction(props: Props) {\n    const { project, isCondition, instruction, parameterIndex } = props;\n    if (!instruction) return this._unload();\n\n    const type = instruction.getType();\n    const instructionMetadata = isCondition\n      ? gd.MetadataProvider.getConditionMetadata(\n          project.getCurrentPlatform(),\n          type\n        )\n      : gd.MetadataProvider.getActionMetadata(\n          project.getCurrentPlatform(),\n          type\n        );\n\n    if (parameterIndex >= instructionMetadata.getParametersCount())\n      return this._unload();\n\n    const parameterMetadata = instructionMetadata.getParameter(parameterIndex);\n    const ParameterComponent = ParameterRenderingService.getParameterComponent(\n      parameterMetadata.getType()\n    );\n    this.setState(\n      {\n        ParameterComponent,\n        parameterMetadata,\n        instructionMetadata,\n      },\n      () => {\n        // Give a bit of time for the popover to mount itself\n        setTimeout(() => {\n          if (this._field && this._field.focus) this._field.focus();\n        }, 10);\n      }\n    );\n  }\n\n  render() {\n    if (!this.state.ParameterComponent || !this.props.open) return null;\n    const instruction = this.props.instruction;\n    if (!instruction) return null;\n\n    const { ParameterComponent } = this.state;\n\n    return (\n      <InlinePopover\n        open={this.props.open}\n        anchorEl={this.props.anchorEl}\n        onRequestClose={this.props.onRequestClose}\n      >\n        <ParameterComponent\n          instruction={instruction}\n          instructionMetadata={this.state.instructionMetadata}\n          parameterMetadata={this.state.parameterMetadata}\n          parameterIndex={this.props.parameterIndex}\n          value={instruction.getParameter(this.props.parameterIndex)}\n          onChange={this.props.onChange}\n          onRequestClose={this.props.onRequestClose}\n          project={this.props.project}\n          scope={this.props.scope}\n          globalObjectsContainer={this.props.globalObjectsContainer}\n          objectsContainer={this.props.objectsContainer}\n          key={instruction.ptr}\n          ref={field => (this._field = field)}\n          parameterRenderingService={ParameterRenderingService}\n          isInline\n          resourceSources={this.props.resourceSources}\n          onChooseResource={this.props.onChooseResource}\n          resourceExternalEditors={this.props.resourceExternalEditors}\n        />\n      </InlinePopover>\n    );\n  }\n}\n","// @flow\nimport { Trans } from '@lingui/macro';\n\nimport * as React from 'react';\nimport PlaceholderMessage from '../UI/PlaceholderMessage';\nimport HelpButton from '../UI/HelpButton';\nimport Text from '../UI/Text';\n\nconst EmptyEventsPlaceholder = () => (\n  <PlaceholderMessage>\n    <Text>\n      <Trans>\n        There are no events here. Events are composed of conditions and actions.\n      </Trans>\n    </Text>\n    <Text>\n      <Trans>\n        Add your first event using the first buttons of the toolbar.\n      </Trans>\n    </Text>\n    <HelpButton helpPagePath=\"/events\" />\n  </PlaceholderMessage>\n);\n\nexport default EmptyEventsPlaceholder;\n","//@flow\nconst gd = global.gd;\n\nexport const ensureSingleOnceInstructions = (\n  instructionsList: gdInstructionsList\n) => {\n  let hasEndingOnceInstruction = false;\n  let hasInvalidOnce = false;\n  for (let i = instructionsList.size() - 1; i >= 0; --i) {\n    const instruction = instructionsList.get(i);\n    if (i === instructionsList.size() - 1) {\n      if (instruction.getType() === 'BuiltinCommonInstructions::Once') {\n        hasEndingOnceInstruction = true;\n      }\n    } else {\n      if (instruction.getType() === 'BuiltinCommonInstructions::Once') {\n        instructionsList.removeAt(i);\n        hasInvalidOnce = true;\n      }\n    }\n  }\n\n  if (hasInvalidOnce && !hasEndingOnceInstruction) {\n    const onceInstruction = new gd.Instruction();\n    onceInstruction.setType('BuiltinCommonInstructions::Once');\n    instructionsList.insert(onceInstruction, instructionsList.size());\n    onceInstruction.delete();\n  }\n\n  return hasInvalidOnce;\n};\n","// @flow\nimport { Trans } from '@lingui/macro';\n\nimport * as React from 'react';\nimport Dialog from '../UI/Dialog';\nimport FlatButton from '../UI/FlatButton';\nimport Text from '../UI/Text';\n\nexport type EventsContextResult = {|\n  objectsNames: Array<string>,\n  objectOrGroupNames: Array<string>,\n  objectOrGroupBehaviorNames: {\n    [string]: Array<string>,\n  },\n|};\n\n// Store in a EventsContextResult the content of a gd.EventsContext.\n// In theory not necessary, but easier than storing,\n// passing around, and properly delete a gd.EventsContext.\nexport const toEventsContextResult = (\n  eventsContext: gdEventsContext\n): EventsContextResult => {\n  const objectsNames = eventsContext\n    .getObjectNames()\n    .toNewVectorString()\n    .toJSArray();\n  const objectOrGroupNames = eventsContext\n    .getReferencedObjectOrGroupNames()\n    .toNewVectorString()\n    .toJSArray();\n\n  const objectOrGroupBehaviorNames = {};\n  objectOrGroupNames.forEach(objectOrGroupName => {\n    const behaviorNames = eventsContext\n      .getBehaviorNamesOfObjectOrGroup(objectOrGroupName)\n      .toNewVectorString()\n      .toJSArray();\n\n    if (behaviorNames.length) {\n      objectOrGroupBehaviorNames[objectOrGroupName] = behaviorNames;\n    }\n  });\n\n  return {\n    objectsNames,\n    objectOrGroupNames,\n    objectOrGroupBehaviorNames,\n  };\n};\n\ntype Props = {|\n  onClose: () => void,\n  eventsContextResult: EventsContextResult,\n|};\n\nexport default class EventsContextAnalyzerDialog extends React.Component<\n  Props,\n  {}\n> {\n  render() {\n    const { onClose, eventsContextResult } = this.props;\n    const actions = [\n      <FlatButton\n        key=\"close\"\n        label={<Trans>Close</Trans>}\n        primary={true}\n        onClick={this.props.onClose}\n      />,\n    ];\n\n    return (\n      <Dialog\n        actions={actions}\n        cannotBeDismissed={false}\n        open\n        onRequestClose={onClose}\n      >\n        <Text>\n          <Trans>\n            Objects or groups being directly referenced in the events:{' '}\n            {eventsContextResult.objectOrGroupNames.join(', ')}\n          </Trans>\n        </Text>\n        <Text>\n          <Trans>\n            All objects potentially used in events:{' '}\n            {eventsContextResult.objectsNames.join(', ')}\n          </Trans>\n        </Text>\n        <Text>\n          <Trans>All behaviors being directly referenced in the events:</Trans>{' '}\n          {Object.keys(eventsContextResult.objectOrGroupBehaviorNames).map(\n            objectOrGroupName => {\n              return (\n                <Trans key={objectOrGroupName}>\n                  Behaviors of {objectOrGroupName}:{' '}\n                  {eventsContextResult.objectOrGroupBehaviorNames[\n                    objectOrGroupName\n                  ].join(', ')}\n                  ;{' '}\n                </Trans>\n              );\n            }\n          )}\n        </Text>\n      </Dialog>\n    );\n  }\n}\n","// @flow\nimport { Trans } from '@lingui/macro';\nimport { t } from '@lingui/macro';\n\nimport React, { PureComponent } from 'react';\nimport Background from '../UI/Background';\nimport TextField from '../UI/TextField';\nimport { Line, Column, Spacer } from '../UI/Grid';\nimport ChevronLeft from '@material-ui/icons/ChevronLeft';\nimport ChevronRight from '@material-ui/icons/ChevronRight';\nimport IconButton from '../UI/IconButton';\nimport InlineCheckbox from '../UI/InlineCheckbox';\nimport Text from '../UI/Text';\nimport {\n  type SearchInEventsInputs,\n  type ReplaceInEventsInputs,\n} from './EventsSearcher';\nimport RaisedButton from '../UI/RaisedButton';\n\ntype Props = {|\n  onSearchInEvents: SearchInEventsInputs => void,\n  onReplaceInEvents: ReplaceInEventsInputs => void,\n  resultsCount: ?number,\n  hasEventSelected: boolean,\n  onGoToPreviousSearchResult: () => ?gdBaseEvent,\n  onGoToNextSearchResult: () => ?gdBaseEvent,\n|};\ntype State = {|\n  searchText: string,\n  replaceText: string,\n  matchCase: boolean,\n  searchInActions: boolean,\n  searchInConditions: boolean,\n  searchInEventStrings: boolean,\n  searchInSelection: boolean,\n|};\n\nexport default class SearchPanel extends PureComponent<Props, State> {\n  searchTextField: ?TextField;\n  state = {\n    searchText: '',\n    replaceText: '',\n    matchCase: false,\n    searchInActions: true,\n    searchInConditions: true,\n    searchInEventStrings: true,\n    searchInSelection: false,\n  };\n\n  focus = () => {\n    if (this.searchTextField) {\n      this.searchTextField.focus();\n    }\n  };\n\n  launchSearch = () => {\n    const {\n      searchText,\n      searchInSelection,\n      matchCase,\n      searchInActions,\n      searchInConditions,\n      searchInEventStrings,\n    } = this.state;\n    this.props.onSearchInEvents({\n      searchInSelection,\n      searchText,\n      matchCase,\n      searchInActions,\n      searchInConditions,\n      searchInEventStrings,\n    });\n  };\n\n  launchReplace = () => {\n    const {\n      searchText,\n      replaceText,\n      searchInSelection,\n      matchCase,\n      searchInActions,\n      searchInConditions,\n      searchInEventStrings,\n    } = this.state;\n\n    this.launchSearch();\n\n    this.props.onReplaceInEvents({\n      searchInSelection,\n      searchText,\n      replaceText,\n      matchCase,\n      searchInActions,\n      searchInConditions,\n      searchInEventStrings,\n    });\n  };\n\n  render() {\n    const {\n      resultsCount,\n      hasEventSelected,\n      onGoToPreviousSearchResult,\n      onGoToNextSearchResult,\n    } = this.props;\n    const { searchText, replaceText, searchInSelection } = this.state;\n\n    return (\n      <Background noFullHeight noExpand>\n        <Column>\n          <Line alignItems=\"baseline\" noMargin>\n            <TextField\n              margin=\"dense\"\n              ref={_searchTextField =>\n                (this.searchTextField = _searchTextField)\n              }\n              hintText={t`Text to search in parameters`}\n              onChange={(e, searchText) => this.setState({ searchText })}\n              value={searchText}\n              fullWidth\n            />\n            <Spacer />\n            <RaisedButton\n              disabled={!searchText}\n              primary\n              label={<Trans>Search</Trans>}\n              onClick={this.launchSearch}\n            />\n          </Line>\n          <Line alignItems=\"baseline\" noMargin>\n            <TextField\n              margin=\"dense\"\n              hintText={t`Text to replace in parameters`}\n              onChange={(e, replaceText) => this.setState({ replaceText })}\n              value={replaceText}\n              fullWidth\n            />\n            <Spacer />\n            <RaisedButton\n              disabled={\n                !replaceText ||\n                !searchText ||\n                (!hasEventSelected && searchInSelection)\n              }\n              label={<Trans>Replace</Trans>}\n              onClick={this.launchReplace}\n            />\n          </Line>\n          <Line noMargin alignItems=\"center\" justifyContent=\"space-between\">\n            <Line noMargin alignItems=\"center\">\n              <InlineCheckbox\n                label={<Trans>Case insensitive</Trans>}\n                checked={!this.state.matchCase}\n                onCheck={(e, checked) => this.setState({ matchCase: !checked })}\n              />\n              <Text>\n                <Trans>Search in:</Trans>\n              </Text>\n              <Spacer />\n              <InlineCheckbox\n                label={<Trans>Conditions</Trans>}\n                checked={this.state.searchInConditions}\n                onCheck={(e, checked) =>\n                  this.setState({ searchInConditions: checked })\n                }\n              />\n              <InlineCheckbox\n                label={<Trans>Actions</Trans>}\n                checked={this.state.searchInActions}\n                onCheck={(e, checked) =>\n                  this.setState({ searchInActions: checked })\n                }\n              />\n              <InlineCheckbox\n                label={<Trans>Texts</Trans>}\n                checked={this.state.searchInEventStrings}\n                onCheck={(e, checked) =>\n                  this.setState({ searchInEventStrings: checked })\n                }\n              />\n              {/* <InlineCheckbox //TODO: Implement search/replace in selection\n                label={<Trans>Replace in selection</Trans>}\n                checked={this.state.searchInSelection}\n                onCheck={(e, checked) =>\n                  this.setState({ searchInSelection: checked })}\n              /> */}\n            </Line>\n            <Line noMargin alignItems=\"center\">\n              <Text>\n                {resultsCount === null || resultsCount === undefined\n                  ? ''\n                  : resultsCount !== 0\n                  ? `${resultsCount} results`\n                  : `No results`}\n              </Text>\n              <IconButton\n                disabled={!resultsCount}\n                onClick={() => {\n                  onGoToPreviousSearchResult();\n                }}\n              >\n                <ChevronLeft />\n              </IconButton>\n              <IconButton\n                disabled={!resultsCount}\n                onClick={() => {\n                  onGoToNextSearchResult();\n                }}\n              >\n                <ChevronRight />\n              </IconButton>\n            </Line>\n          </Line>\n        </Column>\n      </Background>\n    );\n  }\n}\n","// @flow\nimport * as React from 'react';\nimport { type SelectionState } from './SelectionHandler';\nimport { mapFor } from '../Utils/MapFor';\nimport uniqBy from 'lodash/uniqBy';\nconst gd = global.gd;\n\nexport type SearchInEventsInputs = {|\n  searchInSelection: boolean,\n  searchText: string,\n  matchCase: boolean,\n  searchInConditions: boolean,\n  searchInActions: boolean,\n  searchInEventStrings: boolean,\n|};\n\nexport type ReplaceInEventsInputs = {|\n  searchInSelection: boolean,\n  searchText: string,\n  replaceText: ?string,\n  matchCase: boolean,\n  searchInConditions: boolean,\n  searchInActions: boolean,\n  searchInEventStrings: boolean,\n|};\n\ntype State = {|\n  eventsSearchResults: ?gdVectorEventsSearchResult,\n  searchFocusOffset: ?number,\n|};\n\ntype Props = {|\n  globalObjectsContainer: gdProject,\n  objectsContainer: gdLayout,\n  events: gdEventsList,\n  selection: SelectionState,\n  children: (props: {|\n    eventsSearchResultEvents: ?Array<gdBaseEvent>,\n    searchFocusOffset: ?number,\n    searchInEvents: (SearchInEventsInputs, cb: () => void) => void,\n    replaceInEvents: ReplaceInEventsInputs => void,\n    goToNextSearchResult: () => ?gdBaseEvent,\n    goToPreviousSearchResult: () => ?gdBaseEvent,\n  |}) => React.Node,\n|};\n\n/**\n * Component allowing to do search in events and pass the results\n * to its children components, as well as methods to browse the results.\n */\nexport default class EventsSearcher extends React.Component<Props, State> {\n  state = {\n    eventsSearchResults: null, // The list of results\n    searchFocusOffset: null,\n  };\n\n  // The list containing the raw events results. Should be derived from this.state.eventsSearchResults using\n  // this._updateListOfResultEvents before being used.\n  _resultEvents: ?Array<gdBaseEvent> = null;\n\n  componentWillUnmount() {\n    if (this.state.eventsSearchResults) this.state.eventsSearchResults.delete();\n  }\n\n  reset() {\n    if (this.state.eventsSearchResults) this.state.eventsSearchResults.delete();\n\n    this._resultEvents = null;\n    this.setState({\n      eventsSearchResults: null,\n      searchFocusOffset: null,\n    });\n  }\n\n  _doReplaceInEvents = ({\n    searchInSelection,\n    searchText,\n    replaceText,\n    matchCase,\n    searchInConditions,\n    searchInActions,\n    searchInEventStrings,\n  }: ReplaceInEventsInputs) => {\n    const { globalObjectsContainer, objectsContainer, events } = this.props;\n\n    if (searchInSelection) {\n      // Replace in selection is a bit tricky to implement as it requires to have a list\n      // of events (gd.EventsList) pointing to the same events. Need some workaround/helper\n      // function to be done in C++.\n      console.error('Replace in selection is not implemented yet');\n    }\n\n    gd.EventsRefactorer.replaceStringInEvents(\n      globalObjectsContainer,\n      objectsContainer,\n      events,\n      searchText,\n      replaceText,\n      matchCase,\n      searchInConditions,\n      searchInActions,\n      searchInEventStrings\n    );\n  };\n\n  _doSearchInEvents = (\n    {\n      searchInSelection,\n      searchText,\n      matchCase,\n      searchInConditions,\n      searchInActions,\n      searchInEventStrings,\n    }: SearchInEventsInputs,\n    cb: () => void\n  ) => {\n    const { globalObjectsContainer, objectsContainer, events } = this.props;\n\n    if (searchInSelection) {\n      // Search in selection is a bit tricky to implement as it requires to have a list\n      // of events (gd.EventsList) pointing to the same events. Need some workaround/helper\n      // function to be done in C++.\n      console.error('Search in selection is not implemented yet');\n    }\n\n    const newEventsSearchResults = gd.EventsRefactorer.searchInEvents(\n      globalObjectsContainer,\n      objectsContainer,\n      events,\n      searchText,\n      matchCase,\n      searchInConditions,\n      searchInActions,\n      searchInEventStrings\n    );\n\n    if (this.state.eventsSearchResults) {\n      this.state.eventsSearchResults.delete();\n    }\n    this.setState(\n      {\n        eventsSearchResults: newEventsSearchResults.clone(),\n        searchFocusOffset: null,\n      },\n      () => {\n        this._updateListOfResultEvents();\n        cb();\n      }\n    );\n  };\n\n  _updateListOfResultEvents = () => {\n    const { eventsSearchResults } = this.state;\n    if (!eventsSearchResults) {\n      this._resultEvents = null;\n      return;\n    }\n\n    const resultEventsWithDuplicates = mapFor(\n      0,\n      eventsSearchResults.size(),\n      i => {\n        const eventsSearchResult = eventsSearchResults.at(i);\n        return eventsSearchResult.isEventValid()\n          ? eventsSearchResult.getEvent()\n          : null;\n      }\n    ).filter(Boolean);\n\n    // Store a list of unique events, because browsing for results in the events\n    // tree is made event by event.\n    this._resultEvents = uniqBy(resultEventsWithDuplicates, event => event.ptr);\n  };\n\n  _goToSearchResults = (step: number): ?gdBaseEvent => {\n    this._updateListOfResultEvents();\n    if (!this._resultEvents || this._resultEvents.length === 0) {\n      this.setState({ searchFocusOffset: null });\n      return null;\n    }\n\n    let newSearchFocusOffset =\n      this.state.searchFocusOffset === null\n        ? 0\n        : ((this.state.searchFocusOffset || 0) + step) %\n          this._resultEvents.length;\n    if (newSearchFocusOffset < 0)\n      newSearchFocusOffset += this._resultEvents.length;\n\n    const event = this._resultEvents[newSearchFocusOffset];\n    setTimeout(\n      // Change the offset on next tick to give a chance to children to unfold events before focusing it.\n      () => this.setState({ searchFocusOffset: newSearchFocusOffset }),\n      0\n    );\n    return event;\n  };\n\n  _goToPreviousSearchResult = (): ?gdBaseEvent => {\n    return this._goToSearchResults(-1);\n  };\n\n  _goToNextSearchResult = (): ?gdBaseEvent => {\n    return this._goToSearchResults(+1);\n  };\n\n  render() {\n    return this.props.children({\n      eventsSearchResultEvents: this._resultEvents,\n      searchFocusOffset: this.state.searchFocusOffset,\n      searchInEvents: this._doSearchInEvents,\n      replaceInEvents: this._doReplaceInEvents,\n      goToNextSearchResult: this._goToNextSearchResult,\n      goToPreviousSearchResult: this._goToPreviousSearchResult,\n    });\n  }\n}\n","const gd = global.gd;\n\nexport const containsSubInstructions = (\n  instruction: gdInstruction,\n  instructionsList: gdInstructionsList\n) => {\n  const subInstructionsList = instruction.getSubInstructions();\n  if (gd.compare(subInstructionsList, instructionsList)) return true;\n\n  for (let i = 0; i < subInstructionsList.size(); ++i) {\n    const subInstruction = subInstructionsList.get(i);\n    if (containsSubInstructions(subInstruction, instructionsList)) return true;\n  }\n\n  return false;\n};\n","// @flow\nimport * as React from 'react';\nimport MUITabs from '@material-ui/core/Tabs';\nimport MUITab from '@material-ui/core/Tab';\n\n// We support a subset of the props supported by Material-UI v0.x Tabs\n// They should be self descriptive - refer to Material UI docs otherwise.\ntype TabsProps<TabName> = {|\n  value?: TabName,\n  onChange: TabName => void,\n  children: React.Node, // Should be Tab\n|};\n\n/**\n * Tabs based on Material-UI Tabs.\n */\nexport class Tabs<TabName> extends React.Component<TabsProps<TabName>, {||}> {\n  render() {\n    return (\n      <MUITabs\n        variant=\"fullWidth\"\n        textColor=\"primary\"\n        value={this.props.value}\n        onChange={(e, newValue) => this.props.onChange(newValue)}\n      >\n        {this.props.children}\n      </MUITabs>\n    );\n  }\n}\n\n// We support a subset of the props supported by Material-UI v0.x Tabs\n// They should be self descriptive - refer to Material UI docs otherwise.\ntype TabProps = {|\n  label: React.Node,\n  value: string,\n  tabIndex?: string,\n|};\n\n/**\n * A Tab based on Material-UI Tab.\n */\nexport class Tab extends React.Component<TabProps, {||}> {\n  render() {\n    return <MUITab {...this.props} />;\n  }\n}\n","// @flow\n\nimport flatten from 'lodash/flatten';\nimport { mapFor } from '../Utils/MapFor';\nconst gd = global.gd;\n\nexport type EventMetadata = {|\n  type: string,\n  fullName: string,\n  description: string,\n|};\n\nexport const enumerateEventsMetadata = (): Array<EventMetadata> => {\n  const allExtensions = gd\n    .asPlatform(gd.JsPlatform.get())\n    .getAllPlatformExtensions();\n\n  return flatten(\n    mapFor(0, allExtensions.size(), i => {\n      const extension = allExtensions.get(i);\n      const extensionEvents = extension.getAllEvents();\n\n      return extensionEvents\n        .keys()\n        .toJSArray()\n        .map(type => {\n          const metadata = extensionEvents.get(type);\n          return {\n            type,\n            fullName: metadata.getFullName(),\n            description: metadata.getDescription(),\n          };\n        });\n    })\n  );\n};\n","// @flow\nimport { Trans } from '@lingui/macro';\nimport { t } from '@lingui/macro';\n\nimport * as React from 'react';\nimport Dialog from '../../UI/Dialog';\nimport FlatButton from '../../UI/FlatButton';\nimport { enumerateEventsFunctionsExtensions } from '../../ProjectManager/EnumerateProjectItems';\nimport { Line, Column, Spacer } from '../../UI/Grid';\nimport SemiControlledTextField from '../../UI/SemiControlledTextField';\nimport SelectField from '../../UI/SelectField';\nimport SelectOption from '../../UI/SelectOption';\nimport {\n  setupFunctionFromEvents,\n  canCreateEventsFunction,\n  functionHasLotsOfParameters,\n  validateExtensionNameUniqueness,\n  validateExtensionName,\n  validateEventsFunctionNameUniqueness,\n  validateEventsFunctionName,\n} from '.';\nimport AlertMessage from '../../UI/AlertMessage';\nimport DismissableAlertMessage from '../../UI/DismissableAlertMessage';\nimport EventsFunctionParametersEditor from '../../EventsFunctionsExtensionEditor/EventsFunctionConfigurationEditor/EventsFunctionParametersEditor';\nimport EventsFunctionPropertiesEditor from '../../EventsFunctionsExtensionEditor/EventsFunctionConfigurationEditor/EventsFunctionPropertiesEditor';\nimport HelpButton from '../../UI/HelpButton';\nconst gd = global.gd;\n\ntype Props = {|\n  project: gdProject,\n  globalObjectsContainer: gdObjectsContainer,\n  objectsContainer: gdObjectsContainer,\n  serializedEvents: Object,\n  onClose: () => void,\n  onCreate: (extensionName: string, eventsFunction: gdEventsFunction) => void,\n|};\n\ntype State = {|\n  eventsFunction: ?gdEventsFunction,\n  extensionName: string,\n  createNewExtension: boolean,\n|};\n\nconst CREATE_NEW_EXTENSION_PLACEHOLDER = '<create a new extension>';\n\nexport default class EventsFunctionExtractorDialog extends React.Component<\n  Props,\n  State\n> {\n  state = {\n    eventsFunction: null,\n    extensionName: '',\n    createNewExtension: false,\n  };\n\n  componentDidMount() {\n    const {\n      project,\n      globalObjectsContainer,\n      objectsContainer,\n      serializedEvents,\n    } = this.props;\n\n    // Set up the function\n    const eventsFunction = new gd.EventsFunction();\n    setupFunctionFromEvents({\n      project,\n      globalObjectsContainer,\n      objectsContainer,\n      serializedEvents,\n      eventsFunction,\n    });\n    this.setState({\n      eventsFunction,\n    });\n\n    // Prepopulate the form\n    const eventsFunctionsExtensions = enumerateEventsFunctionsExtensions(\n      project\n    );\n    if (eventsFunctionsExtensions.length === 0) {\n      this.setState({\n        createNewExtension: true,\n      });\n    }\n  }\n\n  componentWillUnmount() {\n    const { eventsFunction } = this.state;\n    if (eventsFunction) eventsFunction.delete();\n  }\n\n  render() {\n    const { project, onClose, onCreate } = this.props;\n    const { eventsFunction, extensionName, createNewExtension } = this.state;\n    if (!eventsFunction) return null;\n\n    const eventsFunctionsExtensions = enumerateEventsFunctionsExtensions(\n      project\n    );\n    const hasLotsOfParameters = functionHasLotsOfParameters(eventsFunction);\n\n    return (\n      <Dialog\n        title={<Trans>Extract the events in a function</Trans>}\n        secondaryActions={\n          <HelpButton helpPagePath=\"/events/functions/extract-events\" />\n        }\n        actions={[\n          <FlatButton\n            key=\"cancel\"\n            label={<Trans>Cancel</Trans>}\n            onClick={onClose}\n          />,\n          <FlatButton\n            key=\"create\"\n            label={<Trans>Create</Trans>}\n            primary\n            disabled={\n              !canCreateEventsFunction(project, extensionName, eventsFunction)\n            }\n            onClick={() => onCreate(extensionName, eventsFunction)}\n          />,\n        ]}\n        cannotBeDismissed={true}\n        open\n        onRequestClose={onClose}\n        noMargin\n      >\n        <Column noMargin>\n          <Column>\n            <DismissableAlertMessage\n              identifier=\"function-extractor-explanation\"\n              kind=\"info\"\n            >\n              After creating a function, it will be usable in the events sheet.\n              Functions are grouped by extensions. Choose, or enter the name of\n              a new extension, and a function name, then configure the function\n              and its parameters.\n            </DismissableAlertMessage>\n            <Line noMargin>\n              <Column noMargin expand>\n                <SelectField\n                  floatingLabelText={\n                    <Trans>Extension (storing the function)</Trans>\n                  }\n                  value={\n                    createNewExtension\n                      ? CREATE_NEW_EXTENSION_PLACEHOLDER\n                      : extensionName\n                  }\n                  onChange={(e, i, extensionName) => {\n                    if (extensionName === CREATE_NEW_EXTENSION_PLACEHOLDER) {\n                      this.setState({\n                        createNewExtension: true,\n                        extensionName: '',\n                      });\n                    } else {\n                      this.setState({\n                        createNewExtension: false,\n                        extensionName,\n                      });\n                    }\n                  }}\n                  fullWidth\n                >\n                  {eventsFunctionsExtensions.map(eventsFunctionsExtension => (\n                    <SelectOption\n                      key={eventsFunctionsExtension.getName()}\n                      value={eventsFunctionsExtension.getName()}\n                      primaryText={\n                        eventsFunctionsExtension.getFullName() ||\n                        eventsFunctionsExtension.getName()\n                      }\n                    />\n                  ))}\n                  <SelectOption\n                    value={CREATE_NEW_EXTENSION_PLACEHOLDER}\n                    primaryText={t`<Create a New Extension>`}\n                  />\n                </SelectField>\n              </Column>\n              {createNewExtension ? (\n                <Column noMargin expand>\n                  <SemiControlledTextField\n                    commitOnBlur\n                    value={extensionName}\n                    floatingLabelText={<Trans>New extension name</Trans>}\n                    onChange={(extensionName: string) =>\n                      this.setState({ extensionName })\n                    }\n                    fullWidth\n                    errorText={\n                      !validateExtensionNameUniqueness(\n                        project,\n                        extensionName\n                      ) ? (\n                        <Trans>\n                          This name is already taken by another extension.\n                        </Trans>\n                      ) : !validateExtensionName(extensionName) ? (\n                        <Trans>\n                          This name is not valid. Only use alphanumeric\n                          characters (0-9, a-z) and underscores.\n                        </Trans>\n                      ) : (\n                        undefined\n                      )\n                    }\n                  />\n                </Column>\n              ) : null}\n            </Line>\n            <Line>\n              <SemiControlledTextField\n                commitOnBlur\n                value={eventsFunction.getName()}\n                floatingLabelText={<Trans>Function name</Trans>}\n                onChange={(functionName: string) => {\n                  eventsFunction.setName(functionName);\n                  this.forceUpdate();\n                }}\n                fullWidth\n                errorText={\n                  !validateEventsFunctionNameUniqueness(\n                    project,\n                    extensionName,\n                    eventsFunction\n                  ) ? (\n                    <Trans>\n                      This name is already taken by another function. Choose\n                      another name.\n                    </Trans>\n                  ) : !validateEventsFunctionName(eventsFunction.getName()) ? (\n                    <Trans>\n                      This name is not valid. Only use alphanumeric characters\n                      (0-9, a-z) and underscores.\n                    </Trans>\n                  ) : (\n                    undefined\n                  )\n                }\n              />\n            </Line>\n            {hasLotsOfParameters ? (\n              <Line>\n                <AlertMessage kind=\"warning\">\n                  <Trans>\n                    This function will have a lot of parameters. Consider\n                    creating groups or functions for a smaller set of objects so\n                    that the function is easier to reuse.\n                  </Trans>\n                </AlertMessage>\n              </Line>\n            ) : null}\n          </Column>\n          <EventsFunctionPropertiesEditor\n            eventsFunction={eventsFunction}\n            eventsBasedBehavior={null}\n            onConfigurationUpdated={() => {\n              // Force re-running logic to see if Create button is disabled.\n              this.forceUpdate();\n            }}\n            freezeEventsFunctionType\n          />\n          <Spacer />\n          <EventsFunctionParametersEditor\n            project={project}\n            eventsFunction={eventsFunction}\n            eventsBasedBehavior={null}\n            onParametersUpdated={() => {\n              // Force the dialog to adapt its size\n              this.forceUpdate();\n            }}\n            freezeParameters\n          />\n        </Column>\n      </Dialog>\n    );\n  }\n}\n","// @flow\n\nexport default function getObjectGroupByName(\n  globalObjectsContainer: gdObjectsContainer,\n  objectsContainer: gdObjectsContainer,\n  objectGroupName: string\n): ?gdObjectGroup {\n  if (objectsContainer.getObjectGroups().has(objectGroupName)) {\n    return objectsContainer.getObjectGroups().get(objectGroupName);\n  } else if (globalObjectsContainer.getObjectGroups().has(objectGroupName)) {\n    return globalObjectsContainer.getObjectGroups().get(objectGroupName);\n  }\n\n  return null;\n}\n","// @flow\nimport { Trans } from '@lingui/macro';\nimport * as React from 'react';\nimport SelectField from '../UI/SelectField';\nimport SelectOption from '../UI/SelectOption';\nimport {\n  type EnumeratedBehaviorMetadata,\n  enumerateBehaviorsMetadata,\n} from '../BehaviorsEditor/EnumerateBehaviorsMetadata';\n\ntype Props = {|\n  project: gdProject,\n  value: string,\n  onChange: string => void,\n  disabled?: boolean,\n|};\ntype State = {|\n  behaviorMetadata: Array<EnumeratedBehaviorMetadata>,\n|};\n\nexport default class BehaviorTypeSelector extends React.Component<\n  Props,\n  State\n> {\n  state = {\n    behaviorMetadata: enumerateBehaviorsMetadata(\n      this.props.project.getCurrentPlatform(),\n      this.props.project\n    ),\n  };\n\n  render() {\n    const { disabled, value, onChange } = this.props;\n    const { behaviorMetadata } = this.state;\n\n    // If the behavior type is not in the list, we'll still\n    // add a menu item for it so that the value is displayed\n    // on screen.\n    const valueIsListed = !!behaviorMetadata.find(({ type }) => type === value);\n\n    return (\n      <SelectField\n        floatingLabelText={<Trans>Behavior type</Trans>}\n        value={value}\n        onChange={(e, i, value: string) => {\n          onChange(value);\n        }}\n        disabled={disabled}\n        fullWidth\n      >\n        {behaviorMetadata.map((metadata: EnumeratedBehaviorMetadata) => (\n          <SelectOption\n            key={metadata.type}\n            value={metadata.type}\n            primaryText={metadata.fullName}\n          />\n        ))}\n        {!valueIsListed && value && (\n          <SelectOption value={value} primaryText={value} />\n        )}\n      </SelectField>\n    );\n  }\n}\n","// @flow\nimport * as React from 'react';\nimport ThemeConsumer from './Theme/ThemeConsumer';\nimport Typography from '@material-ui/core/Typography';\n// No i18n in this file\n\ntype Props = {|\n  tooltipText?: string,\n  style?: Object,\n  children: ?React.Node,\n|};\n\nconst BackgroundText = (props: Props) => (\n  <ThemeConsumer>\n    {muiTheme => (\n      <Typography\n        variant=\"body2\"\n        align=\"center\"\n        style={{\n          opacity: 0.6,\n          textShadow: `1px 1px 0px ${muiTheme.emptyMessage.shadowColor}`,\n          ...props.style,\n        }}\n        title={props.tooltipText}\n      >\n        {props.children}\n      </Typography>\n    )}\n  </ThemeConsumer>\n);\n\nexport default BackgroundText;\n","// @flow\nimport * as React from 'react';\nimport Typography from '@material-ui/core/Typography';\n\ntype Props = {|\n  children: ?React.Node,\n|};\n\nconst style = {\n  paddingLeft: 8,\n};\n\n// A Subheader to be displayed in a List.\nexport default ({ children }: Props) =>\n  children ? (\n    <Typography variant={'overline'} style={style}>\n      {children}\n    </Typography>\n  ) : null;\n","// @flow\nimport RenderedUnknownInstance from './Renderers/RenderedUnknownInstance';\nimport RenderedSpriteInstance from './Renderers/RenderedSpriteInstance';\nimport RenderedTiledSpriteInstance from './Renderers/RenderedTiledSpriteInstance';\nimport RenderedPanelSpriteInstance from './Renderers/RenderedPanelSpriteInstance';\nimport RenderedTextInstance from './Renderers/RenderedTextInstance';\nimport RenderedShapePainterInstance from './Renderers/RenderedShapePainterInstance';\nimport RenderedTextEntryInstance from './Renderers/RenderedTextEntryInstance';\nimport RenderedParticleEmitterInstance from './Renderers/RenderedParticleEmitterInstance';\nimport RenderedSkeletonInstance from './Renderers/RenderedSkeletonInstance';\nimport PixiResourcesLoader from './PixiResourcesLoader';\nimport ResourcesLoader from '../ResourcesLoader';\nimport RenderedInstance from './Renderers/RenderedInstance';\nimport * as PIXI from 'pixi.js';\nimport optionalRequire from '../Utils/OptionalRequire';\nconst path = optionalRequire('path');\nconst gd = global.gd;\n\nconst requirableModules = {};\n\n/**\n * A service containing functions that are called to render instances\n * of objects in a PIXI.Container.\n */\nexport default {\n  renderers: {\n    unknownObjectType: RenderedUnknownInstance,\n    Sprite: RenderedSpriteInstance,\n    'TiledSpriteObject::TiledSprite': RenderedTiledSpriteInstance,\n    'PanelSpriteObject::PanelSprite': RenderedPanelSpriteInstance,\n    'TextObject::Text': RenderedTextInstance,\n    'PrimitiveDrawing::Drawer': RenderedShapePainterInstance,\n    'TextEntryObject::TextEntry': RenderedTextEntryInstance,\n    'ParticleSystem::ParticleEmitter': RenderedParticleEmitterInstance,\n    'SkeletonObject::Skeleton': RenderedSkeletonInstance,\n  },\n  getThumbnail: function(project: gdProject, object: gdObject) {\n    var objectType = object.getType();\n    if (this.renderers.hasOwnProperty(objectType))\n      return this.renderers[objectType].getThumbnail(\n        project,\n        ResourcesLoader,\n        object\n      );\n    else\n      return this.renderers['unknownObjectType'].getThumbnail(\n        project,\n        ResourcesLoader,\n        object\n      );\n  },\n  createNewInstanceRenderer: function(\n    project: gdProject,\n    layout: gdLayout,\n    instance: gdInitialInstance,\n    associatedObject: gdObject,\n    pixiContainer: any\n  ) {\n    var objectType = associatedObject.getType();\n    if (this.renderers.hasOwnProperty(objectType))\n      return new this.renderers[objectType](\n        project,\n        layout,\n        instance,\n        associatedObject,\n        pixiContainer,\n        PixiResourcesLoader\n      );\n    else {\n      console.warn(\n        `Object with type ${objectType} has no instance renderer registered. Please use registerInstanceRenderer to register your renderer.`\n      );\n      return new this.renderers['unknownObjectType'](\n        project,\n        layout,\n        instance,\n        associatedObject,\n        pixiContainer,\n        PixiResourcesLoader\n      );\n    }\n  },\n  registerInstanceRenderer: function(objectType: string, renderer: any) {\n    if (!renderer.getThumbnail) {\n      console.warn(\n        `Tried to register renderer for object \"${objectType}\", but getThumbnail is not defined.`\n      );\n      return;\n    }\n\n    if (this.renderers.hasOwnProperty(objectType)) {\n      console.warn(\n        `Tried to register renderer for object \"${objectType}\", but a renderer already exists.`\n      );\n      return;\n    }\n\n    console.info(`Properly registered renderer for object \"${objectType}\".`);\n    this.renderers[objectType] = renderer;\n  },\n  /**\n   * Register a module that can be then required using `requireModule`.\n   * This is necessary for the web-app, as all files must be bundled.\n   */\n  registerModule: function(requirePath: string, module: any) {\n    requirableModules[requirePath] = module;\n  },\n  /**\n   * Require a module, that was either registered using `registerModule` (i.e: on the web-app), or from\n   * the specified path (if `optionalRequire` can find the file, i.e: on the electron app).\n   */\n  requireModule: function(requireBasePath: string, requirePath: string): ?any {\n    // On Electron, where modules can be required at runtime from files, require the\n    // file, relative to the base path.\n    if (path) {\n      const module = optionalRequire(path.join(requireBasePath, requirePath));\n      if (module) return module;\n    }\n\n    // On the web-app, modules need to be registered manually.\n    if (requirableModules[requirePath]) return requirableModules[requirePath];\n\n    console.error(\n      `Unable to find module \"${requirePath}\". Are you sure you registered it using ObjectsRenderingService.registerModule? This is mandatory for the web-app to have the file bundled.`\n    );\n    return null;\n  },\n  gd, // Expose gd so that it can be used by renderers\n  PIXI, // Expose PIXI so that it can be used by renderers\n  RenderedInstance, // Expose the base class for renderers so that it can be used by renderers\n};\n","// @flow\nimport axios from 'axios';\nimport { makeTimestampedId } from '../../Utils/TimestampedId';\nimport { GDevelopBuildApi } from './ApiConfigs';\nimport { getSignedUrl } from './Usage';\n\nexport type TargetName =\n  | 'winExe'\n  | 'winZip'\n  | 'macZip'\n  | 'linuxAppImage'\n  | 's3';\n\nexport type Build = {\n  id: string,\n  userId: string,\n  bucket?: string,\n  logsKey?: string,\n  apkKey?: string,\n  windowsExeKey?: string,\n  windowsZipKey?: string,\n  macosZipKey?: string,\n  linuxAppImageKey?: string,\n  s3Key?: string,\n  status: 'pending' | 'complete' | 'error',\n  type: 'cordova-build' | 'electron-build' | 'web-build',\n  targets?: Array<TargetName>,\n  createdAt: number,\n  updatedAt: number,\n};\n\nexport type BuildArtifactKeyName =\n  | 'apkKey'\n  | 'windowsExeKey'\n  | 'windowsZipKey'\n  | 'macosZipKey'\n  | 'linuxAppImageKey'\n  | 's3Key'\n  | 'logsKey';\n\nexport const getBuildArtifactUrl = (\n  build: ?Build,\n  keyName: BuildArtifactKeyName\n): ?string => {\n  if (!build || !build[keyName]) {\n    return null;\n  }\n\n  if (keyName === 's3Key') {\n    return `https://games.gdevelop-app.com/${build[keyName]}/index.html`;\n  }\n\n  return `https://builds.gdevelop-app.com/${build[keyName]}`;\n};\n\ntype UploadOptions = {|\n  signedUrl: string,\n  contentType: string,\n  key: string,\n|};\n\nexport const getBuildFileUploadOptions = (): Promise<UploadOptions> => {\n  const prefix = 'game-archive-' + makeTimestampedId();\n  const filename = 'game-archive.zip';\n  const contentType = 'application/zip';\n  const key = prefix + '/' + filename;\n\n  return getSignedUrl({ uploadType: 'build', key, contentType }).then(\n    ({ signedUrl }) => {\n      return {\n        signedUrl,\n        contentType,\n        key,\n      };\n    }\n  );\n};\n\nexport const buildElectron = (\n  getAuthorizationHeader: () => Promise<string>,\n  userId: string,\n  key: string,\n  targets: Array<TargetName>\n): Promise<Build> => {\n  return getAuthorizationHeader()\n    .then(authorizationHeader =>\n      axios.post(\n        `${GDevelopBuildApi.baseUrl}/build?userId=${encodeURIComponent(\n          userId\n        )}&key=${encodeURIComponent(\n          key\n        )}&type=electron-build&targets=${encodeURIComponent(\n          targets.join(',')\n        )}`,\n        null,\n        {\n          params: {},\n          headers: {\n            Authorization: authorizationHeader,\n          },\n        }\n      )\n    )\n    .then(response => response.data);\n};\n\nexport const buildWeb = (\n  getAuthorizationHeader: () => Promise<string>,\n  userId: string,\n  key: string\n): Promise<Build> => {\n  return getAuthorizationHeader()\n    .then(authorizationHeader =>\n      axios.post(\n        `${GDevelopBuildApi.baseUrl}/build?userId=${encodeURIComponent(\n          userId\n        )}&key=${encodeURIComponent(key)}&type=web-build&targets=s3`,\n        null,\n        {\n          params: {},\n          headers: {\n            Authorization: authorizationHeader,\n          },\n        }\n      )\n    )\n    .then(response => response.data);\n};\n\nexport const buildCordovaAndroid = (\n  getAuthorizationHeader: () => Promise<string>,\n  userId: string,\n  key: string\n): Promise<Build> => {\n  return getAuthorizationHeader()\n    .then(authorizationHeader =>\n      axios.post(\n        `${GDevelopBuildApi.baseUrl}/build?userId=${encodeURIComponent(\n          userId\n        )}&key=${encodeURIComponent(key)}&type=cordova-build`,\n        null,\n        {\n          params: {},\n          headers: {\n            Authorization: authorizationHeader,\n          },\n        }\n      )\n    )\n    .then(response => response.data);\n};\n\nexport const getBuild = (\n  getAuthorizationHeader: () => Promise<string>,\n  userId: string,\n  buildId: string\n): Promise<Build> => {\n  return getAuthorizationHeader()\n    .then(authorizationHeader =>\n      axios.get(`${GDevelopBuildApi.baseUrl}/build/${buildId}`, {\n        params: {\n          userId,\n        },\n        headers: {\n          Authorization: authorizationHeader,\n        },\n      })\n    )\n    .then(response => response.data);\n};\n\nexport const getBuilds = (\n  getAuthorizationHeader: () => Promise<string>,\n  userId: string\n): Promise<Array<Build>> => {\n  return getAuthorizationHeader()\n    .then(authorizationHeader =>\n      axios.get(`${GDevelopBuildApi.baseUrl}/build`, {\n        params: {\n          userId,\n        },\n        headers: {\n          Authorization: authorizationHeader,\n        },\n      })\n    )\n    .then(response => response.data);\n};\n","// @flow\nimport { Trans } from '@lingui/macro';\nimport { t } from '@lingui/macro';\nimport { I18n } from '@lingui/react';\nimport { type I18n as I18nType } from '@lingui/core';\n\nimport * as React from 'react';\nimport EventsSheet from '../EventsSheet';\nimport EditorMosaic from '../UI/EditorMosaic';\nimport EmptyMessage from '../UI/EmptyMessage';\nimport EventsFunctionConfigurationEditor from './EventsFunctionConfigurationEditor';\nimport EventsFunctionsList, {\n  type EventsFunctionCreationParameters,\n} from '../EventsFunctionsList';\nimport EventsBasedBehaviorsList from '../EventsBasedBehaviorsList';\nimport Background from '../UI/Background';\nimport OptionsEditorDialog from './OptionsEditorDialog';\nimport { showWarningBox } from '../UI/Messages/MessageBox';\nimport EventsBasedBehaviorEditorDialog from '../EventsBasedBehaviorEditor/EventsBasedBehaviorEditorDialog';\nimport {\n  type ResourceSource,\n  type ChooseResourceFunction,\n} from '../ResourcesList/ResourceSource.flow';\nimport { type ResourceExternalEditor } from '../ResourcesList/ResourceExternalEditor.flow';\nimport BehaviorMethodSelectorDialog from './BehaviorMethodSelectorDialog';\nimport ExtensionFunctionSelectorDialog from './ExtensionFunctionSelectorDialog';\nimport {\n  isBehaviorLifecycleEventsFunction,\n  isExtensionLifecycleEventsFunction,\n} from '../EventsFunctionsExtensionsLoader/MetadataDeclarationHelpers';\nimport FlatButton from '../UI/FlatButton';\nimport { Line } from '../UI/Grid';\nimport Divider from '@material-ui/core/Divider';\nimport { ResponsiveWindowMeasurer } from '../UI/Reponsive/ResponsiveWindowMeasurer';\nimport EditorNavigator, {\n  type EditorNavigatorInterface,\n} from '../UI/EditorMosaic/EditorNavigator';\nimport ChooseEventsFunctionsExtensionEditor from './ChooseEventsFunctionsExtensionEditor';\nimport Check from '@material-ui/icons/Check';\nimport Tune from '@material-ui/icons/Tune';\nimport {\n  type PreviewButtonSettings,\n  emptyPreviewButtonSettings,\n} from '../MainFrame/Toolbar/PreviewButtons';\nimport { type UnsavedChanges } from '../MainFrame/UnsavedChangesContext';\n\nconst gd = global.gd;\n\ntype Props = {|\n  project: gdProject,\n  eventsFunctionsExtension: gdEventsFunctionsExtension,\n  setToolbar: (?React.Node) => void,\n  resourceSources: Array<ResourceSource>,\n  onChooseResource: ChooseResourceFunction,\n  resourceExternalEditors: Array<ResourceExternalEditor>,\n  openInstructionOrExpression: (\n    extension: gdPlatformExtension,\n    type: string\n  ) => void,\n  onCreateEventsFunction: (\n    extensionName: string,\n    eventsFunction: gdEventsFunction\n  ) => void,\n  onBehaviorEdited?: () => void,\n  initiallyFocusedFunctionName: ?string,\n  initiallyFocusedBehaviorName: ?string,\n  unsavedChanges?: UnsavedChanges,\n  previewButtonSettings: PreviewButtonSettings,\n|};\n\ntype State = {|\n  selectedEventsFunction: ?gdEventsFunction,\n  selectedEventsBasedBehavior: ?gdEventsBasedBehavior,\n  editedEventsBasedBehavior: ?gdEventsBasedBehavior,\n  editOptionsDialogOpen: boolean,\n  behaviorMethodSelectorDialogOpen: boolean,\n  extensionFunctionSelectorDialogOpen: boolean,\n  onAddEventsFunctionCb: ?(\n    parameters: ?EventsFunctionCreationParameters\n  ) => void,\n|};\n\nexport default class EventsFunctionsExtensionEditor extends React.Component<\n  Props,\n  State\n> {\n  state = {\n    selectedEventsFunction: null,\n    selectedEventsBasedBehavior: null,\n    editedEventsBasedBehavior: null,\n    editOptionsDialogOpen: false,\n    behaviorMethodSelectorDialogOpen: false,\n    extensionFunctionSelectorDialogOpen: false,\n    onAddEventsFunctionCb: null,\n  };\n  editor: ?EventsSheet;\n  _editorMosaic: ?EditorMosaic;\n  _editorNavigator: ?EditorNavigatorInterface;\n  _globalObjectsContainer: ?gdObjectsContainer;\n  _objectsContainer: ?gdObjectsContainer;\n\n  componentDidMount() {\n    if (this.props.initiallyFocusedFunctionName) {\n      this.selectEventsFunctionByName(\n        this.props.initiallyFocusedFunctionName,\n        this.props.initiallyFocusedBehaviorName\n      );\n    }\n  }\n\n  componentWillUnmount() {\n    if (this._globalObjectsContainer) this._globalObjectsContainer.delete();\n    if (this._objectsContainer) this._objectsContainer.delete();\n  }\n\n  _loadEventsFunctionFrom = (\n    project: gdProject,\n    eventsFunction: gdEventsFunction\n  ) => {\n    // Create an empty \"context\" of objects.\n    // Avoid recreating containers if they were already created, so that\n    // we keep the same objects in memory and avoid remounting components\n    // (like ObjectGroupsList) because objects \"ptr\" changed.\n    if (!this._globalObjectsContainer) {\n      this._globalObjectsContainer = new gd.ObjectsContainer();\n    }\n\n    if (!this._objectsContainer) {\n      this._objectsContainer = new gd.ObjectsContainer();\n    }\n\n    // Initialize this \"context\" of objects with the function\n    // (as done during code generation).\n    gd.EventsFunctionTools.eventsFunctionToObjectsContainer(\n      project,\n      eventsFunction,\n      this._globalObjectsContainer,\n      this._objectsContainer\n    );\n  };\n\n  updateToolbar = () => {\n    if (this.editor) {\n      this.editor.updateToolbar();\n    } else {\n      this.props.setToolbar(<div />);\n    }\n  };\n\n  selectEventsFunctionByName = (\n    functionName: string,\n    behaviorName: ?string\n  ) => {\n    const { eventsFunctionsExtension } = this.props;\n\n    if (behaviorName) {\n      // Behavior function\n      const eventsBasedBehaviors = eventsFunctionsExtension.getEventsBasedBehaviors();\n      if (eventsBasedBehaviors.has(behaviorName)) {\n        const eventsBasedBehavior = eventsBasedBehaviors.get(behaviorName);\n        const behaviorEventsFunctions = eventsBasedBehavior.getEventsFunctions();\n        if (behaviorEventsFunctions.hasEventsFunctionNamed(functionName)) {\n          this._selectEventsFunction(\n            behaviorEventsFunctions.getEventsFunction(functionName),\n            eventsBasedBehavior\n          );\n        }\n      }\n    } else {\n      // Free function\n      if (eventsFunctionsExtension.hasEventsFunctionNamed(functionName)) {\n        this._selectEventsFunction(\n          eventsFunctionsExtension.getEventsFunction(functionName),\n          null\n        );\n      }\n    }\n  };\n\n  _selectEventsFunction = (\n    selectedEventsFunction: ?gdEventsFunction,\n    selectedEventsBasedBehavior: ?gdEventsBasedBehavior\n  ) => {\n    if (!selectedEventsFunction) {\n      this.setState(\n        {\n          selectedEventsFunction: null,\n          selectedEventsBasedBehavior,\n        },\n        () => this.updateToolbar()\n      );\n      return;\n    }\n\n    this._loadEventsFunctionFrom(this.props.project, selectedEventsFunction);\n    this.setState(\n      {\n        selectedEventsFunction,\n        selectedEventsBasedBehavior,\n      },\n      () => {\n        this.updateToolbar();\n\n        if (this._editorNavigator) {\n          // Open the parameters of the function if it's a new, empty function.\n          if (\n            selectedEventsFunction &&\n            !selectedEventsFunction.getEvents().getEventsCount()\n          ) {\n            this._editorNavigator.openEditor('parameters');\n          } else {\n            this._editorNavigator.openEditor('events-sheet');\n          }\n        }\n      }\n    );\n  };\n\n  _makeRenameFreeEventsFunction = (i18n: I18nType) => (\n    eventsFunction: gdEventsFunction,\n    newName: string,\n    done: boolean => void\n  ) => {\n    if (!gd.Project.validateName(newName)) {\n      showWarningBox(\n        i18n._(\n          t`This name is invalid. Only use alphanumeric characters (0-9, a-z) and underscores. Digits are not allowed as the first character.`\n        )\n      );\n      return;\n    }\n    if (isExtensionLifecycleEventsFunction(newName)) {\n      showWarningBox(\n        i18n._(\n          t`This name is reserved for a lifecycle function of the extension. Choose another name for your function.`\n        )\n      );\n      return done(false);\n    }\n\n    const { project, eventsFunctionsExtension } = this.props;\n    gd.WholeProjectRefactorer.renameEventsFunction(\n      project,\n      eventsFunctionsExtension,\n      eventsFunction.getName(),\n      newName\n    );\n\n    done(true);\n  };\n\n  _makeRenameBehaviorEventsFunction = (i18n: I18nType) => (\n    eventsBasedBehavior: gdEventsBasedBehavior,\n    eventsFunction: gdEventsFunction,\n    newName: string,\n    done: boolean => void\n  ) => {\n    if (!gd.Project.validateName(newName)) {\n      showWarningBox(\n        i18n._(\n          t`This name is invalid. Only use alphanumeric characters (0-9, a-z) and underscores. Digits are not allowed as the first character.`\n        )\n      );\n      return done(false);\n    }\n    if (isBehaviorLifecycleEventsFunction(newName)) {\n      showWarningBox(\n        i18n._(\n          t`This name is reserved for a lifecycle method of the behavior. Choose another name for your custom function.`\n        )\n      );\n      return done(false);\n    }\n\n    const { project, eventsFunctionsExtension } = this.props;\n    gd.WholeProjectRefactorer.renameBehaviorEventsFunction(\n      project,\n      eventsFunctionsExtension,\n      eventsBasedBehavior,\n      eventsFunction.getName(),\n      newName\n    );\n\n    done(true);\n  };\n\n  _onDeleteEventsFunction = (\n    eventsFunction: gdEventsFunction,\n    cb: boolean => void\n  ) => {\n    if (\n      this.state.selectedEventsFunction &&\n      gd.compare(eventsFunction, this.state.selectedEventsFunction)\n    ) {\n      this._selectEventsFunction(null, this.state.selectedEventsBasedBehavior);\n    }\n\n    cb(true);\n  };\n\n  _selectEventsBasedBehavior = (\n    selectedEventsBasedBehavior: ?gdEventsBasedBehavior\n  ) => {\n    this.setState(\n      {\n        selectedEventsBasedBehavior,\n        selectedEventsFunction: null,\n      },\n      () => {\n        this.updateToolbar();\n        if (selectedEventsBasedBehavior) {\n          if (this._editorMosaic)\n            this._editorMosaic.openEditor(\n              'behavior-functions-list',\n              'end',\n              75,\n              'column'\n            );\n          if (this._editorNavigator)\n            this._editorNavigator.openEditor('behavior-functions-list');\n        }\n      }\n    );\n  };\n\n  _makeRenameEventsBasedBehavior = (i18n: I18nType) => (\n    eventsBasedBehavior: gdEventsBasedBehavior,\n    newName: string,\n    done: boolean => void\n  ) => {\n    if (!gd.Project.validateName(newName)) {\n      showWarningBox(\n        i18n._(\n          t`This name is invalid. Only use alphanumeric characters (0-9, a-z) and underscores. Digits are not allowed as the first character.`\n        )\n      );\n      return;\n    }\n\n    const { project, eventsFunctionsExtension } = this.props;\n    gd.WholeProjectRefactorer.renameEventsBasedBehavior(\n      project,\n      eventsFunctionsExtension,\n      eventsBasedBehavior.getName(),\n      newName\n    );\n\n    done(true);\n  };\n\n  _onEventsBasedBehaviorRenamed = () => {\n    // Name of a behavior changed, so notify parent\n    // that a behavior was edited (to trigger reload of extensions)\n    if (this.props.onBehaviorEdited) this.props.onBehaviorEdited();\n\n    // Reload the selected events function, if any, as the behavior was\n    // changed so objects containers need to be re-created (otherwise,\n    // objects from objects containers will still refer to the old behavior name,\n    // done before the call to gd.WholeProjectRefactorer.renameEventsBasedBehavior).\n    if (this.state.selectedEventsFunction) {\n      this._loadEventsFunctionFrom(\n        this.props.project,\n        this.state.selectedEventsFunction\n      );\n    }\n  };\n\n  _onDeleteEventsBasedBehavior = (\n    eventsBasedBehavior: gdEventsBasedBehavior,\n    cb: boolean => void\n  ) => {\n    if (\n      this.state.selectedEventsBasedBehavior &&\n      gd.compare(eventsBasedBehavior, this.state.selectedEventsBasedBehavior)\n    ) {\n      this._selectEventsBasedBehavior(null);\n    }\n\n    cb(true);\n  };\n\n  _onAddFreeEventsFunction = (\n    onAddEventsFunctionCb: (\n      parameters: ?EventsFunctionCreationParameters\n    ) => void\n  ) => {\n    this.setState({\n      extensionFunctionSelectorDialogOpen: true,\n      onAddEventsFunctionCb,\n    });\n  };\n\n  _onCloseExtensionFunctionSelectorDialog = (\n    parameters: ?EventsFunctionCreationParameters\n  ) => {\n    const { onAddEventsFunctionCb } = this.state;\n    this.setState(\n      {\n        extensionFunctionSelectorDialogOpen: false,\n        onAddEventsFunctionCb: null,\n      },\n      () => {\n        if (onAddEventsFunctionCb) onAddEventsFunctionCb(parameters);\n      }\n    );\n  };\n\n  _onAddBehaviorEventsFunction = (\n    onAddEventsFunctionCb: (\n      parameters: ?EventsFunctionCreationParameters\n    ) => void\n  ) => {\n    this.setState({\n      behaviorMethodSelectorDialogOpen: true,\n      onAddEventsFunctionCb,\n    });\n  };\n\n  _onCloseBehaviorMethodSelectorDialog = (\n    parameters: ?EventsFunctionCreationParameters\n  ) => {\n    const { onAddEventsFunctionCb } = this.state;\n    this.setState(\n      {\n        behaviorMethodSelectorDialogOpen: false,\n        onAddEventsFunctionCb: null,\n      },\n      () => {\n        if (onAddEventsFunctionCb) onAddEventsFunctionCb(parameters);\n      }\n    );\n  };\n\n  _onBehaviorEventsFunctionAdded = (\n    eventsBasedBehavior: gdEventsBasedBehavior,\n    eventsFunction: gdEventsFunction\n  ) => {\n    // This will create the mandatory parameters for the newly added function.\n    gd.WholeProjectRefactorer.ensureBehaviorEventsFunctionsProperParameters(\n      this.props.eventsFunctionsExtension,\n      eventsBasedBehavior\n    );\n  };\n\n  _onBehaviorPropertyRenamed = (\n    eventsBasedBehavior: gdEventsBasedBehavior,\n    oldName: string,\n    newName: string\n  ) => {\n    const { project, eventsFunctionsExtension } = this.props;\n    gd.WholeProjectRefactorer.renameBehaviorProperty(\n      project,\n      eventsFunctionsExtension,\n      eventsBasedBehavior,\n      oldName,\n      newName\n    );\n  };\n\n  _editOptions = (open: boolean = true) => {\n    this.setState({\n      editOptionsDialogOpen: open,\n    });\n  };\n\n  _editBehavior = (editedEventsBasedBehavior: ?gdEventsBasedBehavior) => {\n    this.setState(\n      state => {\n        // If we're closing the properties of a behavior, ensure parameters\n        // are up-to-date in all event functions of the behavior (the object\n        // type might have changed).\n        if (state.editedEventsBasedBehavior && !editedEventsBasedBehavior) {\n          gd.WholeProjectRefactorer.ensureBehaviorEventsFunctionsProperParameters(\n            this.props.eventsFunctionsExtension,\n            state.editedEventsBasedBehavior\n          );\n        }\n\n        return {\n          editedEventsBasedBehavior,\n        };\n      },\n      () => {\n        if (!editedEventsBasedBehavior) {\n          // If we're closing the properties of a behavior, notify parent\n          // that a behavior was edited (to trigger reload of extensions)\n          if (this.props.onBehaviorEdited) {\n            this.props.onBehaviorEdited();\n          }\n\n          // Reload the selected events function, if any, as the behavior was\n          // changed so objects containers need to be re-created. Notably, the\n          // type of the object that is handled by the behavior may have changed.\n          if (this.state.selectedEventsFunction) {\n            this._loadEventsFunctionFrom(\n              this.props.project,\n              this.state.selectedEventsFunction\n            );\n          }\n        }\n      }\n    );\n  };\n\n  _openFreeFunctionsListEditor = () => {\n    if (this._editorNavigator)\n      this._editorNavigator.openEditor('free-functions-list');\n  };\n\n  _openBehaviorsListEditor = () => {\n    if (this._editorNavigator)\n      this._editorNavigator.openEditor('behaviors-list');\n  };\n\n  render() {\n    const { project, eventsFunctionsExtension } = this.props;\n    const {\n      selectedEventsFunction,\n      selectedEventsBasedBehavior,\n      editOptionsDialogOpen,\n      behaviorMethodSelectorDialogOpen,\n      extensionFunctionSelectorDialogOpen,\n      editedEventsBasedBehavior,\n    } = this.state;\n\n    const editors = {\n      'choose-editor': {\n        type: 'primary',\n        noTitleBar: true,\n        renderEditor: () => (\n          <ChooseEventsFunctionsExtensionEditor\n            eventsFunctionsExtension={eventsFunctionsExtension}\n            onEditFreeFunctions={this._openFreeFunctionsListEditor}\n            onEditBehaviors={this._openBehaviorsListEditor}\n            onEditExtensionOptions={this._editOptions}\n          />\n        ),\n      },\n      parameters: {\n        type: 'primary',\n        title: t`Function Configuration`,\n        toolbarControls: [],\n        renderEditor: () => (\n          <Background>\n            {selectedEventsFunction &&\n            this._globalObjectsContainer &&\n            this._objectsContainer ? (\n              <EventsFunctionConfigurationEditor\n                project={project}\n                eventsFunction={selectedEventsFunction}\n                eventsBasedBehavior={selectedEventsBasedBehavior}\n                globalObjectsContainer={this._globalObjectsContainer}\n                objectsContainer={this._objectsContainer}\n                helpPagePath={\n                  !!selectedEventsBasedBehavior\n                    ? '/behaviors/events-based-behaviors'\n                    : '/events/functions'\n                }\n                onParametersOrGroupsUpdated={() => {\n                  this._loadEventsFunctionFrom(project, selectedEventsFunction);\n                  this.forceUpdate();\n                }}\n                unsavedChanges={this.props.unsavedChanges}\n              />\n            ) : (\n              <EmptyMessage>\n                <Trans>\n                  Choose a function, or a function of a behavior, to set the\n                  parameters that it accepts.\n                </Trans>\n              </EmptyMessage>\n            )}\n          </Background>\n        ),\n      },\n      'events-sheet': {\n        type: 'primary',\n        noTitleBar: true,\n        renderEditor: () =>\n          selectedEventsFunction &&\n          this._globalObjectsContainer &&\n          this._objectsContainer ? (\n            <Background>\n              <EventsSheet\n                key={selectedEventsFunction.ptr}\n                ref={editor => (this.editor = editor)}\n                project={project}\n                scope={{\n                  layout: null,\n                  eventsFunctionsExtension,\n                  eventsBasedBehavior: selectedEventsBasedBehavior,\n                  eventsFunction: selectedEventsFunction,\n                }}\n                globalObjectsContainer={this._globalObjectsContainer}\n                objectsContainer={this._objectsContainer}\n                events={selectedEventsFunction.getEvents()}\n                showPreviewButton={false}\n                onPreview={options => {}}\n                previewButtonSettings={emptyPreviewButtonSettings}\n                showNetworkPreviewButton={false}\n                onOpenExternalEvents={() => {}}\n                onOpenLayout={() => {}}\n                resourceSources={this.props.resourceSources}\n                onChooseResource={this.props.onChooseResource}\n                resourceExternalEditors={this.props.resourceExternalEditors}\n                openInstructionOrExpression={\n                  this.props.openInstructionOrExpression\n                }\n                setToolbar={this.props.setToolbar}\n                onOpenDebugger={() => {}}\n                onCreateEventsFunction={this.props.onCreateEventsFunction}\n                onOpenSettings={this._editOptions} //TODO: Move this extra toolbar outside of EventsSheet toolbar\n                unsavedChanges={this.props.unsavedChanges}\n              />\n            </Background>\n          ) : (\n            <Background>\n              <EmptyMessage>\n                <Trans>\n                  Choose a function, or a function of a behavior, to edit its\n                  events.\n                </Trans>\n              </EmptyMessage>\n            </Background>\n          ),\n      },\n      'free-functions-list': {\n        type: 'primary',\n        title: t`Functions`,\n        toolbarControls: [],\n        renderEditor: () => (\n          <I18n>\n            {({ i18n }) => (\n              <EventsFunctionsList\n                project={project}\n                eventsFunctionsContainer={eventsFunctionsExtension}\n                selectedEventsFunction={selectedEventsFunction}\n                onSelectEventsFunction={selectedEventsFunction =>\n                  this._selectEventsFunction(selectedEventsFunction, null)\n                }\n                onDeleteEventsFunction={this._onDeleteEventsFunction}\n                canRename={(eventsFunction: gdEventsFunction) => {\n                  return !isExtensionLifecycleEventsFunction(\n                    eventsFunction.getName()\n                  );\n                }}\n                onRenameEventsFunction={this._makeRenameFreeEventsFunction(\n                  i18n\n                )}\n                onAddEventsFunction={this._onAddFreeEventsFunction}\n                onEventsFunctionAdded={() => {}}\n                renderHeader={() => (\n                  <React.Fragment>\n                    <Line justifyContent=\"center\">\n                      <FlatButton\n                        label={<Trans>Edit extension options</Trans>}\n                        primary\n                        onClick={() => this._editOptions()}\n                      />\n                    </Line>\n                    <Divider />\n                  </React.Fragment>\n                )}\n                unsavedChanges={this.props.unsavedChanges}\n              />\n            )}\n          </I18n>\n        ),\n      },\n      'behavior-functions-list': {\n        type: 'primary',\n        title: t`Behavior functions`,\n        renderEditor: () =>\n          selectedEventsBasedBehavior ? (\n            <I18n>\n              {({ i18n }) => (\n                <EventsFunctionsList\n                  project={project}\n                  eventsFunctionsContainer={selectedEventsBasedBehavior.getEventsFunctions()}\n                  selectedEventsFunction={selectedEventsFunction}\n                  onSelectEventsFunction={selectedEventsFunction =>\n                    this._selectEventsFunction(\n                      selectedEventsFunction,\n                      selectedEventsBasedBehavior\n                    )\n                  }\n                  onDeleteEventsFunction={this._onDeleteEventsFunction}\n                  canRename={(eventsFunction: gdEventsFunction) => {\n                    return !isBehaviorLifecycleEventsFunction(\n                      eventsFunction.getName()\n                    );\n                  }}\n                  onRenameEventsFunction={(\n                    eventsFunction: gdEventsFunction,\n                    newName: string,\n                    done: boolean => void\n                  ) =>\n                    this._makeRenameBehaviorEventsFunction(i18n)(\n                      selectedEventsBasedBehavior,\n                      eventsFunction,\n                      newName,\n                      done\n                    )\n                  }\n                  onAddEventsFunction={this._onAddBehaviorEventsFunction}\n                  onEventsFunctionAdded={eventsFunction =>\n                    this._onBehaviorEventsFunctionAdded(\n                      selectedEventsBasedBehavior,\n                      eventsFunction\n                    )\n                  }\n                  renderHeader={() => (\n                    <React.Fragment>\n                      <Line justifyContent=\"center\">\n                        <FlatButton\n                          label={<Trans>Edit behavior properties</Trans>}\n                          primary\n                          onClick={() =>\n                            this._editBehavior(selectedEventsBasedBehavior)\n                          }\n                        />\n                      </Line>\n                      <Divider />\n                    </React.Fragment>\n                  )}\n                  unsavedChanges={this.props.unsavedChanges}\n                />\n              )}\n            </I18n>\n          ) : (\n            <Background>\n              <EmptyMessage>\n                <Trans>\n                  Select a behavior to display the functions inside this\n                  behavior.\n                </Trans>\n              </EmptyMessage>\n            </Background>\n          ),\n      },\n\n      'behaviors-list': {\n        type: 'secondary',\n        title: t`Behaviors`,\n        toolbarControls: [],\n        renderEditor: () => (\n          <I18n>\n            {({ i18n }) => (\n              <EventsBasedBehaviorsList\n                project={project}\n                eventsBasedBehaviorsList={eventsFunctionsExtension.getEventsBasedBehaviors()}\n                selectedEventsBasedBehavior={selectedEventsBasedBehavior}\n                onSelectEventsBasedBehavior={this._selectEventsBasedBehavior}\n                onDeleteEventsBasedBehavior={this._onDeleteEventsBasedBehavior}\n                onRenameEventsBasedBehavior={this._makeRenameEventsBasedBehavior(\n                  i18n\n                )}\n                onEventsBasedBehaviorRenamed={\n                  this._onEventsBasedBehaviorRenamed\n                }\n                onEditProperties={this._editBehavior}\n                unsavedChanges={this.props.unsavedChanges}\n              />\n            )}\n          </I18n>\n        ),\n      },\n    };\n\n    return (\n      <React.Fragment>\n        <ResponsiveWindowMeasurer>\n          {windowWidth =>\n            windowWidth === 'small' ? (\n              <EditorNavigator\n                ref={editorNavigator =>\n                  (this._editorNavigator = editorNavigator)\n                }\n                editors={editors}\n                initialEditorName={'choose-editor'}\n                transitions={{\n                  'behaviors-list': {\n                    previousEditor: 'choose-editor',\n                  },\n                  'behavior-functions-list': {\n                    previousEditor: 'behaviors-list',\n                  },\n                  'free-functions-list': {\n                    previousEditor: 'choose-editor',\n                  },\n                  'events-sheet': {\n                    nextIcon: <Tune />,\n                    nextLabel: <Trans>Parameters</Trans>,\n                    nextEditor: 'parameters',\n                    previousEditor: () => {\n                      if (selectedEventsBasedBehavior)\n                        return 'behavior-functions-list';\n                      return 'free-functions-list';\n                    },\n                  },\n                  parameters: {\n                    nextIcon: <Check />,\n                    nextLabel: <Trans>Validate these parameters</Trans>,\n                    nextEditor: 'events-sheet',\n                  },\n                }}\n                onEditorChanged={editorName => {\n                  this.updateToolbar();\n\n                  if (editorName === 'behaviors-list') {\n                    this._selectEventsBasedBehavior(null);\n                  } else if (\n                    editorName === 'free-functions-list' ||\n                    editorName === 'behavior-functions-list'\n                  ) {\n                    this._selectEventsFunction(\n                      null,\n                      selectedEventsBasedBehavior\n                    );\n                  }\n                }}\n              />\n            ) : (\n              <EditorMosaic\n                ref={editorMosaic => (this._editorMosaic = editorMosaic)}\n                editors={editors}\n                initialNodes={{\n                  direction: 'row',\n                  first: {\n                    direction: 'column',\n                    first: 'free-functions-list',\n                    second: 'behaviors-list',\n                    splitPercentage: 50,\n                  },\n                  second: {\n                    direction: 'column',\n                    first: 'parameters',\n                    second: 'events-sheet',\n                    splitPercentage: 25,\n                  },\n                  splitPercentage: 25,\n                }}\n              />\n            )\n          }\n        </ResponsiveWindowMeasurer>\n        {editOptionsDialogOpen && (\n          <OptionsEditorDialog\n            eventsFunctionsExtension={eventsFunctionsExtension}\n            open\n            onClose={() => this._editOptions(false)}\n          />\n        )}\n        {behaviorMethodSelectorDialogOpen && selectedEventsBasedBehavior && (\n          <BehaviorMethodSelectorDialog\n            eventsBasedBehavior={selectedEventsBasedBehavior}\n            onCancel={() => this._onCloseBehaviorMethodSelectorDialog(null)}\n            onChoose={parameters =>\n              this._onCloseBehaviorMethodSelectorDialog(parameters)\n            }\n          />\n        )}\n        {extensionFunctionSelectorDialogOpen && eventsFunctionsExtension && (\n          <ExtensionFunctionSelectorDialog\n            eventsFunctionsExtension={eventsFunctionsExtension}\n            onCancel={() => this._onCloseExtensionFunctionSelectorDialog(null)}\n            onChoose={parameters =>\n              this._onCloseExtensionFunctionSelectorDialog(parameters)\n            }\n          />\n        )}\n        {editedEventsBasedBehavior && (\n          <EventsBasedBehaviorEditorDialog\n            project={project}\n            eventsFunctionsExtension={eventsFunctionsExtension}\n            eventsBasedBehavior={editedEventsBasedBehavior}\n            onApply={() => {\n              if (this.props.unsavedChanges)\n                this.props.unsavedChanges.triggerUnsavedChanges();\n              this._editBehavior(null);\n            }}\n            onRenameProperty={(oldName, newName) =>\n              this._onBehaviorPropertyRenamed(\n                editedEventsBasedBehavior,\n                oldName,\n                newName\n              )\n            }\n          />\n        )}\n      </React.Fragment>\n    );\n  }\n}\n","// @flow\nimport { Trans } from '@lingui/macro';\n\nimport * as React from 'react';\nimport ObjectGroupsListWithObjectGroupEditor from '../../ObjectGroupsList/ObjectGroupsListWithObjectGroupEditor';\nimport { Tabs, Tab } from '../../UI/Tabs';\nimport EventsFunctionParametersEditor from './EventsFunctionParametersEditor';\nimport EventsFunctionPropertiesEditor from './EventsFunctionPropertiesEditor';\nimport ScrollView from '../../UI/ScrollView';\nimport { Column } from '../../UI/Grid';\nimport { showWarningBox } from '../../UI/Messages/MessageBox';\nimport Window from '../../Utils/Window';\nimport { type GroupWithContext } from '../../ObjectsList/EnumerateObjects';\nimport { type UnsavedChanges } from '../../MainFrame/UnsavedChangesContext';\n\nconst gd = global.gd;\n\ntype Props = {|\n  project: gdProject,\n  globalObjectsContainer: gdObjectsContainer,\n  objectsContainer: gdObjectsContainer,\n  eventsFunction: gdEventsFunction,\n  eventsBasedBehavior: ?gdEventsBasedBehavior,\n  onParametersOrGroupsUpdated: () => void,\n  helpPagePath?: string,\n  onConfigurationUpdated?: () => void,\n  renderConfigurationHeader?: () => React.Node,\n  freezeParameters?: boolean,\n  freezeEventsFunctionType?: boolean,\n  unsavedChanges?: UnsavedChanges,\n|};\n\ntype TabNames = 'config' | 'parameters' | 'groups';\n\ntype State = {|\n  currentTab: TabNames,\n|};\n\nexport default class EventsFunctionConfigurationEditor extends React.Component<\n  Props,\n  State\n> {\n  state = {\n    currentTab: 'config',\n  };\n\n  _canObjectOrGroupUseNewName = (newName: string) => {\n    const { objectsContainer, globalObjectsContainer } = this.props;\n\n    if (\n      objectsContainer.hasObjectNamed(newName) ||\n      globalObjectsContainer.hasObjectNamed(newName) ||\n      objectsContainer.getObjectGroups().has(newName) ||\n      globalObjectsContainer.getObjectGroups().has(newName)\n    ) {\n      showWarningBox(\n        'Another object or group with this name already exists in this function.'\n      );\n      return false;\n    } else if (!gd.Project.validateName(newName)) {\n      showWarningBox(\n        'This name is invalid. Only use alphanumeric characters (0-9, a-z) and underscores. Digits are not allowed as the first character.'\n      );\n      return false;\n    }\n\n    return true;\n  };\n\n  _onDeleteGroup = (\n    groupWithContext: GroupWithContext,\n    done: boolean => void\n  ) => {\n    const { group } = groupWithContext;\n    const {\n      project,\n      eventsFunction,\n      globalObjectsContainer,\n      objectsContainer,\n    } = this.props;\n\n    const answer = Window.showConfirmDialog(\n      'Do you want to remove all references to this group in events (actions and conditions using the group)?'\n    );\n\n    gd.WholeProjectRefactorer.objectOrGroupRemovedInEventsFunction(\n      project,\n      eventsFunction,\n      globalObjectsContainer,\n      objectsContainer,\n      group.getName(),\n      /* isObjectGroup=*/ true,\n      !!answer\n    );\n    done(true);\n  };\n\n  _onRenameGroup = (\n    groupWithContext: GroupWithContext,\n    newName: string,\n    done: boolean => void\n  ) => {\n    const { group } = groupWithContext;\n    const {\n      project,\n      eventsFunction,\n      globalObjectsContainer,\n      objectsContainer,\n    } = this.props;\n\n    // newName is supposed to have been already validated\n\n    // Avoid triggering renaming refactoring if name has not really changed\n    if (group.getName() !== newName) {\n      gd.WholeProjectRefactorer.objectOrGroupRenamedInEventsFunction(\n        project,\n        eventsFunction,\n        globalObjectsContainer,\n        objectsContainer,\n        group.getName(),\n        newName,\n        /* isObjectGroup=*/ true\n      );\n    }\n\n    done(true);\n  };\n\n  _chooseTab = (currentTab: TabNames) =>\n    this.setState({\n      currentTab,\n    });\n\n  render() {\n    const {\n      project,\n      globalObjectsContainer,\n      objectsContainer,\n      eventsFunction,\n      eventsBasedBehavior,\n      freezeEventsFunctionType,\n      onConfigurationUpdated,\n      onParametersOrGroupsUpdated,\n      freezeParameters,\n      helpPagePath,\n      renderConfigurationHeader,\n    } = this.props;\n\n    return (\n      <Column expand noMargin useMaxHeight>\n        <Tabs value={this.state.currentTab} onChange={this._chooseTab}>\n          <Tab\n            label={<Trans>Configuration</Trans>}\n            value={('config': TabNames)}\n          />\n          <Tab\n            label={<Trans>Parameters</Trans>}\n            value={('parameters': TabNames)}\n          />\n          <Tab\n            label={<Trans>Object groups</Trans>}\n            value={('groups': TabNames)}\n          />\n        </Tabs>\n        {this.state.currentTab === 'config' ? (\n          <ScrollView>\n            <EventsFunctionPropertiesEditor\n              eventsFunction={eventsFunction}\n              eventsBasedBehavior={eventsBasedBehavior}\n              helpPagePath={helpPagePath}\n              onConfigurationUpdated={onConfigurationUpdated}\n              renderConfigurationHeader={renderConfigurationHeader}\n              freezeEventsFunctionType={freezeEventsFunctionType}\n            />\n          </ScrollView>\n        ) : null}\n        {this.state.currentTab === 'parameters' ? (\n          <ScrollView>\n            <EventsFunctionParametersEditor\n              project={project}\n              eventsFunction={eventsFunction}\n              eventsBasedBehavior={eventsBasedBehavior}\n              onParametersUpdated={onParametersOrGroupsUpdated}\n              helpPagePath={helpPagePath}\n              freezeParameters={freezeParameters}\n            />\n          </ScrollView>\n        ) : null}\n        {this.state.currentTab === 'groups' ? (\n          <ObjectGroupsListWithObjectGroupEditor\n            project={project}\n            globalObjectsContainer={globalObjectsContainer}\n            objectsContainer={objectsContainer}\n            globalObjectGroups={globalObjectsContainer.getObjectGroups()}\n            objectGroups={eventsFunction.getObjectGroups()}\n            canRenameGroup={this._canObjectOrGroupUseNewName}\n            onRenameGroup={this._onRenameGroup}\n            onDeleteGroup={this._onDeleteGroup}\n            onGroupsUpdated={onParametersOrGroupsUpdated}\n            canSetAsGlobalGroup={false}\n            unsavedChanges={this.props.unsavedChanges}\n          />\n        ) : null}\n      </Column>\n    );\n  }\n}\n","// @flow\nimport * as React from 'react';\nimport ObjectGroupsList from '.';\nimport { ObjectGroupEditorDialog } from '../ObjectGroupEditor/ObjectGroupEditorDialog';\nimport { type GroupWithContext } from '../ObjectsList/EnumerateObjects';\nimport { type UnsavedChanges } from '../MainFrame/UnsavedChangesContext';\n\ntype Props = {|\n  project: ?gdProject,\n  globalObjectsContainer: gdObjectsContainer,\n  objectsContainer: gdObjectsContainer,\n  globalObjectGroups: gdObjectGroupsContainer,\n  objectGroups: gdObjectGroupsContainer,\n  canRenameGroup: (newName: string) => boolean,\n  onDeleteGroup: (\n    groupWithScope: GroupWithContext,\n    done: (boolean) => void\n  ) => void,\n  onRenameGroup: (\n    groupWithScope: GroupWithContext,\n    newName: string,\n    done: (boolean) => void\n  ) => void,\n  onGroupsUpdated?: () => void,\n  canSetAsGlobalGroup?: boolean,\n  unsavedChanges?: UnsavedChanges,\n|};\n\ntype State = {|\n  editedGroup: ?gdObjectGroup,\n|};\n\n/**\n * Helper showing the list of groups and embedding the editor to edit a group.\n */\nexport default class ObjectGroupsListWithObjectGroupEditor extends React.Component<\n  Props,\n  State\n> {\n  state = {\n    editedGroup: null,\n  };\n\n  editGroup = (editedGroup: ?gdObjectGroup) => this.setState({ editedGroup });\n\n  render() {\n    const {\n      project,\n      objectsContainer,\n      globalObjectsContainer,\n      objectGroups,\n      globalObjectGroups,\n    } = this.props;\n\n    return (\n      <React.Fragment>\n        <ObjectGroupsList\n          globalObjectGroups={globalObjectGroups}\n          objectGroups={objectGroups}\n          onEditGroup={this.editGroup}\n          onDeleteGroup={this.props.onDeleteGroup}\n          onRenameGroup={this.props.onRenameGroup}\n          canRenameGroup={this.props.canRenameGroup}\n          onGroupAdded={this.props.onGroupsUpdated}\n          onGroupRemoved={this.props.onGroupsUpdated}\n          onGroupRenamed={this.props.onGroupsUpdated}\n          canSetAsGlobalGroup={this.props.canSetAsGlobalGroup}\n          unsavedChanges={this.props.unsavedChanges}\n        />\n        <ObjectGroupEditorDialog\n          project={project}\n          key={globalObjectsContainer.ptr + ';' + objectsContainer.ptr}\n          open={!!this.state.editedGroup}\n          group={this.state.editedGroup}\n          globalObjectsContainer={globalObjectsContainer}\n          objectsContainer={objectsContainer}\n          onCancel={() => this.editGroup(null)}\n          onApply={() => {\n            if (this.props.onGroupsUpdated) this.props.onGroupsUpdated();\n            this.editGroup(null);\n          }}\n        />\n      </React.Fragment>\n    );\n  }\n}\n","// @flow\nimport { t } from '@lingui/macro';\n\nimport * as React from 'react';\nimport { List, ListItem } from '../UI/List';\nimport ObjectSelector from '../ObjectsList/ObjectSelector';\nimport EmptyMessage from '../UI/EmptyMessage';\nimport { Column } from '../UI/Grid';\nconst gd = global.gd;\n\ntype Props = {|\n  project: ?gdProject,\n  group: gdObjectGroup,\n  globalObjectsContainer: gdObjectsContainer,\n  objectsContainer: gdObjectsContainer,\n  onSizeUpdated?: () => void,\n|};\n\ntype State = {|\n  newObjectName: string,\n|};\n\nexport default class ObjectGroupEditor extends React.Component<Props, State> {\n  state = {\n    newObjectName: '',\n  };\n\n  removeObject = (objectName: string) => {\n    const { group, onSizeUpdated } = this.props;\n\n    group.removeObject(objectName);\n\n    this.forceUpdate();\n    if (onSizeUpdated) onSizeUpdated();\n  };\n\n  addObject = (objectName: string) => {\n    const { group, onSizeUpdated } = this.props;\n\n    group.addObject(objectName);\n    this.setState({\n      newObjectName: '',\n    });\n    if (onSizeUpdated) onSizeUpdated();\n  };\n\n  _renderExplanation() {\n    const { group, globalObjectsContainer, objectsContainer } = this.props;\n\n    let type = undefined;\n    group\n      .getAllObjectsNames()\n      .toJSArray()\n      .forEach(objectName => {\n        const objectType = gd.getTypeOfObject(\n          globalObjectsContainer,\n          objectsContainer,\n          objectName,\n          false\n        );\n        if (type === undefined || objectType === type) type = objectType;\n        else type = '';\n      });\n\n    let message = '';\n    if (type === undefined) {\n      message = 'This group is empty';\n    } else if (type === '') {\n      message =\n        \"This group contains objects of different kinds. You'll only be able to use actions and conditions common to all objects with this group.\";\n    } else {\n      message = `This group contains objects of the same kind (${type}). You can use actions and conditions related to this kind of objects in events with this group.`;\n    }\n\n    return <EmptyMessage>{message}</EmptyMessage>;\n  }\n\n  render() {\n    const {\n      project,\n      group,\n      globalObjectsContainer,\n      objectsContainer,\n    } = this.props;\n\n    return (\n      <div>\n        {this._renderExplanation()}\n        <List>\n          {group\n            .getAllObjectsNames()\n            .toJSArray()\n            .map(objectName => {\n              return (\n                <ListItem\n                  key={objectName}\n                  primaryText={objectName}\n                  displayRemoveButton\n                  onRemove={() => this.removeObject(objectName)}\n                />\n              );\n            })}\n        </List>\n        <Column>\n          <ObjectSelector\n            project={project}\n            globalObjectsContainer={globalObjectsContainer}\n            objectsContainer={objectsContainer}\n            value={this.state.newObjectName}\n            onChange={name => this.setState({ newObjectName: name })}\n            onChoose={this.addObject}\n            openOnFocus\n            noGroups\n            hintText={t`Choose an object to add to the group`}\n            fullWidth\n          />\n        </Column>\n      </div>\n    );\n  }\n}\n","// @flow\nimport { Trans } from '@lingui/macro';\n\nimport * as React from 'react';\nimport FlatButton from '../UI/FlatButton';\nimport TextField from '../UI/TextField';\nimport CloudUpload from '@material-ui/icons/CloudUpload';\nimport { Column, Line } from '../UI/Grid';\nimport Dialog from '../UI/Dialog';\nimport HelpButton from '../UI/HelpButton';\nimport EventsFunctionsExtensionsContext, {\n  type EventsFunctionsExtensionsState,\n} from '../EventsFunctionsExtensionsLoader/EventsFunctionsExtensionsContext';\nimport RaisedButton from '../UI/RaisedButton';\nimport Window from '../Utils/Window';\nimport Text from '../UI/Text';\n\ntype Props = {|\n  eventsFunctionsExtension: gdEventsFunctionsExtension,\n  onClose: () => void,\n  open: boolean,\n|};\ntype State = {|\n  exportDialogOpen: boolean,\n|};\n\nconst exportExtension = (\n  eventsFunctionsExtensionsState: EventsFunctionsExtensionsState,\n  eventsFunctionsExtension: gdEventsFunctionsExtension\n) => {\n  const eventsFunctionsExtensionWriter = eventsFunctionsExtensionsState.getEventsFunctionsExtensionWriter();\n  if (!eventsFunctionsExtensionWriter)\n    return Promise.reject(new Error('Not supported'));\n\n  return eventsFunctionsExtensionWriter\n    .chooseEventsFunctionExtensionFile()\n    .then(pathOrUrl => {\n      if (!pathOrUrl) return;\n\n      eventsFunctionsExtensionWriter\n        .writeEventsFunctionsExtension(eventsFunctionsExtension, pathOrUrl)\n        .then();\n    });\n};\n\nconst openGitHubIssue = () => {\n  const body = `\n**⚠️ Please edit and complete this before submitting your extension:**\n\n## Describe the extension\nA clear and concise description of what the extension is, how useful it is.\n\n## Checklist\n\n- [ ] Extension has a proper name and description.\n- [ ] Extension has tags (for example: \"platform, brick, breakable\").\n- [ ] All behaviors have a description.\n- [ ] All functions (actions, conditions, expressions) have descriptions.\n- [ ] I confirm that this extension can be intergrated to this GitHub repository, distributed and MIT licensed.\n\n## Extension file\n\nFinally, attach the .json file of your extension here.\n\nYou also may have to create an account on GitHub before posting.\nIf your extension is high quality and useful, it will be added to the list of GDevelop community extensions.\nWhen you're ready, remove this last paragraph and click on \"Submit new issue\". Thanks 🙌`;\n  Window.openExternalURL(\n    `https://github.com/4ian/GDevelop-extensions/issues/new?body=${encodeURIComponent(\n      body\n    )}&title=New%20extension`\n  );\n};\n\nexport default class OptionsEditorDialog extends React.Component<Props, State> {\n  state = {\n    exportDialogOpen: false,\n  };\n\n  render() {\n    const { eventsFunctionsExtension } = this.props;\n    const { exportDialogOpen } = this.state;\n\n    return (\n      <EventsFunctionsExtensionsContext.Consumer>\n        {eventsFunctionsExtensionsState => {\n          const eventsFunctionsExtensionWriter = eventsFunctionsExtensionsState.getEventsFunctionsExtensionWriter();\n          return (\n            <Dialog\n              secondaryActions={[\n                <HelpButton key=\"help\" helpPagePath=\"/extensions/create\" />,\n                eventsFunctionsExtensionWriter ? (\n                  <FlatButton\n                    icon={<CloudUpload />}\n                    key=\"export\"\n                    label={<Trans>Export extension</Trans>}\n                    onClick={() => this.setState({ exportDialogOpen: true })}\n                  />\n                ) : null,\n              ]}\n              actions={[\n                <FlatButton\n                  label={<Trans>Close</Trans>}\n                  primary={true}\n                  keyboardFocused={true}\n                  onClick={() => this.props.onClose()}\n                  key={'close'}\n                />,\n              ]}\n              cannotBeDismissed={true}\n              open={this.props.open}\n              title={<Trans>Edit Extension Options</Trans>}\n              onRequestClose={this.props.onClose}\n            >\n              <Column>\n                <TextField\n                  floatingLabelText={<Trans>Name</Trans>}\n                  value={eventsFunctionsExtension.getName()}\n                  disabled\n                  fullWidth\n                />\n                <TextField\n                  floatingLabelText={<Trans>Name displayed in editor</Trans>}\n                  value={eventsFunctionsExtension.getFullName()}\n                  onChange={(e, text) => {\n                    eventsFunctionsExtension.setFullName(text);\n                    this.forceUpdate();\n                  }}\n                  fullWidth\n                />\n                <TextField\n                  floatingLabelText={<Trans>Short description</Trans>}\n                  value={eventsFunctionsExtension.getShortDescription()}\n                  onChange={(e, text) => {\n                    eventsFunctionsExtension.setShortDescription(text);\n                    this.forceUpdate();\n                  }}\n                  multiLine\n                  fullWidth\n                  rows={2}\n                  rowsMax={2}\n                />\n                <TextField\n                  floatingLabelText={\n                    <Trans>Description (markdown supported)</Trans>\n                  }\n                  value={eventsFunctionsExtension.getDescription()}\n                  onChange={(e, text) => {\n                    eventsFunctionsExtension.setDescription(text);\n                    this.forceUpdate();\n                  }}\n                  multiLine\n                  fullWidth\n                  rows={5}\n                  rowsMax={5}\n                />\n                <TextField\n                  floatingLabelText={<Trans>Version</Trans>}\n                  value={eventsFunctionsExtension.getVersion()}\n                  onChange={(e, text) => {\n                    eventsFunctionsExtension.setVersion(text);\n                    this.forceUpdate();\n                  }}\n                  fullWidth\n                />\n                <TextField\n                  floatingLabelText={<Trans>Tags (comma separated)</Trans>}\n                  value={eventsFunctionsExtension.getTags()}\n                  onChange={(e, text) => {\n                    eventsFunctionsExtension.setTags(text);\n                    this.forceUpdate();\n                  }}\n                  fullWidth\n                />\n                <TextField\n                  floatingLabelText={\n                    <Trans>Author (Name, email or GitHub handle)</Trans>\n                  }\n                  value={eventsFunctionsExtension.getAuthor()}\n                  onChange={(e, text) => {\n                    eventsFunctionsExtension.setAuthor(text);\n                    this.forceUpdate();\n                  }}\n                  fullWidth\n                />\n              </Column>\n              {exportDialogOpen && (\n                <Dialog\n                  secondaryActions={[\n                    <HelpButton key=\"help\" helpPagePath=\"/extensions/share\" />,\n                  ]}\n                  actions={[\n                    <FlatButton\n                      label={<Trans>Close</Trans>}\n                      keyboardFocused={true}\n                      onClick={() => this.setState({ exportDialogOpen: false })}\n                      key={'close'}\n                    />,\n                  ]}\n                  open\n                  cannotBeDismissed={false}\n                  onRequestClose={() =>\n                    this.setState({ exportDialogOpen: false })\n                  }\n                >\n                  <Column expand>\n                    <Line>\n                      <Text>\n                        <Trans>\n                          You can export the extension to a file to easily\n                          import it in another project. If your extension is\n                          providing useful and reusable functions or behaviors,\n                          consider sharing it with the GDevelop community!\n                        </Trans>\n                      </Text>\n                    </Line>\n                    <Line>\n                      <RaisedButton\n                        icon={<CloudUpload />}\n                        primary\n                        label={<Trans>Export to a file</Trans>}\n                        onClick={() => {\n                          exportExtension(\n                            eventsFunctionsExtensionsState,\n                            eventsFunctionsExtension\n                          );\n                        }}\n                      />\n                      <FlatButton\n                        label={<Trans>Submit extension to the community</Trans>}\n                        onClick={openGitHubIssue}\n                      />\n                    </Line>\n                  </Column>\n                </Dialog>\n              )}\n            </Dialog>\n          );\n        }}\n      </EventsFunctionsExtensionsContext.Consumer>\n    );\n  }\n}\n","// @flow\nimport { Trans } from '@lingui/macro';\nimport * as React from 'react';\nimport FlatButton from '../UI/FlatButton';\nimport Dialog from '../UI/Dialog';\nimport EventsBasedBehaviorEditor from './index';\nimport HelpButton from '../UI/HelpButton';\n\ntype Props = {|\n  onApply: () => void,\n  project: gdProject,\n  eventsFunctionsExtension: gdEventsFunctionsExtension,\n  eventsBasedBehavior: gdEventsBasedBehavior,\n  onRenameProperty: (oldName: string, newName: string) => void,\n|};\n\nexport default class EventsBasedBehaviorEditorDialog extends React.Component<\n  Props,\n  {||}\n> {\n  render() {\n    const {\n      onApply,\n      eventsBasedBehavior,\n      eventsFunctionsExtension,\n      project,\n    } = this.props;\n\n    return (\n      <Dialog\n        noMargin\n        secondaryActions={[\n          <HelpButton\n            key=\"help\"\n            helpPagePath=\"/behaviors/events-based-behaviors\"\n          />,\n        ]}\n        actions={[\n          <FlatButton\n            label={<Trans>Apply</Trans>}\n            primary\n            keyboardFocused\n            onClick={onApply}\n            key={'Apply'}\n          />,\n        ]}\n        cannotBeDismissed={true}\n        open\n        onRequestClose={onApply}\n        title={<Trans>Edit the behavior</Trans>}\n      >\n        <EventsBasedBehaviorEditor\n          project={project}\n          eventsFunctionsExtension={eventsFunctionsExtension}\n          eventsBasedBehavior={eventsBasedBehavior}\n          onTabChanged={\n            () =>\n              this.forceUpdate() /*Force update to ensure dialog is properly positioned*/\n          }\n          onPropertiesUpdated={\n            () =>\n              this.forceUpdate() /*Force update to ensure dialog is properly positioned*/\n          }\n          onRenameProperty={this.props.onRenameProperty}\n        />\n      </Dialog>\n    );\n  }\n}\n","// @flow\nimport { Trans } from '@lingui/macro';\nimport { t } from '@lingui/macro';\n\nimport * as React from 'react';\nimport TextField from '../UI/TextField';\nimport { Column, Spacer } from '../UI/Grid';\nimport SemiControlledTextField from '../UI/SemiControlledTextField';\nimport ObjectTypeSelector from '../ObjectTypeSelector';\nimport { Tabs, Tab } from '../UI/Tabs';\nimport DismissableAlertMessage from '../UI/DismissableAlertMessage';\nimport AlertMessage from '../UI/AlertMessage';\nimport EventsBasedBehaviorPropertiesEditor from './EventsBasedBehaviorPropertiesEditor';\nconst gd = global.gd;\n\ntype TabName = 'configuration' | 'properties';\n\ntype Props = {|\n  project: gdProject,\n  eventsFunctionsExtension: gdEventsFunctionsExtension,\n  eventsBasedBehavior: gdEventsBasedBehavior,\n  onPropertiesUpdated: () => void,\n  onRenameProperty: (oldName: string, newName: string) => void,\n  onTabChanged: () => void,\n|};\n\ntype State = {|\n  currentTab: TabName,\n|};\n\nexport default class EventsBasedBehaviorEditor extends React.Component<\n  Props,\n  State\n> {\n  state = {\n    currentTab: 'configuration',\n  };\n\n  // An array containing all the object types that are using the behavior\n  _allObjectTypes: Array<string> = gd.WholeProjectRefactorer.getAllObjectTypesUsingEventsBasedBehavior(\n    this.props.project,\n    this.props.eventsFunctionsExtension,\n    this.props.eventsBasedBehavior\n  )\n    .toNewVectorString()\n    .toJSArray();\n\n  _changeTab = (newTab: TabName) =>\n    this.setState(\n      {\n        currentTab: newTab,\n      },\n      () => this.props.onTabChanged()\n    );\n\n  render() {\n    const { currentTab } = this.state;\n    const { eventsBasedBehavior, project } = this.props;\n\n    return (\n      <React.Fragment>\n        <Tabs value={currentTab} onChange={this._changeTab}>\n          <Tab label={<Trans>Configuration</Trans>} value=\"configuration\" />\n          <Tab label={<Trans>Properties</Trans>} value=\"properties\" />\n        </Tabs>\n        {currentTab === 'configuration' && (\n          <Column>\n            <DismissableAlertMessage\n              identifier=\"events-based-behavior-explanation\"\n              kind=\"info\"\n            >\n              This is the configuration of your behavior. Make sure to choose a\n              proper internal name as it's hard to change it later. Enter a\n              description explaining what the behavior is doing to the object.\n            </DismissableAlertMessage>\n            <TextField\n              floatingLabelText={<Trans>Internal Name</Trans>}\n              value={eventsBasedBehavior.getName()}\n              disabled\n              fullWidth\n            />\n            <SemiControlledTextField\n              commitOnBlur\n              floatingLabelText={<Trans>Name displayed in editor</Trans>}\n              value={eventsBasedBehavior.getFullName()}\n              onChange={text => {\n                eventsBasedBehavior.setFullName(text);\n                this.forceUpdate();\n              }}\n              fullWidth\n            />\n            <SemiControlledTextField\n              commitOnBlur\n              floatingLabelText={<Trans>Description</Trans>}\n              floatingLabelFixed\n              hintText={t`The description of the behavior should explain what the behavior is doing to the object, and, briefly, how to use it.`}\n              value={eventsBasedBehavior.getDescription()}\n              onChange={text => {\n                eventsBasedBehavior.setDescription(text);\n                this.forceUpdate();\n              }}\n              multiLine\n              fullWidth\n              rows={3}\n            />\n            <ObjectTypeSelector\n              floatingLabelText={\n                <Trans>Object on which this behavior can be used</Trans>\n              }\n              project={project}\n              value={eventsBasedBehavior.getObjectType()}\n              onChange={(objectType: string) => {\n                eventsBasedBehavior.setObjectType(objectType);\n                this.forceUpdate();\n              }}\n              allowedObjectTypes={\n                this._allObjectTypes.length === 0\n                  ? undefined /* Allow anything as the behavior is not used */\n                  : this._allObjectTypes.length === 1\n                  ? [\n                      '',\n                      this._allObjectTypes[0],\n                    ] /* Allow only the type of the objects using the behavior */\n                  : [\n                      '',\n                    ] /* More than one type of object are using the behavior. Only \"any object\" can be used on this behavior */\n              }\n            />\n            {this._allObjectTypes.length > 1 && (\n              <AlertMessage kind=\"info\">\n                <Trans>\n                  This behavior is being used by multiple types of objects.\n                  Thus, you can't restrict its usage to any particular object\n                  type. All the object types using this behavior are listed\n                  here:\n                  {this._allObjectTypes.join(', ')}\n                </Trans>\n              </AlertMessage>\n            )}\n            {eventsBasedBehavior\n              .getEventsFunctions()\n              .getEventsFunctionsCount() === 0 && (\n              <DismissableAlertMessage\n                identifier=\"empty-events-based-behavior-explanation\"\n                kind=\"info\"\n              >\n                <Trans>\n                  Once you're done, close this dialog and start adding some\n                  functions to the behavior. Then, test the behavior by adding\n                  it to an object in a scene.\n                </Trans>\n              </DismissableAlertMessage>\n            )}\n            <Spacer />\n          </Column>\n        )}\n        {currentTab === 'properties' && (\n          <EventsBasedBehaviorPropertiesEditor\n            project={project}\n            eventsBasedBehavior={eventsBasedBehavior}\n            onPropertiesUpdated={this.props.onPropertiesUpdated}\n            onRenameProperty={this.props.onRenameProperty}\n          />\n        )}\n      </React.Fragment>\n    );\n  }\n}\n","// @flow\nimport { Trans } from '@lingui/macro';\nimport { t } from '@lingui/macro';\nimport { I18n } from '@lingui/react';\nimport { type I18n as I18nType } from '@lingui/core';\nimport * as React from 'react';\nimport { Column, Line } from '../UI/Grid';\nimport SelectField from '../UI/SelectField';\nimport SelectOption from '../UI/SelectOption';\nimport { mapVector } from '../Utils/MapFor';\nimport RaisedButton from '../UI/RaisedButton';\nimport IconButton from '../UI/IconButton';\nimport EmptyMessage from '../UI/EmptyMessage';\nimport ElementWithMenu from '../UI/Menu/ElementWithMenu';\nimport MoreVert from '@material-ui/icons/MoreVert';\nimport SemiControlledTextField from '../UI/SemiControlledTextField';\nimport MiniToolbar from '../UI/MiniToolbar';\nimport { showWarningBox } from '../UI/Messages/MessageBox';\nimport newNameGenerator from '../Utils/NewNameGenerator';\nimport InlineCheckbox from '../UI/InlineCheckbox';\nimport Visibility from '@material-ui/icons/Visibility';\nimport VisibilityOff from '@material-ui/icons/VisibilityOff';\nimport Add from '@material-ui/icons/Add';\n\nconst gd = global.gd;\n\ntype Props = {|\n  project: gdProject,\n  eventsBasedBehavior: gdEventsBasedBehavior,\n  onPropertiesUpdated: () => void,\n  onRenameProperty: (oldName: string, newName: string) => void,\n|};\n\nconst styles = {\n  propertiesContainer: {\n    flex: 1,\n  },\n};\n\nconst validatePropertyName = (\n  i18n: I18nType,\n  properties: gdNamedPropertyDescriptorsList,\n  newName: string\n) => {\n  if (!newName) {\n    showWarningBox(i18n._(t`The name of a property cannot be empty.`));\n    return false;\n  }\n  if (newName === 'name' || newName === 'type') {\n    showWarningBox(\n      i18n._(\n        t`The name of a property cannot be \"name\" or \"type\", as they are used by GDevelop internally.`\n      )\n    );\n    return false;\n  }\n  if (properties.has(newName)) {\n    showWarningBox(\n      i18n._(\n        t`This name is already used by another property. Choose a unique name for each property.`\n      )\n    );\n    return false;\n  }\n  if (!gd.Project.validateName(newName)) {\n    showWarningBox(\n      i18n._(\n        t`This name is invalid. Only use alphanumeric characters (0-9, a-z) and underscores. Digits are not allowed as the first character.`\n      )\n    );\n    return false;\n  }\n\n  return true;\n};\n\nexport default class EventsBasedBehaviorPropertiesEditor extends React.Component<\n  Props,\n  {||}\n> {\n  _addProperty = () => {\n    const { eventsBasedBehavior } = this.props;\n    const properties = eventsBasedBehavior.getPropertyDescriptors();\n\n    const newName = newNameGenerator('Property', name => properties.has(name));\n    const property = properties.insertNew(newName, properties.getCount());\n    property.setType('Number');\n    this.forceUpdate();\n    this.props.onPropertiesUpdated();\n  };\n\n  _removeProperty = (name: string) => {\n    const { eventsBasedBehavior } = this.props;\n    const properties = eventsBasedBehavior.getPropertyDescriptors();\n\n    properties.remove(name);\n    this.forceUpdate();\n    this.props.onPropertiesUpdated();\n  };\n\n  _moveProperty = (oldIndex: number, newIndex: number) => {\n    const { eventsBasedBehavior } = this.props;\n    const properties = eventsBasedBehavior.getPropertyDescriptors();\n\n    properties.move(oldIndex, newIndex);\n    this.forceUpdate();\n    this.props.onPropertiesUpdated();\n  };\n\n  render() {\n    const { eventsBasedBehavior } = this.props;\n\n    const properties = eventsBasedBehavior.getPropertyDescriptors();\n\n    return (\n      <I18n>\n        {({ i18n }) => (\n          <Column noMargin>\n            <Line noMargin>\n              <div style={styles.propertiesContainer}>\n                {mapVector(\n                  properties,\n                  (property: gdNamedPropertyDescriptor, i: number) => (\n                    <React.Fragment key={i}>\n                      <MiniToolbar>\n                        <Column expand noMargin>\n                          <SemiControlledTextField\n                            margin=\"none\"\n                            commitOnBlur\n                            hintText={t`Enter the property name`}\n                            value={property.getName()}\n                            onChange={newName => {\n                              if (newName === property.getName()) return;\n                              if (\n                                !validatePropertyName(i18n, properties, newName)\n                              )\n                                return;\n\n                              this.props.onRenameProperty(\n                                property.getName(),\n                                newName\n                              );\n\n                              property.setName(newName);\n                              this.forceUpdate();\n                              this.props.onPropertiesUpdated();\n                            }}\n                            fullWidth\n                          />\n                        </Column>\n                        <InlineCheckbox\n                          label={\n                            property.isHidden() ? (\n                              <Trans>Hidden</Trans>\n                            ) : (\n                              <Trans>Visible in editor</Trans>\n                            )\n                          }\n                          checked={!property.isHidden()}\n                          onCheck={(e, checked) => {\n                            property.setHidden(!checked);\n                            this.forceUpdate();\n                            this.props.onPropertiesUpdated();\n                          }}\n                          checkedIcon={<Visibility />}\n                          uncheckedIcon={<VisibilityOff />}\n                        />\n                        <ElementWithMenu\n                          element={\n                            <IconButton>\n                              <MoreVert />\n                            </IconButton>\n                          }\n                          buildMenuTemplate={() => [\n                            {\n                              label: i18n._(t`Delete`),\n                              click: () =>\n                                this._removeProperty(property.getName()),\n                            },\n                            { type: 'separator' },\n                            {\n                              label: i18n._(t`Move up`),\n                              click: () => this._moveProperty(i, i - 1),\n                              enabled: i - 1 >= 0,\n                            },\n                            {\n                              label: i18n._(t`Move down`),\n                              click: () => this._moveProperty(i, i + 1),\n                              enabled: i + 1 < properties.getCount(),\n                            },\n                          ]}\n                        />\n                      </MiniToolbar>\n                      <Line expand noMargin>\n                        <Column expand>\n                          <SelectField\n                            floatingLabelText={<Trans>Type</Trans>}\n                            value={property.getType()}\n                            onChange={(e, i, value: string) => {\n                              property.setType(value);\n                              this.forceUpdate();\n                              this.props.onPropertiesUpdated();\n                            }}\n                            fullWidth\n                          >\n                            <SelectOption\n                              value=\"Number\"\n                              primaryText={t`Number`}\n                            />\n                            <SelectOption\n                              value=\"String\"\n                              primaryText={t`String`}\n                            />\n                            <SelectOption\n                              value=\"Boolean\"\n                              primaryText={t`Boolean (checkbox)`}\n                            />\n                          </SelectField>\n                        </Column>\n                        <Column expand>\n                          {(property.getType() === 'String' ||\n                            property.getType() === 'Number') && (\n                            <SemiControlledTextField\n                              commitOnBlur\n                              floatingLabelText={<Trans>Default value</Trans>}\n                              hintText={\n                                property.getType() === 'Number' ? '123' : 'ABC'\n                              }\n                              value={property.getValue()}\n                              onChange={newValue => {\n                                property.setValue(newValue);\n                                this.forceUpdate();\n                                this.props.onPropertiesUpdated();\n                              }}\n                              fullWidth\n                            />\n                          )}\n                          {property.getType() === 'Boolean' && (\n                            <SelectField\n                              floatingLabelText={<Trans>Default value</Trans>}\n                              value={\n                                property.getValue() === 'true'\n                                  ? 'true'\n                                  : 'false'\n                              }\n                              onChange={(e, i, value) => {\n                                property.setValue(value);\n                                this.forceUpdate();\n                                this.props.onPropertiesUpdated();\n                              }}\n                              fullWidth\n                            >\n                              <SelectOption\n                                value=\"true\"\n                                primaryText={t`True (checked)`}\n                              />\n                              <SelectOption\n                                value=\"false\"\n                                primaryText={t`False (not checked)`}\n                              />\n                            </SelectField>\n                          )}\n                        </Column>\n                      </Line>\n                      <Line expand noMargin>\n                        <Column expand>\n                          <SemiControlledTextField\n                            commitOnBlur\n                            floatingLabelText={\n                              <Trans>Label, shown in the editor</Trans>\n                            }\n                            hintText={t`This should make the purpose of the property easy to understand`}\n                            floatingLabelFixed\n                            value={property.getLabel()}\n                            onChange={text => {\n                              property.setLabel(text);\n                              this.forceUpdate();\n                            }}\n                            fullWidth\n                          />\n                        </Column>\n                      </Line>\n                    </React.Fragment>\n                  )\n                )}\n                {properties.getCount() === 0 ? (\n                  <EmptyMessage>\n                    <Trans>\n                      No properties for this behavior. Add one to store data\n                      inside this behavior (for example: health, ammo, speed,\n                      etc...)\n                    </Trans>\n                  </EmptyMessage>\n                ) : null}\n                <Column>\n                  <Line justifyContent=\"flex-end\" expand>\n                    <RaisedButton\n                      primary\n                      label={<Trans>Add a property</Trans>}\n                      onClick={this._addProperty}\n                      icon={<Add />}\n                    />\n                  </Line>\n                </Column>\n              </div>\n            </Line>\n          </Column>\n        )}\n      </I18n>\n    );\n  }\n}\n","// @flow\nimport { Trans } from '@lingui/macro';\n\nimport * as React from 'react';\nimport { type EventsFunctionCreationParameters } from '../EventsFunctionsList';\nimport FlatButton from '../UI/FlatButton';\nimport Subheader from '../UI/Subheader';\nimport { List, ListItem } from '../UI/List';\nimport Dialog from '../UI/Dialog';\nimport HelpButton from '../UI/HelpButton';\nimport Create from '../UI/CustomSvgIcons/Behaviors/Create';\nimport Step from '../UI/CustomSvgIcons/Behaviors/Step';\nimport Destroy from '../UI/CustomSvgIcons/Behaviors/Destroy';\nimport Function from '../UI/CustomSvgIcons/Behaviors/Function';\nimport Activate from '../UI/CustomSvgIcons/Behaviors/Activate';\nimport Deactivate from '../UI/CustomSvgIcons/Behaviors/Deactivate';\nconst gd = global.gd;\n\ntype Props = {|\n  eventsBasedBehavior: gdEventsBasedBehavior,\n  onCancel: () => void,\n  onChoose: (parameters: EventsFunctionCreationParameters) => void,\n|};\ntype State = {||};\n\nconst styles = {\n  icon: { width: 40, height: 40 },\n  disabledItem: { opacity: 0.6 },\n};\n\nconst MethodListItem = ({\n  icon,\n  disabled,\n  onChoose,\n  name,\n  description,\n}: {|\n  icon: React.Node,\n  disabled: boolean,\n  onChoose: EventsFunctionCreationParameters => void,\n  name: string,\n  description: React.Node,\n|}) => {\n  return (\n    <ListItem\n      leftIcon={icon}\n      primaryText={name}\n      secondaryText={description}\n      secondaryTextLines={2}\n      onClick={() =>\n        onChoose({\n          functionType: gd.EventsFunction.Action,\n          name,\n        })\n      }\n      style={disabled ? styles.disabledItem : undefined}\n      disabled={disabled}\n    />\n  );\n};\n\nexport default class BehaviorMethodSelectorDialog extends React.Component<\n  Props,\n  State\n> {\n  render() {\n    const actions = [\n      <FlatButton\n        label={<Trans>Cancel</Trans>}\n        keyboardFocused={true}\n        onClick={() => this.props.onCancel()}\n        key={'close'}\n      />,\n    ];\n\n    const { eventsBasedBehavior, onChoose } = this.props;\n    const eventsFunctions = eventsBasedBehavior.getEventsFunctions();\n\n    return (\n      <Dialog\n        secondaryActions={[\n          <HelpButton\n            key=\"help\"\n            helpPagePath=\"/behaviors/events-based-behaviors\"\n          />,\n        ]}\n        actions={actions}\n        cannotBeDismissed={false}\n        open\n        noMargin\n        title={<Trans>Choose a new behavior function (\"method\")</Trans>}\n        onRequestClose={this.props.onCancel}\n      >\n        <List>\n          <Subheader>\n            <Trans>Main lifecycle methods</Trans>\n          </Subheader>\n          <MethodListItem\n            icon={<Create style={styles.icon} />}\n            name={'onCreated'}\n            disabled={eventsFunctions.hasEventsFunctionNamed('onCreated')}\n            onChoose={onChoose}\n            description={\n              <Trans>\n                Events that will be run once, when an object is created with\n                this behavior being attached to it.\n              </Trans>\n            }\n          />\n          <MethodListItem\n            icon={<Step style={styles.icon} />}\n            name={'doStepPreEvents'}\n            disabled={eventsFunctions.hasEventsFunctionNamed('doStepPreEvents')}\n            onChoose={onChoose}\n            description={\n              <Trans>\n                Events that will be run at every frame (roughly 60 times per\n                second), for every object that has the behavior attached, before\n                the events from the events sheet are launched.\n              </Trans>\n            }\n          />\n          <MethodListItem\n            icon={<Destroy style={styles.icon} />}\n            name={'onDestroy'}\n            disabled={\n              eventsFunctions.hasEventsFunctionNamed(\n                'onOwnerRemovedFromScene'\n              ) || eventsFunctions.hasEventsFunctionNamed('onDestroy')\n            }\n            onChoose={onChoose}\n            description={\n              <Trans>\n                Events that will be run once, after the object is removed from\n                the scene and before it is entirely removed from memory.\n              </Trans>\n            }\n          />\n          <Subheader>\n            <Trans>Other lifecycle methods</Trans>\n          </Subheader>\n          <MethodListItem\n            icon={<Deactivate style={styles.icon} />}\n            name={'onDeActivate'}\n            disabled={eventsFunctions.hasEventsFunctionNamed('onDeActivate')}\n            onChoose={onChoose}\n            description={\n              <Trans>\n                Events that will be run once when the behavior is deactivated on\n                an object (step events won't be run until the behavior is\n                activated again).\n              </Trans>\n            }\n          />\n          <MethodListItem\n            icon={<Activate style={styles.icon} />}\n            name={'onActivate'}\n            disabled={eventsFunctions.hasEventsFunctionNamed('onActivate')}\n            onChoose={onChoose}\n            description={\n              <Trans>\n                Events that will be run once when the behavior is re-activated\n                on an object (after it was previously deactivated).\n              </Trans>\n            }\n          />\n          <MethodListItem\n            icon={<Step style={styles.icon} />}\n            name={'doStepPostEvents'}\n            disabled={eventsFunctions.hasEventsFunctionNamed(\n              'doStepPostEvents'\n            )}\n            onChoose={onChoose}\n            description={\n              <Trans>\n                Events that will be run at every frame (roughly 60 times per\n                second), for every object that has the behavior attached, after\n                the events from the events sheet.\n              </Trans>\n            }\n          />\n          <Subheader>\n            <Trans>Custom</Trans>\n          </Subheader>\n          <ListItem\n            leftIcon={<Function style={styles.icon} />}\n            primaryText={\n              <Trans>Custom (action, condition or expression)</Trans>\n            }\n            secondaryText={\n              <Trans>\n                An action, condition or expression that can be used on objects\n                that have the behavior attached to them. Use it from the events\n                sheet as any other action/condition/expression.\n              </Trans>\n            }\n            secondaryTextLines={2}\n            onClick={() =>\n              onChoose({\n                functionType: gd.EventsFunction.Action,\n                name: null,\n              })\n            }\n          />\n        </List>\n      </Dialog>\n    );\n  }\n}\n","// @flow\nimport { Trans } from '@lingui/macro';\n\nimport * as React from 'react';\nimport { type EventsFunctionCreationParameters } from '../EventsFunctionsList';\nimport FlatButton from '../UI/FlatButton';\nimport Subheader from '../UI/Subheader';\nimport { List, ListItem } from '../UI/List';\nimport Dialog from '../UI/Dialog';\nimport HelpButton from '../UI/HelpButton';\nimport Create from '../UI/CustomSvgIcons/Behaviors/Create';\nimport Step from '../UI/CustomSvgIcons/Behaviors/Step';\nimport Destroy from '../UI/CustomSvgIcons/Behaviors/Destroy';\nimport Function from '../UI/CustomSvgIcons/Behaviors/Function';\nimport Activate from '../UI/CustomSvgIcons/Behaviors/Activate';\nimport Deactivate from '../UI/CustomSvgIcons/Behaviors/Deactivate';\nimport Visibility from '@material-ui/icons/Visibility';\nimport VisibilityOff from '@material-ui/icons/VisibilityOff';\nimport { Line } from '../UI/Grid';\nconst gd = global.gd;\n\ntype Props = {|\n  eventsFunctionsExtension: gdEventsFunctionsExtension,\n  onCancel: () => void,\n  onChoose: (parameters: EventsFunctionCreationParameters) => void,\n|};\n\nconst styles = {\n  icon: { width: 40, height: 40 },\n  disabledItem: { opacity: 0.6 },\n};\n\nconst FunctionListItem = ({\n  icon,\n  disabled,\n  onChoose,\n  name,\n  description,\n}: {|\n  icon: React.Node,\n  disabled?: boolean,\n  onChoose: () => void,\n  name: React.Node,\n  description: React.Node,\n|}) => {\n  return (\n    <ListItem\n      leftIcon={icon}\n      primaryText={name}\n      secondaryText={description}\n      secondaryTextLines={2}\n      onClick={onChoose}\n      style={disabled ? styles.disabledItem : undefined}\n      disabled={disabled}\n    />\n  );\n};\n\nexport default function BehaviorMethodSelectorDialog({\n  eventsFunctionsExtension,\n  onChoose,\n  onCancel,\n}: Props) {\n  const [showAdvanced, setShowAdvanced] = React.useState(false);\n\n  return (\n    <Dialog\n      secondaryActions={[\n        <HelpButton key=\"help\" helpPagePath=\"/events/functions\" />,\n      ]}\n      actions={[\n        <FlatButton\n          label={<Trans>Cancel</Trans>}\n          keyboardFocused={true}\n          onClick={onCancel}\n          key={'close'}\n        />,\n      ]}\n      cannotBeDismissed={false}\n      open\n      noMargin\n      title={<Trans>Choose a new extension function</Trans>}\n      onRequestClose={onCancel}\n    >\n      <List>\n        <FunctionListItem\n          icon={<Function style={styles.icon} />}\n          name={<Trans>Action</Trans>}\n          onChoose={() =>\n            onChoose({\n              functionType: gd.EventsFunction.Action,\n              name: null,\n            })\n          }\n          description={\n            <Trans>\n              An action that can be used in other events sheet. You can define\n              the action parameters: objects, texts, numbers, layers, etc...\n            </Trans>\n          }\n        />\n        <FunctionListItem\n          icon={<Function style={styles.icon} />}\n          name={<Trans>Condition</Trans>}\n          onChoose={() =>\n            onChoose({\n              functionType: gd.EventsFunction.Condition,\n              name: null,\n            })\n          }\n          description={\n            <Trans>\n              A condition that can be used in other events sheet. You can define\n              the conditions parameters: objects, texts, numbers, layers, etc...\n            </Trans>\n          }\n        />\n        <FunctionListItem\n          icon={<Function style={styles.icon} />}\n          name={<Trans>Expression</Trans>}\n          onChoose={() =>\n            onChoose({\n              functionType: gd.EventsFunction.Expression,\n              name: null,\n            })\n          }\n          description={\n            <Trans>\n              An expression that can be used in formulas. Can either return a\n              number or a string, and take some parameters.\n            </Trans>\n          }\n        />\n        {showAdvanced && (\n          <React.Fragment>\n            <Subheader>\n              <Trans>Lifecycle functions (advanced)</Trans>\n            </Subheader>\n            <FunctionListItem\n              icon={<Create style={styles.icon} />}\n              name={'onFirstSceneLoaded'}\n              disabled={eventsFunctionsExtension.hasEventsFunctionNamed(\n                'onFirstSceneLoaded'\n              )}\n              onChoose={() =>\n                onChoose({\n                  functionType: gd.EventsFunction.Action,\n                  name: 'onFirstSceneLoaded',\n                })\n              }\n              description={\n                <Trans>\n                  Events that will be run once when the first scene of the game\n                  is loaded, before any other events.\n                </Trans>\n              }\n            />\n            <FunctionListItem\n              icon={<Create style={styles.icon} />}\n              name={'onSceneLoaded'}\n              disabled={eventsFunctionsExtension.hasEventsFunctionNamed(\n                'onSceneLoaded'\n              )}\n              onChoose={() =>\n                onChoose({\n                  functionType: gd.EventsFunction.Action,\n                  name: 'onSceneLoaded',\n                })\n              }\n              description={\n                <Trans>\n                  Events that will be run once when a scene of the game is\n                  loaded, before the scene events.\n                </Trans>\n              }\n            />\n            <FunctionListItem\n              icon={<Step style={styles.icon} />}\n              name={'onScenePreEvents'}\n              disabled={eventsFunctionsExtension.hasEventsFunctionNamed(\n                'onScenePreEvents'\n              )}\n              onChoose={() =>\n                onChoose({\n                  functionType: gd.EventsFunction.Action,\n                  name: 'onScenePreEvents',\n                })\n              }\n              description={\n                <Trans>\n                  Events that will be run at every frame (roughly 60 times per\n                  second), before the events from the events sheet of the scene.\n                </Trans>\n              }\n            />\n            <FunctionListItem\n              icon={<Step style={styles.icon} />}\n              name={'onScenePostEvents'}\n              disabled={eventsFunctionsExtension.hasEventsFunctionNamed(\n                'onScenePostEvents'\n              )}\n              onChoose={() =>\n                onChoose({\n                  functionType: gd.EventsFunction.Action,\n                  name: 'onScenePostEvents',\n                })\n              }\n              description={\n                <Trans>\n                  Events that will be run at every frame (roughly 60 times per\n                  second), after the events from the events sheet of the scene.\n                </Trans>\n              }\n            />\n            <FunctionListItem\n              icon={<Deactivate style={styles.icon} />}\n              name={'onScenePaused'}\n              disabled={eventsFunctionsExtension.hasEventsFunctionNamed(\n                'onScenePaused'\n              )}\n              onChoose={() =>\n                onChoose({\n                  functionType: gd.EventsFunction.Action,\n                  name: 'onScenePaused',\n                })\n              }\n              description={\n                <Trans>\n                  Events that will be run once when a scene is paused (another\n                  scene is run on top of it).\n                </Trans>\n              }\n            />\n            <FunctionListItem\n              icon={<Activate style={styles.icon} />}\n              name={'onSceneResumed'}\n              disabled={eventsFunctionsExtension.hasEventsFunctionNamed(\n                'onSceneResumed'\n              )}\n              onChoose={() =>\n                onChoose({\n                  functionType: gd.EventsFunction.Action,\n                  name: 'onSceneResumed',\n                })\n              }\n              description={\n                <Trans>\n                  Events that will be run once when a scene is resumed (after it\n                  was previously paused).\n                </Trans>\n              }\n            />\n            <FunctionListItem\n              icon={<Destroy style={styles.icon} />}\n              name={'onSceneUnloading'}\n              disabled={eventsFunctionsExtension.hasEventsFunctionNamed(\n                'onSceneUnloading'\n              )}\n              onChoose={() =>\n                onChoose({\n                  functionType: gd.EventsFunction.Action,\n                  name: 'onSceneUnloading',\n                })\n              }\n              description={\n                <Trans>\n                  Events that will be run once when a scene is about to be\n                  unloaded from memory. The previous scene that was paused will\n                  be resumed after this.\n                </Trans>\n              }\n            />\n          </React.Fragment>\n        )}\n      </List>\n      <Line justifyContent=\"center\" alignItems=\"center\">\n        {!showAdvanced ? (\n          <FlatButton\n            icon={<Visibility />}\n            primary={false}\n            onClick={() => setShowAdvanced(true)}\n            label={<Trans>Show lifecycle functions (advanced)</Trans>}\n          />\n        ) : (\n          <FlatButton\n            icon={<VisibilityOff />}\n            primary={false}\n            onClick={() => setShowAdvanced(false)}\n            label={<Trans>Hide lifecycle functions (advanced)</Trans>}\n          />\n        )}\n      </Line>\n    </Dialog>\n  );\n}\n","// @flow\nimport { Trans } from '@lingui/macro';\nimport * as React from 'react';\nimport { type Editor } from '.';\nimport { Column, Line } from '../Grid';\nimport FlatButton from '../FlatButton';\nimport ArrowBack from '@material-ui/icons/ArrowBack';\nimport Background from '../Background';\n\ntype Props = {|\n  initialEditorName: string,\n  editors: {\n    [string]: Editor,\n  },\n  transitions: {\n    [string]: {|\n      nextEditor?: string | (() => string),\n      nextLabel?: React.Node,\n      nextIcon?: React.Node,\n      previousEditor?: string | (() => string),\n    |},\n  },\n  onEditorChanged: (editorName: string) => void,\n|};\n\nexport type EditorNavigatorInterface = {|\n  openEditor: (editorName: string) => void,\n|};\n\n// Flow types might have to be changed/removed if upgrading Flow\n// (see example at https://github.com/wgao19/flow-notes/blob/master/react/react-memo.md)\n\nexport default React.forwardRef<Props, EditorNavigatorInterface>(\n  (\n    { initialEditorName, editors, transitions, onEditorChanged }: Props,\n    ref\n  ) => {\n    const [currentEditorName, setCurrentEditorName] = React.useState(\n      initialEditorName\n    );\n    React.useImperativeHandle(ref, () => ({\n      openEditor: editorName => {\n        setCurrentEditorName(editorName);\n      },\n    }));\n    React.useEffect(\n      () => {\n        onEditorChanged(currentEditorName);\n      },\n      [currentEditorName, onEditorChanged]\n    );\n\n    const transition = transitions[currentEditorName];\n    let buttonLineJustifyContent = 'space-between';\n    if (transition) {\n      if (transition.previousEditor && !transition.nextEditor) {\n        buttonLineJustifyContent = 'flex-start';\n      }\n      if (!transition.previousEditor && transition.nextEditor) {\n        buttonLineJustifyContent = 'flex-end';\n      }\n    }\n\n    return (\n      <Column noMargin expand>\n        {transition && (\n          <Background maxWidth noExpand noFullHeight>\n            <Column>\n              <Line justifyContent={buttonLineJustifyContent}>\n                {transition.previousEditor && (\n                  <FlatButton\n                    label={<Trans>Back</Trans>}\n                    onClick={() => {\n                      if (transition.previousEditor)\n                        setCurrentEditorName(transition.previousEditor);\n                    }}\n                    icon={<ArrowBack />}\n                  />\n                )}\n                {transition.nextLabel && transition.nextEditor && (\n                  <FlatButton\n                    label={transition.nextLabel}\n                    onClick={() => {\n                      if (transition.nextEditor)\n                        setCurrentEditorName(transition.nextEditor);\n                    }}\n                    icon={transition.nextIcon}\n                  />\n                )}\n              </Line>\n            </Column>\n          </Background>\n        )}\n        {editors[currentEditorName]\n          ? editors[currentEditorName].renderEditor()\n          : null}\n      </Column>\n    );\n  }\n);\n","// @flow\nimport { Trans } from '@lingui/macro';\nimport { t } from '@lingui/macro';\nimport { I18n } from '@lingui/react';\nimport * as React from 'react';\nimport Background from '../UI/Background';\nimport { Column, Spacer } from '../UI/Grid';\nimport Text from '../UI/Text';\nimport RaisedButton from '../UI/RaisedButton';\nimport FlatButton from '../UI/FlatButton';\n\ntype Props = {|\n  eventsFunctionsExtension: gdEventsFunctionsExtension,\n  onEditFreeFunctions: () => void,\n  onEditBehaviors: () => void,\n  onEditExtensionOptions: () => void,\n|};\n\nexport default (props: Props) => {\n  const eventsFunctionsCount = props.eventsFunctionsExtension.getEventsFunctionsCount();\n  const eventsBasedBehaviorsCount = props.eventsFunctionsExtension\n    .getEventsBasedBehaviors()\n    .getCount();\n\n  return (\n    <I18n>\n      {({ i18n }) => (\n        <Background>\n          <Column>\n            <Text>\n              <Trans>\n                Extensions can provide functions (which can be actions,\n                conditions or expressions) or new behaviors.\n              </Trans>\n            </Text>\n            <RaisedButton\n              label={i18n._(\n                t`Edit functions (not attached to behaviors) (${eventsFunctionsCount})`\n              )}\n              onClick={props.onEditFreeFunctions}\n              primary\n            />\n            <Spacer />\n            <RaisedButton\n              label={i18n._(t`Edit behaviors (${eventsBasedBehaviorsCount})`)}\n              onClick={props.onEditBehaviors}\n              primary\n            />\n            <Spacer />\n            <FlatButton\n              label={<Trans>Edit extension options</Trans>}\n              onClick={props.onEditExtensionOptions}\n            />\n          </Column>\n        </Background>\n      )}\n    </I18n>\n  );\n};\n","import gesture from 'pixi-simple-gesture';\nimport ObjectsRenderingService from '../../ObjectsRendering/ObjectsRenderingService';\nimport getObjectByName from '../../Utils/GetObjectByName';\n\nimport * as PIXI from 'pixi.js';\nimport { shouldBeHandledByPinch } from '../PinchHandler';\nimport { makeDoubleClickable } from './PixiDoubleClickEvent';\nconst gd = global.gd;\n\nexport default class LayerRenderer {\n  constructor({\n    project,\n    layout,\n    layer,\n    viewPosition,\n    instances,\n    onInstanceClicked,\n    onInstanceDoubleClicked,\n    onOverInstance,\n    onOutInstance,\n    onMoveInstance,\n    onMoveInstanceEnd,\n    onDownInstance,\n  }) {\n    this.project = project;\n    this.instances = instances;\n    this.layout = layout;\n    this.layer = layer; // /!\\ Don't store any other reference.\n    // `layer` can be changed at any moment (see InstancesRenderer).\n    this.viewPosition = viewPosition;\n    this.onInstanceClicked = onInstanceClicked;\n    this.onInstanceDoubleClicked = onInstanceDoubleClicked;\n    this.onOverInstance = onOverInstance;\n    this.onOutInstance = onOutInstance;\n    this.onMoveInstance = onMoveInstance;\n    this.onMoveInstanceEnd = onMoveInstanceEnd;\n    this.onDownInstance = onDownInstance;\n\n    this.viewTopLeft = [0, 0]; // Used for instances culling on rendering\n    this.viewBottomRight = [0, 0]; // Used for instances culling on rendering\n\n    this.renderedInstances = {};\n    this.pixiContainer = new PIXI.Container();\n\n    // Functor used to render an instance\n    this.instancesRenderer = new gd.InitialInstanceJSFunctor();\n    this.instancesRenderer.invoke = instancePtr => {\n      const instance = gd.wrapPointer(instancePtr, gd.InitialInstance);\n\n      //Get the \"RendereredInstance\" object associated to the instance and tell it to update.\n      var renderedInstance = this.getRendererOfInstance(instance);\n      if (!renderedInstance) return;\n\n      const pixiObject = renderedInstance.getPixiObject();\n      if (pixiObject) pixiObject.zOrder = instance.getZOrder();\n      if (pixiObject) pixiObject.interactive = !instance.isLocked();\n\n      // \"Culling\" improves rendering performance of large levels\n      const isVisible = this._isInstanceVisible(instance);\n      if (pixiObject) pixiObject.visible = isVisible;\n      if (isVisible) renderedInstance.update();\n\n      renderedInstance.wasUsed = true;\n    };\n  }\n\n  getPixiContainer() {\n    return this.pixiContainer;\n  }\n\n  getInstanceLeft = instance => {\n    return (\n      instance.getX() -\n      (this.renderedInstances[instance.ptr]\n        ? this.renderedInstances[instance.ptr].getOriginX()\n        : 0)\n    );\n  };\n\n  getInstanceTop = instance => {\n    return (\n      instance.getY() -\n      (this.renderedInstances[instance.ptr]\n        ? this.renderedInstances[instance.ptr].getOriginY()\n        : 0)\n    );\n  };\n\n  getInstanceWidth = instance => {\n    if (instance.hasCustomSize()) return instance.getCustomWidth();\n\n    return this.renderedInstances[instance.ptr]\n      ? this.renderedInstances[instance.ptr].getDefaultWidth()\n      : 0;\n  };\n\n  getInstanceHeight = instance => {\n    if (instance.hasCustomSize()) return instance.getCustomHeight();\n\n    return this.renderedInstances[instance.ptr]\n      ? this.renderedInstances[instance.ptr].getDefaultHeight()\n      : 0;\n  };\n\n  getRendererOfInstance = instance => {\n    var renderedInstance = this.renderedInstances[instance.ptr];\n    if (renderedInstance === undefined) {\n      //No renderer associated yet, the instance must have been just created!...\n      const associatedObjectName = instance.getObjectName();\n      const associatedObject = getObjectByName(\n        this.project,\n        this.layout,\n        associatedObjectName\n      );\n      if (!associatedObject) return;\n\n      //...so let's create a renderer.\n      renderedInstance = this.renderedInstances[\n        instance.ptr\n      ] = ObjectsRenderingService.createNewInstanceRenderer(\n        this.project,\n        this.layout,\n        instance,\n        associatedObject,\n        this.pixiContainer\n      );\n\n      renderedInstance._pixiObject.interactive = true;\n      gesture.panable(renderedInstance._pixiObject);\n      makeDoubleClickable(renderedInstance._pixiObject);\n      renderedInstance._pixiObject.on('click', () => {\n        this.onInstanceClicked(instance);\n      });\n      renderedInstance._pixiObject.on('doubleclick', () => {\n        this.onInstanceDoubleClicked(instance);\n      });\n      renderedInstance._pixiObject.on('mouseover', () => {\n        this.onOverInstance(instance);\n      });\n      renderedInstance._pixiObject.on('mousedown', () => {\n        this.onDownInstance(instance);\n      });\n      renderedInstance._pixiObject.on('touchstart', event => {\n        if (shouldBeHandledByPinch(event.data && event.data.originalEvent)) {\n          return;\n        }\n\n        this.onDownInstance(instance);\n      });\n      renderedInstance._pixiObject.on('mouseout', () => {\n        this.onOutInstance(instance);\n      });\n      renderedInstance._pixiObject.on('panmove', event => {\n        if (shouldBeHandledByPinch(event.data && event.data.originalEvent)) {\n          return;\n        }\n\n        this.onMoveInstance(instance, event.deltaX, event.deltaY);\n      });\n      renderedInstance._pixiObject.on('panend', event => {\n        this.onMoveInstanceEnd();\n      });\n    }\n\n    return renderedInstance;\n  };\n\n  /**\n   * This returns true if an instance is visible according to the viewPosition.\n   * The approach is a naive bounding box testing but save rendering time on large\n   * levels.\n   * @param {*} instance\n   */\n  _isInstanceVisible(instance) {\n    //TODO: Properly handle rotation\n    const left = this.getInstanceLeft(instance);\n    const top = this.getInstanceTop(instance);\n    if (\n      left + this.getInstanceWidth(instance) < this.viewTopLeft[0] ||\n      top + this.getInstanceHeight(instance) < this.viewTopLeft[1] ||\n      left > this.viewBottomRight[0] ||\n      top > this.viewBottomRight[1]\n    )\n      return false;\n\n    return true;\n  }\n\n  _computeViewBounds() {\n    // Add a margin of 100 pixels around the view. Culling will hide PIXI objects,\n    // and hidden objects won't respond to events. Hence, a margin allow the cursor to go\n    // slightly out of the canvas when moving an instance, and still have the instance\n    // to follow the cursor.\n    const margin = 100;\n    this.viewTopLeft = this.viewPosition.toSceneCoordinates(-margin, -margin);\n    this.viewBottomRight = this.viewPosition.toSceneCoordinates(\n      this.viewPosition.getWidth() + margin,\n      this.viewPosition.getHeight() + margin\n    );\n  }\n\n  render() {\n    this._computeViewBounds();\n    this.instances.iterateOverInstancesWithZOrdering(\n      this.instancesRenderer,\n      this.layer.getName()\n    );\n    this._updatePixiObjectsZOrder();\n    this._updateVisibility();\n    this._cleanRenderers();\n  }\n\n  _updatePixiObjectsZOrder() {\n    this.pixiContainer.children.sort((a, b) => {\n      a.zOrder = a.zOrder || 0;\n      b.zOrder = b.zOrder || 0;\n      return a.zOrder - b.zOrder;\n    });\n  }\n\n  _updateVisibility() {\n    this.pixiContainer.visible = this.layer.getVisibility();\n  }\n\n  /**\n   * Delete instance renderers of the specified objects, which will then be recreated during\n   * the next render.\n   * @param {string} objectName The name of the object for which instance must be re-rendered.\n   */\n  resetRenderersFor(objectName) {\n    for (let i in this.renderedInstances) {\n      if (this.renderedInstances.hasOwnProperty(i)) {\n        const renderedInstance = this.renderedInstances[i];\n        if (renderedInstance.getInstance().getObjectName() === objectName) {\n          renderedInstance.instanceRemovedFromScene();\n          delete this.renderedInstances[i];\n        }\n      }\n    }\n  }\n\n  /**\n   * Clean up rendered instances that are not associated to any instance anymore\n   * (this can happen after an instance has been deleted).\n   */\n  _cleanRenderers() {\n    for (let i in this.renderedInstances) {\n      if (this.renderedInstances.hasOwnProperty(i)) {\n        const renderedInstance = this.renderedInstances[i];\n        if (!renderedInstance.wasUsed) {\n          renderedInstance.instanceRemovedFromScene();\n          delete this.renderedInstances[i];\n        } else renderedInstance.wasUsed = false;\n      }\n    }\n  }\n\n  delete() {\n    this.instancesRenderer.delete();\n  }\n}\n","// @flow\nimport * as PIXI from 'pixi.js';\n\n/**\n * Add a 'doubleclick' event to the given PIXI DisplayObject,\n * which is emitted when the object is double tapped in less than\n * 300ms (using touch or mouse).\n */\nexport const makeDoubleClickable = (pixiDisplayObject: PIXI.DisplayObject) => {\n  let lastClickTime = 0;\n\n  const handleTap = event => {\n    const currentTime = Date.now();\n    if (currentTime - lastClickTime < 300) {\n      pixiDisplayObject.emit('doubleclick', event);\n    }\n    lastClickTime = currentTime;\n  };\n\n  pixiDisplayObject.interactive = true;\n  pixiDisplayObject.on('click', handleTap);\n  pixiDisplayObject.on('touchend', handleTap);\n};\n","import * as PIXI from 'pixi.js';\nconst gd = global.gd;\n\nexport default class SelectionRectangle {\n  constructor({\n    instances,\n    instanceMeasurer,\n    toSceneCoordinates,\n    toCanvasCoordinates,\n  }) {\n    this.instances = instances;\n    this.instanceMeasurer = instanceMeasurer;\n    this.toSceneCoordinates = toSceneCoordinates;\n\n    this.pixiRectangle = new PIXI.Graphics();\n    this.pixiRectangle.hitArea = new PIXI.Rectangle(0, 0, 0, 0);\n    this.selectionRectangleStart = null;\n    this.selectionRectangleEnd = null;\n    this._instancesInSelectionRectangle = [];\n\n    this.selector = new gd.InitialInstanceJSFunctor();\n    this.selector.invoke = instancePtr => {\n      const instance = gd.wrapPointer(instancePtr, gd.InitialInstance);\n      const x = this.instanceMeasurer.getInstanceLeft(instance);\n      const y = this.instanceMeasurer.getInstanceTop(instance);\n      const instanceHeight = this.instanceMeasurer.getInstanceHeight(instance);\n      const instanceWidth = this.instanceMeasurer.getInstanceWidth(instance);\n\n      if (!this.selectionRectangleStart || !this.selectionRectangleEnd) return;\n\n      const selectionSceneStart = toSceneCoordinates(\n        this.selectionRectangleStart.x,\n        this.selectionRectangleStart.y\n      );\n      const selectionSceneEnd = toSceneCoordinates(\n        this.selectionRectangleEnd.x,\n        this.selectionRectangleEnd.y\n      );\n\n      if (\n        selectionSceneStart[0] <= x &&\n        x + instanceWidth <= selectionSceneEnd[0] &&\n        selectionSceneStart[1] <= y &&\n        y + instanceHeight <= selectionSceneEnd[1]\n      ) {\n        this._instancesInSelectionRectangle.push(instance);\n      }\n    };\n  }\n\n  hasStartedSelectionRectangle() {\n    return this.selectionRectangleStart;\n  }\n\n  startSelectionRectangle = (x, y) => {\n    this.selectionRectangleStart = { x, y };\n    this.selectionRectangleEnd = { x, y };\n  };\n\n  updateSelectionRectangle = (lastX, lastY) => {\n    if (!this.selectionRectangleStart)\n      this.selectionRectangleStart = { x: lastX, y: lastY };\n\n    this.selectionRectangleEnd = { x: lastX, y: lastY };\n  };\n\n  endSelectionRectangle = () => {\n    if (!this.selectionRectangleStart) return [];\n\n    this._instancesInSelectionRectangle.length = 0;\n    if (this.selectionRectangleStart.x > this.selectionRectangleEnd.x) {\n      const tmp = this.selectionRectangleStart.x;\n      this.selectionRectangleStart.x = this.selectionRectangleEnd.x;\n      this.selectionRectangleEnd.x = tmp;\n    }\n    if (this.selectionRectangleStart.y > this.selectionRectangleEnd.y) {\n      const tmp = this.selectionRectangleStart.y;\n      this.selectionRectangleStart.y = this.selectionRectangleEnd.y;\n      this.selectionRectangleEnd.y = tmp;\n    }\n\n    this.instances.iterateOverInstances(this.selector);\n\n    this.selectionRectangleStart = null;\n    return this._instancesInSelectionRectangle;\n  };\n\n  getPixiObject() {\n    return this.pixiRectangle;\n  }\n\n  render() {\n    if (!this.selectionRectangleStart) {\n      this.pixiRectangle.visible = false;\n      return;\n    }\n\n    let x1 = this.selectionRectangleStart.x;\n    let y1 = this.selectionRectangleStart.y;\n    let x2 = this.selectionRectangleEnd.x;\n    let y2 = this.selectionRectangleEnd.y;\n\n    this.pixiRectangle.visible = true;\n    this.pixiRectangle.clear();\n    this.pixiRectangle.beginFill(0x6868e8);\n    this.pixiRectangle.lineStyle(1, 0x6868e8, 1);\n    this.pixiRectangle.fillAlpha = 0.1;\n    this.pixiRectangle.alpha = 0.8;\n    this.pixiRectangle.drawRect(\n      Math.min(x1, x2),\n      Math.min(y1, y2),\n      Math.abs(x2 - x1),\n      Math.abs(y2 - y1)\n    );\n    this.pixiRectangle.endFill();\n  }\n\n  delete() {\n    this.selector.delete();\n  }\n}\n","// @flow\nimport { roundPosition } from '../Utils/GridHelpers';\nconst gd = global.gd;\n\ntype Props = {|\n  instances: gdInitialInstancesContainer,\n  options: Object,\n|};\n\nconst roundPositionsToGrid = (\n  pos: [number, number],\n  options: Object\n): [number, number] => {\n  const newPos = pos;\n\n  if (options.grid && options.snap) {\n    newPos[0] = roundPosition(\n      newPos[0],\n      options.gridWidth,\n      options.gridOffsetX\n    );\n    newPos[1] = roundPosition(\n      newPos[1],\n      options.gridHeight,\n      options.gridOffsetY\n    );\n  } else {\n    newPos[0] = Math.round(newPos[0]);\n    newPos[1] = Math.round(newPos[1]);\n  }\n\n  return newPos;\n};\n\n/**\n * Allow to add instances on the scene. Supports \"temporary\" instances,\n * which are real instances but can be deleted as long as they are not \"committed\".\n */\nexport default class InstancesAdder {\n  _instances: gdInitialInstancesContainer;\n  _temporaryInstances: Array<gdInitialInstance>;\n  _options: Object;\n  _zOrderFinder = new gd.HighestZOrderFinder();\n\n  constructor({ instances, options }: Props) {\n    this._instances = instances;\n    this._options = options;\n    this._temporaryInstances = [];\n  }\n\n  setOptions(options: Object) {\n    this._options = options;\n  }\n\n  /**\n   * Immediately create new instance at the specified position\n   * (specified in scene coordinates).\n   */\n  addInstances = (pos: [number, number], objectNames: Array<string>) => {\n    this._instances.iterateOverInstances(this._zOrderFinder);\n    const zOrder = this._zOrderFinder.getHighestZOrder() + 1;\n\n    const newPos = roundPositionsToGrid(pos, this._options);\n    objectNames.map(objectName => {\n      const instance: gdInitialInstance = this._instances.insertNewInitialInstance();\n      instance.setObjectName(objectName);\n      instance.setX(newPos[0]);\n      instance.setY(newPos[1]);\n      instance.setZOrder(zOrder);\n\n      return instance;\n    });\n  };\n\n  /**\n   * Create temporary instances at the specified position\n   * (specified in scene coordinates).\n   */\n  createOrUpdateTemporaryInstancesFromObjectNames = (\n    pos: [number, number],\n    objectNames: Array<string>\n  ) => {\n    if (!objectNames.length) return;\n\n    if (!this._temporaryInstances.length) {\n      this._createTemporaryInstancesFromObjectNames(pos, objectNames);\n    } else {\n      this.updateTemporaryInstancePositions(pos);\n    }\n  };\n\n  _createTemporaryInstancesFromObjectNames = (\n    pos: [number, number],\n    objectNames: Array<string>\n  ) => {\n    this.deleteTemporaryInstances();\n\n    this._instances.iterateOverInstances(this._zOrderFinder);\n    const zOrder = this._zOrderFinder.getHighestZOrder() + 1;\n\n    const newPos = roundPositionsToGrid(pos, this._options);\n    this._temporaryInstances = objectNames.map(objectName => {\n      const instance: gdInitialInstance = this._instances.insertNewInitialInstance();\n      instance.setObjectName(objectName);\n      instance.setX(newPos[0]);\n      instance.setY(newPos[1]);\n      instance.setZOrder(zOrder);\n\n      return instance;\n    });\n  };\n\n  /**\n   * Update the temporary instances  positions\n   * (specified in scene coordinates). Useful when dragging these instances.\n   */\n  updateTemporaryInstancePositions = (pos: [number, number]) => {\n    const newPos = roundPositionsToGrid(pos, this._options);\n    this._temporaryInstances.forEach(instance => {\n      instance.setX(Math.round(newPos[0]));\n      instance.setY(Math.round(newPos[1]));\n    });\n  };\n\n  /**\n   * Delete the temporary instances.\n   */\n  deleteTemporaryInstances() {\n    this._temporaryInstances.forEach(instance => {\n      this._instances.removeInstance(instance);\n    });\n    this._temporaryInstances = [];\n  }\n\n  /**\n   * Consider the temporary instances as not temporary anymore.\n   */\n  commitTemporaryInstances() {\n    this._temporaryInstances = [];\n  }\n\n  unmount() {\n    this._zOrderFinder.delete();\n\n    // Nothing to do for temporaries instances, that should have been deleted/commited by this moment.\n    // Don't take the risk to delete them now as this._instances might have been deleted/invalidated\n    // already.\n  }\n}\n","// @flow\nimport { Trans } from '@lingui/macro';\nimport * as React from 'react';\nimport Background from '../../UI/Background';\nimport enumerateLayers from '../../LayersList/EnumerateLayers';\nimport EmptyMessage from '../../UI/EmptyMessage';\nimport PropertiesEditor from '../../PropertiesEditor';\nimport propertiesMapToSchema from '../../PropertiesEditor/PropertiesMapToSchema';\nimport { type Schema } from '../../PropertiesEditor';\nimport VariablesList from '../../VariablesList';\nimport getObjectByName from '../../Utils/GetObjectByName';\nimport IconButton from '../../UI/IconButton';\nimport { Line, Column } from '../../UI/Grid';\nimport OpenInNew from '@material-ui/icons/OpenInNew';\nimport Text from '../../UI/Text';\nimport { type UnsavedChanges } from '../../MainFrame/UnsavedChangesContext';\n\ntype Props = {|\n  project: gdProject,\n  layout: gdLayout,\n  instances: Array<gdInitialInstance>,\n  onEditObjectByName: string => void,\n  editObjectVariables: (?gdObject) => void,\n  editInstanceVariables: gdInitialInstance => void,\n  unsavedChanges?: UnsavedChanges,\n|};\n\nexport default class InstancePropertiesEditor extends React.Component<Props> {\n  _instanceVariablesList: { current: null | VariablesList } = React.createRef();\n  schema: Schema = [\n    {\n      name: 'Object name',\n      valueType: 'string',\n      disabled: true,\n      getValue: (instance: gdInitialInstance) => instance.getObjectName(),\n      setValue: (instance: gdInitialInstance, newValue: string) =>\n        instance.setObjectName(newValue),\n      onEditButtonClick: (instance: gdInitialInstance) =>\n        this.props.onEditObjectByName(instance.getObjectName()),\n    },\n    {\n      name: 'Position',\n      type: 'row',\n      children: [\n        {\n          name: 'X',\n          valueType: 'number',\n          getValue: (instance: gdInitialInstance) => instance.getX(),\n          setValue: (instance: gdInitialInstance, newValue: number) =>\n            instance.setX(newValue),\n        },\n        {\n          name: 'Y',\n          valueType: 'number',\n          getValue: (instance: gdInitialInstance) => instance.getY(),\n          setValue: (instance: gdInitialInstance, newValue: number) =>\n            instance.setY(newValue),\n        },\n      ],\n    },\n    {\n      name: 'Angle',\n      valueType: 'number',\n      getValue: (instance: gdInitialInstance) => instance.getAngle(),\n      setValue: (instance: gdInitialInstance, newValue: number) =>\n        instance.setAngle(newValue),\n    },\n    {\n      name: 'Lock position/angle in the editor',\n      valueType: 'boolean',\n      getValue: (instance: gdInitialInstance) => instance.isLocked(),\n      setValue: (instance: gdInitialInstance, newValue: boolean) =>\n        instance.setLocked(newValue),\n    },\n    {\n      name: 'Z Order',\n      valueType: 'number',\n      getValue: (instance: gdInitialInstance) => instance.getZOrder(),\n      setValue: (instance: gdInitialInstance, newValue: number) =>\n        instance.setZOrder(newValue),\n    },\n    {\n      name: 'Layer',\n      valueType: 'string',\n      getChoices: () => enumerateLayers(this.props.layout),\n      getValue: (instance: gdInitialInstance) => instance.getLayer(),\n      setValue: (instance: gdInitialInstance, newValue: string) =>\n        instance.setLayer(newValue),\n    },\n    {\n      name: 'Custom size',\n      type: 'row',\n      children: [\n        {\n          name: 'Width',\n          valueType: 'number',\n          getValue: (instance: gdInitialInstance) => instance.getCustomWidth(),\n          setValue: (instance: gdInitialInstance, newValue: number) =>\n            instance.setCustomWidth(newValue),\n        },\n        {\n          name: 'Height',\n          valueType: 'number',\n          getValue: (instance: gdInitialInstance) => instance.getCustomHeight(),\n          setValue: (instance: gdInitialInstance, newValue: number) =>\n            instance.setCustomHeight(newValue),\n        },\n      ],\n    },\n    {\n      name: 'Custom size?',\n      valueType: 'boolean',\n      getValue: (instance: gdInitialInstance) => instance.hasCustomSize(),\n      setValue: (instance: gdInitialInstance, newValue: boolean) =>\n        instance.setHasCustomSize(newValue),\n    },\n  ];\n\n  _renderEmpty() {\n    return (\n      <EmptyMessage>\n        <Trans>\n          Click on an instance in the scene to display its properties\n        </Trans>\n      </EmptyMessage>\n    );\n  }\n\n  _renderInstancesProperties() {\n    const { project, layout, instances } = this.props;\n    const instance = instances[0];\n    const associatedObjectName = instance.getObjectName();\n    const object = getObjectByName(project, layout, associatedObjectName);\n    //TODO: multiple instances support\n    const properties = instance.getCustomProperties(project, layout);\n    const instanceSchema = propertiesMapToSchema(\n      properties,\n      (instance: gdInitialInstance) =>\n        instance.getCustomProperties(project, layout),\n      (instance: gdInitialInstance, name, value) =>\n        instance.updateCustomProperty(name, value, project, layout)\n    );\n\n    return (\n      <div\n        style={{ overflowY: 'scroll', overflowX: 'hidden' }}\n        key={instances\n          .map((instance: gdInitialInstance) => '' + instance.ptr)\n          .join(';')}\n      >\n        <Column>\n          <PropertiesEditor\n            unsavedChanges={this.props.unsavedChanges}\n            schema={this.schema.concat(instanceSchema)}\n            instances={instances}\n          />\n          <Line alignItems=\"center\" justifyContent=\"space-between\">\n            <Text>\n              <Trans>Instance Variables</Trans>\n            </Text>\n            <IconButton\n              onClick={() => {\n                this.props.editInstanceVariables(instance);\n              }}\n            >\n              <OpenInNew />\n            </IconButton>\n          </Line>\n        </Column>\n        <VariablesList\n          inheritedVariablesContainer={object ? object.getVariables() : null}\n          variablesContainer={instance.getVariables()}\n          onSizeUpdated={\n            () =>\n              this.forceUpdate() /*Force update to ensure dialog is properly positionned*/\n          }\n          ref={this._instanceVariablesList}\n        />\n      </div>\n    );\n  }\n\n  render() {\n    const { instances } = this.props;\n\n    return (\n      <Background>\n        {!instances || !instances.length\n          ? this._renderEmpty()\n          : this._renderInstancesProperties()}\n      </Background>\n    );\n  }\n}\n","// @flow\nimport { Trans } from '@lingui/macro';\nimport React, { Component } from 'react';\nimport {\n  AutoSizer,\n  Table as RVTable,\n  Column as RVColumn,\n} from 'react-virtualized';\nimport ThemeConsumer from '../../UI/Theme/ThemeConsumer';\nimport SearchBar from '../../UI/SearchBar';\nconst gd = global.gd;\n\ntype State = {|\n  searchText: string,\n|};\n\ntype Props = {|\n  instances: gdInitialInstancesContainer,\n  selectedInstances: Array<gdInitialInstance>,\n  onSelectInstances: (Array<gdInitialInstance>) => void,\n  freezeUpdate: boolean,\n  style?: ?Object,\n|};\n\ntype RenderedRowInfo = {\n  instance: gdInitialInstance,\n  name: string,\n  locked: string,\n  x: string,\n  y: string,\n  angle: string,\n  layer: string,\n  zOrder: string,\n};\n\nconst styles = {\n  container: {\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'stretch',\n  },\n};\n\nexport default class InstancesList extends Component<Props, State> {\n  state = {\n    searchText: '',\n  };\n  renderedRows: Array<RenderedRowInfo> = [];\n  instanceRowRenderer: ?typeof gd.InitialInstanceJSFunctor;\n  table: ?typeof RVTable;\n  _searchBar = React.createRef<SearchBar>();\n\n  shouldComponentUpdate(nextProps: Props) {\n    // Rendering the component is costly as it iterates over\n    // every instances, so the prop freezeUpdate allows to ask the component to stop\n    // updating, for example when hidden.\n    return !nextProps.freezeUpdate;\n  }\n\n  componentWillReceiveProps(nextProps: Props) {\n    // If the component was frozen and is now allowed to update,\n    // force the table to be refreshed to reflect changes (new instances,\n    // or selection changes).\n    if (!nextProps.freezeUpdate && this.props.freezeUpdate) {\n      if (this.table) this.table.forceUpdateGrid();\n    }\n  }\n\n  componentDidMount() {\n    if (this._searchBar.current) this._searchBar.current.focus();\n  }\n\n  componentWillMount() {\n    // Functor used to display an instance row\n    this.instanceRowRenderer = new gd.InitialInstanceJSFunctor();\n    this.instanceRowRenderer.invoke = instancePtr => {\n      const { searchText } = this.state;\n      const instance = gd.wrapPointer(instancePtr, gd.InitialInstance);\n\n      const name: string = instance.getObjectName();\n      if (\n        !searchText ||\n        name.toLowerCase().indexOf(searchText.toLowerCase()) !== -1\n      ) {\n        this.renderedRows.push({\n          instance,\n          name,\n          locked: instance.isLocked() ? '🔒' : '',\n          x: instance.getX().toFixed(2),\n          y: instance.getY().toFixed(2),\n          angle: instance.getAngle().toFixed(2),\n          layer: instance.getLayer(),\n          zOrder: instance.getZOrder(),\n        });\n      }\n    };\n  }\n\n  componentWillUnmount() {\n    if (this.instanceRowRenderer) this.instanceRowRenderer.delete();\n  }\n\n  _onRowClick = ({ index }: { index: number }) => {\n    if (!this.renderedRows[index]) return;\n    this.props.onSelectInstances([this.renderedRows[index].instance]);\n  };\n\n  _rowGetter = ({ index }: { index: number }) => {\n    return this.renderedRows[index];\n  };\n\n  _rowClassName = ({ index }: { index: number }) => {\n    if (index < 0) {\n      return 'tableHeaderRow';\n    } else {\n      const row = this.renderedRows[index];\n      if (row && this.props.selectedInstances.indexOf(row.instance) !== -1)\n        return 'tableSelectedRow';\n\n      return index % 2 === 0 ? 'tableEvenRow' : 'tableOddRow';\n    }\n  };\n\n  _selectFirstInstance = () => {\n    if (this.renderedRows.length) {\n      this.props.onSelectInstances([this.renderedRows[0].instance]);\n    }\n  };\n\n  render() {\n    const { searchText } = this.state;\n    const { instances, style } = this.props;\n\n    this.renderedRows.length = 0;\n    instances.iterateOverInstances(this.instanceRowRenderer);\n\n    // Force RVTable component to be mounted again if instances\n    // has been changed. Avoid accessing to invalid objects that could\n    // crash the app.\n    const tableKey = instances.ptr;\n\n    return (\n      <ThemeConsumer>\n        {muiTheme => (\n          <div style={{ ...styles.container, ...style }}>\n            <div style={{ flex: 1 }}>\n              <AutoSizer>\n                {({ height, width }) => (\n                  <RVTable\n                    ref={table => (this.table = table)}\n                    key={tableKey}\n                    headerHeight={30}\n                    height={height}\n                    className={muiTheme.tableRootClassName}\n                    headerClassName={'tableHeaderColumn'}\n                    rowCount={this.renderedRows.length}\n                    rowGetter={this._rowGetter}\n                    rowHeight={35}\n                    onRowClick={this._onRowClick}\n                    rowClassName={this._rowClassName}\n                    width={width}\n                  >\n                    <RVColumn\n                      label={<Trans>Object name</Trans>}\n                      dataKey=\"name\"\n                      width={width * 0.35}\n                      className={'tableColumn'}\n                    />\n                    <RVColumn\n                      label=\"\"\n                      dataKey=\"locked\"\n                      width={width * 0.05}\n                      className={'tableColumn'}\n                    />\n                    <RVColumn\n                      label={<Trans>X</Trans>}\n                      dataKey=\"x\"\n                      width={width * 0.1}\n                      className={'tableColumn'}\n                    />\n                    <RVColumn\n                      label={<Trans>Y</Trans>}\n                      dataKey=\"y\"\n                      width={width * 0.1}\n                      className={'tableColumn'}\n                    />\n                    <RVColumn\n                      label={<Trans>Angle</Trans>}\n                      dataKey=\"angle\"\n                      width={width * 0.1}\n                      className={'tableColumn'}\n                    />\n                    <RVColumn\n                      label={<Trans>Layer</Trans>}\n                      dataKey=\"layer\"\n                      width={width * 0.2}\n                      className={'tableColumn'}\n                    />\n                    <RVColumn\n                      label={<Trans>Z Order</Trans>}\n                      dataKey=\"zOrder\"\n                      width={width * 0.1}\n                      className={'tableColumn'}\n                    />\n                  </RVTable>\n                )}\n              </AutoSizer>\n            </div>\n            <SearchBar\n              value={searchText}\n              onChange={searchText =>\n                this.setState({\n                  searchText,\n                })\n              }\n              onRequestSearch={this._selectFirstInstance}\n              ref={this._searchBar}\n            />\n          </div>\n        )}\n      </ThemeConsumer>\n    );\n  }\n}\n","import { Trans } from '@lingui/macro';\nimport React, { Component } from 'react';\nimport FlatButton from '../UI/FlatButton';\nimport Dialog from '../UI/Dialog';\nimport SelectField from '../UI/SelectField';\nimport SelectOption from '../UI/SelectOption';\nimport Text from '../UI/Text';\nimport enumerateLayers from './EnumerateLayers';\n\nexport default class VariablesEditorDialog extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      selectedLayer: '',\n    };\n  }\n\n  componentWillReceiveProps(newProps) {\n    if (!this.props.open && newProps.open) {\n      this.setState({\n        selectedLayer: '',\n      });\n    }\n  }\n\n  render() {\n    if (!this.props.layersContainer || !this.props.open) return null;\n\n    const actions = [\n      <FlatButton\n        key=\"cancel\"\n        label={<Trans>Cancel</Trans>}\n        keyboardFocused={true}\n        onClick={() => this.props.onClose(false)}\n      />,\n      <FlatButton\n        key=\"remove\"\n        label={<Trans>Remove objects</Trans>}\n        onClick={() => this.props.onClose(true, null)}\n      />,\n      <FlatButton\n        key=\"move\"\n        label={<Trans>Move objects</Trans>}\n        primary={true}\n        onClick={() => this.props.onClose(true, this.state.selectedLayer)}\n      />,\n    ];\n\n    const layers = enumerateLayers(this.props.layersContainer);\n    const choices = layers\n      .filter(({ value }) => {\n        return value !== this.props.layerRemoved;\n      })\n      .map(({ value, label }) => (\n        <SelectOption key={value} value={value} primaryText={label} />\n      ));\n\n    return (\n      <Dialog\n        title={<Trans>Objects on {this.props.layerRemoved}</Trans>}\n        actions={actions}\n        cannotBeDismissed={false}\n        open={this.props.open}\n        onRequestClose={this.props.onCancel}\n      >\n        <Text>\n          <Trans>Move objects on layer {this.props.layerRemoved} to:</Trans>\n        </Text>\n        <SelectField\n          value={this.state.selectedLayer}\n          onChange={(event, index, newValue) => {\n            this.setState({ selectedLayer: newValue });\n          }}\n        >\n          {choices}\n        </SelectField>\n      </Dialog>\n    );\n  }\n}\n","// @flow weak\nimport { Trans } from '@lingui/macro';\nimport { t } from '@lingui/macro';\nimport React, { Component } from 'react';\nimport FlatButton from '../UI/FlatButton';\nimport ObjectsEditorService from './ObjectsEditorService';\nimport Dialog from '../UI/Dialog';\nimport HelpButton from '../UI/HelpButton';\nimport BehaviorsEditor from '../BehaviorsEditor';\nimport { Tabs, Tab } from '../UI/Tabs';\nimport { withSerializableObject } from '../Utils/SerializableObjectEditorContainer';\nimport SemiControlledTextField from '../UI/SemiControlledTextField';\nimport MiniToolbar, { MiniToolbarText } from '../UI/MiniToolbar';\n\ntype StateType = {|\n  currentTab: string,\n  newObjectName: string,\n|};\n\nexport class ObjectEditorDialog extends Component<*, StateType> {\n  state = {\n    currentTab: 'properties',\n    newObjectName: this.props.objectName,\n  };\n\n  _onChangeTab = (value: string) => {\n    this.setState({\n      currentTab: value,\n    });\n  };\n\n  render() {\n    const actions = [\n      <FlatButton\n        key=\"cancel\"\n        label={<Trans>Cancel</Trans>}\n        onClick={this.props.onCancel}\n      />,\n      <FlatButton\n        key=\"apply\"\n        label={<Trans>Apply</Trans>}\n        primary\n        keyboardFocused\n        onClick={() => {\n          this.props.onApply();\n          // Do the renaming *after* applying changes, as \"withSerializableObject\"\n          // HOC will unserialize the object to apply modifications, which will\n          // override the name.\n          this.props.onRename(this.state.newObjectName);\n        }}\n      />,\n    ];\n\n    const EditorComponent = this.props.editorComponent;\n    const { currentTab } = this.state;\n\n    return (\n      <Dialog\n        key={this.props.object && this.props.object.ptr}\n        secondaryActions={<HelpButton helpPagePath={this.props.helpPagePath} />}\n        actions={actions}\n        noMargin\n        onRequestClose={this.props.onCancel}\n        cannotBeDismissed={true}\n        open={this.props.open}\n        noTitleMargin\n        title={\n          <div>\n            <Tabs value={currentTab} onChange={this._onChangeTab}>\n              <Tab\n                label={<Trans>Properties</Trans>}\n                value={'properties'}\n                key={'properties'}\n              />\n              <Tab\n                label={<Trans>Behaviors</Trans>}\n                value={'behaviors'}\n                key={'behaviors'}\n              />\n            </Tabs>\n          </div>\n        }\n      >\n        <MiniToolbar alignItems=\"baseline\">\n          <MiniToolbarText>\n            <Trans>Object name:</Trans>\n          </MiniToolbarText>\n          <SemiControlledTextField\n            fullWidth\n            commitOnBlur\n            margin=\"none\"\n            value={this.state.newObjectName}\n            hintText={t`Object Name`}\n            onChange={text => {\n              if (text === this.state.newObjectName) return;\n\n              if (this.props.canRenameObject(text)) {\n                this.setState({ newObjectName: text });\n              }\n            }}\n          />\n        </MiniToolbar>\n        {currentTab === 'properties' && EditorComponent && (\n          <EditorComponent\n            object={this.props.object}\n            project={this.props.project}\n            resourceSources={this.props.resourceSources}\n            onChooseResource={this.props.onChooseResource}\n            resourceExternalEditors={this.props.resourceExternalEditors}\n            onSizeUpdated={\n              () =>\n                this.forceUpdate() /*Force update to ensure dialog is properly positionned*/\n            }\n            objectName={this.props.objectName}\n          />\n        )}\n        {currentTab === 'behaviors' && (\n          <BehaviorsEditor\n            object={this.props.object}\n            project={this.props.project}\n            resourceSources={this.props.resourceSources}\n            onChooseResource={this.props.onChooseResource}\n            resourceExternalEditors={this.props.resourceExternalEditors}\n            onSizeUpdated={\n              () =>\n                this.forceUpdate() /*Force update to ensure dialog is properly positionned*/\n            }\n          />\n        )}\n      </Dialog>\n    );\n  }\n}\n\ntype ContainerStateType = {|\n  dialogComponent: ?Class<*>,\n  editorComponent: ?Class<*>,\n  castToObjectType: ?Function,\n  helpPagePath: ?string,\n  objectName: string,\n|};\n\nexport default class ObjectEditorDialogContainer extends Component<*, *> {\n  state: ContainerStateType = {\n    dialogComponent: null,\n    editorComponent: null,\n    castToObjectType: null,\n    helpPagePath: null,\n    objectName: '',\n  };\n\n  componentWillMount() {\n    this._loadFrom(this.props.object);\n  }\n\n  componentWillReceiveProps(newProps) {\n    if (\n      (!this.props.open && newProps.open) ||\n      (newProps.open && this.props.object !== newProps.object)\n    ) {\n      this._loadFrom(newProps.object);\n    }\n  }\n\n  _loadFrom(object) {\n    if (!object) return;\n\n    const editorConfiguration = ObjectsEditorService.getEditorConfiguration(\n      object.getType()\n    );\n    if (!editorConfiguration) {\n      return this.setState({\n        dialogComponent: null,\n        editorComponent: null,\n        castToObjectType: null,\n      });\n    }\n\n    this.setState({\n      dialogComponent: withSerializableObject(ObjectEditorDialog, {\n        propName: 'object',\n        newObjectCreator: () => editorConfiguration.createNewObject(object),\n        useProjectToUnserialize: true,\n      }),\n      editorComponent: editorConfiguration.component,\n      helpPagePath: editorConfiguration.helpPagePath,\n      castToObjectType: editorConfiguration.castToObjectType,\n      objectName: object.getName(),\n    });\n  }\n\n  render() {\n    if (\n      !this.props.object ||\n      !this.state.dialogComponent ||\n      !this.state.castToObjectType\n    )\n      return null;\n\n    const EditorDialog: Class<*> = this.state.dialogComponent;\n    const { editorComponent, castToObjectType, helpPagePath } = this.state;\n\n    return (\n      <EditorDialog\n        editorComponent={editorComponent}\n        key={this.props.object && this.props.object.ptr}\n        helpPagePath={helpPagePath}\n        {...this.props}\n        object={castToObjectType(this.props.object)}\n        objectName={this.state.objectName}\n      />\n    );\n  }\n}\n","// @flow\nimport { Trans } from '@lingui/macro';\nimport { t } from '@lingui/macro';\n\nimport * as React from 'react';\nimport Checkbox from '../../UI/Checkbox';\nimport { Line, Column } from '../../UI/Grid';\nimport ColorPicker from '../../UI/ColorField/ColorPicker';\nimport MiniToolbar, { MiniToolbarText } from '../../UI/MiniToolbar';\nimport ResourceSelector from '../../ResourcesList/ResourceSelector';\nimport ResourcesLoader from '../../ResourcesLoader';\nimport { type EditorProps } from './EditorProps.flow';\nimport SemiControlledTextField from '../../UI/SemiControlledTextField';\nconst gd = global.gd;\n\nconst toolbarItemStyle = {\n  marginRight: 10,\n};\n\nconst styles = {\n  sizeTextField: {\n    width: 90,\n    ...toolbarItemStyle,\n  },\n  toolbarItem: toolbarItemStyle,\n  checkbox: toolbarItemStyle,\n};\n\nexport default class TextEditor extends React.Component<EditorProps, void> {\n  render() {\n    const {\n      object,\n      project,\n      resourceSources,\n      onChooseResource,\n      resourceExternalEditors,\n    } = this.props;\n    const textObject = gd.asTextObject(object);\n\n    return (\n      <Column noMargin>\n        <MiniToolbar>\n          <MiniToolbarText>\n            <Trans>Size:</Trans>\n          </MiniToolbarText>\n          <SemiControlledTextField\n            commitOnBlur\n            type=\"number\"\n            margin=\"none\"\n            style={styles.sizeTextField}\n            value={textObject.getCharacterSize()}\n            onChange={value => {\n              textObject.setCharacterSize(parseInt(value, 10) || 0);\n              this.forceUpdate();\n            }}\n          />\n          <MiniToolbarText>\n            <Trans>Color:</Trans>\n          </MiniToolbarText>\n          <ColorPicker\n            style={styles.toolbarItem}\n            disableAlpha\n            color={{\n              r: textObject.getColorR(),\n              g: textObject.getColorG(),\n              b: textObject.getColorB(),\n              a: 255,\n            }}\n            onChangeComplete={color => {\n              textObject.setColor(color.rgb.r, color.rgb.g, color.rgb.b);\n              this.forceUpdate();\n            }}\n          />\n          <Checkbox\n            label={<Trans>Bold</Trans>}\n            checked={textObject.isBold()}\n            onCheck={(e, checked) => {\n              textObject.setBold(checked);\n              this.forceUpdate();\n            }}\n            style={styles.checkbox}\n          />\n          <Checkbox\n            label={<Trans>Italic</Trans>}\n            checked={textObject.isItalic()}\n            onCheck={(e, checked) => {\n              textObject.setItalic(checked);\n              this.forceUpdate();\n            }}\n            style={styles.checkbox}\n          />\n          <MiniToolbarText>\n            <Trans>Font:</Trans>\n          </MiniToolbarText>\n          <ResourceSelector\n            margin=\"none\"\n            project={project}\n            resourceSources={resourceSources}\n            onChooseResource={onChooseResource}\n            resourceExternalEditors={resourceExternalEditors}\n            resourcesLoader={ResourcesLoader}\n            resourceKind=\"font\"\n            fullWidth\n            canBeReset\n            initialResourceName={textObject.getFontName()}\n            onChange={resourceName => {\n              textObject.setFontName(resourceName);\n              this.forceUpdate();\n            }}\n            hintText={<Trans>Choose a font</Trans>}\n          />\n        </MiniToolbar>\n        <Line noMargin>\n          <Column expand>\n            <Line>\n              <SemiControlledTextField\n                floatingLabelText={<Trans>Initial text to display</Trans>}\n                floatingLabelFixed\n                commitOnBlur\n                hintText={t`Enter the text to be displayed by the object`}\n                fullWidth\n                multiLine\n                rows={8}\n                rowsMax={8}\n                value={textObject.getString()}\n                onChange={value => {\n                  textObject.setString(value);\n                  this.forceUpdate();\n                  this.props.onSizeUpdated();\n                }}\n              />\n            </Line>\n          </Column>\n        </Line>\n      </Column>\n    );\n  }\n}\n","// @flow\nimport { Trans } from '@lingui/macro';\n\nimport * as React from 'react';\nimport SemiControlledTextField from '../../UI/SemiControlledTextField';\nimport { Line, Column } from '../../UI/Grid';\nimport ResourceSelectorWithThumbnail from '../../ResourcesList/ResourceSelectorWithThumbnail';\nimport { type EditorProps } from './EditorProps.flow';\nimport { ResponsiveLineStackLayout } from '../../UI/Layout';\nconst gd = global.gd;\n\nexport default class TiledSpriteEditor extends React.Component<\n  EditorProps,\n  void\n> {\n  render() {\n    const {\n      object,\n      project,\n      resourceSources,\n      onChooseResource,\n      resourceExternalEditors,\n    } = this.props;\n    const tiledSpriteObject = gd.asTiledSpriteObject(object);\n\n    return (\n      <Column>\n        <Line>\n          <ResourceSelectorWithThumbnail\n            project={project}\n            resourceSources={resourceSources}\n            onChooseResource={onChooseResource}\n            resourceKind=\"image\"\n            resourceName={tiledSpriteObject.getTexture()}\n            resourceExternalEditors={resourceExternalEditors}\n            onChange={resourceName => {\n              tiledSpriteObject.setTexture(resourceName);\n              this.forceUpdate();\n            }}\n            floatingLabelText={<Trans>Select an image</Trans>}\n          />\n        </Line>\n        <ResponsiveLineStackLayout>\n          <SemiControlledTextField\n            commitOnBlur\n            floatingLabelText={<Trans>Default width (in pixels)</Trans>}\n            fullWidth\n            type=\"number\"\n            value={tiledSpriteObject.getWidth()}\n            onChange={value => {\n              tiledSpriteObject.setWidth(parseInt(value, 10) || 0);\n              this.forceUpdate();\n            }}\n          />\n          <SemiControlledTextField\n            commitOnBlur\n            floatingLabelText={<Trans>Default height (in pixels)</Trans>}\n            fullWidth\n            type=\"number\"\n            value={tiledSpriteObject.getHeight()}\n            onChange={value => {\n              tiledSpriteObject.setHeight(parseInt(value, 10) || 0);\n              this.forceUpdate();\n            }}\n          />\n        </ResponsiveLineStackLayout>\n      </Column>\n    );\n  }\n}\n","// @flow\nimport { mapFor } from '../Utils/MapFor';\nimport flatten from 'lodash/flatten';\nimport { type SelectedTags, hasStringAllTags } from '../Utils/TagsHelper';\nconst gd = global.gd;\n\nexport type EnumeratedObjectMetadata = {|\n  extension: gdPlatformExtension,\n  objectMetadata: gdObjectMetadata,\n  name: string,\n  fullName: string,\n  description: string,\n  iconFilename: string,\n|};\n\nexport type ObjectWithContext = {|\n  object: gdObject,\n  global: boolean,\n|};\n\nexport type GroupWithContext = {|\n  group: gdObjectGroup,\n  global: boolean,\n|};\n\nexport type ObjectWithContextList = Array<ObjectWithContext>;\nexport type GroupWithContextList = Array<GroupWithContext>;\n\nexport const isSameObjectWithContext = (\n  objectWithContext: ?ObjectWithContext\n) => (other: ?ObjectWithContext) => {\n  return (\n    objectWithContext &&\n    other &&\n    objectWithContext.global === other.global &&\n    objectWithContext.object === other.object\n  );\n};\n\nexport const enumerateObjects = (\n  project: gdProject,\n  objectsContainer: gdObjectsContainer,\n  type: ?string = undefined\n) => {\n  const filterObject = (object: gdObject): boolean => {\n    return (\n      !type ||\n      gd.getTypeOfObject(project, objectsContainer, object.getName(), false) ===\n        type\n    );\n  };\n\n  const containerObjectsList: ObjectWithContextList = mapFor(\n    0,\n    objectsContainer.getObjectsCount(),\n    i => objectsContainer.getObjectAt(i)\n  )\n    .filter(filterObject)\n    .map((object: gdObject): ObjectWithContext => ({ object, global: false }));\n\n  const projectObjectsList: ObjectWithContextList =\n    project === objectsContainer\n      ? []\n      : mapFor(0, project.getObjectsCount(), i => project.getObjectAt(i))\n          .filter(filterObject)\n          .map(\n            (object: gdObject): ObjectWithContext => ({\n              object,\n              global: true,\n            })\n          );\n\n  const allObjectsList: ObjectWithContextList = containerObjectsList.concat(\n    projectObjectsList\n  );\n\n  return {\n    containerObjectsList,\n    projectObjectsList,\n    allObjectsList,\n  };\n};\n\nexport const enumerateObjectTypes = (\n  project: gdProject\n): Array<EnumeratedObjectMetadata> => {\n  const platform = project.getCurrentPlatform();\n  const extensionsList = platform.getAllPlatformExtensions();\n\n  return flatten(\n    mapFor(0, extensionsList.size(), i => {\n      const extension = extensionsList.at(i);\n\n      return extension\n        .getExtensionObjectsTypes()\n        .toJSArray()\n        .map(objectType => extension.getObjectMetadata(objectType))\n        .map(objectMetadata => ({\n          extension,\n          objectMetadata,\n          name: objectMetadata.getName(),\n          fullName: objectMetadata.getFullName(),\n          description: objectMetadata.getDescription(),\n          iconFilename: objectMetadata.getIconFilename(),\n        }));\n    })\n  );\n};\n\nexport type ObjectFilteringOptions = {|\n  searchText: string,\n  selectedTags: SelectedTags,\n|};\n\nexport const filterObjectsList = (\n  list: ObjectWithContextList,\n  { searchText, selectedTags }: ObjectFilteringOptions\n): ObjectWithContextList => {\n  if (!searchText && !selectedTags.length) return list;\n\n  const lowercaseSearchText = searchText.toLowerCase();\n\n  return list\n    .filter((objectWithContext: ObjectWithContext) => {\n      if (!selectedTags.length) return true;\n\n      const objectTags = objectWithContext.object.getTags();\n      return hasStringAllTags(objectTags, selectedTags);\n    })\n    .filter((objectWithContext: ObjectWithContext) => {\n      return (\n        objectWithContext.object\n          .getName()\n          .toLowerCase()\n          .indexOf(lowercaseSearchText) !== -1\n      );\n    });\n};\n\nexport const filterGroupsList = (\n  list: GroupWithContextList,\n  searchText: string\n): GroupWithContextList => {\n  if (!searchText) return list;\n\n  const lowercaseSearchText = searchText.toLowerCase();\n\n  return list.filter((groupWithContext: GroupWithContext) => {\n    return (\n      groupWithContext.group\n        .getName()\n        .toLowerCase()\n        .indexOf(lowercaseSearchText) !== -1\n    );\n  });\n};\n\nexport const enumerateGroups = (\n  objectGroups: gdObjectGroupsContainer\n): Array<gdObjectGroup> => {\n  return mapFor(0, objectGroups.count(), i => {\n    return objectGroups.getAt(i);\n  });\n};\n\nexport const enumerateObjectsAndGroups = (\n  globalObjectsContainer: gdObjectsContainer,\n  objectsContainer: gdObjectsContainer,\n  type: ?string = undefined\n) => {\n  const filterObject = (object: gdObject): boolean => {\n    return (\n      !type ||\n      gd.getTypeOfObject(\n        globalObjectsContainer,\n        objectsContainer,\n        object.getName(),\n        false\n      ) === type\n    );\n  };\n  const filterGroup = (group: gdObjectGroup): boolean => {\n    return (\n      !type ||\n      gd.getTypeOfObject(\n        globalObjectsContainer,\n        objectsContainer,\n        group.getName(),\n        true\n      ) === type\n    );\n  };\n\n  const containerObjectsList: ObjectWithContextList = mapFor(\n    0,\n    objectsContainer.getObjectsCount(),\n    i => objectsContainer.getObjectAt(i)\n  )\n    .filter(filterObject)\n    .map(object => ({ object, global: false }));\n\n  const containerGroups = objectsContainer.getObjectGroups();\n  const containerGroupsList: GroupWithContextList = enumerateGroups(\n    containerGroups\n  )\n    .filter(filterGroup)\n    .map(group => ({ group, global: false }));\n\n  const projectObjectsList: ObjectWithContextList =\n    globalObjectsContainer === objectsContainer\n      ? []\n      : mapFor(0, globalObjectsContainer.getObjectsCount(), i =>\n          globalObjectsContainer.getObjectAt(i)\n        )\n          .filter(filterObject)\n          .map(object => ({ object, global: true }));\n\n  const projectGroups = globalObjectsContainer.getObjectGroups();\n  const projectGroupsList: GroupWithContextList =\n    globalObjectsContainer === objectsContainer\n      ? []\n      : enumerateGroups(projectGroups)\n          .filter(filterGroup)\n          .map(group => ({ group, global: true }));\n\n  const allObjectsList: ObjectWithContextList = containerObjectsList.concat(\n    projectObjectsList\n  );\n  const allGroupsList: GroupWithContextList = containerGroupsList.concat(\n    projectGroupsList\n  );\n\n  return {\n    containerObjectsList,\n    projectObjectsList,\n    allObjectsList,\n    containerGroupsList,\n    projectGroupsList,\n    allGroupsList,\n  };\n};\n","// @flow\nimport { Trans } from '@lingui/macro';\n\nimport * as React from 'react';\nimport Checkbox from '../../UI/Checkbox';\nimport { Line, Column } from '../../UI/Grid';\nimport ResourceSelectorWithThumbnail from '../../ResourcesList/ResourceSelectorWithThumbnail';\nimport { type EditorProps } from './EditorProps.flow';\nimport SemiControlledTextField from '../../UI/SemiControlledTextField';\nimport { ResponsiveLineStackLayout } from '../../UI/Layout';\nconst gd = global.gd;\n\nexport default class PanelSpriteEditor extends React.Component<\n  EditorProps,\n  void\n> {\n  render() {\n    const {\n      object,\n      project,\n      resourceSources,\n      onChooseResource,\n      resourceExternalEditors,\n    } = this.props;\n    const panelSpriteObject = gd.asPanelSpriteObject(object);\n\n    return (\n      <Column>\n        <Line>\n          <ResourceSelectorWithThumbnail\n            project={project}\n            resourceSources={resourceSources}\n            onChooseResource={onChooseResource}\n            resourceExternalEditors={resourceExternalEditors}\n            resourceKind=\"image\"\n            resourceName={panelSpriteObject.getTexture()}\n            onChange={resourceName => {\n              panelSpriteObject.setTexture(resourceName);\n              this.forceUpdate();\n            }}\n            floatingLabelText={<Trans>Select an image</Trans>}\n          />\n        </Line>\n        <Line>\n          <Checkbox\n            label={\n              <Trans>\n                Repeat borders and center textures (instead of stretching them)\n              </Trans>\n            }\n            checked={panelSpriteObject.isTiled()}\n            onCheck={(e, checked) => {\n              panelSpriteObject.setTiled(checked);\n              this.forceUpdate();\n            }}\n          />\n        </Line>\n        <ResponsiveLineStackLayout>\n          <SemiControlledTextField\n            commitOnBlur\n            floatingLabelText={<Trans>Top margin</Trans>}\n            fullWidth\n            type=\"number\"\n            value={panelSpriteObject.getTopMargin()}\n            onChange={value => {\n              panelSpriteObject.setTopMargin(parseInt(value, 10) || 0);\n              this.forceUpdate();\n            }}\n          />\n          <SemiControlledTextField\n            commitOnBlur\n            floatingLabelText={<Trans>Bottom margin</Trans>}\n            fullWidth\n            type=\"number\"\n            value={panelSpriteObject.getBottomMargin()}\n            onChange={value => {\n              panelSpriteObject.setBottomMargin(parseInt(value, 10) || 0);\n              this.forceUpdate();\n            }}\n          />\n        </ResponsiveLineStackLayout>\n        <ResponsiveLineStackLayout>\n          <SemiControlledTextField\n            commitOnBlur\n            floatingLabelText={<Trans>Left margin</Trans>}\n            fullWidth\n            type=\"number\"\n            value={panelSpriteObject.getLeftMargin()}\n            onChange={value => {\n              panelSpriteObject.setLeftMargin(parseInt(value, 10) || 0);\n              this.forceUpdate();\n            }}\n          />\n          <SemiControlledTextField\n            commitOnBlur\n            floatingLabelText={<Trans>Right margin</Trans>}\n            fullWidth\n            type=\"number\"\n            value={panelSpriteObject.getRightMargin()}\n            onChange={value => {\n              panelSpriteObject.setRightMargin(parseInt(value, 10) || 0);\n              this.forceUpdate();\n            }}\n          />\n        </ResponsiveLineStackLayout>\n        <ResponsiveLineStackLayout>\n          <SemiControlledTextField\n            commitOnBlur\n            floatingLabelText={<Trans>Default width (in pixels)</Trans>}\n            fullWidth\n            type=\"number\"\n            value={panelSpriteObject.getWidth()}\n            onChange={value => {\n              panelSpriteObject.setWidth(parseInt(value, 10) || 0);\n              this.forceUpdate();\n            }}\n          />\n          <SemiControlledTextField\n            commitOnBlur\n            floatingLabelText={<Trans>Default height (in pixels)</Trans>}\n            fullWidth\n            type=\"number\"\n            value={panelSpriteObject.getHeight()}\n            onChange={value => {\n              panelSpriteObject.setHeight(parseInt(value, 10) || 0);\n              this.forceUpdate();\n            }}\n          />\n        </ResponsiveLineStackLayout>\n      </Column>\n    );\n  }\n}\n","// @flow\nimport { Trans } from '@lingui/macro';\nimport { t } from '@lingui/macro';\n\nimport * as React from 'react';\nimport { SortableContainer, SortableElement } from 'react-sortable-hoc';\nimport SpritesList from './SpritesList';\nimport Add from '@material-ui/icons/Add';\nimport Delete from '@material-ui/icons/Delete';\nimport IconButton from '../../../UI/IconButton';\nimport FlatButton from '../../../UI/FlatButton';\nimport RaisedButton from '../../../UI/RaisedButton';\nimport { mapFor } from '../../../Utils/MapFor';\nimport SemiControlledTextField from '../../../UI/SemiControlledTextField';\nimport Dialog from '../../../UI/Dialog';\nimport HelpButton from '../../../UI/HelpButton';\nimport EmptyMessage from '../../../UI/EmptyMessage';\nimport MiniToolbar, { MiniToolbarText } from '../../../UI/MiniToolbar';\nimport DragHandle from '../../../UI/DragHandle';\nimport ContextMenu from '../../../UI/Menu/ContextMenu';\nimport { showWarningBox } from '../../../UI/Messages/MessageBox';\nimport ResourcesLoader from '../../../ResourcesLoader';\nimport PointsEditor from './PointsEditor';\nimport CollisionMasksEditor from './CollisionMasksEditor';\nimport Window from '../../../Utils/Window';\nimport {\n  deleteSpritesFromAnimation,\n  duplicateSpritesInAnimation,\n} from './Utils/SpriteObjectHelper';\nimport { type EditorProps } from '../EditorProps.flow';\nimport {\n  type ResourceSource,\n  type ChooseResourceFunction,\n} from '../../../ResourcesList/ResourceSource.flow';\nimport { type ResourceExternalEditor } from '../../../ResourcesList/ResourceExternalEditor.flow';\nimport { Column, Line } from '../../../UI/Grid';\nimport { ResponsiveLineStackLayout } from '../../../UI/Layout';\n\nconst gd = global.gd;\n\nconst styles = {\n  gridList: {\n    overflowY: 'auto',\n  },\n  animationTitle: {\n    flex: 1,\n  },\n  animationTools: {\n    flexShrink: 0,\n  },\n};\n\nconst AddAnimationLine = ({ onAdd, extraTools }) => (\n  <Column expand>\n    <Line justifyContent=\"space-between\">\n      {extraTools}\n      <RaisedButton\n        label={<Trans>Add an animation</Trans>}\n        primary\n        onClick={onAdd}\n        icon={<Add />}\n      />\n    </Line>\n  </Column>\n);\n\ntype AnimationProps = {|\n  animation: gdAnimation,\n  id: number,\n  project: gdProject,\n  resourceSources: Array<ResourceSource>,\n  onChooseResource: ChooseResourceFunction,\n  resourceExternalEditors: Array<ResourceExternalEditor>,\n  onRemove: () => void,\n  resourcesLoader: typeof ResourcesLoader,\n  onSpriteContextMenu: (x: number, y: number, sprite: gdSprite) => void,\n  selectedSprites: {\n    [number]: boolean,\n  },\n  onSelectSprite: (sprite: gdSprite, selected: boolean) => void,\n  onReplaceDirection: (\n    directionIndex: number,\n    newDirection: gdDirection\n  ) => void,\n  objectName: string,\n  onChangeName: string => void,\n|};\n\nclass Animation extends React.Component<AnimationProps, void> {\n  render() {\n    const {\n      animation,\n      id,\n      project,\n      resourceSources,\n      onRemove,\n      onChooseResource,\n      resourceExternalEditors,\n      resourcesLoader,\n      onSpriteContextMenu,\n      selectedSprites,\n      onSelectSprite,\n      onReplaceDirection,\n      objectName,\n      onChangeName,\n    } = this.props;\n\n    const animationName = animation.getName();\n    return (\n      <div>\n        <MiniToolbar smallest>\n          <DragHandle />\n          <MiniToolbarText>Animation #{id} </MiniToolbarText>\n          <Column expand margin>\n            <SemiControlledTextField\n              commitOnBlur\n              margin=\"none\"\n              value={animation.getName()}\n              hintText={t`Optional animation name`}\n              onChange={text => onChangeName(text)}\n              fullWidth\n            />\n          </Column>\n          <IconButton onClick={onRemove}>\n            <Delete />\n          </IconButton>\n        </MiniToolbar>\n        {mapFor(0, animation.getDirectionsCount(), i => {\n          const direction = animation.getDirection(i);\n          return (\n            <SpritesList\n              direction={direction}\n              key={i}\n              project={project}\n              resourcesLoader={resourcesLoader}\n              resourceSources={resourceSources}\n              onChooseResource={onChooseResource}\n              resourceExternalEditors={resourceExternalEditors}\n              onSpriteContextMenu={onSpriteContextMenu}\n              selectedSprites={selectedSprites}\n              onSelectSprite={onSelectSprite}\n              onReplaceByDirection={newDirection =>\n                onReplaceDirection(i, newDirection)\n              }\n              objectName={objectName}\n              animationName={animationName}\n              onChangeName={onChangeName}\n            />\n          );\n        })}\n      </div>\n    );\n  }\n}\n\nconst SortableAnimation = SortableElement(Animation);\n\nconst SortableAnimationsList = SortableContainer(\n  ({\n    spriteObject,\n    objectName,\n    onAddAnimation,\n    onRemoveAnimation,\n    onChangeAnimationName,\n    project,\n    resourcesLoader,\n    resourceSources,\n    onChooseResource,\n    resourceExternalEditors,\n    extraBottomTools,\n    onSpriteContextMenu,\n    selectedSprites,\n    onSelectSprite,\n    onReplaceDirection,\n  }) => {\n    return (\n      <div style={styles.gridList}>\n        {[\n          ...mapFor(0, spriteObject.getAnimationsCount(), i => {\n            const animation = spriteObject.getAnimation(i);\n            return (\n              <SortableAnimation\n                key={i}\n                index={i}\n                id={i}\n                animation={animation}\n                project={project}\n                resourcesLoader={resourcesLoader}\n                resourceSources={resourceSources}\n                onChooseResource={onChooseResource}\n                resourceExternalEditors={resourceExternalEditors}\n                onRemove={() => onRemoveAnimation(i)}\n                onChangeName={newName => onChangeAnimationName(i, newName)}\n                onSpriteContextMenu={onSpriteContextMenu}\n                selectedSprites={selectedSprites}\n                onSelectSprite={onSelectSprite}\n                onReplaceDirection={(directionId, newDirection) =>\n                  onReplaceDirection(i, directionId, newDirection)\n                }\n                objectName={objectName}\n              />\n            );\n          }),\n          <AddAnimationLine\n            onAdd={onAddAnimation}\n            key=\"add-animation-line\"\n            disabled\n            index={spriteObject.getAnimationsCount()}\n            extraTools={extraBottomTools}\n          />,\n        ]}\n      </div>\n    );\n  }\n);\n\ntype AnimationsListContainerProps = {|\n  spriteObject: gdSpriteObject,\n  project: gdProject,\n  resourceSources: Array<ResourceSource>,\n  onChooseResource: ChooseResourceFunction,\n  resourceExternalEditors: Array<ResourceExternalEditor>,\n  resourcesLoader: typeof ResourcesLoader,\n  extraBottomTools: React.Node,\n  onSizeUpdated: () => void,\n  objectName: string,\n|};\n\ntype AnimationsListContainerState = {|\n  selectedSprites: {\n    [number]: boolean,\n  },\n|};\n\nclass AnimationsListContainer extends React.Component<\n  AnimationsListContainerProps,\n  AnimationsListContainerState\n> {\n  state = {\n    selectedSprites: {},\n  };\n  spriteContextMenu: ?ContextMenu;\n\n  onSortEnd = ({ oldIndex, newIndex }) => {\n    this.props.spriteObject.moveAnimation(oldIndex, newIndex);\n    this.forceUpdate();\n  };\n\n  addAnimation = () => {\n    const emptyAnimation = new gd.Animation();\n    emptyAnimation.setDirectionsCount(1);\n    this.props.spriteObject.addAnimation(emptyAnimation);\n    this.forceUpdate();\n    this.props.onSizeUpdated();\n  };\n\n  removeAnimation = i => {\n    const answer = Window.showConfirmDialog(\n      'Are you sure you want to remove this animation?'\n    );\n\n    if (answer) {\n      this.props.spriteObject.removeAnimation(i);\n      this.forceUpdate();\n      this.props.onSizeUpdated();\n    }\n  };\n\n  changeAnimationName = (i, newName) => {\n    const { spriteObject } = this.props;\n\n    const otherNames = mapFor(0, spriteObject.getAnimationsCount(), index => {\n      return index === i\n        ? undefined // Don't check the current animation name as we're changing it.\n        : spriteObject.getAnimation(index).getName();\n    });\n\n    if (newName !== '' && otherNames.filter(name => name === newName).length) {\n      showWarningBox(\n        'Another animation with this name already exists. Please use another name.'\n      );\n      return;\n    }\n\n    spriteObject.getAnimation(i).setName(newName);\n    this.forceUpdate();\n  };\n\n  deleteSelection = () => {\n    const { spriteObject } = this.props;\n\n    mapFor(0, spriteObject.getAnimationsCount(), index => {\n      const animation = spriteObject.getAnimation(index);\n      deleteSpritesFromAnimation(animation, this.state.selectedSprites);\n    });\n\n    this.setState({\n      selectedSprites: {},\n    });\n  };\n\n  duplicateSelection = () => {\n    const { spriteObject } = this.props;\n\n    mapFor(0, spriteObject.getAnimationsCount(), index => {\n      const animation = spriteObject.getAnimation(index);\n      duplicateSpritesInAnimation(animation, this.state.selectedSprites);\n    });\n\n    this.setState({\n      selectedSprites: {},\n    });\n  };\n\n  openSpriteContextMenu = (x, y, sprite, index) => {\n    this.selectSprite(sprite, true);\n    if (this.spriteContextMenu) this.spriteContextMenu.open(x, y);\n  };\n\n  selectSprite = (sprite, selected) => {\n    this.setState({\n      selectedSprites: {\n        ...this.state.selectedSprites,\n        [sprite.ptr]: selected,\n      },\n    });\n  };\n\n  replaceDirection = (animationId, directionId, newDirection) => {\n    this.props.spriteObject\n      .getAnimation(animationId)\n      .setDirection(newDirection, directionId);\n    this.forceUpdate();\n  };\n\n  render() {\n    return (\n      <div>\n        {this.props.spriteObject.getAnimationsCount() === 0 && (\n          <EmptyMessage>\n            <Trans>\n              This object has no animations containing images. Start by adding\n              an animation.\n            </Trans>\n          </EmptyMessage>\n        )}\n        <SortableAnimationsList\n          spriteObject={this.props.spriteObject}\n          objectName={this.props.objectName}\n          helperClass=\"sortable-helper\"\n          project={this.props.project}\n          onSortEnd={this.onSortEnd}\n          onAddAnimation={this.addAnimation}\n          onChangeAnimationName={this.changeAnimationName}\n          onRemoveAnimation={this.removeAnimation}\n          onReplaceDirection={this.replaceDirection}\n          onSpriteContextMenu={this.openSpriteContextMenu}\n          selectedSprites={this.state.selectedSprites}\n          onSelectSprite={this.selectSprite}\n          resourcesLoader={this.props.resourcesLoader}\n          resourceSources={this.props.resourceSources}\n          resourceExternalEditors={this.props.resourceExternalEditors}\n          onChooseResource={this.props.onChooseResource}\n          extraBottomTools={this.props.extraBottomTools}\n          useDragHandle\n          lockAxis=\"y\"\n          axis=\"y\"\n        />\n        <ContextMenu\n          ref={spriteContextMenu =>\n            (this.spriteContextMenu = spriteContextMenu)\n          }\n          buildMenuTemplate={() => [\n            {\n              label: 'Delete selection',\n              click: () => this.deleteSelection(),\n            },\n            {\n              label: 'Duplicate selection',\n              click: () => this.duplicateSelection(),\n            },\n          ]}\n        />\n      </div>\n    );\n  }\n}\n\ntype State = {|\n  pointsEditorOpen: boolean,\n  collisionMasksEditorOpen: boolean,\n|};\n\nexport default class SpriteEditor extends React.Component<EditorProps, State> {\n  state = {\n    pointsEditorOpen: false,\n    collisionMasksEditorOpen: false,\n  };\n\n  resourcesLoader: typeof ResourcesLoader;\n\n  constructor(props: EditorProps) {\n    super(props);\n\n    this.resourcesLoader = ResourcesLoader;\n  }\n\n  openPointsEditor = (open: boolean = true) => {\n    this.setState({\n      pointsEditorOpen: open,\n    });\n  };\n\n  openCollisionMasksEditor = (open: boolean = true) => {\n    this.setState({\n      collisionMasksEditorOpen: open,\n    });\n  };\n\n  render() {\n    const {\n      object,\n      project,\n      resourceSources,\n      onChooseResource,\n      resourceExternalEditors,\n      onSizeUpdated,\n      objectName,\n    } = this.props;\n    const spriteObject = gd.asSpriteObject(object);\n\n    return (\n      <div>\n        <AnimationsListContainer\n          spriteObject={spriteObject}\n          resourcesLoader={this.resourcesLoader}\n          resourceSources={resourceSources}\n          onChooseResource={onChooseResource}\n          resourceExternalEditors={resourceExternalEditors}\n          project={project}\n          objectName={objectName}\n          onSizeUpdated={onSizeUpdated}\n          extraBottomTools={\n            <ResponsiveLineStackLayout noMargin>\n              <RaisedButton\n                label={<Trans>Edit hitboxes</Trans>}\n                primary={false}\n                onClick={() => this.openCollisionMasksEditor(true)}\n                disabled={spriteObject.getAnimationsCount() === 0}\n              />\n              <RaisedButton\n                label={<Trans>Edit points</Trans>}\n                primary={false}\n                onClick={() => this.openPointsEditor(true)}\n                disabled={spriteObject.getAnimationsCount() === 0}\n              />\n            </ResponsiveLineStackLayout>\n          }\n        />\n        {this.state.pointsEditorOpen && (\n          <Dialog\n            actions={\n              <FlatButton\n                label={<Trans>Close</Trans>}\n                primary\n                onClick={() => this.openPointsEditor(false)}\n              />\n            }\n            secondaryActions={[\n              <HelpButton\n                helpPagePath=\"/objects/sprite/edit-points\"\n                key=\"help\"\n              />,\n            ]}\n            cannotBeDismissed={true}\n            noMargin\n            onRequestClose={() => this.openPointsEditor(false)}\n            open={this.state.pointsEditorOpen}\n          >\n            <PointsEditor\n              object={spriteObject}\n              resourcesLoader={this.resourcesLoader}\n              project={project}\n              onPointsUpdated={\n                () =>\n                  this.forceUpdate() /*Force update to ensure dialog is properly positioned*/\n              }\n            />\n          </Dialog>\n        )}\n        {this.state.collisionMasksEditorOpen && (\n          <Dialog\n            actions={\n              <FlatButton\n                label={<Trans>Close</Trans>}\n                primary\n                onClick={() => this.openCollisionMasksEditor(false)}\n              />\n            }\n            secondaryActions={[\n              <HelpButton\n                helpPagePath=\"/objects/sprite/collision-mask\"\n                key=\"help\"\n              />,\n            ]}\n            noMargin\n            cannotBeDismissed={true}\n            onRequestClose={() => this.openCollisionMasksEditor(false)}\n            open={this.state.collisionMasksEditorOpen}\n          >\n            <CollisionMasksEditor\n              object={spriteObject}\n              resourcesLoader={this.resourcesLoader}\n              project={project}\n              onCollisionMasksUpdated={\n                () =>\n                  this.forceUpdate() /*Force update to ensure dialog is properly positioned*/\n              }\n            />\n          </Dialog>\n        )}\n      </div>\n    );\n  }\n}\n","// @flow\r\nimport { Trans } from '@lingui/macro';\r\n\r\nimport React, { Component } from 'react';\r\nimport { SortableContainer, SortableElement } from 'react-sortable-hoc';\r\nimport { mapFor } from '../../../Utils/MapFor';\r\nimport Add from '@material-ui/icons/Add';\r\nimport DirectionTools from './DirectionTools';\r\nimport MiniToolbar from '../../../UI/MiniToolbar';\r\nimport ImageThumbnail, {\r\n  thumbnailContainerStyle,\r\n} from '../../../ResourcesList/ResourceThumbnail/ImageThumbnail';\r\nimport {\r\n  copySpritePoints,\r\n  copySpritePolygons,\r\n  allDirectionSpritesHaveSamePointsAs,\r\n  allDirectionSpritesHaveSameCollisionMasksAs,\r\n} from './Utils/SpriteObjectHelper';\r\nimport ResourcesLoader from '../../../ResourcesLoader';\r\nimport {\r\n  type ResourceSource,\r\n  type ChooseResourceFunction,\r\n} from '../../../ResourcesList/ResourceSource.flow';\r\nimport { type ResourceExternalEditor } from '../../../ResourcesList/ResourceExternalEditor.flow';\r\nimport { applyResourceDefaults } from '../../../ResourcesList/ResourceUtils';\r\nimport FlatButton from '../../../UI/FlatButton';\r\nimport ThemeConsumer from '../../../UI/Theme/ThemeConsumer';\r\nconst gd = global.gd;\r\nconst path = require('path');\r\n\r\nconst SPRITE_SIZE = 100; //TODO: Factor with Thumbnail\r\n\r\nconst styles = {\r\n  spritesList: {\r\n    whiteSpace: 'nowrap',\r\n    overflowY: 'hidden',\r\n  },\r\n  thumbnailExtraStyle: {\r\n    marginRight: 10,\r\n  },\r\n  spriteThumbnailImage: {\r\n    maxWidth: SPRITE_SIZE,\r\n    maxHeight: SPRITE_SIZE,\r\n    verticalAlign: 'middle',\r\n  },\r\n};\r\n\r\nconst AddSpriteButton = SortableElement(({ displayHint, onAdd }) => {\r\n  return (\r\n    <ThemeConsumer>\r\n      {muiTheme => (\r\n        <div\r\n          style={{\r\n            ...thumbnailContainerStyle,\r\n            backgroundColor: muiTheme.list.itemsBackgroundColor,\r\n          }}\r\n        >\r\n          <FlatButton\r\n            onClick={onAdd}\r\n            label={<Trans>Add</Trans>}\r\n            icon={<Add />}\r\n          />\r\n        </div>\r\n      )}\r\n    </ThemeConsumer>\r\n  );\r\n});\r\n\r\nconst SortableSpriteThumbnail = SortableElement(\r\n  ({ sprite, project, resourcesLoader, selected, onSelect, onContextMenu }) => {\r\n    return (\r\n      <ImageThumbnail\r\n        selectable\r\n        selected={selected}\r\n        onSelect={onSelect}\r\n        onContextMenu={onContextMenu}\r\n        resourceName={sprite.getImageName()}\r\n        resourcesLoader={resourcesLoader}\r\n        project={project}\r\n        style={styles.thumbnailExtraStyle}\r\n      />\r\n    );\r\n  }\r\n);\r\n\r\nconst SortableList = SortableContainer(\r\n  ({\r\n    direction,\r\n    project,\r\n    resourcesLoader,\r\n    onAddSprite,\r\n    selectedSprites,\r\n    onSelectSprite,\r\n    onSpriteContextMenu,\r\n  }) => {\r\n    const spritesCount = direction.getSpritesCount();\r\n    return (\r\n      <div style={styles.spritesList}>\r\n        {[\r\n          ...mapFor(0, spritesCount, i => {\r\n            const sprite = direction.getSprite(i);\r\n            return (\r\n              <SortableSpriteThumbnail\r\n                sprite={sprite}\r\n                key={sprite.ptr}\r\n                index={i}\r\n                selected={!!selectedSprites[sprite.ptr]}\r\n                onContextMenu={(x, y) => onSpriteContextMenu(x, y, sprite)}\r\n                onSelect={selected => onSelectSprite(sprite, selected)}\r\n                resourcesLoader={resourcesLoader}\r\n                project={project}\r\n              />\r\n            );\r\n          }),\r\n          <AddSpriteButton\r\n            displayHint={!direction.getSpritesCount()}\r\n            key=\"add-sprite-button\"\r\n            disabled\r\n            index={spritesCount}\r\n            onAdd={onAddSprite}\r\n          />,\r\n        ]}\r\n      </div>\r\n    );\r\n  }\r\n);\r\n\r\n/**\r\n * Check if all sprites of the given direction have the same points and collision masks\r\n */\r\nconst checkDirectionPointsAndCollisionsMasks = (direction: gdDirection) => {\r\n  let allDirectionSpritesHaveSamePoints = false;\r\n  let allDirectionSpritesHaveSameCollisionMasks = false;\r\n  if (direction.getSpritesCount() !== 0) {\r\n    allDirectionSpritesHaveSamePoints = allDirectionSpritesHaveSamePointsAs(\r\n      direction.getSprite(0),\r\n      direction\r\n    );\r\n    allDirectionSpritesHaveSameCollisionMasks = allDirectionSpritesHaveSameCollisionMasksAs(\r\n      direction.getSprite(0),\r\n      direction\r\n    );\r\n  }\r\n\r\n  return {\r\n    allDirectionSpritesHaveSamePoints,\r\n    allDirectionSpritesHaveSameCollisionMasks,\r\n  };\r\n};\r\n\r\ntype Props = {|\r\n  direction: gdDirection,\r\n  project: gdProject,\r\n  resourcesLoader: typeof ResourcesLoader,\r\n  resourceSources: Array<ResourceSource>,\r\n  resourceExternalEditors: Array<ResourceExternalEditor>,\r\n  onChooseResource: ChooseResourceFunction,\r\n  onSpriteContextMenu: (x: number, y: number, sprite: gdSprite) => void,\r\n  selectedSprites: {\r\n    [number]: boolean,\r\n  },\r\n  onSelectSprite: (sprite: gdSprite, selected: boolean) => void,\r\n  onReplaceByDirection: (newDirection: gdDirection) => void,\r\n  onChangeName: (newAnimationName: string) => void, // Used by piskel to set the name, if there is no name\r\n  objectName: string, // This is used for the default name of images created with Piskel.\r\n  animationName: string, // This is used for the default name of images created with Piskel.\r\n|};\r\n\r\nexport default class SpritesList extends Component<Props, void> {\r\n  onSortEnd = ({\r\n    oldIndex,\r\n    newIndex,\r\n  }: {\r\n    oldIndex: number,\r\n    newIndex: number,\r\n  }) => {\r\n    this.props.direction.moveSprite(oldIndex, newIndex);\r\n    this.forceUpdate();\r\n  };\r\n\r\n  onAddSprite = () => {\r\n    const {\r\n      resourceSources,\r\n      onChooseResource,\r\n      project,\r\n      direction,\r\n    } = this.props;\r\n    if (!resourceSources) return;\r\n    const sources = resourceSources.filter(source => source.kind === 'image');\r\n    if (!sources.length) return;\r\n\r\n    const {\r\n      allDirectionSpritesHaveSameCollisionMasks,\r\n      allDirectionSpritesHaveSamePoints,\r\n    } = checkDirectionPointsAndCollisionsMasks(direction);\r\n\r\n    onChooseResource(sources[0].name).then(resources => {\r\n      resources.forEach(resource => {\r\n        applyResourceDefaults(project, resource);\r\n        project.getResourcesManager().addResource(resource);\r\n\r\n        const sprite = new gd.Sprite();\r\n        sprite.setImageName(resource.getName());\r\n        if (allDirectionSpritesHaveSamePoints) {\r\n          copySpritePoints(direction.getSprite(0), sprite);\r\n        }\r\n        if (allDirectionSpritesHaveSameCollisionMasks) {\r\n          copySpritePolygons(direction.getSprite(0), sprite);\r\n        }\r\n        direction.addSprite(sprite);\r\n      });\r\n\r\n      // Important, we are responsible for deleting the resources that were given to us.\r\n      // Otherwise we have a memory leak, as calling addResource is making a copy of the resource.\r\n      resources.forEach(resource => resource.delete());\r\n\r\n      this.forceUpdate();\r\n    });\r\n  };\r\n\r\n  editWith = (externalEditor: ResourceExternalEditor) => {\r\n    const {\r\n      project,\r\n      direction,\r\n      resourcesLoader,\r\n      onReplaceByDirection,\r\n      onChangeName,\r\n      objectName,\r\n      animationName,\r\n    } = this.props;\r\n    const resourceNames = mapFor(0, direction.getSpritesCount(), i => {\r\n      return direction.getSprite(i).getImageName();\r\n    });\r\n\r\n    const {\r\n      allDirectionSpritesHaveSameCollisionMasks,\r\n      allDirectionSpritesHaveSamePoints,\r\n    } = checkDirectionPointsAndCollisionsMasks(direction);\r\n\r\n    let externalEditorData = {};\r\n    const metadataRaw = direction.getMetadata();\r\n    if (metadataRaw) {\r\n      try {\r\n        externalEditorData = JSON.parse(metadataRaw);\r\n      } catch (e) {\r\n        console.error('Malformed metadata', e);\r\n      }\r\n    }\r\n\r\n    externalEditor.edit({\r\n      project,\r\n      resourcesLoader,\r\n      singleFrame: false,\r\n      resourceNames,\r\n      extraOptions: {\r\n        fps:\r\n          direction.getTimeBetweenFrames() > 0\r\n            ? 1 / direction.getTimeBetweenFrames()\r\n            : 1,\r\n        name:\r\n          animationName ||\r\n          (resourceNames.length > 0\r\n            ? path.basename(resourceNames[0], path.extname(resourceNames[0]))\r\n            : objectName),\r\n        isLooping: direction.isLooping(),\r\n        externalEditorData,\r\n      },\r\n      onChangesSaved: resources => {\r\n        const newDirection = new gd.Direction();\r\n        newDirection.setTimeBetweenFrames(direction.getTimeBetweenFrames());\r\n        newDirection.setLoop(direction.isLooping());\r\n        resources.forEach(resource => {\r\n          const sprite = new gd.Sprite();\r\n          sprite.setImageName(resource.name);\r\n          // Restore collision masks and points\r\n          if (resource.originalIndex !== undefined) {\r\n            const originalSprite = direction.getSprite(resource.originalIndex);\r\n            copySpritePoints(originalSprite, sprite);\r\n            copySpritePolygons(originalSprite, sprite);\r\n          } else {\r\n            if (allDirectionSpritesHaveSamePoints) {\r\n              copySpritePoints(direction.getSprite(0), sprite);\r\n            }\r\n            if (allDirectionSpritesHaveSameCollisionMasks) {\r\n              copySpritePolygons(direction.getSprite(0), sprite);\r\n            }\r\n          }\r\n          newDirection.addSprite(sprite);\r\n          sprite.delete();\r\n        });\r\n\r\n        // set metadata if there is such on the direction\r\n        if (resources[0].metadata) {\r\n          newDirection.setMetadata(JSON.stringify(resources[0].metadata));\r\n        }\r\n\r\n        // Burst the ResourcesLoader cache to force images to be reloaded (and not cached by the browser).\r\n        resourcesLoader.burstUrlsCacheForResources(project, resourceNames);\r\n        onReplaceByDirection(newDirection);\r\n        // Set optional animation name if the user hasn't done so\r\n        if (resources[0].newAnimationName) {\r\n          onChangeName(resources[0].newAnimationName);\r\n        }\r\n        newDirection.delete();\r\n      },\r\n    });\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <MiniToolbar justifyContent=\"flex-end\" smallest>\r\n          <DirectionTools\r\n            direction={this.props.direction}\r\n            resourcesLoader={this.props.resourcesLoader}\r\n            project={this.props.project}\r\n            resourceExternalEditors={this.props.resourceExternalEditors}\r\n            onEditWith={this.editWith}\r\n          />\r\n        </MiniToolbar>\r\n        <SortableList\r\n          resourcesLoader={this.props.resourcesLoader}\r\n          direction={this.props.direction}\r\n          project={this.props.project}\r\n          onSortEnd={this.onSortEnd}\r\n          onAddSprite={this.onAddSprite}\r\n          selectedSprites={this.props.selectedSprites}\r\n          onSelectSprite={this.props.onSelectSprite}\r\n          onSpriteContextMenu={this.props.onSpriteContextMenu}\r\n          helperClass=\"sortable-helper\"\r\n          lockAxis=\"x\"\r\n          axis=\"x\"\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import { Trans } from '@lingui/macro';\nimport React, { Component } from 'react';\nimport EmptyMessage from '../../../../UI/EmptyMessage';\nimport { Line, Column } from '../../../../UI/Grid';\nimport { mapFor } from '../../../../Utils/MapFor';\nimport PointsList from './PointsList';\nimport PointsPreview from './PointsPreview';\nimport ImagePreview from '../../../../ResourcesList/ResourcePreview/ImagePreview';\nimport {\n  getCurrentElements,\n  allSpritesHaveSamePointsAs,\n  copyAnimationsSpritePoints,\n} from '../Utils/SpriteObjectHelper';\nimport SpriteSelector from '../Utils/SpriteSelector';\nimport Window from '../../../../Utils/Window';\nimport every from 'lodash/every';\nconst gd = global.gd;\n\nexport default class PointsEditor extends Component {\n  state = {\n    animationIndex: 0,\n    directionIndex: 0,\n    spriteIndex: 0,\n    samePointsForAnimations: true,\n    samePointsForSprites: true,\n  };\n\n  componentDidMount() {\n    this._updateSamePointsToggles();\n  }\n\n  _updatePoints = () => {\n    const { object } = this.props;\n    const { animationIndex, directionIndex, spriteIndex } = this.state;\n    const spriteObject = gd.asSpriteObject(object);\n\n    const { animation, sprite } = getCurrentElements(\n      spriteObject,\n      animationIndex,\n      directionIndex,\n      spriteIndex\n    );\n\n    if (animation && sprite) {\n      if (this.state.samePointsForAnimations) {\n        mapFor(0, spriteObject.getAnimationsCount(), i => {\n          const otherAnimation = spriteObject.getAnimation(i);\n          copyAnimationsSpritePoints(sprite, otherAnimation);\n        });\n      } else if (this.state.samePointsForSprites) {\n        copyAnimationsSpritePoints(sprite, animation);\n      }\n    }\n\n    this.forceUpdate(); // Refresh the preview\n    if (this.props.onPointsUpdated) this.props.onPointsUpdated();\n  };\n\n  chooseAnimation = index => {\n    this.setState(\n      {\n        animationIndex: index,\n        directionIndex: 0,\n        spriteIndex: 0,\n      },\n      () => this._updateSamePointsToggles()\n    );\n  };\n\n  chooseDirection = index => {\n    this.setState({\n      directionIndex: index,\n      spriteIndex: 0,\n    });\n  };\n\n  chooseSprite = index => {\n    this.setState({\n      spriteIndex: index,\n    });\n  };\n\n  _updateSamePointsToggles = () => {\n    const { object } = this.props;\n    const { animationIndex, directionIndex, spriteIndex } = this.state;\n    const spriteObject = gd.asSpriteObject(object);\n\n    const { animation, sprite } = getCurrentElements(\n      spriteObject,\n      animationIndex,\n      directionIndex,\n      spriteIndex\n    );\n    if (!animation || !sprite) return;\n\n    this.setState({\n      samePointsForAnimations: every(\n        mapFor(0, spriteObject.getAnimationsCount(), i => {\n          const otherAnimation = spriteObject.getAnimation(i);\n          return allSpritesHaveSamePointsAs(sprite, otherAnimation);\n        })\n      ),\n      samePointsForSprites: allSpritesHaveSamePointsAs(sprite, animation),\n    });\n  };\n\n  _setSamePointsForAllAnimations = enable => {\n    if (enable) {\n      const answer = Window.showConfirmDialog(\n        \"Having the same points for all animations will erase and reset all the other animations points. This can't be undone. Are you sure you want to share these points amongst all the animations of the object?\"\n      );\n      if (!answer) return;\n    }\n\n    this.setState(\n      {\n        samePointsForAnimations: enable,\n        samePointsForSprites: enable ? true : this.state.samePointsForSprites,\n      },\n      () => {\n        this._updatePoints();\n      }\n    );\n  };\n\n  _setSamePointsForAllSprites = enable => {\n    if (enable) {\n      const answer = Window.showConfirmDialog(\n        \"Having the same points for all frames will erase and reset all the other frames points. This can't be undone. Are you sure you want to share these points amongst all the frames of the animation?\"\n      );\n      if (!answer) return;\n    }\n\n    this.setState(\n      {\n        samePointsForAnimations: enable\n          ? this.state.samePointsForAnimations\n          : false,\n        samePointsForSprites: enable,\n      },\n      () => {\n        this._updatePoints();\n      }\n    );\n  };\n\n  render() {\n    const { object, resourcesLoader, project } = this.props;\n    const {\n      samePointsForAnimations,\n      samePointsForSprites,\n      animationIndex,\n      directionIndex,\n      spriteIndex,\n    } = this.state;\n    const spriteObject = gd.asSpriteObject(object);\n\n    if (!object.getAnimationsCount()) return null;\n    const { hasValidSprite, sprite } = getCurrentElements(\n      spriteObject,\n      animationIndex,\n      directionIndex,\n      spriteIndex\n    );\n\n    return (\n      <div>\n        <ImagePreview\n          resourceName={hasValidSprite ? sprite.getImageName() : ''}\n          resourcesLoader={resourcesLoader}\n          project={project}\n          renderOverlay={({ imageWidth, imageHeight, imageZoomFactor }) =>\n            hasValidSprite && (\n              <PointsPreview\n                imageWidth={imageWidth}\n                imageHeight={imageHeight}\n                imageZoomFactor={imageZoomFactor}\n                pointsContainer={sprite}\n                onPointsUpdated={this._updatePoints}\n              />\n            )\n          }\n        />\n        <Line>\n          <Column expand>\n            <SpriteSelector\n              spriteObject={spriteObject}\n              animationIndex={animationIndex}\n              directionIndex={directionIndex}\n              spriteIndex={spriteIndex}\n              chooseAnimation={this.chooseAnimation}\n              chooseDirection={this.chooseDirection}\n              chooseSprite={this.chooseSprite}\n              sameForAllAnimations={samePointsForAnimations}\n              sameForAllSprites={samePointsForSprites}\n              setSameForAllAnimations={this._setSamePointsForAllAnimations}\n              setSameForAllSprites={this._setSamePointsForAllSprites}\n              setSameForAllAnimationsLabel={\n                <Trans>Share same points for all animations</Trans>\n              }\n              setSameForAllSpritesLabel={\n                <Trans>\n                  Share same points for all sprites of this animation\n                </Trans>\n              }\n            />\n          </Column>\n        </Line>\n        {!!sprite && (\n          <PointsList\n            pointsContainer={sprite}\n            onPointsUpdated={this._updatePoints}\n          />\n        )}\n        {!sprite && (\n          <EmptyMessage>\n            <Trans>Choose an animation and frame to edit the points</Trans>\n          </EmptyMessage>\n        )}\n      </div>\n    );\n  }\n}\n","/**\n * RenderedInstance is the base class used for creating renderers of instances,\n * which display on the scene editor, using Pixi.js, the instance of an object (see InstancesEditor).\n *\n * @class RenderedInstance\n * @constructor\n */\nfunction RenderedInstance(\n  project,\n  layout,\n  instance,\n  associatedObject,\n  pixiContainer,\n  pixiResourcesLoader\n) {\n  this._pixiObject = null;\n  this._instance = instance;\n  this._associatedObject = associatedObject;\n  this._pixiContainer = pixiContainer;\n  this._project = project;\n  this._layout = layout;\n  this._pixiResourcesLoader = pixiResourcesLoader;\n  this.wasUsed = true; //Used by InstancesRenderer to track rendered instance that are not used anymore.\n}\n\n/**\n * Convert an angle from degrees to radians.\n */\nRenderedInstance.toRad = function(angleInDegrees) {\n  return (angleInDegrees / 180) * 3.14159;\n};\n\n/**\n * Called when the scene editor is rendered.\n */\nRenderedInstance.prototype.update = function() {\n  //Nothing to do.\n};\n\nRenderedInstance.prototype.getPixiObject = function() {\n  return this._pixiObject;\n};\n\nRenderedInstance.prototype.getInstance = function() {\n  return this._instance;\n};\n\n/**\n * Called to notify the instance renderer that its associated instance was removed from\n * the scene. The PIXI object should probably be removed from the container: This is what\n * the default implementation of the method does.\n */\nRenderedInstance.prototype.instanceRemovedFromScene = function() {\n  if (\n    this._pixiObject !== null &&\n    this._pixiContainer.children.indexOf(this._pixiObject) !== -1\n  )\n    this._pixiContainer.removeChild(this._pixiObject);\n};\n\nRenderedInstance.prototype.getOriginX = function() {\n  return 0;\n};\n\nRenderedInstance.prototype.getOriginY = function() {\n  return 0;\n};\n\n/**\n * Return the width of the instance when the instance doesn't have a custom size.\n */\nRenderedInstance.prototype.getDefaultWidth = function() {\n  return 32;\n};\n\n/**\n * Return the height of the instance when the instance doesn't have a custom size.\n */\nRenderedInstance.prototype.getDefaultHeight = function() {\n  return 32;\n};\n\nexport default RenderedInstance;\n","import React, { Component } from 'react';\nimport {\n  Table,\n  TableBody,\n  TableHeader,\n  TableHeaderColumn,\n  TableRow,\n  TableRowColumn,\n} from '../../../../UI/Table';\nimport { SortableContainer, SortableElement } from 'react-sortable-hoc';\nimport newNameGenerator from '../../../../Utils/NewNameGenerator';\nimport { mapVector } from '../../../../Utils/MapFor';\nimport Window from '../../../../Utils/Window';\nimport styles from './styles';\nimport PointRow from './PointRow';\nimport AddPointRow from './AddPointRow';\nconst gd = global.gd;\n\nconst SortableAddPointRow = SortableElement(AddPointRow);\nconst SortablePointRow = SortableElement(PointRow);\n\nclass PointsListBody extends Component {\n  state = {\n    nameErrors: {},\n  };\n\n  _onPointsUpdated() {\n    this.forceUpdate();\n    this.props.onPointsUpdated();\n  }\n\n  updateOriginPointX = newValue => {\n    this.props.pointsContainer.getOrigin().setX(newValue);\n    this._onPointsUpdated();\n  };\n\n  updateOriginPointY = newValue => {\n    this.props.pointsContainer.getOrigin().setY(newValue);\n    this._onPointsUpdated();\n  };\n\n  updateCenterPointX = newValue => {\n    this.props.pointsContainer.getCenter().setX(newValue);\n    this._onPointsUpdated();\n  };\n\n  updateCenterPointY = newValue => {\n    this.props.pointsContainer.getCenter().setY(newValue);\n    this._onPointsUpdated();\n  };\n\n  updatePointX = (point, newValue) => {\n    point.setX(newValue);\n    this._onPointsUpdated();\n  };\n\n  updatePointY = (point, newValue) => {\n    point.setY(newValue);\n    this._onPointsUpdated();\n  };\n\n  render() {\n    const { pointsContainer } = this.props;\n\n    const nonDefaultPoints = pointsContainer.getAllNonDefaultPoints();\n    const pointsRows = mapVector(nonDefaultPoints, (point, i) => {\n      const pointName = point.getName();\n\n      return (\n        <SortablePointRow\n          index={i}\n          disabled\n          key={'point-' + pointName}\n          pointX={point.getX()}\n          pointY={point.getY()}\n          onChangePointX={newValue => this.updatePointX(point, newValue)}\n          onChangePointY={newValue => this.updatePointY(point, newValue)}\n          pointName={pointName}\n          nameError={this.state.nameErrors[pointName]}\n          onBlur={event => {\n            const newName = event.target.value;\n            if (pointName === newName) return;\n\n            let success = true;\n            if (pointsContainer.hasPoint(newName)) {\n              success = false;\n            } else {\n              point.setName(newName);\n            }\n\n            this.setState({\n              nameErrors: {\n                ...this.state.nameErrors,\n                [pointName]: !success,\n              },\n            });\n          }}\n          onRemove={() => {\n            const answer = Window.showConfirmDialog(\n              \"Are you sure you want to remove this point? This can't be undone.\"\n            );\n            if (!answer) return;\n\n            pointsContainer.delPoint(pointName);\n            this._onPointsUpdated();\n          }}\n        />\n      );\n    });\n\n    const originPoint = pointsContainer.getOrigin();\n    const centerPoint = pointsContainer.getCenter();\n\n    const originRow = (\n      <SortablePointRow\n        index={0}\n        key={'origin-point-row'}\n        pointName=\"Origin\"\n        pointX={originPoint.getX()}\n        pointY={originPoint.getY()}\n        onChangePointX={this.updateOriginPointX}\n        onChangePointY={this.updateOriginPointY}\n        disabled\n      />\n    );\n    const centerRow = (\n      <SortablePointRow\n        index={1}\n        key={'center-point-row'}\n        pointName=\"Center\"\n        isAutomatic={pointsContainer.isDefaultCenterPoint()}\n        pointX={centerPoint.getX()}\n        pointY={centerPoint.getY()}\n        onChangePointX={this.updateCenterPointX}\n        onChangePointY={this.updateCenterPointY}\n        disabled\n        onEdit={\n          pointsContainer.isDefaultCenterPoint()\n            ? () => {\n                pointsContainer.setDefaultCenterPoint(false);\n                this._onPointsUpdated();\n              }\n            : null\n        }\n        onRemove={\n          !pointsContainer.isDefaultCenterPoint()\n            ? () => {\n                pointsContainer.setDefaultCenterPoint(true);\n                this._onPointsUpdated();\n              }\n            : null\n        }\n      />\n    );\n\n    const addRow = (\n      <SortableAddPointRow\n        index={0}\n        key={'add-point-row'}\n        disabled\n        onAdd={() => {\n          const name = newNameGenerator('Point', name =>\n            pointsContainer.hasPoint(name)\n          );\n          const point = new gd.Point(name);\n          pointsContainer.addPoint(point);\n          point.delete();\n          this._onPointsUpdated();\n        }}\n      />\n    );\n\n    return (\n      <TableBody>{[originRow, centerRow, ...pointsRows, addRow]}</TableBody>\n    );\n  }\n}\n\nconst SortablePointsListBody = SortableContainer(PointsListBody);\nSortablePointsListBody.muiName = 'TableBody';\n\nexport default class PointsList extends Component {\n  render() {\n    return (\n      <Table>\n        <TableHeader>\n          <TableRow>\n            <TableHeaderColumn style={styles.handleColumn} />\n            <TableHeaderColumn>Point name</TableHeaderColumn>\n            <TableHeaderColumn style={styles.coordinateColumn}>\n              X\n            </TableHeaderColumn>\n            <TableHeaderColumn style={styles.coordinateColumn}>\n              Y\n            </TableHeaderColumn>\n            <TableRowColumn style={styles.toolColumn} />\n          </TableRow>\n        </TableHeader>\n        <SortablePointsListBody\n          pointsContainer={this.props.pointsContainer}\n          onPointsUpdated={this.props.onPointsUpdated}\n          onSortEnd={({ oldIndex, newIndex }) => {\n            // Reordering points is not supported for now\n          }}\n          helperClass=\"sortable-helper\"\n          useDragHandle\n          lockToContainerEdges\n        />\n      </Table>\n    );\n  }\n}\n","import { Trans } from '@lingui/macro';\nimport React from 'react';\nimport { TableRow, TableRowColumn } from '../../../../UI/Table';\nimport IconButton from '../../../../UI/IconButton';\nimport Delete from '@material-ui/icons/Delete';\nimport Edit from '@material-ui/icons/Edit';\nimport TextField from '../../../../UI/TextField';\nimport styles from './styles';\nimport ThemeConsumer from '../../../../UI/Theme/ThemeConsumer';\nimport Text from '../../../../UI/Text';\n\nconst PointRow = ({\n  pointName,\n  nameError,\n  onBlur,\n  onRemove,\n  pointX,\n  pointY,\n  onChangePointX,\n  onChangePointY,\n  onEdit,\n  isAutomatic,\n}) => (\n  <ThemeConsumer>\n    {muiTheme => (\n      <TableRow\n        style={{\n          backgroundColor: muiTheme.list.itemsBackgroundColor,\n        }}\n      >\n        <TableRowColumn style={styles.handleColumn}>\n          {/* <DragHandle /> Reordering point is not supported for now */}\n        </TableRowColumn>\n        <TableRowColumn>\n          <TextField\n            margin=\"none\"\n            defaultValue={pointName || 'Base layer'}\n            id={pointName}\n            fullWidth\n            errorText={nameError ? 'This name is already taken' : undefined}\n            disabled={!onBlur}\n            onBlur={onBlur}\n          />\n        </TableRowColumn>\n        <TableRowColumn style={styles.coordinateColumn}>\n          {!isAutomatic ? (\n            <TextField\n              margin=\"none\"\n              value={pointX}\n              type=\"number\"\n              id=\"point-x\"\n              onChange={(e, value) =>\n                onChangePointX(parseFloat(value || 0, 10))\n              }\n            />\n          ) : (\n            <Text>\n              <Trans>(auto)</Trans>\n            </Text>\n          )}\n        </TableRowColumn>\n        <TableRowColumn style={styles.coordinateColumn}>\n          {!isAutomatic ? (\n            <TextField\n              margin=\"none\"\n              value={pointY}\n              type=\"number\"\n              id=\"point-y\"\n              onChange={(e, value) =>\n                onChangePointY(parseFloat(value || 0, 10))\n              }\n            />\n          ) : (\n            <Text>\n              <Trans>(auto)</Trans>\n            </Text>\n          )}\n        </TableRowColumn>\n        <TableRowColumn style={styles.toolColumn}>\n          {!!onRemove && (\n            <IconButton onClick={onRemove}>\n              <Delete />\n            </IconButton>\n          )}\n          {!!onEdit && (\n            <IconButton onClick={onEdit}>\n              <Edit />\n            </IconButton>\n          )}\n        </TableRowColumn>\n      </TableRow>\n    )}\n  </ThemeConsumer>\n);\n\nexport default PointRow;\n","import React from 'react';\nimport { TableRow, TableRowColumn } from '../../../../UI/Table';\nimport Add from '@material-ui/icons/Add';\nimport IconButton from '../../../../UI/IconButton';\nimport styles from './styles';\n\nconst AddPointRow = ({ onAdd }) => (\n  <TableRow>\n    <TableRowColumn style={styles.handleColumn} />\n    <TableRowColumn />\n    <TableRowColumn style={styles.coordinateColumn} />\n    <TableRowColumn style={styles.coordinateColumn} />\n    <TableRowColumn style={styles.toolColumn}>\n      <IconButton onClick={onAdd}>\n        <Add />\n      </IconButton>\n    </TableRowColumn>\n  </TableRow>\n);\n\nexport default AddPointRow;\n","// @flow\nimport React from 'react';\nimport { mapVector } from '../../../../Utils/MapFor';\n\nconst styles = {\n  container: {\n    position: 'relative',\n    width: '100%',\n    height: '100%',\n  },\n};\n\nconst pointKindIdentifiers = {\n  NORMAL: 1,\n  ORIGIN: 2,\n  CENTER: 3,\n};\ntype PointKind = 1 | 2 | 3;\n\ntype Props = {|\n  pointsContainer: gdSprite, // Could potentially be generalized to other things than Sprite in the future.\n  imageWidth: number,\n  imageHeight: number,\n  imageZoomFactor: number,\n  onPointsUpdated: () => void,\n|};\n\ntype State = {|\n  draggedPoint: ?gdPoint,\n  draggedPointKind: ?PointKind,\n|};\n\nexport default class PointsPreview extends React.Component<Props, State> {\n  _container: ?any;\n  state = {\n    draggedPoint: null,\n    draggedPointKind: null,\n  };\n\n  _onStartDragPoint = (draggedPoint: gdPoint, draggedPointKind: PointKind) => {\n    if (this.state.draggedPoint) return;\n\n    this.setState({\n      draggedPoint,\n      draggedPointKind,\n    });\n  };\n\n  _onEndDragPoint = () => {\n    const draggingWasDone = !!this.state.draggedPoint;\n    this.setState(\n      {\n        draggedPoint: null,\n        draggedPointKind: null,\n      },\n      () => {\n        if (draggingWasDone) this.props.onPointsUpdated();\n      }\n    );\n  };\n\n  /**\n   * Move a point with the mouse. A similar dragging implementation is done in\n   * CollisionMasksPreview (but with svg elements).\n   *\n   * TODO: This could be optimized by avoiding the forceUpdate (not sure if worth it though).\n   */\n  _onMouseMove = (event: any) => {\n    const { draggedPoint, draggedPointKind } = this.state;\n    if (!draggedPoint || !this._container) return;\n\n    const containerBoundingRect = this._container.getBoundingClientRect();\n    const xOnContainer = event.clientX - containerBoundingRect.left;\n    const yOnContainer = event.clientY - containerBoundingRect.top;\n\n    if (draggedPointKind === pointKindIdentifiers.CENTER) {\n      this.props.pointsContainer.setDefaultCenterPoint(false);\n    }\n    draggedPoint.setX(xOnContainer / this.props.imageZoomFactor);\n    draggedPoint.setY(yOnContainer / this.props.imageZoomFactor);\n    this.forceUpdate();\n  };\n\n  _renderPoint = (\n    name: string,\n    x: number,\n    y: number,\n    kind: PointKind,\n    point: gdPoint\n  ) => {\n    const imageSrc =\n      kind === pointKindIdentifiers.ORIGIN\n        ? 'res/originPoint.png'\n        : kind === pointKindIdentifiers.CENTER\n        ? 'res/centerPoint.png'\n        : 'res/point.png';\n    return (\n      <img\n        src={imageSrc}\n        style={{\n          position: 'absolute',\n          left: x,\n          top: y,\n          transform: 'translate(-6px, -5px)',\n          cursor: 'move',\n        }}\n        alt=\"\"\n        key={name}\n        onPointerDown={() => {\n          this._onStartDragPoint(point, kind);\n        }}\n      />\n    );\n  };\n\n  render() {\n    const {\n      pointsContainer,\n      imageWidth,\n      imageHeight,\n      imageZoomFactor,\n    } = this.props;\n    const nonDefaultPoints = pointsContainer.getAllNonDefaultPoints();\n    const points = mapVector(nonDefaultPoints, (point, i) =>\n      this._renderPoint(\n        point.getName(),\n        point.getX() * imageZoomFactor,\n        point.getY() * imageZoomFactor,\n        pointKindIdentifiers.NORMAL,\n        point\n      )\n    );\n\n    const originPoint = pointsContainer.getOrigin();\n    const centerPoint = pointsContainer.getCenter();\n    const automaticCenterPosition = pointsContainer.isDefaultCenterPoint();\n\n    return (\n      <div\n        style={styles.container}\n        onPointerMove={this._onMouseMove}\n        onPointerUp={this._onEndDragPoint}\n        ref={container => (this._container = container)}\n      >\n        {points}\n        {this._renderPoint(\n          'Origin',\n          originPoint.getX() * imageZoomFactor,\n          originPoint.getY() * imageZoomFactor,\n          pointKindIdentifiers.ORIGIN,\n          originPoint\n        )}\n        {this._renderPoint(\n          'Center',\n          (!automaticCenterPosition ? centerPoint.getX() : imageWidth / 2) *\n            imageZoomFactor,\n          (!automaticCenterPosition ? centerPoint.getY() : imageHeight / 2) *\n            imageZoomFactor,\n          pointKindIdentifiers.CENTER,\n          centerPoint\n        )}\n      </div>\n    );\n  }\n}\n","import { Trans } from '@lingui/macro';\nimport React, { Component } from 'react';\nimport FlatButton from '../../../../UI/FlatButton';\nimport EmptyMessage from '../../../../UI/EmptyMessage';\nimport { Line, Column } from '../../../../UI/Grid';\nimport { mapFor } from '../../../../Utils/MapFor';\nimport PolygonsList from './PolygonsList';\nimport CollisionMasksPreview from './CollisionMasksPreview';\nimport ImagePreview from '../../../../ResourcesList/ResourcePreview/ImagePreview';\nimport {\n  getCurrentElements,\n  allSpritesHaveSameCollisionMasksAs,\n  copyAnimationsSpriteCollisionMasks,\n} from '../Utils/SpriteObjectHelper';\nimport SpriteSelector from '../Utils/SpriteSelector';\nimport Window from '../../../../Utils/Window';\nimport every from 'lodash/every';\nconst gd = global.gd;\n\nexport default class CollisionMasksEditor extends Component {\n  state = {\n    animationIndex: 0,\n    directionIndex: 0,\n    spriteIndex: 0,\n    sameCollisionMasksForAnimations: true,\n    sameCollisionMasksForSprites: true,\n    spriteWidth: 0,\n    spriteHeight: 0,\n  };\n\n  componentDidMount() {\n    this._updateSameCollisionMasksToggles();\n  }\n\n  _updateCollisionMasks = () => {\n    const { object } = this.props;\n    const { animationIndex, directionIndex, spriteIndex } = this.state;\n    const spriteObject = gd.asSpriteObject(object);\n\n    const { animation, sprite } = getCurrentElements(\n      spriteObject,\n      animationIndex,\n      directionIndex,\n      spriteIndex\n    );\n\n    if (animation && sprite) {\n      if (this.state.sameCollisionMasksForAnimations) {\n        mapFor(0, spriteObject.getAnimationsCount(), i => {\n          const otherAnimation = spriteObject.getAnimation(i);\n          copyAnimationsSpriteCollisionMasks(sprite, otherAnimation);\n        });\n      } else if (this.state.sameCollisionMasksForSprites) {\n        copyAnimationsSpriteCollisionMasks(sprite, animation);\n      }\n    }\n\n    this.forceUpdate(); // Refresh the preview and the list\n    if (this.props.onCollisionMasksUpdated)\n      this.props.onCollisionMasksUpdated();\n  };\n\n  chooseAnimation = index => {\n    this.setState(\n      {\n        animationIndex: index,\n        directionIndex: 0,\n        spriteIndex: 0,\n      },\n      () => this._updateSameCollisionMasksToggles()\n    );\n  };\n\n  chooseDirection = index => {\n    this.setState({\n      directionIndex: index,\n      spriteIndex: 0,\n    });\n  };\n\n  chooseSprite = index => {\n    this.setState({\n      spriteIndex: index,\n    });\n  };\n\n  _updateSameCollisionMasksToggles = () => {\n    const { object } = this.props;\n    const { animationIndex, directionIndex, spriteIndex } = this.state;\n    const spriteObject = gd.asSpriteObject(object);\n\n    const { animation, sprite } = getCurrentElements(\n      spriteObject,\n      animationIndex,\n      directionIndex,\n      spriteIndex\n    );\n    if (!animation || !sprite) return;\n\n    this.setState({\n      sameCollisionMasksForAnimations: every(\n        mapFor(0, spriteObject.getAnimationsCount(), i => {\n          const otherAnimation = spriteObject.getAnimation(i);\n          return allSpritesHaveSameCollisionMasksAs(sprite, otherAnimation);\n        })\n      ),\n      sameCollisionMasksForSprites: allSpritesHaveSameCollisionMasksAs(\n        sprite,\n        animation\n      ),\n    });\n  };\n\n  _onSetCollisionMaskAutomatic = (automatic: boolean = true) => {\n    const { object } = this.props;\n    const { animationIndex, directionIndex, spriteIndex } = this.state;\n    const spriteObject = gd.asSpriteObject(object);\n\n    const { sprite } = getCurrentElements(\n      spriteObject,\n      animationIndex,\n      directionIndex,\n      spriteIndex\n    );\n    if (!sprite) return;\n\n    sprite.setCollisionMaskAutomatic(automatic);\n    this._updateCollisionMasks();\n  };\n\n  _setSameCollisionMasksForAllAnimations = enable => {\n    if (enable) {\n      const answer = Window.showConfirmDialog(\n        \"Having the same collision masks for all animations will erase and reset all the other animations collision masks. This can't be undone. Are you sure you want to share these collision masks amongst all the animations of the object?\"\n      );\n      if (!answer) return;\n    }\n\n    this.setState(\n      {\n        sameCollisionMasksForAnimations: enable,\n        sameCollisionMasksForSprites: enable\n          ? true\n          : this.state.sameCollisionMasksForSprites,\n      },\n      () => {\n        this._updateCollisionMasks();\n      }\n    );\n  };\n\n  _setSameCollisionMasksForAllSprites = enable => {\n    if (enable) {\n      const answer = Window.showConfirmDialog(\n        \"Having the same collision masks for all frames will erase and reset all the other frames collision masks. This can't be undone. Are you sure you want to share these collision masks amongst all the frames of the animation?\"\n      );\n      if (!answer) return;\n    }\n\n    this.setState(\n      {\n        sameCollisionMasksForAnimations: enable\n          ? this.state.sameCollisionMasksForAnimations\n          : false,\n        sameCollisionMasksForSprites: enable,\n      },\n      () => {\n        this._updateCollisionMasks();\n      }\n    );\n  };\n\n  _setCurrentSpriteSize = (spriteWidth: number, spriteHeight: number) => {\n    this.setState({\n      spriteWidth,\n      spriteHeight,\n    });\n  };\n\n  render() {\n    const { object, resourcesLoader, project } = this.props;\n    const {\n      sameCollisionMasksForAnimations,\n      sameCollisionMasksForSprites,\n      animationIndex,\n      directionIndex,\n      spriteIndex,\n      spriteWidth,\n      spriteHeight,\n    } = this.state;\n    const spriteObject = gd.asSpriteObject(object);\n\n    if (!object.getAnimationsCount()) return null;\n    const { hasValidSprite, sprite } = getCurrentElements(\n      spriteObject,\n      animationIndex,\n      directionIndex,\n      spriteIndex\n    );\n\n    return (\n      <div>\n        <ImagePreview\n          resourceName={hasValidSprite ? sprite.getImageName() : ''}\n          resourcesLoader={resourcesLoader}\n          project={project}\n          onSize={this._setCurrentSpriteSize}\n          renderOverlay={({ imageWidth, imageHeight, imageZoomFactor }) =>\n            hasValidSprite && (\n              <CollisionMasksPreview\n                imageWidth={imageWidth}\n                imageHeight={imageHeight}\n                imageZoomFactor={imageZoomFactor}\n                isDefaultBoundingBox={sprite.isCollisionMaskAutomatic()}\n                polygons={sprite.getCustomCollisionMask()}\n                onPolygonsUpdated={this._updateCollisionMasks}\n              />\n            )\n          }\n        />\n        <Line>\n          <Column expand>\n            <SpriteSelector\n              spriteObject={spriteObject}\n              animationIndex={animationIndex}\n              directionIndex={directionIndex}\n              spriteIndex={spriteIndex}\n              chooseAnimation={this.chooseAnimation}\n              chooseDirection={this.chooseDirection}\n              chooseSprite={this.chooseSprite}\n              sameForAllAnimations={sameCollisionMasksForAnimations}\n              sameForAllSprites={sameCollisionMasksForSprites}\n              setSameForAllAnimations={\n                this._setSameCollisionMasksForAllAnimations\n              }\n              setSameForAllSprites={this._setSameCollisionMasksForAllSprites}\n              setSameForAllAnimationsLabel={\n                <Trans>Share same collision masks for all animations</Trans>\n              }\n              setSameForAllSpritesLabel={\n                <Trans>\n                  Share same collision masks for all sprites of this animation\n                </Trans>\n              }\n            />\n          </Column>\n        </Line>\n        {!!sprite && !sprite.isCollisionMaskAutomatic() && (\n          <React.Fragment>\n            <PolygonsList\n              polygons={sprite.getCustomCollisionMask()}\n              onPolygonsUpdated={this._updateCollisionMasks}\n              spriteWidth={spriteWidth}\n              spriteHeight={spriteHeight}\n            />\n            <Line justifyContent=\"center\">\n              <FlatButton\n                label={<Trans>Restore the default collision mask</Trans>}\n                primary={false}\n                onClick={() => this._onSetCollisionMaskAutomatic(true)}\n              />\n            </Line>\n          </React.Fragment>\n        )}\n        {!!sprite && sprite.isCollisionMaskAutomatic() && (\n          <React.Fragment>\n            <EmptyMessage>\n              <Trans>\n                This sprite uses the default collision mask, a rectangle that is\n                as large as the sprite.\n              </Trans>\n            </EmptyMessage>\n            <Line justifyContent=\"center\">\n              <FlatButton\n                label={<Trans>Use a custom collision mask</Trans>}\n                primary={false}\n                onClick={() => this._onSetCollisionMaskAutomatic(false)}\n              />\n            </Line>\n          </React.Fragment>\n        )}\n        {!sprite && (\n          <EmptyMessage>\n            <Trans>\n              Choose an animation and frame to edit the collision masks\n            </Trans>\n          </EmptyMessage>\n        )}\n      </div>\n    );\n  }\n}\n","// @flow\nimport React, { Component } from 'react';\nimport flatten from 'lodash/flatten';\nimport {\n  Table,\n  TableBody,\n  TableHeader,\n  TableHeaderColumn,\n  TableRow,\n  TableRowColumn,\n} from '../../../../UI/Table';\nimport { SortableContainer, SortableElement } from 'react-sortable-hoc';\nimport { mapVector } from '../../../../Utils/MapFor';\nimport styles from './styles';\nimport VerticeRow from './VerticeRow';\nimport PolygonRow from './PolygonRow';\nimport AddVerticeRow from './AddVerticeRow';\nimport AddPolygonRow from './AddPolygonRow';\nconst gd = global.gd;\n\nconst SortableAddPolygonRow = SortableElement(AddPolygonRow);\nconst SortableAddVerticeRow = SortableElement(AddVerticeRow);\nconst SortableVerticeRow = SortableElement(VerticeRow);\nconst SortablePolygonRow = SortableElement(PolygonRow);\n\ntype PolygonsListBodyProps = {|\n  polygons: gdVectorPolygon2d,\n  onPolygonsUpdated: () => void,\n\n  // Sprite size is useful to make sure polygon vertices\n  // are not put outside the sprite bounding box, which is not supported:\n  spriteWidth: number,\n  spriteHeight: number,\n|};\n\nclass PolygonsListBody extends Component<PolygonsListBodyProps, void> {\n  _onPolygonUpdated() {\n    this.forceUpdate();\n    this.props.onPolygonsUpdated();\n  }\n\n  updateVerticeX = (vertice, newValue) => {\n    // Ensure vertice stays inside the sprite bounding box.\n    vertice.set_x(Math.min(this.props.spriteWidth, Math.max(newValue, 0)));\n    this._onPolygonUpdated();\n  };\n\n  updateVerticeY = (vertice, newValue) => {\n    // Ensure vertice stays inside the sprite bounding box.\n    vertice.set_y(Math.min(this.props.spriteHeight, Math.max(newValue, 0)));\n    this._onPolygonUpdated();\n  };\n\n  render() {\n    const { polygons } = this.props;\n\n    const polygonRows = flatten(\n      mapVector(polygons, (polygon, i) => {\n        const vertices = polygon.getVertices();\n        const isConvex = polygon.isConvex();\n\n        return [\n          <SortablePolygonRow\n            index={i}\n            disabled\n            key={'polygon-' + i}\n            polygon={polygon}\n            onRemove={() => {\n              gd.removeFromVectorPolygon2d(polygons, i);\n              this._onPolygonUpdated();\n            }}\n            isConvex={isConvex}\n            verticesCount={vertices.size()}\n          />,\n          mapVector(vertices, (vertice, j) => (\n            <SortableVerticeRow\n              index={i}\n              disabled\n              key={`polygon-${i}-vertice-${j}`}\n              verticeX={vertice.get_x()}\n              verticeY={vertice.get_y()}\n              onChangeVerticeX={newValue =>\n                this.updateVerticeX(vertice, newValue)\n              }\n              onChangeVerticeY={newValue =>\n                this.updateVerticeY(vertice, newValue)\n              }\n              onRemove={() => {\n                gd.removeFromVectorVector2f(polygon.getVertices(), j);\n                this._onPolygonUpdated();\n              }}\n              canRemove={vertices.size() > 3}\n              hasWarning={!isConvex}\n            />\n          )),\n          <SortableAddVerticeRow\n            index={0}\n            key={`polygon-${i}-add-vertice-row`}\n            disabled\n            onAdd={() => {\n              const newVertice = new gd.Vector2f();\n              polygon.getVertices().push_back(newVertice);\n              newVertice.delete();\n\n              this._onPolygonUpdated();\n            }}\n          />,\n        ];\n      })\n    );\n\n    const addRow = (\n      <SortableAddPolygonRow\n        index={0}\n        key={'add-polygon-row'}\n        disabled\n        onAdd={() => {\n          const newPolygon = gd.Polygon2d.createRectangle(32, 32);\n          newPolygon.move(\n            this.props.spriteWidth / 2,\n            this.props.spriteHeight / 2\n          );\n          polygons.push_back(newPolygon);\n\n          this._onPolygonUpdated();\n        }}\n      />\n    );\n\n    return <TableBody>{[...polygonRows, addRow]}</TableBody>;\n  }\n}\n\nconst SortablePolygonsListBody = SortableContainer(PolygonsListBody);\nSortablePolygonsListBody.muiName = 'TableBody';\n\ntype Props = {|\n  polygons: gdVectorPolygon2d,\n  onPolygonsUpdated: () => void,\n  spriteWidth: number,\n  spriteHeight: number,\n|};\n\nexport default class PolygonsList extends Component<Props, void> {\n  render() {\n    return (\n      <Table>\n        <TableHeader>\n          <TableRow>\n            <TableHeaderColumn style={styles.handleColumn} />\n            <TableHeaderColumn>Polygon</TableHeaderColumn>\n            <TableHeaderColumn style={styles.coordinateColumn}>\n              X\n            </TableHeaderColumn>\n            <TableHeaderColumn style={styles.coordinateColumn}>\n              Y\n            </TableHeaderColumn>\n            <TableRowColumn style={styles.toolColumn} />\n          </TableRow>\n        </TableHeader>\n        <SortablePolygonsListBody\n          polygons={this.props.polygons}\n          onPolygonsUpdated={this.props.onPolygonsUpdated}\n          spriteWidth={this.props.spriteWidth}\n          spriteHeight={this.props.spriteHeight}\n          onSortEnd={({ oldIndex, newIndex }) => {\n            // Reordering polygons is not supported for now\n          }}\n          helperClass=\"sortable-helper\"\n          useDragHandle\n          lockToContainerEdges\n        />\n      </Table>\n    );\n  }\n}\n","import React from 'react';\nimport { TableRow, TableRowColumn } from '../../../../UI/Table';\nimport IconButton from '../../../../UI/IconButton';\nimport Delete from '@material-ui/icons/Delete';\nimport TextField from '../../../../UI/TextField';\nimport Warning from '@material-ui/icons/Warning';\nimport styles from './styles';\nimport ThemeConsumer from '../../../../UI/Theme/ThemeConsumer';\n\nconst VerticeRow = ({\n  hasWarning,\n  canRemove,\n  onRemove,\n  verticeX,\n  verticeY,\n  onChangeVerticeX,\n  onChangeVerticeY,\n}) => (\n  <ThemeConsumer>\n    {muiTheme => (\n      <TableRow\n        style={{\n          backgroundColor: muiTheme.list.itemsBackgroundColor,\n        }}\n      >\n        <TableRowColumn style={styles.handleColumn}>\n          {/* <DragHandle /> Reordering vertices is not supported for now */}\n        </TableRowColumn>\n        <TableRowColumn>{hasWarning && <Warning />}</TableRowColumn>\n        <TableRowColumn style={styles.coordinateColumn}>\n          <TextField\n            margin=\"none\"\n            value={verticeX}\n            type=\"number\"\n            id=\"vertice-x\"\n            onChange={(e, value) =>\n              onChangeVerticeX(parseFloat(value || 0, 10))\n            }\n          />\n        </TableRowColumn>\n        <TableRowColumn style={styles.coordinateColumn}>\n          <TextField\n            margin=\"none\"\n            value={verticeY}\n            type=\"number\"\n            id=\"vertice-y\"\n            onChange={(e, value) =>\n              onChangeVerticeY(parseFloat(value || 0, 10))\n            }\n          />\n        </TableRowColumn>\n        <TableRowColumn style={styles.toolColumn}>\n          {!!onRemove && (\n            <IconButton onClick={onRemove} disabled={!canRemove}>\n              <Delete />\n            </IconButton>\n          )}\n        </TableRowColumn>\n      </TableRow>\n    )}\n  </ThemeConsumer>\n);\n\nexport default VerticeRow;\n","import React from 'react';\nimport { TableRow, TableRowColumn } from '../../../../UI/Table';\nimport IconButton from '../../../../UI/IconButton';\nimport Delete from '@material-ui/icons/Delete';\nimport styles from './styles';\nimport ThemeConsumer from '../../../../UI/Theme/ThemeConsumer';\n\nconst PolygonRow = ({ onRemove, isConvex, verticesCount }) => {\n  return (\n    <ThemeConsumer>\n      {muiTheme => (\n        <TableRow\n          style={{\n            backgroundColor: muiTheme.list.itemsBackgroundColor,\n          }}\n        >\n          <TableRowColumn style={styles.handleColumn}>\n            {/* <DragHandle /> Reordering polygons is not supported for now */}\n          </TableRowColumn>\n          {isConvex && (\n            <TableRowColumn>\n              {verticesCount === 3 && `Triangle`}\n              {verticesCount === 4 && `Quadrilateral`}\n              {verticesCount >= 5 && `Polygon with ${verticesCount} vertices`}\n            </TableRowColumn>\n          )}\n          {!isConvex && <TableRowColumn>Polygon is not convex!</TableRowColumn>}\n          <TableRowColumn style={styles.coordinateColumn} />\n          <TableRowColumn style={styles.coordinateColumn} />\n          <TableRowColumn style={styles.toolColumn}>\n            {!!onRemove && (\n              <IconButton onClick={onRemove}>\n                <Delete />\n              </IconButton>\n            )}\n          </TableRowColumn>\n        </TableRow>\n      )}\n    </ThemeConsumer>\n  );\n};\n\nexport default PolygonRow;\n","import React from 'react';\nimport { TableRow, TableRowColumn } from '../../../../UI/Table';\nimport AddCircle from '@material-ui/icons/AddCircle';\nimport IconButton from '../../../../UI/IconButton';\nimport styles from './styles';\n\nconst AddVerticeRow = ({ onAdd }) => (\n  <TableRow>\n    <TableRowColumn style={styles.handleColumn} />\n    <TableRowColumn />\n    <TableRowColumn style={styles.coordinateColumn} />\n    <TableRowColumn style={styles.coordinateColumn} />\n    <TableRowColumn style={styles.toolColumn}>\n      <IconButton onClick={onAdd}>\n        <AddCircle />\n      </IconButton>\n    </TableRowColumn>\n  </TableRow>\n);\n\nexport default AddVerticeRow;\n","import React from 'react';\nimport { TableRow, TableRowColumn } from '../../../../UI/Table';\nimport Add from '@material-ui/icons/Add';\nimport IconButton from '../../../../UI/IconButton';\nimport styles from './styles';\n\nconst AddPolygonRow = ({ onAdd }) => (\n  <TableRow>\n    <TableRowColumn style={styles.handleColumn} />\n    <TableRowColumn />\n    <TableRowColumn style={styles.coordinateColumn} />\n    <TableRowColumn style={styles.coordinateColumn} />\n    <TableRowColumn style={styles.toolColumn}>\n      <IconButton onClick={onAdd}>\n        <Add />\n      </IconButton>\n    </TableRowColumn>\n  </TableRow>\n);\n\nexport default AddPolygonRow;\n","// @flow\nimport * as React from 'react';\nimport { mapVector } from '../../../../Utils/MapFor';\n\nconst styles = {\n  container: {\n    position: 'relative',\n  },\n  svg: {\n    width: '100%',\n    height: '100%',\n  },\n  vertexCircle: {\n    cursor: 'move',\n  },\n};\n\ntype Props = {|\n  polygons: gdVectorPolygon2d,\n  isDefaultBoundingBox: boolean,\n  imageWidth: number,\n  imageHeight: number,\n  imageZoomFactor: number,\n  onPolygonsUpdated: () => void,\n|};\n\ntype State = {|\n  draggedVertex: ?gdVector2f,\n|};\n\nexport default class CollisionMasksPreview extends React.Component<\n  Props,\n  State\n> {\n  _svg: any;\n  state = {\n    draggedVertex: null,\n  };\n\n  _onStartDragVertex = (draggedVertex: gdVector2f) => {\n    if (this.state.draggedVertex) return;\n\n    this.setState({\n      draggedVertex,\n    });\n  };\n\n  _onEndDragVertex = () => {\n    const draggingWasDone = !!this.state.draggedVertex;\n    this.setState(\n      {\n        draggedVertex: null,\n      },\n      () => {\n        if (draggingWasDone) this.props.onPolygonsUpdated();\n      }\n    );\n  };\n\n  /**\n   * Move a vertex with the mouse. A similar dragging implementation is done in\n   * PointsPreview (but with div and img elements).\n   *\n   * TODO: This could be optimized by avoiding the forceUpdate (not sure if worth it though).\n   */\n  _onPointerMove = (event: any) => {\n    const { draggedVertex } = this.state;\n    if (!draggedVertex) return;\n\n    const pointOnScreen = this._svg.createSVGPoint();\n    pointOnScreen.x = event.clientX;\n    pointOnScreen.y = event.clientY;\n    const screenToSvgMatrix = this._svg.getScreenCTM().inverse();\n    const pointOnSvg = pointOnScreen.matrixTransform(screenToSvgMatrix);\n\n    draggedVertex.set_x(pointOnSvg.x / this.props.imageZoomFactor);\n    draggedVertex.set_y(pointOnSvg.y / this.props.imageZoomFactor);\n    this.forceUpdate();\n  };\n\n  _renderBoundingBox() {\n    const { imageWidth, imageHeight, imageZoomFactor } = this.props;\n\n    return (\n      <polygon\n        fill=\"rgba(255,0,0,0.2)\"\n        stroke=\"rgba(255,0,0,0.5)\"\n        strokeWidth={1}\n        fileRule=\"evenodd\"\n        points={`0,0 ${imageWidth * imageZoomFactor},0 ${imageWidth *\n          imageZoomFactor},${imageHeight * imageZoomFactor} 0,${imageHeight *\n          imageZoomFactor}`}\n      />\n    );\n  }\n\n  _renderPolygons() {\n    const { polygons, imageZoomFactor } = this.props;\n\n    return (\n      <React.Fragment>\n        {mapVector(polygons, (polygon, i) => {\n          const vertices = polygon.getVertices();\n          return (\n            <polygon\n              key={`polygon-${i}`}\n              fill=\"rgba(255,0,0,0.2)\"\n              stroke=\"rgba(255,0,0,0.5)\"\n              strokeWidth={1}\n              fileRule=\"evenodd\"\n              points={mapVector(\n                vertices,\n                (vertex, j) =>\n                  `${vertex.get_x() * imageZoomFactor},${vertex.get_y() *\n                    imageZoomFactor}`\n              ).join(' ')}\n            />\n          );\n        })}\n        {mapVector(polygons, (polygon, i) => {\n          const vertices = polygon.getVertices();\n          return mapVector(vertices, (vertex, j) => (\n            <circle\n              onPointerDown={event => this._onStartDragVertex(vertex)}\n              key={`polygon-${i}-vertex-${j}`}\n              fill=\"rgba(255,0,0,0.75)\"\n              strokeWidth={1}\n              cx={vertex.get_x() * imageZoomFactor}\n              cy={vertex.get_y() * imageZoomFactor}\n              r={5}\n              style={styles.vertexCircle}\n            />\n          ));\n        })}\n      </React.Fragment>\n    );\n  }\n\n  render() {\n    const { isDefaultBoundingBox } = this.props;\n\n    return (\n      <svg\n        onPointerMove={this._onPointerMove}\n        onPointerUp={this._onEndDragVertex}\n        width={this.props.imageWidth * this.props.imageZoomFactor}\n        height={this.props.imageHeight * this.props.imageZoomFactor}\n        style={styles.svg}\n        ref={svg => (this._svg = svg)}\n      >\n        {isDefaultBoundingBox && this._renderBoundingBox()}\n        {!isDefaultBoundingBox && this._renderPolygons()}\n      </svg>\n    );\n  }\n}\n","// @flow\nimport { Trans } from '@lingui/macro';\n\nimport * as React from 'react';\nimport { type EditorProps } from './EditorProps.flow';\nimport { Line, Column } from '../../UI/Grid';\nimport EmptyMessage from '../../UI/EmptyMessage';\n\nexport default class EmptyEditor extends React.Component<EditorProps, void> {\n  render() {\n    return (\n      <Column>\n        <Line>\n          <EmptyMessage>\n            <Trans>\n              This object does not have any specific configuration. Add it on\n              the scene and use events to interact with it.\n            </Trans>\n          </EmptyMessage>\n        </Line>\n      </Column>\n    );\n  }\n}\n","// @flow\nimport { Trans } from '@lingui/macro';\n\nimport * as React from 'react';\nimport Checkbox from '../../UI/Checkbox';\nimport { Line, Column } from '../../UI/Grid';\nimport ColorField from '../../UI/ColorField';\nimport { type EditorProps } from './EditorProps.flow';\nimport SemiControlledTextField from '../../UI/SemiControlledTextField';\nimport { ResponsiveLineStackLayout } from '../../UI/Layout';\nconst gd = global.gd;\n\nexport default class PanelSpriteEditor extends React.Component<\n  EditorProps,\n  void\n> {\n  render() {\n    const { object } = this.props;\n    const shapePainterObject = gd.asShapePainterObject(object);\n\n    return (\n      <Column>\n        <Line>\n          <Checkbox\n            label={\n              <Trans>\n                Draw the shapes relative to the object position on the scene\n              </Trans>\n            }\n            checked={!shapePainterObject.areCoordinatesAbsolute()}\n            onCheck={(e, checked) => {\n              if (!checked) shapePainterObject.setCoordinatesAbsolute();\n              else shapePainterObject.setCoordinatesRelative();\n              this.forceUpdate();\n            }}\n          />\n        </Line>\n        <ResponsiveLineStackLayout>\n          <ColorField\n            floatingLabelText={<Trans>Outline color</Trans>}\n            disableAlpha\n            fullWidth\n            color={{\n              r: shapePainterObject.getOutlineColorR(),\n              g: shapePainterObject.getOutlineColorG(),\n              b: shapePainterObject.getOutlineColorB(),\n              a: 255,\n            }}\n            onChangeComplete={color => {\n              shapePainterObject.setOutlineColor(\n                color.rgb.r,\n                color.rgb.g,\n                color.rgb.b\n              );\n              this.forceUpdate();\n            }}\n          />\n          <SemiControlledTextField\n            commitOnBlur\n            floatingLabelText={<Trans>Outline opacity (0-255)</Trans>}\n            fullWidth\n            type=\"number\"\n            value={shapePainterObject.getOutlineOpacity()}\n            onChange={value => {\n              shapePainterObject.setOutlineOpacity(parseInt(value, 10) || 0);\n              this.forceUpdate();\n            }}\n          />\n          <SemiControlledTextField\n            commitOnBlur\n            floatingLabelText={<Trans>Outline size (in pixels)</Trans>}\n            fullWidth\n            type=\"number\"\n            value={shapePainterObject.getOutlineSize()}\n            onChange={value => {\n              shapePainterObject.setOutlineSize(parseInt(value, 10) || 0);\n              this.forceUpdate();\n            }}\n          />\n        </ResponsiveLineStackLayout>\n        <ResponsiveLineStackLayout>\n          <ColorField\n            floatingLabelText={<Trans>Fill color</Trans>}\n            disableAlpha\n            fullWidth\n            color={{\n              r: shapePainterObject.getFillColorR(),\n              g: shapePainterObject.getFillColorG(),\n              b: shapePainterObject.getFillColorB(),\n              a: 255,\n            }}\n            onChangeComplete={color => {\n              shapePainterObject.setFillColor(\n                color.rgb.r,\n                color.rgb.g,\n                color.rgb.b\n              );\n              this.forceUpdate();\n            }}\n          />\n          <SemiControlledTextField\n            commitOnBlur\n            floatingLabelText={<Trans>Fill opacity (0-255)</Trans>}\n            fullWidth\n            type=\"number\"\n            value={shapePainterObject.getFillOpacity()}\n            onChange={value => {\n              shapePainterObject.setFillOpacity(parseInt(value, 10) || 0);\n              this.forceUpdate();\n            }}\n          />\n        </ResponsiveLineStackLayout>\n      </Column>\n    );\n  }\n}\n","// @flow\nimport { Trans } from '@lingui/macro';\nimport { t } from '@lingui/macro';\n\nimport * as React from 'react';\nimport Checkbox from '../../UI/Checkbox';\nimport SelectField from '../../UI/SelectField';\nimport SelectOption from '../../UI/SelectOption';\nimport { Line, Column } from '../../UI/Grid';\nimport ColorField from '../../UI/ColorField';\nimport SemiControlledTextField from '../../UI/SemiControlledTextField';\nimport { type EditorProps } from './EditorProps.flow';\nimport ResourceSelectorWithThumbnail from '../../ResourcesList/ResourceSelectorWithThumbnail';\nimport { ResponsiveLineStackLayout } from '../../UI/Layout';\nconst gd = global.gd;\n\nexport default class ParticleEmitterEditor extends React.Component<\n  EditorProps,\n  void\n> {\n  render() {\n    const {\n      object,\n      project,\n      resourceSources,\n      onChooseResource,\n      resourceExternalEditors,\n    } = this.props;\n    const particleEmitterObject = gd.asParticleEmitterObject(object);\n\n    return (\n      <Column>\n        <Line>\n          <Column expand noMargin>\n            <SelectField\n              fullWidth\n              floatingLabelText={<Trans>Particles kind</Trans>}\n              value={particleEmitterObject.getRendererType()}\n              onChange={(e, i, value: string) => {\n                const rendererType = parseInt(value, 10) || 0;\n                particleEmitterObject.setRendererType(rendererType);\n                if (rendererType !== gd.ParticleEmitterObject.Quad) {\n                  particleEmitterObject.setParticleTexture('');\n                }\n                this.forceUpdate();\n              }}\n            >\n              <SelectOption\n                value={gd.ParticleEmitterObject.Point}\n                primaryText={t`Point`}\n              />\n              <SelectOption\n                value={gd.ParticleEmitterObject.Line}\n                primaryText={t`Line`}\n              />\n              <SelectOption\n                value={gd.ParticleEmitterObject.Quad}\n                primaryText={t`Textured`}\n              />\n            </SelectField>\n          </Column>\n        </Line>\n        {particleEmitterObject.getRendererType() ===\n          gd.ParticleEmitterObject.Point && (\n          <Line>\n            <Column expand noMargin>\n              <SemiControlledTextField\n                commitOnBlur\n                floatingLabelText={<Trans>Size</Trans>}\n                fullWidth\n                type=\"number\"\n                value={particleEmitterObject.getRendererParam1()}\n                onChange={value => {\n                  particleEmitterObject.setRendererParam1(parseFloat(value));\n                  this.forceUpdate();\n                }}\n              />\n            </Column>\n          </Line>\n        )}\n        {particleEmitterObject.getRendererType() ===\n          gd.ParticleEmitterObject.Line && (\n          <ResponsiveLineStackLayout>\n            <SemiControlledTextField\n              commitOnBlur\n              floatingLabelText={<Trans>Lines length</Trans>}\n              fullWidth\n              type=\"number\"\n              value={particleEmitterObject.getRendererParam1()}\n              onChange={value => {\n                particleEmitterObject.setRendererParam1(parseFloat(value));\n                this.forceUpdate();\n              }}\n            />\n            <SemiControlledTextField\n              commitOnBlur\n              floatingLabelText={<Trans>Lines thickness</Trans>}\n              fullWidth\n              type=\"number\"\n              value={particleEmitterObject.getRendererParam2()}\n              onChange={value => {\n                particleEmitterObject.setRendererParam2(parseFloat(value));\n                this.forceUpdate();\n              }}\n            />\n          </ResponsiveLineStackLayout>\n        )}\n        {particleEmitterObject.getRendererType() ===\n          gd.ParticleEmitterObject.Quad && (\n          <React.Fragment>\n            <Line>\n              <ResourceSelectorWithThumbnail\n                project={project}\n                resourceSources={resourceSources}\n                onChooseResource={onChooseResource}\n                resourceKind=\"image\"\n                resourceName={particleEmitterObject.getParticleTexture()}\n                resourceExternalEditors={resourceExternalEditors}\n                onChange={resourceName => {\n                  particleEmitterObject.setParticleTexture(resourceName);\n                  this.forceUpdate();\n                }}\n                floatingLabelText={<Trans>Select an image</Trans>}\n              />\n            </Line>\n            <ResponsiveLineStackLayout>\n              <SemiControlledTextField\n                commitOnBlur\n                floatingLabelText={<Trans>Particles start width</Trans>}\n                fullWidth\n                type=\"number\"\n                value={particleEmitterObject.getRendererParam1()}\n                onChange={value => {\n                  particleEmitterObject.setRendererParam1(\n                    Math.max(0, parseFloat(value))\n                  );\n                  this.forceUpdate();\n                }}\n              />\n              <SemiControlledTextField\n                commitOnBlur\n                floatingLabelText={<Trans>Particles start height</Trans>}\n                fullWidth\n                type=\"number\"\n                value={particleEmitterObject.getRendererParam2()}\n                onChange={value => {\n                  particleEmitterObject.setRendererParam2(\n                    Math.max(0, parseFloat(value))\n                  );\n                  this.forceUpdate();\n                }}\n              />\n            </ResponsiveLineStackLayout>\n          </React.Fragment>\n        )}\n        <ResponsiveLineStackLayout>\n          <ColorField\n            floatingLabelText={<Trans>Particles start color</Trans>}\n            disableAlpha\n            fullWidth\n            color={{\n              r: particleEmitterObject.getParticleRed1(),\n              g: particleEmitterObject.getParticleGreen1(),\n              b: particleEmitterObject.getParticleBlue1(),\n              a: 255,\n            }}\n            onChangeComplete={color => {\n              particleEmitterObject.setParticleRed1(color.rgb.r);\n              particleEmitterObject.setParticleGreen1(color.rgb.g);\n              particleEmitterObject.setParticleBlue1(color.rgb.b);\n\n              this.forceUpdate();\n            }}\n          />\n          <SemiControlledTextField\n            commitOnBlur\n            floatingLabelText={<Trans>Start opacity (0-255)</Trans>}\n            fullWidth\n            type=\"number\"\n            value={particleEmitterObject.getParticleAlpha1()}\n            onChange={value => {\n              particleEmitterObject.setParticleAlpha1(parseInt(value, 10) || 0);\n              this.forceUpdate();\n            }}\n          />\n        </ResponsiveLineStackLayout>\n        <ResponsiveLineStackLayout>\n          <ColorField\n            floatingLabelText={<Trans>Particles end color</Trans>}\n            disableAlpha\n            fullWidth\n            color={{\n              r: particleEmitterObject.getParticleRed2(),\n              g: particleEmitterObject.getParticleGreen2(),\n              b: particleEmitterObject.getParticleBlue2(),\n              a: 255,\n            }}\n            onChangeComplete={color => {\n              particleEmitterObject.setParticleRed2(color.rgb.r);\n              particleEmitterObject.setParticleGreen2(color.rgb.g);\n              particleEmitterObject.setParticleBlue2(color.rgb.b);\n\n              this.forceUpdate();\n            }}\n          />\n          <SemiControlledTextField\n            commitOnBlur\n            floatingLabelText={<Trans>End opacity (0-255)</Trans>}\n            fullWidth\n            type=\"number\"\n            value={particleEmitterObject.getParticleAlpha2()}\n            onChange={value => {\n              particleEmitterObject.setParticleAlpha2(parseInt(value, 10) || 0);\n              this.forceUpdate();\n            }}\n          />\n        </ResponsiveLineStackLayout>\n        <Line>\n          <Checkbox\n            label={<Trans>Additive rendering</Trans>}\n            checked={particleEmitterObject.isRenderingAdditive()}\n            onCheck={(e, checked) => {\n              if (checked) particleEmitterObject.setRenderingAdditive();\n              else particleEmitterObject.setRenderingAlpha();\n              this.forceUpdate();\n            }}\n          />\n        </Line>\n        <Line>\n          <Checkbox\n            label={<Trans>Delete when out of particles</Trans>}\n            checked={particleEmitterObject.getDestroyWhenNoParticles()}\n            onCheck={(e, checked) => {\n              particleEmitterObject.setDestroyWhenNoParticles(checked);\n              this.forceUpdate();\n            }}\n          />\n        </Line>\n        <ResponsiveLineStackLayout>\n          <SemiControlledTextField\n            commitOnBlur\n            floatingLabelText={\n              <Trans>Maximum number of particles displayed</Trans>\n            }\n            fullWidth\n            type=\"number\"\n            value={particleEmitterObject.getMaxParticleNb()}\n            onChange={value => {\n              particleEmitterObject.setMaxParticleNb(parseInt(value, 10) || 0);\n              this.forceUpdate();\n            }}\n          />\n        </ResponsiveLineStackLayout>\n        <ResponsiveLineStackLayout>\n          <SemiControlledTextField\n            commitOnBlur\n            floatingLabelText={\n              <Trans>Number of particles in tank (-1 for infinite)</Trans>\n            }\n            fullWidth\n            type=\"number\"\n            value={particleEmitterObject.getTank()}\n            onChange={value => {\n              particleEmitterObject.setTank(parseInt(value, 10) || 0);\n              this.forceUpdate();\n            }}\n          />\n          <SemiControlledTextField\n            commitOnBlur\n            floatingLabelText={\n              <Trans>Flow of particles (particles/seconds)</Trans>\n            }\n            fullWidth\n            type=\"number\"\n            value={particleEmitterObject.getFlow()}\n            onChange={value => {\n              particleEmitterObject.setFlow(parseInt(value, 10) || 0);\n              this.forceUpdate();\n            }}\n          />\n        </ResponsiveLineStackLayout>\n        <ResponsiveLineStackLayout>\n          <SemiControlledTextField\n            commitOnBlur\n            floatingLabelText={\n              <Trans>Minimum emitter force applied on particles</Trans>\n            }\n            fullWidth\n            type=\"number\"\n            value={particleEmitterObject.getEmitterForceMin()}\n            onChange={value => {\n              particleEmitterObject.setEmitterForceMin(\n                parseInt(value, 10) || 0\n              );\n              this.forceUpdate();\n            }}\n          />\n          <SemiControlledTextField\n            commitOnBlur\n            floatingLabelText={\n              <Trans>Maximum emitter force applied on particles</Trans>\n            }\n            fullWidth\n            type=\"number\"\n            value={particleEmitterObject.getEmitterForceMax()}\n            onChange={value => {\n              particleEmitterObject.setEmitterForceMax(\n                parseInt(value, 10) || 0\n              );\n              this.forceUpdate();\n            }}\n          />\n        </ResponsiveLineStackLayout>\n        <ResponsiveLineStackLayout>\n          <SemiControlledTextField\n            commitOnBlur\n            floatingLabelText={<Trans>Spray cone angle (in degrees)</Trans>}\n            fullWidth\n            type=\"number\"\n            value={particleEmitterObject.getConeSprayAngle()}\n            onChange={value => {\n              particleEmitterObject.setConeSprayAngle(parseInt(value, 10) || 0);\n              this.forceUpdate();\n            }}\n          />\n          <SemiControlledTextField\n            commitOnBlur\n            floatingLabelText={<Trans>Radius of the emitter</Trans>}\n            fullWidth\n            type=\"number\"\n            value={particleEmitterObject.getZoneRadius()}\n            onChange={value => {\n              particleEmitterObject.setZoneRadius(parseInt(value, 10) || 0);\n              this.forceUpdate();\n            }}\n          />\n        </ResponsiveLineStackLayout>\n        <ResponsiveLineStackLayout>\n          <SemiControlledTextField\n            commitOnBlur\n            floatingLabelText={<Trans>Gravity on particles on X axis</Trans>}\n            fullWidth\n            type=\"number\"\n            value={particleEmitterObject.getParticleGravityX()}\n            onChange={value => {\n              particleEmitterObject.setParticleGravityX(parseFloat(value));\n              this.forceUpdate();\n            }}\n          />\n          <SemiControlledTextField\n            commitOnBlur\n            floatingLabelText={<Trans>Gravity on particles on Y axis</Trans>}\n            fullWidth\n            type=\"number\"\n            value={particleEmitterObject.getParticleGravityY()}\n            onChange={value => {\n              particleEmitterObject.setParticleGravityY(parseFloat(value));\n              this.forceUpdate();\n            }}\n          />\n        </ResponsiveLineStackLayout>\n        <Line>\n          <Column expand noMargin>\n            <SemiControlledTextField\n              commitOnBlur\n              floatingLabelText={<Trans>Friction on particles</Trans>}\n              fullWidth\n              type=\"number\"\n              value={particleEmitterObject.getFriction()}\n              onChange={value => {\n                particleEmitterObject.setFriction(parseFloat(value));\n                this.forceUpdate();\n              }}\n            />\n          </Column>\n        </Line>\n        <ResponsiveLineStackLayout>\n          <SemiControlledTextField\n            commitOnBlur\n            floatingLabelText={\n              <Trans>Particle minimum lifetime (in seconds)</Trans>\n            }\n            fullWidth\n            type=\"number\"\n            value={particleEmitterObject.getParticleLifeTimeMin()}\n            onChange={value => {\n              particleEmitterObject.setParticleLifeTimeMin(parseFloat(value));\n              this.forceUpdate();\n            }}\n          />\n          <SemiControlledTextField\n            commitOnBlur\n            floatingLabelText={\n              <Trans>Particle maximum lifetime (in seconds)</Trans>\n            }\n            fullWidth\n            type=\"number\"\n            value={particleEmitterObject.getParticleLifeTimeMax()}\n            onChange={value => {\n              particleEmitterObject.setParticleLifeTimeMax(parseFloat(value));\n              this.forceUpdate();\n            }}\n          />\n        </ResponsiveLineStackLayout>\n        <ResponsiveLineStackLayout>\n          <SemiControlledTextField\n            commitOnBlur\n            floatingLabelText={<Trans>Particle start size (in percents)</Trans>}\n            fullWidth\n            type=\"number\"\n            value={particleEmitterObject.getParticleSize1()}\n            onChange={value => {\n              particleEmitterObject.setParticleSize1(parseFloat(value));\n              this.forceUpdate();\n            }}\n          />\n          <SemiControlledTextField\n            commitOnBlur\n            floatingLabelText={<Trans>Particle end size (in percents)</Trans>}\n            fullWidth\n            type=\"number\"\n            value={particleEmitterObject.getParticleSize2()}\n            onChange={value => {\n              particleEmitterObject.setParticleSize2(parseFloat(value));\n              this.forceUpdate();\n            }}\n          />\n        </ResponsiveLineStackLayout>\n        <ResponsiveLineStackLayout>\n          <SemiControlledTextField\n            commitOnBlur\n            floatingLabelText={\n              <Trans>Particle minimum rotation speed (degrees/second)</Trans>\n            }\n            fullWidth\n            type=\"number\"\n            value={particleEmitterObject.getParticleAngle1()}\n            onChange={value => {\n              particleEmitterObject.setParticleAngle1(parseFloat(value));\n              this.forceUpdate();\n            }}\n          />\n          <SemiControlledTextField\n            commitOnBlur\n            floatingLabelText={\n              <Trans>Particle maximum rotation speed (degrees/second)</Trans>\n            }\n            fullWidth\n            type=\"number\"\n            value={particleEmitterObject.getParticleAngle2()}\n            onChange={value => {\n              particleEmitterObject.setParticleAngle2(parseFloat(value));\n              this.forceUpdate();\n            }}\n          />\n        </ResponsiveLineStackLayout>\n      </Column>\n    );\n  }\n}\n","// @flow\nimport { Trans } from '@lingui/macro';\nimport { I18n } from '@lingui/react';\n\nimport * as React from 'react';\nimport PropertiesEditor from '../../PropertiesEditor';\nimport propertiesMapToSchema from '../../PropertiesEditor/PropertiesMapToSchema';\nimport EmptyMessage from '../../UI/EmptyMessage';\nimport { type EditorProps } from './EditorProps.flow';\nimport { Column, Line } from '../../UI/Grid';\nimport { getExtraObjectsInformation } from '../../Hints';\nimport AlertMessage from '../../UI/AlertMessage';\n\ntype Props = EditorProps;\n\nexport default class ObjectPropertiesEditor extends React.Component<Props> {\n  render() {\n    const {\n      object,\n      project,\n      resourceSources,\n      onChooseResource,\n      resourceExternalEditors,\n    } = this.props;\n    const properties = object.getProperties(project);\n\n    const propertiesSchema = propertiesMapToSchema(\n      properties,\n      object => object.getProperties(project),\n      (object, name, value) => object.updateProperty(name, value, project)\n    );\n\n    const extraInformation = getExtraObjectsInformation()[object.getType()];\n\n    return (\n      <I18n>\n        {({ i18n }) => (\n          <Column>\n            {propertiesSchema.length ? (\n              <React.Fragment>\n                {extraInformation ? (\n                  <Line>\n                    <Column noMargin>\n                      {extraInformation.map(({ kind, message }, index) => (\n                        <AlertMessage kind={kind} key={index}>\n                          {i18n._(message)}\n                        </AlertMessage>\n                      ))}\n                    </Column>\n                  </Line>\n                ) : null}\n                <PropertiesEditor\n                  unsavedChanges={this.props.unsavedChanges}\n                  schema={propertiesSchema}\n                  instances={[object]}\n                  project={project}\n                  resourceSources={resourceSources}\n                  onChooseResource={onChooseResource}\n                  resourceExternalEditors={resourceExternalEditors}\n                />\n              </React.Fragment>\n            ) : (\n              <EmptyMessage>\n                <Trans>\n                  There is nothing to configure for this object. You can still\n                  use events to interact with the object.\n                </Trans>\n              </EmptyMessage>\n            )}\n          </Column>\n        )}\n      </I18n>\n    );\n  }\n}\n","import { Trans } from '@lingui/macro';\nimport { t } from '@lingui/macro';\nimport React, { Component } from 'react';\nimport TextField from '../UI/TextField';\nimport Add from '@material-ui/icons/Add';\nimport Delete from '@material-ui/icons/Delete';\nimport IconButton from '../UI/IconButton';\nimport EmptyMessage from '../UI/EmptyMessage';\nimport MiniToolbar, { MiniToolbarText } from '../UI/MiniToolbar';\nimport HelpIcon from '../UI/HelpIcon';\nimport newNameGenerator from '../Utils/NewNameGenerator';\nimport NewBehaviorDialog from './NewBehaviorDialog';\nimport { getBehaviorHelpPagePath } from './BehaviorsHelpPagePaths';\nimport BehaviorsEditorService from './BehaviorsEditorService';\nimport { isNullPtr } from '../Utils/IsNullPtr';\nimport Window from '../Utils/Window';\nimport { Column, Line } from '../UI/Grid';\nimport RaisedButton from '../UI/RaisedButton';\nconst gd = global.gd;\n\nconst AddBehaviorLine = ({ onAdd }) => (\n  <Column>\n    <Line justifyContent=\"flex-end\" expand>\n      <RaisedButton\n        label={<Trans>Add a behavior to the object</Trans>}\n        primary\n        onClick={onAdd}\n        icon={<Add />}\n      />\n    </Line>\n  </Column>\n);\n\nexport default class BehaviorsEditor extends Component {\n  constructor(props) {\n    super(props);\n    this.state = { newBehaviorDialogOpen: false };\n  }\n\n  componentWillMount() {\n    this._loadFrom(this.props.object);\n  }\n\n  componentWillReceiveProps(newProps) {\n    if (this.props.object !== newProps.object) {\n      this._loadFrom(newProps.object);\n    }\n  }\n\n  _loadFrom(object) {\n    if (!object) return;\n  }\n\n  chooseNewBehavior = () => {\n    this.setState({\n      newBehaviorDialogOpen: true,\n    });\n  };\n\n  _hasBehaviorWithType = type => {\n    const { object } = this.props;\n    const allBehaviorNames = object.getAllBehaviorNames().toJSArray();\n\n    return allBehaviorNames\n      .map(behaviorName => object.getBehavior(behaviorName))\n      .map(behavior => behavior.getTypeName())\n      .filter(behaviorType => behaviorType === type).length;\n  };\n\n  addBehavior = (type, defaultName) => {\n    const { object, project } = this.props;\n\n    this.setState(\n      {\n        newBehaviorDialogOpen: false,\n      },\n      () => {\n        if (this._hasBehaviorWithType(type)) {\n          const answer = Window.showConfirmDialog(\n            \"There is already a behavior of this type attached to the object. It's possible to add again this behavior but it's unusual and may not be always supported properly. Are you sure you want to add again this behavior?\"\n          );\n\n          if (!answer) return;\n        }\n\n        const name = newNameGenerator(defaultName, name =>\n          object.hasBehaviorNamed(name)\n        );\n        object.addNewBehavior(project, type, name);\n\n        this.forceUpdate();\n        if (this.props.onSizeUpdated) this.props.onSizeUpdated();\n      }\n    );\n  };\n\n  _onChangeBehaviorName = (behaviorContent, newName) => {\n    // TODO: This is disabled for now as there is no proper refactoring\n    // of events after a behavior renaming. Once refactoring is available,\n    // the text field can be enabled again and refactoring calls added here\n    // (or in a parent).\n    // Renaming a behavior is something that is really rare anyway! :)\n\n    const { object } = this.props;\n    if (object.hasBehaviorNamed(newName)) return;\n\n    object.renameBehavior(behaviorContent.getName(), newName);\n    this.forceUpdate();\n  };\n\n  _onRemoveBehavior = behaviorName => {\n    const { object } = this.props;\n    const answer = Window.showConfirmDialog(\n      \"Are you sure you want to remove this behavior? This can't be undone.\"\n    );\n\n    if (answer) {\n      object.removeBehavior(behaviorName);\n      this.forceUpdate();\n      if (this.props.onSizeUpdated) this.props.onSizeUpdated();\n    }\n  };\n\n  render() {\n    const { object, project } = this.props;\n    const allBehaviorNames = object.getAllBehaviorNames().toJSArray();\n\n    return (\n      <div>\n        {allBehaviorNames\n          .map((behaviorName, index) => {\n            const behaviorContent = object.getBehavior(behaviorName);\n            const behavior = gd.JsPlatform.get().getBehavior(\n              behaviorContent.getTypeName()\n            );\n            if (isNullPtr(gd, behavior)) {\n              return (\n                <div key={index}>\n                  <MiniToolbar>\n                    <MiniToolbarText>\n                      <Trans>Unknown behavior</Trans>{' '}\n                    </MiniToolbarText>\n                    <Column noMargin expand>\n                      <TextField value={behaviorName} disabled />\n                    </Column>\n                    <IconButton\n                      onClick={() => this._onRemoveBehavior(behaviorName)}\n                    >\n                      <Delete />\n                    </IconButton>\n                  </MiniToolbar>\n                  <EmptyMessage>\n                    <Trans>\n                      This behavior is unknown. It might be a behavior that was\n                      defined in an extension and that was later removed. You\n                      should delete it.\n                    </Trans>\n                  </EmptyMessage>\n                </div>\n              );\n            }\n\n            const BehaviorComponent = BehaviorsEditorService.getEditor(\n              behaviorContent.getTypeName()\n            );\n\n            return (\n              <div key={index}>\n                <MiniToolbar>\n                  <MiniToolbarText>\n                    <Trans>Behavior</Trans>{' '}\n                  </MiniToolbarText>\n                  <Column noMargin expand>\n                    <TextField\n                      value={behaviorName}\n                      hintText={t`Behavior name`}\n                      margin=\"none\"\n                      fullWidth\n                      disabled\n                      onChange={(e, text) =>\n                        this._onChangeBehaviorName(behaviorContent, text)\n                      }\n                    />\n                  </Column>\n                  <IconButton\n                    onClick={() => this._onRemoveBehavior(behaviorName)}\n                  >\n                    <Delete />\n                  </IconButton>\n                  <HelpIcon helpPagePath={getBehaviorHelpPagePath(behavior)} />\n                </MiniToolbar>\n                <BehaviorComponent\n                  behavior={behavior}\n                  behaviorContent={behaviorContent}\n                  project={project}\n                  resourceSources={this.props.resourceSources}\n                  onChooseResource={this.props.onChooseResource}\n                  resourceExternalEditors={this.props.resourceExternalEditors}\n                />\n              </div>\n            );\n          })\n          .concat(\n            <AddBehaviorLine\n              key=\"add-behavior-line\"\n              onAdd={this.chooseNewBehavior}\n            />\n          )}\n        {this.state.newBehaviorDialogOpen && (\n          <NewBehaviorDialog\n            open={this.state.newBehaviorDialogOpen}\n            objectType={object.getType()}\n            onClose={() => this.setState({ newBehaviorDialogOpen: false })}\n            onChoose={this.addBehavior}\n            project={project}\n          />\n        )}\n      </div>\n    );\n  }\n}\n","// @flow\nimport { Trans } from '@lingui/macro';\nimport { I18n } from '@lingui/react';\nimport { type I18n as I18nType } from '@lingui/core';\n\nimport React, { Component } from 'react';\nimport Dialog from '../UI/Dialog';\nimport HelpButton from '../UI/HelpButton';\nimport FlatButton from '../UI/FlatButton';\nimport Subheader from '../UI/Subheader';\nimport ListIcon from '../UI/ListIcon';\nimport { Tabs, Tab } from '../UI/Tabs';\nimport { List, ListItem } from '../UI/List';\nimport Visibility from '@material-ui/icons/Visibility';\nimport VisibilityOff from '@material-ui/icons/VisibilityOff';\nimport Create from '@material-ui/icons/Create';\nimport { Line } from '../UI/Grid';\nimport { showMessageBox } from '../UI/Messages/MessageBox';\nimport { getDeprecatedBehaviorsInformation } from '../Hints';\nimport { getHelpLink } from '../Utils/HelpLink';\nimport {\n  type EnumeratedBehaviorMetadata,\n  enumerateBehaviorsMetadata,\n  filterEnumeratedBehaviorMetadata,\n} from './EnumerateBehaviorsMetadata';\nimport SearchBar from '../UI/SearchBar';\nimport EmptyMessage from '../UI/EmptyMessage';\nimport ExtensionsSearch from '../ExtensionsSearch';\nimport Window from '../Utils/Window';\n\nconst styles = {\n  disabledItem: { opacity: 0.6 },\n};\n\nconst BehaviorListItem = ({\n  behaviorMetadata,\n  onClick,\n  disabled,\n}: {|\n  behaviorMetadata: EnumeratedBehaviorMetadata,\n  onClick: () => void,\n  disabled: boolean,\n|}) => (\n  <ListItem\n    leftIcon={\n      <ListIcon\n        src={behaviorMetadata.iconFilename}\n        iconSize={40}\n        isGDevelopIcon\n      />\n    }\n    key={behaviorMetadata.type}\n    primaryText={behaviorMetadata.fullName}\n    secondaryText={behaviorMetadata.description}\n    secondaryTextLines={2}\n    onClick={onClick}\n    style={disabled ? styles.disabledItem : undefined}\n    disabled={disabled}\n  />\n);\n\ntype TabName = 'installed' | 'search';\n\ntype Props = {|\n  project: gdProject,\n  objectType: string,\n  open: boolean,\n  onClose: () => void,\n  onChoose: (type: string, defaultName: string) => void,\n|};\ntype State = {|\n  behaviorMetadata: Array<EnumeratedBehaviorMetadata>,\n  showDeprecated: boolean,\n  searchText: string,\n  currentTab: TabName,\n|};\n\nexport default class NewBehaviorDialog extends Component<Props, State> {\n  state = {\n    ...this._loadFrom(this.props.project),\n    showDeprecated: false,\n    searchText: '',\n    currentTab: 'installed',\n  };\n  _searchBar = React.createRef<SearchBar>();\n\n  componentDidMount() {\n    setTimeout(() => {\n      if (this._searchBar.current) this._searchBar.current.focus();\n    }, 20 /* Be sure that the search bar is shown */);\n  }\n\n  _loadFrom(\n    project: gdProject\n  ): {| behaviorMetadata: Array<EnumeratedBehaviorMetadata> |} {\n    const platform = project.getCurrentPlatform();\n    return {\n      behaviorMetadata:\n        project && platform\n          ? enumerateBehaviorsMetadata(platform, project)\n          : [],\n    };\n  }\n\n  componentWillReceiveProps(newProps: Props) {\n    if (\n      (!this.props.open && newProps.open) ||\n      (newProps.open && this.props.project !== newProps.project)\n    ) {\n      this.setState(this._loadFrom(newProps.project));\n    }\n  }\n\n  _showDeprecated = (showDeprecated: boolean = true) => {\n    this.setState({\n      showDeprecated,\n    });\n  };\n\n  _onNewExtensionInstalled = () => {\n    // Reload behaviors\n    this.setState(this._loadFrom(this.props.project), () => {\n      this._changeTab('installed');\n    });\n  };\n\n  _changeTab = (newTab: TabName) =>\n    this.setState({\n      currentTab: newTab,\n    });\n\n  render() {\n    const { project, open, onClose, objectType } = this.props;\n    const {\n      showDeprecated,\n      behaviorMetadata,\n      searchText,\n      currentTab,\n    } = this.state;\n    if (!open || !project) return null;\n\n    const deprecatedBehaviorsInformation = getDeprecatedBehaviorsInformation();\n\n    const filteredBehaviorMetadata = filterEnumeratedBehaviorMetadata(\n      behaviorMetadata,\n      searchText\n    );\n    const behaviors = filteredBehaviorMetadata.filter(\n      ({ type }) => !deprecatedBehaviorsInformation[type]\n    );\n    const deprecatedBehaviors = filteredBehaviorMetadata.filter(\n      ({ type }) => !!deprecatedBehaviorsInformation[type]\n    );\n\n    const chooseBehavior = (\n      i18n: I18nType,\n      { type, defaultName }: EnumeratedBehaviorMetadata\n    ) => {\n      if (deprecatedBehaviorsInformation[type]) {\n        showMessageBox(i18n._(deprecatedBehaviorsInformation[type].warning));\n      }\n\n      return this.props.onChoose(type, defaultName);\n    };\n\n    const canBehaviorBeUsed = (\n      behaviorMetadata: EnumeratedBehaviorMetadata\n    ) => {\n      // An empty object type means the base object, i.e: any object.\n      return (\n        behaviorMetadata.objectType === '' ||\n        behaviorMetadata.objectType === objectType\n      );\n    };\n\n    const hasSearchNoResult =\n      !!searchText && !behaviors.length && !deprecatedBehaviors.length;\n\n    return (\n      <I18n>\n        {({ i18n }) => (\n          <Dialog\n            title={<Trans>Add a new behavior to the object</Trans>}\n            actions={[\n              <FlatButton\n                key=\"close\"\n                label={<Trans>Close</Trans>}\n                primary={false}\n                onClick={onClose}\n              />,\n            ]}\n            secondaryActions={<HelpButton helpPagePath=\"/behaviors\" />}\n            open={open}\n            cannotBeDismissed={false}\n            noMargin\n          >\n            <Tabs value={currentTab} onChange={this._changeTab}>\n              <Tab\n                label={<Trans>Installed Behaviors</Trans>}\n                value=\"installed\"\n              />\n              <Tab label={<Trans>Search New Behaviors</Trans>} value=\"search\" />\n            </Tabs>\n            {currentTab === 'installed' && (\n              <React.Fragment>\n                <SearchBar\n                  value={searchText}\n                  onRequestSearch={() => {\n                    if (behaviors.length) {\n                      chooseBehavior(i18n, behaviors[0]);\n                    } else if (showDeprecated && deprecatedBehaviors.length) {\n                      chooseBehavior(i18n, deprecatedBehaviors[0]);\n                    }\n                  }}\n                  onChange={text =>\n                    this.setState({\n                      searchText: text,\n                    })\n                  }\n                  ref={this._searchBar}\n                />\n                {hasSearchNoResult && (\n                  <EmptyMessage>\n                    <Trans>\n                      No behavior found for your search. Try another search, or\n                      search for new behaviors to install.\n                    </Trans>\n                  </EmptyMessage>\n                )}\n                <List>\n                  {behaviors.map((behaviorMetadata, index) => (\n                    <BehaviorListItem\n                      key={index}\n                      behaviorMetadata={behaviorMetadata}\n                      onClick={() => chooseBehavior(i18n, behaviorMetadata)}\n                      disabled={!canBehaviorBeUsed(behaviorMetadata)}\n                    />\n                  ))}\n                  {showDeprecated && !!deprecatedBehaviors.length && (\n                    <Subheader>\n                      Deprecated (old, prefer not to use anymore)\n                    </Subheader>\n                  )}\n                  {showDeprecated &&\n                    deprecatedBehaviors.map((behaviorMetadata, index) => (\n                      <BehaviorListItem\n                        key={index}\n                        behaviorMetadata={behaviorMetadata}\n                        onClick={() => chooseBehavior(i18n, behaviorMetadata)}\n                        disabled={!canBehaviorBeUsed(behaviorMetadata)}\n                      />\n                    ))}\n                </List>\n                <Line justifyContent=\"center\" alignItems=\"center\">\n                  {!showDeprecated ? (\n                    <FlatButton\n                      key=\"toggle-experimental\"\n                      icon={<Visibility />}\n                      primary={false}\n                      onClick={() => this._showDeprecated(true)}\n                      label={<Trans>Show deprecated (old) behaviors</Trans>}\n                    />\n                  ) : (\n                    <FlatButton\n                      key=\"toggle-experimental\"\n                      icon={<VisibilityOff />}\n                      primary={false}\n                      onClick={() => this._showDeprecated(false)}\n                      label={<Trans>Show deprecated (old) behaviors</Trans>}\n                    />\n                  )}\n                </Line>\n                <Line justifyContent=\"center\" alignItems=\"center\">\n                  <FlatButton\n                    icon={<Create />}\n                    primary={false}\n                    onClick={() =>\n                      Window.openExternalURL(\n                        getHelpLink('/behaviors/events-based-behaviors')\n                      )\n                    }\n                    label={<Trans>Create your own behavior</Trans>}\n                  />\n                </Line>\n              </React.Fragment>\n            )}\n            {currentTab === 'search' && (\n              <ExtensionsSearch\n                project={project}\n                onNewExtensionInstalled={this._onNewExtensionInstalled}\n                showOnlyWithBehaviors\n              />\n            )}\n          </Dialog>\n        )}\n      </I18n>\n    );\n  }\n}\n","/**\n * Return the help page for the given behavior\n * @param {*} behavior\n */\nexport const getBehaviorHelpPagePath = behavior => {\n  if (!behavior) return null;\n\n  switch (behavior.getTypeName()) {\n    case 'DraggableBehavior::Draggable':\n      return '/behaviors/draggable';\n    case 'PlatformBehavior::PlatformerObjectBehavior':\n      return '/behaviors/platformer';\n    case 'PlatformBehavior::PlatformBehavior':\n      return '/behaviors/platformer';\n    default:\n      return '';\n  }\n};\n","import { Trans } from '@lingui/macro';\nimport React, { Component } from 'react';\nimport FlatButton from '../UI/FlatButton';\nimport TextField from '../UI/TextField';\nimport Dialog from '../UI/Dialog';\n\nexport default class SetupGridDialog extends Component {\n  constructor(props) {\n    super(props);\n    this.state = { ...props.gridOptions };\n  }\n\n  _onApply = () => {\n    this.props.onApply({\n      gridWidth: this.state.gridWidth,\n      gridHeight: this.state.gridHeight,\n      gridOffsetX: this.state.gridOffsetX,\n      gridOffsetY: this.state.gridOffsetY,\n    });\n  };\n\n  render() {\n    const actions = [\n      <FlatButton\n        key=\"cancel\"\n        label={<Trans>Cancel</Trans>}\n        primary={false}\n        onClick={this.props.onCancel}\n      />,\n      <FlatButton\n        key=\"apply\"\n        label={<Trans>Apply</Trans>}\n        primary={true}\n        keyboardFocused={true}\n        onClick={this._onApply}\n      />,\n    ];\n\n    return (\n      <Dialog\n        actions={actions}\n        cannotBeDismissed={true}\n        open={this.props.open}\n        onRequestClose={this.props.onCancel}\n      >\n        <TextField\n          floatingLabelText={<Trans>Cell width (in pixels)</Trans>}\n          type=\"number\"\n          value={this.state.gridWidth}\n          onChange={(e, value) =>\n            this.setState({ gridWidth: parseInt(value, 10) })\n          }\n        />\n        <TextField\n          floatingLabelText={<Trans>Cell height (in pixels)</Trans>}\n          type=\"number\"\n          value={this.state.gridHeight}\n          onChange={(e, value) =>\n            this.setState({ gridHeight: parseInt(value, 10) })\n          }\n        />\n        <TextField\n          floatingLabelText={<Trans>X offset (in pixels)</Trans>}\n          type=\"number\"\n          value={this.state.gridOffsetX}\n          onChange={(e, value) =>\n            this.setState({ gridOffsetX: parseInt(value, 10) })\n          }\n        />\n        <TextField\n          floatingLabelText={<Trans>Y offset (in pixels)</Trans>}\n          type=\"number\"\n          value={this.state.gridOffsetY}\n          onChange={(e, value) =>\n            this.setState({ gridOffsetY: parseInt(value, 10) })\n          }\n        />\n      </Dialog>\n    );\n  }\n}\n","// @flow\nimport * as React from 'react';\nimport { serializeToJSObject } from '../../Utils/Serializer';\nimport { rgbToHexNumber } from '../../Utils/ColorTransformer';\n\n//TODO: try BaseEditor<Props,State>\nexport default class BaseEditor extends React.Component<*, *> {\n  static defaultProps = {\n    setToolbar: () => {},\n  };\n\n  getProject(): ?gdProject {\n    return this.props.project;\n  }\n\n  getLayout(): ?gdLayout {\n    return null;\n  }\n\n  saveUiSettings = () => {\n    // Implement in the editor, if needed.\n  };\n\n  shouldComponentUpdate(nextProps: *) {\n    // Prevent any update to the editor if the editor is not active,\n    // and so not visible to the user. For editors that do special work when isActive\n    // is set to false (for example to disable PIXI rendering), shouldComponentUpdate\n    // should be overriden with a proper implementation.\n    if (!nextProps.isActive) {\n      return false;\n    }\n\n    return true;\n  }\n\n  updateToolbar() {\n    console.warn('No toolbar defined for this editor');\n\n    if (this.props.setToolbar) this.props.setToolbar(null);\n  }\n\n  getSerializedElements() {\n    throw new Error(\n      'The editor has not implemented getSerializedElements to return what should be serialized'\n    );\n  }\n\n  static getLayoutSerializedElements(layout: ?gdLayout) {\n    if (!layout) return {};\n\n    return {\n      windowTitle: layout.getWindowDefaultTitle(),\n      layers: serializeToJSObject(layout, 'serializeLayersTo'),\n      backgroundColor:\n        '' +\n        rgbToHexNumber(\n          layout.getBackgroundColorRed(),\n          layout.getBackgroundColorGreen(),\n          layout.getBackgroundColorBlue()\n        ),\n    };\n  }\n}\n","// @flow\nimport { t } from '@lingui/macro';\nimport React, { PureComponent } from 'react';\nimport { ToolbarGroup } from '../UI/Toolbar';\nimport ToolbarSeparator from '../UI/ToolbarSeparator';\nimport ToolbarIcon from '../UI/ToolbarIcon';\nimport ElementWithMenu from '../UI/Menu/ElementWithMenu';\nimport InstancesSelection from './InstancesSelection';\nimport PreviewButtons, {\n  type PreviewButtonSettings,\n} from '../MainFrame/Toolbar/PreviewButtons.js';\n\ntype Props = {|\n  previewButtonSettings: PreviewButtonSettings,\n  showPreviewButton: boolean,\n  onPreview: () => void,\n  showNetworkPreviewButton: boolean,\n  onNetworkPreview: () => void,\n  onOpenDebugger: () => void,\n  openObjectsList: () => void,\n  openObjectGroupsList: () => void,\n  openProperties: () => void,\n  undo: () => void,\n  canUndo: boolean,\n  redo: () => void,\n  canRedo: boolean,\n  deleteSelection: () => void,\n  instancesSelection: InstancesSelection,\n  toggleInstancesList: () => void,\n  toggleLayersList: () => void,\n  isWindowMaskShown: () => boolean,\n  toggleWindowMask: () => void,\n  isGridShown: () => boolean,\n  toggleGrid: () => void,\n  openSetupGrid: () => void,\n  zoomIn: () => void,\n  zoomOut: () => void,\n  centerView: () => void,\n  setZoomFactor: number => void,\n  onOpenSettings?: ?() => void,\n|};\n\nexport class Toolbar extends PureComponent<Props> {\n  render() {\n    return (\n      <ToolbarGroup lastChild>\n        <PreviewButtons\n          showPreviewButton={this.props.showPreviewButton}\n          onPreview={this.props.onPreview}\n          previewButtonSettings={this.props.previewButtonSettings}\n          onNetworkPreview={this.props.onNetworkPreview}\n          onOpenDebugger={this.props.onOpenDebugger}\n          showNetworkPreviewButton={this.props.showNetworkPreviewButton}\n        />\n\n        {this.props.showPreviewButton && <ToolbarSeparator />}\n        <ToolbarIcon\n          onClick={this.props.openObjectsList}\n          src=\"res/ribbon_default/objects64.png\"\n          tooltip={t`Open the objects editor`}\n        />\n        <ToolbarIcon\n          onClick={this.props.openObjectGroupsList}\n          src={'res/ribbon_default/objectsgroups64.png'}\n          tooltip={t`Open the objects groups editor`}\n        />\n        <ToolbarIcon\n          onClick={this.props.openProperties}\n          src=\"res/ribbon_default/editprop32.png\"\n          tooltip={t`Open the properties panel`}\n        />\n        <ToolbarSeparator />\n        <ToolbarIcon\n          onClick={this.props.undo}\n          src=\"res/ribbon_default/undo32.png\"\n          disabled={!this.props.canUndo}\n          tooltip={t`Undo the last changes`}\n        />\n        <ToolbarIcon\n          onClick={this.props.redo}\n          src=\"res/ribbon_default/redo32.png\"\n          disabled={!this.props.canRedo}\n          tooltip={t`Redo the last changes`}\n        />\n        <ToolbarSeparator />\n        <ToolbarIcon\n          onClick={this.props.deleteSelection}\n          src=\"res/ribbon_default/deleteselected32.png\"\n          disabled={\n            !this.props.instancesSelection.getSelectedInstances().length\n          }\n          tooltip={t`Delete the selected instances from the scene`}\n        />\n        <ToolbarIcon\n          onClick={this.props.toggleInstancesList}\n          src=\"res/ribbon_default/ObjectsPositionsList32.png\"\n          tooltip={t`Open the list of instances`}\n        />\n        <ToolbarIcon\n          onClick={this.props.toggleLayersList}\n          src=\"res/ribbon_default/layers32.png\"\n          tooltip={t`Open the layers editor`}\n        />\n        <ToolbarSeparator />\n        <ElementWithMenu\n          element={\n            <ToolbarIcon\n              src=\"res/ribbon_default/grid32.png\"\n              tooltip={t`Toggle/edit grid`}\n            />\n          }\n          buildMenuTemplate={() => [\n            {\n              type: 'checkbox',\n              label: 'Show Mask',\n              checked: this.props.isWindowMaskShown(),\n              click: () => this.props.toggleWindowMask(),\n            },\n            {\n              type: 'checkbox',\n              label: 'Show grid',\n              checked: this.props.isGridShown(),\n              click: () => this.props.toggleGrid(),\n            },\n            { type: 'separator' },\n            {\n              label: 'Setup grid',\n              click: () => this.props.openSetupGrid(),\n            },\n          ]}\n        />\n        <ElementWithMenu\n          element={\n            <ToolbarIcon\n              src=\"res/ribbon_default/zoom32.png\"\n              tooltip={t`Change editor zoom`}\n            />\n          }\n          buildMenuTemplate={() => [\n            {\n              label: 'Zoom in',\n              click: this.props.zoomIn,\n              accelerator: 'CmdOrCtrl+numadd',\n            },\n            {\n              label: 'Zoom out',\n              click: this.props.zoomOut,\n              accelerator: 'CmdOrCtrl+numsub',\n            },\n            {\n              label: 'Center View',\n              click: () => this.props.centerView(),\n            },\n            { type: 'separator' },\n            { label: '5%', click: () => this.props.setZoomFactor(0.05) },\n            { label: '10%', click: () => this.props.setZoomFactor(0.1) },\n            { label: '25%', click: () => this.props.setZoomFactor(0.25) },\n            { label: '50%', click: () => this.props.setZoomFactor(0.5) },\n            { label: '100%', click: () => this.props.setZoomFactor(1.0) },\n            { label: '150%', click: () => this.props.setZoomFactor(1.5) },\n            { label: '200%', click: () => this.props.setZoomFactor(2.0) },\n            { label: '400%', click: () => this.props.setZoomFactor(4.0) },\n          ]}\n        />\n      </ToolbarGroup>\n    );\n  }\n}\n\nexport default Toolbar;\n","import React, { Component } from 'react';\nimport Measure from 'react-measure';\n\nconst styles = {\n  flexContainer: { display: 'flex', flex: 1, position: 'relative' },\n  absoluteContainer: {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    right: 0,\n    bottom: 0,\n    overflowY: 'hidden',\n  },\n};\n\n/**\n * Take a component and pass the maximum size that the component can take\n * as width and height props.\n * @param {*} WrappedComponent\n * @param {*} options\n */\nexport const passFullSize = (WrappedComponent, { useFlex }) => {\n  return class FullSizeMeasurer extends Component {\n    state = {\n      width: undefined,\n      height: undefined,\n    };\n\n    render() {\n      const { wrappedComponentRef, ...otherProps } = this.props;\n\n      return (\n        <Measure\n          onMeasure={({ width, height }) => this.setState({ width, height })}\n        >\n          <div\n            style={useFlex ? styles.flexContainer : styles.absoluteContainer}\n          >\n            {this.state.width !== undefined &&\n              this.state.height !== undefined && (\n                <WrappedComponent\n                  width={this.state.width}\n                  height={this.state.height}\n                  ref={ref => wrappedComponentRef && wrappedComponentRef(ref)}\n                  {...otherProps}\n                />\n              )}\n          </div>\n        </Measure>\n      );\n    }\n  };\n};\n","// @flow\nimport React, { Component } from 'react';\nimport Slider from '@material-ui/core/Slider';\nimport ViewPosition from './ViewPosition';\nimport throttle from 'lodash/throttle';\nimport { ScreenTypeMeasurer } from '../UI/Reponsive/ScreenTypeMeasurer';\n\nconst styles = {\n  container: {\n    overflow: 'hidden',\n  },\n  xScrollbar: {\n    position: 'absolute',\n    top: -13,\n    left: 0,\n    right: 0,\n  },\n  yScrollbar: {\n    position: 'absolute',\n    top: 0,\n    bottom: 0,\n    left: -13,\n    transform: 'rotate(180deg)',\n  },\n};\n\ntype ScrollableComponent = {\n  scrollTo: (number, number) => void,\n  getViewPosition: () => ?ViewPosition,\n};\n\ntype Props = {|\n  wrappedEditorRef: ?(?ScrollableComponent) => void,\n|};\n\ntype State = {|\n  xValue: number,\n  yValue: number,\n  xMin: number,\n  xMax: number,\n  yMin: number,\n  yMax: number,\n|};\n\nconst noop = () => {};\n\n/**\n * Add scrollbars that track the viewPosition of the wrapped component\n * @param {*} WrappedComponent\n * @param {*} options\n */\nexport const addScrollbars = (WrappedComponent: any) => {\n  return class ScrollbarContainer extends Component<Props, State> {\n    _editor: ?ScrollableComponent = null;\n\n    state: State = {\n      xValue: 0,\n      yValue: 0,\n      xMin: -5000,\n      xMax: +5000,\n      yMin: -5000,\n      yMax: +5000,\n    };\n\n    componentDidMount() {\n      if (this._editor) {\n        this._handleViewPositionChange(this._editor.getViewPosition());\n      }\n    }\n\n    _handleXChange = (e: any, value: number) => {\n      const { xMin, xMax } = this.state;\n      const xValue = xMin + ((xMax - xMin) * value) / 100;\n      this.setState(\n        {\n          xValue,\n        },\n        () => {\n          if (this._editor) {\n            this._editor.scrollTo(this.state.xValue, this.state.yValue);\n          }\n        }\n      );\n    };\n\n    _handleYChange = (e: any, value: number) => {\n      const { yMin, yMax } = this.state;\n      // Substract the value from 100 as the slider is 180deg rotated. Not perfect though\n      // as it breaks when using the keyboard arrow keys (when focusing the slider).\n      const yValue = yMin + ((yMax - yMin) * (100 - value)) / 100;\n      this.setState(\n        {\n          yValue,\n        },\n        () => {\n          if (this._editor) {\n            this._editor.scrollTo(this.state.xValue, this.state.yValue);\n          }\n        }\n      );\n    };\n\n    _setAndAdjust = ({\n      xValue,\n      yValue,\n    }: {\n      xValue: number,\n      yValue: number,\n    }) => {\n      const xMax = Math.max(Math.abs(xValue) + 100, this.state.xMax);\n      const yMax = Math.max(Math.abs(yValue) + 100, this.state.yMax);\n\n      this.setState({\n        xMax,\n        yMax,\n        xMin: -xMax,\n        yMin: -yMax,\n        xValue,\n        yValue,\n      });\n    };\n\n    _handleViewPositionChange = throttle(\n      (viewPosition: ?ViewPosition) => {\n        if (!viewPosition) return;\n\n        this._setAndAdjust({\n          xValue: viewPosition.getViewX(),\n          yValue: viewPosition.getViewY(),\n        });\n      },\n      500, // Throttle the updates after a scroll to avoid make lots of updates in a row that would kill CPU\n      { leading: false, trailing: true }\n    );\n\n    render() {\n      const { wrappedEditorRef, ...otherProps } = this.props;\n\n      return (\n        <ScreenTypeMeasurer>\n          {screenType => (\n            <div style={styles.container}>\n              <WrappedComponent\n                onViewPositionChanged={\n                  screenType !== 'touch' ? this._handleViewPositionChange : noop\n                }\n                ref={(editorRef: ?ScrollableComponent) => {\n                  wrappedEditorRef && wrappedEditorRef(editorRef);\n                  this._editor = editorRef;\n                }}\n                {...otherProps}\n              />\n              {screenType !== 'touch' && (\n                <Slider\n                  value={\n                    ((this.state.xValue - this.state.xMin) /\n                      (this.state.xMax - this.state.xMin)) *\n                    100\n                  }\n                  onChange={this._handleXChange}\n                  style={styles.xScrollbar}\n                  orientation=\"horizontal\"\n                />\n              )}\n              {screenType !== 'touch' && (\n                <Slider\n                  value={\n                    ((this.state.yValue - this.state.yMin) /\n                      (this.state.yMax - this.state.yMin)) *\n                    100\n                  }\n                  onChange={this._handleYChange}\n                  style={styles.yScrollbar}\n                  orientation=\"vertical\"\n                />\n              )}\n            </div>\n          )}\n        </ScreenTypeMeasurer>\n      );\n    }\n  };\n};\n","// @flow\nimport React, { Component } from 'react';\nimport IconButton from '../IconButton';\nimport FilterList from '@material-ui/icons/FilterList';\nimport ElementWithMenu from '../Menu/ElementWithMenu';\nimport { type MenuItemTemplate } from '../Menu/Menu.flow';\n\nconst styles = {\n  container: {\n    padding: 0,\n    width: 32,\n    height: 32,\n  },\n  icon: {\n    width: 16,\n    height: 16,\n  },\n};\n\ntype Props = {|\n  buildMenuTemplate: () => Array<MenuItemTemplate>,\n|};\n\nexport default class TagsButton extends Component<Props, {||}> {\n  render() {\n    return (\n      <ElementWithMenu\n        element={\n          <IconButton style={styles.container}>\n            <FilterList htmlColor=\"white\" style={styles.icon} />\n          </IconButton>\n        }\n        buildMenuTemplate={this.props.buildMenuTemplate}\n      />\n    );\n  }\n}\n","// @flow\nimport * as React from 'react';\nimport { AutoSizer } from 'react-virtualized';\nimport SortableVirtualizedItemList from '../UI/SortableVirtualizedItemList';\nimport Background from '../UI/Background';\nimport SearchBar from '../UI/SearchBar';\nimport { showWarningBox } from '../UI/Messages/MessageBox';\nimport { filterResourcesList } from './EnumerateResources';\nimport optionalRequire from '../Utils/OptionalRequire.js';\nimport Window from '../Utils/Window';\nimport {\n  createOrUpdateResource,\n  getLocalResourceFullPath,\n  getResourceFilePathStatus,\n  RESOURCE_EXTENSIONS,\n} from './ResourceUtils.js';\nimport { type ResourceKind } from './ResourceSource.flow';\n\nconst path = optionalRequire('path');\nconst glob = optionalRequire('glob');\nconst electron = optionalRequire('electron');\nconst hasElectron = electron ? true : false;\n\nconst gd = global.gd;\n\nconst styles = {\n  listContainer: {\n    flex: 1,\n  },\n};\n\nconst getResourceName = (resource: gdResource) => resource.getName();\n\ntype State = {|\n  renamedResource: ?gdResource,\n  searchText: string,\n  resourcesWithErrors: { [string]: '' | 'error' | 'warning' },\n|};\n\ntype Props = {|\n  project: gdProject,\n  selectedResource: ?gdResource,\n  onSelectResource: (resource: ?gdResource) => void,\n  onDeleteResource: (resource: gdResource) => void,\n  onRenameResource: (\n    resource: gdResource,\n    newName: string,\n    cb: (boolean) => void\n  ) => void,\n|};\n\nexport default class ResourcesList extends React.Component<Props, State> {\n  sortableList: any;\n  state: State = {\n    renamedResource: null,\n    searchText: '',\n    resourcesWithErrors: {},\n  };\n\n  shouldComponentUpdate(nextProps: Props, nextState: State) {\n    // The component is costly to render, so avoid any re-rendering as much\n    // as possible.\n    // We make the assumption that no changes to resources list is made outside\n    // from the component.\n    // If a change is made, the component won't notice it: you have to manually\n    // call forceUpdate.\n\n    if (\n      this.state.renamedResource !== nextState.renamedResource ||\n      this.state.searchText !== nextState.searchText\n    )\n      return true;\n\n    if (\n      this.props.project !== nextProps.project ||\n      this.props.selectedResource !== nextProps.selectedResource\n    )\n      return true;\n\n    return false;\n  }\n\n  _deleteResource = (resource: gdResource) => {\n    this.props.onDeleteResource(resource);\n  };\n\n  _locateResourceFile = (resource: gdResource) => {\n    const resourceFolderPath = path.dirname(\n      getLocalResourceFullPath(this.props.project, resource.getName())\n    );\n    electron.shell.openItem(resourceFolderPath);\n  };\n\n  _openResourceFile = (resource: gdResource) => {\n    const resourceFilePath = getLocalResourceFullPath(\n      this.props.project,\n      resource.getName()\n    );\n    electron.shell.openItem(resourceFilePath);\n  };\n\n  _copyResourceFilePath = (resource: gdResource) => {\n    const resourceFilePath = getLocalResourceFullPath(\n      this.props.project,\n      resource.getName()\n    );\n    electron.clipboard.writeText(resourceFilePath);\n  };\n\n  _scanForNewResources = (\n    extensions: string,\n    createResource: () => gdResource\n  ) => {\n    const project = this.props.project;\n    const resourcesManager = project.getResourcesManager();\n    const projectPath = path.dirname(project.getProjectFile());\n\n    const getDirectories = (src, callback) => {\n      glob(src + '/**/*.{' + extensions + '}', callback);\n    };\n    getDirectories(projectPath, (err, res) => {\n      if (err) {\n        console.error('Error loading ', err);\n      } else {\n        res.forEach(pathFound => {\n          const fileName = path.relative(projectPath, pathFound);\n          if (!resourcesManager.hasResource(fileName)) {\n            createOrUpdateResource(project, createResource(), fileName);\n            console.info(`${fileName} added to project.`);\n          }\n        });\n      }\n      this.forceUpdate();\n    });\n  };\n\n  _removeUnusedResources = (resourceType: ResourceKind) => {\n    const { project } = this.props;\n    gd.ProjectResourcesAdder.getAllUseless(project, resourceType)\n      .toJSArray()\n      .forEach(resourceName => {\n        console.info(\n          `Removing unused` + resourceType + ` resource: ${resourceName}`\n        );\n      });\n    gd.ProjectResourcesAdder.removeAllUseless(project, resourceType);\n    this.forceUpdate();\n  };\n\n  _removeAllResourcesWithInvalidPath = () => {\n    const { project } = this.props;\n    const resourcesManager = project.getResourcesManager();\n    resourcesManager\n      .getAllResourceNames()\n      .toJSArray()\n      .forEach(resourceName => {\n        if (getResourceFilePathStatus(project, resourceName) === 'error') {\n          resourcesManager.removeResource(resourceName);\n          console.info('Removed due to invalid path: ' + resourceName);\n        }\n      });\n    this.forceUpdate();\n  };\n\n  _editName = (resource: ?gdResource) => {\n    this.setState(\n      {\n        renamedResource: resource,\n      },\n      () => {\n        if (this.sortableList) this.sortableList.forceUpdateGrid();\n      }\n    );\n  };\n\n  _rename = (resource: gdResource, newName: string) => {\n    const { project } = this.props;\n    this.setState({\n      renamedResource: null,\n    });\n\n    if (resource.getName() === newName) return;\n\n    if (project.getResourcesManager().hasResource(newName)) {\n      showWarningBox('Another resource with this name already exists');\n      return;\n    }\n\n    const answer = Window.showConfirmDialog(\n      'Are you sure you want to rename this resource? \\nGame objects using the old name will no longer be able to find it!'\n    );\n    if (!answer) return;\n\n    this.props.onRenameResource(resource, newName, doRename => {\n      if (!doRename) return;\n      resource.setName(newName);\n      this.forceUpdate();\n    });\n  };\n\n  _moveSelectionTo = (destinationResource: gdResource) => {\n    const { project, selectedResource } = this.props;\n    if (!selectedResource) return;\n\n    const resourcesManager = project.getResourcesManager();\n    resourcesManager.moveResource(\n      resourcesManager.getResourcePosition(selectedResource.getName()),\n      resourcesManager.getResourcePosition(destinationResource.getName())\n    );\n    this.forceUpdateList();\n  };\n\n  forceUpdateList = () => {\n    this.forceUpdate();\n    if (this.sortableList) this.sortableList.forceUpdateGrid();\n  };\n\n  _renderResourceMenuTemplate = (resource: gdResource, _index: number) => {\n    return [\n      {\n        label: 'Rename',\n        click: () => this._editName(resource),\n      },\n      {\n        label: 'Remove',\n        click: () => this._deleteResource(resource),\n      },\n      { type: 'separator' },\n      {\n        label: 'Open File',\n        click: () => this._openResourceFile(resource),\n        enabled: hasElectron,\n      },\n      {\n        label: 'Locate File',\n        click: () => this._locateResourceFile(resource),\n        enabled: hasElectron,\n      },\n      {\n        label: 'Copy File Path',\n        click: () => this._copyResourceFilePath(resource),\n        enabled: hasElectron,\n      },\n      { type: 'separator' },\n      {\n        label: 'Scan for Images',\n        click: () => {\n          this._scanForNewResources(\n            RESOURCE_EXTENSIONS.image,\n            () => new gd.ImageResource()\n          );\n        },\n        enabled: hasElectron,\n      },\n      {\n        label: 'Scan for Audio',\n        click: () => {\n          this._scanForNewResources(\n            RESOURCE_EXTENSIONS.audio,\n            () => new gd.AudioResource()\n          );\n        },\n        enabled: hasElectron,\n      },\n      {\n        label: 'Scan for Fonts',\n        click: () => {\n          this._scanForNewResources(\n            RESOURCE_EXTENSIONS.font,\n            () => new gd.FontResource()\n          );\n        },\n        enabled: hasElectron,\n      },\n      {\n        label: 'Scan for Videos',\n        click: () => {\n          this._scanForNewResources(\n            RESOURCE_EXTENSIONS.video,\n            () => new gd.VideoResource()\n          );\n        },\n        enabled: hasElectron,\n      },\n      { type: 'separator' },\n      {\n        label: 'Remove Unused Images',\n        click: () => {\n          this._removeUnusedResources('image');\n        },\n      },\n      {\n        label: 'Remove Unused Audio',\n        click: () => {\n          this._removeUnusedResources('audio');\n        },\n      },\n      {\n        label: 'Remove Unused Fonts',\n        click: () => {\n          this._removeUnusedResources('font');\n        },\n      },\n      {\n        label: 'Remove Resources with Invalid Path',\n        click: () => {\n          this._removeAllResourcesWithInvalidPath();\n        },\n        enabled: hasElectron,\n      },\n    ];\n  };\n\n  checkMissingPaths = () => {\n    const { project } = this.props;\n    const resourcesManager = project.getResourcesManager();\n    const resourceNames = resourcesManager.getAllResourceNames().toJSArray();\n    const resourcesWithErrors = {};\n    resourceNames.forEach(resourceName => {\n      resourcesWithErrors[resourceName] = getResourceFilePathStatus(\n        project,\n        resourceName\n      );\n    });\n    this.setState({ resourcesWithErrors });\n    this.forceUpdateList();\n  };\n\n  componentDidMount() {\n    this.checkMissingPaths();\n  }\n\n  render() {\n    const { project, selectedResource, onSelectResource } = this.props;\n    const { searchText } = this.state;\n\n    const resourcesManager = project.getResourcesManager();\n    const allResourcesList = resourcesManager\n      .getAllResourceNames()\n      .toJSArray()\n      .map(resourceName => resourcesManager.getResource(resourceName));\n    const filteredList = filterResourcesList(allResourcesList, searchText);\n\n    // Force List component to be mounted again if project\n    // has been changed. Avoid accessing to invalid objects that could\n    // crash the app.\n    const listKey = project.ptr;\n\n    return (\n      <Background>\n        <div style={styles.listContainer}>\n          <AutoSizer>\n            {({ height, width }) => (\n              <SortableVirtualizedItemList\n                key={listKey}\n                ref={sortableList => (this.sortableList = sortableList)}\n                fullList={filteredList}\n                width={width}\n                height={height}\n                getItemName={getResourceName}\n                selectedItems={selectedResource ? [selectedResource] : []}\n                onItemSelected={onSelectResource}\n                renamedItem={this.state.renamedResource}\n                onRename={this._rename}\n                onMoveSelectionToItem={this._moveSelectionTo}\n                buildMenuTemplate={this._renderResourceMenuTemplate}\n                erroredItems={this.state.resourcesWithErrors}\n                reactDndType=\"GD_RESOURCE\"\n              />\n            )}\n          </AutoSizer>\n        </div>\n        <SearchBar\n          value={searchText}\n          onRequestSearch={() => {}}\n          onChange={text =>\n            this.setState({\n              searchText: text,\n            })\n          }\n        />\n      </Background>\n    );\n  }\n}\n","// @flow\n\nexport const filterResourcesList = (\n  list: Array<gdResource>,\n  searchText: string\n): Array<gdResource> => {\n  if (!searchText) return list;\n\n  const lowercaseSearchText = searchText.toLowerCase();\n\n  return list.filter((resource: gdResource) => {\n    return (\n      resource\n        .getName()\n        .toLowerCase()\n        .indexOf(lowercaseSearchText) !== -1\n    );\n  });\n};\n","// @flow\nimport { Trans } from '@lingui/macro';\n\nimport * as React from 'react';\nimport ReactErrorBoundary from 'react-error-boundary';\nimport BugReport from '@material-ui/icons/BugReport';\nimport PlaceholderMessage from './PlaceholderMessage';\nimport Divider from '@material-ui/core/Divider';\nimport RaisedButton from './RaisedButton';\nimport { sendErrorMessage } from '../Utils/Analytics/EventSender';\nimport Window from '../Utils/Window';\nimport Text from './Text';\nimport { Line, Spacer } from './Grid';\nimport { getIDEVersionWithHash } from '../Version';\nimport {\n  getArch,\n  getPlatformName,\n  getSystemVersion,\n  getUserAgent,\n} from '../Utils/Platform';\n\nconst errorHandler = (error: Error, componentStack: string) => {\n  console.error('Error catched by Boundary:', error, componentStack);\n  sendErrorMessage('Error catched by error boundary', 'error-boundary', {\n    error,\n    componentStack,\n  });\n};\n\nexport const ErrorFallbackComponent = ({\n  componentStack,\n  error,\n}: {\n  componentStack: string,\n  error: Error,\n}) => (\n  <PlaceholderMessage>\n    <Line>\n      <BugReport fontSize=\"large\" />\n      <Spacer />\n      <Text size=\"title\">This editor encountered a problem.</Text>\n    </Line>\n    <Divider />\n    <Text>\n      Something wrong happened :(\n      <br />\n      Please <b>backup your game file</b> and save your game to ensure that you\n      don't lose anything.\n    </Text>\n    <Text>\n      The error was automatically reported.\n      <br />\n      To make sure it's fixed, you may report it on GitHub, the platform where\n      GDevelop is developed:\n    </Text>\n    <RaisedButton\n      label={<Trans>Report the issue on GitHub</Trans>}\n      onClick={() => {\n        const body = `\n=> Please write here a short description of when the error occured and how to reproduce it.\nYou also may have to create an account on GitHub before posting.\n\nWhen you're ready, click on \"Submit new issue\". Don't change the rest of the message. Thanks!\n\n## Error stack (don't write anything here)\n\\`\\`\\`\n${error ? error.stack : 'No error found'}\n\\`\\`\\`\n\n## Component stack (don't write anything here)\n\\`\\`\\`\n${componentStack || 'No component stack found'}\n\\`\\`\\`\n\n## Other details\n* IDE version: ${getIDEVersionWithHash()}\n* Arch: ${getArch()},\n* Platform Name: ${getPlatformName()},\n* System Version: ${getSystemVersion()},\n* User Agent: ${getUserAgent()},\n        `;\n        Window.openExternalURL(\n          `https://github.com/4ian/GDevelop/issues/new?body=${encodeURIComponent(\n            body\n          )}&title=Crash%20while%20using%20an%20editor`\n        );\n      }}\n    />\n  </PlaceholderMessage>\n);\n\ntype Props = {|\n  children: React.Node,\n|};\n\nconst ErrorBoundary = (props: Props) => (\n  <ReactErrorBoundary\n    FallbackComponent={ErrorFallbackComponent}\n    onError={errorHandler}\n  >\n    {props.children}\n  </ReactErrorBoundary>\n);\n\nexport default ErrorBoundary;\n","// @flow\nimport { Trans } from '@lingui/macro';\n\nimport React, { Component } from 'react';\nimport SelectField from '../../UI/SelectField';\nimport FlatButton from '../../UI/FlatButton';\nimport SelectOption from '../../UI/SelectOption';\nimport Dialog from '../../UI/Dialog';\nimport { Column, Line } from '../../UI/Grid';\nimport Window from '../../Utils/Window';\nimport PreferencesContext from './PreferencesContext';\nimport AlertMessage from '../../UI/AlertMessage';\nimport LocalesMetadata from '../../locales/LocalesMetadata';\nimport { I18n } from '@lingui/react';\nimport Divider from '@material-ui/core/Divider';\n\ntype Props = {|\n  open: boolean,\n  onClose: (languageDidChange: boolean) => void,\n|};\n\ntype State = {|\n  languageDidChange: boolean,\n|};\n\nconst displayLocaleMetadata = localeMetadata => {\n  if (localeMetadata.languageCode === 'en') return false;\n  if (localeMetadata.languageCode === 'pseudo_LOCALE') return Window.isDev();\n\n  return true;\n};\n\nconst renderLanguageSelectOption = localeMetadata => {\n  const translationRatio = localeMetadata.translationRatio || 0;\n  const percent = (100 * localeMetadata.translationRatio).toFixed(0);\n  const isStarted = translationRatio > 0;\n\n  return (\n    <SelectOption\n      value={localeMetadata.languageCode}\n      primaryText={\n        localeMetadata.languageNativeName +\n        ' (' +\n        localeMetadata.languageName +\n        ')' +\n        (isStarted ? ` - ~${percent}%` : '')\n      }\n      disabled={!isStarted}\n      key={localeMetadata.languageCode}\n    />\n  );\n};\n\nexport default class LanguageDialog extends Component<Props, State> {\n  state = {\n    languageDidChange: false,\n  };\n\n  render() {\n    const { open, onClose } = this.props;\n    if (!open) return null;\n\n    const localesToDisplay = LocalesMetadata.filter(displayLocaleMetadata);\n    const goodProgressLocales = localesToDisplay.filter(\n      localeMetadata => localeMetadata.translationRatio > 0.5\n    );\n    const startedLocales = localesToDisplay.filter(\n      localeMetadata => localeMetadata.translationRatio < 0.5\n    );\n\n    return (\n      <I18n>\n        {({ i18n }) => (\n          <PreferencesContext.Consumer>\n            {({ values, setLanguage }) => {\n              const isLoadingLanguage = i18n.language !== values.language;\n\n              return (\n                <Dialog\n                  actions={[\n                    <FlatButton\n                      label={\n                        isLoadingLanguage ? (\n                          <Trans>Loading...</Trans>\n                        ) : (\n                          <Trans>Close</Trans>\n                        )\n                      }\n                      primary={false}\n                      onClick={() => {\n                        onClose(this.state.languageDidChange);\n                      }}\n                      disabled={isLoadingLanguage}\n                      key=\"close\"\n                    />,\n                  ]}\n                  secondaryActions={[\n                    <FlatButton\n                      label={<Trans>Report a wrong translation</Trans>}\n                      key=\"report-wrong-translation\"\n                      primary={false}\n                      onClick={() =>\n                        Window.openExternalURL(\n                          'https://github.com/4ian/GDevelop/issues/969'\n                        )\n                      }\n                    />,\n                  ]}\n                  onRequestClose={() => onClose(this.state.languageDidChange)}\n                  cannotBeDismissed={false}\n                  open={open}\n                  title={<Trans>Language</Trans>}\n                >\n                  <Column>\n                    <Line>\n                      <AlertMessage kind=\"info\">\n                        <Trans>\n                          Support for translations is still new and in beta.\n                          GDevelop needs your help to be translated in your\n                          language!\n                        </Trans>\n                      </AlertMessage>\n                    </Line>\n                    <Line expand>\n                      <SelectField\n                        floatingLabelText={\n                          <Trans>Choose GDevelop language</Trans>\n                        }\n                        value={values.language}\n                        onChange={(e, i, value: string) => {\n                          setLanguage(value);\n                          this.setState({\n                            languageDidChange: true,\n                          });\n                        }}\n                        fullWidth\n                      >\n                        <SelectOption\n                          value=\"en\"\n                          primaryText=\"English (default)\"\n                        />\n                        {goodProgressLocales.map(localeMetadata =>\n                          renderLanguageSelectOption(localeMetadata)\n                        )}\n                        <Divider />\n                        {startedLocales.map(localeMetadata =>\n                          renderLanguageSelectOption(localeMetadata)\n                        )}\n                      </SelectField>\n                    </Line>\n                    <Line expand>\n                      <FlatButton\n                        primary\n                        label={\n                          <Trans>Help to translate GD in your language</Trans>\n                        }\n                        onClick={() =>\n                          Window.openExternalURL(\n                            'https://crowdin.com/project/gdevelop'\n                          )\n                        }\n                        fullWidth\n                      />\n                    </Line>\n                  </Column>\n                </Dialog>\n              );\n            }}\n          </PreferencesContext.Consumer>\n        )}\n      </I18n>\n    );\n  }\n}\n","// This file is generated by compile-translations.js script\n// prettier-ignore\nmodule.exports = [\n  {\n    \"languageCode\": \"af_ZA\",\n    \"languageName\": \"Afrikaans\",\n    \"languageNativeName\": \"Afrikaans\",\n    \"translationRatio\": 0.008382969335980595\n  },\n  {\n    \"languageCode\": \"ar_SA\",\n    \"languageName\": \"Arabic\",\n    \"languageNativeName\": \"اللغة العربية\",\n    \"translationRatio\": 0.14295168762409005\n  },\n  {\n    \"languageCode\": \"az_AZ\",\n    \"languageName\": \"Azerbaijani\",\n    \"languageNativeName\": \"azərbaycan dili\",\n    \"translationRatio\": 0.022060445621001512\n  },\n  {\n    \"languageCode\": \"bg_BG\",\n    \"languageName\": \"Bulgarian\",\n    \"languageNativeName\": \"български език\",\n    \"translationRatio\": 0.06838738142510481\n  },\n  {\n    \"languageCode\": \"bn_BD\",\n    \"languageName\": \"Bengali\",\n    \"languageNativeName\": \"বাংলা\",\n    \"translationRatio\": 0.03684094418707262\n  },\n  {\n    \"languageCode\": \"ca_ES\",\n    \"languageName\": \"Catalan\",\n    \"languageNativeName\": \"català\",\n    \"translationRatio\": 0.09927200529450697\n  },\n  {\n    \"languageCode\": \"cs_CZ\",\n    \"languageName\": \"Czech\",\n    \"languageNativeName\": \"čeština\",\n    \"translationRatio\": 0.13677476285020962\n  },\n  {\n    \"languageCode\": \"da_DK\",\n    \"languageName\": \"Danish\",\n    \"languageNativeName\": \"dansk\",\n    \"translationRatio\": 0.03154643723803219\n  },\n  {\n    \"languageCode\": \"de_DE\",\n    \"languageName\": \"German\",\n    \"languageNativeName\": \"Deutsch\",\n    \"translationRatio\": 0.842709022722259\n  },\n  {\n    \"languageCode\": \"el_GR\",\n    \"languageName\": \"Greek\",\n    \"languageNativeName\": \"Ελληνικά\",\n    \"translationRatio\": 0.2230311052283256\n  },\n  {\n    \"languageCode\": \"en\",\n    \"languageName\": \"English\",\n    \"languageNativeName\": \"English\",\n    \"translationRatio\": 0.03756345177664977\n  },\n  {\n    \"languageCode\": \"eo_UY\",\n    \"languageName\": \"Esperanto\",\n    \"languageNativeName\": \"Esperanto\",\n    \"translationRatio\": 0.00992720052945073\n  },\n  {\n    \"languageCode\": \"es_ES\",\n    \"languageName\": \"Spanish\",\n    \"languageNativeName\": \"Español\",\n    \"translationRatio\": 0.9680123538495478\n  },\n  {\n    \"languageCode\": \"fa_IR\",\n    \"languageName\": \"Persian\",\n    \"languageNativeName\": \"فارسی\",\n    \"translationRatio\": 0.2422236929185969\n  },\n  {\n    \"languageCode\": \"fi_FI\",\n    \"languageName\": \"Finnish\",\n    \"languageNativeName\": \"suomi\",\n    \"translationRatio\": 0.33267151996470323\n  },\n  {\n    \"languageCode\": \"fil_PH\",\n    \"languageName\": \"Filipino\",\n    \"languageNativeName\": \"Mga Filipino\",\n    \"translationRatio\": 0.6337966026913744\n  },\n  {\n    \"languageCode\": \"fr_FR\",\n    \"languageName\": \"French\",\n    \"languageNativeName\": \"Français\",\n    \"translationRatio\": 0.9598499889697771\n  },\n  {\n    \"languageCode\": \"ha_HG\",\n    \"languageName\": \"Hausa\",\n    \"languageNativeName\": \"هَوُسَ\",\n    \"translationRatio\": 0.017427752040591216\n  },\n  {\n    \"languageCode\": \"he_IL\",\n    \"languageName\": \"Hebrew\",\n    \"languageNativeName\": \"עברית\",\n    \"translationRatio\": 0.015662916390911108\n  },\n  {\n    \"languageCode\": \"hi_IN\",\n    \"languageName\": \"Hindi\",\n    \"languageNativeName\": \"हिन्दी\",\n    \"translationRatio\": 0.042356055592322917\n  },\n  {\n    \"languageCode\": \"hu_HU\",\n    \"languageName\": \"Hungarian\",\n    \"languageNativeName\": \"magyar\",\n    \"translationRatio\": 0.13545113611294946\n  },\n  {\n    \"languageCode\": \"id_ID\",\n    \"languageName\": \"Indonesian\",\n    \"languageNativeName\": \"Bahasa Indonesia\",\n    \"translationRatio\": 0.4687844694462828\n  },\n  {\n    \"languageCode\": \"it_IT\",\n    \"languageName\": \"Italian\",\n    \"languageNativeName\": \"Italiano\",\n    \"translationRatio\": 0.9618354290756673\n  },\n  {\n    \"languageCode\": \"ja_JP\",\n    \"languageName\": \"Japanese\",\n    \"languageNativeName\": \"日本語\",\n    \"translationRatio\": 0.6540922126626958\n  },\n  {\n    \"languageCode\": \"ko_KR\",\n    \"languageName\": \"Korean\",\n    \"languageNativeName\": \"한국어\",\n    \"translationRatio\": 0.2274431943525259\n  },\n  {\n    \"languageCode\": \"lt_LT\",\n    \"languageName\": \"Lithuanian\",\n    \"languageNativeName\": \"lietuvių kalba\",\n    \"translationRatio\": 0.029340392675932025\n  },\n  {\n    \"languageCode\": \"lv_LV\",\n    \"languageName\": \"Latvian\",\n    \"languageNativeName\": \"latviešu valoda\",\n    \"translationRatio\": 0.008162364879770623\n  },\n  {\n    \"languageCode\": \"mr_IN\",\n    \"languageName\": \"Marathi\",\n    \"languageNativeName\": \"मराठी\",\n    \"translationRatio\": 0.00882417824840065\n  },\n  {\n    \"languageCode\": \"ms_MY\",\n    \"languageName\": \"Malay\",\n    \"languageNativeName\": \"Bahasa Malaysia\",\n    \"translationRatio\": 0.0536068828590337\n  },\n  {\n    \"languageCode\": \"my_MM\",\n    \"languageName\": \"Burmese\",\n    \"languageNativeName\": \"ဗမာစာ\",\n    \"translationRatio\": 0.00882417824840065\n  },\n  {\n    \"languageCode\": \"nl_NL\",\n    \"languageName\": \"Dutch\",\n    \"languageNativeName\": \"Nederlands\",\n    \"translationRatio\": 0.3988528568277079\n  },\n  {\n    \"languageCode\": \"no_NO\",\n    \"languageName\": \"Norwegian\",\n    \"languageNativeName\": \"Norsk\",\n    \"translationRatio\": 0.20692697992499454\n  },\n  {\n    \"languageCode\": \"pl_PL\",\n    \"languageName\": \"Polish\",\n    \"languageNativeName\": \"język polski\",\n    \"translationRatio\": 0.6307081403044341\n  },\n  {\n    \"languageCode\": \"pseudo_LOCALE\",\n    \"languageName\": \"for development only\",\n    \"languageNativeName\": \"Pseudolocalization\",\n    \"translationRatio\": 0.9959390862944163\n  },\n  {\n    \"languageCode\": \"pt_BR\",\n    \"languageName\": \"Brazilian Portuguese\",\n    \"languageNativeName\": \"Português brasileiro\",\n    \"translationRatio\": 0.33708360908890356\n  },\n  {\n    \"languageCode\": \"pt_PT\",\n    \"languageName\": \"Portuguese\",\n    \"languageNativeName\": \"Português\",\n    \"translationRatio\": 0.6525479814692257\n  },\n  {\n    \"languageCode\": \"ro_RO\",\n    \"languageName\": \"Romanian\",\n    \"languageNativeName\": \"Română\",\n    \"translationRatio\": 0.06419589675711446\n  },\n  {\n    \"languageCode\": \"ru_RU\",\n    \"languageName\": \"Russian\",\n    \"languageNativeName\": \"Русский\",\n    \"translationRatio\": 0.971321420692698\n  },\n  {\n    \"languageCode\": \"sk_SK\",\n    \"languageName\": \"Slovak\",\n    \"languageNativeName\": \"slovenčina\",\n    \"translationRatio\": 0.01786896095301127\n  },\n  {\n    \"languageCode\": \"sl_SI\",\n    \"languageName\": \"Slovene\",\n    \"languageNativeName\": \"slovenski jezik\",\n    \"translationRatio\": 0.9724244429737481\n  },\n  {\n    \"languageCode\": \"sr_CS\",\n    \"languageName\": \"Serbian (Latin)\",\n    \"languageNativeName\": \"srpski\",\n    \"translationRatio\": 0.35583498786675494\n  },\n  {\n    \"languageCode\": \"sr_SP\",\n    \"languageName\": \"Serbian\",\n    \"languageNativeName\": \"српски језик\",\n    \"translationRatio\": 0.7447606441650121\n  },\n  {\n    \"languageCode\": \"sv_SE\",\n    \"languageName\": \"Swedish\",\n    \"languageNativeName\": \"svenska\",\n    \"translationRatio\": 0.16479152878888148\n  },\n  {\n    \"languageCode\": \"th_TH\",\n    \"languageName\": \"Thai\",\n    \"languageNativeName\": \"ไทย\",\n    \"translationRatio\": 0.0527244650341937\n  },\n  {\n    \"languageCode\": \"tr_TR\",\n    \"languageName\": \"Turkish\",\n    \"languageNativeName\": \"Türkçe\",\n    \"translationRatio\": 0.4979042576660049\n  },\n  {\n    \"languageCode\": \"uk_UA\",\n    \"languageName\": \"Ukrainian\",\n    \"languageNativeName\": \"Українська\",\n    \"translationRatio\": 0.972645047429958\n  },\n  {\n    \"languageCode\": \"ur_PK\",\n    \"languageName\": \"Urdu\",\n    \"languageNativeName\": \"اردو\",\n    \"translationRatio\": 0.019192587690271323\n  },\n  {\n    \"languageCode\": \"uz_UZ\",\n    \"languageName\": \"Uzbek\",\n    \"languageNativeName\": \"Ўзбек\",\n    \"translationRatio\": 0.008162364879770623\n  },\n  {\n    \"languageCode\": \"yo_NG\",\n    \"languageName\": \"Yoruba\",\n    \"languageNativeName\": \"Yorùbá\",\n    \"translationRatio\": 0.7030664019413192\n  },\n  {\n    \"languageCode\": \"zh_CN\",\n    \"languageName\": \"Chinese Simplified\",\n    \"languageNativeName\": \"简化字\",\n    \"translationRatio\": 0.685859254356938\n  },\n  {\n    \"languageCode\": \"zh_TW\",\n    \"languageName\": \"Chinese Traditional\",\n    \"languageNativeName\": \"正體字\",\n    \"translationRatio\": 0.21045665122435475\n  }\n];\n","// @flow\nimport { Trans } from '@lingui/macro';\nimport { I18n } from '@lingui/react';\nimport * as React from 'react';\nimport Dialog from '../UI/Dialog';\nimport FlatButton from '../UI/FlatButton';\nimport { type StorageProvider } from '.';\nimport { List, ListItem } from '../UI/List';\nimport RaisedButton from '../UI/RaisedButton';\nimport optionalRequire from '../Utils/OptionalRequire';\nimport BackgroundText from '../UI/BackgroundText';\nimport { Column, Line } from '../UI/Grid';\nconst electron = optionalRequire('electron');\n\ntype Props = {|\n  storageProviders: Array<StorageProvider>,\n  onChooseProvider: StorageProvider => void,\n  onClose: () => void,\n  onCreateNewProject: () => void,\n|};\n\nexport default ({\n  onClose,\n  storageProviders,\n  onChooseProvider,\n  onCreateNewProject,\n}: Props) => {\n  return (\n    <I18n>\n      {({ i18n }) => (\n        <Dialog\n          title={<Trans>Choose where to load the project from</Trans>}\n          onRequestClose={onClose}\n          actions={[\n            <FlatButton\n              label={<Trans>Cancel</Trans>}\n              key=\"close\"\n              primary={false}\n              onClick={onClose}\n            />,\n          ]}\n          secondaryActions={[\n            <RaisedButton\n              label={<Trans>Create a new project</Trans>}\n              key=\"create-new-project\"\n              primary\n              onClick={onCreateNewProject}\n            />,\n          ]}\n          cannotBeDismissed={false}\n          open\n          noMargin\n          maxWidth=\"sm\"\n        >\n          <List>\n            {storageProviders\n              .filter(storageProvider => !storageProvider.hiddenInOpenDialog)\n              .map(storageProvider => (\n                <ListItem\n                  key={storageProvider.internalName}\n                  disabled={!!storageProvider.disabled}\n                  primaryText={i18n._(storageProvider.name)}\n                  leftIcon={\n                    storageProvider.renderIcon\n                      ? storageProvider.renderIcon()\n                      : undefined\n                  }\n                  onClick={() => onChooseProvider(storageProvider)}\n                />\n              ))}\n          </List>\n          {!electron && (\n            <Line>\n              <Column>\n                <BackgroundText>\n                  <Trans>\n                    If you have a popup blocker interrupting the opening, allow\n                    the popups and try a second time to open the project.\n                  </Trans>\n                </BackgroundText>\n              </Column>\n            </Line>\n          )}\n        </Dialog>\n      )}\n    </I18n>\n  );\n};\n","// @flow\nimport { Trans } from '@lingui/macro';\nimport { I18n } from '@lingui/react';\nimport * as React from 'react';\nimport Dialog from '../UI/Dialog';\nimport FlatButton from '../UI/FlatButton';\nimport { type StorageProvider } from '.';\nimport { List, ListItem } from '../UI/List';\n\ntype Props = {|\n  storageProviders: Array<StorageProvider>,\n  onChooseProvider: StorageProvider => void,\n  onClose: () => void,\n|};\n\nexport default ({ onClose, storageProviders, onChooseProvider }: Props) => {\n  return (\n    <I18n>\n      {({ i18n }) => (\n        <Dialog\n          title={<Trans>Choose where to save the project to</Trans>}\n          onRequestClose={onClose}\n          actions={[\n            <FlatButton\n              label={<Trans>Cancel</Trans>}\n              key=\"close\"\n              primary={false}\n              onClick={onClose}\n            />,\n          ]}\n          cannotBeDismissed={true}\n          open\n          noMargin\n          maxWidth=\"sm\"\n        >\n          <List>\n            {storageProviders\n              .filter(storageProvider => !storageProvider.hiddenInSaveDialog)\n              .map(storageProvider => (\n                <ListItem\n                  key={storageProvider.internalName}\n                  disabled={!!storageProvider.disabled}\n                  primaryText={i18n._(storageProvider.name)}\n                  leftIcon={\n                    storageProvider.renderIcon\n                      ? storageProvider.renderIcon()\n                      : undefined\n                  }\n                  onClick={() => onChooseProvider(storageProvider)}\n                />\n              ))}\n          </List>\n        </Dialog>\n      )}\n    </I18n>\n  );\n};\n","// @flow\nimport { Trans } from '@lingui/macro';\nimport * as React from 'react';\nimport Dialog from '../UI/Dialog';\nimport FlatButton from '../UI/FlatButton';\nimport RaisedButton from '../UI/RaisedButton';\nimport BackgroundText from '../UI/BackgroundText';\nimport { Column, Line } from '../UI/Grid';\nimport Text from '../UI/Text';\n\ntype Props = {|\n  onClose: () => void,\n  onConfirm: () => void,\n|};\n\nexport default ({ onClose, onConfirm }: Props) => {\n  return (\n    <Dialog\n      title={<Trans>Confirm the opening</Trans>}\n      actions={[\n        <FlatButton\n          label={<Trans>Cancel</Trans>}\n          key=\"close\"\n          primary={false}\n          onClick={onClose}\n        />,\n        <RaisedButton\n          label={<Trans>Open the project</Trans>}\n          key=\"open-project\"\n          primary\n          onClick={onConfirm}\n        />,\n      ]}\n      cannotBeDismissed={false}\n      open\n      maxWidth=\"sm\"\n    >\n      <Line>\n        <Column>\n          <Text>\n            <Trans>\n              You're about to open a project. Click on \"Open the Project\" to\n              continue.\n            </Trans>\n          </Text>\n        </Column>\n      </Line>\n      <Line>\n        <Column>\n          <BackgroundText>\n            <Trans>\n              If you have a popup blocker interrupting the opening, allow the\n              popups and try a second time to open the project.\n            </Trans>\n          </BackgroundText>\n        </Column>\n      </Line>\n    </Dialog>\n  );\n};\n","// @flow\nimport { showErrorBox } from '../UI/Messages/MessageBox';\nimport { t } from '@lingui/macro';\nimport { type I18n as I18nType } from '@lingui/core';\n\nexport default function verifyProjectContent(\n  i18n: I18nType,\n  content: Object\n): boolean {\n  if (!content.gdVersion && content.eventsFunctions) {\n    showErrorBox(\n      [\n        i18n._(t`Unable to open this file.`),\n        i18n._(\n          t`This file is an extension file for GDevelop 5. You should instead import it, using the window to add a new extension to your project.`\n        ),\n      ].join('\\n')\n    );\n    return false;\n  }\n\n  if (!content.gdVersion && !content.eventsFunctions) {\n    showErrorBox(\n      [\n        i18n._(t`Unable to open this file.`),\n        i18n._(\n          t`This file is not recognized as a GDevelop 5 project. Be sure to open a file that was saved using GDevelop.`\n        ),\n      ].join('\\n')\n    );\n    return false;\n  }\n  return true;\n}\n","// @flow\nimport React, { Component } from 'react';\nimport { mapVector } from '../Utils/MapFor';\nimport TextField from '../UI/TextField';\nimport SearchbarWithChips from '../UI/SearchbarWithChips';\nconst gd = global.gd;\n\ntype Props = {|\n  value: string,\n  onChange: string => void,\n  chosenExtensionName: string,\n  onExtensionNameChosen: string => void,\n|};\n\nexport default class ExamplesSearchbar extends Component<Props> {\n  _chips: Array<{| text: string, value: string |}> = [];\n  _textField: ?TextField;\n\n  constructor(props: Props) {\n    super(props);\n\n    const extensions = gd.JsPlatform.get().getAllPlatformExtensions();\n    this._chips = mapVector(extensions, extension => {\n      if (\n        extension.isBuiltin() ||\n        extension.getFullName().indexOf('(deprecated)') !== -1\n      )\n        return null;\n\n      return {\n        text: extension.getFullName(),\n        value: extension.getName(),\n      };\n    }).filter(Boolean);\n  }\n\n  render() {\n    const {\n      chosenExtensionName,\n      onExtensionNameChosen,\n      value,\n      onChange,\n    } = this.props;\n    return (\n      <SearchbarWithChips\n        value={value}\n        onChange={onChange}\n        chips={this._chips}\n        chosenChip={chosenExtensionName}\n        onChooseChip={onExtensionNameChosen}\n        onRequestSearch={() => {}}\n      />\n    );\n  }\n}\n","// @flow\nimport * as React from 'react';\nimport { I18nProvider } from '@lingui/react';\nimport { setupI18n } from '@lingui/core';\nimport { getTranslationFunction } from './getTranslationFunction';\nimport { type I18n as I18nType } from '@lingui/core';\nconst gd = global.gd;\n\ntype Catalog = any;\ntype Catalogs = {\n  [string]: Catalog,\n};\n\ntype Props = {|\n  language: string,\n  children: React.Node,\n|};\n\ntype State = {\n  language: string,\n  i18n: ?I18nType,\n  catalogs: Catalogs,\n};\n\nexport default class GDI18nProvider extends React.Component<Props, State> {\n  state = {\n    language: 'en',\n    catalogs: {},\n    i18n: null,\n  };\n\n  componentDidMount() {\n    this._loadLanguage(this.props.language);\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    if (prevProps.language !== this.props.language) {\n      this._loadLanguage(this.props.language);\n    }\n  }\n\n  _loadCatalog = (language: string): Promise<Catalogs> => {\n    if (this.state.catalogs[language]) {\n      return Promise.resolve(this.state.catalogs);\n    }\n\n    return import(/* webpackMode: \"lazy\", webpackChunkName: \"locales-[request]\" */\n    `../../locales/${language}/messages`).then(\n      catalog => {\n        return { ...this.state.catalogs, [language]: catalog };\n      },\n      (error: Error) => {\n        console.error('Error while loading language=' + language, error);\n        return this.state.catalogs;\n      }\n    );\n  };\n\n  _loadLanguage(language: string) {\n    this._loadCatalog(language).then(catalogs => {\n      this.setState(\n        {\n          language,\n          catalogs,\n          i18n: setupI18n({\n            language: language,\n            catalogs,\n          }),\n        },\n        () => {\n          const { i18n } = this.state;\n          gd.getTranslation = getTranslationFunction(i18n);\n          console.info(`Loaded \"${language}\" language`);\n        }\n      );\n    });\n  }\n\n  render() {\n    // Use language from the state, as it is synchronized with the catalogs,\n    // while the language from props is the \"target language\", and sometime\n    // can be a language for which the catalog is not loaded yet (which would\n    // create warning and a \"flash\" effect when changing language).\n    const { i18n, catalogs, language } = this.state;\n    const { children } = this.props;\n\n    if (!i18n) return null; // Skip rendering when catalog isn't loaded.\n\n    return (\n      <I18nProvider i18n={i18n} language={language} catalogs={catalogs}>\n        {children}\n      </I18nProvider>\n    );\n  }\n}\n","var map = {\n\t\"./af_ZA/messages\": [\n\t\t2241,\n\t\t5\n\t],\n\t\"./ar_SA/messages\": [\n\t\t2242,\n\t\t6\n\t],\n\t\"./az_AZ/messages\": [\n\t\t2243,\n\t\t7\n\t],\n\t\"./bg_BG/messages\": [\n\t\t2244,\n\t\t8\n\t],\n\t\"./bn_BD/messages\": [\n\t\t2245,\n\t\t9\n\t],\n\t\"./ca_ES/messages\": [\n\t\t2246,\n\t\t10\n\t],\n\t\"./cs_CZ/messages\": [\n\t\t2247,\n\t\t11\n\t],\n\t\"./da_DK/messages\": [\n\t\t2248,\n\t\t12\n\t],\n\t\"./de_DE/messages\": [\n\t\t2249,\n\t\t13\n\t],\n\t\"./el_GR/messages\": [\n\t\t2250,\n\t\t14\n\t],\n\t\"./en/messages\": [\n\t\t2251,\n\t\t15\n\t],\n\t\"./eo_UY/messages\": [\n\t\t2252,\n\t\t16\n\t],\n\t\"./es_ES/messages\": [\n\t\t2253,\n\t\t17\n\t],\n\t\"./fa_IR/messages\": [\n\t\t2254,\n\t\t18\n\t],\n\t\"./fi_FI/messages\": [\n\t\t2255,\n\t\t19\n\t],\n\t\"./fil_PH/messages\": [\n\t\t2256,\n\t\t20\n\t],\n\t\"./fr_FR/messages\": [\n\t\t2257,\n\t\t21\n\t],\n\t\"./ha_HG/messages\": [\n\t\t2258,\n\t\t22\n\t],\n\t\"./he_IL/messages\": [\n\t\t2259,\n\t\t23\n\t],\n\t\"./hi_IN/messages\": [\n\t\t2260,\n\t\t24\n\t],\n\t\"./hu_HU/messages\": [\n\t\t2261,\n\t\t25\n\t],\n\t\"./id_ID/messages\": [\n\t\t2262,\n\t\t26\n\t],\n\t\"./it_IT/messages\": [\n\t\t2263,\n\t\t27\n\t],\n\t\"./ja_JP/messages\": [\n\t\t2264,\n\t\t28\n\t],\n\t\"./ko_KR/messages\": [\n\t\t2265,\n\t\t29\n\t],\n\t\"./lt_LT/messages\": [\n\t\t2266,\n\t\t30\n\t],\n\t\"./lv_LV/messages\": [\n\t\t2267,\n\t\t31\n\t],\n\t\"./mr_IN/messages\": [\n\t\t2268,\n\t\t32\n\t],\n\t\"./ms_MY/messages\": [\n\t\t2269,\n\t\t33\n\t],\n\t\"./my_MM/messages\": [\n\t\t2270,\n\t\t34\n\t],\n\t\"./nl_NL/messages\": [\n\t\t2271,\n\t\t35\n\t],\n\t\"./no_NO/messages\": [\n\t\t2272,\n\t\t36\n\t],\n\t\"./pl_PL/messages\": [\n\t\t2273,\n\t\t37\n\t],\n\t\"./pseudo_LOCALE/messages\": [\n\t\t2274,\n\t\t38\n\t],\n\t\"./pt_BR/messages\": [\n\t\t2275,\n\t\t39\n\t],\n\t\"./pt_PT/messages\": [\n\t\t2276,\n\t\t40\n\t],\n\t\"./ro_RO/messages\": [\n\t\t2277,\n\t\t41\n\t],\n\t\"./ru_RU/messages\": [\n\t\t2278,\n\t\t42\n\t],\n\t\"./sk_SK/messages\": [\n\t\t2279,\n\t\t43\n\t],\n\t\"./sl_SI/messages\": [\n\t\t2280,\n\t\t44\n\t],\n\t\"./sr_CS/messages\": [\n\t\t2281,\n\t\t45\n\t],\n\t\"./sr_SP/messages\": [\n\t\t2282,\n\t\t46\n\t],\n\t\"./sv_SE/messages\": [\n\t\t2283,\n\t\t47\n\t],\n\t\"./th_TH/messages\": [\n\t\t2284,\n\t\t48\n\t],\n\t\"./tr_TR/messages\": [\n\t\t2285,\n\t\t49\n\t],\n\t\"./uk_UA/messages\": [\n\t\t2286,\n\t\t50\n\t],\n\t\"./ur_PK/messages\": [\n\t\t2287,\n\t\t51\n\t],\n\t\"./uz_UZ/messages\": [\n\t\t2288,\n\t\t52\n\t],\n\t\"./yo_NG/messages\": [\n\t\t2289,\n\t\t53\n\t],\n\t\"./zh_CN/messages\": [\n\t\t2290,\n\t\t54\n\t],\n\t\"./zh_TW/messages\": [\n\t\t2291,\n\t\t55\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn __webpack_require__.e(ids[1]).then(function() {\n\t\treturn __webpack_require__.t(id, 7);\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 2024;\nmodule.exports = webpackAsyncContext;","// @flow\nimport * as React from 'react';\nimport ReactMarkdown from 'react-markdown';\nimport ThemeContext from './Theme/ThemeContext';\nimport classNames from 'classnames';\n\n// Sensible defaults for react-markdown\nconst makeMarkdownCustomRenderers = (isStandaloneText: boolean) => ({\n  // Ensure link are opened in a new page\n  root: props => (isStandaloneText ? <div {...props} /> : <span {...props} />),\n  link: props => (\n    <a href={props.href} target=\"_blank\" rel=\"noopener noreferrer\">\n      {props.children}\n    </a>\n  ),\n  // Add paragraphs only if we explictly opt in.\n  paragraph: props =>\n    isStandaloneText ? <p>{props.children}</p> : props.children,\n});\n\ntype Props = {|\n  source: string,\n  isStandaloneText?: boolean,\n|};\n\n/**\n * Display a markdown text\n */\nexport const MarkdownText = (props: Props) => {\n  const gdevelopTheme = React.useContext(ThemeContext);\n  const markdownCustomRenderers = React.useMemo(\n    () => makeMarkdownCustomRenderers(props.isStandaloneText || false),\n    [props.isStandaloneText]\n  );\n\n  return (\n    <ReactMarkdown\n      escapeHtml\n      source={props.source}\n      className={classNames({\n        [gdevelopTheme.markdownRootClassName]: true,\n        'standalone-text-container': props.isStandaloneText,\n      })}\n      renderers={markdownCustomRenderers}\n    />\n  );\n};\n","// @flow\n\nexport const getHelpLink = (path: string): string =>\n  `http://wiki.compilgames.net/doku.php/gdevelop5${path}?utm_source=gdevelop&utm_medium=help-link`;\n","import { Trans } from '@lingui/macro';\nimport React, { Component } from 'react';\nimport FlatButton from '../UI/FlatButton';\nimport Dialog from '../UI/Dialog';\nimport { withSerializableObject } from '../Utils/SerializableObjectEditorContainer';\nimport VariablesList from './index';\n\nconst gd = global.gd;\n\nexport class VariablesEditorDialog extends Component {\n  render() {\n    const {\n      onCancel,\n      onApply,\n      open,\n      onEditObjectVariables,\n      title,\n      emptyExplanationMessage,\n      emptyExplanationSecondMessage,\n      variablesContainer,\n    } = this.props;\n    const actions = [\n      <FlatButton\n        label={<Trans>Cancel</Trans>}\n        onClick={this.props.onCancel}\n        key={'Cancel'}\n      />,\n      <FlatButton\n        label={<Trans>Apply</Trans>}\n        primary\n        keyboardFocused\n        onClick={onApply}\n        key={'Apply'}\n      />,\n    ];\n    const secondaryActions = onEditObjectVariables ? (\n      <FlatButton\n        label={<Trans>Edit Object Variables</Trans>}\n        primary={false}\n        onClick={onEditObjectVariables}\n      />\n    ) : null;\n\n    return (\n      <Dialog\n        noMargin\n        actions={actions}\n        open={open}\n        cannotBeDismissed={true}\n        onRequestClose={onCancel}\n        secondaryActions={secondaryActions}\n        title={title}\n      >\n        <VariablesList\n          variablesContainer={variablesContainer}\n          emptyExplanationMessage={emptyExplanationMessage}\n          emptyExplanationSecondMessage={emptyExplanationSecondMessage}\n          onSizeUpdated={\n            () =>\n              this.forceUpdate() /*Force update to ensure dialog is properly positionned*/\n          }\n        />\n      </Dialog>\n    );\n  }\n}\n\nexport default withSerializableObject(VariablesEditorDialog, {\n  newObjectCreator: () => new gd.VariablesContainer(),\n  propName: 'variablesContainer',\n});\n","// @flow\nimport optionalRequire from './OptionalRequire.js';\nconst electron = optionalRequire('electron');\nconst electronClipboard = electron ? electron.clipboard : null;\n\nexport type ClipboardKind = string;\n\nlet internalClipboard = '';\n\nconst mangleClipboardKind = (kind: ClipboardKind): string => {\n  // Mangle the name with GDevelop specific strings and random\n  // characters so that the probability that something that is not\n  // a valid GDevelop clipboard content is recognized as valid is almost 0.\n  return 'GDEVELOP_' + kind + '_CLIPBOARD_KIND-jsBdHbLy912y8Rc';\n};\n\nexport default class Clipboard {\n  static set(kind: ClipboardKind, object: any) {\n    const text = JSON.stringify({\n      '000kind': mangleClipboardKind(kind), /// 000 to ensure the key is written first.\n      content: object,\n    });\n\n    if (electronClipboard) {\n      electronClipboard.writeText(text);\n    } else {\n      internalClipboard = text;\n    }\n  }\n\n  static has(kind: ClipboardKind): boolean {\n    let text = '';\n    if (electronClipboard) {\n      text = electronClipboard.readText();\n    } else {\n      text = internalClipboard;\n    }\n\n    return text.indexOf(mangleClipboardKind(kind)) === 12; /// 12 is the position of '000kind' value\n  }\n\n  static get(kind: ClipboardKind): any {\n    if (!Clipboard.has(kind)) return null;\n\n    let text = '';\n    if (electronClipboard) {\n      text = electronClipboard.readText();\n    } else {\n      text = internalClipboard;\n    }\n\n    try {\n      const parsedText = JSON.parse(text);\n      return parsedText.content;\n    } catch (e) {\n      console.warn('The clipboard content is not valid JSON');\n      return null;\n    }\n  }\n}\n","// @flow\nimport * as React from 'react';\nimport PreferencesContext, {\n  type AlertMessageIdentifier,\n} from '../MainFrame/Preferences/PreferencesContext';\nimport AlertMessage from './AlertMessage';\nimport Window from '../Utils/Window';\n\ntype Props = {|\n  kind: 'info' | 'warning',\n  children: React.Node,\n  identifier: AlertMessageIdentifier,\n|};\n\n/**\n * Show an alert that can be permanently hidden. Hidden messages\n * will be stored in preferences.\n */\nconst DismissableAlertMessage = ({ identifier, kind, children }: Props) => (\n  <PreferencesContext.Consumer>\n    {({ values, showAlertMessage }) =>\n      !values.hiddenAlertMessages[identifier] && (\n        <AlertMessage\n          kind={kind}\n          children={children}\n          onHide={() => {\n            const answer = Window.showConfirmDialog(\n              \"Are you sure you want to hide this hint? You won't see it again, unless you re-activate it from the preferences.\"\n            );\n\n            if (!answer) return;\n\n            showAlertMessage(identifier, false);\n          }}\n        />\n      )\n    }\n  </PreferencesContext.Consumer>\n);\n\nexport default DismissableAlertMessage;\n","// @flow\nimport ResourcesLoader from '../ResourcesLoader';\nimport optionalRequire from '../Utils/OptionalRequire.js';\nconst fs = optionalRequire('fs');\nconst path = optionalRequire('path');\nconst gd = global.gd;\n\nexport const RESOURCE_EXTENSIONS = {\n  image: 'png,jpg,jpeg,PNG,JPG,JPEG',\n  audio: 'wav,mp3,ogg,WAV,MP3,OGG',\n  font: 'ttf,ttc,otf,TTF,TTC,OTF',\n  video: 'mp4,MP4',\n};\n\nexport const createOrUpdateResource = (\n  project: gdProject,\n  newlyCreatedResource: gdResource,\n  resourceName: string\n) => {\n  const resourcesManager = project.getResourcesManager();\n  if (resourcesManager.hasResource(resourceName)) {\n    resourcesManager.removeResource(resourceName);\n  }\n  newlyCreatedResource.setFile(resourceName);\n  newlyCreatedResource.setName(resourceName);\n  applyResourceDefaults(project, newlyCreatedResource);\n\n  // Important, we are responsible for deleting the resources that was given to us.\n  // Otherwise we have a memory leak.\n  resourcesManager.addResource(newlyCreatedResource);\n\n  newlyCreatedResource.delete();\n};\n\n/**\n * Get the local path of a resource. This works by asking the ResourcesLoader\n * for the resource URL, then stripping anything that is specific to a URL.\n */\nexport const getLocalResourceFullPath = (\n  project: gdProject,\n  resourceName: string\n) => {\n  let resourcePath = ResourcesLoader.getResourceFullUrl(\n    project,\n    resourceName\n  ).substring(7 /* Remove \"file://\" from the URL to get a local path */);\n\n  if (resourcePath.indexOf('?cache=') !== -1) {\n    // Remove, if needed, the cache bursting argument from the URL.\n    resourcePath = resourcePath.substring(\n      0,\n      resourcePath.lastIndexOf('?cache=')\n    );\n  }\n  return resourcePath;\n};\n\nexport const isPathInProjectFolder = (\n  project: gdProject,\n  resourcePath: string\n) => {\n  const projectPath = path.dirname(project.getProjectFile());\n  return resourcePath.includes(projectPath);\n};\n\nexport const copyAllToProjectFolder = (\n  project: gdProject,\n  resourcePaths: Array<string>\n): Promise<Array<string>> => {\n  if (!fs || !path) {\n    return Promise.resolve(resourcePaths);\n  }\n\n  const projectPath = path.dirname(project.getProjectFile());\n\n  return Promise.all(\n    resourcePaths.map(resourcePath => {\n      if (isPathInProjectFolder(project, resourcePath)) {\n        return resourcePath;\n      }\n\n      const resourceBasename = path.basename(resourcePath);\n      const resourceNewPath = path.join(projectPath, resourceBasename);\n\n      return new Promise(resolve => {\n        fs.copyFile(resourcePath, resourceNewPath, err => {\n          if (err) {\n            return resolve(resourcePath);\n          }\n\n          return resolve(resourceNewPath);\n        });\n      });\n    })\n  );\n};\n\nexport const getResourceFilePathStatus = (\n  project: gdProject,\n  resourceName: string\n) => {\n  if (!fs) return '';\n  const resourcePath = path.normalize(\n    getLocalResourceFullPath(project, resourceName)\n  );\n\n  // The resource path doesn't exist\n  if (!fs.existsSync(resourcePath)) return 'error';\n\n  // The resource path is outside of the project folder\n  if (!isPathInProjectFolder(project, resourcePath)) return 'warning';\n\n  // The resource path seems ok\n  return '';\n};\n\nexport const applyResourceDefaults = (\n  project: gdProject,\n  newResource: gdResource\n) => {\n  if (newResource instanceof gd.ImageResource) {\n    newResource.setSmooth(project.getScaleMode() !== 'nearest');\n  }\n};\n","// @flow\nimport * as React from 'react';\nimport Paper from '@material-ui/core/Paper';\n\ntype Props = {|\n  children: React.Node,\n|};\n\nexport default (props: Props) => {\n  return (\n    <div\n      style={{\n        position: 'absolute',\n        top: 0,\n        left: 0,\n        right: 0,\n        bottom: 0,\n        backgroundColor: 'rgba(0,0,0,0.5)',\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center',\n      }}\n    >\n      <Paper\n        elevation={3}\n        style={{\n          padding: 10,\n          margin: 5,\n        }}\n      >\n        {props.children}\n      </Paper>\n    </div>\n  );\n};\n","// @flow\nimport * as React from 'react';\nimport RaisedButton, {\n  type RaisedButtonPropsWithoutOnClick,\n} from './RaisedButton';\nimport ElementWithMenu from './Menu/ElementWithMenu';\nimport { type MenuItemTemplate } from './Menu/Menu.flow';\n\n// We support a subset of the props supported by Material-UI v0.x RaisedButton\n// They should be self descriptive - refer to Material UI docs otherwise.\ntype Props = {|\n  ...RaisedButtonPropsWithoutOnClick,\n  buildMenuTemplate: () => Array<MenuItemTemplate>,\n|};\n\nconst shouldNeverBeCalled = () => {\n  throw new Error('This RaisedButtonWithMenu onClick should never be called');\n};\n\n/**\n * A raised button based on Material-UI button, that has a menu displayed when clicked.\n */\nconst RaisedButtonWithMenu = (props: Props) => {\n  const { buildMenuTemplate, ...otherProps } = props;\n\n  return (\n    <ElementWithMenu\n      element={<RaisedButton {...otherProps} onClick={shouldNeverBeCalled} />}\n      buildMenuTemplate={buildMenuTemplate}\n    />\n  );\n};\n\nexport default RaisedButtonWithMenu;\n","// @flow\nimport { Trans } from '@lingui/macro';\n\nimport * as React from 'react';\nimport SemiControlledAutoComplete, {\n  type DataSource,\n  type SemiControlledAutoCompleteInterface,\n} from '../UI/SemiControlledAutoComplete';\nimport BackspaceIcon from '@material-ui/icons/Backspace';\nimport Add from '@material-ui/icons/Add';\nimport Brush from '@material-ui/icons/Brush';\nimport {\n  type ResourceSource,\n  type ChooseResourceFunction,\n  type ResourceKind,\n} from '../ResourcesList/ResourceSource.flow';\nimport { type ResourceExternalEditor } from '../ResourcesList/ResourceExternalEditor.flow';\nimport ResourcesLoader from '../ResourcesLoader';\nimport { applyResourceDefaults } from './ResourceUtils';\nimport { type MessageDescriptor } from '../Utils/i18n/MessageDescriptor.flow';\nimport RaisedButtonWithMenu from '../UI/RaisedButtonWithMenu';\nimport { TextFieldWithButtonLayout } from '../UI/Layout';\nimport IconButton from '../UI/IconButton';\n\ntype Props = {|\n  project: gdProject,\n  resourceSources: Array<ResourceSource>,\n  onChooseResource: ChooseResourceFunction,\n  resourceExternalEditors: Array<ResourceExternalEditor>,\n  resourcesLoader: typeof ResourcesLoader,\n  resourceKind: ResourceKind,\n  fullWidth?: boolean,\n  canBeReset?: boolean,\n  initialResourceName: string,\n  onChange: string => void,\n  floatingLabelText?: React.Node,\n  helperMarkdownText?: ?string,\n  hintText?: MessageDescriptor,\n  margin?: 'none' | 'dense',\n|};\n\ntype State = {|\n  notExistingError: boolean,\n  resourceName: string,\n|};\n\nexport default class ResourceSelector extends React.Component<Props, State> {\n  constructor(props: Props) {\n    super(props);\n\n    this.state = {\n      notExistingError: false,\n      resourceName: props.initialResourceName || '',\n    };\n\n    const { project } = props;\n    if (project) {\n      this._loadFrom(project.getResourcesManager());\n    }\n  }\n\n  allResourcesNames: Array<string>;\n  autoCompleteData: DataSource;\n  _autoComplete: ?SemiControlledAutoCompleteInterface;\n\n  focus() {\n    if (this._autoComplete) this._autoComplete.focus();\n  }\n\n  componentWillReceiveProps(nextProps: Props) {\n    if (nextProps.initialResourceName !== this.props.initialResourceName) {\n      this.setState({\n        resourceName: nextProps.initialResourceName || '',\n      });\n    }\n  }\n\n  _getResourceSourceItems(): DataSource {\n    const sources = this.props.resourceSources || [];\n    return [\n      ...sources\n        .filter(source => source.kind === this.props.resourceKind)\n        .map(source => ({\n          text: '',\n          value: source.displayName,\n          renderIcon: () => <Add />,\n          onClick: () => this._addFrom(source),\n        })),\n      {\n        type: 'separator',\n      },\n    ];\n  }\n\n  _loadFrom(resourcesManager: gdResourcesManager) {\n    this.allResourcesNames = resourcesManager.getAllResourceNames().toJSArray();\n    if (this.props.resourceKind) {\n      this.allResourcesNames = this.allResourcesNames.filter(resourceName => {\n        return (\n          resourcesManager.getResource(resourceName).getKind() ===\n          this.props.resourceKind\n        );\n      });\n    }\n    const resourceSourceItems = this._getResourceSourceItems();\n    const resourceItems = this.allResourcesNames.map(resourceName => ({\n      text: resourceName,\n      value: resourceName,\n    }));\n    this.autoCompleteData = [...resourceSourceItems, ...resourceItems];\n  }\n\n  _addFrom = (source: ResourceSource) => {\n    if (!source) return;\n\n    const { project, onChooseResource } = this.props;\n    onChooseResource(source.name, false)\n      .then(resources => {\n        if (!resources.length) return;\n        const resource = resources[0];\n        applyResourceDefaults(project, resource);\n\n        // addResource will check if a resource with the same name exists, and if it is\n        // the case, no new resource will be added.\n        project.getResourcesManager().addResource(resource);\n\n        this._loadFrom(project.getResourcesManager());\n        const resourceName: string = resource.getName();\n        this._onChangeResourceName(resourceName);\n\n        // Imperatively set the value of the autocomplete, as it can be (on Windows for example),\n        // still focused. This means that when it's then getting blurred, the value we\n        // set for the resource name would get erased by the one that was getting entered.\n        if (this._autoComplete)\n          this._autoComplete.forceInputValueTo(resourceName);\n\n        // Important, we are responsible for deleting the resources that were given to us.\n        // Otherwise we have a memory leak, as calling addResource is making a copy of the resource.\n        resources.forEach(resource => resource.delete());\n      })\n      .catch(err => {\n        // TODO: Display an error message\n        console.error('Unable to choose a resource', err);\n      });\n  };\n\n  _onResetResourceName = () => {\n    this.setState(\n      {\n        resourceName: '',\n        notExistingError: false,\n      },\n      () => {\n        if (this.props.onChange) this.props.onChange(this.state.resourceName);\n      }\n    );\n  };\n\n  _onChangeResourceName = (resourceName: string) => {\n    if (resourceName === '') {\n      this._onResetResourceName();\n      return;\n    }\n    this.setState(\n      {\n        resourceName,\n        notExistingError: this.allResourcesNames.indexOf(resourceName) === -1,\n      },\n      () => {\n        if (!this.state.notExistingError) {\n          if (this.props.onChange) this.props.onChange(resourceName);\n        }\n      }\n    );\n  };\n\n  _editWith = (resourceExternalEditor: ResourceExternalEditor) => {\n    const { project, resourcesLoader, resourceKind } = this.props;\n    const { resourceName } = this.state;\n    const resourcesManager = project.getResourcesManager();\n    const initialResource = resourcesManager.getResource(resourceName);\n    let initialResourceMetadata = {};\n    const initialResourceMetadataRaw = initialResource.getMetadata();\n    if (initialResourceMetadataRaw) {\n      try {\n        initialResourceMetadata = JSON.parse(initialResourceMetadataRaw);\n      } catch (e) {\n        console.error('Malformed metadata', e);\n      }\n    }\n\n    if (resourceKind === 'image') {\n      const resourceNames = [];\n      if (resourcesManager.hasResource(resourceName)) {\n        resourceNames.push(resourceName);\n      }\n      const externalEditorOptions = {\n        project,\n        resourcesLoader,\n        singleFrame: true,\n        resourceNames,\n        extraOptions: {\n          fps: 0,\n          name: resourceName,\n          isLooping: false,\n          externalEditorData: initialResourceMetadata,\n        },\n        onChangesSaved: newResourceData => {\n          if (!newResourceData.length) return;\n\n          // Burst the ResourcesLoader cache to force images to be reloaded (and not cached by the browser).\n          resourcesLoader.burstUrlsCacheForResources(project, [\n            newResourceData[0].name,\n          ]);\n          this.props.onChange(newResourceData[0].name);\n        },\n      };\n      resourceExternalEditor.edit(externalEditorOptions);\n    } else if (resourceKind === 'audio') {\n      const externalEditorOptions = {\n        project,\n        resourcesLoader,\n        resourceNames: [resourceName],\n        extraOptions: {\n          externalEditorData: initialResourceMetadata,\n        },\n        onChangesSaved: newResourceData => {\n          // Burst the ResourcesLoader cache to force audio to be reloaded (and not cached by the browser).\n          resourcesLoader.burstUrlsCacheForResources(project, [\n            newResourceData[0].name,\n          ]);\n          this.props.onChange(newResourceData[0].name);\n        },\n      };\n      resourceExternalEditor.edit(externalEditorOptions);\n    } else if (resourceKind === 'json') {\n      const externalEditorOptions = {\n        project,\n        resourcesLoader,\n        resourceNames: [resourceName],\n        extraOptions: {\n          initialResourceMetadata,\n        },\n        onChangesSaved: newResourceData => {\n          this.props.onChange(newResourceData[0].name);\n        },\n      };\n      resourceExternalEditor.edit(externalEditorOptions);\n    }\n  };\n\n  render() {\n    const errorText = this.state.notExistingError\n      ? 'This resource does not exist in the game'\n      : null;\n\n    const externalEditors = this.props.resourceExternalEditors.filter(\n      externalEditor => externalEditor.kind === this.props.resourceKind\n    );\n    return (\n      <TextFieldWithButtonLayout\n        noFloatingLabelText={!this.props.floatingLabelText}\n        margin={this.props.margin}\n        renderTextField={() => (\n          <SemiControlledAutoComplete\n            floatingLabelText={this.props.floatingLabelText}\n            helperMarkdownText={this.props.helperMarkdownText}\n            hintText={this.props.hintText}\n            openOnFocus\n            dataSource={this.autoCompleteData || []}\n            value={this.state.resourceName}\n            onChange={this._onChangeResourceName}\n            errorText={errorText}\n            fullWidth={this.props.fullWidth}\n            margin={this.props.margin}\n            ref={autoComplete => (this._autoComplete = autoComplete)}\n          />\n        )}\n        renderButton={style => (\n          <React.Fragment>\n            {this.props.canBeReset && (\n              <IconButton\n                size=\"small\"\n                onClick={() => {\n                  this._onResetResourceName();\n                }}\n              >\n                <BackspaceIcon />\n              </IconButton>\n            )}\n            {!!externalEditors.length ? (\n              <RaisedButtonWithMenu\n                style={style}\n                icon={<Brush />}\n                label={\n                  this.state.resourceName ? (\n                    <Trans>Edit</Trans>\n                  ) : (\n                    <Trans>Create</Trans>\n                  )\n                }\n                primary\n                buildMenuTemplate={() =>\n                  externalEditors.map(externalEditor => ({\n                    label: externalEditor.displayName,\n                    click: () => this._editWith(externalEditor),\n                  }))\n                }\n              />\n            ) : null}\n          </React.Fragment>\n        )}\n      />\n    );\n  }\n}\n","import { isMacLike } from '../../Utils/Platform';\n\nconst CTRL_KEY = 17;\nconst SHIFT_KEY = 16;\nconst LEFT_KEY = 37;\nconst UP_KEY = 38;\nconst RIGHT_KEY = 39;\nconst DOWN_KEY = 40;\nconst BACKSPACE_KEY = 8;\nconst SPACE_KEY = 32;\nconst DELETE_KEY = 46;\nconst EQUAL_KEY = 187;\nconst MINUS_KEY = 189;\nconst NUMPAD_ADD = 107;\nconst NUMPAD_SUBTRACT = 109;\nconst C_KEY = 67;\nconst F_KEY = 70;\nconst V_KEY = 86;\nconst X_KEY = 88;\nconst Y_KEY = 89;\nconst Z_KEY = 90;\nconst MID_MOUSE_BUTTON = 1;\n\n/**\n * Deprecated class to handle shortcut. Don't use this anymore, prefer the non\n * deprecated version that does not add listener on the document (risking catching events\n * when the components are not focused).\n *\n * TODO: Replace InstancesEditor shortcuts by the new `KeyboardShortcuts`.\n */\nexport default class DeprecatedKeyboardShortcuts {\n  constructor({\n    onDelete,\n    onMove,\n    onCopy,\n    onCut,\n    onPaste,\n    onUndo,\n    onRedo,\n    onSearch,\n    onZoomOut,\n    onZoomIn,\n  }) {\n    this.onDelete = onDelete || this._noop;\n    this.onMove = onMove || this._noop;\n    this.onCopy = onCopy || this._noop;\n    this.onCut = onCut || this._noop;\n    this.onPaste = onPaste || this._noop;\n    this.onUndo = onUndo || this._noop;\n    this.onRedo = onRedo || this._noop;\n    this.onZoomOut = onZoomOut || this._noop;\n    this.onZoomIn = onZoomIn || this._noop;\n    this.onSearch = onSearch || this._noop;\n    this.isFocused = false;\n    this.shiftPressed = false;\n    this.rawCtrlPressed = false;\n    this.metaPressed = false;\n    this.spacePressed = false;\n    this.mouseMidButtonPressed = false;\n    this.mount();\n  }\n\n  shouldCloneInstances() {\n    return this._isControlPressed();\n  }\n\n  shouldMultiSelect() {\n    return this.shiftPressed;\n  }\n\n  shouldFollowAxis() {\n    return this.shiftPressed;\n  }\n\n  shouldNotSnapToGrid() {\n    return this.altPressed;\n  }\n\n  shouldResizeProportionally() {\n    return this.shiftPressed;\n  }\n\n  shouldScrollHorizontally() {\n    return this.altPressed;\n  }\n\n  shouldZoom() {\n    if (isMacLike()) {\n      return this._isControlPressed();\n    } else {\n      if (!this._isControlPressed() && !this.altPressed && !this.shiftPressed) {\n        return true;\n      } else {\n        return false;\n      }\n    }\n  }\n\n  shouldMoveView() {\n    return this.spacePressed || this.mouseMidButtonPressed;\n  }\n\n  _isControlPressed = () => {\n    // On macOS, meta key (Apple/Command key) acts as Control key on Windows/Linux.\n    return this.metaPressed || this.rawCtrlPressed;\n  };\n\n  _onKeyDown = evt => {\n    if (!this.isFocused) return;\n\n    let preventDefault = false;\n\n    if (evt.metaKey) this.metaPressed = true;\n    if (evt.altKey) this.altPressed = true;\n    if (evt.which === CTRL_KEY) this.rawCtrlPressed = true;\n    if (evt.which === SHIFT_KEY) this.shiftPressed = true;\n    if (evt.which === SPACE_KEY) this.spacePressed = true;\n\n    const textEditorSelectors = 'textarea, input, [contenteditable=\"true\"]';\n    if (evt.target && evt.target.closest(textEditorSelectors)) {\n      return; // Something else is currently being edited.\n    }\n\n    if (this.onMove) {\n      if (evt.which === UP_KEY) {\n        this.onMove(0, -1);\n      } else if (evt.which === DOWN_KEY) {\n        this.onMove(0, 1);\n      } else if (evt.which === LEFT_KEY) {\n        this.onMove(-1, 0);\n      } else if (evt.which === RIGHT_KEY) {\n        this.onMove(1, 0);\n      }\n    }\n    if (evt.which === BACKSPACE_KEY || evt.which === DELETE_KEY) {\n      this.onDelete();\n      preventDefault = true;\n    }\n    if (this._isControlPressed() && evt.which === C_KEY) {\n      this.onCopy();\n    }\n    if (this._isControlPressed() && evt.which === X_KEY) {\n      this.onCut();\n    }\n    if (this._isControlPressed() && evt.which === V_KEY) {\n      this.onPaste();\n    }\n    if (this._isControlPressed() && evt.which === Z_KEY) {\n      this.onUndo();\n    }\n    if (this._isControlPressed() && this.shiftPressed && evt.which === Z_KEY) {\n      this.onRedo();\n    }\n    if (this._isControlPressed() && evt.which === Y_KEY) {\n      this.onRedo();\n    }\n    if (this._isControlPressed() && evt.which === F_KEY) {\n      this.onSearch();\n    }\n\n    if (this._isControlPressed() && evt.which === MINUS_KEY) {\n      this.onZoomOut();\n    }\n    if (evt.which === NUMPAD_SUBTRACT) {\n      this.onZoomOut();\n    }\n\n    if (this._isControlPressed() && evt.which === EQUAL_KEY) {\n      this.onZoomIn();\n    }\n    if (evt.which === NUMPAD_ADD) {\n      this.onZoomIn();\n    }\n\n    if (preventDefault) {\n      if (evt.preventDefault) evt.preventDefault();\n      return false;\n    }\n  };\n\n  _onKeyUp = evt => {\n    // Always handle key up event, even if we don't have the focus,\n    // for modifier keys to ensure we don't lose track of their pressed/unpressed status.\n\n    if (!evt.metaKey) this.metaPressed = false;\n    if (!evt.altKey) this.altPressed = false;\n    if (evt.which === CTRL_KEY) this.rawCtrlPressed = false;\n    if (evt.which === SHIFT_KEY) this.shiftPressed = false;\n    if (evt.which === SPACE_KEY) this.spacePressed = false;\n\n    let preventDefault = false;\n\n    if (evt.which === BACKSPACE_KEY || evt.which === DELETE_KEY) {\n      preventDefault = true;\n    }\n\n    if (preventDefault) {\n      if (evt.preventDefault) evt.preventDefault();\n      return false;\n    }\n  };\n\n  _onMouseDown = evt => {\n    if (!this.isFocused) return;\n\n    if (!isMacLike()) {\n      if (evt.button === MID_MOUSE_BUTTON) {\n        this.mouseMidButtonPressed = true;\n      } else {\n        this.mouseMidButtonPressed = false;\n      }\n    }\n  };\n\n  _onMouseUp = evt => {\n    if (!this.isFocused) return;\n\n    if (!isMacLike() && evt.button === MID_MOUSE_BUTTON) {\n      this.mouseMidButtonPressed = false;\n    }\n  };\n\n  _onKeyPress = evt => {};\n\n  _noop = () => {};\n\n  focus() {\n    this.isFocused = true;\n  }\n\n  blur() {\n    this.isFocused = false;\n  }\n\n  mount() {\n    if (typeof document === 'undefined') return;\n\n    document.addEventListener('keydown', this._onKeyDown, true);\n    document.addEventListener('keyup', this._onKeyUp, true);\n    document.addEventListener('keypress', this._onKeyPress, true);\n    document.addEventListener('mousedown', this._onMouseDown, true);\n    document.addEventListener('mouseup', this._onMouseUp, true);\n  }\n\n  unmount() {\n    if (typeof document === 'undefined') return;\n\n    document.removeEventListener('keydown', this._onKeyDown, true);\n    document.removeEventListener('keyup', this._onKeyUp, true);\n    document.removeEventListener('keypress', this._onKeyPress, true);\n    document.removeEventListener('mousedown', this._onMouseDown, true);\n    document.removeEventListener('mouseup', this._onMouseUp, true);\n  }\n}\n","import LayerRenderer from './LayerRenderer';\nimport * as PIXI from 'pixi.js';\n\nexport default class InstancesRenderer {\n  constructor({\n    project,\n    layout,\n    instances,\n    viewPosition,\n    onInstanceClicked,\n    onInstanceDoubleClicked,\n    onOverInstance,\n    onOutInstance,\n    onMoveInstance,\n    onMoveInstanceEnd,\n    onDownInstance,\n  }) {\n    this.project = project;\n    this.instances = instances;\n    this.layout = layout;\n    this.viewPosition = viewPosition;\n    this.onInstanceClicked = onInstanceClicked;\n    this.onInstanceDoubleClicked = onInstanceDoubleClicked;\n    this.onOverInstance = onOverInstance;\n    this.onOutInstance = onOutInstance;\n    this.onMoveInstance = onMoveInstance;\n    this.onMoveInstanceEnd = onMoveInstanceEnd;\n    this.onDownInstance = onDownInstance;\n\n    this.layersRenderers = {};\n\n    this.pixiContainer = new PIXI.Container();\n    this.instanceMeasurer = {\n      getInstanceLeft: instance => {\n        const layerName = instance.getLayer();\n        const layerRenderer = this.layersRenderers[layerName];\n        if (!layerRenderer) return instance.getX();\n\n        return layerRenderer.getInstanceLeft(instance);\n      },\n      getInstanceTop: instance => {\n        const layerName = instance.getLayer();\n        const layerRenderer = this.layersRenderers[layerName];\n        if (!layerRenderer) return instance.getY();\n\n        return layerRenderer.getInstanceTop(instance);\n      },\n      getInstanceWidth: instance => {\n        if (instance.hasCustomSize()) return instance.getCustomWidth();\n\n        const layerName = instance.getLayer();\n        const layerRenderer = this.layersRenderers[layerName];\n        if (!layerRenderer) return 0;\n\n        return layerRenderer.getInstanceWidth(instance);\n      },\n\n      getInstanceHeight: instance => {\n        if (instance.hasCustomSize()) return instance.getCustomHeight();\n\n        const layerName = instance.getLayer();\n        const layerRenderer = this.layersRenderers[layerName];\n        if (!layerRenderer) return 0;\n\n        return layerRenderer.getInstanceHeight(instance);\n      },\n      getInstanceRect: instance => {\n        return {\n          x: this.instanceMeasurer.getInstanceLeft(instance),\n          y: this.instanceMeasurer.getInstanceTop(instance),\n          width: this.instanceMeasurer.getInstanceWidth(instance),\n          height: this.instanceMeasurer.getInstanceHeight(instance),\n        };\n      },\n    };\n  }\n\n  getPixiContainer() {\n    return this.pixiContainer;\n  }\n\n  getInstanceMeasurer() {\n    return this.instanceMeasurer;\n  }\n\n  render() {\n    for (let i = 0; i < this.layout.getLayersCount(); i++) {\n      const layer = this.layout.getLayerAt(i);\n      const layerName = layer.getName();\n\n      let layerRenderer = this.layersRenderers[layerName];\n      if (!layerRenderer) {\n        this.layersRenderers[layerName] = layerRenderer = new LayerRenderer({\n          project: this.project,\n          layout: this.layout,\n          instances: this.instances,\n          viewPosition: this.viewPosition,\n          layer: layer,\n          onInstanceClicked: this.onInstanceClicked,\n          onInstanceDoubleClicked: this.onInstanceDoubleClicked,\n          onOverInstance: this.onOverInstance,\n          onOutInstance: this.onOutInstance,\n          onMoveInstance: this.onMoveInstance,\n          onMoveInstanceEnd: this.onMoveInstanceEnd,\n          onDownInstance: this.onDownInstance,\n        });\n        this.pixiContainer.addChild(layerRenderer.getPixiContainer());\n      }\n\n      // /!\\ Objects representing layers can be deleted at any moment and replaced\n      // by new one, for example when two layers are swapped.\n      // We update the layer object of the renderer so that the renderer always has\n      // a valid layer object that can be used.\n      layerRenderer.layer = layer;\n      layerRenderer.wasUsed = true;\n      layerRenderer.getPixiContainer().zOrder = i;\n      layerRenderer.render();\n    }\n\n    this._updatePixiObjectsZOrder();\n    this._cleanRenderers();\n  }\n\n  _updatePixiObjectsZOrder() {\n    this.pixiContainer.children.sort((a, b) => {\n      a.zOrder = a.zOrder || 0;\n      b.zOrder = b.zOrder || 0;\n      return a.zOrder - b.zOrder;\n    });\n  }\n\n  /**\n   * Delete instance renderers of the specified objects, which will then be recreated during\n   * the next render.\n   * @param {string} objectName The name of the object for which instance must be re-rendered.\n   */\n  resetRenderersFor(objectName) {\n    for (let i in this.layersRenderers) {\n      if (this.layersRenderers.hasOwnProperty(i)) {\n        const layerRenderer = this.layersRenderers[i];\n        layerRenderer.resetRenderersFor(objectName);\n      }\n    }\n  }\n\n  /**\n   * Clean up rendered layers that are not existing anymore\n   */\n  _cleanRenderers() {\n    for (let i in this.layersRenderers) {\n      if (this.layersRenderers.hasOwnProperty(i)) {\n        const layerRenderer = this.layersRenderers[i];\n        if (!layerRenderer.wasUsed) {\n          this.pixiContainer.removeChild(layerRenderer.getPixiContainer());\n          layerRenderer.delete();\n          delete this.layersRenderers[i];\n        } else layerRenderer.wasUsed = false;\n      }\n    }\n  }\n\n  delete() {\n    for (let i in this.layersRenderers) {\n      if (this.layersRenderers.hasOwnProperty(i)) {\n        this.layersRenderers[i].delete();\n      }\n    }\n  }\n}\n","export default function transformRect(transformPoint, { x, y, width, height }) {\n  const startPos = transformPoint(x, y);\n  const endPos = transformPoint(x + width, y + height);\n  return {\n    x: startPos[0],\n    y: startPos[1],\n    width: endPos[0] - startPos[0],\n    height: endPos[1] - startPos[1],\n  };\n}\n","// @flow\nimport gesture from 'pixi-simple-gesture';\nimport transformRect from '../Utils/TransformRect';\nimport * as PIXI from 'pixi.js';\nimport { type ScreenType } from '../UI/Reponsive/ScreenTypeMeasurer';\nimport InstancesSelection from '../SceneEditor/InstancesSelection';\n\ntype Props = {|\n  instancesSelection: InstancesSelection,\n  instanceMeasurer: Object, // To be typed in InstancesRenderer\n  onResize: (number, number) => void,\n  onResizeEnd: () => void,\n  onRotate: (number, number) => void,\n  onRotateEnd: () => void,\n  toCanvasCoordinates: (x: number, y: number) => [number, number],\n  screenType: ScreenType,\n|};\n\nconst getButtonSizes = (screenType: ScreenType) => {\n  if (screenType === 'touch') {\n    return {\n      buttonSize: 18,\n      smallButtonSize: 13,\n      buttonPadding: 5,\n    };\n  }\n\n  return {\n    buttonSize: 10,\n    smallButtonSize: 8,\n    buttonPadding: 5,\n  };\n};\n\nconst RECTANGLE_BUTTON_SHAPE = 0;\nconst CIRCLE_BUTTON_SHAPE = 1;\n\nexport default class SelectedInstances {\n  instancesSelection: InstancesSelection;\n  instanceMeasurer: Object; // To be typed in InstancesRenderer\n  onResize: (number, number) => void;\n  onResizeEnd: () => void;\n  onRotate: (number, number) => void;\n  onRotateEnd: () => void;\n  toCanvasCoordinates: (x: number, y: number) => [number, number];\n  _screenType: ScreenType;\n\n  pixiContainer = new PIXI.Container();\n  rectanglesContainer = new PIXI.Container();\n  selectedRectangles = [];\n  resizeButton = new PIXI.Graphics();\n  resizeIcon = new PIXI.Sprite.fromImage('res/actions/direction.png');\n  rightResizeButton = new PIXI.Graphics();\n  bottomResizeButton = new PIXI.Graphics();\n  rotateButton = new PIXI.Graphics();\n\n  constructor({\n    instancesSelection,\n    instanceMeasurer,\n    onResize,\n    onResizeEnd,\n    onRotate,\n    onRotateEnd,\n    toCanvasCoordinates,\n    screenType,\n  }: Props) {\n    this.instanceMeasurer = instanceMeasurer;\n    this.onResize = onResize;\n    this.onResizeEnd = onResizeEnd;\n    this.onRotate = onRotate;\n    this.onRotateEnd = onRotateEnd;\n    this.toCanvasCoordinates = toCanvasCoordinates;\n    this.instancesSelection = instancesSelection;\n    this._screenType = screenType;\n\n    this.pixiContainer.addChild(this.rectanglesContainer);\n\n    this._makeButton(\n      this.resizeButton,\n      event => {\n        this.onResize(event.deltaX, event.deltaY);\n      },\n      () => {\n        this.onResizeEnd();\n      },\n      'nwse-resize'\n    );\n    this._makeButton(\n      this.rightResizeButton,\n      event => {\n        this.onResize(event.deltaX, 0);\n      },\n      () => {\n        this.onResizeEnd();\n      },\n      'ew-resize'\n    );\n    this._makeButton(\n      this.bottomResizeButton,\n      event => {\n        this.onResize(0, event.deltaY);\n      },\n      () => {\n        this.onResizeEnd();\n      },\n      'ns-resize'\n    );\n    this._makeButton(\n      this.rotateButton,\n      event => {\n        this.onRotate(event.deltaX, event.deltaY);\n      },\n      () => {\n        this.onRotateEnd();\n      },\n      'url(\"res/actions/rotate24.png\"),auto'\n    );\n  }\n\n  setScreenType(screenType: ScreenType) {\n    this._screenType = screenType;\n  }\n\n  _makeButton(\n    objectButton: PIXI.Graphics,\n    onMove: (event: any) => void,\n    onEnd: () => void,\n    cursor: string\n  ) {\n    objectButton.interactive = true;\n    objectButton.buttonMode = true;\n    objectButton.cursor = cursor;\n    gesture.panable(objectButton);\n    objectButton.on('panmove', onMove);\n    objectButton.on('panend', onEnd);\n    this.pixiContainer.addChild(objectButton);\n  }\n\n  getPixiContainer() {\n    return this.pixiContainer;\n  }\n\n  _renderButton(\n    show: boolean,\n    buttonObject: PIXI.Graphics,\n    canvasPosition: [number, number],\n    size: number,\n    shape: 0 | 1 = RECTANGLE_BUTTON_SHAPE\n  ) {\n    buttonObject.clear();\n    if (!show) {\n      buttonObject.hitArea = new PIXI.Rectangle(0, 0, 0, 0);\n      return;\n    }\n\n    buttonObject.beginFill(0xffffff);\n    buttonObject.lineStyle(1, 0x6868e8, 1);\n    buttonObject.fillAlpha = 0.9;\n    if (shape === RECTANGLE_BUTTON_SHAPE) {\n      buttonObject.drawRect(canvasPosition[0], canvasPosition[1], size, size);\n    } else if (shape === CIRCLE_BUTTON_SHAPE) {\n      buttonObject.drawCircle(\n        canvasPosition[0] + size / 2,\n        canvasPosition[1] + size / 2,\n        size / 2\n      );\n    }\n\n    buttonObject.endFill();\n    buttonObject.hitArea = new PIXI.Rectangle(\n      canvasPosition[0],\n      canvasPosition[1],\n      size,\n      size\n    );\n  }\n\n  render() {\n    const { buttonSize, smallButtonSize, buttonPadding } = getButtonSizes(\n      this._screenType\n    );\n    const selection = this.instancesSelection.getSelectedInstances();\n    let x1 = 0;\n    let y1 = 0;\n    let x2 = 0;\n    let y2 = 0;\n\n    //Update the selection rectangle of each instance\n    for (var i = 0; i < selection.length; i++) {\n      if (this.selectedRectangles.length === i) {\n        const newRectangle = new PIXI.Graphics();\n        newRectangle.hitArea = new PIXI.Rectangle(0, 0, 0, 0);\n        this.selectedRectangles.push(newRectangle);\n        this.rectanglesContainer.addChild(newRectangle);\n      }\n\n      const instance = selection[i];\n      const instanceRect = this.instanceMeasurer.getInstanceRect(instance);\n      const selectionRectangle = transformRect(\n        this.toCanvasCoordinates,\n        instanceRect\n      );\n\n      this.selectedRectangles[i].clear();\n      this.selectedRectangles[i].beginFill(0x6868e8);\n      this.selectedRectangles[i].lineStyle(1, 0x6868e8, 1);\n      this.selectedRectangles[i].fillAlpha = 0.3;\n      this.selectedRectangles[i].alpha = 0.8;\n      this.selectedRectangles[i].drawRect(\n        selectionRectangle.x,\n        selectionRectangle.y,\n        selectionRectangle.width,\n        selectionRectangle.height\n      );\n      this.selectedRectangles[i].endFill();\n\n      if (i === 0) {\n        x1 = instanceRect.x;\n        y1 = instanceRect.y;\n        x2 = instanceRect.x + instanceRect.width;\n        y2 = instanceRect.y + instanceRect.height;\n      } else {\n        if (instanceRect.x < x1) x1 = instanceRect.x;\n        if (instanceRect.y < y1) y1 = instanceRect.y;\n        if (instanceRect.x + instanceRect.width > x2)\n          x2 = instanceRect.x + instanceRect.width;\n        if (instanceRect.y + instanceRect.height > y2)\n          y2 = instanceRect.y + instanceRect.height;\n      }\n    }\n\n    while (this.selectedRectangles.length > selection.length) {\n      this.rectanglesContainer.removeChild(this.selectedRectangles.pop());\n    }\n\n    //Position the resize button.\n    const show = selection.length !== 0;\n    const resizeButtonPos = this.toCanvasCoordinates(x2, y2);\n    resizeButtonPos[0] += buttonPadding;\n    resizeButtonPos[1] += buttonPadding;\n\n    const rightResizeButtonPos = this.toCanvasCoordinates(\n      x2,\n      y1 + (y2 - y1) / 2\n    );\n    rightResizeButtonPos[0] += buttonPadding;\n    rightResizeButtonPos[1] -= smallButtonSize / 2;\n\n    const bottomResizeButtonPos = this.toCanvasCoordinates(\n      x1 + (x2 - x1) / 2,\n      y2\n    );\n    bottomResizeButtonPos[0] -= smallButtonSize / 2;\n    bottomResizeButtonPos[1] += buttonPadding;\n\n    const rotateButtonPos = this.toCanvasCoordinates(x1 + (x2 - x1) / 2, y1);\n    rotateButtonPos[0] -= smallButtonSize / 2;\n    rotateButtonPos[1] -= buttonPadding * 4;\n\n    this._renderButton(show, this.resizeButton, resizeButtonPos, buttonSize);\n    this._renderButton(\n      show,\n      this.rightResizeButton,\n      rightResizeButtonPos,\n      smallButtonSize\n    );\n    this._renderButton(\n      show,\n      this.bottomResizeButton,\n      bottomResizeButtonPos,\n      smallButtonSize\n    );\n    this._renderButton(\n      show,\n      this.rotateButton,\n      rotateButtonPos,\n      smallButtonSize,\n      CIRCLE_BUTTON_SHAPE\n    );\n  }\n}\n","import transformRect from '../Utils/TransformRect';\nimport * as PIXI from 'pixi.js';\n\nexport default class InstancesSelection {\n  constructor({ instanceMeasurer, toCanvasCoordinates }) {\n    this.instanceMeasurer = instanceMeasurer;\n    this.toCanvasCoordinates = toCanvasCoordinates;\n\n    this.highlightedInstance = null;\n    this.highlightRectangle = new PIXI.Graphics();\n    this.highlightRectangle.hitArea = new PIXI.Rectangle(0, 0, 0, 0);\n\n    this.tooltipBackground = new PIXI.Graphics();\n    this.tooltipText = new PIXI.Text('', {\n      fontSize: 15,\n      fill: 0xffffff,\n      align: 'center',\n    });\n    this.highlightRectangle.addChild(this.tooltipBackground);\n    this.highlightRectangle.addChild(this.tooltipText);\n  }\n\n  setInstance(instance) {\n    this.highlightedInstance = instance;\n  }\n\n  getInstance() {\n    return this.highlightedInstance;\n  }\n\n  getPixiObject(instance) {\n    return this.highlightRectangle;\n  }\n\n  render() {\n    if (this.highlightedInstance === null) {\n      this.highlightRectangle.visible = false;\n      return;\n    }\n\n    const highlightRectangle = transformRect(\n      this.toCanvasCoordinates,\n      this.instanceMeasurer.getInstanceRect(this.highlightedInstance)\n    );\n\n    this.highlightRectangle.visible = true;\n    this.highlightRectangle.clear();\n    this.highlightRectangle.beginFill(0xeeeeff);\n    this.highlightRectangle.fillAlpha = 0.1;\n    this.highlightRectangle.alpha = 0.8;\n    this.highlightRectangle.lineStyle(1, 0x000000, 1);\n    this.highlightRectangle.drawRect(\n      highlightRectangle.x,\n      highlightRectangle.y,\n      highlightRectangle.width,\n      highlightRectangle.height\n    );\n    this.highlightRectangle.endFill();\n\n    const tooltipInfo =\n      this.highlightedInstance.getObjectName() +\n      '\\n' +\n      'X: ' +\n      parseInt(this.highlightedInstance.getX()) +\n      '  Y: ' +\n      parseInt(this.highlightedInstance.getY()) +\n      '\\n' +\n      'Layer: ' +\n      this.highlightedInstance.getLayer() +\n      '  Z: ' +\n      this.highlightedInstance.getZOrder() +\n      '\\n';\n    this.tooltipText.text = tooltipInfo;\n\n    this.tooltipText.x = Math.round(\n      highlightRectangle.x -\n        this.tooltipText.width / 2 +\n        highlightRectangle.width / 2\n    );\n    this.tooltipText.y = Math.round(\n      highlightRectangle.y - this.tooltipText.height\n    );\n\n    const padding = 5;\n    this.tooltipBackground.clear();\n    this.tooltipBackground.beginFill(0x000000, 0.8);\n    this.tooltipBackground.drawRoundedRect(\n      this.tooltipText.x - padding,\n      this.tooltipText.y - padding,\n      this.tooltipText.width + padding * 2,\n      this.tooltipText.height - padding,\n      4\n    );\n    this.tooltipBackground.endFill();\n  }\n}\n","export default class InstancesResizer {\n  constructor({ instanceMeasurer, options }) {\n    this.instanceMeasurer = instanceMeasurer;\n    this.options = options;\n    this.instanceSizes = {};\n    this.totalDeltaX = 0;\n    this.totalDeltaY = 0;\n  }\n\n  setOptions(options) {\n    this.options = options;\n  }\n\n  _roundWidth(width) {\n    if (!this.options.snap || !this.options.grid || this.options.gridWidth <= 0)\n      return Math.max(Math.round(width), 1);\n\n    return Math.max(\n      Math.round(width / this.options.gridWidth) * this.options.gridWidth,\n      1\n    );\n  }\n\n  _roundHeight(height) {\n    if (\n      !this.options.snap ||\n      !this.options.grid ||\n      this.options.gridHeight <= 0\n    )\n      return Math.max(Math.round(height), 1);\n\n    return Math.max(\n      Math.round(height / this.options.gridHeight) * this.options.gridHeight,\n      1\n    );\n  }\n\n  _getSizeDeltaX(proportional, initialSize) {\n    if (proportional && Math.abs(this.totalDeltaX) < Math.abs(this.totalDeltaY))\n      return (initialSize.width / initialSize.height) * this.totalDeltaY;\n\n    return this.totalDeltaX;\n  }\n\n  _getSizeDeltaY(proportional, initialSize) {\n    if (proportional && Math.abs(this.totalDeltaY) < Math.abs(this.totalDeltaX))\n      return (initialSize.height / initialSize.width) * this.totalDeltaX;\n\n    return this.totalDeltaY;\n  }\n\n  resizeBy(instances, deltaX, deltaY, proportional) {\n    this.totalDeltaX += deltaX;\n    this.totalDeltaY += deltaY;\n\n    for (let i = 0; i < instances.length; i++) {\n      const selectedInstance = instances[i];\n\n      if (!selectedInstance.hasCustomSize()) {\n        selectedInstance.setCustomWidth(\n          this.instanceMeasurer.getInstanceWidth(selectedInstance)\n        );\n        selectedInstance.setCustomHeight(\n          this.instanceMeasurer.getInstanceHeight(selectedInstance)\n        );\n      }\n\n      let initialSize = this.instanceSizes[selectedInstance.ptr];\n      if (!initialSize) {\n        initialSize = this.instanceSizes[selectedInstance.ptr] = {\n          width: selectedInstance.getCustomWidth(),\n          height: selectedInstance.getCustomHeight(),\n        };\n      }\n\n      selectedInstance.setHasCustomSize(true);\n      selectedInstance.setCustomWidth(\n        this._roundWidth(\n          initialSize.width + this._getSizeDeltaX(proportional, initialSize)\n        )\n      );\n      selectedInstance.setCustomHeight(\n        this._roundHeight(\n          initialSize.height + this._getSizeDeltaY(proportional, initialSize)\n        )\n      );\n    }\n  }\n\n  endResize() {\n    this.instanceSizes = {};\n    this.totalDeltaX = 0;\n    this.totalDeltaY = 0;\n  }\n}\n","export default class InstancesRotator {\n  constructor() {\n    this.instanceAngles = {};\n    this.totalDeltaX = 0;\n    this.totalDeltaY = 0;\n  }\n\n  _getNewAngle(proportional: boolean, initialAngle: number) {\n    const angle =\n      (Math.atan2(this.totalDeltaY, this.totalDeltaX) * 180) / Math.PI +\n      initialAngle;\n    return proportional ? Math.round(angle / 15) * 15 : angle;\n  }\n\n  rotateBy(instances, deltaX, deltaY, proportional) {\n    this.totalDeltaX += deltaX;\n    this.totalDeltaY += deltaY;\n\n    for (let i = 0; i < instances.length; i++) {\n      const selectedInstance = instances[i];\n      let initialAngle = this.instanceAngles[selectedInstance.ptr];\n      if (initialAngle === undefined) {\n        initialAngle = this.instanceAngles[\n          selectedInstance.ptr\n        ] = selectedInstance.getAngle();\n      }\n      selectedInstance.setAngle(this._getNewAngle(proportional, initialAngle));\n    }\n  }\n\n  endRotate() {\n    this.instanceAngles = {};\n    this.totalDeltaX = 0;\n    this.totalDeltaY = 0;\n  }\n}\n","import { roundPosition } from '../Utils/GridHelpers';\n\nexport default class InstancesMover {\n  constructor({ instanceMeasurer, options }) {\n    this.instanceMeasurer = instanceMeasurer;\n    this.options = options;\n    this.instancePositions = {};\n    this.totalDeltaX = 0;\n    this.totalDeltaY = 0;\n  }\n\n  setOptions(options) {\n    this.options = options;\n  }\n\n  _roundXPosition(x, noGridSnap) {\n    if (!this.options.snap || !this.options.grid || noGridSnap)\n      return Math.round(x);\n\n    return roundPosition(x, this.options.gridWidth, this.options.gridOffsetX);\n  }\n\n  _roundYPosition(y, noGridSnap) {\n    if (!this.options.snap || !this.options.grid || noGridSnap)\n      return Math.round(y);\n\n    return roundPosition(y, this.options.gridHeight, this.options.gridOffsetY);\n  }\n\n  _getMoveDeltaX(followAxis) {\n    if (followAxis && Math.abs(this.totalDeltaX) < Math.abs(this.totalDeltaY))\n      return 0;\n\n    return this.totalDeltaX;\n  }\n\n  _getMoveDeltaY(followAxis) {\n    if (followAxis && Math.abs(this.totalDeltaY) < Math.abs(this.totalDeltaX))\n      return 0;\n\n    return this.totalDeltaY;\n  }\n\n  moveBy(instances, deltaX, deltaY, followAxis, noGridSnap) {\n    this.totalDeltaX += deltaX;\n    this.totalDeltaY += deltaY;\n\n    for (var i = 0; i < instances.length; i++) {\n      const selectedInstance = instances[i];\n\n      let initialPosition = this.instancePositions[selectedInstance.ptr];\n      if (!initialPosition) {\n        initialPosition = this.instancePositions[selectedInstance.ptr] = {\n          x: selectedInstance.getX(),\n          y: selectedInstance.getY(),\n        };\n      }\n\n      selectedInstance.setX(\n        this._roundXPosition(\n          initialPosition.x + this._getMoveDeltaX(followAxis),\n          noGridSnap\n        )\n      );\n      selectedInstance.setY(\n        this._roundYPosition(\n          initialPosition.y + this._getMoveDeltaY(followAxis),\n          noGridSnap\n        )\n      );\n    }\n  }\n\n  endMove() {\n    this.instancePositions = {};\n    this.totalDeltaX = 0;\n    this.totalDeltaY = 0;\n  }\n}\n","import * as PIXI from 'pixi.js';\n\nexport default class SelectionRectangle {\n  constructor({ viewPosition, options }) {\n    this.viewPosition = viewPosition;\n    this.options = options;\n\n    this.pixiGrid = new PIXI.Graphics();\n    this.pixiGrid.hitArea = new PIXI.Rectangle(0, 0, 0, 0);\n  }\n\n  setOptions(options) {\n    this.options = options;\n  }\n\n  getPixiObject() {\n    return this.pixiGrid;\n  }\n\n  render() {\n    const options = this.options;\n\n    if (!options.grid) {\n      this.pixiGrid.visible = false;\n      return;\n    }\n\n    this.pixiGrid.visible = true;\n    this.pixiGrid.clear();\n    this.pixiGrid.beginFill(0x6868e8);\n    this.pixiGrid.lineStyle(1, 0x6868e8, 1);\n    this.pixiGrid.fillAlpha = 0.1;\n    this.pixiGrid.alpha = 0.8;\n\n    const sceneStartPoint = this.viewPosition.toSceneCoordinates(0, 0);\n    const sceneEndPoint = this.viewPosition.toSceneCoordinates(\n      this.viewPosition.getWidth(),\n      this.viewPosition.getHeight()\n    );\n\n    const startXPos =\n      Math.floor(sceneStartPoint[0] / options.gridWidth) * options.gridWidth;\n    const startYPos =\n      Math.floor(sceneStartPoint[1] / options.gridHeight) * options.gridHeight;\n\n    const endXPos =\n      Math.ceil(sceneEndPoint[0] / options.gridWidth) * options.gridWidth;\n    const endYPos =\n      Math.ceil(sceneEndPoint[1] / options.gridHeight) * options.gridHeight;\n\n    for (\n      let Xpos = startXPos + options.gridOffsetX;\n      Xpos < endXPos;\n      Xpos += options.gridWidth\n    ) {\n      const start = this.viewPosition.toCanvasCoordinates(Xpos, startYPos);\n      const end = this.viewPosition.toCanvasCoordinates(Xpos, endYPos);\n\n      this.pixiGrid.moveTo(start[0], start[1]);\n      this.pixiGrid.lineTo(end[0], end[1]);\n    }\n\n    for (\n      let Ypos = startYPos + options.gridOffsetY;\n      Ypos < endYPos;\n      Ypos += options.gridHeight\n    ) {\n      const start = this.viewPosition.toCanvasCoordinates(startXPos, Ypos);\n      const end = this.viewPosition.toCanvasCoordinates(endXPos, Ypos);\n\n      this.pixiGrid.moveTo(start[0], start[1]);\n      this.pixiGrid.lineTo(end[0], end[1]);\n    }\n\n    this.pixiGrid.endFill();\n  }\n}\n","import * as PIXI from 'pixi.js';\nimport transformRect from '../Utils/TransformRect';\nimport { rgbToHexNumber } from '../Utils/ColorTransformer';\n\nexport default class WindowBorder {\n  constructor({ project, layout, toCanvasCoordinates }) {\n    this.project = project;\n    this.layout = layout;\n    this.toCanvasCoordinates = toCanvasCoordinates;\n\n    this.pixiRectangle = new PIXI.Graphics();\n    this.pixiRectangle.hitArea = new PIXI.Rectangle(0, 0, 0, 0);\n    this.windowRectangle = {\n      x: 0,\n      y: 0,\n      width: this.project.getGameResolutionWidth(),\n      height: this.project.getGameResolutionHeight(),\n    };\n  }\n\n  getPixiObject() {\n    return this.pixiRectangle;\n  }\n\n  render() {\n    this.windowRectangle.width = this.project.getGameResolutionWidth();\n    this.windowRectangle.height = this.project.getGameResolutionHeight();\n\n    const displayedRectangle = transformRect(\n      this.toCanvasCoordinates,\n      this.windowRectangle\n    );\n\n    this.pixiRectangle.clear();\n    this.pixiRectangle.beginFill(0x000000);\n    this.pixiRectangle.lineStyle(\n      1,\n      rgbToHexNumber(\n        128 + (this.layout.getBackgroundColorRed() % 256),\n        128 + (this.layout.getBackgroundColorBlue() % 256),\n        128 + (this.layout.getBackgroundColorGreen() % 256)\n      ),\n      1\n    );\n    this.pixiRectangle.alpha = 1;\n    this.pixiRectangle.fillAlpha = 0;\n    this.pixiRectangle.drawRect(\n      displayedRectangle.x,\n      displayedRectangle.y,\n      displayedRectangle.width,\n      displayedRectangle.height\n    );\n    this.pixiRectangle.endFill();\n  }\n}\n","import * as PIXI from 'pixi.js';\nimport transformRect from '../Utils/TransformRect';\n\nexport default class WindowBorder {\n  constructor({ project, viewPosition, options }) {\n    this.project = project;\n    this.viewPosition = viewPosition;\n    this.options = options;\n\n    this.pixiRectangle = new PIXI.Graphics();\n    this.pixiRectangle.hitArea = new PIXI.Rectangle(0, 0, 0, 0);\n    this.windowRectangle = {\n      x: 0,\n      y: 0,\n      width: 0,\n      height: 0,\n    };\n  }\n\n  setOptions(options) {\n    this.options = options;\n  }\n\n  getPixiObject() {\n    return this.pixiRectangle;\n  }\n\n  render() {\n    const options = this.options;\n\n    if (!options.windowMask) {\n      this.pixiRectangle.visible = false;\n      return;\n    }\n\n    const width = this.project.getGameResolutionWidth();\n    const height = this.project.getGameResolutionHeight();\n    this.windowRectangle.x = this.viewPosition.getViewX() - width / 2;\n    this.windowRectangle.y = this.viewPosition.getViewY() - height / 2;\n    this.windowRectangle.width = width;\n    this.windowRectangle.height = height;\n\n    const displayedRectangle = transformRect(\n      this.viewPosition.toCanvasCoordinates,\n      this.windowRectangle\n    );\n\n    this.pixiRectangle.visible = true;\n    this.pixiRectangle.clear();\n    this.pixiRectangle.beginFill(0x000000);\n    this.pixiRectangle.lineStyle(1, 0x000000, 1);\n    this.pixiRectangle.alpha = 1;\n    this.pixiRectangle.fillAlpha = 0;\n    this.pixiRectangle.drawRect(\n      displayedRectangle.x,\n      displayedRectangle.y,\n      displayedRectangle.width,\n      displayedRectangle.height\n    );\n    this.pixiRectangle.endFill();\n  }\n}\n","// @flow\nimport * as PIXI from 'pixi.js';\nimport { rgbToHex } from '../Utils/ColorTransformer';\n\ntype Props = {|\n  layout: gdLayout,\n  pixiRenderer: PIXI.Renderer,\n|};\n\nexport default class BackgroundColor {\n  layout: gdLayout;\n  pixiRenderer: PIXI.Renderer;\n\n  constructor({ layout, pixiRenderer }: Props) {\n    this.layout = layout;\n    this.pixiRenderer = pixiRenderer;\n  }\n\n  render() {\n    this.pixiRenderer.backgroundColor = parseInt(\n      parseInt(\n        rgbToHex(\n          this.layout.getBackgroundColorRed(),\n          this.layout.getBackgroundColorGreen(),\n          this.layout.getBackgroundColorBlue()\n        ),\n        16\n      ),\n      10\n    );\n  }\n}\n","// @flow\n\n/**\n * Provide a method shouldUpdate that can be called in a game loop or in\n * a method used in renderAnimationFrame, and which indicate if the rendering/update\n * of the scene should be done according to the desired framerate.\n */\nexport default class FpsLimiter {\n  _lastFrameTime: number;\n  _interval: number;\n  _forceUpdate: boolean;\n\n  constructor(maxFps: number) {\n    this._lastFrameTime = Date.now();\n    this._interval = 1000 / maxFps;\n    this._forceUpdate = false;\n  }\n\n  shouldUpdate() {\n    const now = Date.now();\n    const delta = now - this._lastFrameTime;\n\n    if (delta > this._interval || this._forceUpdate) {\n      this._lastFrameTime = now - (delta % this._interval);\n      this._forceUpdate = false;\n      return true;\n    }\n\n    return false;\n  }\n\n  forceNextUpdate() {\n    this._forceUpdate = true;\n  }\n}\n","import * as PIXI from 'pixi.js';\n\n// PIXI has a ticker that is used by PIXI InteractionManager, and which\n// frequently check if interaction happened. We may want to disable it\n// when it's useless to do these interaction checks to save CPU usage.\n\n/**\n *  Stop the PIXI Ticker used to monitor interactions\n */\nexport const stopPIXITicker = () => {\n  const ticker = PIXI.ticker && PIXI.ticker.shared;\n  if (ticker) ticker.stop();\n};\n\n/**\n * Start the PIXI Ticker used to monitor interactions\n */\nexport const startPIXITicker = () => {\n  // Timeout ensure that the ticker is started even if other components\n  // call stopPIXITicker during the same tick (for example, when switching\n  // between SceneEditor tabs).\n  setTimeout(() => {\n    const ticker = PIXI.ticker && PIXI.ticker.shared;\n    if (ticker) ticker.start();\n  }, 50);\n};\n","// @flow\nimport * as PIXI from 'pixi.js';\n\ntype Props = {\n  getLastCursorSceneCoordinates: () => [number, number],\n  width: number,\n  height: number,\n};\n\nexport default class StatusBar {\n  _width: number;\n  _height: number;\n  _getLastCursorSceneCoordinates: () => [number, number];\n  _statusBarContainer: PIXI.Container;\n  _statusBarBackground: PIXI.Graphics;\n  _statusBarText: PIXI.Text;\n\n  constructor({ getLastCursorSceneCoordinates, width, height }: Props) {\n    this._getLastCursorSceneCoordinates = getLastCursorSceneCoordinates;\n    this._statusBarContainer = new PIXI.Container();\n    this._statusBarContainer.alpha = 0.8;\n    this._statusBarContainer.hitArea = new PIXI.Rectangle(0, 0, 0, 0);\n    this._statusBarBackground = new PIXI.Graphics();\n    this._statusBarText = new PIXI.Text('', {\n      fontSize: 15,\n      fill: 0xffffff,\n      align: 'left',\n    });\n    this._statusBarContainer.addChild(this._statusBarBackground);\n    this._statusBarContainer.addChild(this._statusBarText);\n    this.resize(width, height);\n  }\n\n  resize(width: number, height: number) {\n    this._width = width;\n    this._height = height;\n  }\n\n  getPixiObject(): PIXI.Container {\n    return this._statusBarContainer;\n  }\n\n  render() {\n    const padding = 5;\n    const borderRadius = 4;\n    const [x, y] = this._getLastCursorSceneCoordinates();\n    this._statusBarText.text = `${x.toFixed(0)};${y.toFixed(0)}`;\n    this._statusBarText.position.x = 0 + padding;\n    this._statusBarText.position.y = Math.round(\n      this._height - padding - this._statusBarText.height\n    );\n\n    this._statusBarBackground.clear();\n    this._statusBarBackground.beginFill(0x000000, 0.8);\n    this._statusBarBackground.drawRoundedRect(\n      0 - borderRadius,\n      this._height - padding * 2 - this._statusBarText.height,\n      this._statusBarText.width + padding * 2 + borderRadius,\n      this._statusBarText.height + padding * 2 + borderRadius,\n      borderRadius\n    );\n    this._statusBarBackground.endFill();\n  }\n}\n","// @flow\n\ntype Props = {|\n  canvas: HTMLDivElement,\n  shouldMoveView: () => boolean,\n|};\n\n/**\n * Change the cursor displayed when hovering the canvas.\n *\n * Some elements on the canvas (for example, resize buttons)\n * can also set their own cursor - this class is only for the canvas.\n */\nexport default class CanvasCursor {\n  canvas: HTMLDivElement;\n  shouldMoveView: () => boolean;\n\n  constructor({ canvas, shouldMoveView }: Props) {\n    this.canvas = canvas;\n    this.shouldMoveView = shouldMoveView;\n  }\n\n  render() {\n    if (this.shouldMoveView()) {\n      this.canvas.style.cursor = 'grab';\n      if (this.canvas.style.cursor !== 'grab') {\n        this.canvas.style.cursor = '-webkit-grab';\n      }\n      return;\n    }\n\n    this.canvas.style.cursor = 'default';\n  }\n}\n","import React, { Component } from 'react';\nimport gesture from 'pixi-simple-gesture';\nimport DeprecatedKeyboardShortcuts from '../UI/KeyboardShortcuts/DeprecatedKeyboardShortcuts';\nimport InstancesRenderer from './InstancesRenderer';\nimport ViewPosition from './ViewPosition';\nimport SelectedInstances from './SelectedInstances';\nimport HighlightedInstance from './HighlightedInstance';\nimport SelectionRectangle from './SelectionRectangle';\nimport InstancesResizer from './InstancesResizer';\nimport InstancesRotator from './InstancesRotator';\nimport InstancesMover from './InstancesMover';\nimport Grid from './Grid';\nimport WindowBorder from './WindowBorder';\nimport WindowMask from './WindowMask';\nimport BackgroundColor from './BackgroundColor';\nimport * as PIXI from 'pixi.js';\nimport FpsLimiter from './FpsLimiter';\nimport { startPIXITicker, stopPIXITicker } from '../Utils/PIXITicker';\nimport StatusBar from './StatusBar';\nimport CanvasCursor from './CanvasCursor';\nimport InstancesAdder from './InstancesAdder';\nimport { makeDropTarget } from '../UI/DragAndDrop/DropTarget';\nimport { objectWithContextReactDndType } from '../ObjectsList';\nimport PinchHandler, { shouldBeHandledByPinch } from './PinchHandler';\n\nconst styles = {\n  canvasArea: { flex: 1, position: 'absolute', overflow: 'hidden' },\n  dropCursor: { cursor: 'copy' },\n};\n\nconst DropTarget = makeDropTarget(objectWithContextReactDndType);\n\nexport default class InstancesEditorContainer extends Component {\n  lastContextMenuX = 0;\n  lastContextMenuY = 0;\n  lastCursorX = 0;\n  lastCursorY = 0;\n  fpsLimiter = new FpsLimiter(28);\n\n  componentDidMount() {\n    // Initialize the PIXI renderer, if possible\n    if (this.canvasArea && !this.pixiRenderer) {\n      this._initializeCanvasAndRenderer();\n    }\n  }\n\n  componentDidUpdate() {\n    // Initialize the PIXI renderer, if not already done.\n    // This can happen if canvasArea was not rendered\n    // just after the mount (depends on react-dnd versions?).\n    if (this.canvasArea && !this.pixiRenderer) {\n      this._initializeCanvasAndRenderer();\n    }\n  }\n\n  _initializeCanvasAndRenderer() {\n    // project can be used here for initializing stuff, but don't keep references to it.\n    // Instead, create editors in _mountEditorComponents (as they will be destroyed/recreated\n    // if the project changes).\n    const { project } = this.props;\n\n    //This prevents flickering on some mobile devices\n    PIXI.glCore.VertexArrayObject.FORCE_NATIVE = true;\n\n    //Create the renderer and setup the rendering area for scene editor.\n    //\"preserveDrawingBuffer: true\" is needed to avoid flickering and background issues on some mobile phones (see #585 #572 #566 #463)\n    this.pixiRenderer = PIXI.autoDetectRenderer(\n      this.props.width,\n      this.props.height,\n      {\n        preserveDrawingBuffer: true,\n        antialias: false,\n      } // Disable anti-aliasing to avoid rendering issue (1px width line of extra pixels) when rendering pixel perfect tiled sprites.\n    );\n    this.canvasArea.appendChild(this.pixiRenderer.view);\n    this.pixiRenderer.view.addEventListener('contextmenu', e => {\n      e.preventDefault();\n\n      this.lastContextMenuX = e.offsetX;\n      this.lastContextMenuY = e.offsetY;\n      if (this.props.onContextMenu)\n        this.props.onContextMenu(e.clientX, e.clientY);\n\n      return false;\n    });\n    this.pixiRenderer.view.onmousewheel = event => {\n      if (this.keyboardShortcuts.shouldZoom()) {\n        this.zoomBy(event.wheelDelta / 5000);\n      } else if (this.keyboardShortcuts.shouldScrollHorizontally()) {\n        this.viewPosition.scrollBy(-event.wheelDelta / 10, 0);\n      } else {\n        this.viewPosition.scrollBy(event.deltaX / 10, event.deltaY / 10);\n      }\n\n      if (this.props.onViewPositionChanged) {\n        this.props.onViewPositionChanged(this.viewPosition);\n      }\n      event.preventDefault();\n    };\n    this.pixiRenderer.view.setAttribute('tabIndex', -1);\n    this.pixiRenderer.view.addEventListener('focus', e => {\n      this.keyboardShortcuts.focus();\n    });\n    this.pixiRenderer.view.addEventListener('blur', e => {\n      this.keyboardShortcuts.blur();\n    });\n    this.pixiRenderer.view.addEventListener('mouseover', e => {\n      this.keyboardShortcuts.focus();\n    });\n    this.pixiRenderer.view.addEventListener('mouseout', e => {\n      this.keyboardShortcuts.blur();\n    });\n\n    this.pixiContainer = new PIXI.Container();\n\n    this.backgroundArea = new PIXI.Container();\n    this.backgroundArea.hitArea = new PIXI.Rectangle(\n      0,\n      0,\n      this.props.width,\n      this.props.height\n    );\n    gesture.panable(this.backgroundArea);\n    this.backgroundArea.on('mousedown', event =>\n      this._onBackgroundClicked(event.data.global.x, event.data.global.y)\n    );\n    this.backgroundArea.on('touchstart', event => {\n      if (shouldBeHandledByPinch(event.data && event.data.originalEvent)) {\n        return;\n      }\n\n      this._onBackgroundClicked(event.data.global.x, event.data.global.y);\n    });\n    this.backgroundArea.on('mousemove', event =>\n      this._onMouseMove(event.data.global.x, event.data.global.y)\n    );\n    this.backgroundArea.on('panmove', event =>\n      this._onPanMove(\n        event.deltaX,\n        event.deltaY,\n        event.data.global.x,\n        event.data.global.y\n      )\n    );\n    this.backgroundArea.on('panend', event => this._onPanEnd());\n    this.pixiContainer.addChild(this.backgroundArea);\n\n    this.viewPosition = new ViewPosition({\n      initialViewX: project ? project.getGameResolutionWidth() / 2 : 0,\n      initialViewY: project ? project.getGameResolutionHeight() / 2 : 0,\n      width: this.props.width,\n      height: this.props.height,\n      options: this.props.options,\n    });\n    this.pixiContainer.addChild(this.viewPosition.getPixiContainer());\n\n    this.grid = new Grid({\n      viewPosition: this.viewPosition,\n      options: this.props.options,\n    });\n    this.pixiContainer.addChild(this.grid.getPixiObject());\n\n    this.keyboardShortcuts = new DeprecatedKeyboardShortcuts({\n      onDelete: this.props.onDeleteSelection,\n      onMove: this.moveSelection,\n      onCopy: this.props.onCopy,\n      onCut: this.props.onCut,\n      onPaste: this.props.onPaste,\n      onUndo: this.props.onUndo,\n      onRedo: this.props.onRedo,\n      onZoomOut: this.props.onZoomOut,\n      onZoomIn: this.props.onZoomIn,\n    });\n\n    this.pinchHandler = new PinchHandler({\n      canvas: this.pixiRenderer.view,\n      setZoomFactor: this.setZoomFactor,\n      getZoomFactor: this.getZoomFactor,\n      viewPosition: this.viewPosition,\n    });\n\n    this.canvasCursor = new CanvasCursor({\n      canvas: this.canvasArea,\n      shouldMoveView: () => this.keyboardShortcuts.shouldMoveView(),\n    });\n\n    this._instancesAdder = new InstancesAdder({\n      instances: this.props.initialInstances,\n      options: this.props.options,\n    });\n\n    this._mountEditorComponents(this.props);\n    this._renderScene();\n  }\n\n  /**\n   * Force the internal InstancesRenderer to be destroyed and recreated\n   * (as well as other components holding references to instances). Call\n   * this when the initial instances were recreated to ensure that there\n   * is not mismatch between renderers and the instances that were updated.\n   */\n  forceRemount() {\n    this._mountEditorComponents(this.props);\n  }\n\n  _mountEditorComponents(props) {\n    //Remove and delete any existing editor component\n    if (this.highlightedInstance) {\n      this.pixiContainer.removeChild(this.highlightedInstance.getPixiObject());\n    }\n    if (this.selectedInstances) {\n      this.pixiContainer.removeChild(this.selectedInstances.getPixiContainer());\n    }\n    if (this.instancesRenderer) {\n      this.viewPosition\n        .getPixiContainer()\n        .removeChild(this.instancesRenderer.getPixiContainer());\n      this.instancesRenderer.delete();\n    }\n    if (this.selectionRectangle) {\n      this.pixiContainer.removeChild(this.selectionRectangle.getPixiObject());\n      this.selectionRectangle.delete();\n    }\n    if (this.windowBorder) {\n      this.pixiContainer.removeChild(this.windowBorder.getPixiObject());\n    }\n    if (this.windowMask) {\n      this.pixiContainer.removeChild(this.windowMask.getPixiObject());\n    }\n    if (this.statusBar) {\n      this.pixiContainer.removeChild(this.statusBar.getPixiObject());\n    }\n\n    this.backgroundColor = new BackgroundColor({\n      layout: props.layout,\n      pixiRenderer: this.pixiRenderer,\n    });\n    this.instancesRenderer = new InstancesRenderer({\n      project: props.project,\n      layout: props.layout,\n      instances: props.initialInstances,\n      viewPosition: this.viewPosition,\n      onOverInstance: this._onOverInstance,\n      onMoveInstance: this._onMoveInstance,\n      onMoveInstanceEnd: this._onMoveInstanceEnd,\n      onDownInstance: this._onDownInstance,\n      onOutInstance: this._onOutInstance,\n      onInstanceClicked: this._onInstanceClicked,\n      onInstanceDoubleClicked: this._onInstanceDoubleClicked,\n    });\n    this.selectionRectangle = new SelectionRectangle({\n      instances: props.initialInstances,\n      instanceMeasurer: this.instancesRenderer.getInstanceMeasurer(),\n      toSceneCoordinates: this.viewPosition.toSceneCoordinates,\n    });\n    this.selectedInstances = new SelectedInstances({\n      instancesSelection: this.props.instancesSelection,\n      onResize: this._onResize,\n      onResizeEnd: this._onResizeEnd,\n      onRotate: this._onRotate,\n      onRotateEnd: this._onRotateEnd,\n      instanceMeasurer: this.instancesRenderer.getInstanceMeasurer(),\n      toCanvasCoordinates: this.viewPosition.toCanvasCoordinates,\n      screenType: this.props.screenType,\n    });\n    this.highlightedInstance = new HighlightedInstance({\n      instanceMeasurer: this.instancesRenderer.getInstanceMeasurer(),\n      toCanvasCoordinates: this.viewPosition.toCanvasCoordinates,\n    });\n    this.instancesResizer = new InstancesResizer({\n      instanceMeasurer: this.instancesRenderer.getInstanceMeasurer(),\n      options: this.props.options,\n    });\n    this.instancesRotator = new InstancesRotator();\n    this.instancesMover = new InstancesMover({\n      instanceMeasurer: this.instancesRenderer.getInstanceMeasurer(),\n      options: this.props.options,\n    });\n    this.windowBorder = new WindowBorder({\n      project: props.project,\n      layout: props.layout,\n      toCanvasCoordinates: this.viewPosition.toCanvasCoordinates,\n    });\n    this.windowMask = new WindowMask({\n      project: props.project,\n      viewPosition: this.viewPosition,\n      options: this.props.options,\n    });\n    this.statusBar = new StatusBar({\n      width: this.props.width,\n      height: this.props.height,\n      getLastCursorSceneCoordinates: this.getLastCursorSceneCoordinates,\n    });\n\n    this.pixiContainer.addChild(this.selectionRectangle.getPixiObject());\n    this.viewPosition\n      .getPixiContainer()\n      .addChild(this.instancesRenderer.getPixiContainer());\n    this.pixiContainer.addChild(this.windowBorder.getPixiObject());\n    this.pixiContainer.addChild(this.windowMask.getPixiObject());\n    this.pixiContainer.addChild(this.selectedInstances.getPixiContainer());\n    this.pixiContainer.addChild(this.highlightedInstance.getPixiObject());\n    this.pixiContainer.addChild(this.statusBar.getPixiObject());\n  }\n\n  componentWillUnmount() {\n    // This is an antipattern and is theorically not needed, but help\n    // to protect against renders after the component is unmounted.\n    this._unmounted = true;\n\n    this.keyboardShortcuts.unmount();\n    this.selectionRectangle.delete();\n    this.instancesRenderer.delete();\n    this._instancesAdder.unmount();\n    this.pinchHandler.unmount();\n    if (this.nextFrame) cancelAnimationFrame(this.nextFrame);\n    stopPIXITicker();\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (\n      nextProps.width !== this.props.width ||\n      nextProps.height !== this.props.height\n    ) {\n      this.pixiRenderer.resize(nextProps.width, nextProps.height);\n      this.viewPosition.resize(nextProps.width, nextProps.height);\n      this.statusBar.resize(nextProps.width, nextProps.height);\n      this.backgroundArea.hitArea = new PIXI.Rectangle(\n        0,\n        0,\n        nextProps.width,\n        nextProps.height\n      );\n\n      // Avoid flickering that could happen while waiting for next animation frame.\n      this.fpsLimiter.forceNextUpdate();\n      this._renderScene();\n    }\n\n    if (nextProps.options !== this.props.options) {\n      this.grid.setOptions(nextProps.options);\n      this.instancesMover.setOptions(nextProps.options);\n      this.instancesResizer.setOptions(nextProps.options);\n      this.windowMask.setOptions(nextProps.options);\n      this.viewPosition.setOptions(nextProps.options);\n      this._instancesAdder.setOptions(nextProps.options);\n    }\n\n    if (nextProps.screenType !== this.props.screenType) {\n      this.selectedInstances.setScreenType(this.props.screenType);\n    }\n\n    if (\n      this.props.layout !== nextProps.layout ||\n      this.props.initialInstances !== nextProps.initialInstances ||\n      this.props.project !== nextProps.project\n    ) {\n      this._mountEditorComponents(nextProps);\n    }\n\n    // For avoiding useless renderings, which is costly for CPU/GPU, when the editor\n    // is not displayed, `pauseRendering` prop can be set to true.\n    if (nextProps.pauseRendering && !this.props.pauseRendering)\n      this.pauseSceneRendering();\n\n    if (!nextProps.pauseRendering && this.props.pauseRendering)\n      this.restartSceneRendering();\n  }\n\n  /**\n   * Delete instance renderers of the specified objects, which will then be recreated during\n   * the next render. Call this when an object resources may have changed (for example, a modified image),\n   * and you want the instances of objects to reflect the changes.\n   * See also ResourcesLoader and PixiResourcesLoader.\n   * @param {string} objectName The name of the object for which instance must be re-rendered.\n   */\n  resetRenderersFor(objectName) {\n    if (this.instancesRenderer)\n      this.instancesRenderer.resetRenderersFor(objectName);\n  }\n\n  zoomBy(value) {\n    this.setZoomFactor(this.getZoomFactor() + value);\n  }\n\n  getZoomFactor = () => {\n    return this.props.options.zoomFactor;\n  };\n\n  setZoomFactor = zoomFactor => {\n    this.props.onChangeOptions({\n      zoomFactor: Math.max(Math.min(zoomFactor, 10), 0.01),\n    });\n  };\n\n  /**\n   * Immediately add instances for the specified objects at the given\n   * position (in scene coordinates).\n   */\n  addInstances = (\n    pos /*: [number, number] */,\n    objectNames /*: Array<string> */\n  ) => {\n    this._instancesAdder.addInstances(pos, objectNames);\n  };\n\n  _onMouseMove = (x, y) => {\n    this.lastCursorX = x;\n    this.lastCursorY = y;\n  };\n\n  _onBackgroundClicked = (x, y) => {\n    this.lastCursorX = x;\n    this.lastCursorY = y;\n    this.pixiRenderer.view.focus();\n\n    // Selection rectangle is only drawn in _onPanMove,\n    // which can happen a few milliseconds after a background\n    // click/touch - enough to have the selection rectangle being\n    // offset from the first click - which looks laggy. Set\n    // the start position now.\n    if (!this.keyboardShortcuts.shouldMoveView()) {\n      this.selectionRectangle.startSelectionRectangle(x, y);\n    }\n\n    if (\n      !this.keyboardShortcuts.shouldMultiSelect() &&\n      !this.keyboardShortcuts.shouldMoveView()\n    ) {\n      this.props.instancesSelection.clearSelection();\n      this.props.onInstancesSelected([]);\n    }\n  };\n\n  _onPanMove = (deltaX, deltaY, x, y) => {\n    if (this.keyboardShortcuts.shouldMoveView()) {\n      const sceneDeltaX = deltaX / this.getZoomFactor();\n      const sceneDeltaY = deltaY / this.getZoomFactor();\n\n      this.viewPosition.scrollBy(-sceneDeltaX, -sceneDeltaY);\n\n      if (this.props.onViewPositionChanged) {\n        this.props.onViewPositionChanged(this.viewPosition);\n      }\n    } else {\n      this.selectionRectangle.updateSelectionRectangle(x, y);\n    }\n  };\n\n  _getLayersVisibility = () => {\n    const { layout } = this.props;\n    const layersVisibility = {};\n    for (let i = 0; i < layout.getLayersCount(); i++) {\n      layersVisibility[layout.getLayerAt(i).getName()] = layout\n        .getLayerAt(i)\n        .getVisibility();\n    }\n    return layersVisibility;\n  };\n\n  _onPanEnd = () => {\n    // When a pan is ended, this can be that either the user was making\n    // a selection, or that the user was moving the view.\n    if (this.selectionRectangle.hasStartedSelectionRectangle()) {\n      let instancesSelected = this.selectionRectangle.endSelectionRectangle();\n\n      this.props.instancesSelection.selectInstances(\n        instancesSelected,\n        this.keyboardShortcuts.shouldMultiSelect(),\n        this._getLayersVisibility()\n      );\n      instancesSelected = this.props.instancesSelection.getSelectedInstances();\n      this.props.onInstancesSelected(instancesSelected);\n    }\n  };\n\n  _onInstanceClicked = instance => {\n    this.pixiRenderer.view.focus();\n  };\n\n  _onInstanceDoubleClicked = instance => {\n    this.props.onInstanceDoubleClicked(instance);\n  };\n\n  _onOverInstance = instance => {\n    this.highlightedInstance.setInstance(instance);\n  };\n\n  _onDownInstance = instance => {\n    if (this.keyboardShortcuts.shouldMoveView()) {\n      // If the user wants to move the view, discard the click on an instance:\n      // it's just the beginning of the user panning the view.\n      return;\n    }\n\n    if (this.keyboardShortcuts.shouldCloneInstances()) {\n      const selectedInstances = this.props.instancesSelection.getSelectedInstances();\n      for (var i = 0; i < selectedInstances.length; i++) {\n        const instance = selectedInstances[i];\n        this.props.initialInstances.insertInitialInstance(instance);\n      }\n    } else {\n      this.props.instancesSelection.selectInstance(\n        instance,\n        this.keyboardShortcuts.shouldMultiSelect(),\n        this._getLayersVisibility()\n      );\n\n      if (this.props.onInstancesSelected) {\n        this.props.onInstancesSelected(\n          this.props.instancesSelection.getSelectedInstances()\n        );\n      }\n    }\n  };\n\n  _onOutInstance = instance => {\n    if (instance === this.highlightedInstance.getInstance())\n      this.highlightedInstance.setInstance(null);\n  };\n\n  _onMoveInstance = (instance, deltaX, deltaY) => {\n    const sceneDeltaX = deltaX / this.getZoomFactor();\n    const sceneDeltaY = deltaY / this.getZoomFactor();\n\n    // It is possible for the user to start moving an instance, then press the button\n    // to move the view, move it, then unpress it and continue to move the instance.\n    // This means that while we're in \"_onMoveInstance\", we must handle view moving.\n    if (this.keyboardShortcuts.shouldMoveView()) {\n      this.viewPosition.scrollBy(-sceneDeltaX, -sceneDeltaY);\n\n      if (this.props.onViewPositionChanged) {\n        this.props.onViewPositionChanged(this.viewPosition);\n      }\n      return;\n    }\n\n    if (!this.props.instancesSelection.isInstanceSelected(instance)) {\n      this._onInstanceClicked(instance);\n    }\n\n    const selectedInstances = this.props.instancesSelection.getSelectedInstances();\n    this.instancesMover.moveBy(\n      selectedInstances,\n      sceneDeltaX,\n      sceneDeltaY,\n      this.keyboardShortcuts.shouldFollowAxis(),\n      this.keyboardShortcuts.shouldNotSnapToGrid()\n    );\n  };\n\n  _onMoveInstanceEnd = () => {\n    this.instancesMover.endMove();\n\n    const selectedInstances = this.props.instancesSelection.getSelectedInstances();\n    this.props.onInstancesMoved(selectedInstances);\n  };\n\n  _onResize = (deltaX, deltaY) => {\n    const sceneDeltaX = deltaX / this.getZoomFactor();\n    const sceneDeltaY = deltaY / this.getZoomFactor();\n\n    const selectedInstances = this.props.instancesSelection.getSelectedInstances();\n    this.instancesResizer.resizeBy(\n      selectedInstances,\n      sceneDeltaX,\n      sceneDeltaY,\n      this.keyboardShortcuts.shouldResizeProportionally()\n    );\n  };\n\n  _onResizeEnd = () => {\n    this.instancesResizer.endResize();\n\n    const selectedInstances = this.props.instancesSelection.getSelectedInstances();\n    this.props.onInstancesResized(selectedInstances);\n  };\n\n  _onRotate = (deltaX, deltaY) => {\n    const sceneDeltaX = deltaX / this.getZoomFactor();\n    const sceneDeltaY = deltaY / this.getZoomFactor();\n\n    const selectedInstances = this.props.instancesSelection.getSelectedInstances();\n    this.instancesRotator.rotateBy(\n      selectedInstances,\n      sceneDeltaX,\n      sceneDeltaY,\n      this.keyboardShortcuts.shouldResizeProportionally()\n    );\n  };\n\n  _onRotateEnd = () => {\n    this.instancesRotator.endRotate();\n\n    const selectedInstances = this.props.instancesSelection.getSelectedInstances();\n    this.props.onInstancesRotated(selectedInstances);\n  };\n\n  clearHighlightedInstance = () => {\n    this.highlightedInstance.setInstance(null);\n  };\n\n  moveSelection = (x, y) => {\n    const selectedInstances = this.props.instancesSelection.getSelectedInstances();\n    selectedInstances.forEach(instance => {\n      instance.setX(instance.getX() + x);\n      instance.setY(instance.getY() + y);\n    });\n    this.props.onInstancesMoved(selectedInstances);\n  };\n\n  scrollTo(x, y) {\n    this.viewPosition.scrollTo(x, y);\n  }\n\n  centerView() {\n    const x = this.props.project.getGameResolutionWidth() / 2;\n    const y = this.props.project.getGameResolutionHeight() / 2;\n    this.viewPosition.scrollTo(x, y);\n  }\n\n  centerViewOn(instances) {\n    if (!instances.length) return;\n\n    this.viewPosition.scrollToInstance(instances[instances.length - 1]);\n    if (this.props.onViewPositionChanged) {\n      this.props.onViewPositionChanged(this.viewPosition);\n    }\n  }\n\n  getLastContextMenuSceneCoordinates = () => {\n    return this.viewPosition.toSceneCoordinates(\n      this.lastContextMenuX,\n      this.lastContextMenuY\n    );\n  };\n\n  getLastCursorSceneCoordinates = () => {\n    return this.viewPosition.toSceneCoordinates(\n      this.lastCursorX,\n      this.lastCursorY\n    );\n  };\n\n  getViewPosition = () /*: ?ViewPosition */ => {\n    return this.viewPosition;\n  };\n\n  _renderScene = () => {\n    // Protect against rendering scheduled after the component is unmounted.\n    if (this._unmounted) return;\n    if (this._renderingPaused) return;\n\n    // Avoid killing the CPU by limiting the rendering calls.\n    if (this.fpsLimiter.shouldUpdate()) {\n      this.backgroundColor.render();\n      this.viewPosition.render();\n      this.canvasCursor.render();\n      this.grid.render();\n      this.instancesRenderer.render();\n      this.highlightedInstance.render();\n      this.selectedInstances.render();\n      this.selectionRectangle.render();\n      this.windowBorder.render();\n      this.windowMask.render();\n      this.statusBar.render();\n      this.pixiRenderer.render(this.pixiContainer);\n    }\n    this.nextFrame = requestAnimationFrame(this._renderScene);\n  };\n\n  pauseSceneRendering = () => {\n    if (this.nextFrame) cancelAnimationFrame(this.nextFrame);\n    this._renderingPaused = true;\n\n    stopPIXITicker();\n  };\n\n  restartSceneRendering = () => {\n    this._renderingPaused = false;\n    this._renderScene();\n\n    startPIXITicker();\n  };\n\n  render() {\n    if (!this.props.project) return null;\n\n    return (\n      <DropTarget\n        canDrop={() => true}\n        hover={monitor => {\n          const { _instancesAdder, viewPosition, canvasArea } = this;\n          if (!_instancesAdder || !canvasArea || !viewPosition) return;\n\n          const { x, y } = monitor.getClientOffset();\n          const canvasRect = canvasArea.getBoundingClientRect();\n          const pos = viewPosition.toSceneCoordinates(\n            x - canvasRect.left,\n            y - canvasRect.top\n          );\n          _instancesAdder.createOrUpdateTemporaryInstancesFromObjectNames(\n            pos,\n            this.props.selectedObjectNames\n          );\n        }}\n        drop={monitor => {\n          const { _instancesAdder, viewPosition, canvasArea } = this;\n          if (!_instancesAdder || !canvasArea || !viewPosition) return;\n\n          if (monitor.didDrop()) {\n            // Drop was done somewhere else (in a child of the canvas:\n            // should not happen, but still handling this case).\n            _instancesAdder.deleteTemporaryInstances();\n            return;\n          }\n\n          const { x, y } = monitor.getClientOffset();\n          const canvasRect = canvasArea.getBoundingClientRect();\n          const pos = viewPosition.toSceneCoordinates(\n            x - canvasRect.left,\n            y - canvasRect.top\n          );\n          _instancesAdder.updateTemporaryInstancePositions(pos);\n          _instancesAdder.commitTemporaryInstances();\n          this.props.onInstancesAdded();\n        }}\n      >\n        {({ connectDropTarget, isOver }) => {\n          // The children are re-rendered when isOver change:\n          // take this opportunity to delete any temporary instances\n          // if the dragging is not done anymore over the canvas.\n          if (this._instancesAdder && !isOver) {\n            this._instancesAdder.deleteTemporaryInstances();\n          }\n\n          return connectDropTarget(\n            <div\n              ref={canvasArea => (this.canvasArea = canvasArea)}\n              style={{\n                ...styles.canvasArea,\n                ...(this.props.showDropCursor ? styles.dropCursor : undefined),\n              }}\n            />\n          );\n        }}\n      </DropTarget>\n    );\n  }\n}\n","//TODO: Factor with styles.js from PointsEditor.\nexport default {\n  handleColumn: {\n    width: 24,\n    paddingLeft: 8,\n    paddingRight: 0,\n  },\n  effectsColumn: {\n    width: 100,\n    justifyContent: 'center',\n  },\n  toolColumn: {\n    width: 96,\n  },\n};\n","// @flow\nimport { mapFor } from '../Utils/MapFor';\nimport { type Schema } from '../PropertiesEditor';\nimport flatten from 'lodash/flatten';\n\nexport type EnumeratedEffectMetadata = {|\n  extension: gdPlatformExtension,\n  effectMetadata: gdEffectMetadata,\n  type: string,\n  fullName: string,\n  description: string,\n  parametersSchema: Schema,\n|};\n\n/**\n * Fetch all the effects available for a project, and convert them\n * to a format easier to use.\n */\nexport const enumerateEffectsMetadata = (\n  project: gdProject\n): Array<EnumeratedEffectMetadata> => {\n  const platform = project.getCurrentPlatform();\n  const extensionsList = platform.getAllPlatformExtensions();\n\n  return flatten(\n    mapFor(0, extensionsList.size(), i => {\n      const extension = extensionsList.at(i);\n\n      return extension\n        .getExtensionEffectTypes()\n        .toJSArray()\n        .map(type => extension.getEffectMetadata(type))\n        .map(effectMetadata => {\n          const effectType = effectMetadata.getType();\n\n          // Convert the effect type properties to a PropertiesEditor Schema.\n          const properties = effectMetadata.getProperties();\n          const parameterNames = properties.keys().toJSArray();\n          const parametersSchema: Schema = parameterNames\n            .map((parameterName: string) => {\n              const property = properties.get(parameterName);\n              const valueType = property.getType().toLowerCase();\n              const propertyLabel = property.getLabel();\n              const propertyDescription = property.getDescription();\n              const getLabel = () => propertyLabel;\n              const getDescription = () => propertyDescription;\n              const getExtraDescription = () => parameterName;\n\n              if (valueType === 'number') {\n                return {\n                  name: parameterName,\n                  valueType: 'number',\n                  getValue: (effect: gdEffect) =>\n                    effect.getDoubleParameter(parameterName),\n                  setValue: (effect: gdEffect, newValue: number) =>\n                    effect.setDoubleParameter(parameterName, newValue),\n                  getLabel,\n                  getDescription,\n                  getExtraDescription,\n                };\n              } else if (valueType === 'boolean') {\n                return {\n                  name: parameterName,\n                  valueType: 'boolean',\n                  getValue: (effect: gdEffect) =>\n                    effect.getBooleanParameter(parameterName),\n                  setValue: (effect: gdEffect, newValue: boolean) =>\n                    effect.setBooleanParameter(parameterName, newValue),\n                  getLabel,\n                  getDescription,\n                  getExtraDescription,\n                };\n              } else if (valueType === 'resource') {\n                // Resource is a \"string\" (with a selector in the UI)\n                const kind = property.getExtraInfo().toJSArray()[0] || '';\n                return {\n                  name: parameterName,\n                  valueType: 'resource',\n                  resourceKind: kind,\n                  getValue: (effect: gdEffect) =>\n                    effect.getStringParameter(parameterName),\n                  setValue: (effect: gdEffect, newValue: number) =>\n                    effect.setStringParameter(parameterName, newValue),\n                  getLabel,\n                  getDescription,\n                  getExtraDescription,\n                };\n              } else if (valueType === 'color') {\n                return {\n                  name: parameterName,\n                  valueType: 'color',\n                  getValue: (effect: gdEffect) =>\n                    effect.getStringParameter(parameterName),\n                  setValue: (effect: gdEffect, newValue: number) =>\n                    effect.setStringParameter(parameterName, newValue),\n                  getLabel,\n                  getDescription,\n                  getExtraDescription,\n                };\n              } else {\n                console.error(\n                  `A property with type=${valueType} could not be mapped to a field for effect ${effectType}. Ensure that this type is correct.`\n                );\n                return null;\n              }\n            })\n            .filter(Boolean);\n\n          return {\n            extension,\n            type: effectType,\n            effectMetadata,\n            fullName: effectMetadata.getFullName(),\n            description: effectMetadata.getDescription(),\n            parametersSchema,\n          };\n        });\n    })\n  );\n};\n\nexport const setEffectDefaultParameters = (\n  effect: gdEffect,\n  effectMetadata: gdEffectMetadata\n) => {\n  effect.clearParameters();\n\n  const properties = effectMetadata.getProperties();\n  const parameterNames = properties.keys().toJSArray();\n  parameterNames.forEach((parameterName: string) => {\n    const property = properties.get(parameterName);\n    const valueType = property.getType().toLowerCase();\n\n    if (valueType === 'number') {\n      effect.setDoubleParameter(\n        parameterName,\n        parseFloat(property.getValue()) || 0\n      );\n    } else if (valueType === 'boolean') {\n      effect.setBooleanParameter(parameterName, property.getValue() === 'true');\n    } else {\n      effect.setStringParameter(parameterName, property.getValue());\n    }\n  });\n};\n","// @flow\nimport { Trans } from '@lingui/macro';\nimport { t } from '@lingui/macro';\nimport { I18n } from '@lingui/react';\nimport * as React from 'react';\nimport { Column, Line } from '../UI/Grid';\nimport SelectField from '../UI/SelectField';\nimport SelectOption from '../UI/SelectOption';\nimport { mapFor } from '../Utils/MapFor';\nimport RaisedButton from '../UI/RaisedButton';\nimport IconButton from '../UI/IconButton';\nimport EmptyMessage from '../UI/EmptyMessage';\nimport ElementWithMenu from '../UI/Menu/ElementWithMenu';\nimport MoreVert from '@material-ui/icons/MoreVert';\nimport SemiControlledTextField from '../UI/SemiControlledTextField';\nimport MiniToolbar, { MiniToolbarText } from '../UI/MiniToolbar';\nimport newNameGenerator from '../Utils/NewNameGenerator';\nimport Add from '@material-ui/icons/Add';\nimport PropertiesEditor from '../PropertiesEditor';\nimport DismissableAlertMessage from '../UI/DismissableAlertMessage';\nimport BackgroundText from '../UI/BackgroundText';\nimport { MarkdownText } from '../UI/MarkdownText';\nimport useForceUpdate from '../Utils/UseForceUpdate';\nimport PreferencesContext from '../MainFrame/Preferences/PreferencesContext';\nimport {\n  enumerateEffectsMetadata,\n  type EnumeratedEffectMetadata,\n  setEffectDefaultParameters,\n} from './EnumerateEffects';\nimport {\n  type ResourceSource,\n  type ChooseResourceFunction,\n} from '../ResourcesList/ResourceSource.flow';\nimport { type ResourceExternalEditor } from '../ResourcesList/ResourceExternalEditor.flow';\n\ntype Props = {|\n  project: gdProject,\n  resourceSources: Array<ResourceSource>,\n  onChooseResource: ChooseResourceFunction,\n  resourceExternalEditors: Array<ResourceExternalEditor>,\n  effectsContainer: gdEffectsContainer,\n  onEffectsUpdated: () => void,\n|};\n\nconst getEnumeratedEffectMetadata = (\n  allEffectDescriptions: Array<EnumeratedEffectMetadata>,\n  effectType: string\n): ?EnumeratedEffectMetadata => {\n  return allEffectDescriptions.find(\n    effectMetadata => effectMetadata.type === effectType\n  );\n};\n\n/**\n * Display a list of effects and allow to add/remove/edit them.\n *\n * All available effects are fetched from the project's platform.\n */\nexport default function EffectsList(props: Props) {\n  const { effectsContainer, onEffectsUpdated } = props;\n\n  const preferences = React.useContext(PreferencesContext);\n  const showEffectParameterNames = preferences.values.showEffectParameterNames;\n  const setShowEffectParameterNames = preferences.setShowEffectParameterNames;\n\n  const allEffectMetadata = React.useMemo(\n    () => enumerateEffectsMetadata(props.project),\n    [props.project]\n  );\n\n  const forceUpdate = useForceUpdate();\n\n  const addEffect = () => {\n    const newName = newNameGenerator('Effect', name =>\n      effectsContainer.hasEffectNamed(name)\n    );\n    effectsContainer.insertNewEffect(\n      newName,\n      effectsContainer.getEffectsCount()\n    );\n\n    forceUpdate();\n    onEffectsUpdated();\n  };\n\n  const removeEffect = (name: string) => {\n    effectsContainer.removeEffect(name);\n    forceUpdate();\n    onEffectsUpdated();\n  };\n\n  const chooseEffectType = (effect: gdEffect, newEffectType: string) => {\n    effect.setEffectType(newEffectType);\n    const effectMetadata = getEnumeratedEffectMetadata(\n      allEffectMetadata,\n      newEffectType\n    );\n\n    if (effectMetadata) {\n      setEffectDefaultParameters(effect, effectMetadata.effectMetadata);\n    }\n\n    forceUpdate();\n    onEffectsUpdated();\n  };\n\n  return (\n    <I18n>\n      {({ i18n }) => {\n        return (\n          <Column noMargin expand>\n            <Line>\n              <Column>\n                <DismissableAlertMessage identifier=\"effects-usage\" kind=\"info\">\n                  <Trans>\n                    Effects can change how the layer is rendered on screen.\n                    After adding an effect, set up its parameters. Launch a\n                    preview to see the result. Using the events and the name of\n                    the effect, you can change the parameters during the game.\n                  </Trans>\n                </DismissableAlertMessage>\n              </Column>\n            </Line>\n            {effectsContainer.getEffectsCount() > 3 && (\n              <Line>\n                <Column>\n                  <DismissableAlertMessage\n                    identifier=\"too-much-effects\"\n                    kind=\"warning\"\n                  >\n                    <Trans>\n                      Using a lot of effects can have a severe negative impact\n                      on the rendering performance, especially on low-end or\n                      mobile devices. Consider using less effects if possible.\n                      You can also disable and re-enable effects as needed using\n                      events.\n                    </Trans>\n                  </DismissableAlertMessage>\n                </Column>\n              </Line>\n            )}\n            {mapFor(0, effectsContainer.getEffectsCount(), (i: number) => {\n              const effect: gdEffect = effectsContainer.getEffectAt(i);\n              const effectType = effect.getEffectType();\n              const effectMetadata = getEnumeratedEffectMetadata(\n                allEffectMetadata,\n                effectType\n              );\n\n              return (\n                <React.Fragment key={i}>\n                  <MiniToolbar>\n                    <MiniToolbarText>\n                      <Trans>Effect name:</Trans>\n                    </MiniToolbarText>\n                    <SemiControlledTextField\n                      margin=\"none\"\n                      commitOnBlur\n                      hintText={t`Enter the effect name`}\n                      value={effect.getName()}\n                      onChange={newName => {\n                        if (newName === effect.getName()) return;\n\n                        effect.setName(newName);\n                        forceUpdate();\n                        onEffectsUpdated();\n                      }}\n                      fullWidth\n                    />\n                    <MiniToolbarText>\n                      <Trans>Type:</Trans>\n                    </MiniToolbarText>\n                    <SelectField\n                      margin=\"none\"\n                      value={effectType}\n                      onChange={(e, i, newEffectType: string) =>\n                        chooseEffectType(effect, newEffectType)\n                      }\n                      fullWidth\n                      hintText={t`Choose the effect to apply`}\n                    >\n                      {allEffectMetadata.map(effectMetadata => (\n                        <SelectOption\n                          key={effectMetadata.type}\n                          value={effectMetadata.type}\n                          primaryText={effectMetadata.fullName}\n                        />\n                      ))}\n                    </SelectField>\n                    <ElementWithMenu\n                      element={\n                        <IconButton>\n                          <MoreVert />\n                        </IconButton>\n                      }\n                      buildMenuTemplate={() => [\n                        {\n                          label: i18n._(t`Delete`),\n                          click: () => removeEffect(effect.getName()),\n                        },\n                        { type: 'separator' },\n                        {\n                          type: 'checkbox',\n                          label: 'Show Parameter Names',\n                          checked: showEffectParameterNames,\n                          click: () =>\n                            setShowEffectParameterNames(\n                              !showEffectParameterNames\n                            ),\n                        },\n                      ]}\n                    />\n                  </MiniToolbar>\n                  <Line expand noMargin>\n                    <Column expand>\n                      {!!effectType && effectMetadata ? (\n                        <React.Fragment>\n                          <Line>\n                            <BackgroundText>\n                              <MarkdownText\n                                source={effectMetadata.description}\n                              />\n                            </BackgroundText>\n                          </Line>\n                          <PropertiesEditor\n                            instances={[effect]}\n                            schema={effectMetadata.parametersSchema}\n                            project={props.project}\n                            resourceSources={props.resourceSources}\n                            onChooseResource={props.onChooseResource}\n                            resourceExternalEditors={\n                              props.resourceExternalEditors\n                            }\n                            renderExtraDescriptionText={\n                              showEffectParameterNames\n                                ? parameterName =>\n                                    i18n._(\n                                      t`Parameter name in events: \\`${parameterName}\\` `\n                                    )\n                                : undefined\n                            }\n                          />\n                        </React.Fragment>\n                      ) : null}\n                    </Column>\n                  </Line>\n                </React.Fragment>\n              );\n            })}\n            {effectsContainer.getEffectsCount() === 0 ? (\n              <EmptyMessage>\n                <Trans>No effects applied.</Trans>\n              </EmptyMessage>\n            ) : null}\n            <Column>\n              <Line justifyContent=\"flex-end\" alignItems=\"center\" expand>\n                <RaisedButton\n                  primary\n                  label={<Trans>Add an effect</Trans>}\n                  onClick={addEffect}\n                  icon={<Add />}\n                />\n              </Line>\n            </Column>\n          </Column>\n        );\n      }}\n    </I18n>\n  );\n}\n","// @flow\nimport { Trans } from '@lingui/macro';\nimport * as React from 'react';\nimport FlatButton from '../UI/FlatButton';\nimport Dialog from '../UI/Dialog';\nimport EffectsList from './index';\nimport HelpButton from '../UI/HelpButton';\nimport {\n  type ResourceSource,\n  type ChooseResourceFunction,\n} from '../ResourcesList/ResourceSource.flow';\nimport { type ResourceExternalEditor } from '../ResourcesList/ResourceExternalEditor.flow';\n\ntype Props = {|\n  project: gdProject,\n  resourceSources: Array<ResourceSource>,\n  onChooseResource: ChooseResourceFunction,\n  resourceExternalEditors: Array<ResourceExternalEditor>,\n  onApply: () => void,\n  effectsContainer: gdEffectsContainer,\n|};\n\nexport default class EffectsListDialog extends React.Component<Props, {||}> {\n  render() {\n    const { project, onApply, effectsContainer } = this.props;\n\n    return (\n      <Dialog\n        noMargin\n        secondaryActions={[\n          <HelpButton\n            key=\"help\"\n            helpPagePath=\"/interface/scene-editor/layer-effects\"\n          />,\n        ]}\n        actions={[\n          <FlatButton\n            label={<Trans>Ok</Trans>}\n            primary\n            keyboardFocused\n            onClick={onApply}\n            key={'Apply'}\n          />,\n        ]}\n        cannotBeDismissed={true}\n        open\n        onRequestClose={onApply}\n        title={<Trans>Effects</Trans>}\n      >\n        <EffectsList\n          project={project}\n          resourceSources={this.props.resourceSources}\n          onChooseResource={this.props.onChooseResource}\n          resourceExternalEditors={this.props.resourceExternalEditors}\n          effectsContainer={effectsContainer}\n          onEffectsUpdated={\n            () =>\n              this.forceUpdate() /*Force update to ensure dialog is properly positioned*/\n          }\n        />\n      </Dialog>\n    );\n  }\n}\n","// @flow\nimport { t } from '@lingui/macro';\n\nimport React from 'react';\nimport TextField from '../UI/TextField';\n\nimport styles from './styles';\nimport ColorPicker from '../UI/ColorField/ColorPicker';\nimport { TreeTableCell, TreeTableRow } from '../UI/TreeTable';\n\ntype Props = {|\n  layout: gdLayout,\n  onBackgroundColorChanged: () => void,\n|};\n\nexport default ({ layout, onBackgroundColorChanged }: Props) => (\n  <TreeTableRow>\n    <TreeTableCell style={styles.handleColumn} />\n    <TreeTableCell expand>\n      <TextField\n        fullWidth\n        hintText={t`Background color`}\n        margin=\"none\"\n        disabled\n      />\n    </TreeTableCell>\n    <TreeTableCell style={styles.effectsColumn}>\n      <ColorPicker\n        disableAlpha\n        color={{\n          r: layout.getBackgroundColorRed(),\n          g: layout.getBackgroundColorGreen(),\n          b: layout.getBackgroundColorBlue(),\n          a: 255,\n        }}\n        onChangeComplete={color => {\n          layout.setBackgroundColor(color.rgb.r, color.rgb.g, color.rgb.b);\n          onBackgroundColorChanged();\n        }}\n      />\n    </TreeTableCell>\n    <TreeTableCell style={styles.toolColumn} />\n  </TreeTableRow>\n);\n","// @flow\nimport { Trans } from '@lingui/macro';\nimport React, { Component } from 'react';\nimport { SortableContainer, SortableElement } from 'react-sortable-hoc';\nimport newNameGenerator from '../Utils/NewNameGenerator';\nimport { mapReverseFor } from '../Utils/MapFor';\nimport LayerRow from './LayerRow';\nimport EffectsListDialog from '../EffectsList/EffectsListDialog';\nimport BackgroundColorRow from './BackgroundColorRow';\nimport { Column, Line } from '../UI/Grid';\nimport Add from '@material-ui/icons/Add';\nimport RaisedButton from '../UI/RaisedButton';\nimport {\n  type ResourceSource,\n  type ChooseResourceFunction,\n} from '../ResourcesList/ResourceSource.flow';\nimport { type ResourceExternalEditor } from '../ResourcesList/ResourceExternalEditor.flow';\nimport { type UnsavedChanges } from '../MainFrame/UnsavedChangesContext';\nimport ScrollView from '../UI/ScrollView';\n\nconst SortableLayerRow = SortableElement(LayerRow);\n\ntype LayersListBodyState = {|\n  nameErrors: { [string]: boolean },\n|};\n\nclass LayersListBody extends Component<*, LayersListBodyState> {\n  state = {\n    nameErrors: {},\n  };\n\n  _onLayerModified = () => {\n    if (this.props.unsavedChanges)\n      this.props.unsavedChanges.triggerUnsavedChanges();\n    this.forceUpdate();\n  };\n\n  render() {\n    const { layersContainer, onEditEffects } = this.props;\n\n    const layersCount = layersContainer.getLayersCount();\n    const containerLayersList = mapReverseFor(0, layersCount, i => {\n      const layer = layersContainer.getLayerAt(i);\n      const layerName = layer.getName();\n\n      return (\n        <SortableLayerRow\n          index={layersCount - 1 - i}\n          key={'layer-' + layerName}\n          layer={layer}\n          layerName={layerName}\n          nameError={this.state.nameErrors[layerName]}\n          effectsCount={layer.getEffectsCount()}\n          onEditEffects={() => onEditEffects(layer)}\n          onBlur={event => {\n            const newName = event.target.value;\n            if (layerName === newName) return;\n\n            let success = true;\n            if (layersContainer.hasLayerNamed(newName)) {\n              success = false;\n            } else {\n              this.props.onRenameLayer(layerName, newName, doRename => {\n                if (doRename)\n                  layersContainer.getLayer(layerName).setName(newName);\n              });\n            }\n\n            this.setState({\n              nameErrors: {\n                ...this.state.nameErrors,\n                [layerName]: !success,\n              },\n            });\n          }}\n          onRemove={() => {\n            this.props.onRemoveLayer(layerName, doRemove => {\n              if (!doRemove) return;\n\n              layersContainer.removeLayer(layerName);\n              this._onLayerModified();\n            });\n          }}\n          isVisible={layer.getVisibility()}\n          onChangeVisibility={visible => {\n            layer.setVisibility(visible);\n            this._onLayerModified();\n          }}\n        />\n      );\n    });\n\n    return (\n      <Column noMargin>\n        {containerLayersList}\n        <BackgroundColorRow\n          layout={layersContainer}\n          onBackgroundColorChanged={() => this._onLayerModified()}\n        />\n      </Column>\n    );\n  }\n}\n\nconst SortableLayersListBody = SortableContainer(LayersListBody);\n\ntype Props = {|\n  project: gdProject,\n  resourceSources: Array<ResourceSource>,\n  onChooseResource: ChooseResourceFunction,\n  resourceExternalEditors: Array<ResourceExternalEditor>,\n  freezeUpdate: boolean,\n  layersContainer: gdLayout,\n  onRemoveLayer: (layerName: string, cb: (done: boolean) => void) => void,\n  onRenameLayer: (\n    oldName: string,\n    newName: string,\n    cb: (done: boolean) => void\n  ) => void,\n  unsavedChanges?: UnsavedChanges,\n|};\n\ntype State = {|\n  effectsEditedLayer: ?gdLayer,\n|};\n\nexport default class LayersList extends Component<Props, State> {\n  state = {\n    effectsEditedLayer: null,\n  };\n\n  shouldComponentUpdate(nextProps: Props) {\n    // Rendering the component can be costly as it iterates over\n    // every layers, so the prop freezeUpdate allow to ask the component to stop\n    // updating, for example when hidden.\n    return !nextProps.freezeUpdate;\n  }\n\n  _editEffects = (effectsEditedLayer: ?gdLayer) => {\n    this.setState({\n      effectsEditedLayer,\n    });\n  };\n\n  _addLayer = () => {\n    const { layersContainer } = this.props;\n    const name = newNameGenerator('Layer', name =>\n      layersContainer.hasLayerNamed(name)\n    );\n    layersContainer.insertNewLayer(name, layersContainer.getLayersCount());\n    this._onLayerModified();\n  };\n\n  _onLayerModified = () => {\n    if (this.props.unsavedChanges)\n      this.props.unsavedChanges.triggerUnsavedChanges();\n    this.forceUpdate();\n  };\n\n  render() {\n    const { project } = this.props;\n    const { effectsEditedLayer } = this.state;\n\n    // Force the list to be mounted again if layersContainer\n    // has been changed. Avoid accessing to invalid objects that could\n    // crash the app.\n    const listKey = this.props.layersContainer.ptr;\n\n    return (\n      <ScrollView>\n        <Column noMargin expand>\n          <SortableLayersListBody\n            key={listKey}\n            layersContainer={this.props.layersContainer}\n            onEditEffects={layer => this._editEffects(layer)}\n            onRemoveLayer={this.props.onRemoveLayer}\n            onRenameLayer={this.props.onRenameLayer}\n            onSortEnd={({ oldIndex, newIndex }) => {\n              const layersCount = this.props.layersContainer.getLayersCount();\n              this.props.layersContainer.moveLayer(\n                layersCount - 1 - oldIndex,\n                layersCount - 1 - newIndex\n              );\n              this._onLayerModified();\n            }}\n            helperClass=\"sortable-helper\"\n            useDragHandle\n            unsavedChanges={this.props.unsavedChanges}\n          />\n          <Column>\n            <Line justifyContent=\"flex-end\" expand>\n              <RaisedButton\n                label={<Trans>Add a layer</Trans>}\n                primary\n                onClick={this._addLayer}\n                icon={<Add />}\n              />\n            </Line>\n          </Column>\n          {effectsEditedLayer && (\n            <EffectsListDialog\n              project={project}\n              resourceSources={this.props.resourceSources}\n              onChooseResource={this.props.onChooseResource}\n              resourceExternalEditors={this.props.resourceExternalEditors}\n              effectsContainer={effectsEditedLayer}\n              onApply={() =>\n                this.setState({\n                  effectsEditedLayer: null,\n                })\n              }\n            />\n          )}\n        </Column>\n      </ScrollView>\n    );\n  }\n}\n","// @flow\nimport { Trans } from '@lingui/macro';\n\nimport React from 'react';\nimport { TreeTableRow, TreeTableCell } from '../UI/TreeTable';\nimport InlineCheckbox from '../UI/InlineCheckbox';\nimport Visibility from '@material-ui/icons/Visibility';\nimport VisibilityOff from '@material-ui/icons/VisibilityOff';\nimport IconButton from '../UI/IconButton';\nimport Delete from '@material-ui/icons/Delete';\nimport TextField from '../UI/TextField';\nimport FlatButton from '../UI/FlatButton';\nimport DragHandle from '../UI/DragHandle';\nimport styles from './styles';\n\ntype Props = {|\n  layerName: string,\n  nameError: boolean,\n  onBlur: () => void,\n  onRemove: () => void,\n  isVisible: boolean,\n  onChangeVisibility: boolean => void,\n  effectsCount: number,\n  onEditEffects: () => void,\n  style?: ?Object,\n|};\n\nexport default ({\n  layerName,\n  nameError,\n  onBlur,\n  onRemove,\n  isVisible,\n  effectsCount,\n  onEditEffects,\n  onChangeVisibility,\n}: Props) => (\n  <TreeTableRow>\n    <TreeTableCell style={styles.handleColumn}>\n      <DragHandle />\n    </TreeTableCell>\n    <TreeTableCell expand>\n      <TextField\n        margin=\"none\"\n        defaultValue={layerName || 'Base layer'}\n        id={layerName}\n        errorText={\n          nameError ? <Trans>This name is already taken</Trans> : undefined\n        }\n        disabled={!layerName}\n        onBlur={onBlur}\n        fullWidth\n      />\n    </TreeTableCell>\n    <TreeTableCell style={styles.effectsColumn}>\n      <FlatButton\n        label={\n          effectsCount === 0 ? (\n            <Trans>Add effect</Trans>\n          ) : (\n            <Trans>{effectsCount} effect(s)</Trans>\n          )\n        }\n        onClick={onEditEffects}\n      />\n    </TreeTableCell>\n    <TreeTableCell style={styles.toolColumn}>\n      <InlineCheckbox\n        checked={isVisible}\n        checkedIcon={<Visibility />}\n        uncheckedIcon={<VisibilityOff />}\n        onCheck={(e, value) => onChangeVisibility(value)}\n      />\n      <IconButton onClick={onRemove} disabled={!layerName}>\n        <Delete />\n      </IconButton>\n    </TreeTableCell>\n  </TreeTableRow>\n);\n","// @flow\nimport md5 from 'blueimp-md5';\n\nexport const getGravatarUrl = (\n  email: string,\n  { size }: { size: number } = { size: 40 }\n): string => {\n  const hash = md5(email.trim().toLowerCase());\n  return `https://www.gravatar.com/avatar/${hash}?s=${size}&d=retro`;\n};\n","// @flow\nimport { Trans } from '@lingui/macro';\n\nimport * as React from 'react';\nimport Avatar from '@material-ui/core/Avatar';\nimport { Column, Line, Spacer } from '../UI/Grid';\nimport { type Profile } from '../Utils/GDevelopServices/Authentification';\nimport PlaceholderLoader from '../UI/PlaceholderLoader';\nimport { getGravatarUrl } from '../UI/GravatarUrl';\nimport Text from '../UI/Text';\n\ntype Props = {\n  profile: ?Profile,\n};\n\nexport default ({ profile }: Props) =>\n  profile ? (\n    <Column>\n      <Line alignItems=\"center\">\n        <Avatar src={getGravatarUrl(profile.email || '', { size: 40 })} />\n        <Spacer />\n        <Text size=\"title\">You are connected as {profile.email}</Text>\n      </Line>\n      <Line>\n        <Text>\n          <Trans>\n            An account allows you to access GDevelop services online.\n          </Trans>\n        </Text>\n      </Line>\n    </Column>\n  ) : (\n    <PlaceholderLoader />\n  );\n","// @flow\nimport { Trans } from '@lingui/macro';\n\nimport * as React from 'react';\nimport {\n  Table,\n  TableBody,\n  TableHeader,\n  TableHeaderColumn,\n  TableRow,\n  TableRowColumn,\n} from '../UI/Table';\nimport { type Usages } from '../Utils/GDevelopServices/Usage';\nimport { Column, Line } from '../UI/Grid';\nimport EmptyMessage from '../UI/EmptyMessage';\nimport format from 'date-fns/format';\nimport PlaceholderLoader from '../UI/PlaceholderLoader';\n\ntype Props = { usages: ?Usages };\n\nexport default ({ usages }: Props) => (\n  <Column noMargin>\n    <Line>\n      {!usages ? (\n        <PlaceholderLoader />\n      ) : usages.length === 0 ? (\n        <EmptyMessage>\n          <Trans>You don't have any usage of the online services for now</Trans>\n        </EmptyMessage>\n      ) : (\n        <Table>\n          <TableHeader>\n            <TableRow>\n              <TableHeaderColumn>Date</TableHeaderColumn>\n              <TableHeaderColumn>Type</TableHeaderColumn>\n            </TableRow>\n          </TableHeader>\n          <TableBody>\n            {usages.map(usage => (\n              <TableRow key={usage.id}>\n                <TableRowColumn>\n                  {format(usage.createdAt, 'YYYY-MM-DD HH:mm:ss')}\n                </TableRowColumn>\n                <TableRowColumn>{usage.type}</TableRowColumn>\n              </TableRow>\n            ))}\n          </TableBody>\n        </Table>\n      )}\n    </Line>\n  </Column>\n);\n","// @flow\nimport * as React from 'react';\nimport { Column, Line } from '../UI/Grid';\nimport { type Subscription } from '../Utils/GDevelopServices/Usage';\nimport PlaceholderLoader from '../UI/PlaceholderLoader';\nimport RaisedButton from '../UI/RaisedButton';\nimport { Trans } from '@lingui/macro';\nimport Text from '../UI/Text';\n\ntype Props = {\n  subscription: ?Subscription,\n  onChangeSubscription: Function,\n};\n\nexport default ({ subscription, onChangeSubscription }: Props) =>\n  subscription && subscription.planId ? (\n    <Column>\n      <Line>\n        <Text>\n          <Trans>\n            You are subscribed to {subscription.planId}. Congratulations! You\n            have access to more online services, including building your game\n            for Android, Windows, macOS and Linux in one click!\n          </Trans>\n        </Text>\n      </Line>\n      <Line justifyContent=\"center\">\n        <RaisedButton\n          label={<Trans>Upgrade/change</Trans>}\n          primary\n          onClick={onChangeSubscription}\n        />\n      </Line>\n    </Column>\n  ) : subscription && !subscription.planId ? (\n    <Column>\n      <Line>\n        <Text>\n          <Trans>\n            If you don't have a subscription, consider getting one now. Accounts\n            allow you to access all of the online services. With just one click,\n            you can build your game for Android, Windows, macOS and Linux!\n          </Trans>\n        </Text>\n      </Line>\n      <Line justifyContent=\"center\">\n        <RaisedButton\n          label={<Trans>Choose a subscription</Trans>}\n          primary\n          onClick={onChangeSubscription}\n        />\n      </Line>\n    </Column>\n  ) : (\n    <PlaceholderLoader />\n  );\n","// @flow\nimport { Trans } from '@lingui/macro';\n\nimport React, { Component } from 'react';\nimport FlatButton from '../UI/FlatButton';\nimport { Tabs, Tab } from '../UI/Tabs';\nimport Dialog from '../UI/Dialog';\nimport { Column } from '../UI/Grid';\nimport CreateProfile from './CreateProfile';\nimport ProfileDetails from './ProfileDetails';\nimport EmptyMessage from '../UI/EmptyMessage';\nimport HelpButton from '../UI/HelpButton';\nimport UsagesDetails from './UsagesDetails';\nimport SubscriptionDetails from './SubscriptionDetails';\nimport UserProfileContext, { type UserProfile } from './UserProfileContext';\n\ntype Props = {|\n  open: boolean,\n  onClose: Function,\n  onChangeSubscription: Function,\n|};\n\ntype State = {|\n  currentTab: string,\n|};\n\nexport default class ProfileDialog extends Component<Props, State> {\n  state = {\n    currentTab: 'profile',\n  };\n\n  _onChangeTab = (newTab: string) =>\n    this.setState({\n      currentTab: newTab,\n    });\n\n  render() {\n    const { open, onClose } = this.props;\n    const actions = [\n      <FlatButton\n        label={<Trans>Close</Trans>}\n        key=\"close\"\n        primary={false}\n        onClick={onClose}\n      />,\n    ];\n\n    return (\n      <UserProfileContext.Consumer>\n        {(userProfile: UserProfile) => (\n          <Dialog\n            actions={actions}\n            secondaryActions={[\n              <HelpButton key=\"help\" helpPagePath=\"/interface/profile\" />,\n              userProfile.authenticated && (\n                <FlatButton\n                  label={<Trans>Refresh</Trans>}\n                  key=\"refresh\"\n                  onClick={userProfile.onRefreshUserProfile}\n                />\n              ),\n              userProfile.authenticated && userProfile.profile && (\n                <FlatButton\n                  label={<Trans>Logout</Trans>}\n                  key=\"logout\"\n                  onClick={userProfile.onLogout}\n                />\n              ),\n            ]}\n            onRequestClose={onClose}\n            cannotBeDismissed={false}\n            open={open}\n            noMargin\n          >\n            <Tabs value={this.state.currentTab} onChange={this._onChangeTab}>\n              <Tab label={<Trans>My Profile</Trans>} value=\"profile\" />\n              <Tab label={<Trans>Online services usage</Trans>} value=\"usage\" />\n            </Tabs>\n            {this.state.currentTab === 'profile' &&\n              (userProfile.authenticated ? (\n                <Column noMargin>\n                  <ProfileDetails profile={userProfile.profile} />\n                  <SubscriptionDetails\n                    subscription={userProfile.subscription}\n                    onChangeSubscription={this.props.onChangeSubscription}\n                  />\n                </Column>\n              ) : (\n                <Column>\n                  <CreateProfile\n                    onLogin={userProfile.onLogin}\n                    onCreateAccount={userProfile.onCreateAccount}\n                  />\n                </Column>\n              ))}\n            {this.state.currentTab === 'usage' &&\n              (userProfile.authenticated ? (\n                <Column noMargin>\n                  <UsagesDetails usages={userProfile.usages} />\n                </Column>\n              ) : (\n                <EmptyMessage>\n                  <Trans>\n                    Register to see the usage that you've made of the online\n                    services\n                  </Trans>\n                </EmptyMessage>\n              ))}\n          </Dialog>\n        )}\n      </UserProfileContext.Consumer>\n    );\n  }\n}\n","// @flow\nimport { Trans } from '@lingui/macro';\n\nimport * as React from 'react';\nimport PropertiesEditor from '../../PropertiesEditor';\nimport propertiesMapToSchema from '../../PropertiesEditor/PropertiesMapToSchema';\nimport EmptyMessage from '../../UI/EmptyMessage';\nimport { Column } from '../../UI/Grid';\nimport { type BehaviorEditorProps } from './BehaviorEditorProps.flow';\n\ntype Props = BehaviorEditorProps;\n\nexport default class BehaviorPropertiesEditor extends React.Component<Props> {\n  render() {\n    const { behavior, behaviorContent, project } = this.props;\n    const properties = behavior.getProperties(\n      behaviorContent.getContent(),\n      project\n    );\n\n    const propertiesSchema = propertiesMapToSchema(\n      properties,\n      behaviorContent =>\n        behavior.getProperties(behaviorContent.getContent(), project),\n      (behaviorContent, name, value) =>\n        behavior.updateProperty(\n          behaviorContent.getContent(),\n          name,\n          value,\n          project\n        )\n    );\n\n    return (\n      <Column>\n        {propertiesSchema.length ? (\n          <PropertiesEditor\n            schema={propertiesSchema}\n            instances={[behaviorContent]}\n          />\n        ) : (\n          <EmptyMessage>\n            <Trans>\n              There is nothing to configure for this behavior. You can still use\n              events to interact with the object and this behavior.\n            </Trans>\n          </EmptyMessage>\n        )}\n      </Column>\n    );\n  }\n}\n","// @flow\nimport * as React from 'react';\nimport { type Vertex } from './PolygonEditor';\n\ntype Props = {|\n  shape: string,\n  dimensionA: number,\n  dimensionB: number,\n  offsetX: number,\n  offsetY: number,\n  polygonOrigin: string,\n  vertices: Array<Vertex>,\n  width: number,\n  height: number,\n  zoomFactor: number,\n  onMoveVertex: (index: number, newX: number, newY: number) => void,\n|};\n\ntype State = {|\n  draggedVertex: ?Vertex,\n  draggedIndex: number,\n|};\n\nexport default class ShapePreview extends React.Component<Props, State> {\n  state = { draggedVertex: null, draggedIndex: -1 };\n  _svg: any;\n\n  _onVertexDown = (vertex: Vertex, index: number) => {\n    if (this.state.draggedVertex) return;\n    this.setState({ draggedVertex: vertex, draggedIndex: index });\n  };\n\n  _onMouseUp = () => {\n    const draggingWasDone = !!this.state.draggedVertex;\n    const { draggedVertex, draggedIndex } = this.state;\n    this.setState(\n      {\n        draggedVertex: null,\n      },\n      () => {\n        if (draggingWasDone)\n          this.props.onMoveVertex(\n            draggedIndex,\n            Math.round(draggedVertex ? draggedVertex.x : 0),\n            Math.round(draggedVertex ? draggedVertex.y : 0)\n          );\n      }\n    );\n  };\n\n  _onMouseMove = (event: any) => {\n    const {\n      offsetX,\n      offsetY,\n      polygonOrigin,\n      width,\n      height,\n      zoomFactor,\n    } = this.props;\n    const { draggedVertex } = this.state;\n    if (!draggedVertex) return;\n\n    const pointOnScreen = this._svg.createSVGPoint();\n    pointOnScreen.x = event.clientX;\n    pointOnScreen.y = event.clientY;\n    const screenToSvgMatrix = this._svg.getScreenCTM().inverse();\n    const pointOnSvg = pointOnScreen.matrixTransform(screenToSvgMatrix);\n\n    draggedVertex.x =\n      pointOnSvg.x / zoomFactor -\n      offsetX -\n      (polygonOrigin === 'Center' ? width / 2 : 0);\n    draggedVertex.y =\n      pointOnSvg.y / zoomFactor -\n      offsetY -\n      (polygonOrigin === 'Center' ? height / 2 : 0);\n\n    this.forceUpdate();\n  };\n\n  _renderBox() {\n    const {\n      dimensionA,\n      dimensionB,\n      width,\n      height,\n      offsetX,\n      offsetY,\n      zoomFactor,\n    } = this.props;\n    const fixedWidth = dimensionA > 0 ? dimensionA : width > 0 ? width : 1;\n    const fixedHeight = dimensionB > 0 ? dimensionB : height > 0 ? height : 1;\n\n    return (\n      <rect\n        key={'boxShape'}\n        fill=\"rgba(255,0,0,0.75)\"\n        strokeWidth={1}\n        x={(offsetX + width / 2 - fixedWidth / 2) * zoomFactor}\n        y={(offsetY + height / 2 - fixedHeight / 2) * zoomFactor}\n        width={fixedWidth * zoomFactor}\n        height={fixedHeight * zoomFactor}\n      />\n    );\n  }\n\n  _renderCircle() {\n    const {\n      dimensionA,\n      width,\n      height,\n      offsetX,\n      offsetY,\n      zoomFactor,\n    } = this.props;\n\n    return (\n      <circle\n        key={'circleShape'}\n        fill=\"rgba(255,0,0,0.75)\"\n        strokeWidth={1}\n        cx={(offsetX + width / 2) * zoomFactor}\n        cy={(offsetY + height / 2) * zoomFactor}\n        r={\n          (dimensionA > 0\n            ? dimensionA\n            : width + height > 0\n            ? (width + height) / 4\n            : 1) * zoomFactor\n        }\n      />\n    );\n  }\n\n  _renderEdge() {\n    const {\n      dimensionA,\n      dimensionB,\n      width,\n      height,\n      offsetX,\n      offsetY,\n      zoomFactor,\n    } = this.props;\n    const halfLength =\n      (dimensionA > 0 ? dimensionA : width > 0 ? width : 1) / 2;\n    const cos = Math.cos((dimensionB * Math.PI) / 180);\n    const sin = Math.sin((dimensionB * Math.PI) / 180);\n\n    return (\n      <line\n        key={'edgeShape'}\n        stroke=\"rgba(255,0,0,0.75)\"\n        strokeWidth={2}\n        x1={(offsetX + width / 2 - halfLength * cos) * zoomFactor}\n        y1={(offsetY + height / 2 - halfLength * sin) * zoomFactor}\n        x2={(offsetX + width / 2 + halfLength * cos) * zoomFactor}\n        y2={(offsetY + height / 2 + halfLength * sin) * zoomFactor}\n      />\n    );\n  }\n\n  _renderPolygon() {\n    const {\n      vertices,\n      polygonOrigin,\n      width,\n      height,\n      offsetX,\n      offsetY,\n      zoomFactor,\n    } = this.props;\n\n    return (\n      <React.Fragment>\n        <polygon\n          key={'polygonShape'}\n          fill=\"rgba(255,0,0,0.75)\"\n          strokeWidth={1}\n          filerule=\"evenodd\"\n          points={vertices\n            .map(\n              vertex =>\n                `${(vertex.x +\n                  offsetX +\n                  (polygonOrigin === 'Center' ? width / 2 : 0)) *\n                  zoomFactor},${(vertex.y +\n                  offsetY +\n                  (polygonOrigin === 'Center' ? height / 2 : 0)) *\n                  zoomFactor}`\n            )\n            .join(' ')}\n        />\n        {vertices.map((vertex, index) => (\n          <circle\n            onPointerDown={event => this._onVertexDown(vertex, index)}\n            key={`vertex-${index}`}\n            fill=\"rgba(150,0,0,0.75)\"\n            strokeWidth={1}\n            style={{\n              cursor: 'move',\n            }}\n            cx={\n              (vertex.x +\n                offsetX +\n                (polygonOrigin === 'Center' ? width / 2 : 0)) *\n              zoomFactor\n            }\n            cy={\n              (vertex.y +\n                offsetY +\n                (polygonOrigin === 'Center' ? height / 2 : 0)) *\n              zoomFactor\n            }\n            r={5}\n          />\n        ))}\n      </React.Fragment>\n    );\n  }\n\n  render() {\n    const { shape } = this.props;\n\n    return (\n      <svg\n        onPointerMove={this._onMouseMove}\n        onPointerUp={this._onMouseUp}\n        ref={svg => (this._svg = svg)}\n        width=\"100%\"\n        height=\"100%\"\n      >\n        {shape === 'Box' && this._renderBox()}\n        {shape === 'Circle' && this._renderCircle()}\n        {shape === 'Edge' && this._renderEdge()}\n        {shape === 'Polygon' && this._renderPolygon()}\n      </svg>\n    );\n  }\n}\n","// @flow\r\nimport * as React from 'react';\r\nimport {\r\n  Table,\r\n  TableRow,\r\n  TableRowColumn,\r\n  TableBody,\r\n  TableHeader,\r\n  TableHeaderColumn,\r\n} from '../../../UI/Table';\r\nimport SemiControlledTextField from '../../../UI/SemiControlledTextField';\r\nimport Warning from '@material-ui/icons/Warning';\r\nimport IconButton from '../../../UI/IconButton';\r\nimport ThemeConsumer from '../../../UI/Theme/ThemeConsumer';\r\nimport AddCircle from '@material-ui/icons/AddCircle';\r\nimport Delete from '@material-ui/icons/Delete';\r\n\r\nexport type Vertex = {|\r\n  x: number,\r\n  y: number,\r\n|};\r\n\r\ntype Props = {|\r\n  vertices: Array<Vertex>,\r\n  onChangeVertexX: (newValue: number, index: number) => void,\r\n  onChangeVertexY: (newValue: number, index: number) => void,\r\n  onAdd: () => void,\r\n  onRemove: (index: number) => void,\r\n|};\r\n\r\nexport default class PolygonEditor extends React.Component<Props> {\r\n  _isPolygonConvex(vertices: Array<Vertex>) {\r\n    // Get edges\r\n    let edges = [];\r\n    let v1 = null;\r\n    let v2 = null;\r\n    for (let i = 0; i < vertices.length; i++) {\r\n      v1 = vertices[i];\r\n      if (i + 1 >= vertices.length) v2 = vertices[0];\r\n      else v2 = vertices[i + 1];\r\n      edges.push({ x: v2.x - v1.x, y: v2.y - v1.y });\r\n    }\r\n\r\n    // Check convexity\r\n    if (edges.length < 3) return false;\r\n\r\n    const zProductIsPositive =\r\n      edges[0].x * edges[0 + 1].y - edges[0].y * edges[0 + 1].x > 0;\r\n\r\n    for (let i = 1; i < edges.length - 1; ++i) {\r\n      let zCrossProduct =\r\n        edges[i].x * edges[i + 1].y - edges[i].y * edges[i + 1].x;\r\n      let zCrossProductIsPositive = zCrossProduct > 0;\r\n      if (zCrossProductIsPositive !== zProductIsPositive) return false;\r\n    }\r\n\r\n    let lastZCrossProduct =\r\n      edges[edges.length - 1].x * edges[0].y -\r\n      edges[edges.length - 1].y * edges[0].x;\r\n    let lastZCrossProductIsPositive = lastZCrossProduct > 0;\r\n    if (lastZCrossProductIsPositive !== zProductIsPositive) return false;\r\n\r\n    // Check for repeated vertices (would crash Box2D during the game)\r\n    for (let i = 0; i < vertices.length - 1; ++i) {\r\n      for (let j = i + 1; j < vertices.length; ++j) {\r\n        if (vertices[i].x === vertices[j].x && vertices[i].y === vertices[j].y)\r\n          return false;\r\n      }\r\n    }\r\n\r\n    // Check if all vertices are aligned (would crash Box2D during the game)\r\n    let alignedX = true;\r\n    let alignedY = true;\r\n    for (let i = 0; i < vertices.length - 1; ++i) {\r\n      if (vertices[i].x !== vertices[i + 1].x) alignedX = false;\r\n      if (vertices[i].y !== vertices[i + 1].y) alignedY = false;\r\n    }\r\n    if (alignedX || alignedY) return false;\r\n\r\n    return true;\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      vertices,\r\n      onChangeVertexX,\r\n      onChangeVertexY,\r\n      onAdd,\r\n      onRemove,\r\n    } = this.props;\r\n\r\n    return (\r\n      <ThemeConsumer>\r\n        {muiTheme => (\r\n          <Table>\r\n            <TableHeader>\r\n              <TableRow>\r\n                <TableHeaderColumn />\r\n                <TableHeaderColumn>X</TableHeaderColumn>\r\n                <TableHeaderColumn>Y</TableHeaderColumn>\r\n                <TableRowColumn />\r\n              </TableRow>\r\n            </TableHeader>\r\n            <TableBody>\r\n              {vertices.map((value, index) => {\r\n                return (\r\n                  <TableRow\r\n                    key={`vertexRow${index}`}\r\n                    style={{\r\n                      backgroundColor: muiTheme.list.itemsBackgroundColor,\r\n                    }}\r\n                  >\r\n                    <TableRowColumn>\r\n                      {!this._isPolygonConvex(vertices) && <Warning />}\r\n                    </TableRowColumn>\r\n                    <TableRowColumn>\r\n                      <SemiControlledTextField\r\n                        margin=\"none\"\r\n                        fullWidth\r\n                        value={value.x.toString(10)}\r\n                        onChange={newValue =>\r\n                          onChangeVertexX(parseFloat(newValue) || 0, index)\r\n                        }\r\n                        type=\"number\"\r\n                      />\r\n                    </TableRowColumn>\r\n                    <TableRowColumn>\r\n                      <SemiControlledTextField\r\n                        margin=\"none\"\r\n                        fullWidth\r\n                        value={value.y.toString(10)}\r\n                        onChange={newValue =>\r\n                          onChangeVertexY(parseFloat(newValue) || 0, index)\r\n                        }\r\n                        type=\"number\"\r\n                      />\r\n                    </TableRowColumn>\r\n                    <TableRowColumn>\r\n                      <IconButton onClick={() => onRemove(index)}>\r\n                        <Delete />\r\n                      </IconButton>\r\n                    </TableRowColumn>\r\n                  </TableRow>\r\n                );\r\n              })}\r\n              <TableRow>\r\n                <TableRowColumn />\r\n                <TableRowColumn />\r\n                <TableRowColumn />\r\n                <TableRowColumn>\r\n                  <IconButton onClick={onAdd}>\r\n                    <AddCircle />\r\n                  </IconButton>\r\n                </TableRowColumn>\r\n              </TableRow>\r\n            </TableBody>\r\n          </Table>\r\n        )}\r\n      </ThemeConsumer>\r\n    );\r\n  }\r\n}\r\n","// @flow\r\nimport { t } from '@lingui/macro';\r\nimport { Trans } from '@lingui/macro';\r\n\r\nimport * as React from 'react';\r\nimport { Line, Column } from '../../../UI/Grid';\r\nimport Checkbox from '../../../UI/Checkbox';\r\nimport SelectField from '../../../UI/SelectField';\r\nimport SelectOption from '../../../UI/SelectOption';\r\nimport SemiControlledTextField from '../../../UI/SemiControlledTextField';\r\nimport ImagePreview from '../../../ResourcesList/ResourcePreview/ImagePreview';\r\nimport ResourceSelector from '../../../ResourcesList/ResourceSelector';\r\nimport ResourcesLoader from '../../../ResourcesLoader';\r\nimport ShapePreview from './ShapePreview.js';\r\nimport PolygonEditor from './PolygonEditor.js';\r\nimport { type BehaviorEditorProps } from '../BehaviorEditorProps.flow';\r\nimport Text from '../../../UI/Text';\r\nimport DismissableAlertMessage from '../../../UI/DismissableAlertMessage';\r\nimport { ResponsiveLineStackLayout } from '../../../UI/Layout';\r\nimport EmptyMessage from '../../../UI/EmptyMessage';\r\n\r\ntype Props = BehaviorEditorProps;\r\n\r\ntype State = {|\r\n  image: string,\r\n|};\r\n\r\nfunction NumericProperty(props: {|\r\n  properties: gdMapStringPropertyDescriptor,\r\n  propertyName: string,\r\n  step: number,\r\n  onUpdate: (newValue: string) => void,\r\n|}) {\r\n  const { properties, propertyName, step, onUpdate } = props;\r\n\r\n  return (\r\n    <SemiControlledTextField\r\n      fullWidth\r\n      value={properties.get(propertyName).getValue()}\r\n      key={propertyName}\r\n      floatingLabelText={properties.get(propertyName).getLabel()}\r\n      step={step}\r\n      onChange={onUpdate}\r\n      type=\"number\"\r\n    />\r\n  );\r\n}\r\n\r\nfunction BitProperty(props: {|\r\n  enabled: boolean,\r\n  propertyName: string,\r\n  pos: number,\r\n  spacing: boolean,\r\n  onUpdate: (enabled: boolean) => void,\r\n|}) {\r\n  const { enabled, propertyName, pos, spacing, onUpdate } = props;\r\n\r\n  return (\r\n    <div style={{ width: spacing ? '7.5%' : '5%' }}>\r\n      {\r\n        <Checkbox\r\n          checked={enabled}\r\n          onCheck={(e, checked) => onUpdate(checked)}\r\n        />\r\n      }\r\n      {spacing && (\r\n        <div\r\n          style={{ width: '33%' }}\r\n          key={propertyName + '-space' + pos.toString(10)}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default class Physics2Editor extends React.Component<Props, State> {\r\n  resourcesLoader = ResourcesLoader;\r\n\r\n  state = {\r\n    image: '',\r\n  };\r\n\r\n  _isBitEnabled(bitsValue: number, pos: number) {\r\n    return !!(bitsValue & (1 << pos));\r\n  }\r\n\r\n  _enableBit(bitsValue: number, pos: number, enable: boolean) {\r\n    if (enable) bitsValue |= 1 << pos;\r\n    else bitsValue &= ~(1 << pos);\r\n    return bitsValue;\r\n  }\r\n\r\n  render() {\r\n    const { behavior, behaviorContent, project } = this.props;\r\n\r\n    const properties = behavior.getProperties(\r\n      behaviorContent.getContent(),\r\n      project\r\n    );\r\n    const bits = Array(16).fill(null);\r\n    const shape = properties.get('shape').getValue();\r\n    const layersValues = parseInt(properties.get('layers').getValue(), 10);\r\n    const masksValues = parseInt(properties.get('masks').getValue(), 10);\r\n\r\n    return (\r\n      <Column>\r\n        <Line>\r\n          <SelectField\r\n            key={'bodyType'}\r\n            fullWidth\r\n            floatingLabelText={properties.get('bodyType').getLabel()}\r\n            value={properties.get('bodyType').getValue()}\r\n            onChange={(e, i, newValue: string) => {\r\n              behavior.updateProperty(\r\n                behaviorContent.getContent(),\r\n                'bodyType',\r\n                newValue,\r\n                project\r\n              );\r\n              this.forceUpdate();\r\n            }}\r\n          >\r\n            {[\r\n              <SelectOption\r\n                key={'dynamic'}\r\n                value={'Dynamic'}\r\n                primaryText={t`Dynamic`}\r\n              />,\r\n              <SelectOption\r\n                key={'static'}\r\n                value={'Static'}\r\n                primaryText={t`Static`}\r\n              />,\r\n              <SelectOption\r\n                key={'kinematic'}\r\n                value={'Kinematic'}\r\n                primaryText={t`Kinematic`}\r\n              />,\r\n            ]}\r\n          </SelectField>\r\n        </Line>\r\n        <ResponsiveLineStackLayout>\r\n          <Checkbox\r\n            label={properties.get('bullet').getLabel()}\r\n            checked={properties.get('bullet').getValue() === 'true'}\r\n            onCheck={(e, checked) => {\r\n              behavior.updateProperty(\r\n                behaviorContent.getContent(),\r\n                'bullet',\r\n                checked ? '1' : '0',\r\n                project\r\n              );\r\n              this.forceUpdate();\r\n            }}\r\n          />\r\n          <Checkbox\r\n            label={properties.get('fixedRotation').getLabel()}\r\n            checked={properties.get('fixedRotation').getValue() === 'true'}\r\n            onCheck={(e, checked) => {\r\n              behavior.updateProperty(\r\n                behaviorContent.getContent(),\r\n                'fixedRotation',\r\n                checked ? '1' : '0',\r\n                project\r\n              );\r\n              this.forceUpdate();\r\n            }}\r\n          />\r\n          <Checkbox\r\n            label={properties.get('canSleep').getLabel()}\r\n            checked={properties.get('canSleep').getValue() === 'true'}\r\n            onCheck={(e, checked) => {\r\n              behavior.updateProperty(\r\n                behaviorContent.getContent(),\r\n                'canSleep',\r\n                checked ? '1' : '0',\r\n                project\r\n              );\r\n              this.forceUpdate();\r\n            }}\r\n          />\r\n        </ResponsiveLineStackLayout>\r\n        <Line>\r\n          <DismissableAlertMessage\r\n            identifier=\"physics2-shape-collisions\"\r\n            kind=\"info\"\r\n          >\r\n            <Trans>\r\n              The shape used in the Physics behavior is independent from the\r\n              collision mask of the object. Be sure to use the \"Collision\"\r\n              condition provided by the Physics behavior in the events. The\r\n              usual \"Collision\" condition won't take into account the shape that\r\n              you've set up here.\r\n            </Trans>\r\n          </DismissableAlertMessage>\r\n        </Line>\r\n        <Line>\r\n          <SelectField\r\n            fullWidth\r\n            floatingLabelText={properties.get('shape').getLabel()}\r\n            value={properties.get('shape').getValue()}\r\n            onChange={(e, i, newValue: string) => {\r\n              behavior.updateProperty(\r\n                behaviorContent.getContent(),\r\n                'shape',\r\n                newValue,\r\n                project\r\n              );\r\n              this.forceUpdate();\r\n            }}\r\n          >\r\n            <SelectOption key={'box'} value={'Box'} primaryText={t`Box`} />\r\n            <SelectOption\r\n              key={'circle'}\r\n              value={'Circle'}\r\n              primaryText={t`Circle`}\r\n            />\r\n            <SelectOption key={'edge'} value={'Edge'} primaryText={t`Edge`} />\r\n            <SelectOption\r\n              key={'polygon'}\r\n              value={'Polygon'}\r\n              primaryText={t`Polygon`}\r\n            />\r\n          </SelectField>\r\n        </Line>\r\n        <ResponsiveLineStackLayout>\r\n          {shape !== 'Polygon' && (\r\n            <SemiControlledTextField\r\n              fullWidth\r\n              value={properties\r\n                .get(shape === 'Polygon' ? 'PolygonOriginX' : 'shapeDimensionA')\r\n                .getValue()}\r\n              key={'shapeDimensionA'}\r\n              floatingLabelText={\r\n                shape === 'Circle'\r\n                  ? 'Radius'\r\n                  : shape === 'Edge'\r\n                  ? 'Length'\r\n                  : 'Width'\r\n              }\r\n              min={0}\r\n              onChange={newValue => {\r\n                behavior.updateProperty(\r\n                  behaviorContent.getContent(),\r\n                  shape === 'Polygon' ? 'PolygonOriginX' : 'shapeDimensionA',\r\n                  newValue,\r\n                  project\r\n                );\r\n                this.forceUpdate();\r\n              }}\r\n              type=\"number\"\r\n            />\r\n          )}\r\n          {shape !== 'Polygon' && shape !== 'Circle' && (\r\n            <SemiControlledTextField\r\n              fullWidth\r\n              value={properties\r\n                .get(shape === 'Polygon' ? 'PolygonOriginY' : 'shapeDimensionB')\r\n                .getValue()}\r\n              key={'shapeDimensionB'}\r\n              floatingLabelText={shape === 'Edge' ? 'Angle' : 'Height'}\r\n              min={shape === 'Edge' ? undefined : 0}\r\n              onChange={newValue => {\r\n                behavior.updateProperty(\r\n                  behaviorContent.getContent(),\r\n                  shape === 'Polygon' ? 'PolygonOriginY' : 'shapeDimensionB',\r\n                  newValue,\r\n                  project\r\n                );\r\n                this.forceUpdate();\r\n              }}\r\n              type=\"number\"\r\n            />\r\n          )}\r\n          {shape === 'Polygon' && (\r\n            <SelectField\r\n              fullWidth\r\n              floatingLabelText={properties.get('polygonOrigin').getLabel()}\r\n              value={properties.get('polygonOrigin').getValue()}\r\n              onChange={(e, i, newValue: string) => {\r\n                behavior.updateProperty(\r\n                  behaviorContent.getContent(),\r\n                  'polygonOrigin',\r\n                  newValue,\r\n                  project\r\n                );\r\n                this.forceUpdate();\r\n              }}\r\n            >\r\n              {[\r\n                <SelectOption\r\n                  key={'center'}\r\n                  value={'Center'}\r\n                  primaryText={t`Center`}\r\n                />,\r\n                <SelectOption\r\n                  key={'origin'}\r\n                  value={'Origin'}\r\n                  primaryText={t`Origin`}\r\n                />,\r\n                <SelectOption\r\n                  key={'topLeft'}\r\n                  value={'TopLeft'}\r\n                  primaryText={t`Top-Left`}\r\n                />,\r\n              ]}\r\n            </SelectField>\r\n          )}\r\n          <NumericProperty\r\n            properties={properties}\r\n            propertyName={'shapeOffsetX'}\r\n            step={1}\r\n            onUpdate={newValue => {\r\n              behavior.updateProperty(\r\n                behaviorContent.getContent(),\r\n                'shapeOffsetX',\r\n                newValue,\r\n                project\r\n              );\r\n              this.forceUpdate();\r\n            }}\r\n          />\r\n          <NumericProperty\r\n            properties={properties}\r\n            propertyName={'shapeOffsetY'}\r\n            step={1}\r\n            onUpdate={newValue => {\r\n              this.props.behavior.updateProperty(\r\n                behaviorContent.getContent(),\r\n                'shapeOffsetY',\r\n                newValue,\r\n                this.props.project\r\n              );\r\n              this.forceUpdate();\r\n            }}\r\n          />\r\n        </ResponsiveLineStackLayout>\r\n        <Line>\r\n          <ResourceSelector\r\n            floatingLabelText={\r\n              <Trans>\r\n                A temporary image to help you visualize the shape/polygon\r\n              </Trans>\r\n            }\r\n            project={this.props.project}\r\n            resourceSources={this.props.resourceSources}\r\n            onChooseResource={this.props.onChooseResource}\r\n            resourceExternalEditors={this.props.resourceExternalEditors}\r\n            resourcesLoader={this.resourcesLoader}\r\n            resourceKind={'image'}\r\n            initialResourceName={''}\r\n            fullWidth\r\n            onChange={resourceName => {\r\n              this.setState({ image: resourceName });\r\n              this.forceUpdate();\r\n            }}\r\n          />\r\n        </Line>\r\n        {!this.state.image && (\r\n          <Line>\r\n            <EmptyMessage>\r\n              <Trans>\r\n                To preview the shape that the Physics engine will use for this\r\n                object, choose first a temporary image to use for the preview.\r\n              </Trans>\r\n            </EmptyMessage>\r\n          </Line>\r\n        )}\r\n        {this.state.image && (\r\n          <Line>\r\n            <div\r\n              style={{\r\n                width:\r\n                  '100%' /* This div prevents ImagePreview to overflow outside the parent */,\r\n              }}\r\n            >\r\n              <ImagePreview\r\n                resourceName={this.state.image}\r\n                project={this.props.project}\r\n                resourcesLoader={this.resourcesLoader}\r\n                renderOverlay={({\r\n                  imageWidth,\r\n                  imageHeight,\r\n                  imageZoomFactor,\r\n                }) => (\r\n                  <ShapePreview\r\n                    shape={properties.get('shape').getValue()}\r\n                    dimensionA={parseFloat(\r\n                      properties.get('shapeDimensionA').getValue()\r\n                    )}\r\n                    dimensionB={parseFloat(\r\n                      properties.get('shapeDimensionB').getValue()\r\n                    )}\r\n                    offsetX={parseFloat(\r\n                      properties.get('shapeOffsetX').getValue()\r\n                    )}\r\n                    offsetY={parseFloat(\r\n                      properties.get('shapeOffsetY').getValue()\r\n                    )}\r\n                    polygonOrigin={properties.get('polygonOrigin').getValue()}\r\n                    vertices={JSON.parse(properties.get('vertices').getValue())}\r\n                    width={imageWidth}\r\n                    height={imageHeight}\r\n                    zoomFactor={imageZoomFactor}\r\n                    onMoveVertex={(index, newX, newY) => {\r\n                      let vertices = JSON.parse(\r\n                        properties.get('vertices').getValue()\r\n                      );\r\n                      vertices[index].x = newX;\r\n                      vertices[index].y = newY;\r\n                      behavior.updateProperty(\r\n                        behaviorContent.getContent(),\r\n                        'vertices',\r\n                        JSON.stringify(vertices),\r\n                        project\r\n                      );\r\n                      this.forceUpdate();\r\n                    }}\r\n                  />\r\n                )}\r\n              />\r\n            </div>\r\n          </Line>\r\n        )}\r\n        {shape === 'Polygon' && (\r\n          <Line>\r\n            <PolygonEditor\r\n              vertices={JSON.parse(properties.get('vertices').getValue())}\r\n              onChangeVertexX={(newValue, index) => {\r\n                let vertices = JSON.parse(\r\n                  properties.get('vertices').getValue()\r\n                );\r\n                vertices[index].x = newValue;\r\n                behavior.updateProperty(\r\n                  behaviorContent.getContent(),\r\n                  'vertices',\r\n                  JSON.stringify(vertices),\r\n                  project\r\n                );\r\n                this.forceUpdate();\r\n              }}\r\n              onChangeVertexY={(newValue, index) => {\r\n                let vertices = JSON.parse(\r\n                  properties.get('vertices').getValue()\r\n                );\r\n                vertices[index].y = newValue;\r\n                behavior.updateProperty(\r\n                  behaviorContent.getContent(),\r\n                  'vertices',\r\n                  JSON.stringify(vertices),\r\n                  project\r\n                );\r\n                this.forceUpdate();\r\n              }}\r\n              onAdd={() => {\r\n                let vertices = JSON.parse(\r\n                  properties.get('vertices').getValue()\r\n                );\r\n                if (vertices.length >= 8) return;\r\n                vertices.push({ x: 0, y: 0 });\r\n                behavior.updateProperty(\r\n                  behaviorContent.getContent(),\r\n                  'vertices',\r\n                  JSON.stringify(vertices),\r\n                  project\r\n                );\r\n                this.forceUpdate();\r\n              }}\r\n              onRemove={index => {\r\n                let vertices = JSON.parse(\r\n                  properties.get('vertices').getValue()\r\n                );\r\n                vertices.splice(index, 1);\r\n                behavior.updateProperty(\r\n                  behaviorContent.getContent(),\r\n                  'vertices',\r\n                  JSON.stringify(vertices),\r\n                  project\r\n                );\r\n                this.forceUpdate();\r\n              }}\r\n            />\r\n          </Line>\r\n        )}\r\n        <ResponsiveLineStackLayout>\r\n          <NumericProperty\r\n            properties={properties}\r\n            propertyName={'density'}\r\n            step={0.1}\r\n            onUpdate={newValue => {\r\n              behavior.updateProperty(\r\n                behaviorContent.getContent(),\r\n                'density',\r\n                parseFloat(newValue) > 0 ? newValue : '0',\r\n                project\r\n              );\r\n              this.forceUpdate();\r\n            }}\r\n          />\r\n          <NumericProperty\r\n            properties={properties}\r\n            propertyName={'gravityScale'}\r\n            step={0.1}\r\n            onUpdate={newValue => {\r\n              behavior.updateProperty(\r\n                behaviorContent.getContent(),\r\n                'gravityScale',\r\n                newValue,\r\n                project\r\n              );\r\n              this.forceUpdate();\r\n            }}\r\n          />\r\n        </ResponsiveLineStackLayout>\r\n        <ResponsiveLineStackLayout>\r\n          <NumericProperty\r\n            properties={properties}\r\n            propertyName={'friction'}\r\n            step={0.1}\r\n            onUpdate={newValue => {\r\n              behavior.updateProperty(\r\n                behaviorContent.getContent(),\r\n                'friction',\r\n                parseFloat(newValue) > 0 ? newValue : '0',\r\n                project\r\n              );\r\n              this.forceUpdate();\r\n            }}\r\n          />\r\n          <NumericProperty\r\n            properties={properties}\r\n            propertyName={'restitution'}\r\n            step={0.1}\r\n            onUpdate={newValue => {\r\n              behavior.updateProperty(\r\n                behaviorContent.getContent(),\r\n                'restitution',\r\n                parseFloat(newValue) > 0 ? newValue : '0',\r\n                project\r\n              );\r\n              this.forceUpdate();\r\n            }}\r\n          />\r\n        </ResponsiveLineStackLayout>\r\n        <ResponsiveLineStackLayout>\r\n          <NumericProperty\r\n            properties={properties}\r\n            propertyName={'linearDamping'}\r\n            step={0.05}\r\n            onUpdate={newValue => {\r\n              behavior.updateProperty(\r\n                behaviorContent.getContent(),\r\n                'linearDamping',\r\n                newValue,\r\n                project\r\n              );\r\n              this.forceUpdate();\r\n            }}\r\n          />\r\n          <NumericProperty\r\n            properties={properties}\r\n            propertyName={'angularDamping'}\r\n            step={0.05}\r\n            onUpdate={newValue => {\r\n              behavior.updateProperty(\r\n                behaviorContent.getContent(),\r\n                'angularDamping',\r\n                newValue,\r\n                project\r\n              );\r\n              this.forceUpdate();\r\n            }}\r\n          />\r\n        </ResponsiveLineStackLayout>\r\n        <Line>\r\n          <Text>{properties.get('layers').getLabel()}</Text>\r\n          {bits.map((value, index) => {\r\n            return (\r\n              <BitProperty\r\n                enabled={this._isBitEnabled(layersValues, index)}\r\n                propertyName={'layers'}\r\n                pos={index}\r\n                spacing={index === 7}\r\n                onUpdate={enabled => {\r\n                  const newValue = this._enableBit(\r\n                    layersValues,\r\n                    index,\r\n                    enabled\r\n                  );\r\n                  this.props.behavior.updateProperty(\r\n                    behaviorContent.getContent(),\r\n                    'layers',\r\n                    newValue.toString(10),\r\n                    this.props.project\r\n                  );\r\n                  this.forceUpdate();\r\n                }}\r\n                key={`layer${index}`}\r\n              />\r\n            );\r\n          })}\r\n        </Line>\r\n        <Line>\r\n          <Text>{properties.get('masks').getLabel()}</Text>\r\n          {bits.map((value, index) => {\r\n            return (\r\n              <BitProperty\r\n                enabled={this._isBitEnabled(masksValues, index)}\r\n                propertyName={'masks'}\r\n                pos={index}\r\n                spacing={index === 7}\r\n                onUpdate={enabled => {\r\n                  const newValue = this._enableBit(masksValues, index, enabled);\r\n                  this.props.behavior.updateProperty(\r\n                    behaviorContent.getContent(),\r\n                    'masks',\r\n                    newValue.toString(10),\r\n                    this.props.project\r\n                  );\r\n                  this.forceUpdate();\r\n                }}\r\n                key={`mask${index}`}\r\n              />\r\n            );\r\n          })}\r\n        </Line>\r\n      </Column>\r\n    );\r\n  }\r\n}\r\n","// @flow\nimport BehaviorPropertiesEditor from './Editors/BehaviorPropertiesEditor';\nimport Physics2Editor from './Editors/Physics2Editor';\n\n/**\n * A service returning editor components for each behavior type.\n */\nexport default {\n  getEditor(behaviorType: string) {\n    if (!this.components[behaviorType]) {\n      return BehaviorPropertiesEditor; // Default properties editor\n    }\n    return this.components[behaviorType].component; // Custom  behavior editor\n  },\n  components: {\n    'Physics2::Physics2Behavior': {\n      component: Physics2Editor,\n    },\n  },\n};\n","// @flow\nimport { Trans } from '@lingui/macro';\nimport { t } from '@lingui/macro';\n\nimport * as React from 'react';\nimport FlatButton from '../UI/FlatButton';\nimport Checkbox from '../UI/Checkbox';\nimport SelectField from '../UI/SelectField';\nimport SelectOption from '../UI/SelectOption';\nimport Dialog from '../UI/Dialog';\nimport SemiControlledTextField from '../UI/SemiControlledTextField';\nimport SubscriptionChecker from '../Profile/SubscriptionChecker';\nimport {\n  getErrors,\n  displayProjectErrorsBox,\n  validatePackageName,\n} from './ProjectErrorsChecker';\nimport DismissableAlertMessage from '../UI/DismissableAlertMessage';\nimport HelpButton from '../UI/HelpButton';\nimport { ResponsiveLineStackLayout } from '../UI/Layout';\nimport Text from '../UI/Text';\n\ntype Props = {|\n  project: gdProject,\n  open: boolean,\n  onClose: Function,\n  onApply: Function,\n  onChangeSubscription: () => void,\n|};\n\ntype State = {|\n  gameResolutionWidth: number,\n  gameResolutionHeight: number,\n  adaptGameResolutionAtRuntime: boolean,\n  name: string,\n  author: string,\n  version: string,\n  packageName: string,\n  orientation: string,\n  adMobAppId: string,\n  scaleMode: string,\n  sizeOnStartupMode: string,\n  showGDevelopSplash: boolean,\n  minFPS: number,\n  maxFPS: number,\n  isFolderProject: boolean,\n|};\n\nclass ProjectPropertiesDialog extends React.Component<Props, State> {\n  constructor(props: Props) {\n    super(props);\n    this.state = this._loadFrom(props.project);\n  }\n\n  _subscriptionChecker: ?SubscriptionChecker = null;\n\n  _loadFrom(project: gdProject): State {\n    return {\n      gameResolutionWidth: project.getGameResolutionWidth(),\n      gameResolutionHeight: project.getGameResolutionHeight(),\n      adaptGameResolutionAtRuntime: project.getAdaptGameResolutionAtRuntime(),\n      name: project.getName(),\n      author: project.getAuthor(),\n      version: project.getVersion(),\n      packageName: project.getPackageName(),\n      orientation: project.getOrientation(),\n      adMobAppId: project.getAdMobAppId(),\n      scaleMode: project.getScaleMode(),\n      sizeOnStartupMode: project.getSizeOnStartupMode(),\n      showGDevelopSplash: project.getLoadingScreen().isGDevelopSplashShown(),\n      minFPS: project.getMinimumFPS(),\n      maxFPS: project.getMaximumFPS(),\n      isFolderProject: project.isFolderProject(),\n    };\n  }\n\n  componentWillReceiveProps(newProps: Props) {\n    if (\n      (!this.props.open && newProps.open) ||\n      (newProps.open && this.props.project !== newProps.project)\n    ) {\n      this.setState(this._loadFrom(newProps.project));\n    }\n  }\n\n  _onApply = () => {\n    const t = str => str; //TODO\n    const { project } = this.props;\n    const {\n      gameResolutionWidth,\n      gameResolutionHeight,\n      adaptGameResolutionAtRuntime,\n      name,\n      author,\n      version,\n      packageName,\n      orientation,\n      adMobAppId,\n      scaleMode,\n      sizeOnStartupMode,\n      showGDevelopSplash,\n      minFPS,\n      maxFPS,\n      isFolderProject,\n    } = this.state;\n    project.setGameResolutionSize(gameResolutionWidth, gameResolutionHeight);\n    project.setAdaptGameResolutionAtRuntime(adaptGameResolutionAtRuntime);\n    project.setName(name);\n    project.setAuthor(author);\n    project.setVersion(version);\n    project.setPackageName(packageName);\n    project.setOrientation(orientation);\n    project.setAdMobAppId(adMobAppId);\n    project.setScaleMode(scaleMode);\n    project.setSizeOnStartupMode(sizeOnStartupMode);\n    project.setMinimumFPS(minFPS);\n    project.setMaximumFPS(maxFPS);\n    project.getLoadingScreen().showGDevelopSplash(showGDevelopSplash);\n    project.setFolderProject(isFolderProject);\n\n    if (!displayProjectErrorsBox(t, getErrors(t, project))) return;\n\n    this.props.onApply();\n  };\n\n  render() {\n    const {\n      name,\n      gameResolutionWidth,\n      gameResolutionHeight,\n      adaptGameResolutionAtRuntime,\n      author,\n      version,\n      packageName,\n      orientation,\n      adMobAppId,\n      scaleMode,\n      sizeOnStartupMode,\n      showGDevelopSplash,\n      minFPS,\n      maxFPS,\n      isFolderProject,\n    } = this.state;\n\n    const defaultPackageName = 'com.example.mygame';\n    const admobHint = 'ca-app-pub-XXXXXXXXXXXXXXXX/YYYYYYYYYY';\n    const defaultVersion = '1.0.0';\n\n    return (\n      <React.Fragment>\n        <Dialog\n          actions={[\n            <FlatButton\n              label={<Trans>Cancel</Trans>}\n              primary={false}\n              onClick={this.props.onClose}\n              key=\"cancel\"\n            />,\n            <FlatButton\n              label={<Trans>Apply</Trans>}\n              primary={true}\n              onClick={this._onApply}\n              key=\"apply\"\n            />,\n          ]}\n          secondaryActions={[\n            <HelpButton\n              helpPagePath=\"/interface/project-manager/properties\"\n              key=\"help\"\n            />,\n          ]}\n          title={<Trans>Project properties</Trans>}\n          cannotBeDismissed={true}\n          open={this.props.open}\n          onRequestClose={this.props.onClose}\n        >\n          <SemiControlledTextField\n            floatingLabelText={<Trans>Game name</Trans>}\n            fullWidth\n            type=\"text\"\n            value={name}\n            onChange={value => this.setState({ name: value })}\n            autoFocus\n          />\n          <Checkbox\n            label={\n              <Trans>\n                Display GDevelop splash at startup (in exported game)\n              </Trans>\n            }\n            checked={showGDevelopSplash}\n            onCheck={(e, checked) => {\n              if (!checked) {\n                if (\n                  this._subscriptionChecker &&\n                  !this._subscriptionChecker.checkHasSubscription()\n                )\n                  return;\n              }\n\n              this.setState({\n                showGDevelopSplash: checked,\n              });\n            }}\n          />\n          <SemiControlledTextField\n            floatingLabelText={<Trans>Version number (X.Y.Z)</Trans>}\n            fullWidth\n            hintText={defaultVersion}\n            type=\"text\"\n            value={version}\n            onChange={value => this.setState({ version: value })}\n          />\n          <SemiControlledTextField\n            floatingLabelText={\n              <Trans>Package name (for iOS and Android)</Trans>\n            }\n            fullWidth\n            hintText={defaultPackageName}\n            type=\"text\"\n            value={packageName}\n            onChange={value => this.setState({ packageName: value })}\n            errorText={\n              validatePackageName(packageName) ? (\n                undefined\n              ) : (\n                <Trans>\n                  The package name is containing invalid characters or not\n                  following the convention \"xxx.yyy.zzz\" (numbers allowed after\n                  a letter only).\n                </Trans>\n              )\n            }\n          />\n          <SemiControlledTextField\n            floatingLabelText={<Trans>Author name</Trans>}\n            fullWidth\n            hintText={t`Your name`}\n            type=\"text\"\n            value={author}\n            onChange={value => this.setState({ author: value })}\n          />\n          <Text size=\"title\">\n            <Trans>Resolution and rendering</Trans>\n          </Text>\n          <ResponsiveLineStackLayout noMargin>\n            <SemiControlledTextField\n              floatingLabelText={<Trans>Game resolution width</Trans>}\n              fullWidth\n              type=\"number\"\n              value={'' + gameResolutionWidth}\n              onChange={value =>\n                this.setState({\n                  gameResolutionWidth: Math.max(1, parseInt(value, 10)),\n                })\n              }\n            />\n            <SemiControlledTextField\n              floatingLabelText={<Trans>Game resolution height</Trans>}\n              fullWidth\n              type=\"number\"\n              value={'' + gameResolutionHeight}\n              onChange={value =>\n                this.setState({\n                  gameResolutionHeight: Math.max(1, parseInt(value, 10)),\n                })\n              }\n            />\n          </ResponsiveLineStackLayout>\n          <SelectField\n            fullWidth\n            floatingLabelText={\n              <Trans>Game resolution resize mode (fullscreen or window)</Trans>\n            }\n            value={sizeOnStartupMode}\n            onChange={(e, i, value: string) =>\n              this.setState({ sizeOnStartupMode: value })\n            }\n          >\n            <SelectOption\n              value=\"\"\n              primaryText={t`No changes to the game size`}\n            />\n            <SelectOption\n              value=\"adaptWidth\"\n              primaryText={t`Change width to fit the screen or window size`}\n            />\n            <SelectOption\n              value=\"adaptHeight\"\n              primaryText={t`Change height to fit the screen or window size`}\n            />\n          </SelectField>\n          <Checkbox\n            label={\n              <Trans>\n                Update resolution during the game to fit the screen or window\n                size\n              </Trans>\n            }\n            disabled={sizeOnStartupMode === ''}\n            checked={adaptGameResolutionAtRuntime}\n            onCheck={(e, checked) => {\n              this.setState({\n                adaptGameResolutionAtRuntime: checked,\n              });\n            }}\n          />\n          <ResponsiveLineStackLayout noMargin>\n            <SemiControlledTextField\n              floatingLabelText={<Trans>Minimum FPS</Trans>}\n              fullWidth\n              type=\"number\"\n              value={'' + minFPS}\n              onChange={value =>\n                this.setState({\n                  minFPS: Math.max(0, parseInt(value, 10)),\n                })\n              }\n            />\n            <SemiControlledTextField\n              floatingLabelText={<Trans>Maximum FPS (0 to disable)</Trans>}\n              fullWidth\n              type=\"number\"\n              value={'' + maxFPS}\n              onChange={value =>\n                this.setState({\n                  maxFPS: Math.max(0, parseInt(value, 10)),\n                })\n              }\n            />\n          </ResponsiveLineStackLayout>\n          {maxFPS > 0 && maxFPS < 60 && (\n            <DismissableAlertMessage\n              identifier=\"maximum-fps-too-low\"\n              kind=\"warning\"\n            >\n              <Trans>\n                Most monitors have a refresh rate of 60 FPS. Setting a maximum\n                number of FPS under 60 will force the game to skip frames, and\n                the real number of FPS will be way below 60, making the game\n                laggy and impacting the gameplay negatively. Consider putting 60\n                or more for the maximum number or FPS, or disable it by setting\n                0.\n              </Trans>\n            </DismissableAlertMessage>\n          )}\n          {minFPS < 20 && (\n            <DismissableAlertMessage\n              identifier=\"minimum-fps-too-low\"\n              kind=\"warning\"\n            >\n              <Trans>\n                Setting the minimum number of FPS below 20 will increase a lot\n                the time that is allowed between the simulation of two frames of\n                the game. If case of a sudden slowdown, or on slow computers,\n                this can create buggy behaviors like objects passing beyond a\n                wall. Consider setting 20 as the minimum FPS.\n              </Trans>\n            </DismissableAlertMessage>\n          )}\n          <SelectField\n            fullWidth\n            floatingLabelText={\n              <Trans>Device orientation (for iOS and Android)</Trans>\n            }\n            value={orientation}\n            onChange={(e, i, value: string) =>\n              this.setState({ orientation: value })\n            }\n          >\n            <SelectOption value=\"default\" primaryText={t`Platform default`} />\n            <SelectOption value=\"landscape\" primaryText={t`Landscape`} />\n            <SelectOption value=\"portrait\" primaryText={t`Portrait`} />\n          </SelectField>\n          <SelectField\n            fullWidth\n            floatingLabelText={\n              <Trans>Scale mode (also called \"Sampling\")</Trans>\n            }\n            value={scaleMode}\n            onChange={(e, i, value: string) =>\n              this.setState({ scaleMode: value })\n            }\n          >\n            <SelectOption\n              value=\"linear\"\n              primaryText={t`Linear (antialiased rendering, good for most games)`}\n            />\n            <SelectOption\n              value=\"nearest\"\n              primaryText={t`Nearest (no antialiasing, good for pixel perfect games)`}\n            />\n          </SelectField>\n          {scaleMode === 'nearest' && (\n            <DismissableAlertMessage\n              identifier=\"use-non-smoothed-textures\"\n              kind=\"info\"\n            >\n              <Trans>\n                To obtain the best pixel-perfect effect possible, go in the\n                resources editor and disable the Smoothing for all images of\n                your game. It will be done automatically for new images added\n                from now.\n              </Trans>\n            </DismissableAlertMessage>\n          )}\n          <Text size=\"title\">\n            <Trans>AdMob</Trans>\n          </Text>\n          <SemiControlledTextField\n            floatingLabelText={\n              <Trans>AdMob application ID (for iOS and Android)</Trans>\n            }\n            fullWidth\n            hintText={admobHint}\n            type=\"text\"\n            value={adMobAppId}\n            onChange={value => this.setState({ adMobAppId: value })}\n          />\n          <Text size=\"title\">\n            <Trans>Project files</Trans>\n          </Text>\n          <SelectField\n            fullWidth\n            floatingLabelText={<Trans>Project file type</Trans>}\n            value={isFolderProject ? 'folder-project' : 'single-file'}\n            onChange={(e, i, value: string) =>\n              this.setState({ isFolderProject: value === 'folder-project' })\n            }\n          >\n            <SelectOption\n              value={'single-file'}\n              primaryText={t`Single file (default)`}\n            />\n            <SelectOption\n              value={'folder-project'}\n              primaryText={t`Multiple files, saved in folder next to the main file`}\n            />\n          </SelectField>\n        </Dialog>\n        <SubscriptionChecker\n          ref={subscriptionChecker =>\n            (this._subscriptionChecker = subscriptionChecker)\n          }\n          onChangeSubscription={() => {\n            this.props.onClose();\n            this.props.onChangeSubscription();\n          }}\n          mode=\"mandatory\"\n          id=\"Disable GDevelop splash at startup\"\n          title={<Trans>Disable GDevelop splash at startup</Trans>}\n        />\n      </React.Fragment>\n    );\n  }\n}\n\nexport default ProjectPropertiesDialog;\n","// @flow\nimport { Trans } from '@lingui/macro';\nimport { t } from '@lingui/macro';\nimport { I18n } from '@lingui/react';\nimport { type I18n as I18nType } from '@lingui/core';\nimport React, { Component } from 'react';\nimport Dialog from '../UI/Dialog';\nimport FlatButton from '../UI/FlatButton';\nimport CloudDownload from '@material-ui/icons/CloudDownload';\nimport ExtensionsSearch, { addSerializedExtensionToProject } from '.';\nimport EventsFunctionsExtensionsContext, {\n  type EventsFunctionsExtensionsState,\n} from '../EventsFunctionsExtensionsLoader/EventsFunctionsExtensionsContext';\nimport HelpButton from '../UI/HelpButton';\nimport { showWarningBox } from '../UI/Messages/MessageBox';\nimport Window from '../Utils/Window';\n\ntype Props = {|\n  project: gdProject,\n  onClose: () => void,\n|};\n\nconst importExtension = (\n  i18n: I18nType,\n  eventsFunctionsExtensionsState: EventsFunctionsExtensionsState,\n  project: gdProject\n) => {\n  const eventsFunctionsExtensionOpener = eventsFunctionsExtensionsState.getEventsFunctionsExtensionOpener();\n  if (!eventsFunctionsExtensionOpener) return;\n\n  return eventsFunctionsExtensionOpener\n    .chooseEventsFunctionExtensionFile()\n    .then(pathOrUrl => {\n      if (!pathOrUrl) return;\n\n      return eventsFunctionsExtensionOpener\n        .readEventsFunctionExtensionFile(pathOrUrl)\n        .then(serializedExtension => {\n          if (\n            project.hasEventsFunctionsExtensionNamed(serializedExtension.name)\n          ) {\n            const answer = Window.showConfirmDialog(\n              i18n._(\n                t`An extension with this name already exists in the project. Importing this extension will replace it: are you sure you want to continue?`\n              )\n            );\n            if (!answer) return;\n          }\n\n          return addSerializedExtensionToProject(\n            eventsFunctionsExtensionsState,\n            project,\n            serializedExtension\n          );\n        });\n    })\n    .catch(error => {\n      showWarningBox(\n        i18n._(\n          t`An error happened while loading this extension. Please check that it is a proper extension file and compatible with this version of GDevelop`,\n          error\n        )\n      );\n    });\n};\n\nexport default class ExtensionsSearchDialog extends Component<Props, {||}> {\n  render() {\n    const { project, onClose } = this.props;\n\n    return (\n      <I18n>\n        {({ i18n }) => (\n          <EventsFunctionsExtensionsContext.Consumer>\n            {eventsFunctionsExtensionsState => {\n              const eventsFunctionsExtensionOpener = eventsFunctionsExtensionsState.getEventsFunctionsExtensionOpener();\n              return (\n                <Dialog\n                  title={<Trans>Search for New Extensions</Trans>}\n                  actions={[\n                    <FlatButton\n                      key=\"close\"\n                      label={<Trans>Close</Trans>}\n                      primary\n                      onClick={onClose}\n                    />,\n                  ]}\n                  secondaryActions={[\n                    <HelpButton key=\"help\" helpPagePath=\"/extensions/search\" />,\n                    eventsFunctionsExtensionOpener ? (\n                      <FlatButton\n                        icon={<CloudDownload />}\n                        key=\"import\"\n                        label={<Trans>Import extension</Trans>}\n                        onClick={() => {\n                          importExtension(\n                            i18n,\n                            eventsFunctionsExtensionsState,\n                            project\n                          );\n                        }}\n                      />\n                    ) : null,\n                  ]}\n                  cannotBeDismissed={true}\n                  open\n                  noMargin\n                  onRequestClose={onClose}\n                >\n                  <ExtensionsSearch\n                    project={project}\n                    onNewExtensionInstalled={() => {}}\n                    onRegistryLoaded={() => {\n                      this.forceUpdate(); // Force update to ensure dialog is properly positioned.\n                    }}\n                    showOnlyWithBehaviors={false}\n                  />\n                </Dialog>\n              );\n            }}\n          </EventsFunctionsExtensionsContext.Consumer>\n        )}\n      </I18n>\n    );\n  }\n}\n","import React from 'react';\nimport SvgIcon from '@material-ui/core/SvgIcon';\n\n// This is \"AccountTree\" material icon.\nexport default React.memo(props => (\n  <SvgIcon {...props}>\n    <path d=\"M22 11V3h-7v3H9V3H2v8h7V8h2v10h4v3h7v-8h-7v3h-2V8h2v3z\" />\n  </SvgIcon>\n));\n","// @flow\nimport { Trans } from '@lingui/macro';\n\nimport * as React from 'react';\nimport { List, ListItem } from '../UI/List';\nimport TextField, {\n  noMarginTextFieldInListItemTopOffset,\n} from '../UI/TextField';\nimport SearchBar from '../UI/SearchBar';\nimport WarningIcon from '@material-ui/icons/Warning';\nimport ListIcon from '../UI/ListIcon';\nimport { AddListItem, SearchListItem } from '../UI/ListCommonItem';\nimport Window from '../Utils/Window';\nimport VariablesEditorDialog from '../VariablesList/VariablesEditorDialog';\nimport ProjectPropertiesDialog from './ProjectPropertiesDialog';\nimport {\n  enumerateLayouts,\n  enumerateExternalEvents,\n  enumerateExternalLayouts,\n  enumerateEventsFunctionsExtensions,\n  filterProjectItemsList,\n} from './EnumerateProjectItems';\nimport newNameGenerator from '../Utils/NewNameGenerator';\nimport Clipboard from '../Utils/Clipboard';\nimport {\n  serializeToJSObject,\n  unserializeFromJSObject,\n} from '../Utils/Serializer';\nimport ThemeConsumer from '../UI/Theme/ThemeConsumer';\nimport ExtensionsSearchDialog from '../ExtensionsSearch/ExtensionsSearchDialog';\nimport Close from '@material-ui/icons/Close';\nimport SettingsApplications from '@material-ui/icons/SettingsApplications';\nimport PhotoLibrary from '@material-ui/icons/PhotoLibrary';\nimport Settings from '@material-ui/icons/Settings';\nimport Save from '@material-ui/icons/Save';\nimport VariableTree from '../UI/CustomSvgIcons/VariableTree';\nimport ArtTrack from '@material-ui/icons/ArtTrack';\nimport AddToHomeScreen from '@material-ui/icons/AddToHomeScreen';\nimport Fullscreen from '@material-ui/icons/Fullscreen';\nimport FileCopy from '@material-ui/icons/FileCopy';\nimport AccountCircle from '@material-ui/icons/AccountCircle';\nimport ScenePropertiesDialog from '../SceneEditor/ScenePropertiesDialog';\nimport SceneVariablesDialog from '../SceneEditor/SceneVariablesDialog';\nimport { type UnsavedChanges } from '../MainFrame/UnsavedChangesContext';\nimport { type MenuItemTemplate } from '../UI/Menu/Menu.flow';\n\nconst LAYOUT_CLIPBOARD_KIND = 'Layout';\nconst EXTERNAL_LAYOUT_CLIPBOARD_KIND = 'External layout';\nconst EXTERNAL_EVENTS_CLIPBOARD_KIND = 'External events';\nconst EVENTS_FUNCTIONS_EXTENSION_CLIPBOARD_KIND = 'Events Functions Extension';\n\nconst styles = {\n  container: {\n    flex: 1,\n    display: 'flex',\n    flexDirection: 'column',\n    overflowY: 'hidden',\n  },\n  list: {\n    flex: 1,\n    overflowY: 'scroll',\n    padding: 0,\n  },\n  noIndentNestedList: {\n    padding: 0,\n  },\n  itemName: {\n    overflow: 'hidden',\n    whiteSpace: 'nowrap',\n    textOverflow: 'ellipsis',\n  },\n  itemTextField: {\n    top: noMarginTextFieldInListItemTopOffset,\n  },\n};\n\ntype ProjectStructureItemProps = {|\n  autoGenerateNestedIndicator?: boolean,\n  initiallyOpen?: boolean,\n  leftIcon?: React$Element<any>,\n  indentNestedItems?: boolean,\n  renderNestedItems: () => Array<React$Element<any> | null>,\n  primaryText: React.Node,\n  error?: ?Error,\n  onRefresh?: () => void,\n  open?: boolean,\n|};\n\nconst ProjectStructureItem = (props: ProjectStructureItemProps) => (\n  <ThemeConsumer>\n    {muiTheme => {\n      const {\n        error,\n        leftIcon,\n        onRefresh,\n        indentNestedItems,\n        ...otherProps\n      } = props;\n      return (\n        <ListItem\n          style={{\n            backgroundColor: muiTheme.listItem.groupBackgroundColor,\n            borderBottom: `1px solid ${muiTheme.listItem.separatorColor}`,\n          }}\n          nestedListStyle={\n            indentNestedItems ? undefined : styles.noIndentNestedList\n          }\n          {...otherProps}\n          leftIcon={error ? <WarningIcon /> : leftIcon}\n          displayReloadButton={!!error}\n          onReload={onRefresh}\n          reloadButtonTooltip={`An error has occured in functions. Click to reload them.`}\n        />\n      );\n    }}\n  </ThemeConsumer>\n);\n\ntype ItemProps = {|\n  primaryText: string,\n  editingName: boolean,\n  onEdit: () => void,\n  onDelete: () => void,\n  addLabel: string,\n  onAdd: () => void,\n  onRename: string => void,\n  onEditName: () => void,\n  onCopy: () => void,\n  onCut: () => void,\n  onPaste: () => void,\n  onDuplicate: () => void,\n  canPaste: () => boolean,\n  canMoveUp: boolean,\n  onMoveUp: () => void,\n  canMoveDown: boolean,\n  onMoveDown: () => void,\n  buildExtraMenuTemplate?: () => Array<MenuItemTemplate>,\n  style?: ?Object,\n|};\n\nclass Item extends React.Component<ItemProps, {||}> {\n  textField: ?Object;\n\n  componentDidUpdate(prevProps) {\n    if (!prevProps.editingName && this.props.editingName) {\n      setTimeout(() => {\n        if (this.textField) this.textField.focus();\n      }, 100);\n    }\n  }\n\n  render() {\n    const label = this.props.editingName ? (\n      <TextField\n        id=\"rename-item-field\"\n        margin=\"none\"\n        ref={textField => (this.textField = textField)}\n        defaultValue={this.props.primaryText}\n        onBlur={e => this.props.onRename(e.currentTarget.value)}\n        onKeyPress={event => {\n          if (event.charCode === 13) {\n            // enter key pressed\n            if (this.textField) this.textField.blur();\n          }\n        }}\n        fullWidth\n        style={styles.itemTextField}\n      />\n    ) : (\n      <div style={styles.itemName}>{this.props.primaryText}</div>\n    );\n\n    return (\n      <ThemeConsumer>\n        {muiTheme => (\n          <ListItem\n            style={{\n              borderBottom: `1px solid ${muiTheme.listItem.separatorColor}`,\n              ...this.props.style,\n            }}\n            primaryText={label}\n            displayMenuButton\n            buildMenuTemplate={() => [\n              {\n                label: 'Edit',\n                click: () => this.props.onEdit(),\n              },\n              ...(this.props.buildExtraMenuTemplate\n                ? this.props.buildExtraMenuTemplate()\n                : []),\n              { type: 'separator' },\n              {\n                label: 'Rename',\n                click: () => this.props.onEditName(),\n              },\n              {\n                label: 'Delete',\n                click: () => this.props.onDelete(),\n              },\n              {\n                label: this.props.addLabel,\n                visible: !!this.props.onAdd,\n                click: () => this.props.onAdd(),\n              },\n              { type: 'separator' },\n              {\n                label: 'Copy',\n                click: () => this.props.onCopy(),\n              },\n              {\n                label: 'Cut',\n                click: () => this.props.onCut(),\n              },\n              {\n                label: 'Paste',\n                enabled: this.props.canPaste(),\n                click: () => this.props.onPaste(),\n              },\n              {\n                label: 'Duplicate',\n                click: () => this.props.onDuplicate(),\n              },\n              { type: 'separator' },\n              {\n                label: 'Move up',\n                enabled: this.props.canMoveUp,\n                click: () => this.props.onMoveUp(),\n              },\n              {\n                label: 'Move down',\n                enabled: this.props.canMoveDown,\n                click: () => this.props.onMoveDown(),\n              },\n            ]}\n            onClick={() => {\n              // It's essential to discard clicks when editing the name,\n              // to avoid weird opening of an editor (accompanied with a\n              // closing of the project manager) when clicking on the text\n              // field.\n              if (!this.props.editingName) this.props.onEdit();\n            }}\n          />\n        )}\n      </ThemeConsumer>\n    );\n  }\n}\n\ntype Props = {|\n  project: gdProject,\n  onDeleteLayout: gdLayout => void,\n  onDeleteExternalEvents: gdExternalEvents => void,\n  onDeleteExternalLayout: gdExternalLayout => void,\n  onDeleteEventsFunctionsExtension: gdEventsFunctionsExtension => void,\n  onRenameLayout: (string, string) => void,\n  onRenameExternalEvents: (string, string) => void,\n  onRenameExternalLayout: (string, string) => void,\n  onRenameEventsFunctionsExtension: (string, string) => void,\n  onOpenLayout: string => void,\n  onOpenExternalEvents: string => void,\n  onOpenExternalLayout: string => void,\n  onOpenEventsFunctionsExtension: string => void,\n  onSaveProject: () => void,\n  onSaveProjectAs: () => void,\n  onCloseProject: () => void,\n  onExportProject: () => void,\n  onOpenPreferences: () => void,\n  onOpenProfile: () => void,\n  onOpenResources: () => void,\n  onAddLayout: () => void,\n  onAddExternalEvents: () => void,\n  onAddExternalLayout: () => void,\n  onAddEventsFunctionsExtension: () => void,\n  onOpenPlatformSpecificAssets: () => void,\n  onChangeSubscription: () => void,\n  eventsFunctionsExtensionsError: ?Error,\n  onReloadEventsFunctionsExtensions: () => void,\n  freezeUpdate: boolean,\n  unsavedChanges?: UnsavedChanges,\n|};\n\ntype State = {|\n  editedPropertiesLayout: ?gdLayout,\n  editedVariablesLayout: ?gdLayout,\n  renamedItemKind: ?string,\n  renamedItemName: string,\n  searchText: string,\n  projectPropertiesDialogOpen: boolean,\n  projectVariablesEditorOpen: boolean,\n  extensionsSearchDialogOpen: boolean,\n  layoutPropertiesDialogOpen: boolean,\n  layoutVariablesDialogOpen: boolean,\n|};\n\nexport default class ProjectManager extends React.Component<Props, State> {\n  _searchBar: ?SearchBar;\n\n  state = {\n    editedPropertiesLayout: null,\n    editedVariablesLayout: null,\n    renamedItemKind: null,\n    renamedItemName: '',\n    searchText: '',\n    projectPropertiesDialogOpen: false,\n    projectVariablesEditorOpen: false,\n    extensionsSearchDialogOpen: false,\n    layoutPropertiesDialogOpen: false,\n    layoutVariablesDialogOpen: false,\n  };\n\n  shouldComponentUpdate(nextProps: Props) {\n    // Rendering the component is (super) costly (~20ms) as it iterates over\n    // every project layouts/external layouts/external events,\n    // so the prop freezeUpdate allow to ask the component to stop\n    // updating, for example when hidden.\n    return !nextProps.freezeUpdate;\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    // Typical usage (don't forget to compare props):\n    if (!this.props.freezeUpdate && prevProps.freezeUpdate) {\n      if (this._searchBar) this._searchBar.focus();\n    }\n  }\n\n  _onEditName = (kind: ?string, name: string) => {\n    this.setState({\n      renamedItemKind: kind,\n      renamedItemName: name,\n    });\n  };\n\n  _copyLayout = (layout: gdLayout) => {\n    Clipboard.set(LAYOUT_CLIPBOARD_KIND, {\n      layout: serializeToJSObject(layout),\n      name: layout.getName(),\n    });\n  };\n\n  _cutLayout = (layout: gdLayout) => {\n    this._copyLayout(layout);\n    this.props.onDeleteLayout(layout);\n  };\n\n  _pasteLayout = (index: number) => {\n    if (!Clipboard.has(LAYOUT_CLIPBOARD_KIND)) return;\n\n    const { layout: copiedLayout, name } = Clipboard.get(LAYOUT_CLIPBOARD_KIND);\n    const { project } = this.props;\n\n    const newName = newNameGenerator(name, name =>\n      project.hasLayoutNamed(name)\n    );\n\n    const newLayout = project.insertNewLayout(newName, index);\n\n    unserializeFromJSObject(\n      newLayout,\n      copiedLayout,\n      'unserializeFrom',\n      project\n    );\n    newLayout.setName(newName); // Unserialization has overwritten the name.\n    newLayout.updateBehaviorsSharedData(project);\n\n    this._onProjectItemModified();\n  };\n\n  _duplicateLayout = (layout: gdLayout, index: number) => {\n    this._copyLayout(layout);\n    this._pasteLayout(index);\n  };\n\n  _addLayout = (index: number) => {\n    const { project } = this.props;\n\n    const newName = newNameGenerator('New scene', name =>\n      project.hasLayoutNamed(name)\n    );\n    const newLayout = project.insertNewLayout(newName, index + 1);\n\n    newLayout.setName(newName);\n    newLayout.updateBehaviorsSharedData(project);\n\n    this._onProjectItemModified();\n  };\n\n  _onOpenLayoutProperties = (layout: ?gdLayout) => {\n    this.setState({ editedPropertiesLayout: layout });\n  };\n\n  _onOpenLayoutVariables = (layout: ?gdLayout) => {\n    this.setState({ editedVariablesLayout: layout });\n  };\n\n  _addExternalEvents = (index: number) => {\n    const { project } = this.props;\n\n    const newName = newNameGenerator('NewExternalEvents', name =>\n      project.hasExternalEventsNamed(name)\n    );\n    project.insertNewExternalEvents(newName, index + 1);\n    this._onProjectItemModified();\n  };\n\n  _addExternalLayout = (index: number) => {\n    const { project } = this.props;\n\n    const newName = newNameGenerator('NewExternalLayout', name =>\n      project.hasExternalLayoutNamed(name)\n    );\n    project.insertNewExternalLayout(newName, index + 1);\n    this._onProjectItemModified();\n  };\n\n  _addEventsFunctionsExtension = (index: number) => {\n    const { project } = this.props;\n\n    const newName = newNameGenerator('NewExtension', name =>\n      project.hasEventsFunctionsExtensionNamed(name)\n    );\n    project.insertNewEventsFunctionsExtension(newName, index + 1);\n    this._onProjectItemModified();\n  };\n\n  _moveUpLayout = (index: number) => {\n    const { project } = this.props;\n    if (index <= 0) return;\n\n    project.swapLayouts(index, index - 1);\n    this._onProjectItemModified();\n  };\n\n  _moveDownLayout = (index: number) => {\n    const { project } = this.props;\n    if (index >= project.getLayoutsCount() - 1) return;\n\n    project.swapLayouts(index, index + 1);\n    this._onProjectItemModified();\n  };\n\n  _copyExternalEvents = (externalEvents: gdExternalEvents) => {\n    Clipboard.set(EXTERNAL_EVENTS_CLIPBOARD_KIND, {\n      externalEvents: serializeToJSObject(externalEvents),\n      name: externalEvents.getName(),\n    });\n  };\n\n  _cutExternalEvents = (externalEvents: gdExternalEvents) => {\n    this._copyExternalEvents(externalEvents);\n    this.props.onDeleteExternalEvents(externalEvents);\n  };\n\n  _pasteExternalEvents = (index: number) => {\n    if (!Clipboard.has(EXTERNAL_EVENTS_CLIPBOARD_KIND)) return;\n\n    const { externalEvents: copiedExternalEvents, name } = Clipboard.get(\n      EXTERNAL_EVENTS_CLIPBOARD_KIND\n    );\n    const { project } = this.props;\n\n    const newName = newNameGenerator(name, name =>\n      project.hasExternalEventsNamed(name)\n    );\n\n    const newExternalEvents = project.insertNewExternalEvents(newName, index);\n\n    unserializeFromJSObject(\n      newExternalEvents,\n      copiedExternalEvents,\n      'unserializeFrom',\n      project\n    );\n    newExternalEvents.setName(newName); // Unserialization has overwritten the name.\n\n    this._onProjectItemModified();\n  };\n\n  _duplicateExternalEvents = (\n    externalEvents: gdExternalEvents,\n    index: number\n  ) => {\n    this._copyExternalEvents(externalEvents);\n    this._pasteExternalEvents(index);\n  };\n\n  _moveUpExternalEvents = (index: number) => {\n    const { project } = this.props;\n    if (index <= 0) return;\n\n    project.swapExternalEvents(index, index - 1);\n    this._onProjectItemModified();\n  };\n\n  _moveDownExternalEvents = (index: number) => {\n    const { project } = this.props;\n    if (index >= project.getExternalEventsCount() - 1) return;\n\n    project.swapExternalEvents(index, index + 1);\n    this._onProjectItemModified();\n  };\n\n  _copyExternalLayout = (externalLayout: gdExternalLayout) => {\n    Clipboard.set(EXTERNAL_LAYOUT_CLIPBOARD_KIND, {\n      externalLayout: serializeToJSObject(externalLayout),\n      name: externalLayout.getName(),\n    });\n  };\n\n  _cutExternalLayout = (externalLayout: gdExternalLayout) => {\n    this._copyExternalLayout(externalLayout);\n    this.props.onDeleteExternalLayout(externalLayout);\n  };\n\n  _pasteExternalLayout = (index: number) => {\n    if (!Clipboard.has(EXTERNAL_LAYOUT_CLIPBOARD_KIND)) return;\n\n    const { externalLayout: copiedExternalLayout, name } = Clipboard.get(\n      EXTERNAL_LAYOUT_CLIPBOARD_KIND\n    );\n    const { project } = this.props;\n\n    const newName = newNameGenerator(name, name =>\n      project.hasExternalLayoutNamed(name)\n    );\n\n    const newExternalLayout = project.insertNewExternalLayout(newName, index);\n\n    unserializeFromJSObject(newExternalLayout, copiedExternalLayout);\n    newExternalLayout.setName(newName); // Unserialization has overwritten the name.\n    this._onProjectItemModified();\n  };\n\n  _duplicateExternalLayout = (\n    externalLayout: gdExternalLayout,\n    index: number\n  ) => {\n    this._copyExternalLayout(externalLayout);\n    this._pasteExternalLayout(index);\n  };\n\n  _moveUpExternalLayout = (index: number) => {\n    const { project } = this.props;\n    if (index <= 0) return;\n\n    project.swapExternalLayouts(index, index - 1);\n    this._onProjectItemModified();\n  };\n\n  _moveDownExternalLayout = (index: number) => {\n    const { project } = this.props;\n    if (index >= project.getExternalLayoutsCount() - 1) return;\n\n    project.swapExternalLayouts(index, index + 1);\n    this._onProjectItemModified();\n  };\n\n  _copyEventsFunctionsExtension = (\n    eventsFunctionsExtension: gdEventsFunctionsExtension\n  ) => {\n    Clipboard.set(EVENTS_FUNCTIONS_EXTENSION_CLIPBOARD_KIND, {\n      eventsFunctionsExtension: serializeToJSObject(eventsFunctionsExtension),\n      name: eventsFunctionsExtension.getName(),\n    });\n  };\n\n  _cutEventsFunctionsExtension = (\n    eventsFunctionsExtension: gdEventsFunctionsExtension\n  ) => {\n    this._copyEventsFunctionsExtension(eventsFunctionsExtension);\n    this.props.onDeleteEventsFunctionsExtension(eventsFunctionsExtension);\n  };\n\n  _duplicateEventsFunctionsExtension = (\n    eventsFunctionsExtension: gdEventsFunctionsExtension,\n    index: number\n  ) => {\n    this._copyEventsFunctionsExtension(eventsFunctionsExtension);\n    this._pasteEventsFunctionsExtension(index);\n  };\n\n  _pasteEventsFunctionsExtension = (index: number) => {\n    if (!Clipboard.has(EVENTS_FUNCTIONS_EXTENSION_CLIPBOARD_KIND)) return;\n\n    const {\n      eventsFunctionsExtension: copiedEventsFunctionsExtension,\n      name,\n    } = Clipboard.get(EVENTS_FUNCTIONS_EXTENSION_CLIPBOARD_KIND);\n    const { project } = this.props;\n\n    const newName = newNameGenerator(name, name =>\n      project.hasEventsFunctionsExtensionNamed(name)\n    );\n\n    const newEventsFunctionsExtension = project.insertNewEventsFunctionsExtension(\n      newName,\n      index\n    );\n\n    unserializeFromJSObject(\n      newEventsFunctionsExtension,\n      copiedEventsFunctionsExtension,\n      'unserializeFrom',\n      project\n    );\n    newEventsFunctionsExtension.setName(newName); // Unserialization has overwritten the name.\n\n    this._onProjectItemModified();\n    this.props.onReloadEventsFunctionsExtensions();\n  };\n\n  _moveUpEventsFunctionsExtension = (index: number) => {\n    const { project } = this.props;\n    if (index <= 0) return;\n\n    project.swapEventsFunctionsExtensions(index, index - 1);\n    this._onProjectItemModified();\n  };\n\n  _moveDownEventsFunctionsExtension = (index: number) => {\n    const { project } = this.props;\n    if (index >= project.getEventsFunctionsExtensionsCount() - 1) return;\n\n    project.swapEventsFunctionsExtensions(index, index + 1);\n    this._onProjectItemModified();\n  };\n\n  _renderMenu() {\n    // If there is already a main menu (as the native one made with\n    // Electron), don't show it in the Project Manager.\n    if (Window.hasMainMenu()) return null;\n\n    return (\n      <React.Fragment>\n        <ListItem\n          key=\"save\"\n          primaryText={<Trans>Save</Trans>}\n          leftIcon={<Save />}\n          onClick={() => this.props.onSaveProject()}\n        />\n        <ListItem\n          key=\"save-as\"\n          primaryText={<Trans>Save as...</Trans>}\n          leftIcon={<FileCopy />}\n          onClick={() => this.props.onSaveProjectAs()}\n        />\n        <ListItem\n          key=\"export\"\n          primaryText={<Trans>Export</Trans>}\n          leftIcon={<AddToHomeScreen />}\n          onClick={() => this.props.onExportProject()}\n        />\n        <ListItem\n          key=\"close\"\n          primaryText={<Trans>Close</Trans>}\n          leftIcon={<Close />}\n          onClick={() => this.props.onCloseProject()}\n        />\n        <ListItem\n          key=\"preferences\"\n          primaryText={<Trans>Preferences</Trans>}\n          leftIcon={<Settings />}\n          onClick={() => this.props.onOpenPreferences()}\n        />\n        <ListItem\n          key=\"profile\"\n          primaryText={<Trans>My profile</Trans>}\n          leftIcon={<AccountCircle />}\n          onClick={() => this.props.onOpenProfile()}\n        />\n        {!Window.isFullscreen() && (\n          <ListItem\n            key=\"fullscreen\"\n            primaryText={<Trans>Turn on Fullscreen</Trans>}\n            leftIcon={<Fullscreen />}\n            onClick={() => Window.requestFullscreen()}\n          />\n        )}\n      </React.Fragment>\n    );\n  }\n\n  _onSearchChange = (text: string) =>\n    this.setState({\n      searchText: text,\n    });\n\n  _onRequestSearch = () => {\n    /* Do nothing for now, but we could open the first result. */\n  };\n\n  _onProjectItemModified = () => {\n    this.forceUpdate();\n    if (this.props.unsavedChanges)\n      this.props.unsavedChanges.triggerUnsavedChanges();\n  };\n\n  render() {\n    const {\n      project,\n      eventsFunctionsExtensionsError,\n      onReloadEventsFunctionsExtensions,\n    } = this.props;\n    const { renamedItemKind, renamedItemName, searchText } = this.state;\n\n    const forceOpen = searchText !== '' ? true : undefined;\n\n    return (\n      <div style={styles.container}>\n        <List style={styles.list}>\n          {this._renderMenu()}\n          <ProjectStructureItem\n            primaryText={<Trans>Game settings</Trans>}\n            leftIcon={\n              <ListIcon\n                iconSize={32}\n                isGDevelopIcon\n                src=\"res/ribbon_default/projectManager32.png\"\n              />\n            }\n            initiallyOpen={false}\n            autoGenerateNestedIndicator={true}\n            indentNestedItems\n            renderNestedItems={() => [\n              <ListItem\n                key=\"properties\"\n                primaryText={<Trans>Properties</Trans>}\n                leftIcon={<SettingsApplications />}\n                onClick={() =>\n                  this.setState({ projectPropertiesDialogOpen: true })\n                }\n              />,\n              <ListItem\n                key=\"global-variables\"\n                primaryText={<Trans>Global variables</Trans>}\n                leftIcon={<VariableTree />}\n                onClick={() =>\n                  this.setState({ projectVariablesEditorOpen: true })\n                }\n              />,\n              <ListItem\n                key=\"icons\"\n                primaryText={<Trans>Icons</Trans>}\n                leftIcon={<PhotoLibrary />}\n                onClick={() => this.props.onOpenPlatformSpecificAssets()}\n              />,\n              <ListItem\n                key=\"resources\"\n                primaryText={<Trans>Resources</Trans>}\n                leftIcon={<ArtTrack />}\n                onClick={() => {\n                  this.props.onOpenResources();\n                }}\n              />,\n            ]}\n          />\n          <ProjectStructureItem\n            primaryText={<Trans>Scenes</Trans>}\n            leftIcon={\n              <ListIcon\n                iconSize={32}\n                isGDevelopIcon\n                src=\"res/ribbon_default/sceneadd32.png\"\n              />\n            }\n            initiallyOpen={true}\n            open={forceOpen}\n            autoGenerateNestedIndicator={!forceOpen}\n            renderNestedItems={() =>\n              filterProjectItemsList(enumerateLayouts(project), searchText)\n                .map((layout: gdLayout, i: number) => {\n                  const name = layout.getName();\n                  return (\n                    <Item\n                      key={i}\n                      primaryText={name}\n                      editingName={\n                        renamedItemKind === 'layout' && renamedItemName === name\n                      }\n                      onEdit={() => this.props.onOpenLayout(name)}\n                      onDelete={() => this.props.onDeleteLayout(layout)}\n                      addLabel={'Add a New Scene'}\n                      onAdd={() => this._addLayout(i)}\n                      onRename={newName => {\n                        this.props.onRenameLayout(name, newName);\n                        this._onEditName(null, '');\n                      }}\n                      onEditName={() => this._onEditName('layout', name)}\n                      onCopy={() => this._copyLayout(layout)}\n                      onCut={() => this._cutLayout(layout)}\n                      onPaste={() => this._pasteLayout(i)}\n                      onDuplicate={() => this._duplicateLayout(layout, i)}\n                      canPaste={() => Clipboard.has(LAYOUT_CLIPBOARD_KIND)}\n                      canMoveUp={i !== 0}\n                      onMoveUp={() => this._moveUpLayout(i)}\n                      canMoveDown={i !== project.getLayoutsCount() - 1}\n                      onMoveDown={() => this._moveDownLayout(i)}\n                      buildExtraMenuTemplate={() => [\n                        {\n                          label: 'Edit Scene Properties',\n                          enabled: true,\n                          click: () => this._onOpenLayoutProperties(layout),\n                        },\n                        {\n                          label: 'Edit Scene Variables',\n                          enabled: true,\n                          click: () => this._onOpenLayoutVariables(layout),\n                        },\n                      ]}\n                    />\n                  );\n                })\n                .concat(\n                  <AddListItem\n                    key={'add-scene'}\n                    onClick={this.props.onAddLayout}\n                    primaryText={<Trans>Click to add a scene</Trans>}\n                  />\n                )\n            }\n          />\n          <ProjectStructureItem\n            primaryText={<Trans>External events</Trans>}\n            leftIcon={\n              <ListIcon\n                iconSize={32}\n                isGDevelopIcon\n                src=\"res/ribbon_default/externalevents32.png\"\n              />\n            }\n            initiallyOpen={false}\n            open={forceOpen}\n            autoGenerateNestedIndicator={!forceOpen}\n            renderNestedItems={() =>\n              filterProjectItemsList(\n                enumerateExternalEvents(project),\n                searchText\n              )\n                .map((externalEvents, i) => {\n                  const name = externalEvents.getName();\n                  return (\n                    <Item\n                      key={i}\n                      primaryText={name}\n                      editingName={\n                        renamedItemKind === 'external-events' &&\n                        renamedItemName === name\n                      }\n                      onEdit={() => this.props.onOpenExternalEvents(name)}\n                      onDelete={() =>\n                        this.props.onDeleteExternalEvents(externalEvents)\n                      }\n                      addLabel={'Add New External Events'}\n                      onAdd={() => this._addExternalEvents(i)}\n                      onRename={newName => {\n                        this.props.onRenameExternalEvents(name, newName);\n                        this._onEditName(null, '');\n                      }}\n                      onEditName={() =>\n                        this._onEditName('external-events', name)\n                      }\n                      onCopy={() => this._copyExternalEvents(externalEvents)}\n                      onCut={() => this._cutExternalEvents(externalEvents)}\n                      onPaste={() => this._pasteExternalEvents(i)}\n                      onDuplicate={() =>\n                        this._duplicateExternalEvents(externalEvents, i)\n                      }\n                      canPaste={() =>\n                        Clipboard.has(EXTERNAL_EVENTS_CLIPBOARD_KIND)\n                      }\n                      canMoveUp={i !== 0}\n                      onMoveUp={() => this._moveUpExternalEvents(i)}\n                      canMoveDown={i !== project.getExternalEventsCount() - 1}\n                      onMoveDown={() => this._moveDownExternalEvents(i)}\n                    />\n                  );\n                })\n                .concat(\n                  <AddListItem\n                    key={'add-external-events'}\n                    primaryText={<Trans>Click to add external events</Trans>}\n                    onClick={this.props.onAddExternalEvents}\n                  />\n                )\n            }\n          />\n          <ProjectStructureItem\n            primaryText={<Trans>External layouts</Trans>}\n            leftIcon={\n              <ListIcon\n                iconSize={32}\n                isGDevelopIcon\n                src=\"res/ribbon_default/externallayout32.png\"\n              />\n            }\n            initiallyOpen={false}\n            open={forceOpen}\n            autoGenerateNestedIndicator={!forceOpen}\n            renderNestedItems={() =>\n              filterProjectItemsList(\n                enumerateExternalLayouts(project),\n                searchText\n              )\n                .map((externalLayout, i) => {\n                  const name = externalLayout.getName();\n                  return (\n                    <Item\n                      key={i}\n                      primaryText={name}\n                      editingName={\n                        renamedItemKind === 'external-layout' &&\n                        renamedItemName === name\n                      }\n                      onEdit={() => this.props.onOpenExternalLayout(name)}\n                      onDelete={() =>\n                        this.props.onDeleteExternalLayout(externalLayout)\n                      }\n                      addLabel={'Add a New External Layout'}\n                      onAdd={() => this._addExternalLayout(i)}\n                      onRename={newName => {\n                        this.props.onRenameExternalLayout(name, newName);\n                        this._onEditName(null, '');\n                      }}\n                      onEditName={() =>\n                        this._onEditName('external-layout', name)\n                      }\n                      onCopy={() => this._copyExternalLayout(externalLayout)}\n                      onCut={() => this._cutExternalLayout(externalLayout)}\n                      onPaste={() => this._pasteExternalLayout(i)}\n                      onDuplicate={() =>\n                        this._duplicateExternalLayout(externalLayout, i)\n                      }\n                      canPaste={() =>\n                        Clipboard.has(EXTERNAL_LAYOUT_CLIPBOARD_KIND)\n                      }\n                      canMoveUp={i !== 0}\n                      onMoveUp={() => this._moveUpExternalLayout(i)}\n                      canMoveDown={i !== project.getExternalLayoutsCount() - 1}\n                      onMoveDown={() => this._moveDownExternalLayout(i)}\n                    />\n                  );\n                })\n                .concat(\n                  <AddListItem\n                    key={'add-external-layout'}\n                    primaryText={<Trans>Click to add an external layout</Trans>}\n                    onClick={this.props.onAddExternalLayout}\n                  />\n                )\n            }\n          />\n          <ProjectStructureItem\n            primaryText={<Trans>Functions/Behaviors</Trans>}\n            error={eventsFunctionsExtensionsError}\n            onRefresh={onReloadEventsFunctionsExtensions}\n            leftIcon={\n              <ListIcon\n                iconSize={32}\n                isGDevelopIcon\n                src=\"res/ribbon_default/function32.png\"\n              />\n            }\n            initiallyOpen={false}\n            open={forceOpen}\n            autoGenerateNestedIndicator={\n              !forceOpen && !eventsFunctionsExtensionsError\n            }\n            renderNestedItems={() =>\n              filterProjectItemsList(\n                enumerateEventsFunctionsExtensions(project),\n                searchText\n              )\n                .map((eventsFunctionsExtension, i) => {\n                  const name = eventsFunctionsExtension.getName();\n                  return (\n                    <Item\n                      key={i}\n                      primaryText={name}\n                      editingName={\n                        renamedItemKind === 'events-functions-extension' &&\n                        renamedItemName === name\n                      }\n                      onEdit={() =>\n                        this.props.onOpenEventsFunctionsExtension(name)\n                      }\n                      onDelete={() =>\n                        this.props.onDeleteEventsFunctionsExtension(\n                          eventsFunctionsExtension\n                        )\n                      }\n                      addLabel={'Add a New Extension'}\n                      onAdd={() => this._addEventsFunctionsExtension(i)}\n                      onRename={newName => {\n                        this.props.onRenameEventsFunctionsExtension(\n                          name,\n                          newName\n                        );\n                        this._onEditName(null, '');\n                      }}\n                      onEditName={() =>\n                        this._onEditName('events-functions-extension', name)\n                      }\n                      onCopy={() =>\n                        this._copyEventsFunctionsExtension(\n                          eventsFunctionsExtension\n                        )\n                      }\n                      onCut={() =>\n                        this._cutEventsFunctionsExtension(\n                          eventsFunctionsExtension\n                        )\n                      }\n                      onPaste={() => this._pasteEventsFunctionsExtension(i)}\n                      onDuplicate={() =>\n                        this._duplicateEventsFunctionsExtension(\n                          eventsFunctionsExtension,\n                          i\n                        )\n                      }\n                      canPaste={() =>\n                        Clipboard.has(EVENTS_FUNCTIONS_EXTENSION_CLIPBOARD_KIND)\n                      }\n                      canMoveUp={i !== 0}\n                      onMoveUp={() => this._moveUpEventsFunctionsExtension(i)}\n                      canMoveDown={\n                        i !== project.getEventsFunctionsExtensionsCount() - 1\n                      }\n                      onMoveDown={() =>\n                        this._moveDownEventsFunctionsExtension(i)\n                      }\n                    />\n                  );\n                })\n                .concat(\n                  <AddListItem\n                    key={'add-events-functions-extension'}\n                    primaryText={\n                      <Trans>Click to add functions and behaviors</Trans>\n                    }\n                    onClick={this.props.onAddEventsFunctionsExtension}\n                  />\n                )\n                .concat(\n                  <SearchListItem\n                    key={'extensions-search'}\n                    primaryText={<Trans>Search for new extensions</Trans>}\n                    onClick={() =>\n                      this.setState({ extensionsSearchDialogOpen: true })\n                    }\n                  />\n                )\n            }\n          />\n        </List>\n        <SearchBar\n          ref={searchBar => (this._searchBar = searchBar)}\n          value={searchText}\n          onRequestSearch={this._onRequestSearch}\n          onChange={this._onSearchChange}\n          elevation={3}\n        />\n        {this.state.projectVariablesEditorOpen && (\n          <VariablesEditorDialog\n            open\n            variablesContainer={project.getVariables()}\n            onCancel={() =>\n              this.setState({ projectVariablesEditorOpen: false })\n            }\n            onApply={() => {\n              if (this.props.unsavedChanges)\n                this.props.unsavedChanges.triggerUnsavedChanges();\n              this.setState({ projectVariablesEditorOpen: false });\n            }}\n            emptyExplanationMessage={\n              <Trans>\n                Global variables are variables that are shared amongst all the\n                scenes of the game.\n              </Trans>\n            }\n            emptyExplanationSecondMessage={\n              <Trans>\n                For example, you can have a variable called UnlockedLevelsCount\n                representing the number of levels unlocked by the player.\n              </Trans>\n            }\n          />\n        )}\n        {this.state.projectPropertiesDialogOpen && (\n          <ProjectPropertiesDialog\n            open={this.state.projectPropertiesDialogOpen}\n            project={project}\n            onClose={() =>\n              this.setState({ projectPropertiesDialogOpen: false })\n            }\n            onApply={() => {\n              if (this.props.unsavedChanges)\n                this.props.unsavedChanges.triggerUnsavedChanges();\n              this.setState({ projectPropertiesDialogOpen: false });\n            }}\n            onChangeSubscription={this.props.onChangeSubscription}\n          />\n        )}\n        {!!this.state.editedPropertiesLayout && (\n          <ScenePropertiesDialog\n            open\n            layout={this.state.editedPropertiesLayout}\n            project={this.props.project}\n            onApply={() => {\n              if (this.props.unsavedChanges)\n                this.props.unsavedChanges.triggerUnsavedChanges();\n              this._onOpenLayoutProperties(null);\n            }}\n            onClose={() => this._onOpenLayoutProperties(null)}\n            onEditVariables={() => {\n              this._onOpenLayoutVariables(this.state.editedPropertiesLayout);\n              this._onOpenLayoutProperties(null);\n            }}\n          />\n        )}\n        {!!this.state.editedVariablesLayout && (\n          <SceneVariablesDialog\n            open\n            layout={this.state.editedVariablesLayout}\n            onClose={() => this._onOpenLayoutVariables(null)}\n            onApply={() => {\n              if (this.props.unsavedChanges)\n                this.props.unsavedChanges.triggerUnsavedChanges();\n              this._onOpenLayoutVariables(null);\n            }}\n          />\n        )}\n        {this.state.extensionsSearchDialogOpen && (\n          <ExtensionsSearchDialog\n            project={project}\n            onClose={() => this.setState({ extensionsSearchDialogOpen: false })}\n          />\n        )}\n      </div>\n    );\n  }\n}\n","// @flow\nimport * as React from 'react';\nimport ThemeConsumer from '../../../UI/Theme/ThemeConsumer';\n\nconst styles = {\n  logo: {\n    width: '100%',\n  },\n};\n\nconst GDevelopLogo = () => (\n  <ThemeConsumer>\n    {muiTheme => <img src={muiTheme.logo.src} alt=\"\" style={styles.logo} />}\n  </ThemeConsumer>\n);\n\nexport default GDevelopLogo;\n","// @flow\nimport * as React from 'react';\nimport ThemeConsumer from '../../../UI/Theme/ThemeConsumer';\n\nconst styles = {\n  scrollContainer: {\n    flex: 1,\n    display: 'flex',\n    overflowY: 'scroll',\n  },\n};\n\ntype Props = {|\n  children: React.Node,\n|};\n\nconst ScrollBackground = ({ children }: Props) => (\n  <ThemeConsumer>\n    {muiTheme => (\n      <div\n        style={{\n          ...styles.scrollContainer,\n          backgroundColor: muiTheme.palette.canvasColor,\n        }}\n      >\n        {children}\n      </div>\n    )}\n  </ThemeConsumer>\n);\n\nexport default ScrollBackground;\n","// @flow\nimport { Trans } from '@lingui/macro';\nimport { I18n } from '@lingui/react';\n\nimport React from 'react';\nimport FlatButton from '../../../UI/FlatButton';\nimport Paper from '@material-ui/core/Paper';\nimport IconButton from '../../../UI/IconButton';\nimport Language from '@material-ui/icons/Language';\nimport BaseEditor from '../BaseEditor';\nimport Window from '../../../Utils/Window';\nimport { Line, Spacer } from '../../../UI/Grid';\nimport GDevelopLogo from './GDevelopLogo';\nimport ScrollBackground from './ScrollBackground';\nimport RaisedButton from '../../../UI/RaisedButton';\nimport Text from '../../../UI/Text';\n\nconst styles = {\n  innerContainer: {\n    display: 'flex',\n    flexDirection: 'column',\n    width: '100%',\n    minHeight: 350,\n  },\n  centerContainer: {\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center',\n    justifyContent: 'center',\n    maxWidth: 400,\n  },\n  logoPaper: {\n    marginBottom: 10,\n    width: '100%',\n    textAlign: 'center',\n  },\n};\n\nclass StartPage extends BaseEditor {\n  constructor() {\n    super();\n\n    this.state = {\n      aboutDialogOpen: false,\n    };\n  }\n\n  getProject() {\n    return undefined;\n  }\n\n  updateToolbar() {\n    if (this.props.setToolbar) this.props.setToolbar(null);\n  }\n\n  forceUpdateEditor() {\n    // No updates to be done\n  }\n\n  render() {\n    const {\n      project,\n      canOpen,\n      onOpen,\n      onCreate,\n      onOpenProjectManager,\n      onCloseProject,\n      onOpenAboutDialog,\n      onOpenHelpFinder,\n      onOpenLanguageDialog,\n    } = this.props;\n\n    return (\n      <I18n>\n        {({ i18n }) => (\n          <ScrollBackground>\n            <div style={styles.innerContainer}>\n              <Line expand justifyContent=\"center\">\n                <div style={styles.centerContainer}>\n                  <Paper\n                    elevation={2}\n                    style={{\n                      ...styles.logoPaper,\n                    }}\n                  >\n                    <GDevelopLogo />\n                    <Text>\n                      <Trans>\n                        GDevelop is an easy-to-use game creator with no\n                        programming language to learn.\n                      </Trans>\n                    </Text>\n                  </Paper>\n                  {!project && canOpen && (\n                    <React.Fragment>\n                      <RaisedButton\n                        label={<Trans>Open a project</Trans>}\n                        fullWidth\n                        onClick={onOpen}\n                        primary\n                      />\n                      <Spacer />\n                    </React.Fragment>\n                  )}\n                  {!project && (\n                    <React.Fragment>\n                      <RaisedButton\n                        label={<Trans>Create a new project</Trans>}\n                        fullWidth\n                        onClick={onCreate}\n                        primary\n                      />\n                      <Spacer />\n                    </React.Fragment>\n                  )}\n                  {!!project && (\n                    <React.Fragment>\n                      <RaisedButton\n                        label={<Trans>Open Project Manager</Trans>}\n                        fullWidth\n                        onClick={onOpenProjectManager}\n                        primary\n                      />\n                      <Spacer />\n                    </React.Fragment>\n                  )}\n                  {!!project && (\n                    <React.Fragment>\n                      <FlatButton\n                        label={<Trans>Close project</Trans>}\n                        fullWidth\n                        onClick={onCloseProject}\n                      />\n                      <Spacer />\n                    </React.Fragment>\n                  )}\n                  {\n                    <FlatButton\n                      label={<Trans>Search the documentation</Trans>}\n                      fullWidth\n                      onClick={onOpenHelpFinder}\n                    />\n                  }\n                </div>\n              </Line>\n              <Line alignItems=\"center\" justifyContent=\"space-between\">\n                <Line>\n                  <FlatButton\n                    label={<Trans>About GDevelop</Trans>}\n                    onClick={onOpenAboutDialog}\n                  />\n                  <FlatButton\n                    label={<Trans>GDevelop Forums</Trans>}\n                    onClick={() =>\n                      Window.openExternalURL('https://forum.gdevelop-app.com')\n                    }\n                  />\n                  <FlatButton\n                    label={<Trans>Help and tutorials</Trans>}\n                    onClick={() =>\n                      Window.openExternalURL(\n                        'http://wiki.compilgames.net/doku.php/gdevelop5/start'\n                      )\n                    }\n                  />\n                </Line>\n                <Line alignItems=\"center\">\n                  <FlatButton\n                    label={i18n.language}\n                    onClick={onOpenLanguageDialog}\n                    icon={<Language />}\n                  />\n                  <IconButton\n                    className=\"icon-facebook\"\n                    onClick={() =>\n                      Window.openExternalURL(\n                        'https://www.facebook.com/GDevelopApp'\n                      )\n                    }\n                  />\n                  <IconButton\n                    className=\"icon-twitter\"\n                    onClick={() =>\n                      Window.openExternalURL('https://twitter.com/GDevelopApp')\n                    }\n                  />\n                  <IconButton\n                    className=\"icon-discord\"\n                    onClick={() =>\n                      Window.openExternalURL('https://discord.gg/rjdYHvj')\n                    }\n                  />\n                </Line>\n              </Line>\n            </div>\n          </ScrollBackground>\n        )}\n      </I18n>\n    );\n  }\n}\n\nexport default StartPage;\n","// @flow\nimport * as React from 'react';\nimport IconButton from './IconButton';\nimport ThemeConsumer from './Theme/ThemeConsumer';\nimport { type MessageDescriptor } from '../Utils/i18n/MessageDescriptor.flow';\n\ntype Props = {|\n  src: string,\n  tooltip?: MessageDescriptor,\n  acceleratorString?: string,\n  disabled?: boolean,\n  onClick?: () => void,\n  onContextMenu?: () => void,\n|};\n\n/**\n * An icon that can be used in a ToolbarGroup of a Toolbar.\n */\nconst ToolbarIcon = React.forwardRef<Props, IconButton>((props: Props, ref) => {\n  const {\n    src,\n    tooltip,\n    acceleratorString,\n    disabled,\n    onClick,\n    onContextMenu,\n  } = props;\n\n  return (\n    <ThemeConsumer>\n      {muiTheme => (\n        <IconButton\n          onClick={onClick}\n          onContextMenu={onContextMenu}\n          size=\"small\"\n          disabled={disabled}\n          tooltip={tooltip}\n          acceleratorString={acceleratorString}\n          ref={ref}\n        >\n          <img\n            alt={tooltip}\n            src={src}\n            width={32}\n            height={32}\n            style={{\n              filter: disabled\n                ? 'grayscale(100%)'\n                : muiTheme.gdevelopIconsCSSFilter,\n            }}\n          />\n        </IconButton>\n      )}\n    </ThemeConsumer>\n  );\n});\n\nexport default ToolbarIcon;\n","// @flow\nimport React, { Component } from 'react';\nimport InstructionOrExpressionSelector from './index';\nimport {\n  createTree,\n  type InstructionOrExpressionTreeNode,\n} from '../../../InstructionOrExpression/CreateTree';\nimport { enumerateAllInstructions } from '../../../InstructionOrExpression/EnumerateInstructions';\nimport {\n  type EnumeratedInstructionOrExpressionMetadata,\n  filterEnumeratedInstructionOrExpressionMetadataByScope,\n} from '../../../InstructionOrExpression/EnumeratedInstructionOrExpressionMetadata.js';\nimport { type EventsScope } from '../../../InstructionOrExpression/EventsScope.flow';\n\ntype Props = {|\n  isCondition: boolean,\n  focusOnMount?: boolean,\n  selectedType: string,\n  onChoose: (type: string, EnumeratedInstructionOrExpressionMetadata) => void,\n  scope: EventsScope,\n|};\n\nconst style = {\n  flex: 1,\n  display: 'flex',\n  flexDirection: 'column',\n};\n\nexport default class InstructionSelector extends Component<Props, {||}> {\n  instructionsInfo: Array<EnumeratedInstructionOrExpressionMetadata> = filterEnumeratedInstructionOrExpressionMetadataByScope(\n    enumerateAllInstructions(this.props.isCondition),\n    this.props.scope\n  );\n  instructionsInfoTree: InstructionOrExpressionTreeNode = createTree(\n    this.instructionsInfo\n  );\n\n  render() {\n    const { isCondition, scope, ...otherProps } = this.props;\n    return (\n      <InstructionOrExpressionSelector\n        style={style}\n        instructionsInfo={this.instructionsInfo}\n        instructionsInfoTree={this.instructionsInfoTree}\n        iconSize={24}\n        {...otherProps}\n      />\n    );\n  }\n}\n","// @flow\nimport * as React from 'react';\nimport Paper from '@material-ui/core/Paper';\nimport InstructionSelector from './InstructionOrExpressionSelector/InstructionSelector.js';\nimport InstructionParametersEditor from './InstructionParametersEditor.js';\nimport {\n  type ResourceSource,\n  type ChooseResourceFunction,\n} from '../../ResourcesList/ResourceSource.flow';\nimport { type ResourceExternalEditor } from '../../ResourcesList/ResourceExternalEditor.flow';\nimport { type EventsScope } from '../../InstructionOrExpression/EventsScope.flow';\n\nconst styles = {\n  container: {\n    display: 'flex',\n    flex: 1,\n  },\n  parametersEditor: {\n    flex: 2,\n    display: 'flex',\n    paddingLeft: 16,\n    paddingRight: 16,\n    zIndex: 1, // Put the Paper shadow on the type selector\n  },\n};\n\ntype Props = {|\n  project: gdProject,\n  scope: EventsScope,\n  globalObjectsContainer: gdObjectsContainer,\n  objectsContainer: gdObjectsContainer,\n  instruction: gdInstruction,\n  isCondition: boolean,\n  resourceSources: Array<ResourceSource>,\n  onChooseResource: ChooseResourceFunction,\n  resourceExternalEditors: Array<ResourceExternalEditor>,\n  style?: Object,\n  openInstructionOrExpression: (\n    extension: gdPlatformExtension,\n    type: string\n  ) => void,\n  anchorEl?: any, // Unused\n|};\ntype State = {||};\n\nexport default class InstructionEditor extends React.Component<Props, State> {\n  _instructionParametersEditor: ?InstructionParametersEditor;\n\n  chooseType = (type: string) => {\n    const { instruction } = this.props;\n    instruction.setType(type);\n    this.forceUpdate(() => {\n      if (this._instructionParametersEditor) {\n        this._instructionParametersEditor.focus();\n      }\n    });\n  };\n\n  render() {\n    const {\n      instruction,\n      isCondition,\n      project,\n      globalObjectsContainer,\n      objectsContainer,\n      scope,\n    } = this.props;\n\n    return (\n      <div style={styles.container}>\n        <InstructionSelector\n          isCondition={isCondition}\n          selectedType={instruction.getType()}\n          onChoose={this.chooseType}\n          focusOnMount={!instruction.getType()}\n          scope={scope}\n        />\n        <Paper style={styles.parametersEditor} square elevation={2}>\n          <InstructionParametersEditor\n            project={project}\n            scope={scope}\n            globalObjectsContainer={globalObjectsContainer}\n            objectsContainer={objectsContainer}\n            isCondition={isCondition}\n            instruction={instruction}\n            resourceSources={this.props.resourceSources}\n            onChooseResource={this.props.onChooseResource}\n            resourceExternalEditors={this.props.resourceExternalEditors}\n            openInstructionOrExpression={this.props.openInstructionOrExpression}\n            ref={instructionParametersEditor =>\n              (this._instructionParametersEditor = instructionParametersEditor)\n            }\n            focusOnMount={instruction.getType()}\n          />\n        </Paper>\n      </div>\n    );\n  }\n}\n","// @flow\nimport { Trans } from '@lingui/macro';\n\nimport * as React from 'react';\nimport Dialog from '../../UI/Dialog';\nimport FlatButton from '../../UI/FlatButton';\nimport InstructionEditor from './index.js';\nimport {\n  type ResourceSource,\n  type ChooseResourceFunction,\n} from '../../ResourcesList/ResourceSource.flow';\nimport { type ResourceExternalEditor } from '../../ResourcesList/ResourceExternalEditor.flow';\nimport { type EventsScope } from '../../InstructionOrExpression/EventsScope.flow';\n\ntype Props = {|\n  project: gdProject,\n  scope: EventsScope,\n  globalObjectsContainer: gdObjectsContainer,\n  objectsContainer: gdObjectsContainer,\n  instruction: gdInstruction,\n  isCondition: boolean,\n  resourceSources: Array<ResourceSource>,\n  onChooseResource: ChooseResourceFunction,\n  resourceExternalEditors: Array<ResourceExternalEditor>,\n  style?: Object,\n  isNewInstruction: boolean,\n  onCancel: () => void,\n  onSubmit: () => void,\n  open: boolean,\n  openInstructionOrExpression: (\n    extension: gdPlatformExtension,\n    type: string\n  ) => void,\n  anchorEl?: any, // Unused\n|};\ntype State = {||};\n\nexport default class InstructionEditorDialog extends React.Component<\n  Props,\n  State\n> {\n  render() {\n    const {\n      isNewInstruction,\n      onCancel,\n      onSubmit,\n      open,\n      ...otherProps\n    } = this.props;\n    const actions = [\n      <FlatButton\n        key=\"cancel\"\n        label={<Trans>Cancel</Trans>}\n        primary={false}\n        onClick={onCancel}\n      />,\n      <FlatButton\n        key=\"ok\"\n        label={<Trans>Ok</Trans>}\n        primary={true}\n        keyboardFocused={false}\n        onClick={onSubmit}\n      />,\n    ];\n\n    return (\n      <Dialog\n        actions={actions}\n        open={open}\n        cannotBeDismissed={true}\n        onRequestClose={onCancel}\n        maxWidth={false}\n        flexBody\n        noMargin\n      >\n        <InstructionEditor {...otherProps} />\n      </Dialog>\n    );\n  }\n}\n","import React from 'react';\nimport SvgIcon from '@material-ui/core/SvgIcon';\n\nexport default React.memo(props => (\n  <SvgIcon {...props}>\n    <path d=\"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z\" />\n  </SvgIcon>\n));\n","import React from 'react';\nimport SvgIcon from '@material-ui/core/SvgIcon';\n\nexport default React.memo(props => (\n  <SvgIcon {...props}>\n    <path d=\"M19 2h-4.18C14.4.84 13.3 0 12 0c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm7 18H5V4h2v3h10V4h2v16z\" />\n  </SvgIcon>\n));\n","// @flow\nimport { Trans } from '@lingui/macro';\nimport React from 'react';\nimport Add from '@material-ui/icons/Add';\nimport IconButton from '../UI/IconButton';\nimport Copy from '../UI/CustomSvgIcons/Copy';\nimport Paste from '../UI/CustomSvgIcons/Paste';\nimport Delete from '@material-ui/icons/Delete';\nimport { Line, Column } from '../UI/Grid';\nimport RaisedButton from '../UI/RaisedButton';\n\ntype Props = {|\n  onAdd: () => void,\n  onCopy: () => void,\n  hasSelection: boolean,\n  onPaste: () => void,\n  hasClipboard: boolean,\n  onDeleteSelection: () => void,\n|};\n\nconst EditVariableRow = ({\n  onAdd,\n  onCopy,\n  hasSelection,\n  onPaste,\n  hasClipboard,\n  onDeleteSelection,\n}: Props) => (\n  <Line justifyContent=\"space-between\" alignItems=\"center\">\n    <Column>\n      <Line noMargin>\n        <IconButton onClick={onCopy} disabled={!hasSelection}>\n          <Copy />\n        </IconButton>\n        <IconButton onClick={onPaste} disabled={!hasClipboard}>\n          <Paste />\n        </IconButton>\n        <IconButton onClick={onDeleteSelection} disabled={!hasSelection}>\n          <Delete />\n        </IconButton>\n      </Line>\n    </Column>\n\n    <Column>\n      <RaisedButton\n        primary\n        label={<Trans>Add</Trans>}\n        onClick={onAdd}\n        icon={<Add />}\n      />\n    </Column>\n  </Line>\n);\n\nexport default EditVariableRow;\n","// @flow\nimport { Trans } from '@lingui/macro';\nimport { t } from '@lingui/macro';\n\nimport * as React from 'react';\nimport TextField from '../UI/TextField';\nimport FlatButton from '../UI/FlatButton';\nimport Window from '../Utils/Window';\nimport { List, ListItem } from '../UI/List';\nimport { Column } from '../UI/Grid';\nimport algoliasearch from 'algoliasearch/lite';\nimport debounce from 'lodash/debounce';\nimport Text from '../UI/Text';\n\nconst styles = {\n  dropdownMenuContainer: {\n    maxHeight: 300,\n    overflowY: 'scroll',\n  },\n};\n\ntype Props = {|\n  onChange: string => void,\n  value: string,\n|};\n\ntype AlgoliaResult = {|\n  content: string,\n  url: string,\n  hierarchy: {|\n    lvl0: ?string,\n    lvl1: ?string,\n    lvl2: ?string,\n    lvl3: ?string,\n    lvl4: ?string,\n    lvl5: ?string,\n    lvl6: ?string,\n  |},\n  objectID: string,\n|};\n\ntype State = {|\n  results: ?Array<AlgoliaResult>,\n  error: ?Error,\n|};\n\nconst fixSomeHtmlCharacters = (str: string) => {\n  return str\n    .replace(/&amp;/g, '&')\n    .replace(/&quot;/g, '\"')\n    .replace(/&lt;/g, '<')\n    .replace(/&gt;/g, '>')\n    .replace(/&#x27;/g, \"'\");\n};\n\nconst indexName = 'gdevelop';\nconst appId = 'BH4D9OD16A';\nconst apiKey = '69c73fc1a710bb79543d4b91f6b81c08';\nconst algoliaOptions = { hitsPerPage: 5 };\n\nexport default class DocSearchArea extends React.Component<Props, State> {\n  // $FlowFixMe\n  client = algoliasearch(appId, apiKey, algoliaOptions);\n  state = {\n    results: null,\n    error: null,\n  };\n\n  _handleSearchTextChange = (searchText: string) => {\n    this.props.onChange(searchText);\n  };\n\n  _launchSearchRequest = debounce(() => {\n    if (this.props.value) {\n      this.client\n        // $FlowFixMe\n        .search([\n          {\n            indexName: indexName,\n            query: this.props.value,\n            params: algoliaOptions,\n          },\n        ])\n        .then(\n          data => {\n            let hits = data.results[0].hits;\n            console.log(hits);\n\n            this.setState({\n              results: hits,\n              error: null,\n            });\n          },\n          error => {\n            this.setState({\n              error,\n            });\n          }\n        );\n    }\n  }, 200);\n\n  componentDidUpdate(prevProps: Props) {\n    if (prevProps.value !== this.props.value && this.props.value) {\n      this._launchSearchRequest();\n    }\n  }\n\n  _renderResult = (result: AlgoliaResult) => {\n    const primaryText =\n      result.hierarchy.lvl0 ||\n      result.hierarchy.lvl1 ||\n      result.hierarchy.lvl2 ||\n      result.hierarchy.lvl3 ||\n      result.hierarchy.lvl4 ||\n      result.hierarchy.lvl5 ||\n      result.hierarchy.lvl6 ||\n      '';\n\n    const secondaryText = [\n      result.hierarchy.lvl0,\n      result.hierarchy.lvl1,\n      result.hierarchy.lvl2,\n      result.hierarchy.lvl3,\n      result.hierarchy.lvl4,\n      result.hierarchy.lvl5,\n      result.hierarchy.lvl6,\n    ]\n      .filter(text => !!text)\n      .filter(text => text !== primaryText)\n      .join(' - ');\n\n    return (\n      <ListItem\n        key={result.objectID}\n        primaryText={fixSomeHtmlCharacters(primaryText)}\n        secondaryText={fixSomeHtmlCharacters(result.content || secondaryText)}\n        secondaryTextLines={2}\n        onClick={() => {\n          Window.openExternalURL(result.url);\n        }}\n      />\n    );\n  };\n\n  render() {\n    return (\n      <div>\n        <TextField\n          id={'help-finder-search-bar'}\n          fullWidth\n          hintText={t`Enter what you want to build.`}\n          value={this.props.value}\n          onChange={(e, text) => this.props.onChange(text)}\n        />\n        <div\n          id=\"help-finder-dropdown-menu-container\"\n          className=\"algolia-autocomplete\"\n          style={{\n            ...styles.dropdownMenuContainer,\n            visibility: !this.props.value ? 'hidden' : undefined,\n          }}\n        />\n        {this.state.error ? (\n          <Text>\n            <Trans>\n              Unable to search in the documentation. Are you sure you are online\n              and have a proper internet connection?\n            </Trans>\n          </Text>\n        ) : this.state.results ? (\n          <List>\n            {this.state.results.map(result => this._renderResult(result))}\n          </List>\n        ) : (\n          <React.Fragment>\n            <Text>\n              <Trans>Examples:</Trans>\n            </Text>\n            <Column expand>\n              <Text>\n                Coins in platformer\n                <br />\n                Export on Android\n                <br />\n                Add a score\n                <br />\n                Move enemies\n                <br />\n                ...\n                <br />\n              </Text>\n            </Column>\n          </React.Fragment>\n        )}\n        <Text align=\"right\">\n          This search is powered by{' '}\n          <FlatButton\n            onClick={() => Window.openExternalURL('http://algolia.com/')}\n            label={'Algolia'}\n          />\n        </Text>\n      </div>\n    );\n  }\n}\n","// @flow\nimport { Trans } from '@lingui/macro';\n\nimport * as React from 'react';\nimport Dialog from '../UI/Dialog';\nimport FlatButton from '../UI/FlatButton';\nimport Window from '../Utils/Window';\nimport DocSearchArea from './DocSearchArea';\nimport debounce from 'lodash/debounce';\nimport {\n  sendHelpFinderOpened,\n  sendHelpSearch,\n} from '../Utils/Analytics/EventSender';\n\ntype Props = {|\n  open: boolean,\n  onClose: () => void,\n|};\n\ntype State = {|\n  searchText: string,\n|};\n\nexport default class HelpFinder extends React.PureComponent<Props, State> {\n  state = {\n    searchText: '',\n  };\n\n  componentWillReceiveProps(newProps: Props) {\n    if (newProps.open && !this.props.open) {\n      sendHelpFinderOpened();\n    }\n  }\n\n  _handleSearchTextChange = (searchText: string) => {\n    this.setState({\n      searchText,\n    });\n    this._sendHelpSearch();\n  };\n\n  _sendHelpSearch = debounce(() => {\n    if (this.state.searchText) sendHelpSearch(this.state.searchText.trim());\n  }, 2900);\n\n  render() {\n    const { open, onClose } = this.props;\n\n    return (\n      <Dialog\n        title={<Trans>Help!</Trans>}\n        onRequestClose={onClose}\n        actions={[\n          <FlatButton\n            label={<Trans>Close</Trans>}\n            key=\"close\"\n            primary={false}\n            onClick={onClose}\n          />,\n        ]}\n        secondaryActions={[\n          <FlatButton\n            key=\"forum\"\n            primary={false}\n            onClick={() => {\n              Window.openExternalURL('https://forum.gdevelop-app.com');\n            }}\n            label={<Trans>Community forum</Trans>}\n          />,\n          <FlatButton\n            key=\"wiki\"\n            primary={false}\n            onClick={() => {\n              Window.openExternalURL(\n                'http://wiki.compilgames.net/doku.php/gdevelop5/start'\n              );\n            }}\n            label={<Trans>Wiki</Trans>}\n          />,\n        ]}\n        cannotBeDismissed={false}\n        open={open}\n      >\n        <DocSearchArea\n          value={this.state.searchText}\n          onChange={this._handleSearchTextChange}\n        />\n      </Dialog>\n    );\n  }\n}\n","// @flow\nimport { Trans } from '@lingui/macro';\n\nimport React, { useEffect, useRef } from 'react';\nimport FlatButton from '../UI/FlatButton';\nimport RaisedButton from '../UI/RaisedButton';\nimport Dialog from '../UI/Dialog';\nimport { type UserProfile } from './UserProfileContext';\nimport { Column, Line, Spacer } from '../UI/Grid';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport BackgroundText from '../UI/BackgroundText';\nimport VerifiedUser from '@material-ui/icons/VerifiedUser';\nimport Text from '../UI/Text';\n\ntype Props = {|\n  onClose: Function,\n  userProfile: UserProfile,\n|};\n\nfunction useInterval(callback: () => void, delay: number | null) {\n  const savedCallback = useRef();\n\n  useEffect(() => {\n    savedCallback.current = callback;\n  });\n\n  useEffect(\n    () => {\n      function tick() {\n        if (savedCallback.current) savedCallback.current();\n      }\n\n      if (delay !== null) {\n        let id = setInterval(tick, delay);\n        return () => clearInterval(id);\n      }\n    },\n    [delay]\n  );\n}\n\nexport default function SubscriptionPendingDialog({\n  onClose,\n  userProfile,\n}: Props) {\n  const hasPlan =\n    !!userProfile &&\n    !!userProfile.subscription &&\n    !!userProfile.subscription.planId;\n  useInterval(() => userProfile.onRefreshUserProfile(), hasPlan ? null : 3900);\n\n  return (\n    <Dialog\n      actions={[\n        hasPlan ? (\n          <RaisedButton\n            label={<Trans>Done!</Trans>}\n            key=\"close\"\n            primary\n            onClick={onClose}\n          />\n        ) : (\n          <FlatButton\n            label={<Trans>Cancel and close</Trans>}\n            key=\"close\"\n            primary={false}\n            onClick={onClose}\n          />\n        ),\n      ]}\n      title={undefined}\n      maxWidth=\"sm\"\n      cannotBeDismissed={true}\n      open\n      noMargin\n    >\n      {!hasPlan && (\n        <Column>\n          <Line>\n            <Text>\n              <Trans>\n                Thanks for getting a subscription and supporting GDevelop!\n              </Trans>{' '}\n              {'❤️'}\n              <b>\n                <Trans>\n                  Your browser will now open to enter your payment details\n                  (handled securely by Stripe.com).\n                </Trans>\n              </b>\n            </Text>\n          </Line>\n          <Line justifyContent=\"center\" alignItems=\"center\">\n            <CircularProgress size={20} />\n            <Spacer />\n            <Text>Waiting for the subscription confirmation...</Text>\n          </Line>\n          <Spacer />\n          <Line justifyContent=\"center\">\n            <BackgroundText>\n              <Trans>\n                Once you're done, come back to GDevelop and your account will be\n                upgraded automatically, unlocking the extra exports and online\n                services.\n              </Trans>\n            </BackgroundText>\n          </Line>\n        </Column>\n      )}\n      {hasPlan && (\n        <Column>\n          <Line>\n            <Text>\n              <Trans>\n                Thanks for getting a subscription and supporting GDevelop!\n              </Trans>{' '}\n              {'❤️'}\n            </Text>\n          </Line>\n          <Line justifyContent=\"center\" alignItems=\"center\">\n            <VerifiedUser />\n            <Spacer />\n            <Text>\n              <b>\n                <Trans>Your new plan is now activated</Trans>\n              </b>\n            </Text>\n          </Line>\n          <Spacer />\n          <Line justifyContent=\"center\">\n            <BackgroundText>\n              <Trans>\n                Your account is upgraded, with the extra exports and online\n                services. If you wish to change later, come back to your profile\n                and choose another plan.\n              </Trans>\n            </BackgroundText>\n          </Line>\n        </Column>\n      )}\n    </Dialog>\n  );\n}\n","// @flow\nimport { t } from '@lingui/macro';\nimport { Trans } from '@lingui/macro';\nimport { I18n } from '@lingui/react';\nimport { type I18n as I18nType } from '@lingui/core';\nimport * as React from 'react';\nimport Card from '@material-ui/core/Card';\nimport CardHeader from '@material-ui/core/CardHeader';\nimport CardContent from '@material-ui/core/CardContent';\nimport CardActions from '@material-ui/core/CardActions';\nimport FlatButton from '../UI/FlatButton';\nimport Dialog from '../UI/Dialog';\nimport UserProfileContext, { type UserProfile } from './UserProfileContext';\nimport { Column, Line } from '../UI/Grid';\nimport {\n  getSubscriptionPlans,\n  type PlanDetails,\n  changeUserSubscription,\n  getRedirectToCheckoutUrl,\n} from '../Utils/GDevelopServices/Usage';\nimport RaisedButton from '../UI/RaisedButton';\nimport CheckCircle from '@material-ui/icons/CheckCircle';\nimport EmptyMessage from '../UI/EmptyMessage';\nimport { showMessageBox, showErrorBox } from '../UI/Messages/MessageBox';\nimport LeftLoader from '../UI/LeftLoader';\nimport PlaceholderMessage from '../UI/PlaceholderMessage';\nimport {\n  sendSubscriptionDialogShown,\n  sendChoosePlanClicked,\n} from '../Utils/Analytics/EventSender';\nimport SubscriptionPendingDialog from './SubscriptionPendingDialog';\nimport Window from '../Utils/Window';\nimport Text from '../UI/Text';\n\nconst styles = {\n  descriptionText: {\n    marginLeft: 16,\n    marginRight: 16,\n    marginTop: 8,\n    marginBottom: 8,\n  },\n  card: {\n    margin: 16,\n  },\n  actions: {\n    textAlign: 'right',\n    display: 'flex',\n    justifyContent: 'flex-end',\n  },\n  bulletIcon: { width: 20, height: 20, marginLeft: 5, marginRight: 10 },\n  bulletText: { flex: 1 },\n};\n\ntype Props = {|\n  open: boolean,\n  onClose: Function,\n|};\n\ntype State = {|\n  isLoading: boolean,\n  subscriptionPendingDialogOpen: boolean,\n|};\n\nexport default class SubscriptionDialog extends React.Component<Props, State> {\n  state = { isLoading: false, subscriptionPendingDialogOpen: false };\n\n  componentDidMount() {\n    if (this.props.open) {\n      sendSubscriptionDialogShown();\n    }\n  }\n\n  componentWillReceiveProps(newProps: Props) {\n    if (!this.props.open && newProps.open) {\n      sendSubscriptionDialogShown();\n    }\n  }\n\n  choosePlan = (\n    i18n: I18nType,\n    userProfile: UserProfile,\n    plan: PlanDetails\n  ) => {\n    const { getAuthorizationHeader, subscription, profile } = userProfile;\n    if (!profile || !subscription) return;\n    sendChoosePlanClicked(plan.planId);\n\n    if (subscription.stripeSubscriptionId) {\n      const answer = Window.showConfirmDialog(\n        plan.planId\n          ? i18n._(t`Are you sure you want to subscribe to this new plan?`)\n          : i18n._(t`Are you sure you want to cancel your subscription?`)\n      );\n      if (!answer) return;\n\n      // We already have a stripe customer, change the subscription without\n      // asking for the user card.\n      this.setState({ isLoading: true });\n      changeUserSubscription(getAuthorizationHeader, profile.uid, {\n        planId: plan.planId,\n      }).then(\n        () => this.handleUpdatedSubscriptionSuccess(i18n, userProfile, plan),\n        (err: Error) => this.handleUpdatedSubscriptionFailure(i18n, err)\n      );\n    } else {\n      this.setState({\n        subscriptionPendingDialogOpen: true,\n      });\n      Window.openExternalURL(\n        getRedirectToCheckoutUrl(\n          plan.planId || '',\n          profile.uid,\n          profile.email || ''\n        )\n      );\n    }\n  };\n\n  handleUpdatedSubscriptionSuccess = (\n    i18n: I18nType,\n    userProfile: UserProfile,\n    plan: PlanDetails\n  ) => {\n    userProfile.onRefreshUserProfile();\n    this.setState({ isLoading: false });\n    if (plan.planId) {\n      showMessageBox(\n        i18n._(\n          t`Congratulations, your new subscription is now active!\\n\\nYou can now use the services unlocked with this plan.`\n        )\n      );\n    } else {\n      showMessageBox(\n        i18n._(\n          t`Your subscription was properly cancelled. Sorry to see you go!`\n        )\n      );\n    }\n  };\n\n  handleUpdatedSubscriptionFailure = (i18n: I18nType, err: Error) => {\n    this.setState({ isLoading: false });\n    showErrorBox(\n      i18n._(\n        t`Your subscription could not be updated. Please try again later!`\n      ),\n      err\n    );\n  };\n\n  _renderPrice(plan: PlanDetails): React.Node {\n    return !plan.monthlyPriceInEuros ? (\n      <Trans>Free</Trans>\n    ) : (\n      <Trans>{plan.monthlyPriceInEuros}€/month</Trans>\n    );\n  }\n\n  _isLoading = (userProfile: UserProfile) =>\n    !userProfile.subscription || !userProfile.profile || this.state.isLoading;\n\n  render() {\n    const { open, onClose } = this.props;\n    const { subscriptionPendingDialogOpen } = this.state;\n\n    return (\n      <I18n>\n        {({ i18n }) => (\n          <UserProfileContext.Consumer>\n            {(userProfile: UserProfile) => (\n              <Dialog\n                actions={[\n                  <FlatButton\n                    label={<Trans>Close</Trans>}\n                    key=\"close\"\n                    primary={false}\n                    onClick={onClose}\n                  />,\n                ]}\n                onRequestClose={onClose}\n                cannotBeDismissed={true}\n                open={open}\n                noMargin\n              >\n                <Column>\n                  <Line>\n                    <Text>\n                      <Trans>\n                        Get a subscription to package your games for Android,\n                        Windows, macOS and Linux, use live preview over wifi and\n                        more. With a subscription, you're also supporting the\n                        development of GDevelop, which is an open-source\n                        software.\n                      </Trans>\n                    </Text>\n                  </Line>\n                </Column>\n                {getSubscriptionPlans().map(plan => (\n                  <Card key={plan.planId || ''} style={styles.card}>\n                    <CardHeader\n                      title={\n                        <span>\n                          <b>{plan.name}</b> - {this._renderPrice(plan)}\n                        </span>\n                      }\n                      subheader={\n                        plan.smallDescription\n                          ? i18n._(plan.smallDescription)\n                          : ''\n                      }\n                    />\n                    <CardContent>\n                      {plan.descriptionBullets.map(\n                        (descriptionBullet, index) => (\n                          <Column key={index} expand>\n                            <Line noMargin alignItems=\"center\">\n                              <CheckCircle style={styles.bulletIcon} />\n                              <Text style={styles.bulletText}>\n                                {i18n._(descriptionBullet.message)}{' '}\n                                {descriptionBullet.isLocalAppOnly && (\n                                  <Trans>(on the desktop app only)</Trans>\n                                )}\n                              </Text>\n                            </Line>\n                          </Column>\n                        )\n                      )}\n                      <Text style={styles.descriptionText}>\n                        {plan.extraDescription\n                          ? i18n._(plan.extraDescription)\n                          : ''}\n                      </Text>\n                    </CardContent>\n                    <CardActions style={styles.actions}>\n                      {userProfile.subscription &&\n                      userProfile.subscription.planId === plan.planId ? (\n                        <FlatButton\n                          disabled\n                          label={<Trans>This is your current plan</Trans>}\n                          onClick={() =>\n                            this.choosePlan(i18n, userProfile, plan)\n                          }\n                        />\n                      ) : plan.planId ? (\n                        <LeftLoader isLoading={this._isLoading(userProfile)}>\n                          <RaisedButton\n                            primary\n                            disabled={this._isLoading(userProfile)}\n                            label={<Trans>Choose this plan</Trans>}\n                            onClick={() =>\n                              this.choosePlan(i18n, userProfile, plan)\n                            }\n                          />\n                        </LeftLoader>\n                      ) : (\n                        <LeftLoader isLoading={this._isLoading(userProfile)}>\n                          <FlatButton\n                            disabled={this._isLoading(userProfile)}\n                            label={<Trans>Cancel your subscription</Trans>}\n                            onClick={() =>\n                              this.choosePlan(i18n, userProfile, plan)\n                            }\n                          />\n                        </LeftLoader>\n                      )}\n                    </CardActions>\n                  </Card>\n                ))}\n                <Column>\n                  <Line>\n                    <EmptyMessage>\n                      <Trans>\n                        Subscriptions can be stopped at any time. GDevelop uses\n                        Stripe.com for secure payment. No credit card data is\n                        stored by GDevelop: everything is managed by Stripe\n                        secure infrastructure.\n                      </Trans>\n                    </EmptyMessage>\n                  </Line>\n                </Column>\n                {!userProfile.authenticated && (\n                  <PlaceholderMessage>\n                    <Text>\n                      <Trans>\n                        Create a GDevelop account to continue. It's free and\n                        you'll be able to access to online services like\n                        one-click build for Android:\n                      </Trans>\n                    </Text>\n                    <RaisedButton\n                      label={<Trans>Create my account</Trans>}\n                      primary\n                      onClick={userProfile.onLogin}\n                    />\n                    <FlatButton\n                      label={<Trans>Not now, thanks</Trans>}\n                      onClick={onClose}\n                    />\n                  </PlaceholderMessage>\n                )}\n                {subscriptionPendingDialogOpen && (\n                  <SubscriptionPendingDialog\n                    userProfile={userProfile}\n                    onClose={() => {\n                      this.setState(\n                        {\n                          subscriptionPendingDialogOpen: false,\n                        },\n                        () => userProfile.onRefreshUserProfile()\n                      );\n                    }}\n                  />\n                )}\n              </Dialog>\n            )}\n          </UserProfileContext.Consumer>\n        )}\n      </I18n>\n    );\n  }\n}\n","// @flow\nimport { Trans } from '@lingui/macro';\n\nimport * as React from 'react';\nimport Dialog from '../../UI/Dialog';\nimport FlatButton from '../../UI/FlatButton';\nimport Changelog from '.';\nimport Text from '../../UI/Text';\n\ntype Props = {|\n  open: boolean,\n  onClose: () => void,\n|};\n\ntype State = {||};\n\nexport default class ChangelogDialog extends React.Component<Props, State> {\n  render() {\n    const { open, onClose } = this.props;\n    if (!open) {\n      // Don't render anything, to avoid in particular sending useless requests.\n      return null;\n    }\n\n    const actions = [\n      <FlatButton\n        key=\"close\"\n        label={<Trans>Close</Trans>}\n        primary={true}\n        onClick={onClose}\n      />,\n    ];\n\n    return (\n      <Dialog\n        title={<Trans>What's new in GDevelop?</Trans>}\n        actions={actions}\n        open={open}\n        onRequestClose={onClose}\n        cannotBeDismissed={false}\n      >\n        <Text>\n          <Trans>\n            GDevelop was upgraded to a new version! Check out the changes.\n          </Trans>\n        </Text>\n        <Changelog\n          onUpdated={() => {\n            this.forceUpdate(); /*Force update to ensure dialog is properly positionned*/\n          }}\n        />\n      </Dialog>\n    );\n  }\n}\n","// @flow\nimport * as React from 'react';\nimport ChangelogDialog from './ChangelogDialog';\nimport PreferencesContext from '../Preferences/PreferencesContext';\n\ntype ContainerProps = {|\n  defaultOpen: boolean,\n|};\n\ntype ContainerState = {|\n  open: boolean,\n|};\n\nclass ChangelogDialogContainer extends React.Component<\n  ContainerProps,\n  ContainerState\n> {\n  state = {\n    open: this.props.defaultOpen,\n  };\n\n  render() {\n    const { open } = this.state;\n    return (\n      <ChangelogDialog\n        open={open}\n        onClose={() =>\n          this.setState({\n            open: false,\n          })\n        }\n      />\n    );\n  }\n}\n\n/**\n * The container showing the ChangelogDialog only if a a new version\n * of GDevelop is detected.\n */\nexport default (props: {||}) => (\n  <PreferencesContext.Consumer>\n    {({ values, verifyIfIsNewVersion }) => (\n      <ChangelogDialogContainer\n        defaultOpen={verifyIfIsNewVersion() && values.autoDisplayChangelog}\n      />\n    )}\n  </PreferencesContext.Consumer>\n);\n","// @flow\nimport * as React from 'react';\n\nexport type WidthType = 'small' | 'medium' | 'large';\n\ntype Props = {|\n  children: (width: WidthType) => React.Node,\n|};\n\n/**\n * Pass the proper size to the children according to the window size.\n * This is only considering the window width.\n */\nexport const ResponsiveWidthMeasurer = ({ children }: Props) => {\n  if (typeof window === 'undefined') {\n    return children('medium');\n  }\n\n  return children(\n    window.innerWidth < 750\n      ? 'small'\n      : window.innerWidth < 1150\n      ? 'medium'\n      : 'large'\n  );\n};\n","// @flow\nimport { Trans } from '@lingui/macro';\n\nimport * as React from 'react';\nimport Dialog from '../../UI/Dialog';\nimport FlatButton from '../../UI/FlatButton';\nimport {\n  type ResourceSource,\n  type ChooseResourceFunction,\n} from '../../ResourcesList/ResourceSource.flow';\nimport { type ResourceExternalEditor } from '../../ResourcesList/ResourceExternalEditor.flow';\nimport InstructionParametersEditor from './InstructionParametersEditor';\nimport InstructionOrObjectSelector, {\n  type TabName,\n} from './InstructionOrObjectSelector';\nimport { Column } from '../../UI/Grid';\nimport InstructionOrExpressionSelector from './InstructionOrExpressionSelector';\nimport HelpButton from '../../UI/HelpButton';\nimport Background from '../../UI/Background';\nimport { type EventsScope } from '../../InstructionOrExpression/EventsScope.flow';\nimport { SelectColumns } from '../../UI/Reponsive/SelectColumns';\nimport {\n  ResponsiveWidthMeasurer,\n  type WidthType,\n} from '../../UI/Reponsive/ResponsiveWidthMeasurer';\nimport {\n  useNewInstructionEditor,\n  getInstructionMetadata,\n} from './NewInstructionEditor';\nimport useForceUpdate from '../../Utils/UseForceUpdate';\n\nconst styles = {\n  fullHeightSelector: {\n    flex: 1,\n    display: 'flex',\n    flexDirection: 'column',\n  },\n};\n\ntype StepName =\n  | 'object-or-free-instructions'\n  | 'object-instructions'\n  | 'parameters';\n\ntype Props = {|\n  project: gdProject,\n  scope: EventsScope,\n  globalObjectsContainer: gdObjectsContainer,\n  objectsContainer: gdObjectsContainer,\n  instruction: gdInstruction,\n  isCondition: boolean,\n  resourceSources: Array<ResourceSource>,\n  onChooseResource: ChooseResourceFunction,\n  resourceExternalEditors: Array<ResourceExternalEditor>,\n  style?: Object,\n  isNewInstruction: boolean,\n  onCancel: () => void,\n  onSubmit: () => void,\n  open: boolean,\n  openInstructionOrExpression: (\n    extension: gdPlatformExtension,\n    type: string\n  ) => void,\n  anchorEl?: any, // Unused\n|};\n\nconst getInitialStepName = (isNewInstruction: boolean): StepName => {\n  if (isNewInstruction) return 'object-or-free-instructions';\n  return 'parameters';\n};\n\nconst getInitialTab = (\n  isNewInstruction: boolean,\n  hasObjectChosen: boolean\n): TabName => {\n  if (isNewInstruction) return 'objects';\n  return hasObjectChosen ? 'objects' : 'free-instructions';\n};\n\n/**\n * A responsive instruction editor in a dialog, showing InstructionParametersEditor\n * at the end.\n */\nexport default function NewInstructionEditorDialog({\n  project,\n  globalObjectsContainer,\n  objectsContainer,\n  onCancel,\n  open,\n  instruction,\n  isCondition,\n  isNewInstruction,\n  scope,\n  onSubmit,\n  resourceSources,\n  onChooseResource,\n  resourceExternalEditors,\n  openInstructionOrExpression,\n}: Props) {\n  const forceUpdate = useForceUpdate();\n  const [\n    newInstructionEditorState,\n    newInstructionEditorSetters,\n  ] = useNewInstructionEditor({\n    instruction,\n    isCondition,\n    project,\n    isNewInstruction,\n    scope,\n    globalObjectsContainer,\n    objectsContainer,\n  });\n  const {\n    chosenObjectName,\n    chosenObjectInstructionsInfo,\n    chosenObjectInstructionsInfoTree,\n  } = newInstructionEditorState;\n  const {\n    chooseFreeInstruction,\n    chooseObject,\n    chooseObjectInstruction,\n  } = newInstructionEditorSetters;\n  const hasObjectChosen =\n    !!chosenObjectInstructionsInfo && !!chosenObjectInstructionsInfoTree;\n  const [step, setStep] = React.useState(() =>\n    getInitialStepName(isNewInstruction)\n  );\n  const [\n    currentInstructionOrObjectSelectorTab,\n    setCurrentInstructionOrObjectSelectorTab,\n  ] = React.useState(() => getInitialTab(isNewInstruction, hasObjectChosen));\n  const instructionType: string = instruction.getType();\n\n  // Handle the back button\n  const stepBackFrom = (origin: StepName, width: WidthType) => {\n    if (origin === 'parameters' && chosenObjectName) {\n      setStep(\n        // \"medium\" displays 2 columns, so \"Back\" button should go back to the first screen.\n        width === 'medium'\n          ? 'object-or-free-instructions'\n          : 'object-instructions'\n      );\n    } else {\n      setStep('object-or-free-instructions');\n    }\n  };\n\n  // Focus the parameters when showing them\n  const instructionParametersEditor = React.useRef(\n    (null: ?InstructionParametersEditor)\n  );\n  React.useEffect(\n    () => {\n      if (step === 'parameters') {\n        if (instructionParametersEditor.current) {\n          instructionParametersEditor.current.focus();\n        }\n      }\n    },\n    [step]\n  );\n\n  const instructionMetadata = getInstructionMetadata({\n    instructionType,\n    isCondition,\n    project,\n  });\n  const instructionHelpPage = instructionMetadata\n    ? instructionMetadata.getHelpPath()\n    : undefined;\n\n  const renderInstructionOrObjectSelector = () => (\n    <Background noFullHeight key=\"instruction-or-object-selector\">\n      <InstructionOrObjectSelector\n        style={styles.fullHeightSelector}\n        project={project}\n        currentTab={currentInstructionOrObjectSelectorTab}\n        onChangeTab={setCurrentInstructionOrObjectSelectorTab}\n        globalObjectsContainer={globalObjectsContainer}\n        objectsContainer={objectsContainer}\n        isCondition={isCondition}\n        chosenInstructionType={!chosenObjectName ? instructionType : undefined}\n        onChooseInstruction={(instructionType: string) => {\n          chooseFreeInstruction(instructionType);\n          setStep('parameters');\n        }}\n        chosenObjectName={chosenObjectName}\n        onChooseObject={(chosenObjectName: string) => {\n          chooseObject(chosenObjectName);\n          setStep('object-instructions');\n        }}\n        focusOnMount={!instructionType}\n        onSearchStartOrReset={forceUpdate}\n      />\n    </Background>\n  );\n\n  const renderParameters = () => (\n    <Column expand justifyContent=\"center\" key=\"parameters\">\n      <InstructionParametersEditor\n        project={project}\n        scope={scope}\n        globalObjectsContainer={globalObjectsContainer}\n        objectsContainer={objectsContainer}\n        objectName={chosenObjectName}\n        isCondition={isCondition}\n        instruction={instruction}\n        resourceSources={resourceSources}\n        onChooseResource={onChooseResource}\n        resourceExternalEditors={resourceExternalEditors}\n        openInstructionOrExpression={openInstructionOrExpression}\n        ref={instructionParametersEditor}\n        focusOnMount={!!instructionType}\n        noHelpButton\n      />\n    </Column>\n  );\n\n  const renderObjectInstructionSelector = () =>\n    chosenObjectInstructionsInfoTree && chosenObjectInstructionsInfo ? (\n      <InstructionOrExpressionSelector\n        key=\"object-instruction-selector\"\n        style={styles.fullHeightSelector}\n        instructionsInfo={chosenObjectInstructionsInfo}\n        instructionsInfoTree={chosenObjectInstructionsInfoTree}\n        iconSize={24}\n        onChoose={(instructionType: string) => {\n          chooseObjectInstruction(instructionType);\n          setStep('parameters');\n        }}\n        selectedType={instructionType}\n        useSubheaders\n        focusOnMount={!instructionType}\n        searchPlaceholderObjectName={chosenObjectName}\n        searchPlaceholderIsCondition={isCondition}\n      />\n    ) : null;\n\n  return (\n    <ResponsiveWidthMeasurer>\n      {width => (\n        <Dialog\n          actions={[\n            <FlatButton\n              label={<Trans>Cancel</Trans>}\n              primary={false}\n              onClick={onCancel}\n              key=\"cancel\"\n            />,\n            <FlatButton\n              label={<Trans>Ok</Trans>}\n              primary={true}\n              keyboardFocused={false}\n              disabled={!instructionType}\n              onClick={onSubmit}\n              key=\"ok\"\n            />,\n          ]}\n          secondaryActions={[\n            width !== 'large' && step !== 'object-or-free-instructions' ? (\n              <FlatButton\n                label={<Trans>Back</Trans>}\n                primary={false}\n                onClick={() => stepBackFrom(step, width)}\n                key=\"back\"\n              />\n            ) : null,\n            <HelpButton\n              key=\"help\"\n              helpPagePath={instructionHelpPage || '/events'}\n              label={\n                !instructionHelpPage ||\n                (width === 'small' ||\n                  step === 'object-or-free-instructions') ? (\n                  <Trans>Help</Trans>\n                ) : isCondition ? (\n                  <Trans>Help for this condition</Trans>\n                ) : (\n                  <Trans>Help for this action</Trans>\n                )\n              }\n            />,\n          ]}\n          open={open}\n          onRequestClose={onCancel}\n          cannotBeDismissed={true}\n          maxWidth={false}\n          noMargin\n          flexRowBody\n        >\n          <SelectColumns\n            columnsRenderer={{\n              'instruction-or-object-selector': renderInstructionOrObjectSelector,\n              'object-instruction-selector': renderObjectInstructionSelector,\n              parameters: renderParameters,\n            }}\n            getColumns={() => {\n              if (width === 'large') {\n                if (chosenObjectName) {\n                  return [\n                    'instruction-or-object-selector',\n                    'object-instruction-selector',\n                    'parameters',\n                  ];\n                } else {\n                  return ['instruction-or-object-selector', 'parameters'];\n                }\n              } else if (width === 'medium') {\n                if (step === 'object-or-free-instructions') {\n                  return ['instruction-or-object-selector'];\n                } else {\n                  if (chosenObjectName) {\n                    return ['object-instruction-selector', 'parameters'];\n                  } else {\n                    return ['parameters'];\n                  }\n                }\n              } else {\n                if (step === 'object-or-free-instructions') {\n                  return ['instruction-or-object-selector'];\n                } else if (step === 'object-instructions') {\n                  return ['object-instruction-selector'];\n                } else {\n                  return ['parameters'];\n                }\n              }\n            }}\n          />\n        </Dialog>\n      )}\n    </ResponsiveWidthMeasurer>\n  );\n}\n","// @flow\nimport { Trans } from '@lingui/macro';\n\nimport * as React from 'react';\nimport { AutoSizer } from 'react-virtualized';\nimport SortableVirtualizedItemList from '../UI/SortableVirtualizedItemList';\nimport SearchBar from '../UI/SearchBar';\nimport { showWarningBox } from '../UI/Messages/MessageBox';\nimport Background from '../UI/Background';\nimport newNameGenerator from '../Utils/NewNameGenerator';\nimport {\n  enumerateEventsFunctions,\n  filterEventFunctionsList,\n} from './EnumerateEventsFunctions';\nimport Clipboard from '../Utils/Clipboard';\nimport Window from '../Utils/Window';\nimport {\n  serializeToJSObject,\n  unserializeFromJSObject,\n} from '../Utils/Serializer';\nimport { type UnsavedChanges } from '../MainFrame/UnsavedChangesContext';\n\nconst EVENTS_FUNCTION_CLIPBOARD_KIND = 'Events Function';\n\nconst styles = {\n  listContainer: {\n    flex: 1,\n  },\n};\n\nexport type EventsFunctionCreationParameters = {|\n  functionType: 0 | 1 | 2,\n  name: ?string,\n|};\n\nconst getEventsFunctionName = (eventsFunction: gdEventsFunction) =>\n  eventsFunction.getName();\n\ntype State = {|\n  renamedEventsFunction: ?gdEventsFunction,\n  searchText: string,\n|};\n\ntype Props = {|\n  project: gdProject,\n  eventsFunctionsContainer: gdEventsFunctionsContainer,\n  selectedEventsFunction: ?gdEventsFunction,\n  onSelectEventsFunction: (eventsFunction: ?gdEventsFunction) => void,\n  onDeleteEventsFunction: (\n    eventsFunction: gdEventsFunction,\n    cb: (boolean) => void\n  ) => void,\n  canRename: (eventsFunction: gdEventsFunction) => boolean,\n  onRenameEventsFunction: (\n    eventsFunction: gdEventsFunction,\n    newName: string,\n    cb: (boolean) => void\n  ) => void,\n  onAddEventsFunction: (\n    (parameters: ?EventsFunctionCreationParameters) => void\n  ) => void,\n  onEventsFunctionAdded: (eventsFunction: gdEventsFunction) => void,\n  renderHeader?: () => React.Node,\n  unsavedChanges?: UnsavedChanges,\n|};\n\nexport default class EventsFunctionsList extends React.Component<Props, State> {\n  static defaultProps = {\n    onDeleteEventsFunction: (\n      eventsFunction: gdEventsFunction,\n      cb: boolean => void\n    ) => cb(true),\n    onRenameEventsFunction: (\n      eventsFunction: gdEventsFunction,\n      newName: string,\n      cb: boolean => void\n    ) => cb(true),\n  };\n\n  sortableList: any;\n  state: State = {\n    renamedEventsFunction: null,\n    searchText: '',\n  };\n\n  _deleteEventsFunction = (\n    eventsFunction: gdEventsFunction,\n    { askForConfirmation }: {| askForConfirmation: boolean |}\n  ) => {\n    const { eventsFunctionsContainer } = this.props;\n\n    if (askForConfirmation) {\n      const answer = Window.showConfirmDialog(\n        \"Are you sure you want to remove this function? This can't be undone.\"\n      );\n      if (!answer) return;\n    }\n\n    this.props.onDeleteEventsFunction(eventsFunction, doRemove => {\n      if (!doRemove) return;\n\n      eventsFunctionsContainer.removeEventsFunction(eventsFunction.getName());\n      this._onEventsFunctionModified();\n    });\n  };\n\n  _editName = (eventsFunction: ?gdEventsFunction) => {\n    this.setState(\n      {\n        renamedEventsFunction: eventsFunction,\n      },\n      () => {\n        if (this.sortableList) this.sortableList.forceUpdateGrid();\n      }\n    );\n  };\n\n  _rename = (eventsFunction: gdEventsFunction, newName: string) => {\n    const { eventsFunctionsContainer } = this.props;\n    this.setState({\n      renamedEventsFunction: null,\n    });\n\n    if (eventsFunction.getName() === newName) return;\n\n    if (eventsFunctionsContainer.hasEventsFunctionNamed(newName)) {\n      showWarningBox('Another function with this name already exists.');\n      return;\n    }\n\n    this.props.onRenameEventsFunction(eventsFunction, newName, doRename => {\n      if (!doRename) return;\n      eventsFunction.setName(newName);\n      this._onEventsFunctionModified();\n    });\n  };\n\n  _moveSelectionTo = (destinationEventsFunction: gdEventsFunction) => {\n    const { eventsFunctionsContainer, selectedEventsFunction } = this.props;\n    if (!selectedEventsFunction) return;\n\n    eventsFunctionsContainer.moveEventsFunction(\n      eventsFunctionsContainer.getEventsFunctionPosition(\n        selectedEventsFunction\n      ),\n      eventsFunctionsContainer.getEventsFunctionPosition(\n        destinationEventsFunction\n      )\n    );\n\n    this.forceUpdateList();\n  };\n\n  forceUpdateList = () => {\n    this._onEventsFunctionModified();\n    if (this.sortableList) this.sortableList.forceUpdateGrid();\n  };\n\n  _copyEventsFunction = (eventsFunction: gdEventsFunction) => {\n    Clipboard.set(EVENTS_FUNCTION_CLIPBOARD_KIND, {\n      eventsFunction: serializeToJSObject(eventsFunction),\n      name: eventsFunction.getName(),\n    });\n  };\n\n  _cutEventsFunction = (eventsFunction: gdEventsFunction) => {\n    this._copyEventsFunction(eventsFunction);\n    this._deleteEventsFunction(eventsFunction, { askForConfirmation: false });\n  };\n\n  _pasteEventsFunction = (index: number) => {\n    if (!Clipboard.has(EVENTS_FUNCTION_CLIPBOARD_KIND)) return;\n\n    const { eventsFunction: copiedEventsFunction, name } = Clipboard.get(\n      EVENTS_FUNCTION_CLIPBOARD_KIND\n    );\n    const { project, eventsFunctionsContainer } = this.props;\n\n    const newName = newNameGenerator(name, name =>\n      eventsFunctionsContainer.hasEventsFunctionNamed(name)\n    );\n\n    const newEventsFunction = eventsFunctionsContainer.insertNewEventsFunction(\n      newName,\n      index\n    );\n\n    unserializeFromJSObject(\n      newEventsFunction,\n      copiedEventsFunction,\n      'unserializeFrom',\n      project\n    );\n    newEventsFunction.setName(newName);\n    this.props.onEventsFunctionAdded(newEventsFunction);\n\n    this._onEventsFunctionModified();\n  };\n\n  _onEventsFunctionModified() {\n    if (this.props.unsavedChanges)\n      this.props.unsavedChanges.triggerUnsavedChanges();\n    this.forceUpdate();\n  }\n\n  _renderEventsFunctionMenuTemplate = (\n    eventsFunction: gdEventsFunction,\n    index: number\n  ) => {\n    return [\n      {\n        label: 'Rename',\n        click: () => this._editName(eventsFunction),\n        enabled: this.props.canRename(eventsFunction),\n      },\n      {\n        label: 'Remove',\n        click: () =>\n          this._deleteEventsFunction(eventsFunction, {\n            askForConfirmation: true,\n          }),\n      },\n      {\n        type: 'separator',\n      },\n      {\n        label: 'Copy',\n        click: () => this._copyEventsFunction(eventsFunction),\n      },\n      {\n        label: 'Cut',\n        click: () => this._cutEventsFunction(eventsFunction),\n      },\n      {\n        label: 'Paste',\n        enabled: Clipboard.has(EVENTS_FUNCTION_CLIPBOARD_KIND),\n        click: () => this._pasteEventsFunction(index),\n      },\n    ];\n  };\n\n  _addNewEventsFunction = () => {\n    const { eventsFunctionsContainer } = this.props;\n\n    this.props.onAddEventsFunction(\n      (parameters: ?EventsFunctionCreationParameters) => {\n        if (!parameters) {\n          return;\n        }\n\n        const eventsFunctionName =\n          parameters.name ||\n          newNameGenerator('Function', name =>\n            eventsFunctionsContainer.hasEventsFunctionNamed(name)\n          );\n\n        const eventsFunction = eventsFunctionsContainer.insertNewEventsFunction(\n          eventsFunctionName,\n          eventsFunctionsContainer.getEventsFunctionsCount()\n        );\n        eventsFunction.setFunctionType(parameters.functionType);\n        this.props.onEventsFunctionAdded(eventsFunction);\n        this._onEventsFunctionModified();\n      }\n    );\n  };\n\n  render() {\n    const {\n      project,\n      eventsFunctionsContainer,\n      selectedEventsFunction,\n      onSelectEventsFunction,\n      renderHeader,\n    } = this.props;\n    const { searchText } = this.state;\n\n    const list = filterEventFunctionsList(\n      enumerateEventsFunctions(eventsFunctionsContainer),\n      searchText\n    );\n\n    // Force List component to be mounted again if project or objectsContainer\n    // has been changed. Avoid accessing to invalid objects that could\n    // crash the app.\n    const listKey = project.ptr + ';' + eventsFunctionsContainer.ptr;\n\n    return (\n      <Background>\n        {renderHeader ? renderHeader() : null}\n        <div style={styles.listContainer}>\n          <AutoSizer>\n            {({ height, width }) => (\n              <SortableVirtualizedItemList\n                key={listKey}\n                ref={sortableList => (this.sortableList = sortableList)}\n                fullList={list}\n                width={width}\n                height={height}\n                onAddNewItem={this._addNewEventsFunction}\n                addNewItemLabel={<Trans>Add a new function</Trans>}\n                getItemName={getEventsFunctionName}\n                selectedItems={\n                  selectedEventsFunction ? [selectedEventsFunction] : []\n                }\n                onItemSelected={onSelectEventsFunction}\n                renamedItem={this.state.renamedEventsFunction}\n                onRename={this._rename}\n                onMoveSelectionToItem={this._moveSelectionTo}\n                buildMenuTemplate={this._renderEventsFunctionMenuTemplate}\n                reactDndType=\"GD_EVENTS_FUNCTION\"\n              />\n            )}\n          </AutoSizer>\n        </div>\n        <SearchBar\n          value={searchText}\n          onRequestSearch={() => {}}\n          onChange={text =>\n            this.setState({\n              searchText: text,\n            })\n          }\n        />\n      </Background>\n    );\n  }\n}\n","//@flow\nimport { mapFor } from '../Utils/MapFor';\n\nexport const enumerateEventsFunctions = (\n  eventsFunctionsContainer: gdEventsFunctionsExtension\n): Array<gdEventsFunction> =>\n  mapFor(0, eventsFunctionsContainer.getEventsFunctionsCount(), i =>\n    eventsFunctionsContainer.getEventsFunctionAt(i)\n  );\n\nexport const filterEventFunctionsList = (\n  list: Array<gdEventsFunction>,\n  searchText: string\n): Array<gdEventsFunction> => {\n  if (!searchText) return list;\n\n  const lowercaseSearchText = searchText.toLowerCase();\n\n  return list.filter(\n    (item: any) =>\n      item\n        .getName()\n        .toLowerCase()\n        .indexOf(lowercaseSearchText) !== -1\n  );\n};\n","// @flow\nimport { Trans } from '@lingui/macro';\n\nimport * as React from 'react';\nimport { AutoSizer } from 'react-virtualized';\nimport SortableVirtualizedItemList from '../UI/SortableVirtualizedItemList';\nimport SearchBar from '../UI/SearchBar';\nimport { showWarningBox } from '../UI/Messages/MessageBox';\nimport Background from '../UI/Background';\nimport newNameGenerator from '../Utils/NewNameGenerator';\nimport {\n  enumerateEventsBasedBehaviors,\n  filterEventsBasedBehaviorsList,\n} from './EnumerateEventsBasedBehaviors';\nimport Clipboard from '../Utils/Clipboard';\nimport Window from '../Utils/Window';\nimport {\n  serializeToJSObject,\n  unserializeFromJSObject,\n} from '../Utils/Serializer';\nimport { type UnsavedChanges } from '../MainFrame/UnsavedChangesContext';\n\nconst EVENTS_BASED_BEHAVIOR_CLIPBOARD_KIND = 'Events Based Behavior';\n\nconst styles = {\n  listContainer: {\n    flex: 1,\n  },\n};\n\ntype State = {|\n  renamedEventsBasedBehavior: ?gdEventsBasedBehavior,\n  searchText: string,\n|};\n\nconst getEventsBasedBehaviorName = (\n  eventsBasedBehavior: gdEventsBasedBehavior\n) => eventsBasedBehavior.getName();\n\ntype Props = {|\n  project: gdProject,\n  eventsBasedBehaviorsList: gdEventsBasedBehaviorsList,\n  selectedEventsBasedBehavior: ?gdEventsBasedBehavior,\n  onSelectEventsBasedBehavior: (\n    eventsBasedBehavior: ?gdEventsBasedBehavior\n  ) => void,\n  onDeleteEventsBasedBehavior: (\n    eventsBasedBehavior: gdEventsBasedBehavior,\n    cb: (boolean) => void\n  ) => void,\n  onRenameEventsBasedBehavior: (\n    eventsBasedBehavior: gdEventsBasedBehavior,\n    newName: string,\n    cb: (boolean) => void\n  ) => void,\n  onEventsBasedBehaviorRenamed: (\n    eventsBasedBehavior: gdEventsBasedBehavior\n  ) => void,\n  onEditProperties: (eventsBasedBehavior: gdEventsBasedBehavior) => void,\n  unsavedChanges?: UnsavedChanges,\n|};\n\nexport default class EventsBasedBehaviorsList extends React.Component<\n  Props,\n  State\n> {\n  static defaultProps = {\n    onDeleteEventsBasedBehavior: (\n      eventsBasedBehavior: gdEventsBasedBehavior,\n      cb: boolean => void\n    ) => cb(true),\n    onRenameEventsBasedBehavior: (\n      eventsBasedBehavior: gdEventsBasedBehavior,\n      newName: string,\n      cb: boolean => void\n    ) => cb(true),\n  };\n\n  sortableList: ?SortableVirtualizedItemList<gdEventsFunction>;\n  state: State = {\n    renamedEventsBasedBehavior: null,\n    searchText: '',\n  };\n\n  _deleteEventsBasedBehavior = (\n    eventsBasedBehavior: gdEventsBasedBehavior,\n    { askForConfirmation }: {| askForConfirmation: boolean |}\n  ) => {\n    const { eventsBasedBehaviorsList } = this.props;\n\n    if (askForConfirmation) {\n      const answer = Window.showConfirmDialog(\n        \"Are you sure you want to remove this behavior? This can't be undone.\"\n      );\n      if (!answer) return;\n    }\n\n    this.props.onDeleteEventsBasedBehavior(eventsBasedBehavior, doRemove => {\n      if (!doRemove) return;\n\n      eventsBasedBehaviorsList.remove(eventsBasedBehavior.getName());\n      this._onEventsBasedBehaviorModified();\n    });\n  };\n\n  _editName = (renamedEventsBasedBehavior: ?gdEventsBasedBehavior) => {\n    this.setState(\n      {\n        renamedEventsBasedBehavior,\n      },\n      () => {\n        if (this.sortableList) this.sortableList.forceUpdateGrid();\n      }\n    );\n  };\n\n  _rename = (eventsBasedBehavior: gdEventsBasedBehavior, newName: string) => {\n    const { eventsBasedBehaviorsList } = this.props;\n    this.setState({\n      renamedEventsBasedBehavior: null,\n    });\n\n    if (eventsBasedBehavior.getName() === newName) return;\n\n    if (eventsBasedBehaviorsList.has(newName)) {\n      showWarningBox('Another behavior with this name already exists.');\n      return;\n    }\n\n    this.props.onRenameEventsBasedBehavior(\n      eventsBasedBehavior,\n      newName,\n      doRename => {\n        if (!doRename) return;\n        eventsBasedBehavior.setName(newName);\n        this._onEventsBasedBehaviorModified();\n        this.props.onEventsBasedBehaviorRenamed(eventsBasedBehavior);\n      }\n    );\n  };\n\n  _moveSelectionTo = (\n    destinationEventsBasedBehavior: gdEventsBasedBehavior\n  ) => {\n    const {\n      eventsBasedBehaviorsList,\n      selectedEventsBasedBehavior,\n    } = this.props;\n    if (!selectedEventsBasedBehavior) return;\n\n    eventsBasedBehaviorsList.move(\n      eventsBasedBehaviorsList.getPosition(selectedEventsBasedBehavior),\n      eventsBasedBehaviorsList.getPosition(destinationEventsBasedBehavior)\n    );\n\n    this.forceUpdateList();\n  };\n\n  forceUpdateList = () => {\n    this._onEventsBasedBehaviorModified();\n    if (this.sortableList) this.sortableList.forceUpdateGrid();\n  };\n\n  _copyEventsBasedBehavior = (eventsBasedBehavior: gdEventsBasedBehavior) => {\n    Clipboard.set(EVENTS_BASED_BEHAVIOR_CLIPBOARD_KIND, {\n      eventsBasedBehavior: serializeToJSObject(eventsBasedBehavior),\n      name: eventsBasedBehavior.getName(),\n    });\n  };\n\n  _cutEventsBasedBehavior = (eventsBasedBehavior: gdEventsBasedBehavior) => {\n    this._copyEventsBasedBehavior(eventsBasedBehavior);\n    this._deleteEventsBasedBehavior(eventsBasedBehavior, {\n      askForConfirmation: false,\n    });\n  };\n\n  _pasteEventsBasedBehavior = (index: number) => {\n    if (!Clipboard.has(EVENTS_BASED_BEHAVIOR_CLIPBOARD_KIND)) return;\n\n    const {\n      eventsBasedBehavior: copiedEventsBasedBehavior,\n      name,\n    } = Clipboard.get(EVENTS_BASED_BEHAVIOR_CLIPBOARD_KIND);\n    const { project, eventsBasedBehaviorsList } = this.props;\n\n    const newName = newNameGenerator(name, name =>\n      eventsBasedBehaviorsList.has(name)\n    );\n\n    const newEventsBasedBehavior = eventsBasedBehaviorsList.insertNew(\n      newName,\n      index\n    );\n\n    unserializeFromJSObject(\n      newEventsBasedBehavior,\n      copiedEventsBasedBehavior,\n      'unserializeFrom',\n      project\n    );\n    newEventsBasedBehavior.setName(newName);\n\n    this._onEventsBasedBehaviorModified();\n  };\n\n  _renderEventsBasedBehaviorMenuTemplate = (\n    eventsBasedBehavior: gdEventsBasedBehavior,\n    index: number\n  ) => {\n    return [\n      {\n        label: 'Properties',\n        click: () => this.props.onEditProperties(eventsBasedBehavior),\n      },\n      {\n        type: 'separator',\n      },\n      {\n        label: 'Rename',\n        click: () => this._editName(eventsBasedBehavior),\n      },\n      {\n        label: 'Remove',\n        click: () =>\n          this._deleteEventsBasedBehavior(eventsBasedBehavior, {\n            askForConfirmation: true,\n          }),\n      },\n      {\n        type: 'separator',\n      },\n      {\n        label: 'Copy',\n        click: () => this._copyEventsBasedBehavior(eventsBasedBehavior),\n      },\n      {\n        label: 'Cut',\n        click: () => this._cutEventsBasedBehavior(eventsBasedBehavior),\n      },\n      {\n        label: 'Paste',\n        enabled: Clipboard.has(EVENTS_BASED_BEHAVIOR_CLIPBOARD_KIND),\n        click: () => this._pasteEventsBasedBehavior(index),\n      },\n    ];\n  };\n\n  _addNewEventsBasedBehavior = () => {\n    const { eventsBasedBehaviorsList } = this.props;\n\n    const name = newNameGenerator('MyBehavior', name =>\n      eventsBasedBehaviorsList.has(name)\n    );\n    eventsBasedBehaviorsList.insertNew(\n      name,\n      eventsBasedBehaviorsList.getCount()\n    );\n    this._onEventsBasedBehaviorModified();\n  };\n\n  _onEventsBasedBehaviorModified() {\n    if (this.props.unsavedChanges)\n      this.props.unsavedChanges.triggerUnsavedChanges();\n    this.forceUpdate();\n  }\n\n  render() {\n    const {\n      project,\n      eventsBasedBehaviorsList,\n      selectedEventsBasedBehavior,\n      onSelectEventsBasedBehavior,\n    } = this.props;\n    const { searchText } = this.state;\n\n    const list = filterEventsBasedBehaviorsList(\n      enumerateEventsBasedBehaviors(eventsBasedBehaviorsList),\n      searchText\n    );\n\n    // Force List component to be mounted again if project or eventsBasedBehaviorsList\n    // has been changed. Avoid accessing to invalid objects that could\n    // crash the app.\n    const listKey = project.ptr + ';' + eventsBasedBehaviorsList.ptr;\n\n    return (\n      <Background>\n        <div style={styles.listContainer}>\n          <AutoSizer>\n            {({ height, width }) => (\n              <SortableVirtualizedItemList\n                key={listKey}\n                ref={sortableList => (this.sortableList = sortableList)}\n                fullList={list}\n                width={width}\n                height={height}\n                onAddNewItem={this._addNewEventsBasedBehavior}\n                addNewItemLabel={<Trans>Add a new behavior</Trans>}\n                getItemName={getEventsBasedBehaviorName}\n                selectedItems={\n                  selectedEventsBasedBehavior\n                    ? [selectedEventsBasedBehavior]\n                    : []\n                }\n                onItemSelected={onSelectEventsBasedBehavior}\n                renamedItem={this.state.renamedEventsBasedBehavior}\n                onRename={this._rename}\n                onMoveSelectionToItem={this._moveSelectionTo}\n                buildMenuTemplate={this._renderEventsBasedBehaviorMenuTemplate}\n                reactDndType=\"GD_EVENTS_BASED_BEHAVIOR\"\n              />\n            )}\n          </AutoSizer>\n        </div>\n        <SearchBar\n          value={searchText}\n          onRequestSearch={() => {}}\n          onChange={text =>\n            this.setState({\n              searchText: text,\n            })\n          }\n        />\n      </Background>\n    );\n  }\n}\n","//@flow\nimport { mapVector } from '../Utils/MapFor';\n\nexport const enumerateEventsBasedBehaviors = (\n  eventsFunctionsContainer: gdEventsBasedBehaviorsList\n): Array<gdEventsBasedBehavior> =>\n  mapVector(\n    eventsFunctionsContainer,\n    eventsBasedBehavior => eventsBasedBehavior\n  );\n\nexport const filterEventsBasedBehaviorsList = (\n  list: Array<gdEventsBasedBehavior>,\n  searchText: string\n): Array<gdEventsBasedBehavior> => {\n  if (!searchText) return list;\n\n  const lowercaseSearchText = searchText.toLowerCase();\n\n  return list.filter(\n    (item: any) =>\n      item\n        .getName()\n        .toLowerCase()\n        .indexOf(lowercaseSearchText) !== -1\n  );\n};\n","// @flow\nimport { Trans } from '@lingui/macro';\n\nimport React, { Component } from 'react';\nimport { Line, Spacer } from '../../../../UI/Grid';\nimport ImagePreview from '../../../../ResourcesList/ResourcePreview/ImagePreview';\nimport Replay from '@material-ui/icons/Replay';\nimport PlayArrow from '@material-ui/icons/PlayArrow';\nimport Pause from '@material-ui/icons/Pause';\nimport Timer from '@material-ui/icons/Timer';\nimport TextField from '../../../../UI/TextField';\nimport FlatButton from '../../../../UI/FlatButton';\nimport Text from '../../../../UI/Text';\n\ntype Props = {|\n  spritesContainer: Object,\n  resourcesLoader: Object,\n  project: Object,\n  timeBetweenFrames: number,\n  onChangeTimeBetweenFrames: number => void,\n|};\n\ntype State = {|\n  currentFrameIndex: number,\n  currentFrameElapsedTime: number,\n  paused: boolean,\n  fps: number,\n|};\n\nconst styles = {\n  timeField: {\n    width: 75,\n  },\n  timeIcon: {\n    paddingLeft: 6,\n    paddingRight: 8,\n  },\n};\n\nexport default class AnimationPreview extends Component<Props, State> {\n  state = {\n    currentFrameIndex: 0,\n    currentFrameElapsedTime: 0,\n    paused: false,\n    fps: Math.round(1 / this.props.timeBetweenFrames),\n  };\n\n  nextUpdate = null;\n\n  componentDidMount() {\n    this.nextUpdate = requestAnimationFrame(this._updateAnimation);\n  }\n\n  componentWillUnmount() {\n    if (this.nextUpdate) cancelAnimationFrame(this.nextUpdate);\n  }\n\n  replay = () =>\n    this.setState({\n      currentFrameIndex: 0,\n      currentFrameElapsedTime: 0,\n      paused: false,\n    });\n\n  play = () =>\n    this.setState({\n      paused: false,\n    });\n\n  pause = () =>\n    this.setState({\n      paused: true,\n    });\n\n  _updateAnimation = () => {\n    const animationSpeedScale = 1;\n\n    const { spritesContainer, timeBetweenFrames } = this.props;\n    const { currentFrameIndex, currentFrameElapsedTime, paused } = this.state;\n\n    const elapsedTime = 1 / 60;\n    let newFrameIndex = currentFrameIndex;\n    let newFrameElapsedTime = currentFrameElapsedTime;\n    newFrameElapsedTime += paused ? 0 : elapsedTime * animationSpeedScale;\n\n    if (newFrameElapsedTime > timeBetweenFrames) {\n      const count = Math.floor(newFrameElapsedTime / timeBetweenFrames);\n      newFrameIndex += count;\n      newFrameElapsedTime = newFrameElapsedTime - count * timeBetweenFrames;\n      if (newFrameElapsedTime < 0) newFrameElapsedTime = 0;\n    }\n\n    if (newFrameIndex >= spritesContainer.getSpritesCount()) {\n      newFrameIndex = spritesContainer.isLooping()\n        ? newFrameIndex % spritesContainer.getSpritesCount()\n        : spritesContainer.getSpritesCount() - 1;\n    }\n    if (newFrameIndex < 0) newFrameIndex = 0; //May happen if there is no frame.\n\n    this.setState({\n      currentFrameIndex: newFrameIndex,\n      currentFrameElapsedTime: newFrameElapsedTime,\n    });\n    this.nextUpdate = requestAnimationFrame(this._updateAnimation);\n  };\n\n  render() {\n    const {\n      spritesContainer,\n      resourcesLoader,\n      project,\n      timeBetweenFrames,\n      onChangeTimeBetweenFrames,\n    } = this.props;\n    const { currentFrameIndex, paused, fps } = this.state;\n\n    const hasValidSprite =\n      currentFrameIndex < spritesContainer.getSpritesCount();\n    const sprite = hasValidSprite\n      ? spritesContainer.getSprite(currentFrameIndex)\n      : null;\n\n    return (\n      <div>\n        <ImagePreview\n          resourceName={sprite ? sprite.getImageName() : ''}\n          resourcesLoader={resourcesLoader}\n          project={project}\n        />\n        <Line noMargin alignItems=\"center\">\n          <Text>\n            <Trans>FPS:</Trans>\n          </Text>\n          <Spacer />\n          <TextField\n            margin=\"none\"\n            value={fps}\n            onChange={(e, text) => {\n              const fps = parseFloat(text);\n              if (fps > 0) {\n                this.setState({ fps });\n                onChangeTimeBetweenFrames(parseFloat((1 / fps).toFixed(4)));\n                this.replay();\n              }\n            }}\n            id=\"direction-time-between-frames\"\n            type=\"number\"\n            step={1}\n            min={1}\n            max={100}\n            style={styles.timeField}\n            autoFocus={true}\n          />\n          <Timer style={styles.timeIcon} />\n          <TextField\n            margin=\"none\"\n            value={timeBetweenFrames}\n            onChange={(e, text) => {\n              const time = parseFloat(text);\n              if (time > 0) {\n                this.setState({ fps: Math.round(1 / time) });\n                onChangeTimeBetweenFrames(time);\n                this.replay();\n              }\n            }}\n            id=\"direction-time-between-frames\"\n            type=\"number\"\n            step={0.005}\n            precision={2}\n            min={0.01}\n            max={5}\n            style={styles.timeField}\n          />\n          <FlatButton\n            icon={<Replay />}\n            label={<Trans>Replay</Trans>}\n            onClick={this.replay}\n          />\n          <FlatButton\n            icon={paused ? <PlayArrow /> : <Pause />}\n            label={paused ? 'Play' : 'Pause'}\n            onClick={paused ? this.play : this.pause}\n          />\n        </Line>\n      </div>\n    );\n  }\n}\n","// @flow\nimport { Trans } from '@lingui/macro';\n\nimport React, { Component } from 'react';\nimport Timer from '@material-ui/icons/Timer';\nimport FlatButton from '../../../UI/FlatButton';\nimport Checkbox from '../../../UI/Checkbox';\nimport Brush from '@material-ui/icons/Brush';\nimport PlayArrow from '@material-ui/icons/PlayArrow';\nimport TextField from '../../../UI/TextField';\nimport Dialog from '../../../UI/Dialog';\nimport AnimationPreview from './AnimationPreview';\nimport ResourcesLoader from '../../../ResourcesLoader';\nimport { type ResourceExternalEditor } from '../../../ResourcesList/ResourceExternalEditor.flow';\nimport { ResponsiveWindowMeasurer } from '../../../UI/Reponsive/ResponsiveWindowMeasurer';\n\nconst styles = {\n  container: {\n    paddingLeft: 12,\n    paddingRight: 12,\n    display: 'flex',\n    alignItems: 'center',\n  },\n  timeField: {\n    width: 75,\n  },\n  timeIcon: {\n    paddingLeft: 6,\n    paddingRight: 6,\n  },\n  repeatContainer: {\n    width: 130,\n  },\n  spacer: {\n    width: 16,\n  },\n};\n\nconst formatTime = (time: number) => Number(time.toFixed(6));\n\ntype Props = {|\n  direction: gdDirection,\n  resourcesLoader: typeof ResourcesLoader,\n  project: gdProject,\n  resourceExternalEditors: Array<ResourceExternalEditor>,\n  onEditWith: ResourceExternalEditor => void,\n|};\n\ntype State = {|\n  timeBetweenFrames: number,\n  timeError: boolean,\n  previewOpen: boolean,\n|};\n\nexport default class DirectionTools extends Component<Props, State> {\n  state = {\n    timeBetweenFrames: formatTime(this.props.direction.getTimeBetweenFrames()),\n    timeError: false,\n    previewOpen: false,\n  };\n\n  componentWillReceiveProps(newProps: Props) {\n    this.setState({\n      timeBetweenFrames: formatTime(\n        this.props.direction.getTimeBetweenFrames()\n      ),\n      timeError: false,\n    });\n  }\n\n  saveTimeBetweenFrames = () => {\n    const { direction } = this.props;\n\n    const newTime = Math.max(parseFloat(this.state.timeBetweenFrames), 0.00001);\n    const newTimeIsValid = !isNaN(newTime);\n\n    if (newTimeIsValid) direction.setTimeBetweenFrames(newTime);\n    this.setState({\n      timeBetweenFrames: formatTime(\n        this.props.direction.getTimeBetweenFrames()\n      ),\n      timeError: newTimeIsValid,\n    });\n  };\n\n  setLooping = (check: boolean) => {\n    const { direction } = this.props;\n\n    direction.setLoop(!!check);\n    this.forceUpdate();\n  };\n\n  openPreview = (open: boolean) => {\n    this.setState({\n      previewOpen: open,\n    });\n    if (!open) {\n      this.saveTimeBetweenFrames();\n    }\n  };\n\n  render() {\n    const {\n      direction,\n      resourcesLoader,\n      project,\n      resourceExternalEditors,\n      onEditWith,\n    } = this.props;\n\n    const imageResourceExternalEditors = resourceExternalEditors.filter(\n      ({ kind }) => kind === 'image'\n    );\n\n    return (\n      <div style={styles.container}>\n        <ResponsiveWindowMeasurer>\n          {windowWidth =>\n            windowWidth !== 'small' &&\n            !!imageResourceExternalEditors.length && (\n              <FlatButton\n                label={imageResourceExternalEditors[0].displayName}\n                icon={<Brush />}\n                onClick={() => onEditWith(imageResourceExternalEditors[0])}\n              />\n            )\n          }\n        </ResponsiveWindowMeasurer>\n        <FlatButton\n          label={<Trans>Preview</Trans>}\n          icon={<PlayArrow />}\n          onClick={() => this.openPreview(true)}\n        />\n        <Timer style={styles.timeIcon} />\n        <TextField\n          value={this.state.timeBetweenFrames}\n          onChange={(e, text) =>\n            this.setState({ timeBetweenFrames: parseFloat(text) || 0 })\n          }\n          onBlur={() => this.saveTimeBetweenFrames()}\n          id=\"direction-time-between-frames\"\n          margin=\"none\"\n          style={styles.timeField}\n          type=\"number\"\n          step={0.005}\n          precision={2}\n          min={0.01}\n          max={5}\n        />\n        <span style={styles.spacer} />\n        <div style={styles.repeatContainer}>\n          <Checkbox\n            checked={direction.isLooping()}\n            label={<Trans>Loop</Trans>}\n            onCheck={(e, check) => this.setLooping(check)}\n          />\n        </div>\n        {this.state.previewOpen && (\n          <Dialog\n            actions={\n              <FlatButton\n                label={<Trans>OK</Trans>}\n                primary\n                onClick={() => this.openPreview(false)}\n                key=\"ok\"\n              />\n            }\n            noMargin\n            cannotBeDismissed={false}\n            onRequestClose={() => this.openPreview(false)}\n            open={this.state.previewOpen}\n          >\n            <AnimationPreview\n              spritesContainer={direction}\n              resourcesLoader={resourcesLoader}\n              project={project}\n              timeBetweenFrames={this.state.timeBetweenFrames}\n              onChangeTimeBetweenFrames={text =>\n                this.setState({ timeBetweenFrames: text })\n              }\n            />\n          </Dialog>\n        )}\n      </div>\n    );\n  }\n}\n","// @flow\nimport * as React from 'react';\nimport classNames from 'classnames';\nimport { largeSelectedArea, largeSelectableArea } from '../ClassNames';\nimport { type EventRendererProps } from './EventRenderer';\n\nexport default class UnknownEvent extends React.Component<\n  EventRendererProps,\n  *\n> {\n  render() {\n    return (\n      <p\n        className={classNames({\n          [largeSelectableArea]: true,\n          [largeSelectedArea]: this.props.selected,\n        })}\n      >\n        {'Unknown event of type ' + this.props.event.getType()}\n      </p>\n    );\n  }\n}\n","import UnknownEvent from './Renderers/UnknownEvent';\nimport StandardEvent from './Renderers/StandardEvent';\nimport GroupEvent from './Renderers/GroupEvent';\nimport CommentEvent from './Renderers/CommentEvent';\nimport ForEachEvent from './Renderers/ForEachEvent';\nimport RepeatEvent from './Renderers/RepeatEvent';\nimport WhileEvent from './Renderers/WhileEvent';\nimport LinkEvent from './Renderers/LinkEvent';\nimport JsCodeEvent from './Renderers/JsCodeEvent';\n\nexport default {\n  components: {\n    unknownEvent: UnknownEvent,\n    'BuiltinCommonInstructions::Standard': StandardEvent,\n    'BuiltinCommonInstructions::Group': GroupEvent,\n    'BuiltinCommonInstructions::Comment': CommentEvent,\n    'BuiltinCommonInstructions::ForEach': ForEachEvent,\n    'BuiltinCommonInstructions::Repeat': RepeatEvent,\n    'BuiltinCommonInstructions::While': WhileEvent,\n    'BuiltinCommonInstructions::Link': LinkEvent,\n    'BuiltinCommonInstructions::JsCode': JsCodeEvent,\n  },\n  getEventComponent: function(event) {\n    if (this.components.hasOwnProperty(event.getType()))\n      return this.components[event.getType()];\n    else return this.components.unknownEvent;\n  },\n  registerEvent: function(eventType, renderFunction) {\n    if (!this.components.hasOwnProperty(eventType)) {\n      console.warn(\n        'Tried to register renderer for events \"' +\n          eventType +\n          '\", but a renderer already exists.'\n      );\n      return;\n    }\n\n    this.components[eventType] = renderFunction;\n  },\n};\n","//@flow\nimport { findGDJS } from '../GameEngineFinder/LocalGDJSFinder';\nimport optionalRequire from '../Utils/OptionalRequire';\nconst fs = optionalRequire('fs');\nconst path = optionalRequire('path');\n\n// TODO: Replace the reading into files by an automatic generation of a .d.ts\n// using TypeScript from the game engine sources, and have a script integrate the .d.ts\n// into newIDE sources\nexport const setupAutocompletions = (monaco: any) => {\n  const importAllJsFilesFromFolder = (folderPath: string) =>\n    fs.readdir(folderPath, (error: ?Error, filenames: Array<string>) => {\n      if (error) {\n        console.error(\n          'Unable to read GDJS files for setting up autocompletions:',\n          error\n        );\n        return;\n      }\n\n      filenames.forEach(filename => {\n        if (filename.endsWith('.js')) {\n          const fullPath = path.join(folderPath, filename);\n          fs.readFile(fullPath, 'utf8', (fileError, content) => {\n            if (fileError) {\n              console.error(\n                `Unable to read ${fullPath} for setting up autocompletions:`,\n                fileError\n              );\n              return;\n            }\n\n            monaco.languages.typescript.javascriptDefaults.addExtraLib(\n              content,\n              fullPath\n            );\n          });\n        }\n      });\n    });\n\n  findGDJS().then(({ gdjsRoot }) => {\n    const runtimePath = path.join(gdjsRoot, 'Runtime');\n    const extensionsPath = path.join(runtimePath, 'Extensions');\n    const eventToolsPath = path.join(runtimePath, 'events-tools');\n\n    importAllJsFilesFromFolder(runtimePath);\n    importAllJsFilesFromFolder(eventToolsPath);\n    fs.readdir(extensionsPath, (error: ?Error, folderNames: Array<string>) => {\n      if (error) {\n        console.error(\n          'Unable to read Extensions folders for setting up autocompletions:',\n          error\n        );\n        return;\n      }\n\n      folderNames\n        .filter(\n          folderName =>\n            !folderName.endsWith('.txt') &&\n            !folderName.endsWith('.md') &&\n            !folderName.endsWith('.gitignore')\n        )\n        .forEach(folderName =>\n          importAllJsFilesFromFolder(path.join(extensionsPath, folderName))\n        );\n    });\n\n    monaco.languages.typescript.javascriptDefaults.addExtraLib(\n      `\n/** Represents the scene being played. */\nvar runtimeScene = new gdjs.RuntimeScene();\n\n/** The instances of objects that are passed to your JavaScript function.\n * @type {gdjs.RuntimeObject[]}\n */\nvar objects = new gdjs.RuntimeScene();\n\n/**\n * Get the list of instances of the specified object.\n *\n * @callback GetObjectsFunction\n * @param {string} objectName The name of the object for which instances must be returned.\n * @return {gdjs.RuntimeObject[]} Instances of the specified object.\n */\n\n/**\n * Get the Hashtable containing the lists of instances of the specified object.\n *\n * You can alter the list and this will alter the objects picked for the next conditions/actions/events.\n * If you don't need this, prefer using \\`getObjects\\`.\n *\n * @callback GetObjectsListsFunction\n * @param {string} objectName The name of the object for which instances must be returned.\n * @return {?Hashtable} Hashtable containing the lists of instances (keys are object names in the current context), or \\`null\\` if not found\n */\n\n/**\n * Create a new object from its name. The object is added to the instances\n * living on the scene.\n *\n * @callback CreateObjectFunction\n * @param {string} objectName The name of the object to be created\n * @return {gdjs.RuntimeObject} The created object\n */\n\n/**\n * Get the \"real\" behavior name, that can be used with \\`getBehavior\\`. For example:\n * \\`object.getBehavior(eventsFunctionContext.getBehaviorName(\"MyBehavior\"))\\`\n *\n * @callback GetBehaviorNameFunction\n * @param {string} behaviorName The name of the behavior, as specified in the parameters of the function.\n * @return {string} The name that can be passed to \\`getBehavior\\`.\n */\n\n/**\n * Get the value (string or number) of an argument that was passed to the events function.\n * To get objects, use \\`getObjects\\`.\n *\n * @callback GetArgumentFunction\n * @param {string} argumentName The name of the argument, as specified in the parameters of the function.\n * @return {string|number} The string or number passed for this argument\n */\n\n/** Represents the context of the events function (or the behavior method),\n * if any. If the JS code is running in a scene, this will be undefined (so you can't use this in a scene).\n *\n * @type {?{getObjects: GetObjectsFunction, getObjectsLists: GetObjectsListsFunction, getBehaviorName: GetBehaviorNameFunction, createObject: CreateObjectFunction, getArgument: GetArgumentFunction, returnValue: boolean | number | string}}\n */\nvar eventsFunctionContext = {};\n`,\n      'this-mock-the-context-of-events.js'\n    );\n  });\n};\n","// @flow\nimport { Trans } from '@lingui/macro';\n\nimport * as React from 'react';\nimport { setupAutocompletions } from './LocalCodeEditorAutocompletions';\nimport PlaceholderLoader from '../UI/PlaceholderLoader';\nimport RaisedButton from '../UI/RaisedButton';\nimport Text from '../UI/Text';\nimport PreferencesContext from '../MainFrame/Preferences/PreferencesContext';\nimport { getAllThemes } from './Theme';\n\nexport type State = {|\n  MonacoEditor: ?any,\n  error: ?Error,\n|};\nexport type Props = {|\n  value: string,\n  onChange: string => void,\n  width: number,\n  onEditorMounted?: () => void,\n|};\n\nconst monacoEditorOptions = {\n  scrollBeyondLastLine: false,\n  minimap: {\n    enabled: false,\n  },\n};\n\n// There is only a single instance of monaco living, keep track\n// of if its initialized or not.\nlet monacoCompletionsInitialized = false;\nlet monacoThemesInitialized = false;\n\nexport class CodeEditor extends React.Component<Props, State> {\n  state = {\n    MonacoEditor: null,\n    error: null,\n  };\n\n  setupEditorThemes = (monaco: any) => {\n    if (!monacoThemesInitialized) {\n      monacoThemesInitialized = true;\n\n      getAllThemes().forEach(codeEditorTheme => {\n        // Builtin themes don't have themeData, don't redefine them.\n        if (codeEditorTheme.themeData) {\n          monaco.editor.defineTheme(\n            codeEditorTheme.themeName,\n            codeEditorTheme.themeData\n          );\n        }\n      });\n    }\n  };\n\n  setupEditorCompletions = (editor: any, monaco: any) => {\n    if (!monacoCompletionsInitialized) {\n      monacoCompletionsInitialized = true;\n\n      monaco.languages.typescript.javascriptDefaults.setCompilerOptions({\n        // noLib: true,\n        target: monaco.languages.typescript.ScriptTarget.ES6,\n        allowNonTsExtensions: true,\n        allowJs: true,\n        checkJs: true,\n      });\n      setupAutocompletions(monaco);\n    }\n\n    if (this.props.onEditorMounted) this.props.onEditorMounted();\n  };\n\n  componentDidMount() {\n    this.loadMonacoEditor();\n  }\n\n  handleLoadError(error: Error) {\n    this.setState({\n      error,\n    });\n  }\n\n  loadMonacoEditor() {\n    this.setState({\n      error: null,\n    });\n    import(/* webpackChunkName: \"react-monaco-editor\" */ 'react-monaco-editor')\n      .then(module =>\n        this.setState({\n          MonacoEditor: module.default,\n        })\n      )\n      .catch(this.handleLoadError);\n  }\n\n  _handleContextMenu = (event: SyntheticEvent<>) => {\n    // Prevent right click to bubble up and trigger the context menu\n    // of the event.\n    event.preventDefault();\n    event.stopPropagation();\n  };\n\n  render() {\n    const { MonacoEditor, error } = this.state;\n    if (error) {\n      return (\n        <React.Fragment>\n          <Text>\n            <Trans>Unable to load the code editor</Trans>\n          </Text>\n          <RaisedButton\n            label={<Trans>Retry</Trans>}\n            onClick={this.loadMonacoEditor}\n          />\n        </React.Fragment>\n      );\n    }\n\n    if (!MonacoEditor) {\n      return <PlaceholderLoader />;\n    }\n\n    return (\n      <div onContextMenu={this._handleContextMenu}>\n        <PreferencesContext.Consumer>\n          {({ values }) => (\n            <MonacoEditor\n              width={this.props.width || 600}\n              height=\"400\"\n              language=\"javascript\"\n              theme={values.codeEditorThemeName}\n              value={this.props.value}\n              onChange={this.props.onChange}\n              editorWillMount={this.setupEditorThemes}\n              editorDidMount={this.setupEditorCompletions}\n              options={monacoEditorOptions}\n            />\n          )}\n        </PreferencesContext.Consumer>\n      </div>\n    );\n  }\n}\n","// @flow\nimport { Trans } from '@lingui/macro';\nimport { type EventsScope } from '../../../InstructionOrExpression/EventsScope.flow';\nimport * as React from 'react';\nimport { mapFor } from '../../../Utils/MapFor';\nimport EmptyMessage from '../../../UI/EmptyMessage';\n\nexport type ParameterValues = Array<string>;\n\nconst styles = {\n  container: {\n    display: 'flex',\n    flexDirection: 'column',\n    flex: 1,\n  },\n};\n\ntype Props = {|\n  project?: gdProject,\n  scope: EventsScope,\n  globalObjectsContainer: gdObjectsContainer,\n  objectsContainer: gdObjectsContainer,\n  expressionMetadata: gdExpressionMetadata,\n  parameterValues: ParameterValues,\n  onChangeParameter: (index: number, value: string) => void,\n  parameterRenderingService?: {\n    components: any,\n    getParameterComponent: (type: string) => any,\n  },\n|};\ntype State = {||};\n\nexport default class ExpressionParametersEditor extends React.Component<\n  Props,\n  State\n> {\n  static getNonCodeOnlyParametersCount(\n    expressionMetadata: gdExpressionMetadata\n  ) {\n    return mapFor(0, expressionMetadata.getParametersCount(), i => {\n      const parameterMetadata = expressionMetadata.getParameter(i);\n      return !parameterMetadata.isCodeOnly();\n    }).filter(isVisible => isVisible).length;\n  }\n\n  render() {\n    const {\n      expressionMetadata,\n      parameterValues,\n      project,\n      scope,\n      globalObjectsContainer,\n      objectsContainer,\n      parameterRenderingService,\n    } = this.props;\n\n    if (!parameterRenderingService) {\n      console.error(\n        'Missing parameterRenderingService for ExpressionParametersEditor'\n      );\n      return null;\n    }\n\n    // Create an object mimicking Instruction interface so that it can be used by\n    // ParameterFields components.\n    const parametersCount = expressionMetadata.getParametersCount();\n    const expression = {\n      getParametersCount: () => parametersCount,\n      getParameter: index => {\n        return parameterValues[index] || '';\n      },\n    };\n\n    return (\n      <div style={styles.container}>\n        {mapFor(0, expressionMetadata.getParametersCount(), i => {\n          const parameterMetadata = expressionMetadata.getParameter(i);\n          const ParameterComponent = parameterRenderingService.getParameterComponent(\n            parameterMetadata.getType()\n          );\n\n          if (parameterMetadata.isCodeOnly()) return null;\n          return (\n            <ParameterComponent\n              expressionMetadata={expressionMetadata}\n              expression={expression}\n              parameterMetadata={parameterMetadata}\n              parameterIndex={i}\n              value={parameterValues[i]}\n              onChange={value => this.props.onChangeParameter(i, value)}\n              project={project}\n              scope={scope}\n              globalObjectsContainer={globalObjectsContainer}\n              objectsContainer={objectsContainer}\n              key={i}\n              parameterRenderingService={parameterRenderingService}\n            />\n          );\n        })}\n        {ExpressionParametersEditor.getNonCodeOnlyParametersCount(\n          expressionMetadata\n        ) === 0 && (\n          <EmptyMessage>\n            <Trans>There is nothing to configure.</Trans>\n          </EmptyMessage>\n        )}\n      </div>\n    );\n  }\n}\n","// @flow\nimport { Trans } from '@lingui/macro';\nimport { type EventsScope } from '../../../InstructionOrExpression/EventsScope.flow';\nimport React, { Component } from 'react';\nimport FlatButton from '../../../UI/FlatButton';\nimport ExpressionParametersEditor from './ExpressionParametersEditor';\nimport Dialog from '../../../UI/Dialog';\nimport { Column } from '../../../UI/Grid';\n\nexport type ParameterValues = Array<string>;\n\nconst styles = {\n  minHeightContainer: {\n    // Use a minimum height that is large enough so that ExpressionSelector in\n    // GenericExpressionField can fit and display entirely.\n    minHeight: 300,\n    flex: 1,\n    flexDirection: 'column',\n  },\n};\n\ntype Props = {\n  project?: gdProject,\n  scope: EventsScope,\n  globalObjectsContainer: gdObjectsContainer,\n  objectsContainer: gdObjectsContainer,\n  expressionMetadata: gdExpressionMetadata,\n  onDone: ParameterValues => void,\n  onRequestClose: () => void,\n  parameterRenderingService?: {\n    components: any,\n    getParameterComponent: (type: string) => any,\n  },\n};\n\ntype State = {\n  parameterValues: ParameterValues,\n};\n\nexport default class ExpressionParametersEditorDialog extends Component<\n  Props,\n  State\n> {\n  state = {\n    parameterValues: Array(\n      this.props.expressionMetadata.getParametersCount()\n    ).fill(''),\n  };\n\n  render() {\n    const {\n      project,\n      scope,\n      globalObjectsContainer,\n      objectsContainer,\n      expressionMetadata,\n      parameterRenderingService,\n    } = this.props;\n\n    return (\n      <Dialog\n        title={<Trans>Enter the expression parameters</Trans>}\n        cannotBeDismissed={true}\n        open\n        actions={\n          <FlatButton\n            key=\"apply\"\n            label={<Trans>Apply</Trans>}\n            primary\n            onClick={() => this.props.onDone(this.state.parameterValues)}\n          />\n        }\n        noMargin\n        onRequestClose={this.props.onRequestClose}\n      >\n        <Column>\n          <div style={styles.minHeightContainer}>\n            <ExpressionParametersEditor\n              project={project}\n              scope={scope}\n              globalObjectsContainer={globalObjectsContainer}\n              objectsContainer={objectsContainer}\n              expressionMetadata={expressionMetadata}\n              parameterValues={this.state.parameterValues}\n              onChangeParameter={(editedIndex, value) => {\n                this.setState({\n                  parameterValues: this.state.parameterValues.map(\n                    (oldValue, index) =>\n                      index === editedIndex ? value : oldValue\n                  ),\n                });\n              }}\n              parameterRenderingService={parameterRenderingService}\n            />\n          </div>\n        </Column>\n      </Dialog>\n    );\n  }\n}\n","// @flow\nimport { Trans } from '@lingui/macro';\nimport * as React from 'react';\nimport SemiControlledTextField from '../UI/SemiControlledTextField';\nimport InlineCheckbox from '../UI/InlineCheckbox';\nimport ResourceSelector from '../ResourcesList/ResourceSelector';\nimport ResourcesLoader from '../ResourcesLoader';\nimport Subheader from '../UI/Subheader';\nimport FlatButton from '../UI/FlatButton';\nimport SelectField from '../UI/SelectField';\nimport SelectOption from '../UI/SelectOption';\nimport Edit from '@material-ui/icons/Edit';\nimport ColorField from '../UI/ColorField';\nimport { MarkdownText } from '../UI/MarkdownText';\nimport { hexToRGBColor } from '../Utils/ColorTransformer';\nimport FormHelperText from '@material-ui/core/FormHelperText';\n\nimport {\n  type ResourceKind,\n  type ResourceSource,\n  type ChooseResourceFunction,\n} from '../ResourcesList/ResourceSource.flow';\nimport { type ResourceExternalEditor } from '../ResourcesList/ResourceExternalEditor.flow';\nimport {\n  TextFieldWithButtonLayout,\n  ResponsiveLineStackLayout,\n} from '../UI/Layout';\nimport RaisedButton from '../UI/RaisedButton';\nimport { Column } from '../UI/Grid';\nimport UnsavedChangesContext, {\n  type UnsavedChanges,\n} from '../MainFrame/UnsavedChangesContext';\n\n// An \"instance\" here is the objects for which properties are shown\nexport type Instance = Object; // This could be improved using generics.\nexport type Instances = Array<Instance>;\n\n// \"Value\" fields are fields displayed in the properties.\nexport type ValueFieldCommonProperties = {|\n  name: string,\n  getLabel?: Instance => string,\n  getDescription?: Instance => string,\n  getExtraDescription?: Instance => string,\n  disabled?: boolean,\n  onEditButtonClick?: Instance => void,\n  onClick?: Instance => void,\n|};\n\n// \"Primitive\" value fields are \"simple\" fields.\nexport type PrimitiveValueField =\n  | {|\n      valueType: 'number',\n      getValue: Instance => number,\n      setValue: (instance: Instance, newValue: number) => void,\n      ...ValueFieldCommonProperties,\n    |}\n  | {|\n      valueType: 'string',\n      getValue: Instance => string,\n      setValue: (instance: Instance, newValue: string) => void,\n      getChoices?: ?() => Array<{| value: string, label: string |}>,\n      ...ValueFieldCommonProperties,\n    |}\n  | {|\n      valueType: 'boolean',\n      getValue: Instance => boolean,\n      setValue: (instance: Instance, newValue: boolean) => void,\n      ...ValueFieldCommonProperties,\n    |}\n  | {|\n      valueType: 'color',\n      getValue: Instance => string,\n      setValue: (instance: Instance, newValue: string) => void,\n      ...ValueFieldCommonProperties,\n    |}\n  | {|\n      valueType: 'textarea',\n      getValue: Instance => string,\n      setValue: (instance: Instance, newValue: string) => void,\n      ...ValueFieldCommonProperties,\n    |};\n\n// \"Resource\" fields are showing a resource selector.\ntype ResourceField = {|\n  valueType: 'resource',\n  resourceKind: ResourceKind,\n  getValue: Instance => string,\n  setValue: (instance: Instance, newValue: string) => void,\n  ...ValueFieldCommonProperties,\n|};\n\n// A value field is a primitive or a resource.\nexport type ValueField = PrimitiveValueField | ResourceField;\n\n// A field can be a primitive, a resource or a list of fields\nexport type Field =\n  | PrimitiveValueField\n  | ResourceField\n  | {|\n      name: string,\n      type: 'row' | 'column',\n      children: Array<Object>,\n    |};\n\n// The schema is the tree of all fields.\nexport type Schema = Array<Field>;\n\n// Mandatory props in any case when using the component\ntype MandatoryProps = {|\n  onInstancesModified?: Instances => void,\n  instances: Instances,\n  schema: Schema,\n  mode?: 'column' | 'row',\n\n  // If set, render the \"extra\" description content from fields\n  // (see getExtraDescription).\n  renderExtraDescriptionText?: (extraDescription: string) => string,\n  unsavedChanges?: UnsavedChanges,\n|};\n\ntype Props =\n  // Mandatory props in all cases:\n  | MandatoryProps\n  // Props to be used when you want to display resources:\n  | {|\n      ...MandatoryProps,\n      project: gdProject,\n      resourceSources: Array<ResourceSource>,\n      onChooseResource: ChooseResourceFunction,\n      resourceExternalEditors: Array<ResourceExternalEditor>,\n    |};\n\nconst styles = {\n  columnContainer: {\n    display: 'flex',\n    flexDirection: 'column',\n  },\n  fieldContainer: {\n    flex: 1,\n    display: 'flex',\n    flexDirection: 'row',\n    alignItems: 'baseline',\n  },\n  field: {\n    flex: 1,\n    width: 'auto',\n  },\n  subPropertiesEditorContainer: {\n    marginLeft: 15,\n  },\n  subHeader: {\n    paddingLeft: 0,\n  },\n};\n\nconst getFieldValue = (\n  instances: Instances,\n  field: ValueField,\n  defaultValue?: any\n): any => {\n  if (!instances[0]) {\n    console.log(\n      'getFieldValue was called with an empty list of instances (or containing undefined). This is a bug that should be fixed'\n    );\n    return defaultValue;\n  }\n\n  let value = field.getValue(instances[0]);\n  for (var i = 1; i < instances.length; ++i) {\n    if (value !== field.getValue(instances[i])) {\n      if (typeof defaultValue !== 'undefined') value = defaultValue;\n      break;\n    }\n  }\n\n  return value;\n};\n\nconst getFieldLabel = (instances: Instances, field: ValueField): any => {\n  if (!instances[0]) {\n    console.log(\n      'PropertiesEditor._getFieldLabel was called with an empty list of instances (or containing undefined). This is a bug that should be fixed'\n    );\n    return field.name;\n  }\n\n  if (field.getLabel) return field.getLabel(instances[0]);\n\n  return field.name;\n};\n\nexport default class PropertiesEditor extends React.Component<Props, {||}> {\n  _onInstancesModified = (instances: Instances) => {\n    // This properties editor is dealing with fields that are\n    // responsible to update their state (see field.setValue).\n\n    if (this.props.unsavedChanges)\n      this.props.unsavedChanges.triggerUnsavedChanges();\n    if (this.props.onInstancesModified)\n      this.props.onInstancesModified(instances);\n    else this.forceUpdate();\n  };\n\n  _getFieldDescription = (instances: Instances, field: ValueField): ?string => {\n    const { renderExtraDescriptionText } = this.props;\n    if (!instances[0]) {\n      console.log(\n        'PropertiesEditor._getFieldDescription was called with an empty list of instances (or containing undefined). This is a bug that should be fixed'\n      );\n      return undefined;\n    }\n\n    const descriptions: Array<string> = [];\n    if (field.getDescription)\n      descriptions.push(field.getDescription(instances[0]));\n    if (renderExtraDescriptionText && field.getExtraDescription)\n      descriptions.push(\n        renderExtraDescriptionText(field.getExtraDescription(instances[0]))\n      );\n\n    return descriptions.join('\\n') || undefined;\n  };\n\n  _renderInputField = (field: ValueField) => {\n    if (field.name === 'PLEASE_ALSO_SHOW_EDIT_BUTTON_THANKS') return null; // This special property was used in GDevelop 4 IDE to ask for a Edit button to be shown, ignore it.\n\n    if (field.valueType === 'boolean') {\n      const { setValue } = field;\n      const description = this._getFieldDescription(\n        this.props.instances,\n        field\n      );\n\n      return (\n        <InlineCheckbox\n          label={\n            !description ? (\n              getFieldLabel(this.props.instances, field)\n            ) : (\n              <React.Fragment>\n                {getFieldLabel(this.props.instances, field)}{' '}\n                <FormHelperText style={{ display: 'inline' }}>\n                  <MarkdownText source={description} />\n                </FormHelperText>\n              </React.Fragment>\n            )\n          }\n          key={field.name}\n          checked={getFieldValue(this.props.instances, field)}\n          onCheck={(event, newValue) => {\n            this.props.instances.forEach(i => setValue(i, !!newValue));\n            this._onInstancesModified(this.props.instances);\n          }}\n          disabled={field.disabled}\n        />\n      );\n    } else if (field.valueType === 'number') {\n      const { setValue } = field;\n      return (\n        <SemiControlledTextField\n          value={getFieldValue(this.props.instances, field)}\n          key={field.name}\n          id={field.name}\n          floatingLabelText={getFieldLabel(this.props.instances, field)}\n          floatingLabelFixed\n          helperMarkdownText={this._getFieldDescription(\n            this.props.instances,\n            field\n          )}\n          onChange={newValue => {\n            this.props.instances.forEach(i =>\n              setValue(i, parseFloat(newValue) || 0)\n            );\n            this._onInstancesModified(this.props.instances);\n          }}\n          type=\"number\"\n          style={styles.field}\n          disabled={field.disabled}\n        />\n      );\n    } else if (field.valueType === 'color') {\n      const { setValue } = field;\n      return (\n        <ColorField\n          key={field.name}\n          id={field.name}\n          floatingLabelText={getFieldLabel(this.props.instances, field)}\n          helperMarkdownText={this._getFieldDescription(\n            this.props.instances,\n            field\n          )}\n          disableAlpha\n          fullWidth\n          color={hexToRGBColor(getFieldValue(this.props.instances, field))}\n          onChangeComplete={color => {\n            this.props.instances.forEach(i =>\n              setValue(i, color.hex || '#000000')\n            );\n            this._onInstancesModified(this.props.instances);\n          }}\n        />\n      );\n    } else if (field.valueType === 'textarea') {\n      const { setValue } = field;\n      return (\n        <SemiControlledTextField\n          key={field.name}\n          id={field.name}\n          onChange={text => {\n            this.props.instances.forEach(i => setValue(i, text || ''));\n            this._onInstancesModified(this.props.instances);\n          }}\n          value={getFieldValue(this.props.instances, field)}\n          floatingLabelText={getFieldLabel(this.props.instances, field)}\n          floatingLabelFixed\n          helperMarkdownText={this._getFieldDescription(\n            this.props.instances,\n            field\n          )}\n          multiLine\n          style={styles.field}\n        />\n      );\n    } else {\n      const { onEditButtonClick, setValue } = field;\n      return (\n        <TextFieldWithButtonLayout\n          key={field.name}\n          renderTextField={() => (\n            <SemiControlledTextField\n              value={getFieldValue(\n                this.props.instances,\n                field,\n                '(Multiple values)'\n              )}\n              id={field.name}\n              floatingLabelText={getFieldLabel(this.props.instances, field)}\n              floatingLabelFixed\n              helperMarkdownText={this._getFieldDescription(\n                this.props.instances,\n                field\n              )}\n              onChange={newValue => {\n                this.props.instances.forEach(i => setValue(i, newValue || ''));\n                this._onInstancesModified(this.props.instances);\n              }}\n              style={styles.field}\n              disabled={field.disabled}\n            />\n          )}\n          renderButton={style =>\n            onEditButtonClick ? (\n              <RaisedButton\n                style={style}\n                primary\n                disabled={this.props.instances.length !== 1}\n                icon={<Edit />}\n                label={<Trans>Edit</Trans>}\n                onClick={() => onEditButtonClick(this.props.instances[0])}\n              />\n            ) : null\n          }\n        />\n      );\n    }\n  };\n\n  _renderSelectField = (field: ValueField) => {\n    if (!field.getChoices || !field.getValue) return;\n\n    const children = field\n      .getChoices()\n      .map(({ value, label }) => (\n        <SelectOption key={value} value={value} primaryText={label} />\n      ));\n\n    if (field.valueType === 'number') {\n      const { setValue } = field;\n      return (\n        <SelectField\n          value={getFieldValue(this.props.instances, field)}\n          key={field.name}\n          floatingLabelText={getFieldLabel(this.props.instances, field)}\n          helperMarkdownText={this._getFieldDescription(\n            this.props.instances,\n            field\n          )}\n          onChange={(event, index, newValue: string) => {\n            this.props.instances.forEach(i =>\n              setValue(i, parseFloat(newValue) || 0)\n            );\n            this._onInstancesModified(this.props.instances);\n          }}\n          style={styles.field}\n          disabled={field.disabled}\n        >\n          {children}\n        </SelectField>\n      );\n    } else if (field.valueType === 'string') {\n      const { setValue } = field;\n      return (\n        <SelectField\n          value={getFieldValue(\n            this.props.instances,\n            field,\n            '(Multiple values)'\n          )}\n          key={field.name}\n          floatingLabelText={getFieldLabel(this.props.instances, field)}\n          helperMarkdownText={this._getFieldDescription(\n            this.props.instances,\n            field\n          )}\n          onChange={(event, index, newValue: string) => {\n            this.props.instances.forEach(i => setValue(i, newValue || ''));\n            this._onInstancesModified(this.props.instances);\n          }}\n          style={styles.field}\n          disabled={field.disabled}\n        >\n          {children}\n        </SelectField>\n      );\n    }\n  };\n\n  _renderButton = (field: ValueField) => {\n    //TODO: multi selection handling\n    return (\n      <FlatButton\n        key={field.name}\n        fullWidth\n        primary\n        label={getFieldLabel(this.props.instances, field)}\n        onClick={() => {\n          if (field.onClick) field.onClick(this.props.instances[0]);\n        }}\n      />\n    );\n  };\n\n  _renderResourceField = (field: ResourceField) => {\n    if (!this.props.project) {\n      console.error(\n        'You tried to display a resource field in a PropertiesEditor that does not support display resources. If you need to display resources, pass additional props (project, resourceSources, etc...)'\n      );\n      return;\n    }\n\n    const { setValue } = field;\n    return (\n      <ResourceSelector\n        key={field.name}\n        project={this.props.project}\n        resourceSources={this.props.resourceSources}\n        onChooseResource={this.props.onChooseResource}\n        resourceExternalEditors={this.props.resourceExternalEditors}\n        resourcesLoader={ResourcesLoader}\n        resourceKind={field.resourceKind}\n        fullWidth\n        initialResourceName={getFieldValue(\n          this.props.instances,\n          field,\n          '(Multiple values)' //TODO\n        )}\n        onChange={newValue => {\n          this.props.instances.forEach(i => setValue(i, newValue));\n          this._onInstancesModified(this.props.instances);\n        }}\n        floatingLabelText={getFieldLabel(this.props.instances, field)}\n        helperMarkdownText={this._getFieldDescription(\n          this.props.instances,\n          field\n        )}\n      />\n    );\n  };\n\n  render() {\n    const { mode } = this.props;\n\n    const renderContainer =\n      mode === 'row'\n        ? (fields: React.Node) => (\n            <ResponsiveLineStackLayout>{fields}</ResponsiveLineStackLayout>\n          )\n        : (fields: React.Node) => <Column noMargin>{fields}</Column>;\n\n    return renderContainer(\n      this.props.schema.map(field => {\n        if (field.children) {\n          if (field.type === 'row') {\n            return (\n              <UnsavedChangesContext.Consumer key={field.name}>\n                {unsavedChanges => (\n                  <PropertiesEditor\n                    schema={field.children}\n                    instances={this.props.instances}\n                    mode=\"row\"\n                    unsavedChanges={unsavedChanges}\n                  />\n                )}\n              </UnsavedChangesContext.Consumer>\n            );\n          }\n\n          return (\n            <div key={field.name}>\n              <Subheader>{field.name}</Subheader>\n              <div style={styles.subPropertiesEditorContainer}>\n                <PropertiesEditor\n                  schema={field.children}\n                  instances={this.props.instances}\n                  mode=\"column\"\n                />\n              </div>\n            </div>\n          );\n        } else if (field.valueType === 'resource') {\n          return this._renderResourceField(field);\n        } else {\n          if (field.getChoices && field.getValue)\n            return this._renderSelectField(field);\n          if (field.getValue) return this._renderInputField(field);\n          if (field.onClick) return this._renderButton(field);\n        }\n\n        return null;\n      })\n    );\n  }\n}\n","// @flow\n\n/**\n * Convert a rgb color value to a string hex value.\n * @note No \"#\" or \"0x\" are added.\n */\nexport const rgbToHex = (r: number, g: number, b: number) =>\n  '' + ((1 << 24) + (r << 16) + (g << 8) + b).toString(16).slice(1);\n/**\n * Convert a rgb color value to a hex value.\n */\nexport const rgbToHexNumber = (r: number, g: number, b: number) =>\n  (r << 16) + (g << 8) + b;\n\n/**\n * Convert a hex color value to an rgb object value.\n */\nexport const hexToRGBColor = (hex: string) => {\n  const hexNumber = parseInt(hex.replace('#', ''), 16);\n  return {\n    r: (hexNumber >> 16) & 0xff,\n    g: (hexNumber >> 8) & 0xff,\n    b: hexNumber & 0xff,\n    a: 255,\n  };\n};\n","// @flow\n\n// Helpers to manipulate tags. See also EditTagsDialog.js\n\nexport type Tags = Array<string>;\nexport type SelectedTags = Tags;\n\nexport const removeTag = (tags: Tags, tag: string): Tags => {\n  return tags.filter(selectedTag => selectedTag !== tag);\n};\n\nexport const addTags = (tags: Tags, newTags: Tags): Tags => {\n  return Array.from(new Set([...tags, ...newTags]));\n};\n\nexport type BuildTagsMenuTemplateOptions = {|\n  noTagLabel: string,\n  getAllTags: () => Array<string>,\n  selectedTags: SelectedTags,\n  onChange: SelectedTags => void,\n  onEditTags?: () => void,\n  editTagsLabel?: string,\n|};\n\nexport const buildTagsMenuTemplate = ({\n  noTagLabel,\n  getAllTags,\n  selectedTags,\n  onChange,\n  onEditTags,\n  editTagsLabel,\n}: BuildTagsMenuTemplateOptions): Array<any> => {\n  const allTags = getAllTags();\n  const footerMenuItems =\n    onEditTags && editTagsLabel\n      ? [\n          {\n            type: 'separator',\n          },\n          {\n            label: editTagsLabel,\n            click: onEditTags,\n          },\n        ]\n      : [];\n\n  if (!allTags.length) {\n    return [\n      {\n        label: noTagLabel,\n        enabled: false,\n      },\n      ...footerMenuItems,\n    ];\n  }\n\n  return allTags\n    .map(tag => ({\n      type: 'checkbox',\n      label: tag,\n      checked: selectedTags.includes(tag),\n      click: () => {\n        if (selectedTags.includes(tag)) {\n          onChange(removeTag(selectedTags, tag));\n        } else {\n          onChange(addTags(selectedTags, [tag]));\n        }\n      },\n    }))\n    .concat(footerMenuItems);\n};\n\nexport const getTagsFromString = (tagsString: string): Tags => {\n  if (tagsString.trim() === '') return [];\n\n  return tagsString.split(',').map(tag => tag.trim());\n};\n\nexport const getStringFromTags = (tags: Tags): string => {\n  return tags.join(', ');\n};\n\nexport const hasStringAllTags = (tagsString: string, tags: Tags) => {\n  for (const tag of tags) {\n    if (tagsString.indexOf(tag) === -1) return false;\n  }\n\n  return true;\n};\n","// @flow\nimport type {\n  GroupWithContext,\n  ObjectWithContext,\n} from '../../../ObjectsList/EnumerateObjects';\nimport { type EnumeratedInstructionOrExpressionMetadata } from '../../../InstructionOrExpression/EnumeratedInstructionOrExpressionMetadata.js';\n\n// ListItem created must have consistent keys that include their type\n// (object, group, instruction) to allow them to be living\n// in the same list (in search results) and be selected.\n\nexport const getObjectGroupListItemKey = (groupWithContext: GroupWithContext) =>\n  `object-group-key-${groupWithContext.group.getName()}-${\n    groupWithContext.global ? '-global' : ''\n  }`;\nexport const getObjectListItemKey = (objectWithContext: ObjectWithContext) =>\n  `object-key-${objectWithContext.object.getName()}-${\n    objectWithContext.global ? '-global' : ''\n  }`;\nexport const getObjectOrObjectGroupListItemValue = (\n  objectOrObjectGroupName: string\n) => `object-or-object-group-value-${objectOrObjectGroupName}`;\n\nexport const getInstructionListItemKey = (\n  instruction: EnumeratedInstructionOrExpressionMetadata\n) => `instruction-key-${instruction.fullGroupName}-${instruction.type}`;\nexport const getInstructionListItemValue = (instructionType: string) =>\n  `instruction-value-${instructionType}`;\n\nexport const getSubheaderListItemKey = (subheader: string) =>\n  `subheader-key-${subheader}`;\n","// @flow\nimport { type I18n as I18nType } from '@lingui/core';\nimport { mapVector, mapFor } from '../Utils/MapFor';\nimport { caseSensitiveSlug } from '../Utils/CaseSensitiveSlug';\nimport {\n  declareInstructionOrExpressionMetadata,\n  declareBehaviorInstructionOrExpressionMetadata,\n  declareEventsFunctionParameters,\n  declareBehaviorMetadata,\n  declareExtension,\n  isBehaviorLifecycleEventsFunction,\n  isExtensionLifecycleEventsFunction,\n  declareBehaviorPropertiesInstructionAndExpressions,\n} from './MetadataDeclarationHelpers';\n\nconst gd = global.gd;\n\nexport type EventsFunctionCodeWriter = {|\n  getIncludeFileFor: (functionName: string) => string,\n  writeFunctionCode: (functionName: string, code: string) => Promise<void>,\n  writeBehaviorCode: (behaviorName: string, code: string) => Promise<void>,\n|};\n\ntype Options = {|\n  skipCodeGeneration?: boolean,\n  eventsFunctionCodeWriter: EventsFunctionCodeWriter,\n  i18n: I18nType,\n|};\n\ntype CodeGenerationContext = {|\n  codeNamespacePrefix: string,\n  extensionIncludeFiles: Array<string>,\n|};\n\nconst mangleName = (name: string) => {\n  return caseSensitiveSlug(name, '_', []);\n};\n\n/** Generate the namespace for a free function. */\nconst getFreeFunctionCodeNamespace = (\n  eventsFunction: gdEventsFunction,\n  codeNamespacePrefix: string\n) => {\n  return codeNamespacePrefix + '__' + mangleName(eventsFunction.getName());\n};\n\n/** Generate the namespace for a behavior function. */\nconst getBehaviorFunctionCodeNamespace = (\n  eventsBasedBehavior: gdEventsBasedBehavior,\n  codeNamespacePrefix: string\n) => {\n  return codeNamespacePrefix + '__' + mangleName(eventsBasedBehavior.getName());\n};\n\n/**\n * Load all events functions of a project in extensions\n */\nexport const loadProjectEventsFunctionsExtensions = (\n  project: gdProject,\n  eventsFunctionCodeWriter: EventsFunctionCodeWriter,\n  i18n: I18nType\n): Promise<Array<void>> => {\n  return Promise.all(\n    // First pass: generate extensions from the events functions extensions,\n    // without writing code for the functions. This is useful as events in functions\n    // could be using other functions, which would not yet be available as\n    // extensions.\n    mapFor(0, project.getEventsFunctionsExtensionsCount(), i => {\n      return loadProjectEventsFunctionsExtension(\n        project,\n        project.getEventsFunctionsExtensionAt(i),\n        { skipCodeGeneration: true, eventsFunctionCodeWriter, i18n }\n      );\n    })\n  ).then(() =>\n    Promise.all(\n      // Second pass: generate extensions, including code.\n      mapFor(0, project.getEventsFunctionsExtensionsCount(), i => {\n        return loadProjectEventsFunctionsExtension(\n          project,\n          project.getEventsFunctionsExtensionAt(i),\n          {\n            skipCodeGeneration: false,\n            eventsFunctionCodeWriter,\n            i18n,\n          }\n        );\n      })\n    )\n  );\n};\n\nconst loadProjectEventsFunctionsExtension = (\n  project: gdProject,\n  eventsFunctionsExtension: gdEventsFunctionsExtension,\n  options: Options\n): Promise<void> => {\n  return generateEventsFunctionExtension(\n    project,\n    eventsFunctionsExtension,\n    options\n  ).then(extension => {\n    gd.JsPlatform.get().addNewExtension(extension);\n    extension.delete();\n  });\n};\n\n/**\n * Get the list of mandatory include files when using the\n * extension.\n */\nconst getExtensionIncludeFiles = (\n  project: gdProject,\n  eventsFunctionsExtension: gdEventsFunctionsExtension,\n  options: Options,\n  codeNamespacePrefix: string\n): Array<string> => {\n  return mapFor(0, eventsFunctionsExtension.getEventsFunctionsCount(), i => {\n    const eventsFunction = eventsFunctionsExtension.getEventsFunctionAt(i);\n\n    if (isExtensionLifecycleEventsFunction(eventsFunction.getName())) {\n      const codeNamespace = getFreeFunctionCodeNamespace(\n        eventsFunction,\n        codeNamespacePrefix\n      );\n      const functionName = codeNamespace + '.func'; // TODO\n\n      return options.eventsFunctionCodeWriter.getIncludeFileFor(functionName);\n    }\n\n    return null;\n  }).filter(Boolean);\n};\n\n/**\n * Generate the code for the events based extension\n */\nconst generateEventsFunctionExtension = (\n  project: gdProject,\n  eventsFunctionsExtension: gdEventsFunctionsExtension,\n  options: Options\n): Promise<gdEventsFunctionsExtension> => {\n  const extension = new gd.PlatformExtension();\n  declareExtension(extension, eventsFunctionsExtension);\n\n  const codeNamespacePrefix =\n    'gdjs.evtsExt__' + mangleName(eventsFunctionsExtension.getName());\n\n  const extensionIncludeFiles = getExtensionIncludeFiles(\n    project,\n    eventsFunctionsExtension,\n    options,\n    codeNamespacePrefix\n  );\n  const codeGenerationContext = {\n    codeNamespacePrefix,\n    extensionIncludeFiles,\n  };\n\n  return Promise.all(\n    // Generate all behaviors and their functions\n    mapVector(\n      eventsFunctionsExtension.getEventsBasedBehaviors(),\n      eventsBasedBehavior => {\n        return generateBehavior(\n          project,\n          extension,\n          eventsFunctionsExtension,\n          eventsBasedBehavior,\n          options,\n          codeGenerationContext\n        );\n      }\n    )\n  )\n    .then(() =>\n      // Generate all free functions\n      Promise.all(\n        mapFor(0, eventsFunctionsExtension.getEventsFunctionsCount(), i => {\n          const eventsFunction = eventsFunctionsExtension.getEventsFunctionAt(\n            i\n          );\n          generateFreeFunction(\n            project,\n            extension,\n            eventsFunctionsExtension,\n            eventsFunction,\n            options,\n            codeGenerationContext\n          );\n        })\n      )\n    )\n    .then(() => extension);\n};\n\nconst generateFreeFunction = (\n  project: gdProject,\n  extensionOrBehaviorMetadata: gdPlatformExtension | gdBehaviorMetadata,\n  eventsFunctionsExtensionOrEventsBasedBehavior:\n    | gdEventsFunctionsExtension\n    | gdEventsBasedBehavior,\n  eventsFunction: gdEventsFunction,\n  options: Options,\n  codeGenerationContext: CodeGenerationContext\n) => {\n  const instructionOrExpression = declareInstructionOrExpressionMetadata(\n    extensionOrBehaviorMetadata,\n    eventsFunctionsExtensionOrEventsBasedBehavior,\n    eventsFunction\n  );\n  // By convention, first parameter is always the Runtime Scene.\n  instructionOrExpression.addCodeOnlyParameter('currentScene', '');\n  declareEventsFunctionParameters(eventsFunction, instructionOrExpression);\n\n  // Hide \"lifecycle\" functions as they are called automatically by\n  // the game engine.\n  if (isExtensionLifecycleEventsFunction(eventsFunction.getName())) {\n    instructionOrExpression.setHidden();\n  }\n\n  const codeNamespace = getFreeFunctionCodeNamespace(\n    eventsFunction,\n    codeGenerationContext.codeNamespacePrefix\n  );\n  const functionName = codeNamespace + '.func';\n\n  const codeExtraInformation = instructionOrExpression.getCodeExtraInformation();\n  codeExtraInformation\n    .setIncludeFile(\n      options.eventsFunctionCodeWriter.getIncludeFileFor(functionName)\n    )\n    .setFunctionName(functionName);\n\n  // Always include the extension include files when using a free function.\n  codeGenerationContext.extensionIncludeFiles.forEach(includeFile => {\n    codeExtraInformation.addIncludeFile(includeFile);\n  });\n\n  if (!options.skipCodeGeneration) {\n    const includeFiles = new gd.SetString();\n    const eventsFunctionsExtensionCodeGenerator = new gd.EventsFunctionsExtensionCodeGenerator(\n      project\n    );\n    const code = eventsFunctionsExtensionCodeGenerator.generateFreeEventsFunctionCompleteCode(\n      eventsFunction,\n      codeNamespace,\n      includeFiles,\n      // For now, always generate functions for runtime (this disables\n      // generation of profiling for groups (see EventsCodeGenerator))\n      // as extensions generated can be used either for preview or export.\n      true\n    );\n\n    // Add any include file required by the function to the list\n    // of include files for this function (so that when used, the \"dependencies\"\n    // are transitively included).\n    includeFiles\n      .toNewVectorString()\n      .toJSArray()\n      .forEach((includeFile: string) => {\n        codeExtraInformation.addIncludeFile(includeFile);\n      });\n\n    includeFiles.delete();\n\n    return options.eventsFunctionCodeWriter.writeFunctionCode(\n      functionName,\n      code\n    );\n  } else {\n    // Skip code generation if no events function writer is provided.\n    // This is the case during the \"first pass\", where all events functions extensions\n    // are loaded as extensions but not code generated, as events in functions could\n    // themselves be using functions that are not yet available in extensions.\n  }\n};\n\nfunction generateBehavior(\n  project: gdProject,\n  extension: gdPlatformExtension,\n  eventsFunctionsExtension: gdEventsFunctionsExtension,\n  eventsBasedBehavior: gdEventsBasedBehavior,\n  options: Options,\n  codeGenerationContext: CodeGenerationContext\n) {\n  const behaviorMetadata = declareBehaviorMetadata(\n    extension,\n    eventsBasedBehavior\n  );\n\n  const eventsFunctionsContainer = eventsBasedBehavior.getEventsFunctions();\n  const codeNamespace = getBehaviorFunctionCodeNamespace(\n    eventsBasedBehavior,\n    codeGenerationContext.codeNamespacePrefix\n  );\n  const includeFile = options.eventsFunctionCodeWriter.getIncludeFileFor(\n    codeNamespace\n  );\n\n  behaviorMetadata.setIncludeFile(includeFile);\n\n  // Always include the extension include files when using a behavior.\n  codeGenerationContext.extensionIncludeFiles.forEach(includeFile => {\n    behaviorMetadata.addIncludeFile(includeFile);\n  });\n\n  return Promise.resolve().then(() => {\n    const behaviorMethodMangledNames = new gd.MapStringString();\n\n    // Declare the instructions/expressions for properties\n    declareBehaviorPropertiesInstructionAndExpressions(\n      options.i18n,\n      behaviorMetadata,\n      eventsBasedBehavior\n    );\n\n    // Declare all the behavior functions\n    mapFor(0, eventsFunctionsContainer.getEventsFunctionsCount(), i => {\n      const eventsFunction = eventsFunctionsContainer.getEventsFunctionAt(i);\n\n      const eventsFunctionMangledName = mangleName(eventsFunction.getName());\n      behaviorMethodMangledNames.set(\n        eventsFunction.getName(),\n        eventsFunctionMangledName\n      );\n\n      const instructionOrExpression = declareBehaviorInstructionOrExpressionMetadata(\n        behaviorMetadata,\n        eventsBasedBehavior,\n        eventsFunction\n      );\n      declareEventsFunctionParameters(eventsFunction, instructionOrExpression);\n\n      // Hide \"lifecycle\" methods as they are called automatically by\n      // the game engine.\n      if (isBehaviorLifecycleEventsFunction(eventsFunction.getName())) {\n        instructionOrExpression.setHidden();\n      }\n\n      const codeExtraInformation = instructionOrExpression.getCodeExtraInformation();\n      codeExtraInformation\n        .setIncludeFile(includeFile)\n        .setFunctionName(eventsFunctionMangledName);\n    });\n\n    // Generate code for the behavior and its methods\n    if (!options.skipCodeGeneration) {\n      const includeFiles = new gd.SetString();\n      const behaviorCodeGenerator = new gd.BehaviorCodeGenerator(project);\n      const code = behaviorCodeGenerator.generateRuntimeBehaviorCompleteCode(\n        eventsFunctionsExtension.getName(),\n        eventsBasedBehavior,\n        codeNamespace,\n        behaviorMethodMangledNames,\n        includeFiles,\n\n        // For now, always generate functions for runtime (this disables\n        // generation of profiling for groups (see EventsCodeGenerator))\n        // as extensions generated can be used either for preview or export.\n        true\n      );\n      behaviorCodeGenerator.delete();\n      behaviorMethodMangledNames.delete();\n\n      // Add any include file required by the functions to the list\n      // of include files for this behavior (so that when used, the \"dependencies\"\n      // are transitively included).\n      includeFiles\n        .toNewVectorString()\n        .toJSArray()\n        .forEach((includeFile: string) => {\n          behaviorMetadata.addIncludeFile(includeFile);\n        });\n\n      includeFiles.delete();\n\n      return options.eventsFunctionCodeWriter.writeBehaviorCode(\n        codeNamespace,\n        code\n      );\n    } else {\n      // Skip code generation\n      behaviorMethodMangledNames.delete();\n      return Promise.resolve();\n    }\n  });\n}\n\n/**\n * Unload all extensions providing events functions of a project\n */\nexport const unloadProjectEventsFunctionsExtensions = (\n  project: gdProject\n): Promise<Array<void>> => {\n  return Promise.all(\n    mapFor(0, project.getEventsFunctionsExtensionsCount(), i => {\n      gd.JsPlatform.get().removeExtension(\n        project.getEventsFunctionsExtensionAt(i).getName()\n      );\n    })\n  );\n};\n\n/**\n * Given metadata about an instruction or an expression, tells if this was created\n * from an event function.\n */\nexport const isAnEventFunctionMetadata = (\n  instructionOrExpression: gdInstructionMetadata | gdExpressionMetadata\n) => {\n  const parametersCount = instructionOrExpression.getParametersCount();\n  if (parametersCount <= 0) return false;\n\n  return (\n    instructionOrExpression.getParameter(parametersCount - 1).getType() ===\n    'eventsFunctionContext'\n  );\n};\n\n/**\n * Get back the name a function from its type.\n * See also getFreeEventsFunctionType for the reverse operation.\n */\nexport const getFunctionNameFromType = (type: string) => {\n  const parts = type.split('::');\n  if (!parts.length)\n    return {\n      name: '',\n      behaviorName: '',\n      extensionName: '',\n    };\n\n  return {\n    name: parts[parts.length - 1],\n    behaviorName: parts.length > 2 ? parts[1] : undefined,\n    extensionName: parts[0],\n  };\n};\n\n/**\n * Get the type of a Events Function.\n * See also getFunctionNameFromType for the reverse operation.\n */\nexport const getFreeEventsFunctionType = (\n  extensionName: string,\n  eventsFunction: gdEventsFunction\n) => {\n  return extensionName + '::' + eventsFunction.getName();\n};\n\n/**\n * Return the index of the first parameter to be shown to the user:\n * * 0 for a behavior \"method\",\n * * 1 for a free function (as the first parameter is by convention the runtimeScene).\n */\nexport const getParametersIndexOffset = (\n  isEventsBasedBehaviorMethod: boolean\n) => {\n  return isEventsBasedBehaviorMethod\n    ? 0 /*In the case of a behavior events function, the first two parameters are by convention the \"Object\" and \"Behavior\" */\n    : 1; /*In the case of a free events function (i.e: not tied to a behavior), the first parameter is by convention the current scene and is not shown.*/\n};\n","// @flow\nimport * as React from 'react';\nimport ThemeConsumer from './Theme/ThemeConsumer';\n\ntype ToolbarProps = {|\n  children: React.Node,\n|};\n\ntype ToolbarGroupProps = {|\n  children?: React.Node,\n  firstChild?: true, // Not used, but could be useful one day for styling\n  lastChild?: true, // Not used, but could be useful one day for styling\n|};\n\nexport const Toolbar = React.memo<ToolbarProps>(\n  ({ children }: ToolbarProps) => (\n    <ThemeConsumer>\n      {muiTheme => (\n        <div\n          style={{\n            backgroundColor: muiTheme.toolbar.backgroundColor,\n            padding: 3,\n            flexShrink: 0,\n            display: 'flex',\n            justifyContent: 'space-between',\n            overflowX: 'auto',\n            overflowY: 'hidden',\n          }}\n        >\n          {children}\n        </div>\n      )}\n    </ThemeConsumer>\n  )\n);\n\nconst toolbarGroupStyle = {\n  display: 'flex',\n  alignItems: 'center',\n};\n\nexport const ToolbarGroup = React.memo<ToolbarGroupProps>(\n  ({ children }: ToolbarGroupProps) => (\n    <span style={toolbarGroupStyle}>{children}</span>\n  )\n);\n","// @flow\nimport * as React from 'react';\nimport { type GDevelopTheme } from '.';\nimport DefaultTheme from './DefaultTheme';\n\nconst GDevelopThemeContext = React.createContext<GDevelopTheme>(\n  DefaultTheme.gdevelopTheme\n);\n\nexport default GDevelopThemeContext;\n","import React from 'react';\nimport ThemeConsumer from './Theme/ThemeConsumer';\n\nexport default props => {\n  return (\n    <ThemeConsumer>\n      {muiTheme => (\n        <span\n          style={{\n            height: 32,\n            marginLeft: 3,\n            marginRight: 3,\n            borderLeftStyle: 'solid',\n            borderLeftWidth: 1,\n            borderColor: muiTheme.toolbar.separatorColor,\n          }}\n        />\n      )}\n    </ThemeConsumer>\n  );\n};\n","// @flow\nimport * as React from 'react';\n\nexport type UnsavedChanges = {|\n  hasUnsavedChanges: boolean,\n  sealUnsavedChanges: () => void,\n  triggerUnsavedChanges: () => void,\n|};\n\nconst initialState: UnsavedChanges = {\n  hasUnsavedChanges: false,\n  sealUnsavedChanges: () => {},\n  triggerUnsavedChanges: () => {},\n};\n\nconst UnsavedChangesContext = React.createContext<UnsavedChanges>(initialState);\n\nexport default UnsavedChangesContext;\n\ntype State = {|\n  hasUnsavedChanges: boolean,\n|};\n\ntype Props = {|\n  children?: React.Node,\n|};\n\nexport class UnsavedChangesContextProvider extends React.Component<\n  Props,\n  State\n> {\n  state = { hasUnsavedChanges: false };\n  triggerUnsavedChanges = (): void => {\n    if (!this.state.hasUnsavedChanges)\n      this.setState({ hasUnsavedChanges: true });\n  };\n\n  sealUnsavedChanges = (): void => {\n    if (this.state.hasUnsavedChanges)\n      this.setState({ hasUnsavedChanges: false });\n  };\n\n  render() {\n    const unsavedChanges: UnsavedChanges = {\n      ...this.state,\n      triggerUnsavedChanges: this.triggerUnsavedChanges,\n      sealUnsavedChanges: this.sealUnsavedChanges,\n    };\n\n    return (\n      <UnsavedChangesContext.Provider value={unsavedChanges}>\n        {this.props.children}\n      </UnsavedChangesContext.Provider>\n    );\n  }\n}\n","// @flow\nimport * as React from 'react';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport Switch from '@material-ui/core/Switch';\n\n// We support a subset of the props supported by Material-UI v0.x Toggle\n// They should be self descriptive - refer to Material UI docs otherwise.\ntype Props = {|\n  label?: ?React.Node,\n  toggled: boolean,\n  onToggle: (e: {||}, toggled: boolean) => void,\n  disabled?: boolean,\n  labelPosition: 'right',\n\n  style?: {|\n    marginTop?: number,\n  |},\n|};\n\n/**\n * A text field based on Material-UI text field.\n */\nexport default class Toggle extends React.Component<Props, {||}> {\n  render() {\n    return (\n      <FormControlLabel\n        control={\n          <Switch\n            checked={this.props.toggled}\n            onChange={event => this.props.onToggle(event, event.target.checked)}\n            color=\"primary\"\n          />\n        }\n        label={this.props.label}\n        disabled={this.props.disabled}\n        style={this.props.style}\n      />\n    );\n  }\n}\n","// @flow\nimport * as React from 'react';\nimport { type Profile } from '../Utils/GDevelopServices/Authentification';\nimport {\n  type Limits,\n  type Usages,\n  type Subscription,\n} from '../Utils/GDevelopServices/Usage';\n\nexport type UserProfile = {|\n  authenticated: boolean,\n  profile: ?Profile,\n  limits: ?Limits,\n  usages: ?Usages,\n  subscription: ?Subscription,\n  onLogout: () => void,\n  onLogin: () => void,\n  onCreateAccount: () => void,\n  onRefreshUserProfile: () => void,\n  getAuthorizationHeader: () => Promise<string>,\n|};\n\nexport const initialUserProfile = {\n  authenticated: false,\n  profile: null,\n  subscription: null,\n  usages: null,\n  limits: null,\n  onLogout: () => {},\n  onLogin: () => {},\n  onCreateAccount: () => {},\n  onRefreshUserProfile: () => {},\n  getAuthorizationHeader: () => Promise.reject(new Error('Unimplemented')),\n};\n\nconst UserProfileContext = React.createContext<UserProfile>(initialUserProfile);\n\nexport default UserProfileContext;\n","// @flow\nimport * as React from 'react';\nimport CircularProgress from '@material-ui/core/CircularProgress';\n\nconst styles = {\n  progress: { marginRight: 8, verticalAlign: 'middle' },\n};\n\nexport default ({\n  children,\n  isLoading,\n}: {\n  children: React.Node,\n  isLoading: ?boolean,\n}) => (\n  <span>\n    {isLoading && <CircularProgress size={20} style={styles.progress} />}\n    {children}\n  </span>\n);\n","// @flow\nimport * as React from 'react';\nimport {\n  type EventsFunctionsExtensionWriter,\n  type EventsFunctionsExtensionOpener,\n} from './Storage';\n\nexport type EventsFunctionsExtensionsState = {|\n  eventsFunctionsExtensionsError: ?Error,\n  loadProjectEventsFunctionsExtensions: (project: ?gdProject) => Promise<void>,\n  unloadProjectEventsFunctionsExtensions: (project: gdProject) => void,\n  reloadProjectEventsFunctionsExtensions: (\n    project: ?gdProject\n  ) => Promise<void>,\n  getEventsFunctionsExtensionWriter: () => ?EventsFunctionsExtensionWriter,\n  getEventsFunctionsExtensionOpener: () => ?EventsFunctionsExtensionOpener,\n|};\n\nconst defaultState = {\n  eventsFunctionsExtensionsError: null,\n  loadProjectEventsFunctionsExtensions: () =>\n    Promise.reject(new Error('Use a provider')),\n  unloadProjectEventsFunctionsExtensions: () => {},\n  reloadProjectEventsFunctionsExtensions: () =>\n    Promise.reject(new Error('Use a provider')),\n  getEventsFunctionsExtensionWriter: () => null,\n  getEventsFunctionsExtensionOpener: () => null,\n};\n\nconst EventsFunctionsExtensionsContext = React.createContext<EventsFunctionsExtensionsState>(\n  defaultState\n);\n\nexport default EventsFunctionsExtensionsContext;\n","// @flow\r\n// Inspired by https://github.com/LoicMahieu/material-ui-color-picker\r\n\r\nimport * as React from 'react';\r\nimport { SketchPicker } from 'react-color';\r\nimport Popper from '@material-ui/core/Popper';\r\nimport ClickAwayListener from '@material-ui/core/ClickAwayListener';\r\nimport muiZIndex from '@material-ui/core/styles/zIndex';\r\n\r\nexport type RGBColor = {|\r\n  r: number,\r\n  g: number,\r\n  b: number,\r\n  a?: number,\r\n|};\r\n\r\ntype ColorResult = {\r\n  rgb: RGBColor,\r\n};\r\n\r\ntype ColorChangeHandler = (color: ColorResult) => void;\r\n\r\ntype Props = {|\r\n  color: ?RGBColor,\r\n  style?: Object,\r\n  onChange?: ColorChangeHandler,\r\n  onChangeComplete?: ColorChangeHandler,\r\n  disableAlpha?: boolean,\r\n|};\r\n\r\ntype State = {|\r\n  displayColorPicker: boolean,\r\n|};\r\n\r\nconst styles = {\r\n  color: {\r\n    width: '36px',\r\n    height: '14px',\r\n    borderRadius: '2px',\r\n    textAlign: 'center',\r\n    fontSize: '10px',\r\n  },\r\n  swatch: {\r\n    padding: '5px',\r\n    background: '#fff',\r\n    borderRadius: '1px',\r\n    boxShadow: '0 0 0 1px rgba(0,0,0,.1)',\r\n    display: 'inline-block',\r\n    cursor: 'pointer',\r\n  },\r\n  popover: {\r\n    // Ensure the popper is above everything (modal, dialog, snackbar, tooltips, etc).\r\n    // There will be only one ColorPicker opened at a time, so it's fair to put the\r\n    // highest z index. If this is breaking, check the z-index of material-ui.\r\n    zIndex: muiZIndex.tooltip + 100,\r\n  },\r\n};\r\n\r\nclass ColorPicker extends React.Component<Props, State> {\r\n  _swatch = React.createRef<HTMLDivElement>();\r\n  state = {\r\n    displayColorPicker: false,\r\n  };\r\n\r\n  open = () => {\r\n    this.setState({ displayColorPicker: true });\r\n  };\r\n\r\n  handleClick = () => {\r\n    this.setState({ displayColorPicker: !this.state.displayColorPicker });\r\n  };\r\n\r\n  handleClose = () => {\r\n    this.setState({ displayColorPicker: false });\r\n  };\r\n\r\n  render() {\r\n    const { style, color, ...otherProps } = this.props;\r\n\r\n    const displayedColor = color\r\n      ? color\r\n      : {\r\n          r: 200,\r\n          g: 200,\r\n          b: 200,\r\n          a: 1,\r\n        };\r\n\r\n    return (\r\n      <div style={style}>\r\n        <div\r\n          style={styles.swatch}\r\n          onClick={this.handleClick}\r\n          ref={this._swatch}\r\n        >\r\n          <div\r\n            style={{\r\n              ...styles.color,\r\n              background: `rgba(${displayedColor.r}, ${displayedColor.g}, ${\r\n                displayedColor.b\r\n              }, ${displayedColor.a || 1})`,\r\n            }}\r\n          >\r\n            {color ? null : '?'}\r\n          </div>\r\n        </div>\r\n        {this.state.displayColorPicker && this._swatch.current ? (\r\n          <ClickAwayListener onClickAway={this.handleClose}>\r\n            <Popper\r\n              open\r\n              anchorEl={this._swatch.current}\r\n              style={styles.popover}\r\n              placement=\"bottom\"\r\n            >\r\n              <SketchPicker color={displayedColor} {...otherProps} />\r\n            </Popper>\r\n          </ClickAwayListener>\r\n        ) : null}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ColorPicker;\r\n","// @flow\nimport { mapFor } from '../Utils/MapFor';\nimport { type Schema, type Instance } from '.';\n\n/**\n * Transform a MapStringPropertyDescriptor to a schema that can be used in PropertiesEditor.\n *\n * @param {gdMapStringPropertyDescriptor} properties The properties to use\n * @param {*} getProperties The function called to read again the properties\n * @param {*} onUpdateProperty The function called to update a property of an object\n */\nexport default (\n  properties: gdMapStringPropertyDescriptor,\n  getProperties: (instance: Instance) => any,\n  onUpdateProperty: (\n    instance: Instance,\n    propertyName: string,\n    newValue: string\n  ) => void\n): Schema => {\n  const propertyNames = properties.keys();\n  const propertyFields = mapFor(0, propertyNames.size(), i => {\n    const name = propertyNames.at(i);\n    const property = properties.get(name);\n    const propertyDescription = property.getDescription();\n    const valueType = property.getType().toLowerCase();\n    const getLabel = (instance: Instance) => {\n      const propertyName = getProperties(instance)\n        .get(name)\n        .getLabel();\n      if (propertyName) return propertyName;\n      return (\n        name.charAt(0).toUpperCase() +\n        name\n          .slice(1)\n          .split(/(?=[A-Z])/)\n          .join(' ')\n      );\n    };\n    const getDescription = () => propertyDescription;\n\n    if (property.isHidden()) return null;\n\n    if (valueType === 'number') {\n      return {\n        name,\n        valueType,\n        getValue: (instance: Instance): number => {\n          return parseFloat(\n            getProperties(instance)\n              .get(name)\n              .getValue()\n          );\n        },\n        setValue: (instance: Instance, newValue: number) => {\n          onUpdateProperty(instance, name, '' + newValue);\n        },\n        getLabel,\n        getDescription,\n      };\n    } else if (valueType === 'string' || valueType === '') {\n      return {\n        name,\n        valueType: 'string',\n        getValue: (instance: Instance): string => {\n          return getProperties(instance)\n            .get(name)\n            .getValue();\n        },\n        setValue: (instance: Instance, newValue: string) => {\n          onUpdateProperty(instance, name, newValue);\n        },\n        getLabel,\n        getDescription,\n      };\n    } else if (valueType === 'boolean') {\n      return {\n        name,\n        valueType,\n        getValue: (instance: Instance): boolean => {\n          return (\n            getProperties(instance)\n              .get(name)\n              .getValue() === 'true'\n          );\n        },\n        setValue: (instance: Instance, newValue: boolean) => {\n          onUpdateProperty(instance, name, newValue ? '1' : '0');\n        },\n        getLabel,\n        getDescription,\n      };\n    } else if (valueType === 'choice') {\n      // Choice is a \"string\" (with a selector for the user in the UI)\n      const choices = property\n        .getExtraInfo()\n        .toJSArray()\n        .map(value => ({ value, label: value }));\n      return {\n        name,\n        valueType: 'string',\n        getChoices: () => choices,\n        getValue: (instance: Instance): string => {\n          return getProperties(instance)\n            .get(name)\n            .getValue();\n        },\n        setValue: (instance: Instance, newValue: string) => {\n          onUpdateProperty(instance, name, newValue);\n        },\n        getLabel,\n        getDescription,\n      };\n    } else if (valueType === 'resource') {\n      // Resource is a \"string\" (with a selector in the UI)\n      const kind = property.getExtraInfo().toJSArray()[0] || '';\n      return {\n        name,\n        valueType: 'resource',\n        resourceKind: kind,\n        getValue: (instance: Instance): string => {\n          return getProperties(instance)\n            .get(name)\n            .getValue();\n        },\n        setValue: (instance: Instance, newValue: string) => {\n          onUpdateProperty(instance, name, newValue);\n        },\n        getLabel,\n        getDescription,\n      };\n    } else if (valueType === 'color') {\n      return {\n        name,\n        valueType: 'color',\n        getValue: (instance: Instance): string => {\n          return getProperties(instance)\n            .get(name)\n            .getValue();\n        },\n        setValue: (instance: Instance, newValue: string) => {\n          onUpdateProperty(instance, name, newValue);\n        },\n        getLabel,\n        getDescription,\n      };\n    } else if (valueType === 'textarea') {\n      return {\n        name,\n        valueType: 'textarea',\n        getValue: (instance: Instance): string => {\n          return getProperties(instance)\n            .get(name)\n            .getValue();\n        },\n        setValue: (instance: Instance, newValue: string) => {\n          onUpdateProperty(instance, name, newValue);\n        },\n        getLabel,\n        getDescription,\n      };\n    } else {\n      console.error(\n        `A property with type=${valueType} could not be mapped to a field. Ensure that this type is correct and understood by the IDE.`\n      );\n      return null;\n    }\n  }).filter(Boolean);\n\n  return propertyFields;\n};\n","// @flow\nimport * as React from 'react';\nimport Instruction, { reactDndInstructionType } from './Instruction';\nimport { mapFor } from '../../Utils/MapFor';\nimport {\n  isInstructionSelected,\n  type InstructionsListContext,\n  type InstructionContext,\n  type ParameterContext,\n} from '../SelectionHandler';\nimport DropIndicator from './DropIndicator';\nimport { Trans } from '@lingui/macro';\nimport { hasClipboardConditions, hasClipboardActions } from '../ClipboardKind';\nimport { makeDropTarget } from '../../UI/DragAndDrop/DropTarget';\nimport { type ScreenType } from '../../UI/Reponsive/ScreenTypeMeasurer';\nimport { type WidthType } from '../../UI/Reponsive/ResponsiveWindowMeasurer';\n\nconst styles = {\n  addButton: {\n    cursor: 'pointer',\n  },\n};\n\ntype Props = {\n  instrsList: gdInstructionsList,\n  areConditions: boolean,\n  onAddNewInstruction: InstructionsListContext => void,\n  onPasteInstructions: InstructionsListContext => void,\n  onMoveToInstruction: (destinationContext: InstructionContext) => void,\n  onMoveToInstructionsList: (\n    destinationContext: InstructionsListContext\n  ) => void,\n  onInstructionClick: InstructionContext => void,\n  onInstructionDoubleClick: InstructionContext => void,\n  onInstructionContextMenu: (x: number, y: number, InstructionContext) => void,\n  onAddInstructionContextMenu: (\n    HTMLButtonElement,\n    InstructionsListContext\n  ) => void,\n  onParameterClick: ParameterContext => void,\n  selection: any,\n  addButtonLabel?: React.Node,\n  className?: string,\n  style?: Object,\n  disabled: boolean,\n  renderObjectThumbnail: string => React.Node,\n\n  screenType: ScreenType,\n  windowWidth: WidthType,\n};\n\ntype State = {|\n  canPaste: boolean,\n|};\n\nconst DropTarget = makeDropTarget<{\n  isCondition: boolean,\n}>(reactDndInstructionType);\n\nexport default class InstructionsList extends React.Component<Props, State> {\n  state = { canPaste: false };\n\n  onAddNewInstruction = () => {\n    if (this.props.onAddNewInstruction)\n      this.props.onAddNewInstruction({\n        instrsList: this.props.instrsList,\n        isCondition: this.props.areConditions,\n      });\n  };\n\n  _onPasteInstructions = () => {\n    this.props.onPasteInstructions({\n      instrsList: this.props.instrsList,\n      isCondition: this.props.areConditions,\n    });\n  };\n\n  render() {\n    const { canPaste } = this.state;\n    const {\n      addButtonLabel,\n      areConditions,\n      className,\n      instrsList,\n      onAddNewInstruction,\n      onPasteInstructions,\n      onMoveToInstruction,\n      onMoveToInstructionsList,\n      onInstructionClick,\n      onInstructionContextMenu,\n      onInstructionDoubleClick,\n      onAddInstructionContextMenu,\n      onParameterClick,\n      selection,\n      style,\n      disabled,\n    } = this.props;\n\n    const instructions = mapFor(0, instrsList.size(), i => {\n      const instruction = instrsList.get(i);\n      const instructionContext = {\n        isCondition: areConditions,\n        instrsList: instrsList,\n        instruction,\n        indexInList: i,\n      };\n\n      return (\n        <Instruction\n          instruction={instruction}\n          isCondition={areConditions}\n          key={instruction.ptr}\n          selected={isInstructionSelected(selection, instruction)}\n          onMoveToInstruction={() => onMoveToInstruction(instructionContext)}\n          onClick={() => onInstructionClick(instructionContext)}\n          onDoubleClick={() => onInstructionDoubleClick(instructionContext)}\n          onContextMenu={(x, y) =>\n            onInstructionContextMenu(x, y, instructionContext)\n          }\n          onParameterClick={(domEvent, parameterIndex) =>\n            onParameterClick({\n              isCondition: instructionContext.isCondition,\n              instrsList: instructionContext.instrsList,\n              instruction: instructionContext.instruction,\n              indexInList: instructionContext.indexInList,\n              parameterIndex,\n              domEvent,\n            })\n          }\n          selection={selection}\n          onAddNewSubInstruction={onAddNewInstruction}\n          onPasteSubInstructions={onPasteInstructions}\n          onMoveToSubInstruction={onMoveToInstruction}\n          onMoveToSubInstructionsList={onMoveToInstructionsList}\n          onSubInstructionClick={onInstructionClick}\n          onSubInstructionDoubleClick={onInstructionDoubleClick}\n          onSubInstructionContextMenu={onInstructionContextMenu}\n          onAddSubInstructionContextMenu={onAddInstructionContextMenu}\n          onSubParameterClick={onParameterClick}\n          disabled={disabled}\n          renderObjectThumbnail={this.props.renderObjectThumbnail}\n          screenType={this.props.screenType}\n          windowWidth={this.props.windowWidth}\n        />\n      );\n    });\n\n    const instructionsListContext = {\n      isCondition: areConditions,\n      instrsList: instrsList,\n    };\n    const addButtonDefaultLabel = areConditions ? (\n      <Trans>Add condition</Trans>\n    ) : (\n      <Trans>Add action</Trans>\n    );\n\n    return (\n      <DropTarget\n        canDrop={draggedItem => draggedItem.isCondition === areConditions}\n        drop={() => {\n          onMoveToInstructionsList({\n            isCondition: areConditions,\n            instrsList: instrsList,\n          });\n        }}\n      >\n        {({ connectDropTarget, isOver, canDrop }) =>\n          connectDropTarget(\n            <div className={className} style={style}>\n              {instructions}\n              {isOver && <DropIndicator canDrop={canDrop} />}\n              <span\n                onPointerEnter={() => {\n                  const canPaste =\n                    (areConditions && hasClipboardConditions()) ||\n                    (!areConditions && hasClipboardActions());\n                  this.setState({ canPaste });\n                }}\n                onPointerLeave={() => this.setState({ canPaste: false })}\n              >\n                <button\n                  style={styles.addButton}\n                  className=\"add-link\"\n                  onClick={this.onAddNewInstruction}\n                  onContextMenu={e => {\n                    e.stopPropagation();\n                    onAddInstructionContextMenu(\n                      e.currentTarget,\n                      instructionsListContext\n                    );\n                  }}\n                >\n                  {addButtonLabel || addButtonDefaultLabel}\n                </button>\n                {canPaste && (\n                  <span>\n                    <button\n                      style={styles.addButton}\n                      className=\"add-link\"\n                      onClick={this._onPasteInstructions}\n                    >\n                      {areConditions ? (\n                        <Trans>(or paste conditions)</Trans>\n                      ) : (\n                        <Trans>(or paste actions)</Trans>\n                      )}\n                    </button>\n                  </span>\n                )}\n              </span>\n            </div>\n          )\n        }\n      </DropTarget>\n    );\n  }\n}\n","// @flow\nimport update from 'lodash/update';\nimport compact from 'lodash/compact';\nimport { type EnumeratedInstructionOrExpressionMetadata } from './EnumeratedInstructionOrExpressionMetadata.js';\n\nconst GROUP_DELIMITER = '/';\n\nexport type InstructionOrExpressionTreeNode =\n  | EnumeratedInstructionOrExpressionMetadata\n  | {\n      [string]: InstructionOrExpressionTreeNode,\n    };\n\nexport const createTree = (\n  allExpressions: Array<EnumeratedInstructionOrExpressionMetadata>\n): InstructionOrExpressionTreeNode => {\n  const tree = {};\n  allExpressions.forEach(\n    (expressionInfo: EnumeratedInstructionOrExpressionMetadata) => {\n      let pathInTree = compact(\n        expressionInfo.fullGroupName.split(GROUP_DELIMITER)\n      );\n      if (!pathInTree.length) {\n        // Group items without a group in an empty group\n        pathInTree = [''];\n      }\n\n      update(tree, pathInTree, groupInfo => {\n        const existingGroupInfo = groupInfo || {};\n        return {\n          ...existingGroupInfo,\n          [expressionInfo.displayedName]: expressionInfo,\n        };\n      });\n    }\n  );\n\n  return tree;\n};\n\nexport const findInTree = (\n  instructionTreeNode: InstructionOrExpressionTreeNode,\n  instructionType: ?string\n): ?Array<string> => {\n  if (!instructionType) return null;\n\n  const keys = Object.keys(instructionTreeNode);\n  for (var i = 0; i < keys.length; ++i) {\n    const key = keys[i];\n\n    // In theory, we should have a way to distinguish\n    // between instruction (leaf nodes) and group (nodes). We use\n    // the \"type\" properties, but this will fail if a group is called \"type\"\n    // (hence the flow errors, which are valid warnings)\n    const instructionOrGroup = instructionTreeNode[key];\n    if (!instructionOrGroup) return null;\n\n    if (typeof instructionOrGroup.type === 'string') {\n      // $FlowFixMe - see above\n      const instructionInformation: EnumeratedInstructionOrExpressionMetadata = instructionOrGroup;\n\n      if (instructionInformation.type === instructionType) {\n        return [];\n      }\n    } else {\n      // $FlowFixMe - see above\n      const groupOfInstructionInformation: InstructionOrExpressionTreeNode = instructionOrGroup;\n      const searchResult = findInTree(\n        groupOfInstructionInformation,\n        instructionType\n      );\n      if (searchResult) {\n        return [key, ...searchResult];\n      }\n    }\n  }\n\n  return null;\n};\n","// @flow\nimport {\n  type EnumeratedInstructionOrExpressionMetadata,\n  type InstructionOrExpressionScope,\n} from './EnumeratedInstructionOrExpressionMetadata.js';\nconst gd = global.gd;\n\nconst GROUP_DELIMITER = '/';\n\ntype ExtensionsExtraInstructions = {\n  BuiltinObject?: {\n    '': Array<string>,\n  },\n  Physics2?: {\n    'Physics2::Physics2Behavior': Array<string>,\n  },\n};\n\nconst freeActionsToAddToObject: ExtensionsExtraInstructions = {\n  BuiltinObject: {\n    '': ['AjoutHasard', 'Create', 'AjoutObjConcern'],\n  },\n};\n\nconst freeConditionsToAddToObject: ExtensionsExtraInstructions = {\n  BuiltinObject: {\n    '': [\n      'AjoutHasard',\n      'AjoutObjConcern',\n      'CollisionNP',\n      'NbObjet',\n      'PickNearest',\n      'Distance',\n      'SeDirige',\n      'EstTourne',\n      'SourisSurObjet',\n    ],\n  },\n};\n\nconst freeActionsToAddToBehavior: ExtensionsExtraInstructions = {};\n\nconst freeConditionsToAddToBehavior: ExtensionsExtraInstructions = {\n  Physics2: {\n    'Physics2::Physics2Behavior': ['Physics2::Collision'],\n  },\n};\n\nconst freeInstructionsToRemove = {\n  BuiltinObject: [\n    // $FlowFixMe\n    ...freeActionsToAddToObject.BuiltinObject[''],\n    // $FlowFixMe\n    ...freeConditionsToAddToObject.BuiltinObject[''],\n  ],\n  Physics2: [\n    // $FlowFixMe\n    ...freeConditionsToAddToBehavior.Physics2['Physics2::Physics2Behavior'],\n  ],\n};\n\nconst filterInstructionsToRemove = (\n  list: Array<EnumeratedInstructionOrExpressionMetadata>,\n  typesToRemove: ?$ReadOnlyArray<string>\n) => {\n  const types = typesToRemove; // Make Flow happy\n  if (!types) return list;\n\n  return list.filter(metadata => types.indexOf(metadata.type) === -1);\n};\n\nconst enumerateExtraBehaviorInstructions = (\n  isCondition: boolean,\n  extension: gdPlatformExtension,\n  behaviorType: string,\n  prefix: string,\n  scope: InstructionOrExpressionScope\n) => {\n  const extensionName = extension.getName();\n\n  const extensionsExtraInstructions = isCondition\n    ? freeConditionsToAddToBehavior[extensionName]\n    : freeActionsToAddToBehavior[extensionName];\n  if (!extensionsExtraInstructions) {\n    return [];\n  }\n\n  const objectExtraInstructions = extensionsExtraInstructions[behaviorType];\n  if (!objectExtraInstructions) {\n    return [];\n  }\n\n  const instructionMetadataMap = isCondition\n    ? extension.getAllConditions()\n    : extension.getAllActions();\n\n  return objectExtraInstructions.map(type =>\n    enumerateInstruction(prefix, type, instructionMetadataMap.get(type), scope)\n  );\n};\n\nconst enumerateExtraObjectInstructions = (\n  isCondition: boolean,\n  extension: gdPlatformExtension,\n  objectType: string,\n  prefix: string,\n  scope: InstructionOrExpressionScope\n) => {\n  const extensionName = extension.getName();\n\n  const extensionsExtraInstructions = isCondition\n    ? freeConditionsToAddToObject[extensionName]\n    : freeActionsToAddToObject[extensionName];\n  if (!extensionsExtraInstructions) {\n    return [];\n  }\n\n  const objectExtraInstructions = extensionsExtraInstructions[objectType];\n  if (!objectExtraInstructions) {\n    return [];\n  }\n\n  const instructionMetadataMap = isCondition\n    ? extension.getAllConditions()\n    : extension.getAllActions();\n\n  return objectExtraInstructions.map(type =>\n    enumerateInstruction(prefix, type, instructionMetadataMap.get(type), scope)\n  );\n};\n\nconst enumerateInstruction = (\n  prefix: string,\n  type: string,\n  instrMetadata: gdInstructionMetadata,\n  scope: InstructionOrExpressionScope\n): EnumeratedInstructionOrExpressionMetadata => {\n  const displayedName = instrMetadata.getFullName();\n  const groupName = instrMetadata.getGroup();\n  const iconFilename = instrMetadata.getIconFilename();\n  const fullGroupName = prefix + groupName;\n\n  return {\n    type,\n    metadata: instrMetadata,\n    iconFilename,\n    displayedName,\n    fullGroupName,\n    scope,\n    isPrivate: instrMetadata.isPrivate(),\n  };\n};\n\nconst enumerateExtensionInstructions = (\n  prefix: string,\n  instructions: gdMapStringInstructionMetadata,\n  scope: InstructionOrExpressionScope\n): Array<EnumeratedInstructionOrExpressionMetadata> => {\n  //Get the map containing the metadata of the instructions provided by the extension...\n  const instructionsTypes = instructions.keys();\n  const allInstructions = [];\n\n  //... and add each instruction\n  for (let j = 0; j < instructionsTypes.size(); ++j) {\n    const type = instructionsTypes.get(j);\n    const instrMetadata = instructions.get(type);\n    if (instrMetadata.isHidden()) continue;\n\n    allInstructions.push(\n      enumerateInstruction(prefix, type, instrMetadata, scope)\n    );\n  }\n\n  return allInstructions;\n};\n\n/**\n * List all the instructions available.\n */\nexport const enumerateAllInstructions = (\n  isCondition: boolean\n): Array<EnumeratedInstructionOrExpressionMetadata> => {\n  let allInstructions = [];\n\n  const allExtensions = gd\n    .asPlatform(gd.JsPlatform.get())\n    .getAllPlatformExtensions();\n  for (let i = 0; i < allExtensions.size(); ++i) {\n    const extension = allExtensions.get(i);\n    const extensionName = extension.getName();\n    const allObjectsTypes = extension.getExtensionObjectsTypes();\n    const allBehaviorsTypes = extension.getBehaviorsTypes();\n\n    let prefix = '';\n    if (allObjectsTypes.size() > 0 || allBehaviorsTypes.size() > 0) {\n      prefix =\n        extensionName === 'BuiltinObject'\n          ? 'Common ' +\n            (isCondition ? 'conditions' : 'actions') +\n            ' for all objects'\n          : extension.getFullName();\n      prefix += GROUP_DELIMITER;\n    }\n\n    //Free instructions\n    const extensionFreeInstructions = enumerateExtensionInstructions(\n      prefix,\n      isCondition ? extension.getAllConditions() : extension.getAllActions(),\n      {\n        objectMetadata: undefined,\n        behaviorMetadata: undefined,\n      }\n    );\n    allInstructions = [\n      ...allInstructions,\n      ...filterInstructionsToRemove(\n        extensionFreeInstructions,\n        freeInstructionsToRemove[extensionName]\n      ),\n    ];\n\n    //Objects instructions:\n    for (let j = 0; j < allObjectsTypes.size(); ++j) {\n      const objectType = allObjectsTypes.get(j);\n      const objectMetadata = extension.getObjectMetadata(objectType);\n      const scope = { objectMetadata };\n      allInstructions = [\n        ...allInstructions,\n        ...enumerateExtensionInstructions(\n          prefix,\n          isCondition\n            ? extension.getAllConditionsForObject(objectType)\n            : extension.getAllActionsForObject(objectType),\n          scope\n        ),\n        ...enumerateExtraObjectInstructions(\n          isCondition,\n          extension,\n          objectType,\n          prefix,\n          scope\n        ),\n      ];\n    }\n\n    //Behaviors instructions:\n    for (let j = 0; j < allBehaviorsTypes.size(); ++j) {\n      const behaviorType = allBehaviorsTypes.get(j);\n      const behaviorMetadata = extension.getBehaviorMetadata(behaviorType);\n      const scope = { behaviorMetadata };\n\n      allInstructions = [\n        ...allInstructions,\n        ...enumerateExtensionInstructions(\n          prefix,\n          isCondition\n            ? extension.getAllConditionsForBehavior(behaviorType)\n            : extension.getAllActionsForBehavior(behaviorType),\n          scope\n        ),\n        ...enumerateExtraBehaviorInstructions(\n          isCondition,\n          extension,\n          behaviorType,\n          prefix,\n          scope\n        ),\n      ];\n    }\n  }\n\n  return allInstructions;\n};\n\nconst orderFirstInstructionsWithoutGroup = (\n  allInstructions: Array<EnumeratedInstructionOrExpressionMetadata>\n) => {\n  const noGroupInstructions = allInstructions.filter(\n    instructionMetadata => instructionMetadata.fullGroupName.length === 0\n  );\n  const instructionsWithGroups = allInstructions.filter(\n    instructionMetadata => instructionMetadata.fullGroupName.length !== 0\n  );\n\n  return [...noGroupInstructions, ...instructionsWithGroups];\n};\n\n/**\n * List all the instructions that can be used for the given object,\n * in the given context. This includes instructions for the behaviors\n * attached to the object.\n */\nexport const enumerateObjectAndBehaviorsInstructions = (\n  isCondition: boolean,\n  globalObjectsContainer: gdObjectsContainer,\n  objectsContainer: gdObjectsContainer,\n  objectName: string\n): Array<EnumeratedInstructionOrExpressionMetadata> => {\n  let allInstructions = [];\n\n  const objectType: string = gd.getTypeOfObject(\n    globalObjectsContainer,\n    objectsContainer,\n    objectName,\n    true\n  );\n  const objectBehaviorNames: Array<string> = gd\n    .getBehaviorsOfObject(\n      globalObjectsContainer,\n      objectsContainer,\n      objectName,\n      true\n    )\n    .toJSArray();\n  const objectBehaviorTypes = new Set(\n    objectBehaviorNames.map(behaviorName =>\n      gd.getTypeOfBehavior(\n        globalObjectsContainer,\n        objectsContainer,\n        behaviorName\n      )\n    )\n  );\n  const baseObjectType = ''; /* An empty string means the base object */\n\n  const allExtensions = gd\n    .asPlatform(gd.JsPlatform.get())\n    .getAllPlatformExtensions();\n  for (let i = 0; i < allExtensions.size(); ++i) {\n    const extension = allExtensions.get(i);\n    const hasObjectType =\n      extension\n        .getExtensionObjectsTypes()\n        .toJSArray()\n        .indexOf(objectType) !== -1;\n    const hasBaseObjectType =\n      extension\n        .getExtensionObjectsTypes()\n        .toJSArray()\n        .indexOf(baseObjectType) !== -1;\n    const behaviorTypes = extension\n      .getBehaviorsTypes()\n      .toJSArray()\n      .filter(behaviorType => objectBehaviorTypes.has(behaviorType));\n\n    if (!hasObjectType && !hasBaseObjectType && behaviorTypes.length === 0) {\n      continue;\n    }\n\n    const prefix = '';\n\n    //Objects instructions:\n    if (objectType !== baseObjectType && hasObjectType) {\n      const objectMetadata = extension.getObjectMetadata(objectType);\n      const scope = { objectMetadata };\n\n      allInstructions = [\n        ...allInstructions,\n        ...enumerateExtensionInstructions(\n          prefix,\n          isCondition\n            ? extension.getAllConditionsForObject(objectType)\n            : extension.getAllActionsForObject(objectType),\n          scope\n        ),\n        ...enumerateExtraObjectInstructions(\n          isCondition,\n          extension,\n          baseObjectType,\n          prefix,\n          scope\n        ),\n      ];\n    }\n\n    if (hasBaseObjectType) {\n      const objectMetadata = extension.getObjectMetadata(baseObjectType);\n      const scope = { objectMetadata };\n\n      allInstructions = [\n        ...allInstructions,\n        ...enumerateExtensionInstructions(\n          prefix,\n          isCondition\n            ? extension.getAllConditionsForObject(baseObjectType)\n            : extension.getAllActionsForObject(baseObjectType),\n          scope\n        ),\n        ...enumerateExtraObjectInstructions(\n          isCondition,\n          extension,\n          baseObjectType,\n          prefix,\n          scope\n        ),\n      ];\n    }\n\n    //Behaviors instructions (show them at the top of the list):\n    // eslint-disable-next-line\n    behaviorTypes.forEach(behaviorType => {\n      const behaviorMetadata = extension.getBehaviorMetadata(behaviorType);\n      const scope = { behaviorMetadata };\n\n      allInstructions = [\n        ...enumerateExtensionInstructions(\n          prefix,\n          isCondition\n            ? extension.getAllConditionsForBehavior(behaviorType)\n            : extension.getAllActionsForBehavior(behaviorType),\n          scope\n        ),\n        ...enumerateExtraBehaviorInstructions(\n          isCondition,\n          extension,\n          behaviorType,\n          prefix,\n          scope\n        ),\n        ...allInstructions,\n      ];\n    });\n  }\n\n  return orderFirstInstructionsWithoutGroup(allInstructions);\n};\n\n/**\n * Enumerate all the instructions that are not directly tied\n * to an object.\n */\nexport const enumerateFreeInstructions = (\n  isCondition: boolean\n): Array<EnumeratedInstructionOrExpressionMetadata> => {\n  let allFreeInstructions = [];\n\n  const allExtensions = gd\n    .asPlatform(gd.JsPlatform.get())\n    .getAllPlatformExtensions();\n  for (let i = 0; i < allExtensions.size(); ++i) {\n    const extension = allExtensions.get(i);\n    const extensionName: string = extension.getName();\n    const allObjectsTypes = extension.getExtensionObjectsTypes();\n    const allBehaviorsTypes = extension.getBehaviorsTypes();\n\n    let prefix = '';\n    if (allObjectsTypes.size() > 0 || allBehaviorsTypes.size() > 0) {\n      prefix = extensionName === 'BuiltinObject' ? '' : extension.getFullName();\n      prefix += GROUP_DELIMITER;\n    }\n\n    //Free instructions\n    const extensionFreeInstructions = enumerateExtensionInstructions(\n      prefix,\n      isCondition ? extension.getAllConditions() : extension.getAllActions(),\n      {\n        objectMetadata: undefined,\n        behaviorMetadata: undefined,\n      }\n    );\n    allFreeInstructions = [\n      ...allFreeInstructions,\n      ...filterInstructionsToRemove(\n        extensionFreeInstructions,\n        freeInstructionsToRemove[extensionName]\n      ),\n    ];\n  }\n\n  return allFreeInstructions;\n};\n\nexport type InstructionFilteringOptions = {|\n  searchText: string,\n|};\n\nexport const filterInstructionsList = (\n  list: Array<EnumeratedInstructionOrExpressionMetadata>,\n  { searchText }: InstructionFilteringOptions\n): Array<EnumeratedInstructionOrExpressionMetadata> => {\n  if (!searchText === '') {\n    return list;\n  }\n\n  const lowercaseSearch = searchText.toLowerCase();\n\n  const matchCritera = (\n    enumeratedInstructionOrExpressionMetadata: EnumeratedInstructionOrExpressionMetadata\n  ) => {\n    const {\n      displayedName,\n      fullGroupName,\n    } = enumeratedInstructionOrExpressionMetadata;\n    return (\n      displayedName.toLowerCase().indexOf(lowercaseSearch) !== -1 ||\n      fullGroupName.toLowerCase().indexOf(lowercaseSearch) !== -1\n    );\n  };\n\n  const favorExactMatch = (\n    list: Array<EnumeratedInstructionOrExpressionMetadata>\n  ): Array<EnumeratedInstructionOrExpressionMetadata> => {\n    if (!searchText) {\n      return list;\n    }\n\n    for (var i = 0; i < list.length; ++i) {\n      if (list[i].displayedName.toLowerCase() === lowercaseSearch) {\n        const exactMatch = list[i];\n        list.splice(i, 1);\n        list.unshift(exactMatch);\n      }\n    }\n\n    return list;\n  };\n\n  // See EnumerateExpressions for a similar logic for expressions\n  return favorExactMatch(list.filter(matchCritera));\n};\n\nexport const getObjectParameterIndex = (\n  instructionMetadata: gdInstructionMetadata\n) => {\n  const parametersCount = instructionMetadata.getParametersCount();\n  if (parametersCount >= 1) {\n    const firstParameterType = instructionMetadata.getParameter(0).getType();\n    if (firstParameterType === 'object') {\n      // By convention, all object conditions/actions have the object as first parameter\n      return 0;\n    }\n    if (gd.ParameterMetadata.isObject(firstParameterType)) {\n      // Some \"free condition/actions\" might be considered as \"object\" instructions, in which\n      // case they are taking an object list as fist parameter - which will be identified\n      // by gd.ParameterMetadata.isObject\n      return 0;\n    }\n\n    if (\n      firstParameterType === 'objectsContext' ||\n      firstParameterType === 'currentScene'\n    ) {\n      if (parametersCount >= 2) {\n        const secondParameterType = instructionMetadata\n          .getParameter(1)\n          .getType();\n        if (gd.ParameterMetadata.isObject(secondParameterType)) {\n          // Some special action/conditions like \"Create\", \"AjoutHasard\" (pick random object) or\n          // \"AjoutObjConcern\" (pick all objects) are \"free condition/actions\", but are manipulating\n          // objects list, so their first parameter is an \"objectsContext\" or \"currentScene\",\n          // followed by an object parameter.\n          return 1;\n        }\n      }\n    }\n  }\n\n  return -1;\n};\n","// @flow\nimport * as React from 'react';\nimport ReactDOM from 'react-dom';\n\nconst styles = {\n  container: {\n    flex: 1,\n  },\n};\n\ntype Props = {|\n  children: React.Node,\n  /**\n   * If true, scrollbar won't be shown if the content is not clipped.\n   */\n  autoHideScrollbar?: ?boolean,\n  style?: ?Object,\n|};\n\nexport type ScrollViewInterface = {|\n  scrollTo: (target: ?React$Component<any, any>) => void,\n|};\n\nexport default React.forwardRef<Props, ScrollViewInterface>(\n  ({ children, autoHideScrollbar, style }: Props, ref) => {\n    const scrollView = React.useRef((null: ?HTMLDivElement));\n    React.useImperativeHandle(ref, () => ({\n      /**\n       * Scroll the view to the target component.\n       */\n      scrollTo: (target: ?React$Component<any, any>) => {\n        const targetElement = ReactDOM.findDOMNode(target);\n        if (targetElement instanceof HTMLElement) {\n          const yPosition = targetElement.getBoundingClientRect().top;\n          const scrollViewElement = scrollView.current;\n\n          if (scrollViewElement) {\n            const scrollViewYPosition = scrollViewElement.getBoundingClientRect()\n              .top;\n            scrollViewElement.scrollTop += yPosition - scrollViewYPosition;\n          }\n        } else {\n          console.error(\n            'Tried to scroll to something that is not a HTMLElement'\n          );\n        }\n      },\n    }));\n\n    return (\n      <div\n        style={{\n          ...styles.container,\n          overflowY: autoHideScrollbar ? 'auto' : 'scroll',\n          ...style,\n        }}\n        ref={scrollView}\n      >\n        {children}\n      </div>\n    );\n  }\n);\n","import React, { Component } from 'react';\nimport Popper from '@material-ui/core/Popper';\nimport Background from '../UI/Background';\nimport ClickAwayListener from '@material-ui/core/ClickAwayListener';\nimport { Column, Line } from '../UI/Grid';\n\nconst styles = {\n  popover: {\n    paddingBottom: 10,\n    overflowY: 'auto',\n\n    // Never show a horizontal scrollbar\n    overflowX: 'hidden',\n\n    // Restrict size in case of extra small or large popover (though this should not happen)\n    minHeight: 30,\n    maxHeight: 400,\n    maxWidth: 600,\n    minWidth: 300, // Avoid extra small popover for some parameters like relational operator\n\n    // When displayed in an events sheet that has Mosaic windows (see `EditorMosaic`) next to it,\n    // it could be displayed behind them, because they have a z-index of 1 :/ Use a z-index of 2\n    // then. Only one InlinePopover should be shown at a time anyway.\n    zIndex: 2,\n  },\n};\n\nexport default class InlinePopover extends Component {\n  render() {\n    return (\n      <ClickAwayListener onClickAway={this.props.onRequestClose}>\n        <Popper\n          open={this.props.open}\n          anchorEl={this.props.anchorEl}\n          style={styles.popover}\n          placement=\"bottom\"\n        >\n          <Background>\n            <Column expand>\n              <Line>{this.props.children}</Line>\n            </Column>\n          </Background>\n        </Popper>\n      </ClickAwayListener>\n    );\n  }\n}\n","// @flow\nimport * as React from 'react';\nimport { t } from '@lingui/macro';\nimport ToolbarIcon from '../../UI/ToolbarIcon';\nimport ElementWithMenu from '../../UI/Menu/ElementWithMenu';\n\nexport type PreviewButtonSettings = {|\n  isPreviewFirstSceneOverriden: boolean,\n  previewFirstSceneName: string,\n  useSceneAsPreviewFirstScene: ?() => void,\n  togglePreviewFirstSceneOverride: ?() => void,\n|};\n\nexport const emptyPreviewButtonSettings: PreviewButtonSettings = {\n  isPreviewFirstSceneOverriden: false,\n  previewFirstSceneName: '',\n  useSceneAsPreviewFirstScene: null,\n  togglePreviewFirstSceneOverride: null,\n};\n\ntype Props = {|\n  onPreview: () => void,\n  onOpenDebugger: () => void,\n  onNetworkPreview: () => void,\n  showNetworkPreviewButton: boolean,\n  showPreviewButton: boolean,\n  previewButtonSettings: PreviewButtonSettings,\n|};\n\nexport default function PreviewButtons({\n  onPreview,\n  onNetworkPreview,\n  onOpenDebugger,\n  showNetworkPreviewButton,\n  showPreviewButton,\n  previewButtonSettings,\n}: Props) {\n  const {\n    isPreviewFirstSceneOverriden,\n    previewFirstSceneName,\n    useSceneAsPreviewFirstScene,\n    togglePreviewFirstSceneOverride,\n  } = previewButtonSettings;\n\n  const canOverridePreviewFirstScene =\n    useSceneAsPreviewFirstScene && togglePreviewFirstSceneOverride;\n  const previewIcon = (\n    <ToolbarIcon\n      onClick={onPreview}\n      src={\n        isPreviewFirstSceneOverriden\n          ? 'res/ribbon_default/previewOverride32.png'\n          : 'res/ribbon_default/preview32.png'\n      }\n      tooltip={\n        !canOverridePreviewFirstScene\n          ? t`Launch a preview of the scene`\n          : isPreviewFirstSceneOverriden\n          ? t`Preview is overridden, right click for more`\n          : t`Launch a preview of the scene, right click for more`\n      }\n    />\n  );\n\n  return (\n    <React.Fragment>\n      {showPreviewButton &&\n        (!canOverridePreviewFirstScene ? (\n          previewIcon\n        ) : (\n          <ElementWithMenu\n            element={previewIcon}\n            openMenuWithSecondaryClick\n            buildMenuTemplate={() => [\n              ...(previewFirstSceneName\n                ? [\n                    {\n                      type: 'checkbox',\n                      label:\n                        'Start all previews from scene ' +\n                        previewFirstSceneName,\n                      checked: isPreviewFirstSceneOverriden,\n                      click: togglePreviewFirstSceneOverride,\n                    },\n                    { type: 'separator' },\n                  ]\n                : []),\n              {\n                label: 'Use this scene to start all previews',\n                click: useSceneAsPreviewFirstScene,\n              },\n            ]}\n          />\n        ))}\n      {showNetworkPreviewButton && (\n        <ElementWithMenu\n          element={\n            <ToolbarIcon\n              src=\"res/ribbon_default/bug32.png\"\n              tooltip={t`Advanced preview options (debugger, network preview...)`}\n            />\n          }\n          buildMenuTemplate={() => [\n            {\n              label: 'Network preview (Preview over WiFi/LAN)',\n              click: () => onNetworkPreview(),\n            },\n            { type: 'separator' },\n            {\n              label: 'Preview with debugger and performance profiler',\n              click: () => onOpenDebugger(),\n            },\n          ]}\n        />\n      )}\n    </React.Fragment>\n  );\n}\n","// @flow\nimport * as React from 'react';\n\nexport type ScreenType = 'normal' | 'touch';\n\nlet userHasTouchedScreen = false;\nif (typeof window !== 'undefined') {\n  window.addEventListener(\n    'touchstart',\n    function onFirstTouch() {\n      console.info('Touch detected, considering the screen as touch enabled.');\n      userHasTouchedScreen = true;\n      window.removeEventListener('touchstart', onFirstTouch, false);\n    },\n    false\n  );\n}\n\ntype Props = {|\n  children: (screenType: ScreenType) => React.Node,\n|};\n\n/**\n * Check if the screen is a touchscreen or not.\n */\nexport const ScreenTypeMeasurer = ({ children }: Props) => {\n  if (typeof window === 'undefined') {\n    return children('normal');\n  }\n\n  return children(userHasTouchedScreen ? 'touch' : 'normal');\n};\n","// @flow\nimport { t } from '@lingui/macro';\nimport { Trans } from '@lingui/macro';\nimport IconButton from '../../UI/IconButton';\nimport Measure from 'react-measure';\nimport * as React from 'react';\nimport ResourcesLoader from '../../ResourcesLoader';\nimport { Column } from '../../UI/Grid';\nimport MiniToolbar from '../../UI/MiniToolbar';\nimport ZoomIn from '@material-ui/icons/ZoomIn';\nimport ZoomOut from '@material-ui/icons/ZoomOut';\nimport ZoomOutMap from '@material-ui/icons/ZoomOutMap';\nimport PlaceholderMessage from '../../UI/PlaceholderMessage';\nimport Text from '../../UI/Text';\n\nconst MARGIN = 50;\nconst MAX_ZOOM_FACTOR = 10;\nconst MIN_ZOOM_FACTOR = 0.1;\n\nconst styles = {\n  imagePreviewContainer: {\n    position: 'relative',\n    display: 'inline-block',\n    width: '100%',\n    border: '#AAAAAA 1px solid',\n    overflow: 'scroll',\n    height: 200,\n    background: 'url(\"res/transparentback.png\") repeat',\n\n    // The container contains the image and the \"overlay\" that can display\n    // points or polygons that can be drag'n'dropped. `touch-action` must\n    // be set to `none`, otherwise the (mobile) browser will claim the\n    // `pointermove` event for \"native\" behavior like panning the page.\n    touchAction: 'none',\n  },\n  spriteThumbnailImage: {\n    position: 'relative',\n    pointerEvents: 'none',\n    margin: MARGIN,\n  },\n  box: {\n    border: '1px solid black',\n  },\n};\n\ntype Props = {|\n  project: gdProject,\n  resourceName: string,\n  resourcePath?: string,\n  resourcesLoader: typeof ResourcesLoader,\n  renderOverlay?: ({|\n    imageWidth: number,\n    imageHeight: number,\n    imageZoomFactor: number,\n  |}) => React.Node,\n  style?: Object,\n  onSize?: (number, number) => void,\n|};\n\ntype State = {|\n  errored: boolean,\n  imageWidth: ?number,\n  imageHeight: ?number,\n  imageSource: ?string,\n  imageZoomFactor: number,\n|};\n\n/**\n * Display the preview for a resource of a project with kind \"image\".\n */\nexport default class ImagePreview extends React.Component<Props, State> {\n  _container: ?HTMLDivElement = null;\n\n  state = {\n    errored: false,\n    imageWidth: null,\n    imageHeight: null,\n    imageZoomFactor: 1,\n    ...this._loadFrom(this.props),\n  };\n\n  componentWillReceiveProps(newProps: Props) {\n    if (\n      newProps.resourceName !== this.props.resourceName ||\n      newProps.project !== this.props.project ||\n      newProps.resourcesLoader !== this.props.resourcesLoader ||\n      newProps.resourcePath !== this.props.resourcePath\n    ) {\n      this.setState(this._loadFrom(newProps));\n    }\n  }\n\n  _loadFrom(props: Props): {| errored: boolean, imageSource: ?string |} {\n    const { project, resourceName, resourcesLoader } = props;\n    return {\n      errored: false,\n      imageSource: resourcesLoader.getResourceFullUrl(project, resourceName),\n    };\n  }\n\n  _handleImageError = () => {\n    this.setState({\n      errored: true,\n    });\n  };\n\n  _handleImageLoaded = (e: any) => {\n    const imgElement = e.target;\n\n    const imageWidth = imgElement\n      ? imgElement.naturalWidth || imgElement.clientWidth\n      : 0;\n    const imageHeight = imgElement\n      ? imgElement.naturalHeight || imgElement.clientHeight\n      : 0;\n    this.setState({\n      imageWidth,\n      imageHeight,\n    });\n    if (this.props.onSize) this.props.onSize(imageWidth, imageHeight);\n  };\n\n  _zoomBy = (imageZoomFactorDelta: number) => {\n    this._zoomTo(this.state.imageZoomFactor + imageZoomFactorDelta);\n  };\n\n  _zoomTo = (imageZoomFactor: number) => {\n    this.setState(state => ({\n      imageZoomFactor: Math.min(\n        MAX_ZOOM_FACTOR,\n        Math.max(MIN_ZOOM_FACTOR, imageZoomFactor)\n      ),\n    }));\n  };\n\n  render() {\n    return (\n      <Measure>\n        {dimensions => {\n          const containerWidth = dimensions.width;\n          const { resourceName, style, renderOverlay } = this.props;\n          const {\n            imageHeight,\n            imageWidth,\n            imageSource,\n            imageZoomFactor,\n          } = this.state;\n\n          const imageLoaded =\n            !!imageWidth && !!imageHeight && !this.state.errored;\n\n          const imagePositionTop = 0;\n          const imagePositionLeft = Math.max(\n            0,\n            containerWidth / 2 -\n              ((imageWidth || 0) * imageZoomFactor) / 2 -\n              MARGIN\n          );\n\n          const imageStyle = {\n            ...styles.spriteThumbnailImage,\n            top: imagePositionTop,\n            left: imagePositionLeft,\n            width: imageWidth ? imageWidth * imageZoomFactor : undefined,\n            height: imageHeight ? imageHeight * imageZoomFactor : undefined,\n            visibility: imageLoaded ? undefined : 'hidden', // TODO: Loader\n          };\n\n          const overlayStyle = {\n            position: 'absolute',\n            top: imagePositionTop + MARGIN,\n            left: imagePositionLeft + MARGIN,\n            width: imageWidth ? imageWidth * imageZoomFactor : undefined,\n            height: imageHeight ? imageHeight * imageZoomFactor : undefined,\n            visibility: imageLoaded ? undefined : 'hidden', // TODO: Loader\n          };\n\n          return (\n            <Column expand noMargin>\n              <MiniToolbar>\n                <IconButton\n                  onClick={() => this._zoomBy(+0.2)}\n                  tooltip={t`Zoom in (you can also use Ctrl + Mouse wheel)`}\n                >\n                  <ZoomIn />\n                </IconButton>\n                <IconButton\n                  onClick={() => this._zoomBy(-0.2)}\n                  tooltip={t`Zoom out (you can also use Ctrl + Mouse wheel)`}\n                >\n                  <ZoomOut />\n                </IconButton>\n                <IconButton\n                  onClick={() => this._zoomTo(1)}\n                  tooltip={t`Restore original size`}\n                >\n                  <ZoomOutMap />\n                </IconButton>\n              </MiniToolbar>\n              <div\n                style={{ ...styles.imagePreviewContainer, ...style }}\n                ref={container => (this._container = container)}\n                onWheel={event => {\n                  const { deltaY } = event;\n                  //TODO: Use KeyboardShortcuts\n                  if (event.metaKey || event.ctrlKey) {\n                    this._zoomBy(deltaY / 500);\n                    event.preventDefault();\n                    event.stopPropagation();\n                  } else {\n                    // Let the usual, native vertical or horizontal scrolling happen.\n                  }\n                }}\n              >\n                {!!this.state.errored && (\n                  <PlaceholderMessage>\n                    <Text>\n                      <Trans>Unable to load the image</Trans>\n                    </Text>\n                  </PlaceholderMessage>\n                )}\n                {!this.state.errored && (\n                  <img\n                    style={imageStyle}\n                    alt={resourceName}\n                    src={imageSource}\n                    onError={this._handleImageError}\n                    onLoad={this._handleImageLoaded}\n                    crossOrigin=\"anonymous\"\n                  />\n                )}\n                {imageLoaded && renderOverlay && (\n                  <div style={{ ...overlayStyle, ...styles.box }} />\n                )}\n                {imageLoaded && renderOverlay && (\n                  <div style={overlayStyle}>\n                    {renderOverlay({\n                      imageWidth: imageWidth || 0,\n                      imageHeight: imageHeight || 0,\n                      imageZoomFactor,\n                    })}\n                  </div>\n                )}\n              </div>\n            </Column>\n          );\n        }}\n      </Measure>\n    );\n  }\n}\n","import { mapVector, mapFor } from '../../../../Utils/MapFor';\nimport every from 'lodash/every';\nconst gd = global.gd;\n\n/**\n * Return the specified animation, direction and sprite for a SpriteObject.\n * Returns null for these elements if the specified choice is not valid.\n * @param {*} object\n * @param {*} animationIndex\n * @param {*} directionIndex\n * @param {*} spriteIndex\n */\nexport const getCurrentElements = (\n  object,\n  animationIndex,\n  directionIndex,\n  spriteIndex\n) => {\n  const hasValidAnimation = animationIndex < object.getAnimationsCount();\n  const animation = hasValidAnimation\n    ? object.getAnimation(animationIndex)\n    : null;\n  const hasValidDirection =\n    !!animation && directionIndex < animation.getDirectionsCount();\n  const direction = hasValidDirection\n    ? animation.getDirection(directionIndex)\n    : null;\n  const hasValidSprite =\n    !!direction && spriteIndex < direction.getSpritesCount();\n  const sprite = hasValidSprite ? direction.getSprite(spriteIndex) : null;\n\n  return {\n    hasValidAnimation,\n    animation,\n    hasValidDirection,\n    direction,\n    hasValidSprite,\n    sprite,\n  };\n};\n\nexport const copyPoint = (originalPoint, destinationPoint) => {\n  destinationPoint.setX(originalPoint.getX());\n  destinationPoint.setY(originalPoint.getY());\n  destinationPoint.setName(originalPoint.getName());\n};\n\nexport const copySpritePoints = (originalSprite, destinationSprite) => {\n  if (originalSprite.ptr === destinationSprite.ptr) return;\n\n  copyPoint(originalSprite.getCenter(), destinationSprite.getCenter());\n  copyPoint(originalSprite.getOrigin(), destinationSprite.getOrigin());\n  destinationSprite.setDefaultCenterPoint(\n    originalSprite.isDefaultCenterPoint()\n  );\n\n  destinationSprite.getAllNonDefaultPoints().clear();\n  mapVector(originalSprite.getAllNonDefaultPoints(), originalPoint => {\n    destinationSprite.addPoint(originalPoint);\n  });\n};\n\nexport const copyAnimationsSpritePoints = (originalSprite, animation) => {\n  mapFor(0, animation.getDirectionsCount(), i => {\n    const direction = animation.getDirection(i);\n\n    mapFor(0, direction.getSpritesCount(), j => {\n      const sprite = direction.getSprite(j);\n      copySpritePoints(originalSprite, sprite);\n    });\n  });\n};\n\nexport const isSamePoint = (point1, point2) => {\n  return (\n    point1.getX() === point2.getX() &&\n    point1.getY() === point2.getY() &&\n    point1.getName() === point2.getName()\n  );\n};\n\nexport const haveSamePoints = (sprite1, sprite2) => {\n  if (!isSamePoint(sprite1.getCenter(), sprite2.getCenter())) return false;\n  if (!isSamePoint(sprite1.getOrigin(), sprite2.getOrigin())) return false;\n  if (sprite1.isDefaultCenterPoint() !== sprite2.isDefaultCenterPoint())\n    return false;\n\n  if (\n    sprite1.getAllNonDefaultPoints().size() !==\n    sprite2.getAllNonDefaultPoints().size()\n  )\n    return false;\n\n  return every(\n    mapVector(sprite1.getAllNonDefaultPoints(), sprite1Point => {\n      if (!sprite2.hasPoint(sprite1Point.getName())) return false;\n\n      return isSamePoint(\n        sprite1Point,\n        sprite2.getPoint(sprite1Point.getName())\n      );\n    })\n  );\n};\n\nexport const allDirectionSpritesHaveSamePointsAs = (\n  originalSprite,\n  direction\n) => {\n  return every(\n    mapFor(0, direction.getSpritesCount(), j => {\n      const sprite = direction.getSprite(j);\n      return haveSamePoints(sprite, originalSprite);\n    })\n  );\n};\n\nexport const allSpritesHaveSamePointsAs = (originalSprite, animation) => {\n  return every(\n    mapFor(0, animation.getDirectionsCount(), i => {\n      const direction = animation.getDirection(i);\n      return allDirectionSpritesHaveSamePointsAs(originalSprite, direction);\n    })\n  );\n};\n\nexport const copySpritePolygons = (originalSprite, destinationSprite) => {\n  if (originalSprite.ptr === destinationSprite.ptr) return;\n\n  destinationSprite.setCollisionMaskAutomatic(\n    originalSprite.isCollisionMaskAutomatic()\n  );\n\n  destinationSprite.getCustomCollisionMask().clear();\n  mapVector(originalSprite.getCustomCollisionMask(), originalPolygon => {\n    destinationSprite.getCustomCollisionMask().push_back(originalPolygon);\n  });\n};\n\nexport const copyAnimationsSpriteCollisionMasks = (\n  originalSprite,\n  animation\n) => {\n  mapFor(0, animation.getDirectionsCount(), i => {\n    const direction = animation.getDirection(i);\n\n    mapFor(0, direction.getSpritesCount(), j => {\n      const sprite = direction.getSprite(j);\n      copySpritePolygons(originalSprite, sprite);\n    });\n  });\n};\n\nexport const isSamePolygon = (polygon1, polygon2) => {\n  const polygon1Vertices = polygon1.getVertices();\n  const polygon2Vertices = polygon2.getVertices();\n\n  if (polygon1Vertices.size() !== polygon2Vertices.size()) return false;\n\n  return every(\n    mapVector(polygon1Vertices, (point1, index) => {\n      const point2 = polygon2Vertices.at(index);\n      return (\n        point1.get_x() === point2.get_x() && point1.get_y() === point2.get_y()\n      );\n    })\n  );\n};\n\nexport const haveSameCollisionMasks = (sprite1, sprite2) => {\n  if (sprite1.isCollisionMaskAutomatic() !== sprite2.isCollisionMaskAutomatic())\n    return false;\n\n  if (sprite1.isCollisionMaskAutomatic() && sprite2.isCollisionMaskAutomatic())\n    return true;\n\n  const sprite1CollisionMask = sprite1.getCustomCollisionMask();\n  const sprite2CollisionMask = sprite2.getCustomCollisionMask();\n\n  if (sprite1CollisionMask.size() !== sprite2CollisionMask.size()) return false;\n\n  return every(\n    mapVector(sprite1CollisionMask, (sprite1Polygon, index) => {\n      return isSamePolygon(sprite1Polygon, sprite2CollisionMask.at(index));\n    })\n  );\n};\n\nexport const allDirectionSpritesHaveSameCollisionMasksAs = (\n  originalSprite,\n  direction\n) => {\n  return every(\n    mapFor(0, direction.getSpritesCount(), j => {\n      const sprite = direction.getSprite(j);\n      return haveSameCollisionMasks(sprite, originalSprite);\n    })\n  );\n};\n\nexport const allSpritesHaveSameCollisionMasksAs = (\n  originalSprite,\n  animation\n) => {\n  return every(\n    mapFor(0, animation.getDirectionsCount(), i => {\n      const direction = animation.getDirection(i);\n      return allDirectionSpritesHaveSameCollisionMasksAs(\n        originalSprite,\n        direction\n      );\n    })\n  );\n};\n\nexport const deleteSpritesFromAnimation = (animation, spritePtrs) => {\n  mapFor(0, animation.getDirectionsCount(), i => {\n    const direction = animation.getDirection(i);\n\n    const spritesToDelete = mapFor(0, direction.getSpritesCount(), j => {\n      const sprite = direction.getSprite(j);\n\n      return !!spritePtrs[sprite.ptr];\n    });\n\n    // Iterate from the end to the beginning to avoid invalidating indexes.\n    for (\n      let spriteIndex = direction.getSpritesCount() - 1;\n      spriteIndex >= 0;\n      spriteIndex--\n    ) {\n      if (spritesToDelete[spriteIndex]) direction.removeSprite(spriteIndex);\n    }\n  });\n};\n\nexport const duplicateSpritesInAnimation = (animation, spritePtrs) => {\n  mapFor(0, animation.getDirectionsCount(), i => {\n    const direction = animation.getDirection(i);\n\n    const spritesToDuplicate = mapFor(0, direction.getSpritesCount(), j => {\n      const sprite = direction.getSprite(j);\n\n      return !!spritePtrs[sprite.ptr];\n    });\n\n    // Iterate from the end to the beginning to avoid invalidating indexes.\n    for (\n      let spriteIndex = direction.getSpritesCount() - 1;\n      spriteIndex >= 0;\n      spriteIndex--\n    ) {\n      if (spritesToDuplicate[spriteIndex]) {\n        const spriteToDuplicate = direction.getSprite(spriteIndex);\n        const newSprite = new gd.Sprite();\n        newSprite.setImageName(spriteToDuplicate.getImageName());\n        copySpritePoints(spriteToDuplicate, newSprite);\n        copySpritePolygons(spriteToDuplicate, newSprite);\n\n        direction.addSprite(newSprite);\n        direction.moveSprite(direction.getSpritesCount() - 1, spriteIndex);\n      }\n    }\n  });\n};\n","//TODO: Factor with styles.js from LayersList.\nexport default {\n  handleColumn: {\n    width: 24,\n    paddingLeft: 8,\n    paddingRight: 0,\n  },\n  coordinateColumn: {\n    width: 48,\n  },\n  toolColumn: {\n    width: 48,\n  },\n};\n","import optionalRequire from '../../Utils/OptionalRequire.js';\nconst electron = optionalRequire('electron');\n\n/**\n * Wraps an Electron Menu\n */\nexport default class ElectronMenuImplementation {\n  buildFromTemplate(template) {\n    this.menuTemplate = template;\n    return undefined;\n  }\n\n  showMenu(dimensions) {\n    if (!electron) return;\n\n    const { Menu } = electron.remote;\n    const browserWindow = electron.remote.getCurrentWindow();\n    this.menu = Menu.buildFromTemplate(this.menuTemplate);\n    this.menu.popup({\n      window: browserWindow,\n      x: Math.round(dimensions.left),\n      y: Math.round(dimensions.top + dimensions.height),\n      async: true, // Ensure the UI is not blocked on macOS.\n    });\n  }\n\n  getMenuProps() {\n    return {\n      open: false,\n    };\n  }\n}\n","import React, { useState, useRef, useCallback } from 'react';\nimport Menu from '@material-ui/core/Menu';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport ArrowRightIcon from '@material-ui/icons/ArrowRight';\nimport CheckBoxIcon from '@material-ui/icons/CheckBox';\nimport CheckBoxOutlineBlankIcon from '@material-ui/icons/CheckBoxOutlineBlank';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport Divider from '@material-ui/core/Divider';\nimport Fade from '@material-ui/core/Fade';\n\nconst SubMenuItem = ({ item, buildFromTemplate }) => {\n  const [menuOpen, setMenuOpen] = useState(false);\n  const anchorElement = useRef(null);\n  const setAnchorElement = useCallback(element => {\n    anchorElement.current = element;\n  }, []);\n\n  return (\n    <React.Fragment>\n      <MenuItem\n        dense\n        key={item.label}\n        disabled={item.enabled === false}\n        onClick={event => {\n          if (item.enabled === false) {\n            return;\n          }\n\n          if (!anchorElement.current) {\n            setAnchorElement(event.currentTarget);\n          }\n\n          setMenuOpen(!menuOpen);\n        }}\n      >\n        {item.label}\n        <ArrowRightIcon />\n      </MenuItem>\n      <Menu\n        open={menuOpen}\n        anchorEl={anchorElement.current}\n        onClose={() => setMenuOpen(false)}\n        TransitionComponent={Fade}\n      >\n        {buildFromTemplate(item.submenu)}\n      </Menu>\n    </React.Fragment>\n  );\n};\n\n/**\n * Construct items for material-ui's Menu, using a template which\n * is partially supporting the Electron Menu API (https://github.com/electron/electron/blob/master/docs/api/menu-item.md).\n *\n * Supported options are:\n *  - click\n *  - visible\n *  - type ('separator' and 'checkbox')\n *  - label\n *  - accelerator\n *  - enabled\n *  - checked (when `type` is 'checkbox')\n *  - submenu\n */\nexport default class MaterialUIMenuImplementation {\n  constructor({ onClose }) {\n    this._onClose = onClose;\n  }\n\n  buildFromTemplate(template) {\n    return template\n      .map((item, id) => {\n        if (item.visible === false) return null;\n\n        // Accelerator is not implemented for Material-UI menus\n        // const accelerator = item.accelerator\n        //   ? adaptAcceleratorString(item.accelerator)\n        //   : undefined;\n\n        if (item.type === 'separator') {\n          return <Divider key={'separator' + id} />;\n          // return null;\n        } else if (item.type === 'checkbox') {\n          return (\n            <MenuItem\n              dense\n              key={'checkbox' + item.label}\n              checked={item.checked}\n              disabled={item.enabled === false}\n              onClick={() => {\n                if (item.enabled === false) {\n                  return;\n                }\n\n                if (item.click) {\n                  item.click();\n                }\n                this._onClose();\n              }}\n            >\n              <ListItemIcon>\n                {item.checked ? <CheckBoxIcon /> : <CheckBoxOutlineBlankIcon />}\n              </ListItemIcon>\n              <ListItemText primary={item.label} />\n            </MenuItem>\n          );\n        } else if (item.submenu) {\n          return (\n            <SubMenuItem\n              key={'submenu' + item.label}\n              item={item}\n              buildFromTemplate={template => this.buildFromTemplate(template)}\n            />\n          );\n        } else {\n          return (\n            <MenuItem\n              dense\n              key={'item' + item.label}\n              disabled={item.enabled === false}\n              onClick={() => {\n                if (item.enabled === false) {\n                  return;\n                }\n\n                if (item.click) {\n                  item.click();\n                  this._onClose();\n                }\n              }}\n            >\n              {item.label}\n            </MenuItem>\n          );\n        }\n      })\n      .filter(Boolean);\n  }\n\n  showMenu() {\n    // Automatically done by IconMenu\n  }\n\n  getMenuProps() {\n    return {};\n  }\n}\n","// TODO: this needs to be flow-typed\nimport React from 'react';\nimport Menu from '@material-ui/core/Menu';\nimport Fade from '@material-ui/core/Fade';\nimport ElectronMenuImplementation from './ElectronMenuImplementation';\nimport MaterialUIMenuImplementation from './MaterialUIMenuImplementation';\nimport optionalRequire from '../../Utils/OptionalRequire.js';\nconst electron = optionalRequire('electron');\n\nclass MaterialUIContextMenu extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      open: false,\n      anchorX: 0,\n      anchorY: 0,\n    };\n    this.menuImplementation = new MaterialUIMenuImplementation({\n      onClose: this._onClose,\n    });\n  }\n\n  open = (x, y) => {\n    this.setState(\n      {\n        anchorX: x,\n        anchorY: y,\n      },\n      () => {\n        this.setState({\n          open: true,\n        });\n      }\n    );\n  };\n\n  _onClose = () => {\n    this.setState({\n      open: false,\n    });\n  };\n\n  render() {\n    return (\n      <Menu\n        open={this.state.open}\n        anchorPosition={{ left: this.state.anchorX, top: this.state.anchorY }}\n        anchorReference={'anchorPosition'}\n        onClose={this._onClose}\n        TransitionComponent={Fade}\n        {...this.menuImplementation.getMenuProps()}\n      >\n        {this.menuImplementation.buildFromTemplate(\n          this.props.buildMenuTemplate()\n        )}\n      </Menu>\n    );\n  }\n}\n\nclass ElectronContextMenu extends React.Component {\n  constructor(props) {\n    super(props);\n    this.menuImplementation = new ElectronMenuImplementation();\n  }\n\n  open = (x, y) => {\n    this.menuImplementation.buildFromTemplate(this.props.buildMenuTemplate());\n    this.menuImplementation.showMenu({\n      left: x || 0,\n      top: y || 0,\n      width: 0,\n      height: 0,\n    });\n  };\n\n  render() {\n    return null;\n  }\n}\n\nexport default (electron ? ElectronContextMenu : MaterialUIContextMenu);\n","// @flow\nimport { mapFor } from '../Utils/MapFor';\n\nexport const enumerateLayouts = (project: gdProject): Array<gdLayout> =>\n  mapFor(0, project.getLayoutsCount(), i => project.getLayoutAt(i));\n\nexport const enumerateExternalEvents = (\n  project: gdProject\n): Array<gdExternalEvents> =>\n  mapFor(0, project.getExternalEventsCount(), i =>\n    project.getExternalEventsAt(i)\n  );\n\nexport const enumerateExternalLayouts = (\n  project: gdProject\n): Array<gdExternalLayout> =>\n  mapFor(0, project.getExternalLayoutsCount(), i =>\n    project.getExternalLayoutAt(i)\n  );\n\nexport const enumerateEventsFunctionsExtensions = (\n  project: gdProject\n): Array<gdEventsFunction> =>\n  mapFor(0, project.getEventsFunctionsExtensionsCount(), i =>\n    project.getEventsFunctionsExtensionAt(i)\n  );\n\nexport const filterProjectItemsList = <T>(\n  list: Array<T>,\n  searchText: string\n): Array<T> => {\n  if (!searchText) return list;\n\n  const lowercaseSearchText = searchText.toLowerCase();\n\n  return list.filter(\n    (item: any) =>\n      item\n        .getName()\n        .toLowerCase()\n        .indexOf(lowercaseSearchText) !== -1\n  );\n};\n","import { t } from '@lingui/macro';\nimport React, { Component } from 'react';\nimport TextField from '../TextField';\nimport ColorPicker from './ColorPicker';\n\nconst styles = {\n  container: {\n    position: 'relative',\n    display: 'inline-block',\n  },\n  picker: {\n    position: 'absolute',\n    right: '8px',\n    top: '26px',\n  },\n};\n\nexport default class ColorField extends Component {\n  onClick = () => {\n    if (this.textField) this.textField.blur();\n    if (this.picker) this.picker.open();\n  };\n\n  render() {\n    return (\n      <div\n        style={{\n          ...styles.container,\n          width: this.props.fullWidth ? '100%' : undefined,\n        }}\n      >\n        <TextField\n          fullWidth\n          floatingLabelText={this.props.floatingLabelText}\n          floatingLabelFixed\n          helperMarkdownText={this.props.helperMarkdownText}\n          type=\"text\"\n          hintText={t`Click to choose`}\n          onClick={this.onClick}\n          onFocus={this.onClick}\n          value=\"\"\n          ref={textField => (this.textField = textField)}\n        />\n        <div style={styles.picker}>\n          <ColorPicker {...this.props} ref={picker => (this.picker = picker)} />\n        </div>\n      </div>\n    );\n  }\n}\n","// @flow\nimport * as React from 'react';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport Checkbox from '@material-ui/core/Checkbox';\n\ntype Props = {|\n  label?: ?React.Node,\n  checked: boolean,\n  onCheck?: (e: {||}, checked: boolean) => void,\n  checkedIcon?: React.Node,\n  uncheckedIcon?: React.Node,\n  disabled?: boolean,\n|};\n\n/**\n * A checkbox based on Material-UI Checkbox, but that can be displayed\n * without having it taking the full width of its container.\n */\nexport default (props: Props) => {\n  const { onCheck } = props;\n  const checkbox = (\n    <Checkbox\n      disabled={props.disabled}\n      checked={props.checked}\n      onChange={\n        onCheck ? event => onCheck(event, event.target.checked) : undefined\n      }\n      icon={props.uncheckedIcon}\n      checkedIcon={props.checkedIcon}\n      color=\"primary\"\n    />\n  );\n  return props.label ? (\n    <FormControlLabel control={checkbox} label={props.label} />\n  ) : (\n    checkbox\n  );\n};\n","// @flow\n\nimport values from 'lodash/values';\n\nexport type InstructionsListContext = {|\n  isCondition: boolean,\n  instrsList: gdInstructionsList,\n|};\n\nexport type InstructionContext = {|\n  isCondition: boolean,\n  instrsList: gdInstructionsList,\n  instruction: gdInstruction,\n  indexInList: number,\n|};\n\nexport type ParameterContext = {|\n  isCondition: boolean,\n  instrsList: gdInstructionsList,\n  instruction: gdInstruction,\n  indexInList: number,\n  parameterIndex: number,\n  domEvent?: any,\n|};\n\nexport type EventContext = {|\n  isCondition: boolean,\n  eventsList: gdEventsList,\n  event: gdBaseEvent,\n  indexInList: number,\n|};\n\nexport type SelectionState = {\n  selectedInstructions: { [number]: InstructionContext },\n  selectedInstructionsLists: { [number]: InstructionsListContext },\n  selectedEvents: { [number]: EventContext },\n};\n\nexport const getInitialSelection = () => {\n  return {\n    selectedInstructions: {},\n    selectedEvents: {},\n    selectedInstructionsLists: {},\n  };\n};\n\nexport const getSelectedEvents = (selection: SelectionState): Array<Object> => {\n  return values(selection.selectedEvents).map(\n    (eventContext: EventContext) => eventContext.event\n  );\n};\n\nexport const getSelectedEventContexts = (\n  selection: SelectionState\n): Array<EventContext> => {\n  return values(selection.selectedEvents);\n};\n\nexport const getSelectedInstructions = (\n  selection: SelectionState\n): Array<gdInstruction> => {\n  return values(selection.selectedInstructions).map(\n    (instructionContext: InstructionContext) => instructionContext.instruction\n  );\n};\n\nexport const getSelectedInstructionsContexts = (\n  selection: SelectionState\n): Array<InstructionContext> => {\n  return values(selection.selectedInstructions);\n};\n\nexport const getSelectedInstructionsListsContexts = (\n  selection: SelectionState\n): Array<InstructionContext> => {\n  return values(selection.selectedInstructionsLists);\n};\n\nexport const isEventSelected = (\n  selection: SelectionState,\n  event: Object\n): boolean => {\n  return !!selection.selectedEvents[event.ptr];\n};\n\nexport const isInstructionSelected = (\n  selection: SelectionState,\n  instruction: gdInstruction\n): boolean => {\n  return !!selection.selectedInstructions[instruction.ptr];\n};\n\nexport const isInstructionsListSelected = (\n  selection: SelectionState,\n  instructionsList: gdInstructionsList\n): boolean => {\n  return !!selection.selectedInstructionsLists[instructionsList.ptr];\n};\n\nexport const hasEventSelected = (selection: SelectionState): boolean => {\n  return !!Object.keys(selection.selectedEvents).length;\n};\n\nexport const hasInstructionSelected = (selection: SelectionState): boolean => {\n  return !!Object.keys(selection.selectedInstructions).length;\n};\n\nexport const hasSelectedAtLeastOneCondition = (\n  selection: SelectionState\n): boolean => {\n  for (let instructionContext of getSelectedInstructionsContexts(selection)) {\n    if (instructionContext.isCondition) {\n      return true;\n    }\n  }\n  return false;\n};\n\nexport const hasInstructionsListSelected = (\n  selection: SelectionState\n): boolean => {\n  return !!Object.keys(selection.selectedInstructionsLists).length;\n};\n\nexport const hasSomethingSelected = (selection: SelectionState): boolean => {\n  return (\n    hasInstructionSelected(selection) ||\n    hasInstructionsListSelected(selection) ||\n    hasEventSelected(selection)\n  );\n};\n\nexport const clearSelection = (): SelectionState => {\n  return getInitialSelection();\n};\n\nexport const selectEvent = (\n  selection: SelectionState,\n  eventContext: EventContext,\n  multiSelection: boolean = false\n): SelectionState => {\n  const event = eventContext.event;\n  if (isEventSelected(selection, event)) return selection;\n\n  const existingSelection = multiSelection ? selection : clearSelection();\n  return {\n    ...existingSelection,\n    selectedEvents: {\n      ...existingSelection.selectedEvents,\n      [event.ptr]: eventContext,\n    },\n  };\n};\n\nexport const selectInstruction = (\n  selection: SelectionState,\n  instructionContext: InstructionContext,\n  multiSelection: boolean = false\n): SelectionState => {\n  const instruction: gdInstruction = instructionContext.instruction;\n  if (isInstructionSelected(selection, instruction)) return selection;\n\n  const existingSelection = multiSelection ? selection : clearSelection();\n  return {\n    ...existingSelection,\n    selectedInstructions: {\n      ...existingSelection.selectedInstructions,\n      [instruction.ptr]: instructionContext,\n    },\n  };\n};\n\nexport const selectInstructionsList = (\n  selection: SelectionState,\n  instructionsListContext: InstructionsListContext,\n  multiSelection: boolean = false\n): SelectionState => {\n  const instructionsList: gdInstructionsList =\n    instructionsListContext.instrsList;\n  if (isInstructionsListSelected(selection, instructionsList)) return selection;\n\n  const existingSelection = multiSelection ? selection : clearSelection();\n  return {\n    ...existingSelection,\n    selectedInstructionsLists: {\n      ...existingSelection.selectedInstructionsLists,\n      [instructionsList.ptr]: instructionsListContext,\n    },\n  };\n};\n","// @flow\nimport * as React from 'react';\nimport ReactDOM from 'react-dom';\nimport Popper from '@material-ui/core/Popper';\nimport muiZIndex from '@material-ui/core/styles/zIndex';\nimport Functions from '@material-ui/icons/Functions';\nimport RaisedButton from '../../../UI/RaisedButton';\nimport SemiControlledTextField from '../../../UI/SemiControlledTextField';\nimport { mapVector } from '../../../Utils/MapFor';\nimport ExpressionSelector from '../../InstructionEditor/InstructionOrExpressionSelector/ExpressionSelector';\nimport ExpressionParametersEditorDialog, {\n  type ParameterValues,\n} from './ExpressionParametersEditorDialog';\nimport { formatExpressionCall } from './FormatExpressionCall';\nimport { type EnumeratedInstructionOrExpressionMetadata } from '../../../InstructionOrExpression/EnumeratedInstructionOrExpressionMetadata.js';\nimport { type ParameterFieldProps } from '../ParameterFieldCommons';\nimport BackgroundHighlighting, {\n  type Highlight,\n} from './BackgroundHighlighting';\nimport debounce from 'lodash/debounce';\nimport ClickAwayListener from '@material-ui/core/ClickAwayListener';\nimport Paper from '@material-ui/core/Paper';\nimport { TextFieldWithButtonLayout } from '../../../UI/Layout';\nimport {\n  type ExpressionAutocompletion,\n  insertAutocompletionInExpression,\n  getAutocompletionsFromDescriptions,\n} from '../../../ExpressionAutocompletion';\nimport {\n  type AutocompletionsState,\n  getAutocompletionsInitialState,\n  setNewAutocompletions,\n  handleAutocompletionsKeyDown,\n  getVisibleAutocompletions,\n  getRemainingCount,\n} from './ExpressionAutocompletionsHandler';\nimport ExpressionAutocompletionsDisplayer from './ExpressionAutocompletionsDisplayer';\nconst gd = global.gd;\n\nconst styles = {\n  container: {\n    display: 'flex',\n    alignItems: 'flex-start',\n  },\n  textFieldContainer: {\n    flex: 1,\n    minWidth: 300,\n  },\n  textFieldAndHightlightContainer: {\n    position: 'relative',\n  },\n  expressionSelectorPopoverContent: {\n    display: 'flex',\n    maxHeight: 250,\n  },\n  input: {\n    fontFamily: '\"Lucida Console\", Monaco, monospace',\n    lineHeight: 1.4,\n  },\n  backgroundHighlightingWithFloatingLabel: {\n    marginTop: 29, //Properly align with the text field\n    paddingLeft: 12,\n    paddingRight: 12,\n  },\n  backgroundHighlightingInline: {\n    marginTop: 6, //Properly align with the text field\n    paddingLeft: 0,\n    paddingRight: 0,\n  },\n  backgroundHighlightingInlineWithFloatingLabel: {\n    marginTop: 22, //Properly align with the text field\n    paddingLeft: 0,\n    paddingRight: 0,\n  },\n};\n\ntype State = {|\n  popoverOpen: boolean,\n  parametersDialogOpen: boolean,\n  selectedExpressionInfo: ?EnumeratedInstructionOrExpressionMetadata,\n  validatedValue: string,\n  errorText: ?string,\n  errorHighlights: Array<Highlight>,\n  autocompletions: AutocompletionsState,\n|};\n\ntype Props = {|\n  expressionType: 'number' | 'string',\n  renderExtraButton?: ({|\n    style: Object,\n  |}) => React.Node,\n  ...ParameterFieldProps,\n|};\n\nconst MAX_ERRORS_COUNT = 10;\n\nconst extractErrors = (\n  expressionNode: gdExpressionNode\n): {|\n  errorText: ?string,\n  errorHighlights: Array<Highlight>,\n|} => {\n  const expressionValidator = new gd.ExpressionValidator();\n  expressionNode.visit(expressionValidator);\n  const errors = expressionValidator.getErrors();\n\n  const errorHighlights: Array<Highlight> = mapVector(errors, error => ({\n    begin: error.getStartPosition(),\n    end: error.getEndPosition() + 1,\n    message: error.getMessage(),\n    type: 'error',\n  }));\n  const otherErrorsCount = Math.max(\n    0,\n    errorHighlights.length - MAX_ERRORS_COUNT\n  );\n  const hasMultipleErrors = errorHighlights.length > 1;\n\n  const filteredErrorHighlights =\n    otherErrorsCount > 0\n      ? errorHighlights.slice(0, MAX_ERRORS_COUNT)\n      : errorHighlights;\n\n  const errorText = filteredErrorHighlights\n    .map(\n      (highlight, i) =>\n        (hasMultipleErrors ? `[${i + 1}] ` : '') + highlight.message\n    )\n    .join(' ');\n\n  expressionValidator.delete();\n\n  return { errorText, errorHighlights };\n};\n\nexport default class ExpressionField extends React.Component<Props, State> {\n  _field: ?SemiControlledTextField = null;\n  _fieldElement: ?Element = null;\n  _inputElement: ?HTMLInputElement = null;\n\n  state = {\n    popoverOpen: false,\n    parametersDialogOpen: false,\n    selectedExpressionInfo: null,\n\n    validatedValue: this.props.value,\n    errorText: null,\n    errorHighlights: [],\n    autocompletions: getAutocompletionsInitialState(),\n  };\n\n  componentDidMount() {\n    if (this._field) {\n      const node = ReactDOM.findDOMNode(this._field);\n      if (node instanceof Element) {\n        this._fieldElement = node;\n      }\n      this._inputElement = this._field ? this._field.getInputNode() : null;\n    }\n  }\n\n  focus = () => {\n    if (this._field) {\n      this._field.focus();\n      this._enqueueValidation();\n    }\n  };\n\n  _openExpressionPopover = () => {\n    this.setState({\n      popoverOpen: true,\n    });\n  };\n\n  _handleFocus = (event: { preventDefault: () => void }) => {\n    // This prevents ghost click.\n    event.preventDefault();\n  };\n\n  _handleRequestClose = () => {\n    this.setState({\n      popoverOpen: false,\n    });\n  };\n\n  _handleChange = (value: string) => {\n    this.setState(\n      {\n        validatedValue: value,\n      },\n      () => this._enqueueValidation()\n    );\n  };\n\n  _handleBlur = (event: { currentTarget: { value: string } }) => {\n    const value = event.currentTarget.value;\n    if (this.props.onChange) this.props.onChange(value);\n    this.setState({ validatedValue: value }, () => {\n      this._enqueueValidation.cancel();\n      this._doValidation();\n      this.setState({\n        autocompletions: getAutocompletionsInitialState(),\n      });\n    });\n  };\n\n  _handleExpressionChosen = (\n    expressionInfo: EnumeratedInstructionOrExpressionMetadata\n  ) => {\n    this.setState({\n      popoverOpen: false,\n      parametersDialogOpen: true,\n      selectedExpressionInfo: expressionInfo,\n    });\n  };\n\n  insertExpression = (\n    expressionInfo: EnumeratedInstructionOrExpressionMetadata,\n    parameterValues: ParameterValues\n  ) => {\n    if (!this._inputElement) return;\n    const cursorPosition = this._inputElement.selectionStart;\n\n    const functionCall = formatExpressionCall(expressionInfo, parameterValues);\n\n    // Generate the expression with the function call\n    const { value } = this.props;\n    const newValue =\n      value.substr(0, cursorPosition) +\n      functionCall +\n      value.substr(cursorPosition);\n\n    // Apply changes\n    if (this.props.onChange) this.props.onChange(newValue);\n    this.setState(\n      {\n        validatedValue: newValue,\n      },\n      () => this._enqueueValidation()\n    );\n\n    // Focus again and select what was just added.\n    setTimeout(() => {\n      if (this._field) this._field.focus();\n\n      setTimeout(() => {\n        if (this._inputElement) {\n          this._inputElement.setSelectionRange(\n            cursorPosition,\n            cursorPosition + functionCall.length\n          );\n        }\n      }, 5);\n    }, 5);\n  };\n\n  _insertAutocompletion = (\n    expressionAutocompletion: ExpressionAutocompletion\n  ) => {\n    // If the completion is exact, it's not a completion but just\n    // shown for informing the user.\n    if (expressionAutocompletion.isExact) return;\n\n    const caretLocation = this._inputElement\n      ? this._inputElement.selectionStart\n      : 0;\n    const expression = this.state.validatedValue;\n\n    const {\n      expression: newExpression,\n      caretLocation: newCaretLocation,\n    } = insertAutocompletionInExpression(\n      { expression, caretLocation },\n      {\n        completion: expressionAutocompletion.completion,\n        addParenthesis: expressionAutocompletion.addParenthesis,\n        addDot: expressionAutocompletion.addDot,\n        addNamespaceSeparator: expressionAutocompletion.addNamespaceSeparator,\n        addClosingParenthesis: expressionAutocompletion.addClosingParenthesis,\n      }\n    );\n\n    if (this._field) {\n      this._field.forceSetValue(newExpression);\n    }\n    if (this.props.onChange) this.props.onChange(newExpression);\n    this.setState(\n      {\n        validatedValue: newExpression,\n      },\n      () => {\n        this._enqueueValidation();\n        if (this._field) {\n          this._field.forceSetSelection(newCaretLocation, newCaretLocation);\n        }\n      }\n    );\n  };\n\n  _enqueueValidation = debounce(() => {\n    this._doValidation();\n  }, 250);\n\n  _doValidation = () => {\n    const {\n      project,\n      globalObjectsContainer,\n      objectsContainer,\n      expressionType,\n      scope,\n    } = this.props;\n    if (!project) return null;\n\n    // Parsing can be time consuming (~1ms for simple expression,\n    // a few milliseconds for complex ones).\n\n    const parser = new gd.ExpressionParser2(\n      gd.JsPlatform.get(),\n      globalObjectsContainer,\n      objectsContainer\n    );\n    const expression = this.state.validatedValue;\n    const expressionNode = parser\n      .parseExpression(expressionType, expression)\n      .get();\n\n    const { errorText, errorHighlights } = extractErrors(expressionNode);\n\n    const cursorPosition = this._inputElement\n      ? this._inputElement.selectionStart\n      : 0;\n    const completionDescriptions = gd.ExpressionCompletionFinder.getCompletionDescriptionsFor(\n      expressionNode,\n      cursorPosition - 1\n    );\n    const newAutocompletions = getAutocompletionsFromDescriptions(\n      {\n        gd,\n        globalObjectsContainer,\n        objectsContainer,\n        scope,\n      },\n      completionDescriptions\n    );\n\n    parser.delete();\n\n    this.setState(state => ({\n      errorText,\n      errorHighlights,\n      autocompletions: setNewAutocompletions(\n        state.autocompletions,\n        newAutocompletions\n      ),\n    }));\n  };\n\n  render() {\n    const {\n      value,\n      expressionType,\n      parameterMetadata,\n      project,\n      scope,\n      globalObjectsContainer,\n      objectsContainer,\n      parameterRenderingService,\n    } = this.props;\n    const description = parameterMetadata\n      ? parameterMetadata.getDescription()\n      : this.props.isInline\n      ? undefined\n      : '-'; // We're using multiLine TextField, which does not support having no label.\n    const longDescription = parameterMetadata\n      ? parameterMetadata.getLongDescription()\n      : undefined;\n\n    const popoverStyle = {\n      width: this._fieldElement ? this._fieldElement.clientWidth : 'auto',\n      marginLeft: -5, // Remove the offset that the Popper has for some reason with disablePortal={true}\n      // Ensure the popper is above everything (modal, dialog, snackbar, tooltips, etc).\n      // There will be only one ExpressionSelector opened at a time, so it's fair to put the\n      // highest z index. If this is breaking, check the z-index of material-ui.\n      zIndex: muiZIndex.tooltip + 100,\n    };\n\n    const backgroundHighlightingStyle = this.props.isInline\n      ? // An inline GenericExpressionField is shown with a TextField\n        // with variant \"standard\", and no margins. The label is shown\n        // only if provided (description), so we need to adapt the margins\n        // of the background\n        description\n        ? styles.backgroundHighlightingInlineWithFloatingLabel\n        : styles.backgroundHighlightingInline\n      : // A non-inline GenericExpressionField is shown with a TextField\n        // with variant \"filled\". As we're using a *multiLine* field, it\n        // always put space for the label, even if not provided.\n        styles.backgroundHighlightingWithFloatingLabel;\n\n    return (\n      <React.Fragment>\n        <TextFieldWithButtonLayout\n          margin={this.props.isInline ? 'none' : 'dense'}\n          renderTextField={() => (\n            <div style={styles.textFieldContainer}>\n              <div style={styles.textFieldAndHightlightContainer}>\n                <BackgroundHighlighting\n                  value={this.state.validatedValue}\n                  style={{ ...styles.input, ...backgroundHighlightingStyle }}\n                  highlights={this.state.errorHighlights}\n                />\n                <SemiControlledTextField\n                  margin={this.props.isInline ? 'none' : 'dense'}\n                  value={value}\n                  floatingLabelText={description}\n                  helperMarkdownText={longDescription}\n                  hintText={expressionType === 'string' ? '\"\"' : undefined}\n                  inputStyle={styles.input}\n                  onChange={this._handleChange}\n                  onBlur={this._handleBlur}\n                  ref={field => (this._field = field)}\n                  onFocus={this._handleFocus}\n                  errorText={this.state.errorText}\n                  onClick={() => this._enqueueValidation()}\n                  onKeyDown={event => {\n                    const autocompletions = handleAutocompletionsKeyDown(\n                      this.state.autocompletions,\n                      {\n                        event,\n                        onUpdateAutocompletions: this._enqueueValidation,\n                        onInsertAutocompletion: this._insertAutocompletion,\n                      }\n                    );\n                    this.setState({ autocompletions });\n                  }}\n                  multiLine\n                  fullWidth\n                />\n              </div>\n              {this._inputElement && this.state.popoverOpen && (\n                <ClickAwayListener onClickAway={this._handleRequestClose}>\n                  <Popper\n                    style={popoverStyle}\n                    open={this.state.popoverOpen}\n                    anchorEl={this._inputElement}\n                    placement=\"bottom\"\n                    disablePortal={\n                      true /* Can't use portals as this would put the Popper outside of the Modal, which is keeping the focus in the modal (so the search bar and keyboard browsing won't not work) */\n                    }\n                  >\n                    <Paper style={styles.expressionSelectorPopoverContent}>\n                      <ExpressionSelector\n                        selectedType=\"\"\n                        onChoose={(type, expression) => {\n                          this._handleExpressionChosen(expression);\n                        }}\n                        expressionType={expressionType}\n                        focusOnMount\n                        scope={scope}\n                      />\n                    </Paper>\n                  </Popper>\n                </ClickAwayListener>\n              )}\n              {this._inputElement &&\n                !this.state.popoverOpen &&\n                parameterRenderingService && (\n                  <ExpressionAutocompletionsDisplayer\n                    project={project}\n                    anchorEl={this._inputElement}\n                    expressionAutocompletions={getVisibleAutocompletions(\n                      this.state.autocompletions\n                    )}\n                    remainingCount={getRemainingCount(\n                      this.state.autocompletions\n                    )}\n                    selectedCompletionIndex={\n                      this.state.autocompletions.selectedCompletionIndex\n                    }\n                    onChoose={expressionAutocompletion => {\n                      this._insertAutocompletion(expressionAutocompletion);\n\n                      setTimeout(\n                        this.focus,\n                        50 /* Give back the focus to the field after a completion is inserted */\n                      );\n                    }}\n                    parameterRenderingService={parameterRenderingService}\n                  />\n                )}\n            </div>\n          )}\n          renderButton={style => (\n            <React.Fragment>\n              {!this.props.isInline &&\n                this.props.renderExtraButton &&\n                this.props.renderExtraButton({\n                  style,\n                })}\n              {!this.props.isInline && (\n                <RaisedButton\n                  icon={<Functions />}\n                  label={\n                    expressionType === 'string'\n                      ? '\"ABC\"'\n                      : expressionType === 'number'\n                      ? '123'\n                      : ''\n                  }\n                  primary\n                  style={style}\n                  onClick={this._openExpressionPopover}\n                />\n              )}\n            </React.Fragment>\n          )}\n        />\n\n        {this.state.parametersDialogOpen && this.state.selectedExpressionInfo && (\n          <ExpressionParametersEditorDialog\n            project={project}\n            scope={scope}\n            globalObjectsContainer={globalObjectsContainer}\n            objectsContainer={objectsContainer}\n            expressionMetadata={this.state.selectedExpressionInfo.metadata}\n            onDone={parameterValues => {\n              if (!this.state.selectedExpressionInfo) return;\n\n              this.insertExpression(\n                this.state.selectedExpressionInfo,\n                parameterValues\n              );\n              this.setState({\n                parametersDialogOpen: false,\n                selectedExpressionInfo: null,\n              });\n            }}\n            onRequestClose={() => {\n              this.setState({\n                parametersDialogOpen: false,\n                selectedExpressionInfo: null,\n              });\n            }}\n            parameterRenderingService={parameterRenderingService}\n          />\n        )}\n      </React.Fragment>\n    );\n  }\n}\n","// @flow\nimport { Trans } from '@lingui/macro';\nimport { t } from '@lingui/macro';\nimport * as React from 'react';\nimport { List } from '../../../UI/List';\nimport SearchBar from '../../../UI/SearchBar';\nimport { type EnumeratedInstructionOrExpressionMetadata } from '../../../InstructionOrExpression/EnumeratedInstructionOrExpressionMetadata.js';\nimport {\n  type InstructionOrExpressionTreeNode,\n  findInTree,\n} from '../../../InstructionOrExpression/CreateTree';\nimport { filterInstructionsList } from '../../../InstructionOrExpression/EnumerateInstructions';\nimport ThemeConsumer from '../../../UI/Theme/ThemeConsumer';\nimport { renderInstructionOrExpressionListItem } from '../SelectorListItems/SelectorInstructionOrExpressionListItem';\nimport { renderInstructionTree } from '../SelectorListItems/SelectorInstructionsTreeListItem';\nimport EmptyMessage from '../../../UI/EmptyMessage';\nimport ScrollView, { type ScrollViewInterface } from '../../../UI/ScrollView';\nimport { Line } from '../../../UI/Grid';\nimport { ListItem } from '../../../UI/List';\nimport { getInstructionListItemValue } from '../SelectorListItems/Keys';\n\nconst styles = {\n  searchBar: {\n    backgroundColor: 'transparent',\n    flexShrink: 0,\n    zIndex: 1, // Put the SearchBar in front of the list, to display the shadow\n  },\n};\n\ntype Props = {|\n  focusOnMount?: boolean,\n  instructionsInfo: Array<EnumeratedInstructionOrExpressionMetadata>,\n  instructionsInfoTree: InstructionOrExpressionTreeNode,\n  selectedType: string,\n  onChoose: (type: string, EnumeratedInstructionOrExpressionMetadata) => void,\n  iconSize: number,\n  useSubheaders?: boolean,\n  searchPlaceholderObjectName?: ?string,\n  searchPlaceholderIsCondition?: ?boolean,\n  helpPagePath?: ?string,\n  style?: Object,\n|};\ntype State = {|\n  searchText: string,\n  searchResults: Array<EnumeratedInstructionOrExpressionMetadata>,\n|};\n\nexport default class InstructionOrExpressionSelector extends React.PureComponent<\n  Props,\n  State\n> {\n  state = {\n    searchText: '',\n    searchResults: [],\n  };\n  _searchBar: ?SearchBar;\n  _scrollView = React.createRef<ScrollViewInterface>();\n  _selectedItem = React.createRef<ListItem>();\n\n  initialInstructionTypePath = findInTree(\n    this.props.instructionsInfoTree,\n    this.props.selectedType\n  );\n\n  componentDidMount() {\n    if (this.props.focusOnMount && this._searchBar) {\n      this._searchBar.focus();\n    }\n    if (this._selectedItem.current && this._scrollView.current) {\n      this._scrollView.current.scrollTo(this._selectedItem.current);\n    }\n  }\n\n  focus = () => {\n    if (this._searchBar) this._searchBar.focus();\n  };\n\n  render() {\n    const {\n      selectedType,\n      iconSize,\n      instructionsInfoTree,\n      onChoose,\n      searchPlaceholderObjectName,\n      searchPlaceholderIsCondition,\n      useSubheaders,\n      helpPagePath,\n      style,\n    } = this.props;\n    const { searchText } = this.state;\n    const displayedInstructionsList = searchText\n      ? filterInstructionsList(this.props.instructionsInfo, { searchText })\n      : [];\n    const hasResults = !searchText || !!displayedInstructionsList.length;\n\n    const onSubmitSearch = () => {\n      if (!displayedInstructionsList.length) return;\n\n      onChoose(displayedInstructionsList[0].type, displayedInstructionsList[0]);\n    };\n\n    return (\n      <ThemeConsumer>\n        {muiTheme => (\n          <div\n            style={{\n              backgroundColor: muiTheme.list.itemsBackgroundColor,\n              ...style,\n            }}\n          >\n            <SearchBar\n              value={searchText}\n              onChange={searchText =>\n                this.setState({\n                  searchText,\n                })\n              }\n              onRequestSearch={onSubmitSearch}\n              style={styles.searchBar}\n              placeholder={\n                searchPlaceholderObjectName\n                  ? searchPlaceholderIsCondition\n                    ? t`Search ${searchPlaceholderObjectName} conditions`\n                    : t`Search ${searchPlaceholderObjectName} actions`\n                  : undefined\n              }\n              helpPagePath={helpPagePath}\n              ref={searchBar => (this._searchBar = searchBar)}\n            />\n            <ScrollView\n              ref={\n                // $FlowFixMe - improper typing of ScrollView?\n                this._scrollView\n              }\n            >\n              {hasResults && (\n                <List>\n                  {searchText\n                    ? displayedInstructionsList.map(\n                        enumeratedInstructionOrExpressionMetadata =>\n                          renderInstructionOrExpressionListItem({\n                            instructionOrExpressionMetadata: enumeratedInstructionOrExpressionMetadata,\n                            iconSize: iconSize,\n                            onClick: () =>\n                              onChoose(\n                                enumeratedInstructionOrExpressionMetadata.type,\n                                enumeratedInstructionOrExpressionMetadata\n                              ),\n                            selectedValue: getInstructionListItemValue(\n                              selectedType\n                            ),\n                          })\n                      )\n                    : renderInstructionTree({\n                        instructionTreeNode: instructionsInfoTree,\n                        iconSize,\n                        onChoose,\n                        useSubheaders,\n                        selectedValue: getInstructionListItemValue(\n                          selectedType\n                        ),\n                        initiallyOpenedPath: this.initialInstructionTypePath,\n                        selectedItemRef: this._selectedItem,\n                      })}\n                </List>\n              )}\n              {!hasResults && (\n                <Line>\n                  <EmptyMessage>\n                    <Trans>\n                      Nothing corresponding to your search. Try browsing the\n                      list instead.\n                    </Trans>\n                  </EmptyMessage>\n                </Line>\n              )}\n            </ScrollView>\n          </div>\n        )}\n      </ThemeConsumer>\n    );\n  }\n}\n","//@flow\nimport { type EventsScope } from './EventsScope.flow';\nconst gd = global.gd;\n\nexport type InstructionOrExpressionScope = {|\n  objectMetadata?: ?gdObjectMetadata,\n  behaviorMetadata?: ?gdBehaviorMetadata,\n|};\n\n// An object representing InstructionMetadata or ExpressionMetadata.\n// Allow to use most information without paying the cost to call the\n// InstructionMetadata/ExpressionMetadata methods. In theory,\n// this type and objects are redundant with InstructionMetadata and ExpressionMetadata.\nexport type EnumeratedInstructionOrExpressionMetadata = {|\n  type: string,\n  displayedName: string,\n  fullGroupName: string,\n  iconFilename: string,\n  metadata: gdInstructionMetadata | gdExpressionMetadata,\n  scope: InstructionOrExpressionScope,\n  isPrivate: boolean,\n\n  name?: string, // For expressions\n  parameters?: Array<gdParameterMetadata>, // For expressions\n|};\n\nexport const filterEnumeratedInstructionOrExpressionMetadataByScope = (\n  list: Array<EnumeratedInstructionOrExpressionMetadata>,\n  scope: EventsScope\n): Array<EnumeratedInstructionOrExpressionMetadata> => {\n  // This is copied from gd::WholeProjectRefactorer (see GetBehaviorFullType)\n  // Could be factored into a single C++ function in gd::PlatformExtension?\n  const separator = gd.PlatformExtension.getNamespaceSeparator();\n  const getBehaviorFullType = (extensionName: string, behaviorName: string) => {\n    return extensionName + separator + behaviorName;\n  };\n\n  return list.filter(enumeratedInstructionOrExpressionMetadata => {\n    if (!enumeratedInstructionOrExpressionMetadata.isPrivate) return true;\n\n    const {\n      behaviorMetadata,\n    } = enumeratedInstructionOrExpressionMetadata.scope;\n    const { eventsBasedBehavior, eventsFunctionsExtension } = scope;\n\n    if (\n      behaviorMetadata &&\n      eventsBasedBehavior &&\n      eventsFunctionsExtension &&\n      getBehaviorFullType(\n        eventsFunctionsExtension.getName(),\n        eventsBasedBehavior.getName()\n      ) === behaviorMetadata.getName()\n    ) {\n      return true;\n    }\n\n    return false;\n  });\n};\n","// @flow\nimport * as React from 'react';\nimport { type WidthType } from '../../UI/Reponsive/ResponsiveWindowMeasurer';\nimport {\n  actionsContainer,\n  conditionsContainer,\n  smallWidthContainer,\n} from './ClassNames';\n\ntype Props = {|\n  renderConditionsList: ({ style: Object, className: string }) => React.Node,\n  renderActionsList: ({ className: string }) => React.Node,\n  windowWidth: WidthType,\n  className?: string,\n  leftIndentWidth: number,\n|};\n\nconst styles = {\n  oneColumnContainer: {\n    display: 'flex',\n    flexDirection: 'column',\n  },\n  twoColumnsContainer: {\n    display: 'flex',\n  },\n};\n\n/**\n * Display the lists of instructions (conditions and actions),\n * next to each other on a big screen (with proper sizing for the conditions column),\n * and stacked on a small one.\n */\nconst ConditionsActionsColumns = (props: Props) => {\n  if (props.windowWidth === 'small') {\n    return (\n      <div style={styles.oneColumnContainer} className={props.className}>\n        {props.renderConditionsList({\n          style: {},\n          className: `${conditionsContainer} ${smallWidthContainer}`,\n        })}\n        {props.renderActionsList({\n          style: {},\n          className: `${actionsContainer} ${smallWidthContainer}`,\n        })}\n      </div>\n    );\n  }\n\n  return (\n    <div style={styles.twoColumnsContainer} className={props.className}>\n      {props.renderConditionsList({\n        style: {\n          width: `calc(35vw - ${props.leftIndentWidth}px)`,\n        },\n        className: conditionsContainer,\n      })}\n      {props.renderActionsList({ className: actionsContainer })}\n    </div>\n  );\n};\n\nexport default ConditionsActionsColumns;\n","// @flow\n\nexport default function getObjectByName(\n  project: gdProject,\n  layout?: ?gdLayout,\n  associatedObjectName: string\n): ?gdObject {\n  let associatedObject = null;\n  if (layout && layout.hasObjectNamed(associatedObjectName))\n    associatedObject = layout.getObject(associatedObjectName);\n  else if (project.hasObjectNamed(associatedObjectName))\n    associatedObject = project.getObject(associatedObjectName);\n  return associatedObject;\n}\n","// @flow\nimport { t } from '@lingui/macro';\n\nexport type Hint = {| kind: 'warning' | 'info', message: string |};\n\nexport const getDeprecatedBehaviorsInformation = (): {\n  [string]: {| warning: string |},\n} => ({\n  'PhysicsBehavior::PhysicsBehavior': {\n    warning: t`A new physics engine (Physics Engine 2.0) is now available. You should prefer using it for new game. For existing games, note that the two behaviors are not compatible, so you should only use one of them with your objects.`,\n  },\n});\n\nexport const getExperimentalObjects = (): {\n  [string]: boolean,\n} => ({\n  'Video::VideoObject': true,\n  'SkeletonObject::Skeleton': true,\n});\n\nexport const getExtraObjectsInformation = (): {\n  [string]: Array<Hint>,\n} => ({\n  'Video::VideoObject': [\n    {\n      kind: 'warning',\n      message: t`Most browsers will require the user to have interacted with your game before allowing any video to play. Make sure that the player click/touch the screen at the beginning of the game before starting any video.`,\n    },\n    {\n      kind: 'warning',\n      message: t`For a given video resource, only one video will be played in memory and displayed. If you put this object multiple times on the scene, all the instances will be displaying the exact same video (with the same timing and paused/played/stopped state).`,\n    },\n    {\n      kind: 'info',\n      message: t`Video format supported can vary according to devices and browsers. For maximum compatibility, use H.264/mp4 file format (and AAC for audio).`,\n    },\n  ],\n  'SkeletonObject::Skeleton': [\n    {\n      kind: 'warning',\n      message: t`This object is experimental and not actively maintained. It might have bugs or incomplete support in GDevelop. A maintainer is searched to improve the object implementation and solve any issue. Your help is welcome!`,\n    },\n    {\n      kind: 'info',\n      message: t`Only use this object if you can contribute back to the source code or are able to remove/replace it from your game in a future version.`,\n    },\n  ],\n});\n\nexport const getExtraInstructionInformation = (type: string): ?Hint => {\n  if (type.indexOf('PhysicsBehavior::') === 0) {\n    return {\n      kind: 'warning',\n      message: t`This action is deprecated and should not be used anymore. Instead,\n  use for all your objects the behavior called \"Physics2\" and the\n  associated actions (in this case, all objects must be set up to use\n  Physics2, you can't mix the behaviors).`,\n    };\n  }\n  if (type === 'TextObject::Size') {\n    return {\n      kind: 'warning',\n      message: t`This action will create a new texture and re-render the text each time it is called, which is expensive and can reduce performances. Prefer to avoid changing a lot the character size of a text.`,\n    };\n  }\n  if (type === 'PlayMusicCanal' || type === 'PlayMusic') {\n    return {\n      kind: 'warning',\n      message: t`Musics will only be played if the user has interacted with the game before (by clicking/touching it or pressing a key on the keyboard). This is due to browser limitations. Make sure to have the user interact with the game before using this action.`,\n    };\n  }\n\n  return null;\n};\n","// @flow\nimport { type I18n as I18nType } from '@lingui/core';\nimport { t } from '@lingui/macro';\nimport { mapVector } from '../Utils/MapFor';\nconst gd = global.gd;\n\n// This file contains the logic to declare extension metadata from\n// events functions or events based behaviors.\n// These are basically adapters from EventsFunctionsExtension, and children, to a\n// real extension declaration (like in `JsExtension.js` or `Extension.cpp` files).\n\n/**\n * Declare an extension from an events based extension.\n */\nexport const declareExtension = (\n  extension: gdPlatformExtension,\n  eventsFunctionsExtension: gdEventsFunctionsExtension\n) => {\n  extension.setExtensionInformation(\n    eventsFunctionsExtension.getName(),\n    eventsFunctionsExtension.getFullName() ||\n      eventsFunctionsExtension.getName(),\n    eventsFunctionsExtension.getDescription(),\n    '',\n    ''\n  );\n};\n\n/**\n * Declare the behavior for the given\n * events based behavior.\n */\nexport const declareBehaviorMetadata = (\n  extension: gdPlatformExtension,\n  eventsBasedBehavior: gdEventsBasedBehavior\n): gdBehaviorMetadata => {\n  const generatedBehavior = new gd.BehaviorJsImplementation();\n\n  // The functions below are keeping a reference to eventsBasedBehavior.\n  // This should be safe as if eventsBasedBehavior is deleted (i.e: the behavior\n  // is removed from its extension), then extension will be re-generated.\n\n  // Declare the properties of the behavior\n  generatedBehavior.updateProperty = function(\n    behaviorContent: gdBehaviorContent,\n    propertyName: string,\n    newValue: string\n  ) {\n    let propertyFound = false;\n    mapVector(eventsBasedBehavior.getPropertyDescriptors(), property => {\n      if (property.getName() === propertyName) {\n        propertyFound = true;\n        const element = behaviorContent.addChild(propertyName);\n        const propertyType: string = property.getType();\n\n        if (propertyType === 'String' || propertyType === 'Choice') {\n          element.setStringValue(newValue);\n        } else if (propertyType === 'Number') {\n          element.setDoubleValue(parseFloat(newValue));\n        } else if (propertyType === 'Boolean') {\n          element.setBoolValue(newValue === '1');\n        }\n      }\n    });\n\n    return propertyFound;\n  };\n\n  generatedBehavior.getProperties = function(behaviorContent) {\n    var behaviorProperties = new gd.MapStringPropertyDescriptor();\n    mapVector(eventsBasedBehavior.getPropertyDescriptors(), property => {\n      const newProperty = property.toPropertyDescriptor();\n      const propertyType: string = newProperty.getType();\n\n      if (behaviorContent.hasChild(property.getName())) {\n        if (propertyType === 'String' || propertyType === 'Choice') {\n          newProperty.setValue(\n            behaviorContent.getChild(property.getName()).getStringValue()\n          );\n        } else if (propertyType === 'Number') {\n          newProperty.setValue(\n            '' + behaviorContent.getChild(property.getName()).getDoubleValue()\n          );\n        } else if (propertyType === 'Boolean') {\n          newProperty.setValue(\n            behaviorContent.getChild(property.getName()).getBoolValue()\n              ? 'true'\n              : 'false'\n          );\n        }\n      } else {\n        // No value was serialized for this property. `newProperty`\n        // will have the default value coming from `property`.\n      }\n\n      behaviorProperties.set(property.getName(), newProperty);\n    });\n\n    return behaviorProperties;\n  };\n\n  generatedBehavior.initializeContent = function(behaviorContent) {\n    mapVector(eventsBasedBehavior.getPropertyDescriptors(), property => {\n      const element = behaviorContent.addChild(property.getName());\n      const propertyType: string = property.getType();\n\n      if (propertyType === 'String' || propertyType === 'Choice') {\n        element.setStringValue(property.getValue());\n      } else if (propertyType === 'Number') {\n        element.setDoubleValue(parseFloat(property.getValue()) || 0);\n      } else if (propertyType === 'Boolean') {\n        element.setBoolValue(property.getValue() === 'true');\n      }\n    });\n  };\n\n  return extension\n    .addBehavior(\n      eventsBasedBehavior.getName(),\n      eventsBasedBehavior.getFullName() || eventsBasedBehavior.getName(),\n      eventsBasedBehavior.getName(), // Default name is the name\n      eventsBasedBehavior.getDescription(),\n      '',\n      'res/function24.png',\n      eventsBasedBehavior.getName(), // Class name is the name, actually unused\n      generatedBehavior,\n      new gd.BehaviorsSharedData()\n    )\n    .setObjectType(eventsBasedBehavior.getObjectType());\n};\n\n/**\n * Check if the name of the function is the name of a lifecycle function (for events-based behaviors),\n * that will be called automatically by the game engine.\n */\nexport const isBehaviorLifecycleEventsFunction = (functionName: string) => {\n  return (\n    [\n      'onCreated',\n      'onActivate',\n      'onDeActivate',\n      'doStepPreEvents',\n      'doStepPostEvents',\n      'onDestroy',\n      // Compatibility with GD <= 5.0 beta 75\n      'onOwnerRemovedFromScene',\n      // end of compatibility code\n    ].indexOf(functionName) !== -1\n  );\n};\n\n/**\n * Check if the name of the function is the name of a lifecycle function (for events-based extensions),\n * that will be called automatically by the game engine.\n */\nexport const isExtensionLifecycleEventsFunction = (functionName: string) => {\n  return gd.EventsFunctionsExtension.isExtensionLifecycleEventsFunction(\n    functionName\n  );\n};\n\n/**\n * Declare the instruction (action/condition) or expression for the given\n * (free) events function.\n */\nexport const declareInstructionOrExpressionMetadata = (\n  extension: gdPlatformExtension,\n  eventsFunctionsExtension: gdEventsFunctionsExtension,\n  eventsFunction: gdEventsFunction\n): gdInstructionMetadata | gdExpressionMetadata => {\n  const functionType = eventsFunction.getFunctionType();\n  if (functionType === gd.EventsFunction.Expression) {\n    return extension.addExpression(\n      eventsFunction.getName(),\n      eventsFunction.getFullName() || eventsFunction.getName(),\n      eventsFunction.getDescription() || eventsFunction.getFullName(),\n      eventsFunctionsExtension.getFullName() ||\n        eventsFunctionsExtension.getName(),\n      'res/function.png'\n    );\n  } else if (functionType === gd.EventsFunction.StringExpression) {\n    return extension.addStrExpression(\n      eventsFunction.getName(),\n      eventsFunction.getFullName() || eventsFunction.getName(),\n      eventsFunction.getDescription() || eventsFunction.getFullName(),\n      eventsFunctionsExtension.getFullName() ||\n        eventsFunctionsExtension.getName(),\n      'res/function.png'\n    );\n  } else if (functionType === gd.EventsFunction.Condition) {\n    return extension.addCondition(\n      eventsFunction.getName(),\n      eventsFunction.getFullName() || eventsFunction.getName(),\n      eventsFunction.getDescription() || eventsFunction.getFullName(),\n      eventsFunction.getSentence(),\n      eventsFunctionsExtension.getFullName() ||\n        eventsFunctionsExtension.getName(),\n      'res/function.png',\n      'res/function24.png'\n    );\n  } else {\n    return extension.addAction(\n      eventsFunction.getName(),\n      eventsFunction.getFullName() || eventsFunction.getName(),\n      eventsFunction.getDescription() || eventsFunction.getFullName(),\n      eventsFunction.getSentence(),\n      eventsFunctionsExtension.getFullName() ||\n        eventsFunctionsExtension.getName(),\n      'res/function.png',\n      'res/function24.png'\n    );\n  }\n};\n\n/**\n * Declare the instruction (action/condition) or expression for the given\n * behavior events function.\n */\nexport const declareBehaviorInstructionOrExpressionMetadata = (\n  behaviorMetadata: gdBehaviorMetadata,\n  eventsBasedBehavior: gdEventsBasedBehavior,\n  eventsFunction: gdEventsFunction\n): gdInstructionMetadata | gdExpressionMetadata => {\n  const functionType = eventsFunction.getFunctionType();\n  if (functionType === gd.EventsFunction.Expression) {\n    return behaviorMetadata.addExpression(\n      eventsFunction.getName(),\n      eventsFunction.getFullName() || eventsFunction.getName(),\n      eventsFunction.getDescription() || eventsFunction.getFullName(),\n      eventsBasedBehavior.getFullName() || eventsBasedBehavior.getName(),\n      'res/function.png'\n    );\n  } else if (functionType === gd.EventsFunction.StringExpression) {\n    return behaviorMetadata.addStrExpression(\n      eventsFunction.getName(),\n      eventsFunction.getFullName() || eventsFunction.getName(),\n      eventsFunction.getDescription() || eventsFunction.getFullName(),\n      eventsBasedBehavior.getFullName() || eventsBasedBehavior.getName(),\n      'res/function.png'\n    );\n  } else if (functionType === gd.EventsFunction.Condition) {\n    // Use the new \"scoped\" way to declare an instruction, because\n    // we want to prevent any conflict between free functions and\n    // behaviors (that can totally have functions with the same name).\n    return behaviorMetadata.addScopedCondition(\n      eventsFunction.getName(),\n      eventsFunction.getFullName() || eventsFunction.getName(),\n      eventsFunction.getDescription() || eventsFunction.getFullName(),\n      eventsFunction.getSentence(),\n      eventsBasedBehavior.getFullName() || eventsBasedBehavior.getName(),\n      'res/function.png',\n      'res/function24.png'\n    );\n  } else {\n    // Use the new \"scoped\" way to declare an instruction, because\n    // we want to prevent any conflict between free functions and\n    // behaviors (that can totally have functions with the same name).\n    return behaviorMetadata.addScopedAction(\n      eventsFunction.getName(),\n      eventsFunction.getFullName() || eventsFunction.getName(),\n      eventsFunction.getDescription() || eventsFunction.getFullName(),\n      eventsFunction.getSentence(),\n      eventsBasedBehavior.getFullName() || eventsBasedBehavior.getName(),\n      'res/function.png',\n      'res/function24.png'\n    );\n  }\n};\n\n/**\n * Declare the instructions (actions/conditions) and expressions for the\n * properties of the given events based behavior.\n * This is akin to what would happen by manually declaring a JS extension\n * (see `JsExtension.js` files of extensions).\n */\nexport const declareBehaviorPropertiesInstructionAndExpressions = (\n  i18n: I18nType,\n  behaviorMetadata: gdBehaviorMetadata,\n  eventsBasedBehavior: gdEventsBasedBehavior\n): void => {\n  const addObjectAndBehaviorParameters = (\n    instructionOrExpression: gdInstructionMetadata | gdExpressionMetadata\n  ) => {\n    // By convention, first parameter is always the object:\n    instructionOrExpression.addParameter(\n      'object',\n      'Object',\n      '', // See below for adding the extra information\n      false\n    );\n\n    // Manually add the \"extra info\" without relying on addParameter\n    // as this method is prefixing the value passed with the extension namespace (this\n    // was done to ease extension declarations when dealing with object).\n    instructionOrExpression\n      .getParameter(instructionOrExpression.getParametersCount() - 1)\n      .setExtraInfo(eventsBasedBehavior.getObjectType());\n\n    // By convention, second parameter is always the behavior:\n    instructionOrExpression.addParameter(\n      'behavior',\n      'Behavior',\n      eventsBasedBehavior.getName(),\n      false\n    );\n\n    // All property actions/conditions/expressions are private, meaning\n    // they can only be used from the behavior events.\n    instructionOrExpression.setPrivate();\n\n    return instructionOrExpression;\n  };\n\n  mapVector(eventsBasedBehavior.getPropertyDescriptors(), property => {\n    const propertyType = property.getType();\n    const propertyName = property.getName();\n    const getterName = gd.BehaviorCodeGenerator.getBehaviorPropertyGetterName(\n      propertyName\n    );\n    const setterName = gd.BehaviorCodeGenerator.getBehaviorPropertySetterName(\n      propertyName\n    );\n    const propertyLabel =\n      property.getLabel() || i18n._(t`${propertyName} property`);\n\n    if (propertyType === 'String' || propertyType === 'Choice') {\n      addObjectAndBehaviorParameters(\n        behaviorMetadata.addStrExpression(\n          gd.EventsBasedBehavior.getPropertyExpressionName(propertyName),\n          propertyLabel,\n          propertyLabel,\n          eventsBasedBehavior.getFullName() || eventsBasedBehavior.getName(),\n          'res/function.png'\n        )\n      )\n        .getCodeExtraInformation()\n        .setFunctionName(getterName);\n\n      addObjectAndBehaviorParameters(\n        behaviorMetadata.addScopedCondition(\n          gd.EventsBasedBehavior.getPropertyConditionName(propertyName),\n          propertyLabel,\n          i18n._(t`Compare the content of ${propertyLabel}`),\n          i18n._(t`the property ${propertyName}`),\n          eventsBasedBehavior.getFullName() || eventsBasedBehavior.getName(),\n          'res/function.png'\n        )\n      )\n        .useStandardRelationalOperatorParameters('string')\n        .getCodeExtraInformation()\n        .setFunctionName(getterName);\n\n      addObjectAndBehaviorParameters(\n        behaviorMetadata.addScopedAction(\n          gd.EventsBasedBehavior.getPropertyActionName(propertyName),\n          propertyLabel,\n          i18n._(t`Change the content of ${propertyLabel}`),\n          i18n._(t`the property ${propertyName}`),\n          eventsBasedBehavior.getFullName() || eventsBasedBehavior.getName(),\n          'res/function.png'\n        )\n      )\n        .useStandardOperatorParameters('string')\n        .getCodeExtraInformation()\n        .setFunctionName(setterName)\n        .setManipulatedType('string')\n        .setGetter(getterName);\n    } else if (propertyType === 'Number') {\n      addObjectAndBehaviorParameters(\n        behaviorMetadata.addExpression(\n          gd.EventsBasedBehavior.getPropertyExpressionName(propertyName),\n          propertyLabel,\n          propertyLabel,\n          eventsBasedBehavior.getFullName() || eventsBasedBehavior.getName(),\n          'res/function.png'\n        )\n      )\n        .getCodeExtraInformation()\n        .setFunctionName(getterName);\n\n      addObjectAndBehaviorParameters(\n        behaviorMetadata.addScopedCondition(\n          gd.EventsBasedBehavior.getPropertyConditionName(propertyName),\n          propertyLabel,\n          i18n._(t`Compare the value of ${propertyLabel}`),\n          i18n._(t`the property ${propertyName}`),\n          eventsBasedBehavior.getFullName() || eventsBasedBehavior.getName(),\n          'res/function.png'\n        )\n      )\n        .useStandardRelationalOperatorParameters('number')\n        .getCodeExtraInformation()\n        .setFunctionName(getterName);\n\n      addObjectAndBehaviorParameters(\n        behaviorMetadata.addScopedAction(\n          gd.EventsBasedBehavior.getPropertyActionName(propertyName),\n          propertyLabel,\n          i18n._(t`Change the value of ${propertyLabel}`),\n          i18n._(t`the property ${propertyName}`),\n          eventsBasedBehavior.getFullName() || eventsBasedBehavior.getName(),\n          'res/function.png'\n        )\n      )\n        .useStandardOperatorParameters('number')\n        .getCodeExtraInformation()\n        .setFunctionName(setterName)\n        .setGetter(getterName);\n    } else if (propertyType === 'Boolean') {\n      addObjectAndBehaviorParameters(\n        behaviorMetadata.addScopedCondition(\n          gd.EventsBasedBehavior.getPropertyConditionName(propertyName),\n          propertyLabel,\n          i18n._(t`Check the value of ${propertyLabel}`),\n          i18n._(t`Property ${propertyName} of _PARAM0_ is true`),\n          eventsBasedBehavior.getFullName() || eventsBasedBehavior.getName(),\n          'res/function.png',\n          'res/function24.png'\n        )\n      )\n        .getCodeExtraInformation()\n        .setFunctionName(getterName);\n\n      addObjectAndBehaviorParameters(\n        behaviorMetadata.addScopedAction(\n          gd.EventsBasedBehavior.getPropertyActionName(propertyName),\n          propertyLabel,\n          i18n._(t`Update the value of ${propertyLabel}`),\n          i18n._(t`Set property ${propertyName} of _PARAM0_ to _PARAM2_`),\n          eventsBasedBehavior.getFullName() || eventsBasedBehavior.getName(),\n          'res/function.png'\n        )\n      )\n        .addParameter('yesorno', i18n._(t`New value to set`), '', false)\n        .getCodeExtraInformation()\n        .setFunctionName(setterName);\n    }\n  });\n};\n\n/**\n * Add to the instruction (action/condition) or expression the parameters\n * expected by the events function.\n */\nexport const declareEventsFunctionParameters = (\n  eventsFunction: gdEventsFunction,\n  instructionOrExpression: gdInstructionMetadata | gdExpressionMetadata\n) => {\n  mapVector(\n    eventsFunction.getParameters(),\n    (parameter: gdParameterMetadata) => {\n      if (!parameter.isCodeOnly()) {\n        instructionOrExpression.addParameter(\n          parameter.getType(),\n          parameter.getDescription(),\n          '', // See below for adding the extra information\n          parameter.isOptional()\n        );\n        instructionOrExpression.setParameterLongDescription(\n          parameter.getLongDescription()\n        );\n      } else {\n        instructionOrExpression.addCodeOnlyParameter(\n          parameter.getType(),\n          '' // See below for adding the extra information\n        );\n      }\n      // Manually add the \"extra info\" without relying on addParameter (or addCodeOnlyParameter)\n      // as these methods are prefixing the value passed with the extension namespace (this\n      // was done to ease extension declarations when dealing with object).\n      instructionOrExpression\n        .getParameter(instructionOrExpression.getParametersCount() - 1)\n        .setExtraInfo(parameter.getExtraInfo());\n    }\n  );\n\n  // By convention, latest parameter is always the eventsFunctionContext of the calling function\n  // (if any).\n  instructionOrExpression.addCodeOnlyParameter('eventsFunctionContext', '');\n};\n","// @flow\nimport { I18n } from '@lingui/react';\nimport * as React from 'react';\nimport {\n  MosaicWindow as RMMosaicWindow,\n  MosaicWithoutDragDropContext,\n  getLeaves,\n} from 'react-mosaic-component';\nimport CloseButton from './CloseButton';\nimport ThemeConsumer from '../Theme/ThemeConsumer';\nimport { type MessageDescriptor } from '../../Utils/i18n/MessageDescriptor.flow';\n\n// EditorMosaic default styling:\nimport 'react-mosaic-component/react-mosaic-component.css';\nimport './style.css';\n\nexport type Editor = {|\n  type: 'primary' | 'secondary',\n  renderEditor: () => React.Node,\n  noTitleBar?: boolean,\n  title?: MessageDescriptor,\n  toolbarControls?: Array<React.Node>,\n|};\n\ntype MosaicNode =\n  | {|\n      direction: 'row' | 'column',\n      splitPercentage: number,\n      first: ?MosaicNode,\n      second: ?MosaicNode,\n    |}\n  | string;\n\n// Add a node (an editor) in the mosaic.\nconst addNode = (\n  currentNode: ?MosaicNode,\n  newNode: MosaicNode | string,\n  position: 'start' | 'end',\n  splitPercentage: number,\n  direction: 'row' | 'column'\n): MosaicNode => {\n  if (!currentNode) return newNode;\n\n  // Add the new node inside the current node...\n  if (typeof currentNode !== 'string') {\n    if (\n      position === 'end' &&\n      currentNode.second &&\n      typeof currentNode.second !== 'string'\n    ) {\n      return {\n        ...currentNode,\n        second: addNode(\n          currentNode.second,\n          newNode,\n          position,\n          splitPercentage,\n          direction\n        ),\n      };\n    } else if (\n      position === 'start' &&\n      currentNode.first &&\n      typeof currentNode.first !== 'string'\n    ) {\n      return {\n        ...currentNode,\n        first: addNode(\n          currentNode.first,\n          newNode,\n          position,\n          splitPercentage,\n          direction\n        ),\n      };\n    }\n  }\n\n  // Or add the node here.\n  return {\n    direction:\n      direction === 'row'\n        ? // Direction of split is the opposite of what is requested for the editor\n          'column'\n        : 'row',\n    first: position === 'end' ? currentNode : newNode,\n    second: position === 'end' ? newNode : currentNode,\n    splitPercentage,\n  };\n};\n\n// Replace a node (an editor) by another.\nconst replaceNode = (\n  currentNode: ?MosaicNode,\n  oldNode: ?MosaicNode,\n  newNode: ?MosaicNode\n): ?MosaicNode => {\n  if (!currentNode) {\n    return currentNode;\n  } else if (typeof currentNode === 'string') {\n    if (currentNode === oldNode) return newNode;\n\n    return currentNode;\n  } else {\n    if (currentNode === oldNode) return newNode;\n\n    return {\n      ...currentNode,\n      first: replaceNode(currentNode.first, oldNode, newNode),\n      second: replaceNode(currentNode.second, oldNode, newNode),\n    };\n  }\n};\n\nconst defaultToolbarControls = [<CloseButton key=\"close\" />];\n\nconst renderMosaicWindowPreview = props => (\n  <div className=\"mosaic-preview\">\n    <div className=\"mosaic-window-toolbar\">\n      <div className=\"mosaic-window-title\">{props.title}</div>\n    </div>\n    <div className=\"mosaic-window-body\" />\n  </div>\n);\n\n/**\n * A window that can be used in a EditorMosaic, with a close button\n * by default in the toolbarControls and a preview when the window is\n * dragged.\n */\nconst MosaicWindow = (props: any) => (\n  <RMMosaicWindow\n    {...props}\n    toolbarControls={props.toolbarControls || defaultToolbarControls}\n    renderPreview={renderMosaicWindowPreview}\n  />\n);\n\ntype Props = {|\n  initialNodes: MosaicNode,\n  editors: {\n    [string]: Editor,\n  },\n  limitToOneSecondaryEditor?: boolean,\n|};\n\ntype State = {|\n  mosaicNode: ?MosaicNode,\n|};\n\n/**\n * @class EditorMosaic\n *\n * Can be used to create a mosaic of resizable editors.\n * Must be used inside a component wrapped in a DragDropContext.\n */\nexport default class EditorMosaic extends React.Component<Props, State> {\n  state = {\n    mosaicNode: this.props.initialNodes,\n  };\n\n  openEditor = (\n    editorName: string,\n    position: 'start' | 'end',\n    splitPercentage: number,\n    direction: 'row' | 'column'\n  ) => {\n    const { editors, limitToOneSecondaryEditor } = this.props;\n\n    const editor = this.props.editors[editorName];\n    if (!editor) return false;\n\n    const openedEditorNames = getLeaves(this.state.mosaicNode);\n    if (openedEditorNames.indexOf(editorName) !== -1) {\n      return false;\n    }\n\n    if (limitToOneSecondaryEditor && editor.type === 'secondary') {\n      // Replace the existing secondary editor, if any.\n      const secondaryEditorName = openedEditorNames.find(\n        editorName => editors[editorName].type === 'secondary'\n      );\n      if (secondaryEditorName) {\n        this.setState({\n          mosaicNode: replaceNode(\n            this.state.mosaicNode,\n            secondaryEditorName,\n            editorName\n          ),\n        });\n        return true;\n      }\n    }\n\n    // Open a new editor at the indicated position\n    this.setState({\n      mosaicNode: addNode(\n        this.state.mosaicNode,\n        editorName,\n        position,\n        splitPercentage,\n        direction\n      ),\n    });\n\n    return true;\n  };\n\n  _onChange = (mosaicNode: MosaicNode) => this.setState({ mosaicNode });\n\n  render() {\n    const { editors } = this.props;\n    return (\n      <ThemeConsumer>\n        {muiTheme => (\n          <MosaicWithoutDragDropContext\n            className={`${\n              muiTheme.mosaicRootClassName\n            } mosaic-blueprint-theme mosaic-gd-theme`}\n            renderTile={(editorName: string, path: string) => {\n              const editor = editors[editorName];\n              if (!editor) {\n                console.error(\n                  'Trying to render un unknown editor: ' + editorName\n                );\n                return null;\n              }\n\n              if (editor.noTitleBar) {\n                return editor.renderEditor();\n              }\n\n              return (\n                <I18n>\n                  {({ i18n }) => (\n                    <MosaicWindow\n                      path={path}\n                      title={i18n._(editor.title)}\n                      toolbarControls={editor.toolbarControls}\n                    >\n                      {editor.renderEditor()}\n                    </MosaicWindow>\n                  )}\n                </I18n>\n              );\n            }}\n            value={this.state.mosaicNode}\n            onChange={this._onChange}\n          />\n        )}\n      </ThemeConsumer>\n    );\n  }\n}\n","import TextEditor from './Editors/TextEditor';\nimport TiledSpriteEditor from './Editors/TiledSpriteEditor';\nimport PanelSpriteEditor from './Editors/PanelSpriteEditor';\nimport SpriteEditor from './Editors/SpriteEditor';\nimport EmptyEditor from './Editors/EmptyEditor';\nimport ShapePainterEditor from './Editors/ShapePainterEditor';\nimport ParticleEmitterEditor from './Editors/ParticleEmitterEditor';\nimport ObjectPropertiesEditor from './Editors/ObjectPropertiesEditor';\nconst gd = global.gd;\n\n/**\n * A service returning editor components for each object type.\n */\nexport default {\n  getEditorConfiguration(objectType: string) {\n    if (!this.editorConfigurations[objectType]) {\n      console.warn(\n        `Object with type ${objectType} has no editor configuration registered. Please use registerEditorConfiguration to register your editor.`\n      );\n    }\n\n    return this.editorConfigurations[objectType];\n  },\n  registerEditorConfiguration: function(objectType, editorConfiguration) {\n    if (!editorConfiguration.component) {\n      console.warn(\n        `Tried to register editor configuration for object \"${objectType}\", but \"component\" property is not defined.`\n      );\n      return;\n    }\n    if (!editorConfiguration.createNewObject) {\n      console.warn(\n        `Tried to register editor configuration for object \"${objectType}\", but \"createNewObject\" property is not defined.`\n      );\n      return;\n    }\n    if (!editorConfiguration.castToObjectType) {\n      console.warn(\n        `Tried to register editor configuration for object \"${objectType}\", but \"castToObjectType\" property is not defined.`\n      );\n      return;\n    }\n\n    if (this.editorConfigurations.hasOwnProperty(objectType)) {\n      console.warn(\n        `Tried to register editor configuration for object \"${objectType}\", but an editor configuration already exists.`\n      );\n      return;\n    }\n\n    console.info(\n      `Properly registered editor configuration for object \"${objectType}\".`\n    );\n    this.editorConfigurations[objectType] = editorConfiguration;\n  },\n  getDefaultObjectJsImplementationPropertiesEditor(options) {\n    return {\n      component: ObjectPropertiesEditor,\n      createNewObject: object =>\n        gd\n          .asObjectJsImplementation(object)\n          .clone()\n          .release(),\n      castToObjectType: object => gd.asObjectJsImplementation(object),\n      helpPagePath: options.helpPagePath,\n    };\n  },\n  editorConfigurations: {\n    Sprite: {\n      component: SpriteEditor,\n      createNewObject: () => new gd.SpriteObject(''),\n      castToObjectType: object => gd.asSpriteObject(object),\n      helpPagePath: '/objects/sprite',\n    },\n    'TiledSpriteObject::TiledSprite': {\n      component: TiledSpriteEditor,\n      createNewObject: () => new gd.TiledSpriteObject(''),\n      castToObjectType: object => gd.asTiledSpriteObject(object),\n      helpPagePath: '/objects/tiled_sprite',\n    },\n    'PanelSpriteObject::PanelSprite': {\n      component: PanelSpriteEditor,\n      createNewObject: () => new gd.PanelSpriteObject(''),\n      castToObjectType: object => gd.asPanelSpriteObject(object),\n      helpPagePath: '/objects/panel_sprite',\n    },\n    'TextObject::Text': {\n      component: TextEditor,\n      createNewObject: () => new gd.TextObject(''),\n      castToObjectType: object => gd.asTextObject(object),\n      helpPagePath: '/objects/text',\n    },\n    'PrimitiveDrawing::Drawer': {\n      component: ShapePainterEditor,\n      createNewObject: () => new gd.ShapePainterObject(''),\n      castToObjectType: object => gd.asShapePainterObject(object),\n      helpPagePath: '/objects/shape_painter',\n    },\n    'TextEntryObject::TextEntry': {\n      component: EmptyEditor,\n      createNewObject: () => new gd.TextEntryObject(''),\n      castToObjectType: object => gd.asTextEntryObject(object),\n      helpPagePath: '/objects/text_entry',\n    },\n    'ParticleSystem::ParticleEmitter': {\n      component: ParticleEmitterEditor,\n      createNewObject: () => new gd.ParticleEmitterObject(''),\n      castToObjectType: object => gd.asParticleEmitterObject(object),\n      helpPagePath: '/objects/particles_emitter',\n    },\n    'SkeletonObject::Skeleton': {\n      component: ObjectPropertiesEditor,\n      createNewObject: () => new gd.SkeletonObject(''),\n      castToObjectType: object => gd.castObject(object, gd.SkeletonObject),\n      helpPagePath: '/objects/skeleton',\n    },\n  },\n};\n","// @flow\nimport { t } from '@lingui/macro';\nimport axios from 'axios';\nimport { GDevelopUsageApi } from './ApiConfigs';\nimport { type MessageDescriptor } from '../i18n/MessageDescriptor.flow';\n\nexport type Usage = {\n  id: string,\n  userId: string,\n  type: string,\n  createdAt: number,\n};\nexport type Usages = Array<Usage>;\n\nexport type Subscription = {|\n  userId: string,\n  planId: string | null,\n  createdAt: number,\n  updatedAt: number,\n  stripeSubscriptionId?: string,\n  stripeCustomerId?: string,\n|};\n\nexport type Limit = {|\n  limitReached: boolean,\n  current: number,\n  max: number,\n|};\n\nexport type Limits = {\n  [string]: Limit,\n};\n\nexport type PlanDetails = {\n  planId: string | null,\n  name: string,\n  monthlyPriceInEuros: number,\n  smallDescription?: MessageDescriptor,\n  descriptionBullets: Array<{|\n    isLocalAppOnly?: boolean,\n    message: MessageDescriptor,\n  |}>,\n  extraDescription?: MessageDescriptor,\n};\n\nexport const getSubscriptionPlans = (): Array<PlanDetails> => [\n  {\n    planId: 'gdevelop_pro',\n    name: 'GDevelop Pro',\n    monthlyPriceInEuros: 7,\n    smallDescription: t`Ideal for advanced game makers`,\n    descriptionBullets: [\n      {\n        message: t`Package your game for Android up to 70 times a day.`,\n      },\n      {\n        message: t`One-click packaging for Windows, macOS and Linux up to 70 times a day.`,\n      },\n      {\n        message: t`Use Live Preview over Wifi to quickly test your game on mobiles and tablets.`,\n        isLocalAppOnly: true,\n      },\n      {\n        message: t`Use the Debugger to find and solve issues in your games.`,\n        isLocalAppOnly: true,\n      },\n      {\n        message: t`Immerse your players by removing GDevelop logo when the game loads.`,\n      },\n    ],\n    extraDescription: t`You'll also have access to online packaging for iOS or other services when they are released.`,\n  },\n  {\n    planId: 'gdevelop_indie',\n    name: 'GDevelop Indie',\n    monthlyPriceInEuros: 2,\n    smallDescription: t`Ideal for beginners`,\n    descriptionBullets: [\n      {\n        message: t`Package your game for Android up to 10 times a day.`,\n      },\n      {\n        message: t`One-click packaging for Windows, macOS and Linux up to 10 times a day.`,\n      },\n      {\n        message: t`Use Live Preview over Wifi to quickly test your game on mobiles and tablets.`,\n        isLocalAppOnly: true,\n      },\n      {\n        message: t`Use the Debugger to find and solve issues in your games.`,\n        isLocalAppOnly: true,\n      },\n      {\n        message: t`Immerse your players by removing GDevelop logo when the game loads`,\n      },\n    ],\n    extraDescription: t`You'll also have access to online packaging for iOS or other services when they are released.`,\n  },\n  {\n    planId: null,\n    name: 'No subscription',\n    monthlyPriceInEuros: 0,\n    descriptionBullets: [\n      {\n        message: t`You can use GDevelop for free! Online packaging for Android, Windows, macOS and Linux is limited to twice a day to avoid overloading the services.`,\n      },\n    ],\n  },\n];\n\nexport const getUserUsages = (\n  getAuthorizationHeader: () => Promise<string>,\n  userId: string\n): Promise<Usages> => {\n  return getAuthorizationHeader()\n    .then(authorizationHeader =>\n      axios.get(`${GDevelopUsageApi.baseUrl}/usage`, {\n        params: {\n          userId,\n        },\n        headers: {\n          Authorization: authorizationHeader,\n        },\n      })\n    )\n    .then(response => response.data);\n};\n\nexport const getUserLimits = (\n  getAuthorizationHeader: () => Promise<string>,\n  userId: string\n): Promise<Limits> => {\n  return getAuthorizationHeader()\n    .then(authorizationHeader =>\n      axios.get(`${GDevelopUsageApi.baseUrl}/limits`, {\n        params: {\n          userId,\n        },\n        headers: {\n          Authorization: authorizationHeader,\n        },\n      })\n    )\n    .then(response => response.data.limits);\n};\n\nexport const getUserSubscription = (\n  getAuthorizationHeader: () => Promise<string>,\n  userId: string\n): Promise<Subscription> => {\n  return getAuthorizationHeader()\n    .then(authorizationHeader =>\n      axios.get(`${GDevelopUsageApi.baseUrl}/subscription-v2`, {\n        params: {\n          userId,\n        },\n        headers: {\n          Authorization: authorizationHeader,\n        },\n      })\n    )\n    .then(response => response.data);\n};\n\nexport const changeUserSubscription = (\n  getAuthorizationHeader: () => Promise<string>,\n  userId: string,\n  newSubscriptionDetails: { planId: string | null, stripeToken?: any }\n): Promise<Subscription> => {\n  return getAuthorizationHeader()\n    .then(authorizationHeader =>\n      axios.post(\n        `${GDevelopUsageApi.baseUrl}/subscription-v2`,\n        newSubscriptionDetails,\n        {\n          params: {\n            userId,\n          },\n          headers: {\n            Authorization: authorizationHeader,\n          },\n        }\n      )\n    )\n    .then(response => response.data);\n};\n\ntype UploadType = 'build' | 'preview';\n\nexport const getSignedUrl = (params: {|\n  uploadType: UploadType,\n  key: string,\n  contentType: string,\n|}): Promise<{\n  signedUrl: string,\n}> => {\n  return axios\n    .post(`${GDevelopUsageApi.baseUrl}/upload-options/signed-url`, params)\n    .then(response => response.data);\n};\n\nexport const getRedirectToCheckoutUrl = (\n  planId: string,\n  uid: string,\n  email: string\n): string => {\n  return `${\n    GDevelopUsageApi.baseUrl\n  }/subscription-v2/redirect-to-checkout?planId=${encodeURIComponent(\n    planId\n  )}&clientReferenceId=${encodeURIComponent(\n    uid\n  )}&customerEmail=${encodeURIComponent(email)}`;\n};\n","// @flow\nimport * as React from 'react';\nimport { ListItem } from '../List';\nimport ListIcon from '../ListIcon';\nimport TextField, { noMarginTextFieldInListItemTopOffset } from '../TextField';\nimport ThemeConsumer from '../Theme/ThemeConsumer';\nimport { type MenuItemTemplate } from '../Menu/Menu.flow';\n\nconst styles = {\n  itemName: {\n    overflow: 'hidden',\n    whiteSpace: 'nowrap',\n    textOverflow: 'ellipsis',\n  },\n  textField: {\n    top: noMarginTextFieldInListItemTopOffset,\n  },\n};\n\nconst LEFT_MOUSE_BUTTON = 0;\n\ntype Props<Item> = {\n  item: Item,\n  itemName: string,\n  isBold: boolean,\n  onRename: string => void,\n  editingName: boolean,\n  getThumbnail?: () => string,\n  selected: boolean,\n  onItemSelected: (?Item) => void,\n  errorStatus: '' | 'error' | 'warning',\n  buildMenuTemplate: () => Array<MenuItemTemplate>,\n  onEdit?: ?(Item) => void,\n  hideMenuButton: boolean,\n  connectIconDragSource?: ?(React.Element<any>) => ?React.Node,\n};\n\nclass ItemRow<Item> extends React.Component<Props<Item>> {\n  textField: ?TextField;\n\n  componentDidUpdate(prevProps: Props<Item>) {\n    if (!prevProps.editingName && this.props.editingName) {\n      setTimeout(() => {\n        if (this.textField) this.textField.focus();\n      }, 100);\n    }\n  }\n\n  render() {\n    const {\n      item,\n      itemName,\n      isBold,\n      selected,\n      getThumbnail,\n      errorStatus,\n      onEdit,\n      onItemSelected,\n      hideMenuButton,\n      connectIconDragSource,\n    } = this.props;\n\n    return (\n      <ThemeConsumer>\n        {muiTheme => {\n          const label = this.props.editingName ? (\n            <TextField\n              id=\"rename-item-field\"\n              margin=\"none\"\n              ref={textField => (this.textField = textField)}\n              defaultValue={itemName}\n              onBlur={e => this.props.onRename(e.currentTarget.value)}\n              onKeyPress={event => {\n                if (event.charCode === 13) {\n                  // enter key pressed\n                  if (this.textField) this.textField.blur();\n                }\n              }}\n              fullWidth\n              style={styles.textField}\n            />\n          ) : (\n            <div\n              style={{\n                ...styles.itemName,\n                color: selected\n                  ? muiTheme.listItem.selectedTextColor\n                  : undefined,\n                fontStyle: isBold ? 'italic' : undefined,\n                fontWeight: isBold ? 'bold' : 'normal',\n              }}\n            >\n              {itemName}\n            </div>\n          );\n\n          const itemStyle = {\n            borderBottom: `1px solid ${muiTheme.listItem.separatorColor}`,\n            backgroundColor: selected\n              ? errorStatus === ''\n                ? muiTheme.listItem.selectedBackgroundColor\n                : errorStatus === 'error'\n                ? muiTheme.listItem.selectedErrorBackgroundColor\n                : muiTheme.listItem.selectedWarningBackgroundColor\n              : undefined,\n            color:\n              errorStatus === ''\n                ? undefined\n                : errorStatus === 'error'\n                ? muiTheme.listItem.errorTextColor\n                : muiTheme.listItem.warningTextColor,\n          };\n\n          const leftIcon = getThumbnail ? (\n            <ListIcon iconSize={32} src={getThumbnail()} />\n          ) : null;\n\n          return (\n            <ListItem\n              style={{ ...itemStyle }}\n              primaryText={label}\n              leftIcon={\n                connectIconDragSource && leftIcon\n                  ? connectIconDragSource(<div>{leftIcon}</div>)\n                  : leftIcon\n              }\n              displayMenuButton={!hideMenuButton}\n              buildMenuTemplate={this.props.buildMenuTemplate}\n              onClick={() => {\n                if (!onItemSelected) return;\n                if (this.props.editingName) return;\n\n                onItemSelected(selected ? null : item);\n              }}\n              onDoubleClick={event => {\n                if (event.button !== LEFT_MOUSE_BUTTON) return;\n                if (!onEdit) return;\n                if (this.props.editingName) return;\n\n                onItemSelected(null);\n                onEdit(item);\n              }}\n            />\n          );\n        }}\n      </ThemeConsumer>\n    );\n  }\n}\n\nexport default ItemRow;\n","// @flow\nimport * as React from 'react';\nimport ThemeConsumer from '../Theme/ThemeConsumer';\n\nconst styles = {\n  dropIndicator: {\n    borderTop: '2px solid #18dcf2',\n    height: 0,\n    marginTop: '-1px',\n    marginBottom: '-1px',\n    width: '100%',\n    boxSizing: 'border-box',\n  },\n};\n\nexport default function DropIndicator({ canDrop }: {| canDrop: boolean |}) {\n  return (\n    <ThemeConsumer>\n      {gdevelopTheme => (\n        <div\n          style={{\n            ...styles.dropIndicator,\n            borderColor: canDrop\n              ? gdevelopTheme.listItem.selectedBackgroundColor\n              : gdevelopTheme.listItem.selectedErrorBackgroundColor,\n          }}\n        />\n      )}\n    </ThemeConsumer>\n  );\n}\n","// @flow\r\nimport * as React from 'react';\r\nimport { List } from 'react-virtualized';\r\nimport ItemRow from './ItemRow';\r\nimport { AddListItem } from '../ListCommonItem';\r\nimport { listItemWith32PxIconHeight, listItemWithoutIconHeight } from '../List';\r\nimport { makeDragSourceAndDropTarget } from '../DragAndDrop/DragSourceAndDropTarget';\r\nimport DropIndicator from './DropIndicator';\r\nimport { ResponsiveWindowMeasurer } from '../Reponsive/ResponsiveWindowMeasurer';\r\nimport { ScreenTypeMeasurer } from '../Reponsive/ScreenTypeMeasurer';\r\nimport type { WidthType } from '../Reponsive/ResponsiveWidthMeasurer';\r\n\r\ntype Props<Item> = {|\r\n  height: number,\r\n  width: number,\r\n  fullList: Array<Item>,\r\n  selectedItems: Array<Item>,\r\n  onAddNewItem?: () => void,\r\n  addNewItemLabel?: React.Node | string,\r\n  onRename: (Item, string) => void,\r\n  getItemName: Item => string,\r\n  getItemThumbnail?: Item => string,\r\n  isItemBold?: Item => boolean,\r\n  onItemSelected: (?Item) => void,\r\n  onEditItem?: Item => void,\r\n  renamedItem: ?Item,\r\n  erroredItems?: { [string]: '' | 'error' | 'warning' },\r\n  buildMenuTemplate: (Item, index: number) => any,\r\n  onMoveSelectionToItem: (destinationItem: Item) => void,\r\n  canMoveSelectionToItem?: ?(destinationItem: Item) => boolean,\r\n  reactDndType: string,\r\n|};\r\n\r\nexport default class SortableVirtualizedItemList<Item> extends React.Component<\r\n  Props<Item>\r\n> {\r\n  _list: ?List;\r\n  DragSourceAndDropTarget = makeDragSourceAndDropTarget<Item>(\r\n    this.props.reactDndType\r\n  );\r\n\r\n  forceUpdateGrid() {\r\n    if (this._list) this._list.forceUpdateGrid();\r\n  }\r\n\r\n  _renderItemRow(\r\n    item: Item,\r\n    index: number,\r\n    windowWidth: WidthType,\r\n    connectIconDragSource?: ?(React.Element<any>) => ?React.Node\r\n  ) {\r\n    const {\r\n      selectedItems,\r\n      getItemThumbnail,\r\n      erroredItems,\r\n      isItemBold,\r\n      onEditItem,\r\n      renamedItem,\r\n      getItemName,\r\n    } = this.props;\r\n\r\n    const nameBeingEdited = renamedItem === item;\r\n    const itemName = getItemName(item);\r\n\r\n    return (\r\n      <ItemRow\r\n        item={item}\r\n        itemName={itemName}\r\n        isBold={isItemBold ? isItemBold(item) : false}\r\n        onRename={newName => this.props.onRename(item, newName)}\r\n        editingName={nameBeingEdited}\r\n        getThumbnail={\r\n          getItemThumbnail ? () => getItemThumbnail(item) : undefined\r\n        }\r\n        selected={selectedItems.indexOf(item) !== -1}\r\n        onItemSelected={this.props.onItemSelected}\r\n        errorStatus={erroredItems ? erroredItems[itemName] || '' : ''}\r\n        buildMenuTemplate={() => this.props.buildMenuTemplate(item, index)}\r\n        onEdit={onEditItem}\r\n        hideMenuButton={windowWidth === 'small'}\r\n        connectIconDragSource={connectIconDragSource || null}\r\n      />\r\n    );\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      height,\r\n      width,\r\n      fullList,\r\n      addNewItemLabel,\r\n      renamedItem,\r\n      getItemThumbnail,\r\n      onAddNewItem,\r\n      onMoveSelectionToItem,\r\n      canMoveSelectionToItem,\r\n    } = this.props;\r\n    const { DragSourceAndDropTarget } = this;\r\n\r\n    return (\r\n      <ResponsiveWindowMeasurer>\r\n        {windowWidth => (\r\n          <ScreenTypeMeasurer>\r\n            {screenType => (\r\n              <List\r\n                ref={list => (this._list = list)}\r\n                height={height}\r\n                rowCount={fullList.length + (onAddNewItem ? 1 : 0)}\r\n                rowHeight={\r\n                  getItemThumbnail\r\n                    ? listItemWith32PxIconHeight\r\n                    : listItemWithoutIconHeight\r\n                }\r\n                rowRenderer={({\r\n                  index,\r\n                  key,\r\n                  style,\r\n                }: {|\r\n                  index: number,\r\n                  key: string,\r\n                  style: Object,\r\n                |}) => {\r\n                  if (index >= fullList.length) {\r\n                    return (\r\n                      <div style={style} key={key}>\r\n                        <AddListItem\r\n                          disabled\r\n                          onClick={onAddNewItem}\r\n                          primaryText={addNewItemLabel}\r\n                        />\r\n                      </div>\r\n                    );\r\n                  }\r\n\r\n                  const item = fullList[index];\r\n                  const nameBeingEdited = renamedItem === item;\r\n\r\n                  return (\r\n                    <div style={style} key={key}>\r\n                      <DragSourceAndDropTarget\r\n                        beginDrag={() => {\r\n                          this.props.onItemSelected(item);\r\n\r\n                          // $FlowFixMe\r\n                          return {};\r\n                        }}\r\n                        canDrag={() => !nameBeingEdited}\r\n                        canDrop={() =>\r\n                          canMoveSelectionToItem\r\n                            ? canMoveSelectionToItem(item)\r\n                            : true\r\n                        }\r\n                        drop={() => {\r\n                          onMoveSelectionToItem(item);\r\n                        }}\r\n                      >\r\n                        {({\r\n                          connectDragSource,\r\n                          connectDropTarget,\r\n                          isOver,\r\n                          canDrop,\r\n                        }) => {\r\n                          // Add an extra div because connectDropTarget/connectDragSource can\r\n                          // only be used on native elements\r\n                          const dropTarget = connectDropTarget(\r\n                            <div>\r\n                              {isOver && <DropIndicator canDrop={canDrop} />}\r\n                              {this._renderItemRow(\r\n                                item,\r\n                                index,\r\n                                windowWidth,\r\n                                screenType === 'touch' // Set the icon to be draggable, only if on a touch screen\r\n                                  ? connectDragSource\r\n                                  : null\r\n                              )}\r\n                            </div>\r\n                          );\r\n\r\n                          if (!dropTarget) return null;\r\n\r\n                          return screenType === 'touch'\r\n                            ? dropTarget\r\n                            : connectDragSource(dropTarget);\r\n                        }}\r\n                      </DragSourceAndDropTarget>\r\n                    </div>\r\n                  );\r\n                }}\r\n                width={width}\r\n              />\r\n            )}\r\n          </ScreenTypeMeasurer>\r\n        )}\r\n      </ResponsiveWindowMeasurer>\r\n    );\r\n  }\r\n}\r\n","// @flow\nimport * as React from 'react';\nimport ResourcesLoader from '../../ResourcesLoader';\nimport { type ResourceKind } from '../ResourceSource.flow';\nimport ImageThumbnail from './ImageThumbnail';\n\ntype Props = {|\n  project: gdProject,\n  resourceName: string,\n  resourcesLoader: typeof ResourcesLoader,\n  children?: any,\n  style?: Object,\n  onSize?: (number, number) => void,\n  selectable?: boolean,\n  selected?: boolean,\n  onSelect?: boolean => void,\n  onContextMenu?: (number, number) => void,\n|};\n\ntype State = {|\n  resourceKind: ?ResourceKind,\n|};\n\n/**\n * Display the right thumbnail for any given resource of a project\n */\nexport default class ResourceThumbnail extends React.Component<Props, State> {\n  constructor(props: Props) {\n    super(props);\n\n    this.state = this._loadFrom(props);\n  }\n\n  componentWillReceiveProps(newProps: Props) {\n    if (\n      newProps.resourceName !== this.props.resourceName ||\n      newProps.project !== this.props.project\n    ) {\n      this.setState(this._loadFrom(newProps));\n    }\n  }\n\n  _loadFrom(props: Props): State {\n    const { project, resourceName } = props;\n    const resourcesManager = project.getResourcesManager();\n    const resourceKind = resourcesManager.hasResource(resourceName)\n      ? resourcesManager.getResource(resourceName).getKind()\n      : null;\n\n    return {\n      resourceKind,\n    };\n  }\n\n  render() {\n    const { resourceKind } = this.state;\n\n    switch (resourceKind) {\n      case 'image':\n        return (\n          <ImageThumbnail\n            project={this.props.project}\n            resourceName={this.props.resourceName}\n            resourcesLoader={this.props.resourcesLoader}\n            children={this.props.children}\n            style={this.props.style}\n            onSize={this.props.onSize}\n            selectable={this.props.selectable}\n            selected={this.props.selected}\n            onSelect={this.props.onSelect}\n            onContextMenu={this.props.onContextMenu}\n          />\n        );\n      default:\n        return null;\n    }\n  }\n}\n","// @flow\nimport * as React from 'react';\nimport ResourcesLoader from '../ResourcesLoader';\nimport ResourceSelector from './ResourceSelector';\nimport {\n  type ResourceSource,\n  type ChooseResourceFunction,\n  type ResourceKind,\n} from './ResourceSource.flow';\nimport ResourceThumbnail from './ResourceThumbnail';\nimport { type ResourceExternalEditor } from './ResourceExternalEditor.flow';\nimport { type MessageDescriptor } from '../Utils/i18n/MessageDescriptor.flow';\n\ntype Props = {|\n  project: gdProject,\n  resourceSources: Array<ResourceSource>,\n  onChooseResource: ChooseResourceFunction,\n  resourceExternalEditors: Array<ResourceExternalEditor>,\n  resourceKind: ResourceKind,\n  resourceName: string,\n  onChange: string => void,\n  floatingLabelText?: React.Node,\n  hintText?: MessageDescriptor,\n|};\n\nconst styles = {\n  container: { flex: 1, display: 'flex', alignItems: 'flex-end' },\n  selectorContainer: { flex: 1 },\n  resourceThumbnail: { marginLeft: 10, marginBottom: 4 },\n};\n\nconst ResourceSelectorWithThumbnail = ({\n  project,\n  resourceSources,\n  onChooseResource,\n  resourceExternalEditors,\n  resourceKind,\n  resourceName,\n  onChange,\n  floatingLabelText,\n  hintText,\n}: Props) => {\n  return (\n    <div style={styles.container}>\n      <div style={styles.selectorContainer}>\n        <ResourceSelector\n          project={project}\n          resourceSources={resourceSources}\n          onChooseResource={onChooseResource}\n          resourceExternalEditors={resourceExternalEditors}\n          resourcesLoader={ResourcesLoader}\n          resourceKind={resourceKind}\n          fullWidth\n          initialResourceName={resourceName}\n          onChange={onChange}\n          floatingLabelText={floatingLabelText}\n          hintText={hintText}\n        />\n      </div>\n      <ResourceThumbnail\n        resourceName={resourceName}\n        resourcesLoader={ResourcesLoader}\n        project={project}\n        style={styles.resourceThumbnail}\n      />\n    </div>\n  );\n};\n\nexport default ResourceSelectorWithThumbnail;\n","import React from 'react';\nimport { ListItem } from './List';\nimport BackgroundText from './BackgroundText';\n// No i18n in this file\n\ntype Props = {|\n  onClick?: () => void,\n  primaryText: React.Node,\n|};\n\nexport const AddListItem = (props: Props) => {\n  return (\n    <ListItem\n      onClick={props.onClick}\n      primaryText={<BackgroundText>{props.primaryText}</BackgroundText>}\n      displayAddIcon\n    />\n  );\n};\n\nexport const SearchListItem = (props: Props) => {\n  return (\n    <ListItem\n      onClick={props.onClick}\n      primaryText={<BackgroundText>{props.primaryText}</BackgroundText>}\n      displaySearchIcon\n    />\n  );\n};\n","import React, { Component } from 'react';\nconst gd = global.gd;\n\n/**\n * Wrap the specified component so that it is able to modify a\n * copy of the serializable object passed as its props (with the prop name\n * being the one specified by propName) and then apply the changes (in which\n * case the original serializable object is modified) or cancel the changes\n * (in which case the original serializable object remains intact).\n */\nexport const withSerializableObject = (\n  WrappedComponent,\n  { newObjectCreator, propName, useProjectToUnserialize } //TODO: Refactor\n) => {\n  return class extends Component {\n    constructor(props) {\n      super(props);\n\n      this.state = {\n        serializableObject: newObjectCreator(),\n      };\n      this._loadFrom(props[propName]);\n    }\n\n    componentWillUnmount() {\n      this.state.serializableObject.delete();\n    }\n\n    componentWillReceiveProps(newProps) {\n      if (\n        (!this.props.open && newProps.open) ||\n        (newProps.open && this.props[propName] !== newProps[propName])\n      ) {\n        this._loadFrom(newProps[propName]);\n      }\n    }\n\n    _loadFrom(serializableObject) {\n      if (!serializableObject) return;\n\n      const serializedElement = new gd.SerializerElement();\n      serializableObject.serializeTo(serializedElement);\n      if (!useProjectToUnserialize) {\n        this.state.serializableObject.unserializeFrom(serializedElement);\n      } else {\n        this.state.serializableObject.unserializeFrom(\n          this.props.project,\n          serializedElement\n        );\n      }\n      serializedElement.delete();\n    }\n\n    _apply = () => {\n      if (!this.props[propName]) return;\n\n      const serializedElement = new gd.SerializerElement();\n      this.state.serializableObject.serializeTo(serializedElement);\n      if (!useProjectToUnserialize) {\n        this.props[propName].unserializeFrom(serializedElement);\n      } else {\n        this.props[propName].unserializeFrom(\n          this.props.project,\n          serializedElement\n        );\n      }\n      serializedElement.delete();\n\n      if (this.props.onApply) this.props.onApply();\n    };\n\n    _cancel = () => {\n      if (this.props.onCancel) this.props.onCancel();\n    };\n\n    render() {\n      const props = this.props;\n\n      return React.createElement(WrappedComponent, {\n        ...props,\n        [propName]: this.state.serializableObject,\n        onCancel: this._cancel,\n        onApply: this._apply,\n      });\n    }\n  };\n};\n","// @flow\nimport * as React from 'react';\nimport GDevelopThemeContext from '../Theme/ThemeContext';\n\nconst styles = {\n  row: {\n    display: 'flex',\n  },\n  cell: {\n    display: 'flex',\n    alignItems: 'center',\n    paddingLeft: 8,\n    paddingRight: 8,\n  },\n};\n\ntype TreeTableRowProps = {|\n  children: React.Node,\n|};\n\nexport const TreeTableRow = (props: TreeTableRowProps) => {\n  const gdevelopTheme = React.useContext(GDevelopThemeContext);\n\n  return (\n    <div\n      style={{\n        ...styles.row,\n        backgroundColor: gdevelopTheme.list.itemsBackgroundColor,\n      }}\n    >\n      {props.children}\n    </div>\n  );\n};\n\ntype TreeTableCellProps = {|\n  style?: Object,\n  expand?: boolean,\n  children?: React.Node,\n|};\n\nexport const TreeTableCell = (props: TreeTableCellProps) => (\n  <div\n    style={{\n      ...styles.cell,\n      flex: props.expand ? 1 : undefined,\n      ...props.style,\n    }}\n  >\n    {props.children}\n  </div>\n);\n","import React from 'react';\nimport DragHandleIcon from '@material-ui/icons/DragHandle';\nimport { SortableHandle } from 'react-sortable-hoc';\n\nconst styles = {\n  handle: {\n    cursor: 'move',\n    marginRight: 4,\n  },\n  handleColor: '#DDD',\n};\n\nconst DragHandle = SortableHandle(() => (\n  <span style={styles.handle}>\n    <DragHandleIcon htmlColor={styles.handleColor} />\n  </span>\n));\nexport default DragHandle;\n","// @flow\n\nimport * as React from 'react';\nimport RaisedButton from '../UI/RaisedButton';\nimport FlatButton from '../UI/FlatButton';\nimport Dialog from '../UI/Dialog';\nimport Star from '@material-ui/icons/Star';\nimport Favorite from '@material-ui/icons/Favorite';\nimport UserProfileContext, { type UserProfile } from './UserProfileContext';\nimport { Column, Line } from '../UI/Grid';\nimport {\n  sendSubscriptionCheckDialogShown,\n  sendSubscriptionCheckDismiss,\n} from '../Utils/Analytics/EventSender';\nimport { Trans } from '@lingui/macro';\nimport Text from '../UI/Text';\n\ntype Props = {|\n  title: React.Node,\n  id: string,\n  onChangeSubscription?: () => void,\n  mode: 'try' | 'mandatory',\n|};\n\ntype DialogProps = {|\n  userProfile: UserProfile,\n  ...$Exact<Props>,\n|};\n\ntype DialogState = {|\n  open: boolean,\n|};\n\nconst styles = {\n  icon: { width: 40, height: 40, marginRight: 20 },\n  iconText: { flex: 1 },\n  thanksText: { marginRight: 20, marginBottom: 0 },\n};\n\nexport class SubscriptionCheckDialog extends React.Component<\n  DialogProps,\n  DialogState\n> {\n  state = { open: false };\n\n  checkHasSubscription() {\n    const { userProfile, mode, id } = this.props;\n    if (userProfile.subscription) {\n      const hasPlan = !!userProfile.subscription.planId;\n      if (hasPlan) {\n        this.setState({\n          open: false,\n        });\n        return true;\n      }\n    }\n\n    this.setState({\n      open: true,\n    });\n    sendSubscriptionCheckDialogShown({ mode, id });\n\n    return false;\n  }\n\n  _closeDialog = () => {\n    sendSubscriptionCheckDismiss();\n    this.setState({ open: false });\n  };\n\n  render() {\n    const { open } = this.state;\n    const { onChangeSubscription, mode } = this.props;\n    if (!open) return null;\n\n    return (\n      <Dialog\n        actions={[\n          onChangeSubscription && (\n            <RaisedButton\n              label={<Trans>Get a subscription or login</Trans>}\n              key=\"subscribe\"\n              primary\n              onClick={() => {\n                this.setState({ open: false });\n                onChangeSubscription();\n              }}\n            />\n          ),\n        ]}\n        secondaryActions={[\n          <FlatButton\n            label={\n              mode === 'try' ? (\n                <Trans>Continue anyway</Trans>\n              ) : (\n                <Trans>Not now, thanks!</Trans>\n              )\n            }\n            key=\"close\"\n            primary={false}\n            onClick={this._closeDialog}\n          />,\n        ]}\n        cannotBeDismissed={false}\n        onRequestClose={this._closeDialog}\n        open={open}\n        title={this.props.title}\n      >\n        <Column noMargin>\n          <Line noMargin alignItems=\"center\">\n            {mode === 'try' ? (\n              <Text>\n                <Trans>\n                  You can try this feature, but if you're using it regularly, we\n                  ask you to get a subscription to GDevelop.\n                </Trans>\n              </Text>\n            ) : (\n              <Text>\n                <Trans>\n                  To use this feature, we ask you to get a subscription to\n                  GDevelop.\n                </Trans>\n              </Text>\n            )}\n          </Line>\n          <Line noMargin alignItems=\"center\">\n            <Star style={styles.icon} />\n            <Text style={styles.iconText}>\n              <Trans>\n                Having a subscription allows you to use the one-click export for\n                Android, Windows, macOS and Linux, launch live previews over\n                wifi, disable the GDevelop splashscreen during loading and more!\n              </Trans>\n            </Text>\n          </Line>\n          <Line noMargin alignItems=\"center\">\n            <Favorite style={styles.icon} />\n            <Text style={styles.iconText}>\n              <Trans>\n                You're also supporting the development of GDevelop, an\n                open-source software! In the future, more online services will\n                be available for users with a subscription.\n              </Trans>\n            </Text>\n          </Line>\n          <Text style={styles.thanksText} align=\"right\">\n            <b>\n              <Trans>Thanks!</Trans>\n            </b>\n          </Text>\n        </Column>\n      </Dialog>\n    );\n  }\n}\n\nclass SubscriptionChecker extends React.Component<Props, {}> {\n  _dialog: ?SubscriptionCheckDialog = null;\n\n  checkHasSubscription() {\n    if (this._dialog) {\n      return this._dialog.checkHasSubscription();\n    }\n\n    return false;\n  }\n\n  render() {\n    return (\n      <UserProfileContext.Consumer>\n        {(userProfile: UserProfile) => (\n          <SubscriptionCheckDialog\n            userProfile={userProfile}\n            ref={dialog => (this._dialog = dialog)}\n            onChangeSubscription={this.props.onChangeSubscription}\n            id={this.props.id}\n            title={this.props.title}\n            mode={this.props.mode}\n          />\n        )}\n      </UserProfileContext.Consumer>\n    );\n  }\n}\n\nexport default SubscriptionChecker;\n","// @flow\nimport { Trans } from '@lingui/macro';\nimport * as React from 'react';\nimport EventsTree from './EventsTree';\nimport NewInstructionEditorDialog from './InstructionEditor/NewInstructionEditorDialog';\nimport InstructionEditorDialog from './InstructionEditor/InstructionEditorDialog';\nimport NewInstructionEditorMenu from './InstructionEditor/NewInstructionEditorMenu';\nimport EventTextDialog, {\n  filterEditableWithEventTextDialog,\n} from './InstructionEditor/EventTextDialog';\nimport Toolbar from './Toolbar';\nimport KeyboardShortcuts from '../UI/KeyboardShortcuts';\nimport InlineParameterEditor from './InlineParameterEditor';\nimport ContextMenu from '../UI/Menu/ContextMenu';\nimport { type PreviewOptions } from '../Export/PreviewLauncher.flow';\nimport { serializeToJSObject } from '../Utils/Serializer';\nimport {\n  type HistoryState,\n  undo,\n  redo,\n  canUndo,\n  canRedo,\n  getHistoryInitialState,\n  saveToHistory,\n} from '../Utils/History';\nimport {\n  type SelectionState,\n  type EventContext,\n  type InstructionsListContext,\n  type InstructionContext,\n  type ParameterContext,\n  getInitialSelection,\n  selectEvent,\n  selectInstruction,\n  hasSomethingSelected,\n  hasEventSelected,\n  hasInstructionSelected,\n  hasSelectedAtLeastOneCondition,\n  hasInstructionsListSelected,\n  getSelectedEvents,\n  getSelectedInstructions,\n  clearSelection,\n  getSelectedEventContexts,\n  getSelectedInstructionsContexts,\n} from './SelectionHandler';\nimport EmptyEventsPlaceholder from './EmptyEventsPlaceholder';\nimport { ensureSingleOnceInstructions } from './OnceInstructionSanitizer';\nimport EventsContextAnalyzerDialog, {\n  type EventsContextResult,\n  toEventsContextResult,\n} from './EventsContextAnalyzerDialog';\nimport SearchPanel from './SearchPanel';\nimport {\n  type ResourceSource,\n  type ChooseResourceFunction,\n} from '../ResourcesList/ResourceSource.flow';\nimport { type ResourceExternalEditor } from '../ResourcesList/ResourceExternalEditor.flow';\nimport EventsSearcher, {\n  type ReplaceInEventsInputs,\n  type SearchInEventsInputs,\n} from './EventsSearcher';\nimport { containsSubInstructions } from './ContainsSubInstruction';\nimport {\n  enumerateEventsMetadata,\n  type EventMetadata,\n} from './EnumerateEventsMetadata';\nimport PreferencesContext from '../MainFrame/Preferences/PreferencesContext';\nimport EventsFunctionExtractorDialog from './EventsFunctionExtractor/EventsFunctionExtractorDialog';\nimport { createNewInstructionForEventsFunction } from './EventsFunctionExtractor';\nimport { type EventsScope } from '../InstructionOrExpression/EventsScope.flow';\nimport {\n  pasteEventsFromClipboardInSelection,\n  copySelectionToClipboard,\n  pasteInstructionsFromClipboardInSelection,\n  hasClipboardEvents,\n  hasClipboardActions,\n  hasClipboardConditions,\n  pasteInstructionsFromClipboardInInstructionsList,\n} from './ClipboardKind';\nimport InfoBar from '../UI/Messages/InfoBar';\nimport { ScreenTypeMeasurer } from '../UI/Reponsive/ScreenTypeMeasurer';\nimport { ResponsiveWindowMeasurer } from '../UI/Reponsive/ResponsiveWindowMeasurer';\nimport { type UnsavedChanges } from '../MainFrame/UnsavedChangesContext';\nimport { type PreviewButtonSettings } from '../MainFrame/Toolbar/PreviewButtons';\nconst gd = global.gd;\n\ntype Props = {|\n  project: gdProject,\n  scope: EventsScope,\n  globalObjectsContainer: gdObjectsContainer,\n  objectsContainer: gdObjectsContainer,\n  events: gdEventsList,\n  setToolbar: (?React.Node) => void,\n  showPreviewButton: boolean,\n  showNetworkPreviewButton: boolean,\n  previewButtonSettings: PreviewButtonSettings,\n  onPreview: (options: PreviewOptions) => void,\n  onOpenDebugger: () => void,\n  onOpenSettings?: ?() => void,\n  onOpenExternalEvents: string => void,\n  onOpenLayout: string => void,\n  resourceSources: Array<ResourceSource>,\n  onChooseResource: ChooseResourceFunction,\n  resourceExternalEditors: Array<ResourceExternalEditor>,\n  openInstructionOrExpression: (\n    extension: gdPlatformExtension,\n    type: string\n  ) => void,\n  onCreateEventsFunction: (\n    extensionName: string,\n    eventsFunction: gdEventsFunction\n  ) => void,\n  unsavedChanges?: UnsavedChanges,\n|};\ntype State = {|\n  history: HistoryState,\n\n  editedInstruction: {\n    //TODO: This could be adapted to be a InstructionContext\n    isCondition: boolean,\n    instruction: ?gdInstruction,\n    instrsList: ?gdInstructionsList,\n    indexInList: ?number,\n  },\n  editedParameter: {\n    // TODO: This could be adapted to be a ParameterContext\n    isCondition: boolean,\n    instruction: ?gdInstruction,\n    instrsList: ?gdInstructionsList,\n    parameterIndex: number,\n  },\n\n  selection: SelectionState,\n\n  inlineEditing: boolean,\n  inlineEditingAnchorEl: ?HTMLElement,\n  inlineInstructionEditorAnchorEl: ?HTMLElement,\n  inlineEditingChangesMade: boolean,\n\n  analyzedEventsContextResult: ?EventsContextResult,\n\n  serializedEventsToExtract: ?Object,\n\n  textEditedEvent: ?gdBaseEvent,\n\n  showSearchPanel: boolean,\n  searchResults: ?Array<gdBaseEvent>,\n  searchFocusOffset: ?number,\n\n  allEventsMetadata: Array<EventMetadata>,\n|};\n\nconst styles = {\n  container: {\n    display: 'flex',\n    width: '100%',\n    flexDirection: 'column',\n    flex: 1,\n    position: 'relative', // To be sure that absolutely positioned PlaceholderMessage won't go outside of the EventsSheet\n  },\n};\n\nexport default class EventsSheet extends React.Component<Props, State> {\n  _eventsTree: ?EventsTree;\n  _eventSearcher: ?EventsSearcher;\n  _searchPanel: ?SearchPanel;\n  _containerDiv = React.createRef<HTMLDivElement>();\n  _keyboardShortcuts = new KeyboardShortcuts({\n    isActive: () =>\n      !this.state.inlineEditing &&\n      !this.state.editedInstruction.instruction &&\n      !this.state.analyzedEventsContextResult &&\n      !this.state.serializedEventsToExtract,\n    shortcutCallbacks: {\n      onDelete: () => this.deleteSelection(),\n      onCopy: () => this.copySelection(),\n      onCut: () => this.cutSelection(),\n      onPaste: () => this.pasteEventsOrInstructions(),\n      onSearch: () => this._toggleSearchPanel(),\n      onUndo: () => this.undo(),\n      onRedo: () => this.redo(),\n    },\n  });\n\n  eventContextMenu: ContextMenu;\n  instructionContextMenu: ContextMenu;\n\n  state = {\n    history: getHistoryInitialState(this.props.events, { historyMaxSize: 50 }),\n\n    editedInstruction: {\n      isCondition: true,\n      instruction: null,\n      instrsList: null,\n      indexInList: 0,\n    },\n    editedParameter: {\n      isCondition: true,\n      instruction: null,\n      instrsList: null,\n      parameterIndex: 0,\n    },\n\n    selection: getInitialSelection(),\n\n    inlineEditing: false,\n    inlineEditingAnchorEl: null,\n    inlineInstructionEditorAnchorEl: null,\n    inlineEditingChangesMade: false,\n\n    analyzedEventsContextResult: null,\n\n    serializedEventsToExtract: null,\n\n    showSearchPanel: false,\n    searchResults: null,\n    searchFocusOffset: null,\n\n    allEventsMetadata: [],\n\n    textEditedEvent: null,\n  };\n\n  componentDidMount() {\n    this.setState({ allEventsMetadata: enumerateEventsMetadata() });\n  }\n\n  componentDidUpdate(prevProps: Props, prevState: State) {\n    if (this.state.history !== prevState.history)\n      if (this.props.unsavedChanges)\n        this.props.unsavedChanges.triggerUnsavedChanges();\n  }\n\n  updateToolbar() {\n    if (!this.props.setToolbar) return;\n\n    this.props.setToolbar(\n      <Toolbar\n        allEventsMetadata={this.state.allEventsMetadata}\n        onAddStandardEvent={() => {\n          this.addNewEvent('BuiltinCommonInstructions::Standard');\n        }}\n        onAddSubEvent={this.addSubEvents}\n        canAddSubEvent={hasEventSelected(this.state.selection)}\n        onAddCommentEvent={() => {\n          this.addNewEvent('BuiltinCommonInstructions::Comment');\n        }}\n        onAddEvent={type => {\n          this.addNewEvent(type);\n        }}\n        canRemove={hasSomethingSelected(this.state.selection)}\n        onRemove={this.deleteSelection}\n        showPreviewButton={this.props.showPreviewButton}\n        showNetworkPreviewButton={this.props.showNetworkPreviewButton}\n        onPreview={() => this.props.onPreview({})}\n        previewButtonSettings={this.props.previewButtonSettings}\n        onNetworkPreview={() => this.props.onPreview({ networkPreview: true })}\n        onOpenDebugger={() => {\n          this.props.onOpenDebugger();\n          this.props.onPreview({});\n        }}\n        canUndo={canUndo(this.state.history)}\n        canRedo={canRedo(this.state.history)}\n        undo={this.undo}\n        redo={this.redo}\n        onOpenSettings={this.props.onOpenSettings}\n        onToggleSearchPanel={this._toggleSearchPanel}\n      />\n    );\n  }\n\n  _toggleSearchPanel = () => {\n    this.setState(\n      state => {\n        const show = !state.showSearchPanel;\n        if (!show) {\n          if (this._eventSearcher) this._eventSearcher.reset();\n        }\n\n        return {\n          showSearchPanel: show,\n        };\n      },\n      () => {\n        if (this.state.showSearchPanel && this._searchPanel) {\n          this._searchPanel.focus();\n        }\n      }\n    );\n  };\n\n  addSubEvents = () => {\n    const { project } = this.props;\n\n    getSelectedEvents(this.state.selection).forEach(event => {\n      if (event.canHaveSubEvents()) {\n        event\n          .getSubEvents()\n          .insertNewEvent(\n            project,\n            'BuiltinCommonInstructions::Standard',\n            event.getSubEvents().getEventsCount()\n          );\n      }\n    });\n\n    this._saveChangesToHistory(() => {\n      if (this._eventsTree) this._eventsTree.forceEventsUpdate();\n    });\n  };\n\n  _selectionCanHaveSubEvents = () => {\n    return getSelectedEvents(this.state.selection).some(event => {\n      return event.canHaveSubEvents();\n    });\n  };\n\n  _selectionCanToggleDisabled = () => {\n    return getSelectedEvents(this.state.selection).some(event => {\n      return event.isExecutable();\n    });\n  };\n\n  addNewEvent = (type: string, context: ?EventContext): Array<gdBaseEvent> => {\n    const { project } = this.props;\n    const hasEventsSelected = hasEventSelected(this.state.selection);\n    let insertTopOfSelection = false;\n\n    let insertions: Array<{\n      eventsList: gdEventsList,\n      indexInList: number,\n    }> = [];\n    if (context) {\n      insertions = [context];\n    } else if (hasEventsSelected) {\n      if (\n        type === 'BuiltinCommonInstructions::Comment' ||\n        type === 'BuiltinCommonInstructions::Group'\n      ) {\n        insertTopOfSelection = true;\n      }\n\n      insertions = getSelectedEventContexts(this.state.selection).map(\n        selectedEvent => ({\n          eventsList: selectedEvent.eventsList,\n          indexInList: insertTopOfSelection\n            ? selectedEvent.indexInList - 1\n            : selectedEvent.indexInList,\n        })\n      );\n    } else {\n      insertions = [\n        {\n          eventsList: this.props.events,\n          indexInList: this.props.events.getEventsCount(),\n        },\n      ];\n    }\n\n    const newEvents = insertions.map(\n      (context: { eventsList: gdEventsList, indexInList: number }) => {\n        return context.eventsList.insertNewEvent(\n          project,\n          type,\n          context.indexInList + 1\n        );\n      }\n    );\n\n    this._saveChangesToHistory(() => {\n      const eventsTree = this._eventsTree;\n      if (!eventsTree) return;\n\n      eventsTree.forceEventsUpdate(() => {\n        if (!context && !hasEventsSelected) {\n          eventsTree.scrollToEvent(newEvents[0]);\n        }\n      });\n    });\n\n    return newEvents;\n  };\n\n  openEventTextDialog = () => {\n    const editableEvents = filterEditableWithEventTextDialog(\n      getSelectedEvents(this.state.selection)\n    );\n    if (!editableEvents.length) return;\n\n    const event = editableEvents[editableEvents.length - 1]; // Get the last selected event.\n    this.setState({\n      textEditedEvent: event,\n    });\n  };\n\n  closeEventTextDialog = () => {\n    this.setState({\n      textEditedEvent: null,\n    });\n  };\n\n  openAddInstructionContextMenu = (\n    button: HTMLButtonElement,\n    instructionsListContext: InstructionsListContext\n  ) => {\n    this.openInstructionEditor(instructionsListContext, button);\n  };\n\n  openInstructionEditor = (\n    instructionContext: InstructionContext | InstructionsListContext,\n    inlineInstructionEditorAnchorEl?: ?HTMLButtonElement = null\n  ) => {\n    if (this.state.editedInstruction.instruction) {\n      this.state.editedInstruction.instruction.delete();\n      console.warn(\n        'state.editedInstruction.instruction was containing an instruction - deleting it. Verify the logic handling the state in EventsSheet because that should not happen.'\n      );\n    }\n\n    this.setState({\n      inlineInstructionEditorAnchorEl,\n      editedInstruction: {\n        instrsList: instructionContext.instrsList,\n        isCondition: instructionContext.isCondition,\n        instruction: instructionContext.instruction\n          ? instructionContext.instruction.clone()\n          : new gd.Instruction(),\n        indexInList:\n          instructionContext.indexInList !== undefined\n            ? instructionContext.indexInList\n            : undefined,\n      },\n    });\n  };\n\n  closeInstructionEditor(saveChanges: boolean = false) {\n    const { instruction } = this.state.editedInstruction;\n    this.setState(\n      {\n        editedInstruction: {\n          isCondition: true,\n          instruction: null,\n          instrsList: null,\n          indexInList: 0,\n        },\n      },\n      () => {\n        // Delete from memory the instruction being edited, *after* resetting\n        // editedInstruction and after the re-rendering, in an effort to be\n        // sure that instruction is not used after deletion.\n        if (instruction) {\n          instruction.delete();\n        }\n        if (saveChanges) {\n          this._saveChangesToHistory();\n        }\n      }\n    );\n  }\n\n  moveSelectionToInstruction = (destinationContext: InstructionContext) => {\n    this.moveSelectionToInstructionsList(\n      {\n        instrsList: destinationContext.instrsList,\n        isCondition: destinationContext.isCondition,\n      },\n      destinationContext.indexInList\n    );\n  };\n\n  moveSelectionToInstructionsList = (\n    destinationContext: InstructionsListContext,\n    indexInList: ?number = undefined\n  ) => {\n    const selectedInstructions = getSelectedInstructions(this.state.selection);\n    const destinationIndex =\n      indexInList === undefined\n        ? destinationContext.instrsList.size()\n        : indexInList;\n\n    const isTryingToDragAnInstructionIntoItsOwnNestedInstructions = !!selectedInstructions.filter(\n      instruction =>\n        containsSubInstructions(instruction, destinationContext.instrsList)\n    ).length;\n\n    if (isTryingToDragAnInstructionIntoItsOwnNestedInstructions) return;\n\n    selectedInstructions.forEach(instruction =>\n      destinationContext.instrsList.insert(instruction, destinationIndex)\n    );\n\n    if (!this._keyboardShortcuts.shouldCloneInstances()) {\n      this.deleteSelection({ deleteEvents: false });\n    } else {\n      this._saveChangesToHistory();\n    }\n  };\n\n  selectEvent = (eventContext: EventContext) => {\n    const multiSelect = this._keyboardShortcuts.shouldMultiSelect();\n    this.setState(\n      {\n        selection: selectEvent(this.state.selection, eventContext, multiSelect),\n      },\n      () => this.updateToolbar()\n    );\n  };\n\n  openEventContextMenu = (x: number, y: number, eventContext: EventContext) => {\n    const multiSelect = this._keyboardShortcuts.shouldMultiSelect();\n    this.setState(\n      {\n        selection: selectEvent(this.state.selection, eventContext, multiSelect),\n      },\n      () => {\n        this.updateToolbar();\n        this.eventContextMenu.open(x, y);\n      }\n    );\n  };\n\n  openInstructionContextMenu = (\n    x: number,\n    y: number,\n    instructionContext: InstructionContext\n  ) => {\n    const multiSelect = this._keyboardShortcuts.shouldMultiSelect();\n    this.setState(\n      {\n        selection: selectInstruction(\n          this.state.selection,\n          instructionContext,\n          multiSelect\n        ),\n      },\n      () => {\n        this.updateToolbar();\n        this.instructionContextMenu.open(x, y);\n      }\n    );\n  };\n\n  selectInstruction = (instructionContext: InstructionContext) => {\n    const multiSelect = this._keyboardShortcuts.shouldMultiSelect();\n    this.setState(\n      {\n        selection: selectInstruction(\n          this.state.selection,\n          instructionContext,\n          multiSelect\n        ),\n      },\n      () => this.updateToolbar()\n    );\n  };\n\n  openParameterEditor = (parameterContext: ParameterContext) => {\n    // $FlowFixMe\n    this.setState({\n      editedParameter: parameterContext,\n      inlineEditing: true,\n      inlineEditingAnchorEl: parameterContext.domEvent\n        ? parameterContext.domEvent.currentTarget\n        : null,\n      inlineEditingChangesMade: false,\n    });\n  };\n\n  closeParameterEditor = () => {\n    if (this.state.inlineEditingChangesMade) {\n      this._saveChangesToHistory();\n    }\n\n    this.setState({\n      inlineEditing: false,\n      inlineEditingAnchorEl: null,\n      inlineEditingChangesMade: false,\n    });\n  };\n\n  toggleDisabled = () => {\n    getSelectedEvents(this.state.selection).forEach(event =>\n      event.setDisabled(!event.isDisabled())\n    );\n    this._saveChangesToHistory(() => {\n      if (this._eventsTree) this._eventsTree.forceEventsUpdate();\n    });\n  };\n\n  deleteSelection = ({\n    deleteInstructions = true,\n    deleteEvents = true,\n  }: { deleteInstructions?: boolean, deleteEvents?: boolean } = {}) => {\n    const { events } = this.props;\n    const eventsRemover = new gd.EventsRemover();\n    if (deleteEvents) {\n      getSelectedEvents(this.state.selection).forEach(event =>\n        eventsRemover.addEventToRemove(event)\n      );\n    }\n    if (deleteInstructions) {\n      getSelectedInstructions(this.state.selection).forEach(instruction =>\n        eventsRemover.addInstructionToRemove(instruction)\n      );\n    }\n\n    eventsRemover.launch(events);\n\n    // /!\\ Events were changed, so any reference to an existing event can now\n    // be invalid. Make sure to immediately trigger a forced update before\n    // any re-render that could use a deleted/invalid event.\n    if (this._eventsTree) this._eventsTree.forceEventsUpdate();\n\n    this.setState(\n      {\n        selection: clearSelection(),\n        inlineEditing: false,\n        inlineEditingAnchorEl: null,\n      },\n      () => {\n        this._saveChangesToHistory();\n\n        // Deletion of an event/instruction will remove it from the DOM,\n        // potentially losing the focus on the associated DOM elements. Ensure\n        // we keep the focus on the EventsSheet.\n        this._ensureFocused();\n      }\n    );\n  };\n\n  copySelection = () => {\n    copySelectionToClipboard(this.state.selection);\n  };\n\n  cutSelection = () => {\n    this.copySelection();\n    this.deleteSelection();\n  };\n\n  pasteEvents = () => {\n    if (\n      !pasteEventsFromClipboardInSelection(\n        this.props.project,\n        this.state.selection\n      )\n    ) {\n      return;\n    }\n\n    this._saveChangesToHistory(() => {\n      if (this._eventsTree) this._eventsTree.forceEventsUpdate();\n    });\n  };\n\n  pasteInstructions = () => {\n    if (\n      !pasteInstructionsFromClipboardInSelection(\n        this.props.project,\n        this.state.selection\n      )\n    ) {\n      return;\n    }\n\n    this._saveChangesToHistory(() => {\n      if (this._eventsTree) this._eventsTree.forceEventsUpdate();\n    });\n  };\n\n  pasteEventsOrInstructions = () => {\n    if (hasEventSelected(this.state.selection)) this.pasteEvents();\n    else if (hasInstructionSelected(this.state.selection))\n      this.pasteInstructions();\n    else if (hasInstructionsListSelected(this.state.selection))\n      this.pasteInstructions();\n  };\n\n  pasteInstructionsInInstructionsList = (\n    instructionsListContext: InstructionsListContext\n  ) => {\n    if (\n      !pasteInstructionsFromClipboardInInstructionsList(\n        this.props.project,\n        instructionsListContext\n      )\n    ) {\n      return;\n    }\n\n    this._saveChangesToHistory(() => {\n      if (this._eventsTree) this._eventsTree.forceEventsUpdate();\n    });\n  };\n\n  _invertSelectedConditions = () => {\n    getSelectedInstructionsContexts(this.state.selection).forEach(\n      instructionContext => {\n        if (instructionContext.isCondition) {\n          instructionContext.instruction.setInverted(\n            !instructionContext.instruction.isInverted()\n          );\n        }\n      }\n    );\n\n    this._saveChangesToHistory(() => {\n      if (this._eventsTree) this._eventsTree.forceEventsUpdate();\n    });\n  };\n\n  _saveChangesToHistory = (cb: ?Function) => {\n    this.setState(\n      {\n        history: saveToHistory(this.state.history, this.props.events),\n      },\n      () => {\n        this.updateToolbar();\n        if (cb) cb();\n      }\n    );\n  };\n\n  undo = () => {\n    if (!canUndo(this.state.history)) return;\n\n    const { events, project } = this.props;\n    const newHistory = undo(this.state.history, events, project);\n\n    // /!\\ Events were changed, so any reference to an existing event can now\n    // be invalid. Make sure to immediately trigger a forced update before\n    // any re-render that could use a deleted/invalid event.\n    if (this._eventsTree) this._eventsTree.forceEventsUpdate();\n\n    this.setState({ history: newHistory }, () => this.updateToolbar());\n  };\n\n  redo = () => {\n    if (!canRedo(this.state.history)) return;\n\n    const { events, project } = this.props;\n    const newHistory = redo(this.state.history, events, project);\n\n    // /!\\ Events were changed, so any reference to an existing event can now\n    // be invalid. Make sure to immediately trigger a forced update before\n    // any re-render that could use a deleted/invalid event.\n    if (this._eventsTree) this._eventsTree.forceEventsUpdate();\n\n    this.setState({ history: newHistory }, () => this.updateToolbar());\n  };\n\n  _openEventsContextAnalyzer = () => {\n    const { globalObjectsContainer, objectsContainer } = this.props;\n    const eventsContextAnalyzer = new gd.EventsContextAnalyzer(\n      gd.JsPlatform.get(),\n      globalObjectsContainer,\n      objectsContainer\n    );\n\n    const eventsList = new gd.EventsList();\n    getSelectedEvents(this.state.selection).forEach(event =>\n      eventsList.insertEvent(event, eventsList.getEventsCount())\n    );\n\n    eventsContextAnalyzer.launch(eventsList);\n    eventsList.delete();\n\n    this.setState({\n      analyzedEventsContextResult: toEventsContextResult(\n        eventsContextAnalyzer.getEventsContext()\n      ),\n    });\n    eventsContextAnalyzer.delete();\n  };\n\n  _closeEventsContextAnalyzer = () => {\n    this.setState({\n      analyzedEventsContextResult: null,\n    });\n  };\n\n  extractEventsToFunction = () => {\n    const eventsList = new gd.EventsList();\n\n    getSelectedEvents(this.state.selection).forEach(event =>\n      eventsList.insertEvent(event, eventsList.getEventsCount())\n    );\n\n    this.setState({\n      serializedEventsToExtract: serializeToJSObject(eventsList),\n    });\n\n    eventsList.delete();\n  };\n\n  moveEventsIntoNewGroup = () => {\n    const eventsList = new gd.EventsList();\n\n    getSelectedEvents(this.state.selection).forEach(event =>\n      eventsList.insertEvent(event, eventsList.getEventsCount())\n    );\n\n    this._replaceSelectionByGroupOfEvents(eventsList);\n    eventsList.delete();\n  };\n\n  _replaceSelectionByEventsFunction = (\n    extensionName: string,\n    eventsFunction: gdEventsFunction\n  ) => {\n    const contexts = getSelectedEventContexts(this.state.selection);\n    if (!contexts.length) return;\n\n    const newEvents = this.addNewEvent(\n      'BuiltinCommonInstructions::Standard',\n      contexts[0]\n    );\n    if (!newEvents.length) {\n      console.error('A new event should have been created');\n      return;\n    }\n\n    const action = createNewInstructionForEventsFunction(\n      extensionName,\n      eventsFunction\n    );\n    const standardEvt = gd.asStandardEvent(newEvents[0]);\n    standardEvt.getActions().push_back(action);\n    action.delete();\n\n    this.deleteSelection({ deleteInstructions: false });\n  };\n\n  _replaceSelectionByGroupOfEvents = (eventsList: gdEventsList) => {\n    const contexts = getSelectedEventContexts(this.state.selection);\n    if (!contexts.length) return;\n\n    const newEvents = this.addNewEvent(\n      'BuiltinCommonInstructions::Group',\n      contexts[0]\n    );\n    if (!newEvents.length) {\n      console.error('A new event should have been created');\n      return;\n    }\n\n    const groupEvent = gd.asGroupEvent(newEvents[0]);\n\n    groupEvent.setName('Grouped events');\n    groupEvent.setFolded(true);\n    groupEvent\n      .getSubEvents()\n      .insertEvents(eventsList, 0, eventsList.getEventsCount(), 0);\n\n    this.deleteSelection({ deleteInstructions: false });\n  };\n\n  _ensureEventUnfolded = (cb: () => ?gdBaseEvent) => {\n    const event = cb();\n    if (event && this._eventsTree) {\n      this._eventsTree.unfoldForEvent(event);\n    }\n  };\n\n  _replaceInEvents = (\n    doReplaceInEvents: (inputs: ReplaceInEventsInputs) => void,\n    inputs: ReplaceInEventsInputs\n  ) => {\n    doReplaceInEvents(inputs);\n    this._saveChangesToHistory(() => {\n      if (this._eventsTree) this._eventsTree.forceEventsUpdate();\n    });\n  };\n\n  _searchInEvents = (\n    doSearchInEvents: (inputs: SearchInEventsInputs, cb: () => void) => void,\n    inputs: SearchInEventsInputs\n  ) => {\n    doSearchInEvents(inputs, () => {\n      this.forceUpdate(() => {\n        if (this._eventsTree) this._eventsTree.forceEventsUpdate();\n      });\n    });\n  };\n\n  _onEventMoved = () => {\n    // Move of the event in the list is handled by EventsTree.\n    // This could be refactored and put here if the drag'n'drop of events\n    // is reworked at some point.\n    this._saveChangesToHistory();\n  };\n\n  _renderInstructionEditorDialog = (newInstructionEditorDialog: boolean) => {\n    const {\n      project,\n      scope,\n      globalObjectsContainer,\n      objectsContainer,\n    } = this.props;\n\n    // Choose the dialog to use\n    const Dialog = this.state.inlineInstructionEditorAnchorEl\n      ? NewInstructionEditorMenu\n      : newInstructionEditorDialog\n      ? NewInstructionEditorDialog\n      : InstructionEditorDialog;\n\n    return this.state.editedInstruction.instruction ? (\n      <Dialog\n        project={project}\n        scope={scope}\n        globalObjectsContainer={globalObjectsContainer}\n        objectsContainer={objectsContainer}\n        instruction={this.state.editedInstruction.instruction}\n        isCondition={this.state.editedInstruction.isCondition}\n        isNewInstruction={\n          this.state.editedInstruction.indexInList === undefined\n        }\n        anchorEl={this.state.inlineInstructionEditorAnchorEl}\n        open={true}\n        onCancel={() => this.closeInstructionEditor()}\n        onSubmit={() => {\n          const {\n            instrsList,\n            instruction,\n            indexInList,\n          } = this.state.editedInstruction;\n          if (!instrsList) return;\n\n          if (indexInList !== undefined) {\n            // Replace an existing instruction\n            instrsList.set(indexInList, instruction);\n          } else {\n            // Add a new instruction\n            instrsList.insert(instruction, instrsList.size());\n          }\n\n          this.closeInstructionEditor(true);\n          ensureSingleOnceInstructions(instrsList);\n          if (this._eventsTree) this._eventsTree.forceEventsUpdate();\n        }}\n        resourceSources={this.props.resourceSources}\n        onChooseResource={this.props.onChooseResource}\n        resourceExternalEditors={this.props.resourceExternalEditors}\n        openInstructionOrExpression={(extension, type) => {\n          this.closeInstructionEditor();\n          this.props.openInstructionOrExpression(extension, type);\n        }}\n      />\n    ) : (\n      undefined\n    );\n  };\n\n  /**\n   * Call this to ensure that the events sheet stays focused after a potential\n   * lost of focus (for example, after a scroll, the focused element might have\n   * been scrolled out of the view and so removed from the DOM)\n   */\n  _ensureFocused = () => {\n    if (!this._containerDiv || !document) return;\n\n    const containerDivElement = this._containerDiv.current;\n    if (document.activeElement === containerDivElement) {\n      // Focus is already on the container\n      return;\n    }\n    if (containerDivElement) {\n      if (\n        document.activeElement !== document.body &&\n        containerDivElement.contains(document.activeElement)\n      ) {\n        // Focus is already on an element of the container\n        return;\n      }\n\n      // Focus is not on an element of the container, we probably lost the focus\n      // after scrolling or removing an element. Give back the focus to the container.\n      containerDivElement.focus();\n    }\n  };\n\n  render() {\n    const {\n      project,\n      scope,\n      events,\n      onOpenExternalEvents,\n      onOpenLayout,\n      globalObjectsContainer,\n      objectsContainer,\n    } = this.props;\n    if (!project) return null;\n\n    return (\n      <ScreenTypeMeasurer>\n        {screenType => (\n          <ResponsiveWindowMeasurer>\n            {windowWidth => (\n              <PreferencesContext.Consumer>\n                {({ values }) => (\n                  <EventsSearcher\n                    key={events.ptr}\n                    ref={eventSearcher => (this._eventSearcher = eventSearcher)}\n                    events={events}\n                    globalObjectsContainer={globalObjectsContainer}\n                    objectsContainer={objectsContainer}\n                    selection={this.state.selection}\n                  >\n                    {({\n                      eventsSearchResultEvents,\n                      searchFocusOffset,\n                      searchInEvents,\n                      replaceInEvents,\n                      goToPreviousSearchResult,\n                      goToNextSearchResult,\n                    }) => (\n                      <div\n                        className=\"gd-events-sheet\"\n                        style={styles.container}\n                        onKeyDown={this._keyboardShortcuts.onKeyDown}\n                        onKeyUp={this._keyboardShortcuts.onKeyUp}\n                        onDragOver={this._keyboardShortcuts.onDragOver}\n                        ref={this._containerDiv}\n                        tabIndex={0}\n                      >\n                        <EventsTree\n                          ref={eventsTree => (this._eventsTree = eventsTree)}\n                          key={events.ptr}\n                          onScroll={this._ensureFocused}\n                          events={events}\n                          project={project}\n                          scope={scope}\n                          globalObjectsContainer={globalObjectsContainer}\n                          objectsContainer={objectsContainer}\n                          selection={this.state.selection}\n                          onInstructionClick={this.selectInstruction}\n                          onInstructionDoubleClick={this.openInstructionEditor}\n                          onInstructionContextMenu={\n                            this.openInstructionContextMenu\n                          }\n                          onAddInstructionContextMenu={\n                            this.openAddInstructionContextMenu\n                          }\n                          onAddNewInstruction={this.openInstructionEditor}\n                          onPasteInstructions={\n                            this.pasteInstructionsInInstructionsList\n                          }\n                          onMoveToInstruction={this.moveSelectionToInstruction}\n                          onMoveToInstructionsList={\n                            this.moveSelectionToInstructionsList\n                          }\n                          onParameterClick={this.openParameterEditor}\n                          onEventClick={this.selectEvent}\n                          onEventContextMenu={this.openEventContextMenu}\n                          onAddNewEvent={context => {\n                            this.addNewEvent(\n                              'BuiltinCommonInstructions::Standard',\n                              context\n                            );\n                          }}\n                          onOpenExternalEvents={onOpenExternalEvents}\n                          onOpenLayout={onOpenLayout}\n                          searchResults={eventsSearchResultEvents}\n                          searchFocusOffset={searchFocusOffset}\n                          onEventMoved={this._onEventMoved}\n                          showObjectThumbnails={\n                            values.eventsSheetShowObjectThumbnails\n                          }\n                          screenType={screenType}\n                          windowWidth={windowWidth}\n                        />\n                        {this.state.showSearchPanel && (\n                          <SearchPanel\n                            ref={searchPanel =>\n                              (this._searchPanel = searchPanel)\n                            }\n                            onSearchInEvents={inputs =>\n                              this._searchInEvents(searchInEvents, inputs)\n                            }\n                            onReplaceInEvents={inputs =>\n                              this._replaceInEvents(replaceInEvents, inputs)\n                            }\n                            resultsCount={\n                              eventsSearchResultEvents\n                                ? eventsSearchResultEvents.length\n                                : null\n                            }\n                            hasEventSelected={hasEventSelected(\n                              this.state.selection\n                            )}\n                            onGoToPreviousSearchResult={() =>\n                              this._ensureEventUnfolded(\n                                goToPreviousSearchResult\n                              )\n                            }\n                            onGoToNextSearchResult={() =>\n                              this._ensureEventUnfolded(goToNextSearchResult)\n                            }\n                          />\n                        )}\n                        {events && events.getEventsCount() === 0 && (\n                          <EmptyEventsPlaceholder />\n                        )}\n                        <InlineParameterEditor\n                          open={this.state.inlineEditing}\n                          anchorEl={this.state.inlineEditingAnchorEl}\n                          onRequestClose={this.closeParameterEditor}\n                          project={project}\n                          scope={scope}\n                          globalObjectsContainer={globalObjectsContainer}\n                          objectsContainer={objectsContainer}\n                          isCondition={this.state.editedParameter.isCondition}\n                          instruction={this.state.editedParameter.instruction}\n                          parameterIndex={\n                            this.state.editedParameter.parameterIndex\n                          }\n                          onChange={value => {\n                            const {\n                              instruction,\n                              parameterIndex,\n                            } = this.state.editedParameter;\n                            if (!instruction) return;\n                            instruction.setParameter(parameterIndex, value);\n                            this.setState({\n                              inlineEditingChangesMade: true,\n                            });\n                          }}\n                          resourceSources={this.props.resourceSources}\n                          onChooseResource={this.props.onChooseResource}\n                          resourceExternalEditors={\n                            this.props.resourceExternalEditors\n                          }\n                        />\n                        <ContextMenu\n                          ref={eventContextMenu =>\n                            (this.eventContextMenu = eventContextMenu)\n                          }\n                          buildMenuTemplate={() => [\n                            {\n                              label: 'Edit',\n                              click: () => this.openEventTextDialog(),\n                              visible:\n                                filterEditableWithEventTextDialog(\n                                  getSelectedEvents(this.state.selection)\n                                ).length > 0,\n                            },\n                            {\n                              label: 'Copy',\n                              click: () => this.copySelection(),\n                              accelerator: 'CmdOrCtrl+C',\n                            },\n                            {\n                              label: 'Cut',\n                              click: () => this.cutSelection(),\n                              accelerator: 'CmdOrCtrl+X',\n                            },\n                            {\n                              label: 'Paste',\n                              click: () => this.pasteEvents(),\n                              enabled: hasClipboardEvents(),\n                              accelerator: 'CmdOrCtrl+V',\n                            },\n                            {\n                              label: 'Delete',\n                              click: () => this.deleteSelection(),\n                              accelerator: 'Delete',\n                            },\n                            {\n                              label: 'Toggle disabled',\n                              click: () => this.toggleDisabled(),\n                              enabled: this._selectionCanToggleDisabled(),\n                            },\n                            { type: 'separator' },\n                            {\n                              label: 'Add New Event Below',\n                              click: () =>\n                                this.addNewEvent(\n                                  'BuiltinCommonInstructions::Standard'\n                                ),\n                            },\n                            {\n                              label: 'Add Sub Event',\n                              click: () => this.addSubEvents(),\n                              enabled: this._selectionCanHaveSubEvents(),\n                            },\n                            {\n                              label: 'Add Other',\n                              submenu: this.state.allEventsMetadata.map(\n                                metadata => {\n                                  return {\n                                    label: metadata.fullName,\n                                    click: () =>\n                                      this.addNewEvent(metadata.type),\n                                  };\n                                }\n                              ),\n                            },\n                            { type: 'separator' },\n                            {\n                              label: 'Undo',\n                              click: this.undo,\n                              enabled: canUndo(this.state.history),\n                              accelerator: 'CmdOrCtrl+Z',\n                            },\n                            {\n                              label: 'Redo',\n                              click: this.redo,\n                              enabled: canRedo(this.state.history),\n                              accelerator: 'CmdOrCtrl+Shift+Z',\n                            },\n                            { type: 'separator' },\n                            {\n                              label: 'Extract Events to a Function',\n                              click: () => this.extractEventsToFunction(),\n                            },\n                            {\n                              label: 'Move Events into a Group',\n                              click: () => this.moveEventsIntoNewGroup(),\n                            },\n                            {\n                              label: 'Analyze Objects Used in this Event',\n                              click: this._openEventsContextAnalyzer,\n                            },\n                          ]}\n                        />\n                        <ContextMenu\n                          ref={instructionContextMenu =>\n                            (this.instructionContextMenu = instructionContextMenu)\n                          }\n                          buildMenuTemplate={() => [\n                            {\n                              label: 'Copy',\n                              click: () => this.copySelection(),\n                              accelerator: 'CmdOrCtrl+C',\n                            },\n                            {\n                              label: 'Cut',\n                              click: () => this.cutSelection(),\n                              accelerator: 'CmdOrCtrl+X',\n                            },\n                            {\n                              label: 'Paste',\n                              click: () => this.pasteInstructions(),\n                              enabled:\n                                hasClipboardConditions() ||\n                                hasClipboardActions(),\n                              accelerator: 'CmdOrCtrl+V',\n                            },\n                            { type: 'separator' },\n                            {\n                              label: 'Delete',\n                              click: () => this.deleteSelection(),\n                              accelerator: 'Delete',\n                            },\n                            { type: 'separator' },\n                            {\n                              label: 'Undo',\n                              click: this.undo,\n                              enabled: canUndo(this.state.history),\n                              accelerator: 'CmdOrCtrl+Z',\n                            },\n                            {\n                              label: 'Redo',\n                              click: this.redo,\n                              enabled: canRedo(this.state.history),\n                              accelerator: 'CmdOrCtrl+Shift+Z',\n                            },\n                            {\n                              label: 'Invert Condition',\n                              click: () => this._invertSelectedConditions(),\n                              visible: hasSelectedAtLeastOneCondition(\n                                this.state.selection\n                              ),\n                            },\n                          ]}\n                        />\n                        {this._renderInstructionEditorDialog(\n                          // Force using the new instruction editor on touch screens.\n                          values.useNewInstructionEditorDialog ||\n                            screenType === 'touch'\n                        )}\n                        {this.state.analyzedEventsContextResult && (\n                          <EventsContextAnalyzerDialog\n                            onClose={this._closeEventsContextAnalyzer}\n                            eventsContextResult={\n                              this.state.analyzedEventsContextResult\n                            }\n                          />\n                        )}\n                        {this.state.serializedEventsToExtract && (\n                          <EventsFunctionExtractorDialog\n                            project={project}\n                            globalObjectsContainer={globalObjectsContainer}\n                            objectsContainer={objectsContainer}\n                            onClose={() =>\n                              this.setState({\n                                serializedEventsToExtract: null,\n                              })\n                            }\n                            serializedEvents={\n                              this.state.serializedEventsToExtract\n                            }\n                            onCreate={(extensionName, eventsFunction) => {\n                              this.props.onCreateEventsFunction(\n                                extensionName,\n                                eventsFunction\n                              );\n                              this._replaceSelectionByEventsFunction(\n                                extensionName,\n                                eventsFunction\n                              );\n                              this.setState({\n                                serializedEventsToExtract: null,\n                              });\n                            }}\n                          />\n                        )}\n                        {this.state.textEditedEvent && (\n                          <EventTextDialog\n                            event={this.state.textEditedEvent}\n                            onApply={() => {\n                              this.closeEventTextDialog();\n                              this._saveChangesToHistory();\n                            }}\n                            onClose={this.closeEventTextDialog}\n                          />\n                        )}\n                        <InfoBar\n                          identifier=\"edit-instruction-explanation\"\n                          message={\n                            <Trans>\n                              Double click on a condition or action to edit it.\n                            </Trans>\n                          }\n                          touchScreenMessage={\n                            <Trans>\n                              Double tap a condition or action to edit it. Long\n                              press to show more options.\n                            </Trans>\n                          }\n                          show={hasInstructionSelected(this.state.selection)}\n                        />\n                      </div>\n                    )}\n                  </EventsSearcher>\n                )}\n              </PreferencesContext.Consumer>\n            )}\n          </ResponsiveWindowMeasurer>\n        )}\n      </ScreenTypeMeasurer>\n    );\n  }\n}\n","// @flow\nimport { t } from '@lingui/macro';\nimport * as React from 'react';\nimport {\n  type ParameterInlineRenderer,\n  type ParameterInlineRendererProps,\n} from './ParameterFields/ParameterInlineRenderer.flow';\nimport DefaultField, {\n  renderInlineDefaultField,\n} from './ParameterFields/DefaultField';\nimport RelationalOperatorField, {\n  renderInlineRelationalOperator,\n} from './ParameterFields/RelationalOperatorField';\nimport OperatorField, {\n  renderInlineOperator,\n} from './ParameterFields/OperatorField';\nimport MouseField, { renderInlineMouse } from './ParameterFields/MouseField';\nimport KeyField, { renderInlineKey } from './ParameterFields/KeyField';\nimport ObjectField, {\n  renderInlineObjectWithThumbnail,\n} from './ParameterFields/ObjectField';\nimport YesNoField, { renderInlineYesNo } from './ParameterFields/YesNoField';\nimport TrueFalseField, {\n  renderInlineTrueFalse,\n} from './ParameterFields/TrueFalseField';\nimport ExpressionField from './ParameterFields/ExpressionField';\nimport StringField from './ParameterFields/StringField';\nimport StringWithSelectorField from './ParameterFields/StringWithSelectorField';\nimport BehaviorField from './ParameterFields/BehaviorField';\nimport SceneVariableField, {\n  renderInlineSceneVariable,\n} from './ParameterFields/SceneVariableField';\nimport GlobalVariableField, {\n  renderInlineGlobalVariable,\n} from './ParameterFields/GlobalVariableField';\nimport ObjectVariableField, {\n  renderInlineObjectVariable,\n} from './ParameterFields/ObjectVariableField';\nimport LayerField from './ParameterFields/LayerField';\nimport AudioResourceField from './ParameterFields/AudioResourceField';\nimport VideoResourceField from './ParameterFields/VideoResourceField';\nimport JsonResourceField from './ParameterFields/JsonResourceField';\nimport ColorExpressionField from './ParameterFields/ColorExpressionField';\nimport ForceMultiplierField, {\n  renderInlineForceMultiplier,\n} from './ParameterFields/ForceMultiplierField';\nimport SceneNameField from './ParameterFields/SceneNameField';\nimport { type MessageDescriptor } from '../Utils/i18n/MessageDescriptor.flow';\nconst gd = global.gd;\n\nconst components = {\n  default: DefaultField,\n  mouse: MouseField,\n  object: ObjectField,\n  relationalOperator: RelationalOperatorField,\n  operator: OperatorField,\n  yesorno: YesNoField,\n  trueorfalse: TrueFalseField,\n  expression: ExpressionField,\n  string: StringField,\n  stringWithSelector: StringWithSelectorField,\n  behavior: BehaviorField,\n  scenevar: SceneVariableField,\n  globalvar: GlobalVariableField,\n  objectvar: ObjectVariableField,\n  layer: LayerField,\n  key: KeyField,\n  file: DefaultField, //TODO\n  musicfile: AudioResourceField,\n  soundfile: AudioResourceField,\n  videoResource: VideoResourceField,\n  jsonResource: JsonResourceField,\n  color: ColorExpressionField,\n  police: DefaultField, //TODO\n  joyaxis: DefaultField, //TODO\n  forceMultiplier: ForceMultiplierField,\n  sceneName: SceneNameField,\n};\nconst inlineRenderers: { [string]: ParameterInlineRenderer } = {\n  default: renderInlineDefaultField,\n  forceMultiplier: renderInlineForceMultiplier,\n  globalvar: renderInlineGlobalVariable,\n  scenevar: renderInlineSceneVariable,\n  objectvar: renderInlineObjectVariable,\n  key: renderInlineKey,\n  mouse: renderInlineMouse,\n  object: renderInlineObjectWithThumbnail,\n  yesorno: renderInlineYesNo,\n  trueorfalse: renderInlineTrueFalse,\n  operator: renderInlineOperator,\n  relationalOperator: renderInlineRelationalOperator,\n};\nconst userFriendlyTypeName: { [string]: MessageDescriptor } = {\n  mouse: t`Mouse button`,\n  object: t`Object`,\n  relationalOperator: t`Relational operator`,\n  operator: t`Operator`,\n  yesorno: t`Yes or No`,\n  trueorfalse: t`True or False`,\n  expression: t`Number`,\n  string: t`String`,\n  stringWithSelector: t`String`,\n  behavior: t`Behavior`,\n  scenevar: t`Scene variable`,\n  globalvar: t`Global variable`,\n  objectvar: t`Object variable`,\n  layer: t`Layer`,\n  key: t`Keyboard key`,\n  musicfile: t`Audio resource`,\n  soundfile: t`Audio resource`,\n  videoResource: t`Video resource`,\n  jsonResource: t`JSON resource`,\n  color: t`Color`,\n  forceMultiplier: t`Instant or permanent force`,\n  sceneName: t`Scene name`,\n};\n\nexport default {\n  components,\n  getParameterComponent: (rawType: string) => {\n    const fieldType = gd.ParameterMetadata.isObject(rawType)\n      ? 'object'\n      : rawType;\n\n    if (components.hasOwnProperty(fieldType)) return components[fieldType];\n    else return components.default;\n  },\n  renderInlineParameter: (props: ParameterInlineRendererProps): React.Node => {\n    const rawType = props.parameterMetadata.getType();\n    const fieldType = gd.ParameterMetadata.isObject(rawType)\n      ? 'object'\n      : rawType;\n\n    const inlineRenderer =\n      inlineRenderers[fieldType] || inlineRenderers.default;\n    return inlineRenderer(props);\n  },\n  getUserFriendlyTypeName: (rawType: string): ?MessageDescriptor => {\n    const fieldType = gd.ParameterMetadata.isObject(rawType)\n      ? 'object'\n      : rawType;\n\n    return userFriendlyTypeName[fieldType] || null;\n  },\n};\n","// @flow\nimport * as React from 'react';\nimport classNames from 'classnames';\nimport { type ParameterInlineRendererProps } from './ParameterInlineRenderer.flow';\nimport ObjectSelector from '../../ObjectsList/ObjectSelector';\nimport { type ParameterFieldProps } from './ParameterFieldCommons';\nimport { Trans } from '@lingui/macro';\nimport { nameAndIconContainer } from '../EventsTree/ClassNames';\n\nexport default class ObjectField extends React.Component<\n  ParameterFieldProps,\n  {||}\n> {\n  _description: ?string;\n  _longDescription: ?string;\n  _allowedObjectType: ?string;\n  _field: ?ObjectSelector;\n\n  constructor(props: ParameterFieldProps) {\n    super(props);\n\n    const { parameterMetadata } = this.props;\n\n    this._description = parameterMetadata\n      ? parameterMetadata.getDescription()\n      : undefined;\n\n    this._longDescription = parameterMetadata\n      ? parameterMetadata.getLongDescription()\n      : undefined;\n\n    this._allowedObjectType = parameterMetadata\n      ? parameterMetadata.getExtraInfo()\n      : undefined;\n  }\n\n  focus() {\n    if (this._field) this._field.focus();\n  }\n\n  render() {\n    return (\n      <ObjectSelector\n        margin={this.props.isInline ? 'none' : 'dense'}\n        project={this.props.project}\n        value={this.props.value}\n        onChange={this.props.onChange}\n        onRequestClose={this.props.onRequestClose}\n        allowedObjectType={this._allowedObjectType}\n        globalObjectsContainer={this.props.globalObjectsContainer}\n        objectsContainer={this.props.objectsContainer}\n        floatingLabelText={this._description}\n        helperMarkdownText={this._longDescription}\n        fullWidth\n        errorTextIfInvalid={\n          this._allowedObjectType ? (\n            <Trans>The object does not exist or can't be used here.</Trans>\n          ) : (\n            <Trans>Enter the name of an object.</Trans>\n          )\n        }\n        openOnFocus={\n          !this.props\n            .value /* Only force showing the list if no object is entered, see https://github.com/4ian/GDevelop/issues/859 */\n        }\n        ref={field => (this._field = field)}\n      />\n    );\n  }\n}\n\nexport const renderInlineObjectWithThumbnail = ({\n  value,\n  parameterMetadata,\n  renderObjectThumbnail,\n  MissingParameterValue,\n}: ParameterInlineRendererProps) => {\n  if (!value && !parameterMetadata.isOptional()) {\n    return <MissingParameterValue />;\n  }\n\n  return (\n    <span\n      title={value}\n      className={classNames({\n        [nameAndIconContainer]: true,\n      })}\n    >\n      {renderObjectThumbnail(value)}\n      {value}\n    </span>\n  );\n};\n","import RenderedInstance from './RenderedInstance';\nimport * as PIXI from 'pixi.js';\n\n/**\n * Create a renderer for an type of object displayed as an icon\n *\n * @extends RenderedInstance\n * @class RenderedIconInstance\n * @constructor\n */\nexport default function makeRenderer(iconPath) {\n  class RenderedIconInstance extends RenderedInstance {\n    constructor(\n      project,\n      layout,\n      instance,\n      associatedObject,\n      pixiContainer,\n      pixiResourcesLoader\n    ) {\n      super(\n        project,\n        layout,\n        instance,\n        associatedObject,\n        pixiContainer,\n        pixiResourcesLoader\n      );\n\n      this._pixiObject = new PIXI.Sprite(PIXI.Texture.fromImage(iconPath));\n      this._pixiContainer.addChild(this._pixiObject);\n    }\n\n    update() {\n      this._pixiObject.position.x = this._instance.getX();\n      this._pixiObject.position.y = this._instance.getY();\n      this._pixiObject.rotation = (this._instance.getAngle() * Math.PI) / 180.0;\n    }\n\n    static getThumbnail(project, resourcesLoader, object) {\n      return iconPath;\n    }\n  }\n\n  return RenderedIconInstance;\n}\n","// @flow\nimport ReactDOM from 'react-dom';\nimport RaisedButton from './RaisedButton';\n\n// If you're searching for button components,\n// take a look at FlatButton or RaisedButton.\n\n/**\n * Focus a button. This won't display the material-ui Ripple effect\n * but is still better than nothing.\n */\nexport const focusButton = (buttonRef: { current: null | RaisedButton }) => {\n  if (buttonRef && buttonRef.current) {\n    const element = ReactDOM.findDOMNode(buttonRef.current);\n    if (element instanceof HTMLButtonElement) {\n      element.focus();\n    } else if (element instanceof HTMLElement) {\n      const children = element.getElementsByTagName('button');\n      if (\n        children &&\n        children.length &&\n        children[0] instanceof HTMLButtonElement\n      ) {\n        children[0].focus();\n      }\n    }\n  }\n};\n","//@flow\nimport { type EnumeratedInstructionOrExpressionMetadata } from '../../../InstructionOrExpression/EnumeratedInstructionOrExpressionMetadata.js';\nimport { type ParameterValues } from './ExpressionParametersEditorDialog';\nimport { mapVector } from '../../../Utils/MapFor';\n\nconst filterOutCodeOnlyParameters = (\n  array: Array<string>,\n  expressionMetadata: gdExpressionMetadata | gdInstructionMetadata,\n  firstParameterIndex: number\n) => {\n  const parametersCount = expressionMetadata.getParametersCount();\n\n  return array.filter((parameter, index) => {\n    if (index < firstParameterIndex) return false;\n\n    return (\n      index < parametersCount &&\n      !expressionMetadata.getParameter(index).isCodeOnly()\n    );\n  });\n};\n\nexport const getVisibleParameterTypes = (\n  expressionMetadata: EnumeratedInstructionOrExpressionMetadata\n): Array<string> => {\n  const parameterTypes: Array<string> = mapVector(\n    expressionMetadata.metadata.getParameters(),\n    parameterMetadata => parameterMetadata.getType()\n  );\n\n  if (expressionMetadata.scope.objectMetadata) {\n    return filterOutCodeOnlyParameters(\n      parameterTypes,\n      expressionMetadata.metadata,\n      1\n    );\n  } else if (expressionMetadata.scope.behaviorMetadata) {\n    return filterOutCodeOnlyParameters(\n      parameterTypes,\n      expressionMetadata.metadata,\n      2\n    );\n  } else {\n    return filterOutCodeOnlyParameters(\n      parameterTypes,\n      expressionMetadata.metadata,\n      0\n    );\n  }\n};\n\nexport const formatExpressionCall = (\n  expressionInfo: EnumeratedInstructionOrExpressionMetadata,\n  parameterValues: ParameterValues\n): string => {\n  const functionName = expressionInfo.name || '';\n\n  if (expressionInfo.scope.objectMetadata) {\n    const objectName = parameterValues[0];\n\n    const functionArgs = filterOutCodeOnlyParameters(\n      parameterValues,\n      expressionInfo.metadata,\n      1\n    ).join(', ');\n    return `${objectName}.${functionName}(${functionArgs})`;\n  } else if (expressionInfo.scope.behaviorMetadata) {\n    const objectName = parameterValues[0];\n    const behaviorName = parameterValues[1];\n\n    const functionArgs = filterOutCodeOnlyParameters(\n      parameterValues,\n      expressionInfo.metadata,\n      2\n    ).join(', ');\n    return `${objectName}.${behaviorName}::${functionName}(${functionArgs})`;\n  } else {\n    const functionArgs = filterOutCodeOnlyParameters(\n      parameterValues,\n      expressionInfo.metadata,\n      0\n    ).join(', ');\n    return `${functionName}(${functionArgs})`;\n  }\n};\n","// @flow\nimport { Trans } from '@lingui/macro';\nimport { t } from '@lingui/macro';\nimport { I18n } from '@lingui/react';\nimport { type I18n as I18nType } from '@lingui/core';\n\nimport * as React from 'react';\nimport Toggle from '../../UI/Toggle';\nimport { mapFor } from '../../Utils/MapFor';\nimport EmptyMessage from '../../UI/EmptyMessage';\nimport ParameterRenderingService from '../ParameterRenderingService';\nimport HelpButton from '../../UI/HelpButton';\nimport {\n  type ResourceSource,\n  type ChooseResourceFunction,\n} from '../../ResourcesList/ResourceSource.flow';\nimport { type ResourceExternalEditor } from '../../ResourcesList/ResourceExternalEditor.flow';\nimport { Line, Spacer } from '../../UI/Grid';\nimport AlertMessage from '../../UI/AlertMessage';\nimport Window from '../../Utils/Window';\nimport { getExtraInstructionInformation } from '../../Hints';\nimport { isAnEventFunctionMetadata } from '../../EventsFunctionsExtensionsLoader';\nimport OpenInNew from '@material-ui/icons/OpenInNew';\nimport IconButton from '../../UI/IconButton';\nimport { type EventsScope } from '../../InstructionOrExpression/EventsScope.flow';\nimport { getObjectParameterIndex } from '../../InstructionOrExpression/EnumerateInstructions';\nimport Text from '../../UI/Text';\nimport { getInstructionMetadata } from './NewInstructionEditor';\nconst gd = global.gd;\n\nconst styles = {\n  // When displaying parameters, take all the height:\n  container: {\n    display: 'flex',\n    flexDirection: 'column',\n    flex: 1,\n  },\n  // When displaying the empty message, center the message:\n  emptyContainer: {\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n  parametersContainer: {\n    flex: 1,\n    overflowY: 'auto',\n  },\n  icon: {\n    width: 24,\n    height: 24,\n    marginRight: 8,\n    flexShrink: 0,\n  },\n  invertToggle: {\n    marginTop: 8,\n  },\n};\n\ntype Props = {|\n  project: gdProject,\n  scope: EventsScope,\n  globalObjectsContainer: gdObjectsContainer,\n  objectsContainer: gdObjectsContainer,\n  objectName?: ?string,\n  instruction: gdInstruction,\n  isCondition: boolean,\n  focusOnMount?: boolean,\n  resourceSources: Array<ResourceSource>,\n  onChooseResource: ChooseResourceFunction,\n  resourceExternalEditors: Array<ResourceExternalEditor>,\n  style?: Object,\n  openInstructionOrExpression: (\n    extension: gdPlatformExtension,\n    type: string\n  ) => void,\n  noHelpButton?: boolean,\n|};\ntype State = {|\n  isDirty: boolean,\n|};\n\nexport const setupInstruction = (\n  instruction: gdInstruction,\n  instructionMetadata: gdInstructionMetadata,\n  objectName: ?string\n) => {\n  instruction.setParametersCount(instructionMetadata.getParametersCount());\n\n  if (objectName) {\n    const objectParameterIndex = getObjectParameterIndex(instructionMetadata);\n    if (objectParameterIndex === -1) {\n      console.error(\n        `Instruction \"${instructionMetadata.getFullName()}\" is used for an object, but does not have an object as first parameter`\n      );\n      return;\n    }\n\n    instruction.setParameter(objectParameterIndex, objectName);\n  }\n};\n\nconst isParameterVisible = (\n  parameterMetadata: gdParameterMetadata,\n  parameterIndex: number,\n  objectParameterIndex: ?number\n) => {\n  // Hide parameters that are used only for code generation\n  if (parameterMetadata.isCodeOnly()) return false;\n\n  // For objects, hide the first object parameter, which is by convention the object name.\n  if (parameterIndex === objectParameterIndex) return false;\n\n  return true;\n};\n\nexport default class InstructionParametersEditor extends React.Component<\n  Props,\n  State\n> {\n  _firstVisibleField: ?any = {};\n  state = {\n    isDirty: false,\n  };\n\n  componentDidMount() {\n    if (this.props.focusOnMount) {\n      setTimeout(() => {\n        this.focus();\n      }, 300); // Let the time to the dialog that is potentially containing the InstructionParametersEditor to finish its transition.\n    }\n  }\n\n  focus() {\n    const { instruction, isCondition, project } = this.props;\n\n    // Verify that there is a field to focus.\n    if (\n      this._getVisibleParametersCount(\n        getInstructionMetadata({\n          instructionType: instruction.getType(),\n          isCondition,\n          project,\n        }),\n        this.props.objectName\n      ) !== 0\n    ) {\n      if (this._firstVisibleField && this._firstVisibleField.focus) {\n        this._firstVisibleField.focus();\n      }\n    }\n  }\n\n  _getVisibleParametersCount(\n    instructionMetadata: ?gdInstructionMetadata,\n    objectName: ?string\n  ) {\n    if (!instructionMetadata) return 0;\n\n    const objectParameterIndex = objectName\n      ? getObjectParameterIndex(instructionMetadata)\n      : -1;\n\n    return mapFor(0, instructionMetadata.getParametersCount(), i => {\n      if (!instructionMetadata) return false;\n      const parameterMetadata = instructionMetadata.getParameter(i);\n\n      return isParameterVisible(parameterMetadata, i, objectParameterIndex);\n    }).filter(isVisible => isVisible).length;\n  }\n\n  _openExtension = (i18n: I18nType) => {\n    if (this.state.isDirty) {\n      const answer = Window.showConfirmDialog(\n        i18n._(\n          t`You've made some changes here. Are you sure you want to discard them and open the function?`\n        )\n      );\n      if (!answer) return;\n    }\n\n    const { instruction, isCondition, project } = this.props;\n    const instructionType = instruction.getType();\n    if (!instructionType) return null;\n\n    const extension = isCondition\n      ? gd.MetadataProvider.getExtensionAndConditionMetadata(\n          project.getCurrentPlatform(),\n          instructionType\n        ).getExtension()\n      : gd.MetadataProvider.getExtensionAndActionMetadata(\n          project.getCurrentPlatform(),\n          instructionType\n        ).getExtension();\n\n    this.props.openInstructionOrExpression(extension, instructionType);\n  };\n\n  _renderEmpty() {\n    return (\n      <div style={{ ...styles.emptyContainer, ...this.props.style }}>\n        <EmptyMessage>\n          {this.props.isCondition\n            ? 'Choose a condition (or an object then a condition) on the left'\n            : 'Choose an action (or an object then an action) on the left'}\n        </EmptyMessage>\n      </div>\n    );\n  }\n\n  render() {\n    const {\n      instruction,\n      project,\n      globalObjectsContainer,\n      objectsContainer,\n      noHelpButton,\n      objectName,\n      isCondition,\n      scope,\n    } = this.props;\n\n    const instructionType = instruction.getType();\n    const instructionMetadata = getInstructionMetadata({\n      instructionType,\n      isCondition,\n      project,\n    });\n    if (!instructionMetadata) return this._renderEmpty();\n\n    const helpPage = instructionMetadata.getHelpPath();\n    const instructionExtraInformation = getExtraInstructionInformation(\n      instructionType\n    );\n    const objectParameterIndex = objectName\n      ? getObjectParameterIndex(instructionMetadata)\n      : -1;\n\n    setupInstruction(instruction, instructionMetadata, objectName);\n\n    let parameterFieldIndex = 0;\n    return (\n      <I18n>\n        {({ i18n }) => (\n          <div style={styles.container}>\n            <Line alignItems=\"center\">\n              <img\n                src={instructionMetadata.getIconFilename()}\n                alt=\"\"\n                style={styles.icon}\n              />\n              <Text>{instructionMetadata.getDescription()}</Text>\n              {isAnEventFunctionMetadata(instructionMetadata) && (\n                <IconButton\n                  onClick={() => {\n                    this._openExtension(i18n);\n                  }}\n                >\n                  <OpenInNew />\n                </IconButton>\n              )}\n            </Line>\n            {instructionExtraInformation && (\n              <Line>\n                <AlertMessage kind={instructionExtraInformation.kind}>\n                  {i18n._(instructionExtraInformation.message)}\n                </AlertMessage>\n              </Line>\n            )}\n            <Spacer />\n            <div key={instructionType} style={styles.parametersContainer}>\n              {mapFor(0, instructionMetadata.getParametersCount(), i => {\n                const parameterMetadata = instructionMetadata.getParameter(i);\n                if (\n                  !isParameterVisible(\n                    parameterMetadata,\n                    i,\n                    objectParameterIndex\n                  )\n                )\n                  return null;\n\n                const parameterMetadataType = parameterMetadata.getType();\n                const ParameterComponent = ParameterRenderingService.getParameterComponent(\n                  parameterMetadataType\n                );\n\n                // Track the field count on screen, to affect the ref to the\n                // first visible field.\n                const isFirstVisibleParameterField = parameterFieldIndex === 0;\n                parameterFieldIndex++;\n\n                return (\n                  <ParameterComponent\n                    instructionMetadata={instructionMetadata}\n                    instruction={instruction}\n                    parameterMetadata={parameterMetadata}\n                    parameterIndex={i}\n                    value={instruction.getParameter(i)}\n                    onChange={value => {\n                      if (instruction.getParameter(i) !== value) {\n                        instruction.setParameter(i, value);\n                        this.setState({\n                          isDirty: true,\n                        });\n                      }\n                    }}\n                    project={project}\n                    scope={scope}\n                    globalObjectsContainer={globalObjectsContainer}\n                    objectsContainer={objectsContainer}\n                    key={i}\n                    parameterRenderingService={ParameterRenderingService}\n                    resourceSources={this.props.resourceSources}\n                    onChooseResource={this.props.onChooseResource}\n                    resourceExternalEditors={this.props.resourceExternalEditors}\n                    ref={field => {\n                      if (isFirstVisibleParameterField) {\n                        this._firstVisibleField = field;\n                      }\n                    }}\n                  />\n                );\n              })}\n              {this._getVisibleParametersCount(\n                instructionMetadata,\n                objectName\n              ) === 0 && (\n                <EmptyMessage>\n                  <Trans>There is nothing to configure.</Trans>\n                </EmptyMessage>\n              )}\n              {this.props.isCondition && (\n                <Toggle\n                  label={<Trans>Invert condition</Trans>}\n                  labelPosition=\"right\"\n                  toggled={instruction.isInverted()}\n                  style={styles.invertToggle}\n                  onToggle={(e, enabled) => {\n                    instruction.setInverted(enabled);\n                    this.forceUpdate();\n                  }}\n                />\n              )}\n            </div>\n            <Line>\n              {!noHelpButton && helpPage && (\n                <HelpButton\n                  helpPagePath={instructionMetadata.getHelpPath()}\n                  label={\n                    this.props.isCondition ? (\n                      <Trans>Help for this condition</Trans>\n                    ) : (\n                      <Trans>Help for this action</Trans>\n                    )\n                  }\n                />\n              )}\n            </Line>\n          </div>\n        )}\n      </I18n>\n    );\n  }\n}\n","// @flow\nimport * as React from 'react';\nimport {\n  enumerateObjectAndBehaviorsInstructions,\n  enumerateAllInstructions,\n  getObjectParameterIndex,\n} from '../../InstructionOrExpression/EnumerateInstructions';\nimport {\n  createTree,\n  type InstructionOrExpressionTreeNode,\n} from '../../InstructionOrExpression/CreateTree';\nimport {\n  type EnumeratedInstructionOrExpressionMetadata,\n  filterEnumeratedInstructionOrExpressionMetadataByScope,\n} from '../../InstructionOrExpression/EnumeratedInstructionOrExpressionMetadata.js';\nimport { type EventsScope } from '../../InstructionOrExpression/EventsScope.flow';\nconst gd = global.gd;\n\n/** Helper to get the gdInstructionMetadata of an instruction. */\nexport const getInstructionMetadata = ({\n  instructionType,\n  isCondition,\n  project,\n}: {|\n  instructionType: string,\n  isCondition: boolean,\n  project: gdProject,\n|}): ?gdInstructionMetadata => {\n  if (!instructionType) return null;\n\n  return isCondition\n    ? gd.MetadataProvider.getConditionMetadata(\n        project.getCurrentPlatform(),\n        instructionType\n      )\n    : gd.MetadataProvider.getActionMetadata(\n        project.getCurrentPlatform(),\n        instructionType\n      );\n};\n\ntype Parameters = {|\n  project: gdProject,\n  instruction: gdInstruction,\n  isCondition: boolean,\n  isNewInstruction: boolean,\n  scope: EventsScope,\n  globalObjectsContainer: gdObjectsContainer,\n  objectsContainer: gdObjectsContainer,\n|};\n\ntype NewInstructionEditorState = {|\n  chosenObjectName: ?string,\n  chosenObjectInstructionsInfo: ?Array<EnumeratedInstructionOrExpressionMetadata>,\n  chosenObjectInstructionsInfoTree: ?InstructionOrExpressionTreeNode,\n|};\n\ntype NewInstructionEditorSetters = {|\n  chooseFreeInstruction: (\n    type: string\n  ) => {| ...NewInstructionEditorState, instruction: gdInstruction |},\n  chooseObject: (\n    objectName: string\n  ) => {| ...NewInstructionEditorState, instruction: gdInstruction |},\n  chooseObjectInstruction: (\n    type: string\n  ) => {| ...NewInstructionEditorState, instruction: gdInstruction |},\n|};\n\nconst findInstruction = (\n  list: Array<EnumeratedInstructionOrExpressionMetadata>,\n  instructionType: string\n): ?EnumeratedInstructionOrExpressionMetadata => {\n  return list.find(({ type }) => type === instructionType);\n};\n\n/** React Hook handling the state of an instruction editor. */\nexport const useNewInstructionEditor = ({\n  instruction,\n  isCondition,\n  project,\n  isNewInstruction,\n  scope,\n  globalObjectsContainer,\n  objectsContainer,\n}: Parameters): [NewInstructionEditorState, NewInstructionEditorSetters] => {\n  const getChosenObjectState = (\n    objectName: string,\n    discardInstructionTypeIfNotInObjectInstructions: boolean\n  ): NewInstructionEditorState => {\n    const chosenObjectInstructionsInfo = filterEnumeratedInstructionOrExpressionMetadataByScope(\n      enumerateObjectAndBehaviorsInstructions(\n        isCondition,\n        globalObjectsContainer,\n        objectsContainer,\n        objectName\n      ),\n      scope\n    );\n\n    // As we changed to a new object, verify if the instruction is still valid for this object. If not,\n    // discard the chosen instruction - this is to avoid the user creating invalid instructions.\n    if (\n      instruction.getType() &&\n      discardInstructionTypeIfNotInObjectInstructions\n    ) {\n      const instructionMetadata = findInstruction(\n        chosenObjectInstructionsInfo,\n        instruction.getType()\n      );\n      if (!instructionMetadata) {\n        instruction.setType('');\n      }\n    }\n\n    return {\n      chosenObjectName: objectName,\n      chosenObjectInstructionsInfo,\n      chosenObjectInstructionsInfoTree: createTree(\n        chosenObjectInstructionsInfo\n      ),\n    };\n  };\n\n  const getInitialState = (): NewInstructionEditorState => {\n    if (!isNewInstruction) {\n      // Check if the instruction is an object/behavior instruction. If yes\n      // select the object, which is the first parameter of the instruction.\n      const allInstructions = enumerateAllInstructions(isCondition);\n      const instructionType: string = instruction.getType();\n      const enumeratedInstructionMetadata = findInstruction(\n        allInstructions,\n        instructionType\n      );\n      if (\n        enumeratedInstructionMetadata &&\n        (enumeratedInstructionMetadata.scope.objectMetadata ||\n          enumeratedInstructionMetadata.scope.behaviorMetadata)\n      ) {\n        const objectParameterIndex = getObjectParameterIndex(\n          enumeratedInstructionMetadata.metadata\n        );\n        if (objectParameterIndex !== -1) {\n          return getChosenObjectState(\n            instruction.getParameter(objectParameterIndex),\n            false /* Even if the instruction is invalid for the object, show it as it's what we have already */\n          );\n        }\n      }\n    }\n\n    // We're either making a new instruction or editing a free instruction.\n    return {\n      chosenObjectName: null,\n      chosenObjectInstructionsInfo: null,\n      chosenObjectInstructionsInfoTree: null,\n    };\n  };\n\n  const [state, setState] = React.useState(getInitialState);\n\n  const chooseObject = (objectName: string) => {\n    const newState = getChosenObjectState(objectName, true);\n    setState(newState);\n    return {\n      instruction,\n      ...newState,\n    };\n  };\n\n  const chooseObjectInstruction = (type: string) => {\n    instruction.setType(type);\n    if (state.chosenObjectName) {\n      const newState = getChosenObjectState(state.chosenObjectName, true);\n      setState(newState);\n      return {\n        instruction,\n        ...newState,\n      };\n    }\n\n    return {\n      instruction,\n      ...state,\n    };\n  };\n\n  const chooseFreeInstruction = (type: string) => {\n    instruction.setType(type);\n    const newState = {\n      chosenObjectName: null,\n      chosenObjectInstructionsInfo: null,\n      chosenObjectInstructionsInfoTree: null,\n    };\n    setState({\n      chosenObjectName: null,\n      chosenObjectInstructionsInfo: null,\n      chosenObjectInstructionsInfoTree: null,\n    });\n\n    return {\n      instruction,\n      ...newState,\n    };\n  };\n\n  return [\n    state,\n    {\n      chooseFreeInstruction,\n      chooseObject,\n      chooseObjectInstruction,\n    },\n  ];\n};\n","// @flow\nimport * as React from 'react';\n\nexport default function useForceUpdate() {\n  const [, updateState] = React.useState();\n  const forceUpdate = React.useCallback(() => updateState({}), []);\n\n  return forceUpdate;\n}\n","// @flow\nimport { Trans } from '@lingui/macro';\nimport * as React from 'react';\nimport Snackbar from '@material-ui/core/Snackbar';\nimport Button from '@material-ui/core/Button';\nimport PreferencesContext, {\n  type AlertMessageIdentifier,\n} from '../../MainFrame/Preferences/PreferencesContext';\nimport { ScreenTypeMeasurer } from '../Reponsive/ScreenTypeMeasurer';\n\ntype Props = {|\n  identifier: AlertMessageIdentifier,\n  message: React.Node,\n  touchScreenMessage?: React.Node,\n  show: boolean,\n|};\n\nexport default class InfoBar extends React.PureComponent<Props> {\n  render() {\n    const { identifier } = this.props;\n\n    return (\n      <ScreenTypeMeasurer>\n        {screenType => (\n          <PreferencesContext.Consumer>\n            {({ values, showAlertMessage }) => (\n              <Snackbar\n                open={\n                  this.props.show && !values.hiddenAlertMessages[identifier]\n                }\n                message={\n                  screenType === 'touch' && this.props.touchScreenMessage\n                    ? this.props.touchScreenMessage\n                    : this.props.message\n                }\n                action={\n                  <Button\n                    key=\"undo\"\n                    color=\"primary\"\n                    size=\"small\"\n                    onClick={() => {\n                      showAlertMessage(identifier, false);\n                    }}\n                  >\n                    <Trans>Got it</Trans>\n                  </Button>\n                }\n              />\n            )}\n          </PreferencesContext.Consumer>\n        )}\n      </ScreenTypeMeasurer>\n    );\n  }\n}\n","// @flow\nimport * as PIXI from 'pixi.js';\n\ntype Props = {|\n  initialViewX: number,\n  initialViewY: number,\n  width: number,\n  height: number,\n  options: any,\n|};\n\nexport default class ViewPosition {\n  viewX: number = 0;\n  viewY: number = 0;\n  _width: number;\n  _height: number;\n  options: any;\n  _pixiContainer = new PIXI.Container();\n\n  constructor({ initialViewX, initialViewY, width, height, options }: Props) {\n    this.viewX = initialViewX;\n    this.viewY = initialViewY;\n    this.options = options;\n    this.resize(width, height);\n  }\n\n  setOptions(options: any) {\n    this.options = options;\n  }\n\n  resize(width: number, height: number) {\n    this._width = width;\n    this._height = height;\n  }\n\n  getWidth() {\n    return this._width;\n  }\n\n  getHeight() {\n    return this._height;\n  }\n\n  /**\n   * Convert a point from the canvas coordinates (for example, the mouse position) to the\n   * \"world\" coordinates.\n   */\n  toSceneCoordinates = (x: number, y: number): [number, number] => {\n    x -= this._width / 2;\n    y -= this._height / 2;\n    x /= Math.abs(this._pixiContainer.scale.x);\n    y /= Math.abs(this._pixiContainer.scale.y);\n\n    var viewRotation = 0;\n    var tmp = x;\n    x =\n      Math.cos((viewRotation / 180) * Math.PI) * x -\n      Math.sin((viewRotation / 180) * Math.PI) * y;\n    y =\n      Math.sin((viewRotation / 180) * Math.PI) * tmp +\n      Math.cos((viewRotation / 180) * Math.PI) * y;\n\n    return [x + this.viewX, y + this.viewY];\n  };\n\n  /**\n   * Convert a point from the \"world\" coordinates (for example, an object position) to the\n   * canvas coordinates.\n   */\n  toCanvasCoordinates = (x: number, y: number): [number, number] => {\n    x -= this.viewX;\n    y -= this.viewY;\n\n    var viewRotation = -0;\n    var tmp = x;\n    x =\n      Math.cos((viewRotation / 180) * Math.PI) * x -\n      Math.sin((viewRotation / 180) * Math.PI) * y;\n    y =\n      Math.sin((viewRotation / 180) * Math.PI) * tmp +\n      Math.cos((viewRotation / 180) * Math.PI) * y;\n\n    x *= Math.abs(this._pixiContainer.scale.x);\n    y *= Math.abs(this._pixiContainer.scale.y);\n\n    return [x + this._width / 2, y + this._height / 2];\n  };\n\n  scrollBy(x: number, y: number) {\n    this.viewX += x;\n    this.viewY += y;\n  }\n\n  scrollTo(x: number, y: number) {\n    this.viewX = x;\n    this.viewY = y;\n  }\n\n  scrollToInstance(instance: gdInitialInstance) {\n    this.viewX = instance.getX();\n    this.viewY = instance.getY();\n  }\n\n  getViewX() {\n    return this.viewX;\n  }\n\n  getViewY() {\n    return this.viewY;\n  }\n\n  getPixiContainer() {\n    return this._pixiContainer;\n  }\n\n  render() {\n    this._pixiContainer.position.x = -this.viewX * this.options.zoomFactor;\n    this._pixiContainer.position.y = -this.viewY * this.options.zoomFactor;\n    this._pixiContainer.position.x += this._width / 2;\n    this._pixiContainer.position.y += this._height / 2;\n    this._pixiContainer.scale.x = this.options.zoomFactor;\n    this._pixiContainer.scale.y = this.options.zoomFactor;\n  }\n}\n","// @flow\nconst gd = global.gd;\n\nexport default class InstancesSelection {\n  selection: Array<gdInitialInstance> = [];\n\n  hasSelectedInstances() {\n    return !!this.getSelectedInstances().length;\n  }\n\n  getSelectedInstances() {\n    return this.selection;\n  }\n\n  isInstanceSelected(instance: gdInitialInstance) {\n    for (var i = 0; i < this.selection.length; i++) {\n      if (gd.compare(this.selection[i], instance)) return true;\n    }\n\n    return false;\n  }\n\n  clearSelection() {\n    this.selection.length = 0;\n  }\n\n  selectInstance(\n    instance: gdInitialInstance,\n    multiselect: boolean,\n    layersVisibility: ?{ [string]: boolean } = null\n  ) {\n    if (this.isInstanceSelected(instance)) {\n      if (multiselect) this.unselectInstance(instance);\n\n      return;\n    }\n\n    if (!multiselect) this.clearSelection();\n\n    if (!layersVisibility || layersVisibility[instance.getLayer()]) {\n      this.selection.push(instance);\n    }\n  }\n\n  selectInstances(\n    instances: Array<gdInitialInstance>,\n    multiselect: boolean,\n    layersVisibility: ?{ [string]: boolean } = null\n  ) {\n    if (!multiselect) this.clearSelection();\n\n    instances.forEach(instance =>\n      this.selectInstance(instance, true, layersVisibility)\n    );\n  }\n\n  unselectInstance(instance: gdInitialInstance) {\n    if (this.isInstanceSelected(instance)) {\n      var i = this.selection.length - 1;\n      while (i >= -1 && this.selection[i].ptr !== instance.ptr) {\n        --i;\n      }\n\n      this.selection.splice(i, 1);\n    }\n  }\n}\n","//TODO: Factor with styles.js from LayersList.\nexport default {\n  handleColumn: {\n    width: 24,\n    paddingLeft: 8,\n    paddingRight: 0,\n  },\n  coordinateColumn: {\n    width: 48,\n  },\n  toolColumn: {\n    width: 48,\n  },\n};\n","// @flow\n\nexport const makeTimestampedId = () =>\n  '' + Date.now() + '-' + Math.floor(Math.random() * 1000000);\n","// @flow\nimport flatten from 'lodash/flatten';\nimport { mapFor } from '../../Utils/MapFor';\n\nexport const enumerateVariables = (\n  variablesContainer: ?gdVariablesContainer\n): Array<string> => {\n  if (!variablesContainer) {\n    return [];\n  }\n\n  const enumerateVariableAndChildrenNames = (\n    fullName: string,\n    variable: gdVariable\n  ): Array<string> => {\n    const names = [fullName];\n    if (!variable.isStructure()) return names;\n\n    variable\n      .getAllChildrenNames()\n      .toJSArray()\n      .forEach(childName => {\n        enumerateVariableAndChildrenNames(\n          `${fullName}.${childName}`,\n          variable.getChild(childName)\n        ).forEach(name => {\n          names.push(name);\n        });\n      });\n\n    return names;\n  };\n\n  return flatten(\n    mapFor(0, variablesContainer.count(), i => {\n      if (!variablesContainer) return [];\n\n      return enumerateVariableAndChildrenNames(\n        variablesContainer.getNameAt(i),\n        variablesContainer.getAt(i)\n      );\n    })\n  );\n};\n","// @flow\nimport OpenInNew from '@material-ui/icons/OpenInNew';\nimport React, { Component } from 'react';\nimport RaisedButton from '../../UI/RaisedButton';\nimport { enumerateVariables } from './EnumerateVariables';\nimport { type ParameterFieldProps } from './ParameterFieldCommons';\nimport classNames from 'classnames';\nimport { icon, nameAndIconContainer } from '../EventsTree/ClassNames';\nimport SemiControlledAutoComplete, {\n  type SemiControlledAutoCompleteInterface,\n} from '../../UI/SemiControlledAutoComplete';\nimport { TextFieldWithButtonLayout } from '../../UI/Layout';\nimport { type ParameterInlineRendererProps } from './ParameterInlineRenderer.flow';\n\ntype Props = {\n  ...ParameterFieldProps,\n  variablesContainer: ?gdVariablesContainer,\n  onOpenDialog: ?() => void,\n};\n\nexport default class VariableField extends Component<Props, {||}> {\n  _field: ?SemiControlledAutoCompleteInterface;\n\n  focus() {\n    if (this._field) this._field.focus();\n  }\n\n  render() {\n    const {\n      value,\n      onChange,\n      isInline,\n      onOpenDialog,\n      parameterMetadata,\n      variablesContainer,\n      onRequestClose,\n    } = this.props;\n\n    const description = parameterMetadata\n      ? parameterMetadata.getDescription()\n      : undefined;\n\n    return (\n      <TextFieldWithButtonLayout\n        renderTextField={() => (\n          <SemiControlledAutoComplete\n            margin={this.props.isInline ? 'none' : 'dense'}\n            floatingLabelText={description}\n            helperMarkdownText={\n              parameterMetadata\n                ? parameterMetadata.getLongDescription()\n                : undefined\n            }\n            fullWidth\n            value={value}\n            onChange={onChange}\n            onRequestClose={onRequestClose}\n            dataSource={enumerateVariables(variablesContainer).map(\n              variableName => ({\n                text: variableName,\n                value: variableName,\n              })\n            )}\n            openOnFocus={!isInline}\n            ref={field => (this._field = field)}\n          />\n        )}\n        renderButton={style =>\n          onOpenDialog && !isInline ? (\n            <RaisedButton\n              icon={<OpenInNew />}\n              disabled={!this.props.variablesContainer}\n              primary\n              style={style}\n              onClick={onOpenDialog}\n            />\n          ) : null\n        }\n      />\n    );\n  }\n}\n\nexport const renderVariableWithIcon = (\n  {\n    value,\n    parameterMetadata,\n    MissingParameterValue,\n  }: ParameterInlineRendererProps,\n  iconPath: string,\n  tooltip: string\n) => {\n  if (!value && !parameterMetadata.isOptional()) {\n    return <MissingParameterValue />;\n  }\n\n  return (\n    <span\n      title={tooltip}\n      className={classNames({\n        [nameAndIconContainer]: true,\n      })}\n    >\n      <img\n        className={classNames({\n          [icon]: true,\n        })}\n        src={iconPath}\n        alt=\"\"\n      />\n      {value}\n    </span>\n  );\n};\n","// @flow\nimport { Trans } from '@lingui/macro';\n\nimport * as React from 'react';\nimport './MainFrame.css';\nimport Drawer from '@material-ui/core/Drawer';\nimport Snackbar from '@material-ui/core/Snackbar';\nimport Toolbar from './Toolbar';\nimport ProjectTitlebar from './ProjectTitlebar';\nimport PreferencesDialog from './Preferences/PreferencesDialog';\nimport AboutDialog from './AboutDialog';\nimport ProjectManager from '../ProjectManager';\nimport PlatformSpecificAssetsDialog from '../PlatformSpecificAssetsEditor/PlatformSpecificAssetsDialog';\nimport LoaderModal from '../UI/LoaderModal';\nimport EditorBar from '../UI/EditorBar';\nimport CloseConfirmDialog from '../UI/CloseConfirmDialog';\nimport ProfileDialog from '../Profile/ProfileDialog';\nimport Window from '../Utils/Window';\nimport { showErrorBox } from '../UI/Messages/MessageBox';\nimport {\n  ClosableTabs,\n  ClosableTab,\n  TabContentContainer,\n} from '../UI/ClosableTabs';\nimport {\n  getEditorTabsInitialState,\n  openEditorTab,\n  closeEditorTab,\n  closeOtherEditorTabs,\n  closeAllEditorTabs,\n  changeCurrentTab,\n  getEditors,\n  getCurrentTabIndex,\n  getCurrentTab,\n  closeProjectTabs,\n  closeLayoutTabs,\n  closeExternalLayoutTabs,\n  closeExternalEventsTabs,\n  closeEventsFunctionsExtensionTabs,\n  saveUiSettings,\n  type EditorTabsState,\n  type EditorTab,\n  getEventsFunctionsExtensionEditor,\n} from './EditorTabsHandler';\nimport { timePromise } from '../Utils/TimeFunction';\nimport newNameGenerator from '../Utils/NewNameGenerator';\nimport HelpFinder from '../HelpFinder';\nimport DebuggerEditor from './Editors/DebuggerEditor';\nimport EventsEditor from './Editors/EventsEditor';\nimport ExternalEventsEditor from './Editors/ExternalEventsEditor';\nimport SceneEditor from './Editors/SceneEditor';\nimport ExternalLayoutEditor from './Editors/ExternalLayoutEditor';\nimport EventsFunctionsExtensionEditor from './Editors/EventsFunctionsExtensionEditor';\nimport StartPage from './Editors/StartPage';\nimport ResourcesEditor from './Editors/ResourcesEditor';\nimport ErrorBoundary from '../UI/ErrorBoundary';\nimport SubscriptionDialog from '../Profile/SubscriptionDialog';\nimport ResourcesLoader from '../ResourcesLoader/index';\nimport {\n  type PreviewLauncherInterface,\n  type PreviewLauncherProps,\n  type PreviewLauncherComponent,\n  type PreviewOptions,\n} from '../Export/PreviewLauncher.flow';\nimport { type ResourceSource } from '../ResourcesList/ResourceSource.flow';\nimport { type ResourceExternalEditor } from '../ResourcesList/ResourceExternalEditor.flow';\nimport { type JsExtensionsLoader } from '../JsExtensionsLoader';\nimport { type EventsFunctionsExtensionsState } from '../EventsFunctionsExtensionsLoader/EventsFunctionsExtensionsContext';\nimport {\n  getUpdateNotificationTitle,\n  getUpdateNotificationBody,\n  type UpdateStatus,\n} from './UpdaterTools';\nimport { showWarningBox } from '../UI/Messages/MessageBox';\nimport EmptyMessage from '../UI/EmptyMessage';\nimport ChangelogDialogContainer from './Changelog/ChangelogDialogContainer';\nimport { getNotNullTranslationFunction } from '../Utils/i18n/getTranslationFunction';\nimport { type I18n } from '@lingui/core';\nimport { t } from '@lingui/macro';\nimport LanguageDialog from './Preferences/LanguageDialog';\nimport PreferencesContext from './Preferences/PreferencesContext';\nimport { getFunctionNameFromType } from '../EventsFunctionsExtensionsLoader';\nimport { type ExportDialogWithoutExportsProps } from '../Export/ExportDialog';\nimport { type CreateProjectDialogWithComponentsProps } from '../ProjectCreation/CreateProjectDialog';\nimport { getStartupTimesSummary } from '../Utils/StartupTimes';\nimport {\n  type StorageProvider,\n  type StorageProviderOperations,\n  type FileMetadata,\n} from '../ProjectsStorage';\nimport OpenFromStorageProviderDialog from '../ProjectsStorage/OpenFromStorageProviderDialog';\nimport SaveToStorageProviderDialog from '../ProjectsStorage/SaveToStorageProviderDialog';\nimport OpenConfirmDialog from '../ProjectsStorage/OpenConfirmDialog';\nimport verifyProjectContent from '../ProjectsStorage/ProjectContentChecker';\nimport { type UnsavedChanges } from './UnsavedChangesContext';\nimport { type MainMenuProps } from './MainMenu.flow';\nimport { emptyPreviewButtonSettings } from './Toolbar/PreviewButtons';\n\nconst GD_STARTUP_TIMES = global.GD_STARTUP_TIMES || [];\n\nconst gd = global.gd;\n\nconst styles = {\n  drawerContent: {\n    width: 320,\n    overflowX: 'hidden',\n    display: 'flex',\n    flexDirection: 'column',\n  },\n};\n\ntype State = {|\n  createDialogOpen: boolean,\n  exportDialogOpen: boolean,\n  introDialogOpen: boolean,\n  openConfirmDialogOpen: boolean,\n  genericDialogOpen: boolean,\n  loadingProject: boolean,\n  previewLoading: boolean,\n  currentProject: ?gdProject,\n  currentFileMetadata: ?FileMetadata,\n  projectManagerOpen: boolean,\n  editorTabs: EditorTabsState,\n  genericDialog: null,\n  snackMessage: string,\n  snackMessageOpen: boolean,\n  preferencesDialogOpen: boolean,\n  languageDialogOpen: boolean,\n  profileDialogOpen: boolean,\n  subscriptionDialogOpen: boolean,\n  updateStatus: UpdateStatus,\n  aboutDialogOpen: boolean,\n  openFromStorageProviderDialogOpen: boolean,\n  saveToStorageProviderDialogOpen: boolean,\n  platformSpecificAssetsDialogOpen: boolean,\n  helpFinderDialogOpen: boolean,\n  eventsFunctionsExtensionsError: ?Error,\n  gdjsDevelopmentWatcherEnabled: boolean,\n  isPreviewFirstSceneOverriden: boolean,\n  previewFirstSceneName: string,\n|};\n\ntype Props = {\n  integratedEditor?: boolean,\n  introDialog?: React.Element<*>,\n  renderMainMenu?: MainMenuProps => React.Node,\n  renderPreviewLauncher?: (\n    props: PreviewLauncherProps,\n    ref: (previewLauncher: ?PreviewLauncherInterface) => void\n  ) => React.Element<PreviewLauncherComponent>,\n  onEditObject?: gdObject => void,\n  storageProviderOperations: StorageProviderOperations,\n  storageProviders: Array<StorageProvider>,\n  useStorageProvider: (?StorageProvider) => Promise<void>,\n  resourceSources: Array<ResourceSource>,\n  resourceExternalEditors: Array<ResourceExternalEditor>,\n  loading?: boolean,\n  requestUpdate?: () => void,\n  renderExportDialog?: ExportDialogWithoutExportsProps => React.Node,\n  renderCreateDialog?: CreateProjectDialogWithComponentsProps => React.Node,\n  renderGDJSDevelopmentWatcher?: ?() => React.Node,\n  extensionsLoader?: JsExtensionsLoader,\n  initialFileMetadataToOpen: ?FileMetadata,\n  eventsFunctionsExtensionsState: EventsFunctionsExtensionsState,\n  i18n: I18n,\n  unsavedChanges?: UnsavedChanges,\n};\n\nclass MainFrame extends React.Component<Props, State> {\n  state = {\n    createDialogOpen: false,\n    exportDialogOpen: false,\n    introDialogOpen: false,\n    openConfirmDialogOpen: false,\n    genericDialogOpen: false,\n    loadingProject: false,\n    previewLoading: false,\n    currentProject: null,\n    currentFileMetadata: null,\n    projectManagerOpen: false,\n    editorTabs: getEditorTabsInitialState(),\n    genericDialog: null,\n    snackMessage: '',\n    snackMessageOpen: false,\n    preferencesDialogOpen: false,\n    languageDialogOpen: false,\n    profileDialogOpen: false,\n    subscriptionDialogOpen: false,\n    updateStatus: { message: '', status: 'unknown' },\n    aboutDialogOpen: false,\n    openFromStorageProviderDialogOpen: false,\n    saveToStorageProviderDialogOpen: false,\n    platformSpecificAssetsDialogOpen: false,\n    helpFinderDialogOpen: false,\n    eventsFunctionsExtensionsError: null,\n    gdjsDevelopmentWatcherEnabled: false,\n    isPreviewFirstSceneOverriden: false,\n    previewFirstSceneName: '',\n  };\n  toolbar = null;\n  _resourceSourceDialogs = {};\n  _previewLauncher: ?PreviewLauncherInterface = null;\n\n  componentWillMount() {\n    if (!this.props.integratedEditor) this.openStartPage();\n  }\n\n  componentDidMount() {\n    GD_STARTUP_TIMES.push(['MainFrameComponentDidMount', performance.now()]);\n\n    const { initialFileMetadataToOpen } = this.props;\n\n    this._loadExtensions()\n      .catch(() => {\n        /* Ignore errors */\n      })\n      .then(() => {\n        // Enable the GDJS development watcher *after* the extensions are loaded,\n        // to avoid the watcher interfering with the extension loading (by updating GDJS,\n        // which could lead in the extension loading failing for some extensions as file\n        // are removed/copied).\n        this.setState({\n          gdjsDevelopmentWatcherEnabled: true,\n        });\n      });\n    if (initialFileMetadataToOpen) {\n      this._openInitialFileMetadata(/* isAfterUserInteraction= */ false);\n    } else if (this.props.introDialog && !Window.isDev())\n      this._openIntroDialog(true);\n\n    GD_STARTUP_TIMES.push([\n      'MainFrameComponentDidMountFinished',\n      performance.now(),\n    ]);\n    console.info('Startup times:', getStartupTimesSummary());\n  }\n\n  _openInitialFileMetadata = (isAfterUserInteraction: boolean) => {\n    const { storageProviderOperations, initialFileMetadataToOpen } = this.props;\n\n    if (!initialFileMetadataToOpen) return;\n\n    if (\n      !isAfterUserInteraction &&\n      storageProviderOperations.doesInitialOpenRequireUserInteraction\n    ) {\n      this._openOpenConfirmDialog(true);\n      return;\n    }\n\n    this.openFromFileMetadata(initialFileMetadataToOpen).then(() =>\n      this.openSceneOrProjectManager()\n    );\n  };\n\n  _languageDidChange() {\n    // A change in the language will automatically be applied\n    // on all React components, as it's handled by GDI18nProvider.\n    // We still have this method that will be called when the language\n    // dialog is closed after a language change. We then reload GDevelop\n    // extensions so that they declare all objects/actions/condition/etc...\n    // using the new language.\n    gd.JsPlatform.get().reloadBuiltinExtensions();\n    this._loadExtensions().catch(() => {});\n  }\n\n  _loadExtensions = (): Promise<void> => {\n    const { extensionsLoader, i18n } = this.props;\n    if (!extensionsLoader) {\n      console.info(\n        'No extensions loader specified, skipping extensions loading.'\n      );\n      return Promise.reject(new Error('No extension loader specified.'));\n    }\n\n    return extensionsLoader\n      .loadAllExtensions(getNotNullTranslationFunction(i18n))\n      .then(loadingResults => {\n        const successLoadingResults = loadingResults.filter(\n          loadingResult => !loadingResult.result.error\n        );\n        const failLoadingResults = loadingResults.filter(\n          loadingResult =>\n            loadingResult.result.error && !loadingResult.result.dangerous\n        );\n        const dangerousLoadingResults = loadingResults.filter(\n          loadingResult =>\n            loadingResult.result.error && loadingResult.result.dangerous\n        );\n        console.info(`Loaded ${successLoadingResults.length} JS extensions.`);\n        if (failLoadingResults.length) {\n          console.error(\n            `⚠️ Unable to load ${\n              failLoadingResults.length\n            } JS extensions. Please check these errors:`,\n            failLoadingResults\n          );\n        }\n        if (dangerousLoadingResults.length) {\n          console.error(\n            `💣 Dangerous exceptions while loading ${\n              dangerousLoadingResults.length\n            } JS extensions. 🔥 Please check these errors as they will CRASH GDevelop:`,\n            dangerousLoadingResults\n          );\n        }\n      });\n  };\n\n  loadFromSerializedProject = (\n    serializedProject: gdSerializerElement,\n    fileMetadata: ?FileMetadata\n  ): Promise<void> => {\n    return timePromise(\n      () => {\n        const newProject = gd.ProjectHelper.createNewGDJSProject();\n        newProject.unserializeFrom(serializedProject);\n\n        return this.loadFromProject(newProject, fileMetadata);\n      },\n      time => console.info(`Unserialization took ${time} ms`)\n    );\n  };\n\n  loadFromProject = (\n    project: gdProject,\n    fileMetadata: ?FileMetadata\n  ): Promise<void> => {\n    const { eventsFunctionsExtensionsState } = this.props;\n\n    return this.closeProject().then(() => {\n      // Make sure that the ResourcesLoader cache is emptied, so that\n      // the URL to a resource with a name in the old project is not re-used\n      // for another resource with the same name in the new project.\n      ResourcesLoader.burstAllUrlsCache();\n      // TODO: Pixi cache should also be burst\n\n      return new Promise(resolve => {\n        this.setState(\n          {\n            currentProject: project,\n            currentFileMetadata: fileMetadata,\n          },\n          () => {\n            // Load all the EventsFunctionsExtension when the game is loaded. If they are modified,\n            // their editor will take care of reloading them.\n            eventsFunctionsExtensionsState.loadProjectEventsFunctionsExtensions(\n              project\n            );\n\n            if (fileMetadata) {\n              project.setProjectFile(fileMetadata.fileIdentifier);\n            }\n\n            resolve();\n          }\n        );\n      });\n    });\n  };\n\n  openFromFileMetadata = (fileMetadata: FileMetadata): Promise<void> => {\n    const { i18n, storageProviderOperations } = this.props;\n    const {\n      hasAutoSave,\n      onGetAutoSave,\n      onOpen,\n      getOpenErrorMessage,\n    } = storageProviderOperations;\n\n    if (!onOpen) {\n      console.error(\n        'Tried to open a file for a storage without onOpen support:',\n        fileMetadata,\n        storageProviderOperations\n      );\n      return Promise.resolve();\n    }\n\n    const checkForAutosave = (): Promise<FileMetadata> => {\n      if (!hasAutoSave || !onGetAutoSave) {\n        return Promise.resolve(fileMetadata);\n      }\n\n      return hasAutoSave(fileMetadata, true).then(canOpenAutosave => {\n        if (!canOpenAutosave) return fileMetadata;\n\n        const answer = Window.showConfirmDialog(\n          i18n._(\n            t`An autosave file (backup made automatically by GDevelop) that is newer than the project file exists. Would you like to load it instead?`\n          )\n        );\n        if (!answer) return fileMetadata;\n\n        return onGetAutoSave(fileMetadata);\n      });\n    };\n\n    const checkForAutosaveAfterFailure = (): Promise<?FileMetadata> => {\n      if (!hasAutoSave || !onGetAutoSave) {\n        return Promise.resolve(null);\n      }\n\n      return hasAutoSave(fileMetadata, false).then(canOpenAutosave => {\n        if (!canOpenAutosave) return null;\n\n        const answer = Window.showConfirmDialog(\n          i18n._(\n            t`The project file appears to be malformed, but an autosave file exists (backup made automatically by GDevelop). Would you like to try to load it instead?`\n          )\n        );\n        if (!answer) return null;\n\n        return onGetAutoSave(fileMetadata);\n      });\n    };\n\n    this.setState({ loadingProject: true });\n\n    // Try to find an autosave (and ask user if found)\n    return checkForAutosave()\n      .then(fileMetadata => onOpen(fileMetadata))\n      .catch(err => {\n        // onOpen failed, tried to find again an autosave\n        return checkForAutosaveAfterFailure().then(fileMetadata => {\n          if (fileMetadata) {\n            return onOpen(fileMetadata);\n          }\n\n          throw err;\n        });\n      })\n      .then(({ content }) => {\n        if (!verifyProjectContent(i18n, content)) {\n          // The content is not recognized and the user was warned. Abort the opening.\n          return;\n        }\n\n        const serializedProject = gd.Serializer.fromJSObject(content);\n        return this.loadFromSerializedProject(\n          serializedProject,\n          // Note that fileMetadata is the original, unchanged one, even if we're loading\n          // an autosave. If we're for some reason loading an autosave, we still consider\n          // that we're opening the file that was originally requested by the user.\n          fileMetadata\n        ).then(\n          () => {\n            serializedProject.delete();\n          },\n          err => {\n            serializedProject.delete();\n            throw err;\n          }\n        );\n      })\n      .catch(error => {\n        const errorMessage = getOpenErrorMessage\n          ? getOpenErrorMessage(error)\n          : t`Check that the path/URL is correct, that you selected a file that is a game file created with GDevelop and that is was not removed.`;\n        showErrorBox(\n          [i18n._(t`Unable to open the project.`), i18n._(errorMessage)].join(\n            '\\n'\n          ),\n          error\n        );\n      })\n      .then(() => this.setState({ loadingProject: false }));\n  };\n\n  closeApp = (): void => {\n    return Window.quit();\n  };\n\n  closeProject = (): Promise<void> => {\n    const { currentProject } = this.state;\n    const { eventsFunctionsExtensionsState } = this.props;\n    if (!currentProject) return Promise.resolve();\n\n    return new Promise(resolve => {\n      this.openProjectManager(false);\n      this.setState(\n        {\n          editorTabs: closeProjectTabs(this.state.editorTabs, currentProject),\n        },\n        () => {\n          eventsFunctionsExtensionsState.unloadProjectEventsFunctionsExtensions(\n            currentProject\n          );\n          currentProject.delete();\n          this.setState(\n            {\n              currentProject: null,\n              isPreviewFirstSceneOverriden: false,\n              previewFirstSceneName: '',\n            },\n            () => {\n              this.updateToolbar();\n              resolve();\n            }\n          );\n        }\n      );\n    });\n  };\n\n  getSerializedElements = () => {\n    const editorTab = getCurrentTab(this.state.editorTabs);\n    if (!editorTab || !editorTab.editorRef) {\n      console.warn('No active editor or reference to the editor');\n      return {};\n    }\n\n    return editorTab.editorRef.getSerializedElements();\n  };\n\n  toggleProjectManager = () => {\n    if (!this.refs.toolbar)\n      this.setState({\n        projectManagerOpen: !this.state.projectManagerOpen,\n      });\n  };\n\n  openProjectManager = (open: boolean = true) => {\n    this.setState({\n      projectManagerOpen: open,\n    });\n  };\n\n  setEditorToolbar = (editorToolbar: any) => {\n    if (!this.toolbar) return;\n\n    this.toolbar.setEditorToolbar(editorToolbar);\n  };\n\n  _togglePreviewFirstSceneOverride = () => {\n    this.setState(\n      {\n        isPreviewFirstSceneOverriden: !this.state.isPreviewFirstSceneOverriden,\n      },\n      () => {\n        this.updateToolbar();\n      }\n    );\n  };\n\n  addLayout = () => {\n    const { currentProject } = this.state;\n    if (!currentProject) return;\n\n    const name = newNameGenerator('New scene', name =>\n      currentProject.hasLayoutNamed(name)\n    );\n    const newLayout = currentProject.insertNewLayout(\n      name,\n      currentProject.getLayoutsCount()\n    );\n    newLayout.updateBehaviorsSharedData(currentProject);\n\n    this._onProjectItemModified();\n  };\n\n  addExternalLayout = () => {\n    const { currentProject } = this.state;\n    if (!currentProject) return;\n\n    const name = newNameGenerator('NewExternalLayout', name =>\n      currentProject.hasExternalLayoutNamed(name)\n    );\n    currentProject.insertNewExternalLayout(\n      name,\n      currentProject.getExternalLayoutsCount()\n    );\n    this._onProjectItemModified();\n  };\n\n  addExternalEvents = () => {\n    const { currentProject } = this.state;\n    if (!currentProject) return;\n\n    const name = newNameGenerator('NewExternalEvents', name =>\n      currentProject.hasExternalEventsNamed(name)\n    );\n    currentProject.insertNewExternalEvents(\n      name,\n      currentProject.getExternalEventsCount()\n    );\n    this._onProjectItemModified();\n  };\n\n  addEventsFunctionsExtension = () => {\n    const { currentProject } = this.state;\n    if (!currentProject) return;\n\n    const name = newNameGenerator('NewExtension', name =>\n      currentProject.hasEventsFunctionsExtensionNamed(name)\n    );\n    currentProject.insertNewEventsFunctionsExtension(\n      name,\n      currentProject.getEventsFunctionsExtensionsCount()\n    );\n    this._onProjectItemModified();\n  };\n\n  deleteLayout = (layout: gdLayout) => {\n    const { currentProject } = this.state;\n    const { i18n } = this.props;\n    if (!currentProject) return;\n\n    const answer = Window.showConfirmDialog(\n      i18n._(\n        t`Are you sure you want to remove this scene? This can't be undone.`\n      )\n    );\n    if (!answer) return;\n\n    this.setState(\n      {\n        editorTabs: closeLayoutTabs(this.state.editorTabs, layout),\n      },\n      () => {\n        currentProject.removeLayout(layout.getName());\n        this._onProjectItemModified();\n      }\n    );\n  };\n\n  deleteExternalLayout = (externalLayout: gdExternalLayout) => {\n    const { currentProject } = this.state;\n    const { i18n } = this.props;\n    if (!currentProject) return;\n\n    const answer = Window.showConfirmDialog(\n      i18n._(\n        t`Are you sure you want to remove this external layout? This can't be undone.`\n      )\n    );\n    if (!answer) return;\n\n    this.setState(\n      {\n        editorTabs: closeExternalLayoutTabs(\n          this.state.editorTabs,\n          externalLayout\n        ),\n      },\n      () => {\n        currentProject.removeExternalLayout(externalLayout.getName());\n        this._onProjectItemModified();\n      }\n    );\n  };\n\n  deleteExternalEvents = (externalEvents: gdExternalEvents) => {\n    const { currentProject } = this.state;\n    const { i18n } = this.props;\n    if (!currentProject) return;\n\n    const answer = Window.showConfirmDialog(\n      i18n._(\n        t`Are you sure you want to remove these external events? This can't be undone.`\n      )\n    );\n    if (!answer) return;\n\n    this.setState(\n      {\n        editorTabs: closeExternalEventsTabs(\n          this.state.editorTabs,\n          externalEvents\n        ),\n      },\n      () => {\n        currentProject.removeExternalEvents(externalEvents.getName());\n        this._onProjectItemModified();\n      }\n    );\n  };\n\n  deleteEventsFunctionsExtension = (\n    externalLayout: gdEventsFunctionsExtension\n  ) => {\n    const { currentProject } = this.state;\n    const { i18n, eventsFunctionsExtensionsState } = this.props;\n    if (!currentProject) return;\n\n    const answer = Window.showConfirmDialog(\n      i18n._(\n        t`Are you sure you want to remove this extension? This can't be undone.`\n      )\n    );\n    if (!answer) return;\n\n    this.setState(\n      {\n        editorTabs: closeEventsFunctionsExtensionTabs(\n          this.state.editorTabs,\n          externalLayout\n        ),\n      },\n      () => {\n        currentProject.removeEventsFunctionsExtension(externalLayout.getName());\n        this._onProjectItemModified();\n      }\n    );\n\n    // Reload extensions to make sure the deleted extension is removed\n    // from the platform\n    eventsFunctionsExtensionsState.reloadProjectEventsFunctionsExtensions(\n      currentProject\n    );\n  };\n\n  renameLayout = (oldName: string, newName: string) => {\n    const { currentProject } = this.state;\n    const { i18n } = this.props;\n    if (!currentProject) return;\n\n    if (!currentProject.hasLayoutNamed(oldName) || newName === oldName) return;\n\n    if (newName === '') {\n      showWarningBox(\n        i18n._(t`This name cannot be empty, please enter a new name.`)\n      );\n      return;\n    }\n\n    if (currentProject.hasLayoutNamed(newName)) {\n      showWarningBox(i18n._(t`Another scene with this name already exists.`));\n      return;\n    }\n\n    const layout = currentProject.getLayout(oldName);\n    this.setState(\n      {\n        editorTabs: closeLayoutTabs(this.state.editorTabs, layout),\n      },\n      () => {\n        layout.setName(newName);\n        this._onProjectItemModified();\n      }\n    );\n  };\n\n  renameExternalLayout = (oldName: string, newName: string) => {\n    const { currentProject } = this.state;\n    const { i18n } = this.props;\n    if (!currentProject) return;\n\n    if (!currentProject.hasExternalLayoutNamed(oldName) || newName === oldName)\n      return;\n\n    if (newName === '') {\n      showWarningBox(\n        i18n._(t`This name cannot be empty, please enter a new name.`)\n      );\n      return;\n    }\n\n    if (currentProject.hasExternalLayoutNamed(newName)) {\n      showWarningBox(\n        i18n._(t`Another external layout with this name already exists.`)\n      );\n      return;\n    }\n\n    const externalLayout = currentProject.getExternalLayout(oldName);\n    this.setState(\n      {\n        editorTabs: closeExternalLayoutTabs(\n          this.state.editorTabs,\n          externalLayout\n        ),\n      },\n      () => {\n        externalLayout.setName(newName);\n        this._onProjectItemModified();\n      }\n    );\n  };\n\n  renameExternalEvents = (oldName: string, newName: string) => {\n    const { currentProject } = this.state;\n    const { i18n } = this.props;\n    if (!currentProject) return;\n\n    if (!currentProject.hasExternalEventsNamed(oldName) || newName === oldName)\n      return;\n\n    if (newName === '') {\n      showWarningBox(\n        i18n._(t`This name cannot be empty, please enter a new name.`)\n      );\n      return;\n    }\n\n    if (currentProject.hasExternalEventsNamed(newName)) {\n      showWarningBox(\n        i18n._(t`Other external events with this name already exist.`)\n      );\n      return;\n    }\n\n    const externalEvents = currentProject.getExternalEvents(oldName);\n    this.setState(\n      {\n        editorTabs: closeExternalEventsTabs(\n          this.state.editorTabs,\n          externalEvents\n        ),\n      },\n      () => {\n        externalEvents.setName(newName);\n        this._onProjectItemModified();\n      }\n    );\n  };\n\n  renameEventsFunctionsExtension = (oldName: string, newName: string) => {\n    const { currentProject } = this.state;\n    const { i18n } = this.props;\n    const { eventsFunctionsExtensionsState } = this.props;\n    if (!currentProject) return;\n\n    if (\n      !currentProject.hasEventsFunctionsExtensionNamed(oldName) ||\n      newName === oldName\n    )\n      return;\n\n    if (newName === '') {\n      showWarningBox(\n        i18n._(t`This name cannot be empty, please enter a new name.`)\n      );\n      return;\n    }\n\n    if (currentProject.hasEventsFunctionsExtensionNamed(newName)) {\n      showWarningBox(\n        i18n._(t`Another extension with this name already exists.`)\n      );\n      return;\n    }\n\n    if (!gd.Project.validateName(newName)) {\n      showWarningBox(\n        i18n._(\n          t`This name is invalid. Only use alphanumeric characters (0-9, a-z) and underscores. Digits are not allowed as the first character.`\n        )\n      );\n      return;\n    }\n\n    const eventsFunctionsExtension = currentProject.getEventsFunctionsExtension(\n      oldName\n    );\n    this.setState(\n      {\n        editorTabs: closeEventsFunctionsExtensionTabs(\n          this.state.editorTabs,\n          eventsFunctionsExtension\n        ),\n      },\n      () => {\n        // Refactor the project to update the instructions (and later expressions)\n        // of this extension:\n        gd.WholeProjectRefactorer.renameEventsFunctionsExtension(\n          currentProject,\n          eventsFunctionsExtension,\n          oldName,\n          newName\n        );\n        eventsFunctionsExtension.setName(newName);\n        eventsFunctionsExtensionsState.reloadProjectEventsFunctionsExtensions(\n          currentProject\n        );\n        this._onProjectItemModified();\n      }\n    );\n  };\n\n  _launchLayoutPreview = (\n    project: gdProject,\n    layout: gdLayout,\n    options: PreviewOptions\n  ) => {\n    const { _previewLauncher } = this;\n    const { previewFirstSceneName, isPreviewFirstSceneOverriden } = this.state;\n\n    if (!_previewLauncher) return;\n\n    this.setState(\n      {\n        previewLoading: true,\n      },\n      () => {\n        let previewedLayout = layout;\n        if (previewFirstSceneName && isPreviewFirstSceneOverriden) {\n          if (project.hasLayoutNamed(previewFirstSceneName)) {\n            previewedLayout = project.getLayout(previewFirstSceneName);\n          }\n        }\n\n        _previewLauncher\n          .launchLayoutPreview(project, previewedLayout, options)\n          .catch(error => {\n            console.error(\n              'Error caught while launching preview, this should never happen.',\n              error\n            );\n          })\n          .then(() => {\n            this.setState({\n              previewLoading: false,\n            });\n          });\n      }\n    );\n  };\n\n  _launchExternalLayoutPreview = (\n    project: gdProject,\n    layout: gdLayout,\n    externalLayout: gdExternalLayout,\n    options: PreviewOptions\n  ) => {\n    const { _previewLauncher } = this;\n    if (!_previewLauncher) return;\n\n    this.setState(\n      {\n        previewLoading: true,\n      },\n      () => {\n        _previewLauncher\n          .launchExternalLayoutPreview(project, layout, externalLayout, options)\n          .catch(error => {\n            console.error(\n              'Error caught while launching preview, this should never happen.',\n              error\n            );\n          })\n          .then(() => {\n            this.setState({\n              previewLoading: false,\n            });\n          });\n      }\n    );\n  };\n\n  openLayout = (\n    name: string,\n    {\n      openEventsEditor = true,\n      openSceneEditor = true,\n    }: { openEventsEditor: boolean, openSceneEditor: boolean } = {}\n  ) => {\n    const { i18n, storageProviderOperations } = this.props;\n    const sceneEditorOptions = {\n      label: name,\n      renderEditor: ({ isActive, editorRef }) => (\n        <PreferencesContext.Consumer>\n          {({ values }) => (\n            <SceneEditor\n              previewButtonSettings={{\n                isPreviewFirstSceneOverriden: this.state\n                  .isPreviewFirstSceneOverriden,\n                togglePreviewFirstSceneOverride: () =>\n                  this._togglePreviewFirstSceneOverride(),\n                previewFirstSceneName: this.state.previewFirstSceneName,\n                useSceneAsPreviewFirstScene: () => {\n                  this._setPreviewFirstScene(name);\n                },\n              }}\n              project={this.state.currentProject}\n              layoutName={name}\n              setToolbar={this.setEditorToolbar}\n              onPreview={(project, layout, options) => {\n                this._launchLayoutPreview(project, layout, options);\n                const { currentFileMetadata } = this.state;\n                if (\n                  values.autosaveOnPreview &&\n                  storageProviderOperations.onAutoSaveProject &&\n                  currentFileMetadata\n                ) {\n                  storageProviderOperations.onAutoSaveProject(\n                    project,\n                    currentFileMetadata\n                  );\n                }\n              }}\n              showPreviewButton={!!this.props.renderPreviewLauncher}\n              showNetworkPreviewButton={\n                this._previewLauncher &&\n                this._previewLauncher.canDoNetworkPreview()\n              }\n              onOpenDebugger={this.openDebugger}\n              onEditObject={this.props.onEditObject}\n              resourceSources={this.props.resourceSources}\n              onChooseResource={this._onChooseResource}\n              resourceExternalEditors={this.props.resourceExternalEditors}\n              isActive={isActive}\n              ref={editorRef}\n              unsavedChanges={this.props.unsavedChanges}\n            />\n          )}\n        </PreferencesContext.Consumer>\n      ),\n      key: 'layout ' + name,\n    };\n    const eventsEditorOptions = {\n      label: name + ' ' + i18n._(t`(Events)`),\n      renderEditor: ({ isActive, editorRef }) => (\n        <PreferencesContext.Consumer>\n          {({ values }) => (\n            <EventsEditor\n              project={this.state.currentProject}\n              layoutName={name}\n              setToolbar={this.setEditorToolbar}\n              previewButtonSettings={{\n                isPreviewFirstSceneOverriden: this.state\n                  .isPreviewFirstSceneOverriden,\n                togglePreviewFirstSceneOverride: () =>\n                  this._togglePreviewFirstSceneOverride(),\n                previewFirstSceneName: this.state.previewFirstSceneName,\n                useSceneAsPreviewFirstScene: () => {\n                  this._setPreviewFirstScene(name);\n                },\n              }}\n              onPreview={(project, layout, options) => {\n                this._launchLayoutPreview(project, layout, options);\n                const { currentFileMetadata } = this.state;\n                if (\n                  values.autosaveOnPreview &&\n                  storageProviderOperations.onAutoSaveProject &&\n                  currentFileMetadata\n                ) {\n                  storageProviderOperations.onAutoSaveProject(\n                    project,\n                    currentFileMetadata\n                  );\n                }\n              }}\n              showPreviewButton={!!this.props.renderPreviewLauncher}\n              showNetworkPreviewButton={\n                this._previewLauncher &&\n                this._previewLauncher.canDoNetworkPreview()\n              }\n              onOpenDebugger={this.openDebugger}\n              onOpenExternalEvents={this.openExternalEvents}\n              onOpenLayout={name =>\n                this.openLayout(name, {\n                  openEventsEditor: true,\n                  openSceneEditor: false,\n                })\n              }\n              resourceSources={this.props.resourceSources}\n              onChooseResource={this._onChooseResource}\n              resourceExternalEditors={this.props.resourceExternalEditors}\n              openInstructionOrExpression={this._openInstructionOrExpression}\n              onCreateEventsFunction={this._onCreateEventsFunction}\n              isActive={isActive}\n              ref={editorRef}\n              unsavedChanges={this.props.unsavedChanges}\n            />\n          )}\n        </PreferencesContext.Consumer>\n      ),\n      key: 'layout events ' + name,\n      dontFocusTab: openSceneEditor,\n    };\n\n    const tabsWithSceneEditor = openSceneEditor\n      ? openEditorTab(this.state.editorTabs, sceneEditorOptions)\n      : this.state.editorTabs;\n    const tabsWithSceneAndEventsEditors = openEventsEditor\n      ? openEditorTab(tabsWithSceneEditor, eventsEditorOptions)\n      : tabsWithSceneEditor;\n\n    this.setState({ editorTabs: tabsWithSceneAndEventsEditors }, () =>\n      this.updateToolbar()\n    );\n    this.openProjectManager(false);\n  };\n\n  openExternalEvents = (name: string) => {\n    this.setState(\n      {\n        editorTabs: openEditorTab(this.state.editorTabs, {\n          label: name,\n          renderEditor: ({ isActive, editorRef }) => (\n            <ExternalEventsEditor\n              project={this.state.currentProject}\n              externalEventsName={name}\n              setToolbar={this.setEditorToolbar}\n              onOpenExternalEvents={this.openExternalEvents}\n              onOpenLayout={name =>\n                this.openLayout(name, {\n                  openEventsEditor: true,\n                  openSceneEditor: false,\n                })\n              }\n              resourceSources={this.props.resourceSources}\n              onChooseResource={this._onChooseResource}\n              resourceExternalEditors={this.props.resourceExternalEditors}\n              openInstructionOrExpression={this._openInstructionOrExpression}\n              onCreateEventsFunction={this._onCreateEventsFunction}\n              previewButtonSettings={emptyPreviewButtonSettings}\n              isActive={isActive}\n              ref={editorRef}\n              unsavedChanges={this.props.unsavedChanges}\n            />\n          ),\n          key: 'external events ' + name,\n        }),\n      },\n      () => this.updateToolbar()\n    );\n    this.openProjectManager(false);\n  };\n\n  openExternalLayout = (name: string) => {\n    const { storageProviderOperations } = this.props;\n    this.setState(\n      {\n        editorTabs: openEditorTab(this.state.editorTabs, {\n          label: name,\n          renderEditor: ({ isActive, editorRef }) => (\n            <PreferencesContext.Consumer>\n              {({ values }) => (\n                <ExternalLayoutEditor\n                  project={this.state.currentProject}\n                  externalLayoutName={name}\n                  setToolbar={this.setEditorToolbar}\n                  onPreview={(project, layout, externalLayout, options) => {\n                    this._launchExternalLayoutPreview(\n                      project,\n                      layout,\n                      externalLayout,\n                      options\n                    );\n                    const { currentFileMetadata } = this.state;\n                    if (\n                      values.autosaveOnPreview &&\n                      storageProviderOperations.onAutoSaveProject &&\n                      currentFileMetadata\n                    ) {\n                      storageProviderOperations.onAutoSaveProject(\n                        project,\n                        currentFileMetadata\n                      );\n                    }\n                  }}\n                  showPreviewButton={!!this.props.renderPreviewLauncher}\n                  showNetworkPreviewButton={\n                    this._previewLauncher &&\n                    this._previewLauncher.canDoNetworkPreview()\n                  }\n                  previewButtonSettings={emptyPreviewButtonSettings}\n                  onOpenDebugger={this.openDebugger}\n                  onEditObject={this.props.onEditObject}\n                  resourceSources={this.props.resourceSources}\n                  onChooseResource={this._onChooseResource}\n                  resourceExternalEditors={this.props.resourceExternalEditors}\n                  isActive={isActive}\n                  ref={editorRef}\n                />\n              )}\n            </PreferencesContext.Consumer>\n          ),\n          key: 'external layout ' + name,\n        }),\n      },\n      () => this.updateToolbar()\n    );\n    this.openProjectManager(false);\n  };\n\n  openEventsFunctionsExtension = (\n    name: string,\n    initiallyFocusedFunctionName?: string,\n    initiallyFocusedBehaviorName?: ?string\n  ) => {\n    const { i18n, eventsFunctionsExtensionsState } = this.props;\n    this.setState(\n      {\n        editorTabs: openEditorTab(this.state.editorTabs, {\n          label: name + ' ' + i18n._(t`(Extension)`),\n          renderEditor: ({ isActive, editorRef }) => (\n            <EventsFunctionsExtensionEditor\n              project={this.state.currentProject}\n              eventsFunctionsExtensionName={name}\n              setToolbar={this.setEditorToolbar}\n              resourceSources={this.props.resourceSources}\n              onChooseResource={this._onChooseResource}\n              resourceExternalEditors={this.props.resourceExternalEditors}\n              isActive={isActive}\n              initiallyFocusedFunctionName={initiallyFocusedFunctionName}\n              initiallyFocusedBehaviorName={initiallyFocusedBehaviorName}\n              openInstructionOrExpression={this._openInstructionOrExpression}\n              onCreateEventsFunction={this._onCreateEventsFunction}\n              ref={editorRef}\n              onLoadEventsFunctionsExtensions={() => {\n                eventsFunctionsExtensionsState.loadProjectEventsFunctionsExtensions(\n                  this.state.currentProject\n                );\n              }}\n              unsavedChanges={this.props.unsavedChanges}\n            />\n          ),\n          key: 'events functions extension ' + name,\n        }),\n      },\n      () => this.updateToolbar()\n    );\n    this.openProjectManager(false);\n  };\n\n  openResources = () => {\n    const { i18n } = this.props;\n    this.setState(\n      {\n        editorTabs: openEditorTab(this.state.editorTabs, {\n          label: i18n._(t`Resources`),\n          renderEditor: ({ isActive, editorRef }) => (\n            <ResourcesEditor\n              project={this.state.currentProject}\n              setToolbar={this.setEditorToolbar}\n              onDeleteResource={(resource: gdResource, cb: boolean => void) => {\n                // TODO: Project wide refactoring of objects/events using the resource\n                cb(true);\n              }}\n              onRenameResource={(\n                resource: gdResource,\n                newName: string,\n                cb: boolean => void\n              ) => {\n                // TODO: Project wide refactoring of objects/events using the resource\n                cb(true);\n              }}\n              isActive={isActive}\n              ref={editorRef}\n              onChooseResource={this._onChooseResource}\n              resourceSources={this.props.resourceSources}\n            />\n          ),\n          key: 'resources',\n        }),\n      },\n      () => this.updateToolbar()\n    );\n  };\n\n  openStartPage = () => {\n    const { i18n, storageProviders } = this.props;\n    this.setState(\n      {\n        editorTabs: openEditorTab(this.state.editorTabs, {\n          label: i18n._(t`Start Page`),\n          renderEditor: ({ isActive, editorRef }) => (\n            <StartPage\n              project={this.state.currentProject}\n              setToolbar={this.setEditorToolbar}\n              canOpen={\n                !!storageProviders.filter(\n                  ({ hiddenInOpenDialog }) => !hiddenInOpenDialog\n                ).length\n              }\n              onOpen={this.chooseProject}\n              onCreate={() => this.openCreateDialog()}\n              onOpenProjectManager={() => this.openProjectManager()}\n              onCloseProject={() => {\n                this.askToCloseProject();\n              }}\n              onOpenAboutDialog={() => this.openAboutDialog()}\n              onOpenHelpFinder={() => this.openHelpFinderDialog()}\n              onOpenLanguageDialog={() => this.openLanguage()}\n              isActive={isActive}\n              ref={editorRef}\n            />\n          ),\n          key: 'start page',\n          closable: false,\n        }),\n      },\n      () => this.updateToolbar()\n    );\n  };\n\n  openDebugger = () => {\n    const { i18n } = this.props;\n    this.setState(\n      {\n        editorTabs: openEditorTab(this.state.editorTabs, {\n          label: i18n._(t`Debugger`),\n          renderEditor: ({ isActive, editorRef }) => (\n            <DebuggerEditor\n              project={this.state.currentProject}\n              setToolbar={this.setEditorToolbar}\n              isActive={isActive}\n              ref={editorRef}\n              onChangeSubscription={() => this.openSubscription(true)}\n            />\n          ),\n          key: 'debugger',\n        }),\n      },\n      () => this.updateToolbar()\n    );\n  };\n\n  _openInstructionOrExpression = (\n    extension: gdPlatformExtension,\n    type: string\n  ) => {\n    const { currentProject } = this.state;\n    if (!currentProject) return;\n\n    const extensionName = extension.getName();\n    if (currentProject.hasEventsFunctionsExtensionNamed(extensionName)) {\n      // It's an events functions extension, open the editor for it.\n      const eventsFunctionsExtension = currentProject.getEventsFunctionsExtension(\n        extensionName\n      );\n      const functionName = getFunctionNameFromType(type);\n\n      const foundTab = getEventsFunctionsExtensionEditor(\n        this.state.editorTabs,\n        eventsFunctionsExtension\n      );\n      if (foundTab) {\n        // Open the given function and focus the tab\n        foundTab.editor.selectEventsFunctionByName(\n          functionName.name,\n          functionName.behaviorName\n        );\n        this.setState(state => ({\n          editorTabs: changeCurrentTab(state.editorTabs, foundTab.tabIndex),\n        }));\n      } else {\n        // Open a new editor for the extension and the given function\n        this.openEventsFunctionsExtension(\n          extensionName,\n          functionName.name,\n          functionName.behaviorName\n        );\n      }\n    } else {\n      // It's not an events functions extension, we should not be here.\n      console.warn(\n        `Extension with name=${extensionName} can not be opened (no editor for this)`\n      );\n    }\n  };\n\n  _onProjectItemModified = () => {\n    if (this.props.unsavedChanges)\n      this.props.unsavedChanges.triggerUnsavedChanges();\n    this.forceUpdate();\n  };\n\n  _onCreateEventsFunction = (\n    extensionName: string,\n    eventsFunction: gdEventsFunction\n  ) => {\n    const { currentProject } = this.state;\n    if (!currentProject) return;\n    const { eventsFunctionsExtensionsState } = this.props;\n\n    // Names are assumed to be already validated\n    const createNewExtension = !currentProject.hasEventsFunctionsExtensionNamed(\n      extensionName\n    );\n    const extension = createNewExtension\n      ? currentProject.insertNewEventsFunctionsExtension(extensionName, 0)\n      : currentProject.getEventsFunctionsExtension(extensionName);\n\n    if (createNewExtension) {\n      extension.setFullName(extensionName);\n      extension.setDescription(\n        'Originally automatically extracted from events of the project'\n      );\n    }\n\n    extension.insertEventsFunction(eventsFunction, 0);\n    eventsFunctionsExtensionsState.loadProjectEventsFunctionsExtensions(\n      currentProject\n    );\n  };\n\n  openCreateDialog = (open: boolean = true) => {\n    this.setState({\n      createDialogOpen: open,\n    });\n  };\n\n  chooseProject = () => {\n    const { storageProviders } = this.props;\n\n    if (\n      storageProviders.filter(({ hiddenInOpenDialog }) => !hiddenInOpenDialog)\n        .length > 1\n    ) {\n      this.openOpenFromStorageProviderDialog();\n    } else {\n      this.chooseProjectWithStorageProviderPicker();\n    }\n  };\n\n  chooseProjectWithStorageProviderPicker = () => {\n    const { storageProviderOperations, i18n } = this.props;\n    if (!storageProviderOperations.onOpenWithPicker) return;\n\n    storageProviderOperations\n      .onOpenWithPicker()\n      .then(fileMetadata => {\n        if (!fileMetadata) return;\n\n        return this.openFromFileMetadata(fileMetadata).then(() =>\n          this.openSceneOrProjectManager()\n        );\n      })\n      .catch(error => {\n        const errorMessage = storageProviderOperations.getOpenErrorMessage\n          ? storageProviderOperations.getOpenErrorMessage(error)\n          : t`Verify that you have the authorizations for reading the file you're trying to access.`;\n        showErrorBox(\n          [i18n._(t`Unable to open the project.`), i18n._(errorMessage)].join(\n            '\\n'\n          ),\n          error\n        );\n      });\n  };\n\n  saveProject = () => {\n    const { currentProject, currentFileMetadata } = this.state;\n    if (!currentProject) return;\n    if (!currentFileMetadata) {\n      return this.saveProjectAs();\n    }\n\n    const { i18n, storageProviderOperations } = this.props;\n    const { onSaveProject } = storageProviderOperations;\n    if (!onSaveProject) {\n      return this.saveProjectAs();\n    }\n\n    saveUiSettings(this.state.editorTabs);\n    this._showSnackMessage(i18n._(t`Saving...`));\n\n    onSaveProject(currentProject, currentFileMetadata).then(\n      ({ wasSaved }) => {\n        if (wasSaved) {\n          if (this.props.unsavedChanges)\n            this.props.unsavedChanges.sealUnsavedChanges();\n          this._showSnackMessage(i18n._(t`Project properly saved`));\n        }\n      },\n      err => {\n        showErrorBox(\n          i18n._(\n            t`Unable to save the project! Please try again by choosing another location.`\n          ),\n          err\n        );\n      }\n    );\n  };\n\n  saveProjectAs = () => {\n    const { currentProject } = this.state;\n    const { storageProviders, storageProviderOperations } = this.props;\n    if (!currentProject) return;\n\n    if (\n      storageProviders.filter(({ hiddenInSaveDialog }) => !hiddenInSaveDialog)\n        .length > 1 ||\n      !storageProviderOperations.onSaveProjectAs\n    ) {\n      this.openSaveToStorageProviderDialog();\n    } else {\n      this.saveProjectAsWithStorageProvider();\n    }\n  };\n\n  saveProjectAsWithStorageProvider = () => {\n    const { currentProject, currentFileMetadata } = this.state;\n    if (!currentProject) return;\n\n    saveUiSettings(this.state.editorTabs);\n    const { i18n, storageProviderOperations } = this.props;\n\n    if (!storageProviderOperations.onSaveProjectAs) {\n      return;\n    }\n\n    storageProviderOperations\n      .onSaveProjectAs(currentProject, currentFileMetadata)\n      .then(\n        ({ wasSaved, fileMetadata }) => {\n          if (wasSaved) {\n            if (this.props.unsavedChanges)\n              this.props.unsavedChanges.sealUnsavedChanges();\n            this._showSnackMessage(i18n._(t`Project properly saved`));\n\n            if (fileMetadata) {\n              this.setState({\n                currentFileMetadata: fileMetadata,\n              });\n            }\n          }\n        },\n        err => {\n          showErrorBox(\n            i18n._(\n              t`Unable to save as the project! Please try again by choosing another location.`\n            ),\n            err\n          );\n        }\n      );\n  };\n\n  askToCloseProject = (): Promise<void> => {\n    if (\n      this.props.unsavedChanges &&\n      this.props.unsavedChanges.hasUnsavedChanges\n    ) {\n      if (!this.state.currentProject) return Promise.resolve();\n      const { i18n } = this.props;\n\n      const answer = Window.showConfirmDialog(\n        i18n._(\n          t`Close the project? Any changes that have not been saved will be lost.`\n        )\n      );\n      if (!answer) return Promise.resolve();\n    }\n    return this.closeProject();\n  };\n\n  openSceneOrProjectManager = () => {\n    const { currentProject } = this.state;\n    if (!currentProject) return;\n\n    if (currentProject.getLayoutsCount() === 1) {\n      this.openLayout(currentProject.getLayoutAt(0).getName(), {\n        openSceneEditor: true,\n        openEventsEditor: true,\n      });\n    } else {\n      this.openProjectManager();\n    }\n  };\n\n  openExportDialog = (open: boolean = true) => {\n    this.setState({\n      exportDialogOpen: open,\n    });\n  };\n\n  _openIntroDialog = (open: boolean = true) => {\n    this.setState({\n      introDialogOpen: open,\n    });\n  };\n\n  _openOpenConfirmDialog = (open: boolean = true) => {\n    this.setState({\n      openConfirmDialogOpen: open,\n    });\n  };\n\n  _openGenericDialog = (open: boolean = true) => {\n    this.setState({\n      genericDialogOpen: open,\n      genericDialog: null,\n    });\n  };\n\n  openPreferences = (open: boolean = true) => {\n    this.setState({\n      preferencesDialogOpen: open,\n    });\n  };\n\n  openLanguage = (open: boolean = true) => {\n    this.setState({\n      languageDialogOpen: open,\n    });\n  };\n\n  openProfile = (open: boolean = true) => {\n    this.setState({\n      profileDialogOpen: open,\n    });\n  };\n\n  openSubscription = (open: boolean = true) => {\n    this.setState({\n      subscriptionDialogOpen: open,\n    });\n  };\n\n  _setPreviewFirstScene = (name: string) => {\n    this.setState(\n      {\n        previewFirstSceneName: name,\n        isPreviewFirstSceneOverriden: true,\n      },\n      () => {\n        this.updateToolbar();\n      }\n    );\n  };\n\n  _onChangeEditorTab = (value: number) => {\n    this.setState(\n      {\n        editorTabs: changeCurrentTab(this.state.editorTabs, value),\n      },\n      () => this._onEditorTabActive(getCurrentTab(this.state.editorTabs))\n    );\n  };\n\n  _onEditorTabActive = (editorTab: EditorTab) => {\n    this.updateToolbar();\n    // Ensure the editors shown on the screen are updated. This is for\n    // example useful if global objects have been updated in another editor.\n    if (editorTab.editorRef) {\n      editorTab.editorRef.forceUpdateEditor();\n    }\n  };\n\n  _onCloseEditorTab = (editorTab: EditorTab) => {\n    saveUiSettings(this.state.editorTabs);\n    this.setState(\n      {\n        editorTabs: closeEditorTab(this.state.editorTabs, editorTab),\n      },\n      () => this.updateToolbar()\n    );\n  };\n\n  _onCloseOtherEditorTabs = (editorTab: EditorTab) => {\n    saveUiSettings(this.state.editorTabs);\n    this.setState(\n      {\n        editorTabs: closeOtherEditorTabs(this.state.editorTabs, editorTab),\n      },\n      () => this.updateToolbar()\n    );\n  };\n\n  _onCloseAllEditorTabs = () => {\n    saveUiSettings(this.state.editorTabs);\n    this.setState(\n      {\n        editorTabs: closeAllEditorTabs(this.state.editorTabs),\n      },\n      () => this.updateToolbar()\n    );\n  };\n\n  _onChooseResource = (\n    sourceName: string,\n    multiSelection: boolean = true\n  ): Promise<Array<any>> => {\n    const { currentProject } = this.state;\n    const resourceSourceDialog = this._resourceSourceDialogs[sourceName];\n    if (!resourceSourceDialog) return Promise.resolve([]);\n\n    return resourceSourceDialog.chooseResources(currentProject, multiSelection);\n  };\n\n  updateToolbar() {\n    const editorTab = getCurrentTab(this.state.editorTabs);\n    if (!editorTab || !editorTab.editorRef) {\n      this.setEditorToolbar(null);\n      return;\n    }\n\n    editorTab.editorRef.updateToolbar();\n  }\n\n  openAboutDialog = (open: boolean = true) => {\n    this.setState({\n      aboutDialogOpen: open,\n    });\n  };\n\n  openOpenFromStorageProviderDialog = (open: boolean = true) => {\n    this.setState({\n      openFromStorageProviderDialogOpen: open,\n    });\n  };\n\n  openSaveToStorageProviderDialog = (open: boolean = true) => {\n    if (open) {\n      // Ensure the project manager is closed as Google Drive storage provider\n      // display a picker that does not play nice with material-ui's overlays.\n      this.openProjectManager(false);\n    }\n    this.setState({\n      saveToStorageProviderDialogOpen: open,\n    });\n  };\n\n  openPlatformSpecificAssets = (open: boolean = true) => {\n    this.setState({\n      platformSpecificAssetsDialogOpen: open,\n    });\n  };\n\n  openHelpFinderDialog = (open: boolean = true) => {\n    this.setState({\n      helpFinderDialogOpen: open,\n    });\n  };\n\n  setUpdateStatus = (updateStatus: UpdateStatus) => {\n    this.setState({\n      updateStatus,\n    });\n\n    const notificationTitle = getUpdateNotificationTitle(updateStatus);\n    const notificationBody = getUpdateNotificationBody(updateStatus);\n    if (notificationTitle) {\n      const notification = new window.Notification(notificationTitle, {\n        body: notificationBody,\n      });\n      notification.onclick = () => this.openAboutDialog(true);\n    }\n  };\n\n  simulateUpdateDownloaded = () =>\n    this.setUpdateStatus({\n      status: 'update-downloaded',\n      message: 'update-downloaded',\n      info: {\n        releaseName: 'Fake update',\n      },\n    });\n\n  simulateUpdateAvailable = () =>\n    this.setUpdateStatus({\n      status: 'update-available',\n      message: 'Update available',\n    });\n\n  _showSnackMessage = (snackMessage: string) =>\n    this.setState({\n      snackMessage,\n      snackMessageOpen: true,\n    });\n\n  _closeSnackMessage = () =>\n    this.setState({\n      snackMessageOpen: false,\n    });\n\n  render() {\n    const {\n      currentProject,\n      currentFileMetadata,\n      genericDialog,\n      projectManagerOpen,\n      profileDialogOpen,\n      subscriptionDialogOpen,\n      updateStatus,\n      aboutDialogOpen,\n      helpFinderDialogOpen,\n      eventsFunctionsExtensionsError,\n    } = this.state;\n    const {\n      renderExportDialog,\n      renderCreateDialog,\n      introDialog,\n      resourceSources,\n      renderPreviewLauncher,\n      resourceExternalEditors,\n      eventsFunctionsExtensionsState,\n      useStorageProvider,\n      i18n,\n      renderGDJSDevelopmentWatcher,\n      renderMainMenu,\n    } = this.props;\n    const showLoader =\n      this.state.loadingProject ||\n      this.state.previewLoading ||\n      this.props.loading;\n\n    return (\n      <div className=\"main-frame\">\n        {!!renderMainMenu &&\n          renderMainMenu({\n            i18n: i18n,\n            project: this.state.currentProject,\n            onChooseProject: this.chooseProject,\n            onSaveProject: this.saveProject,\n            onSaveProjectAs: this.saveProjectAs,\n            onCloseProject: this.askToCloseProject,\n            onCloseApp: this.closeApp,\n            onExportProject: this.openExportDialog,\n            onCreateProject: this.openCreateDialog,\n            onOpenProjectManager: this.openProjectManager,\n            onOpenStartPage: this.openStartPage,\n            onOpenDebugger: this.openDebugger,\n            onOpenAbout: this.openAboutDialog,\n            onOpenPreferences: this.openPreferences,\n            onOpenLanguage: this.openLanguage,\n            onOpenProfile: this.openProfile,\n            setUpdateStatus: this.setUpdateStatus,\n          })}\n        <ProjectTitlebar fileMetadata={currentFileMetadata} />\n        <Drawer\n          open={projectManagerOpen}\n          PaperProps={{\n            style: styles.drawerContent,\n          }}\n          onClose={this.toggleProjectManager}\n        >\n          <EditorBar\n            title={currentProject ? currentProject.getName() : 'No project'}\n            displayRightCloseButton\n            onClose={this.toggleProjectManager}\n          />\n          {currentProject && (\n            <ProjectManager\n              project={currentProject}\n              onOpenExternalEvents={this.openExternalEvents}\n              onOpenLayout={this.openLayout}\n              onOpenExternalLayout={this.openExternalLayout}\n              onOpenEventsFunctionsExtension={this.openEventsFunctionsExtension}\n              onAddLayout={this.addLayout}\n              onAddExternalLayout={this.addExternalLayout}\n              onAddEventsFunctionsExtension={this.addEventsFunctionsExtension}\n              onAddExternalEvents={this.addExternalEvents}\n              onDeleteLayout={this.deleteLayout}\n              onDeleteExternalLayout={this.deleteExternalLayout}\n              onDeleteEventsFunctionsExtension={\n                this.deleteEventsFunctionsExtension\n              }\n              onDeleteExternalEvents={this.deleteExternalEvents}\n              onRenameLayout={this.renameLayout}\n              onRenameExternalLayout={this.renameExternalLayout}\n              onRenameEventsFunctionsExtension={\n                this.renameEventsFunctionsExtension\n              }\n              onRenameExternalEvents={this.renameExternalEvents}\n              onSaveProject={this.saveProject}\n              onSaveProjectAs={this.saveProjectAs}\n              onCloseProject={() => {\n                this.askToCloseProject();\n              }}\n              onExportProject={this.openExportDialog}\n              onOpenPreferences={() => this.openPreferences(true)}\n              onOpenProfile={() => this.openProfile(true)}\n              onOpenResources={() => {\n                this.openResources();\n                this.openProjectManager(false);\n              }}\n              onOpenPlatformSpecificAssets={() =>\n                this.openPlatformSpecificAssets()\n              }\n              onChangeSubscription={() => this.openSubscription(true)}\n              eventsFunctionsExtensionsError={eventsFunctionsExtensionsError}\n              onReloadEventsFunctionsExtensions={() => {\n                // Check if load is sufficient\n                eventsFunctionsExtensionsState.reloadProjectEventsFunctionsExtensions(\n                  currentProject\n                );\n              }}\n              freezeUpdate={!projectManagerOpen}\n              unsavedChanges={this.props.unsavedChanges}\n            />\n          )}\n          {!currentProject && (\n            <EmptyMessage>\n              <Trans>To begin, open or create a new project.</Trans>\n            </EmptyMessage>\n          )}\n        </Drawer>\n        <Toolbar\n          ref={toolbar => (this.toolbar = toolbar)}\n          showProjectIcons={!this.props.integratedEditor}\n          hasProject={!!this.state.currentProject}\n          toggleProjectManager={this.toggleProjectManager}\n          exportProject={() => this.openExportDialog(true)}\n          requestUpdate={this.props.requestUpdate}\n          simulateUpdateDownloaded={this.simulateUpdateDownloaded}\n          simulateUpdateAvailable={this.simulateUpdateAvailable}\n        />\n        <ClosableTabs hideLabels={!!this.props.integratedEditor}>\n          {getEditors(this.state.editorTabs).map((editorTab, id) => {\n            const isCurrentTab =\n              getCurrentTabIndex(this.state.editorTabs) === id;\n            return (\n              <ClosableTab\n                label={editorTab.label}\n                key={editorTab.key}\n                active={isCurrentTab}\n                onClick={() => this._onChangeEditorTab(id)}\n                onClose={() => this._onCloseEditorTab(editorTab)}\n                onCloseOthers={() => this._onCloseOtherEditorTabs(editorTab)}\n                onCloseAll={this._onCloseAllEditorTabs}\n                onActivated={() => this._onEditorTabActive(editorTab)}\n                closable={editorTab.closable}\n              />\n            );\n          })}\n        </ClosableTabs>\n        {getEditors(this.state.editorTabs).map((editorTab, id) => {\n          const isCurrentTab = getCurrentTabIndex(this.state.editorTabs) === id;\n          return (\n            <TabContentContainer key={editorTab.key} active={isCurrentTab}>\n              <ErrorBoundary>{editorTab.render(isCurrentTab)}</ErrorBoundary>\n            </TabContentContainer>\n          );\n        })}\n        <LoaderModal show={showLoader} />\n        <HelpFinder\n          open={helpFinderDialogOpen}\n          onClose={() => this.openHelpFinderDialog(false)}\n        />\n        <Snackbar\n          open={this.state.snackMessageOpen}\n          autoHideDuration={3000}\n          onClose={this._closeSnackMessage}\n          ContentProps={{\n            'aria-describedby': 'snackbar-message',\n          }}\n          message={<span id=\"snackbar-message\">{this.state.snackMessage}</span>}\n        />\n        {!!renderExportDialog &&\n          this.state.exportDialogOpen &&\n          renderExportDialog({\n            onClose: () => this.openExportDialog(false),\n            onChangeSubscription: () => {\n              this.openExportDialog(false);\n              this.openSubscription(true);\n            },\n            project: this.state.currentProject,\n          })}\n        {!!renderCreateDialog &&\n          this.state.createDialogOpen &&\n          renderCreateDialog({\n            open: this.state.createDialogOpen,\n            onClose: () => this.openCreateDialog(false),\n            onOpen: (storageProvider, fileMetadata) => {\n              this.openCreateDialog(false);\n              // eslint-disable-next-line\n              useStorageProvider(storageProvider)\n                .then(() => this.openFromFileMetadata(fileMetadata))\n                .then(() => this.openSceneOrProjectManager());\n            },\n            onCreate: (project, storageProvider, fileMetadata) => {\n              this.openCreateDialog(false);\n              // eslint-disable-next-line\n              useStorageProvider(storageProvider)\n                .then(() => this.loadFromProject(project, fileMetadata))\n                .then(() => this.openSceneOrProjectManager());\n            },\n          })}\n        {!!introDialog &&\n          React.cloneElement(introDialog, {\n            open: this.state.introDialogOpen,\n            onClose: () => this._openIntroDialog(false),\n          })}\n        {!!this.state.currentProject &&\n          this.state.platformSpecificAssetsDialogOpen && (\n            <PlatformSpecificAssetsDialog\n              project={this.state.currentProject}\n              open\n              onApply={() => {\n                if (this.props.unsavedChanges)\n                  this.props.unsavedChanges.triggerUnsavedChanges();\n                this.openPlatformSpecificAssets(false);\n              }}\n              onClose={() => this.openPlatformSpecificAssets(false)}\n              resourceSources={resourceSources}\n              onChooseResource={this._onChooseResource}\n              resourceExternalEditors={resourceExternalEditors}\n            />\n          )}\n        {!!genericDialog &&\n          React.cloneElement(genericDialog, {\n            open: this.state.genericDialogOpen,\n            onClose: () => this._openGenericDialog(false),\n          })}\n        {!!renderPreviewLauncher &&\n          renderPreviewLauncher(\n            {\n              onExport: () => this.openExportDialog(true),\n              onChangeSubscription: () => this.openSubscription(true),\n            },\n            (previewLauncher: ?PreviewLauncherInterface) => {\n              this._previewLauncher = previewLauncher;\n            }\n          )}\n        {resourceSources.map(\n          (resourceSource, index): React.Node => {\n            const Component = resourceSource.component;\n            return (\n              <PreferencesContext.Consumer key={resourceSource.name}>\n                {({ getLastUsedPath, setLastUsedPath }) => {\n                  return (\n                    <Component\n                      ref={dialog =>\n                        (this._resourceSourceDialogs[\n                          resourceSource.name\n                        ] = dialog)\n                      }\n                      i18n={i18n}\n                      getLastUsedPath={getLastUsedPath}\n                      setLastUsedPath={setLastUsedPath}\n                    />\n                  );\n                }}\n              </PreferencesContext.Consumer>\n            );\n          }\n        )}\n        {profileDialogOpen && (\n          <ProfileDialog\n            open\n            onClose={() => this.openProfile(false)}\n            onChangeSubscription={() => this.openSubscription(true)}\n          />\n        )}\n        {subscriptionDialogOpen && (\n          <SubscriptionDialog\n            onClose={() => {\n              this.openSubscription(false);\n            }}\n            open\n          />\n        )}\n        {this.state.preferencesDialogOpen && (\n          <PreferencesDialog onClose={() => this.openPreferences(false)} />\n        )}\n        {this.state.languageDialogOpen && (\n          <LanguageDialog\n            open\n            onClose={languageChanged => {\n              this.openLanguage(false);\n              if (languageChanged) {\n                this._languageDidChange();\n              }\n            }}\n          />\n        )}\n        {aboutDialogOpen && (\n          <AboutDialog\n            open\n            onClose={() => this.openAboutDialog(false)}\n            updateStatus={updateStatus}\n          />\n        )}\n        {this.state.openFromStorageProviderDialogOpen && (\n          <OpenFromStorageProviderDialog\n            onClose={() => this.openOpenFromStorageProviderDialog(false)}\n            storageProviders={this.props.storageProviders}\n            onChooseProvider={storageProvider => {\n              this.openOpenFromStorageProviderDialog(false);\n              useStorageProvider(storageProvider).then(() => {\n                this.chooseProjectWithStorageProviderPicker();\n              });\n            }}\n            onCreateNewProject={() => {\n              this.openOpenFromStorageProviderDialog(false);\n              this.openCreateDialog(true);\n            }}\n          />\n        )}\n        {this.state.saveToStorageProviderDialogOpen && (\n          <SaveToStorageProviderDialog\n            onClose={() => this.openSaveToStorageProviderDialog(false)}\n            storageProviders={this.props.storageProviders}\n            onChooseProvider={storageProvider => {\n              this.openSaveToStorageProviderDialog(false);\n              useStorageProvider(storageProvider).then(() => {\n                this.saveProjectAsWithStorageProvider();\n              });\n            }}\n          />\n        )}\n        {this.state.openConfirmDialogOpen && (\n          <OpenConfirmDialog\n            onClose={() => {\n              this._openOpenConfirmDialog(false);\n            }}\n            onConfirm={() => {\n              this._openOpenConfirmDialog(false);\n              this._openInitialFileMetadata(/* isAfterUserInteraction= */ true);\n            }}\n          />\n        )}\n        <CloseConfirmDialog\n          shouldPrompt={!!this.state.currentProject}\n          i18n={this.props.i18n}\n          language={this.props.i18n.language}\n          hasUnsavedChanges={\n            !!this.props.unsavedChanges &&\n            this.props.unsavedChanges.hasUnsavedChanges\n          }\n        />\n        <ChangelogDialogContainer />\n        {this.state.gdjsDevelopmentWatcherEnabled &&\n          renderGDJSDevelopmentWatcher &&\n          renderGDJSDevelopmentWatcher()}\n      </div>\n    );\n  }\n}\n\nexport default MainFrame;\n","// @flow\nimport { createMuiTheme, darken, lighten } from '@material-ui/core/styles';\nimport './Mosaic.css';\nimport './EventsSheet.css';\nimport 'react-virtualized/styles.css'; // Styles for react-virtualized Table\nimport './Table.css';\nimport './Markdown.css';\n\nconst gdevelopPurple = '#9100ce';\nconst gdevelopLightBlue = '#4ab0e4';\n\nconst systemSelectionColor = '#4c92ff'; //OS X selection\n\n// Use the fonts provided by the operating system(s) as possible.\n// If you update this font list, be sure to do it in all the other places using fonts in the codebase.\nconst fontFamily =\n  \"-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen-Sans, Ubuntu, 'Helvetica Neue', Helvetica, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol'\";\n\n/**\n * The background color of the main window\n */\nconst backgroundColor = '#f7f7f7';\n\n/**\n * The background color of the \"papers\", \"dialogs\", etc...\n */\nconst canvasColor = '#f0f0f0';\n\n// GDevelop specific variables:\nconst gdevelopTheme = {\n  palette: {\n    canvasColor,\n  },\n  message: {\n    warning: '#ffa500',\n    error: '#f00',\n  },\n  toolbar: {\n    backgroundColor: backgroundColor,\n    separatorColor: '#cecece',\n  },\n  closableTabs: {\n    fontFamily,\n    backgroundColor: backgroundColor,\n    textColor: '#878787',\n    selectedBackgroundColor: gdevelopLightBlue,\n    selectedTextColor: '#ffffff',\n    height: 32,\n    closeButtonWidth: 24,\n  },\n  imageThumbnail: {\n    selectedBorderColor: systemSelectionColor,\n  },\n  list: {\n    itemsBackgroundColor: '#FFFFFF',\n  },\n  listItem: {\n    groupBackgroundColor: backgroundColor,\n    groupTextColor: 'rgba(0,0,0,0.54)',\n    deprecatedGroupTextColor: 'rgba(0,0,0,0.30)',\n    separatorColor: '#e0e0e0',\n    selectedBackgroundColor: systemSelectionColor,\n    selectedTextColor: '#ffffff',\n    errorTextColor: '#ff2e16',\n    warningTextColor: '#ffb032',\n    selectedErrorBackgroundColor: '#ff2e16',\n    selectedWarningBackgroundColor: '#ffb032',\n  },\n  emptyMessage: {\n    shadowColor: '#FFFFFF',\n  },\n  logo: {\n    src: 'res/GD-logo-big.png',\n  },\n  mosaicRootClassName: 'mosaic-gd-default-theme', // See Mosaic.css\n  eventsSheetRootClassName: 'gd-events-sheet-default-theme', // See EventsSheet.css\n  tableRootClassName: 'gd-table-default-theme', // See Table.css\n  markdownRootClassName: 'gd-markdown-default-theme', // See Markdown.css\n  gdevelopIconsCSSFilter: '',\n};\n\n// Theme for Material-UI components\nconst muiTheme = createMuiTheme({\n  typography: {\n    fontFamily,\n  },\n  palette: {\n    type: 'light',\n    common: { black: 'rgba(110, 42, 42, 1)', white: '#fff' },\n    background: {\n      paper: canvasColor,\n      default: backgroundColor,\n    },\n    primary: {\n      light: lighten(gdevelopLightBlue, 0.05),\n      main: gdevelopLightBlue,\n      dark: darken(gdevelopLightBlue, 0.05),\n      contrastText: '#fff',\n    },\n    secondary: {\n      light: lighten(gdevelopPurple, 0.05),\n      main: gdevelopPurple,\n      dark: darken(gdevelopPurple, 0.05),\n      contrastText: '#fff',\n    },\n  },\n  overrides: {\n    MuiTypography: {\n      h6: {\n        // Make h6, used in Drawer title bars, use the same weight as tabs and mosaic windows\n        fontWeight: 400,\n      },\n    },\n    MuiInput: {\n      underline: {\n        '&:before': {\n          borderBottom: `1px solid #BBBBBB`,\n        },\n      },\n    },\n    MuiAppBar: {\n      colorPrimary: {\n        backgroundColor: gdevelopPurple,\n      },\n    },\n    MuiIconButton: {\n      root: {\n        // Fix color being grey if not set to (almost) black\n        color: '#111',\n      },\n    },\n    MuiListItemIcon: {\n      root: {\n        // Fix color being grey if not set to (almost) black\n        color: '#111',\n      },\n    },\n    // Use a more visible color scheme for tabs:\n    MuiTabs: {\n      root: {\n        backgroundColor: gdevelopLightBlue,\n      },\n    },\n    MuiTab: {\n      textColorPrimary: {\n        color: '#fff !important',\n      },\n    },\n    MuiButtonBase: {\n      // Remove the web-ish \"pointer\" (hand) cursor from buttons\n      root: {\n        cursor: 'default',\n      },\n    },\n    // Use non rounded buttons\n    MuiButton: {\n      root: {\n        borderRadius: 0,\n        fontWeight: 400, // Lower a bit the weight of buttons\n      },\n    },\n  },\n});\n\nconst theme = {\n  gdevelopTheme,\n  muiTheme,\n};\nexport type Theme = $Exact<typeof theme>;\nexport default theme;\n","// @flow\n// See ElectronEventsBridge, AboutDialog and electron-app/main.js for handling the updates.\n\nexport type UpdateStatus = {\n  message: string,\n  status:\n    | 'checking-for-update'\n    | 'update-available'\n    | 'update-not-available'\n    | 'error'\n    | 'download-progress'\n    | 'update-downloaded'\n    | 'unknown',\n};\n\nexport const getUpdateNotificationTitle = (updateStatus: UpdateStatus) => {\n  if (updateStatus.status === 'update-available')\n    return 'A new update is available!';\n\n  return '';\n};\n\nexport const getUpdateNotificationBody = (updateStatus: UpdateStatus) => {\n  if (updateStatus.status === 'update-available')\n    return 'It will be downloaded and installed automatically (unless you deactivated this in preferences)';\n\n  return '';\n};\n\nexport const getUpdateStatusLabel = (status: string) => {\n  if (status === 'checking-for-update') return 'Checking for update...';\n  if (status === 'update-available') return 'A new update is available!';\n  if (status === 'update-not-available')\n    return \"No update available. You're using the latest version!\";\n  if (status === 'error') return 'Error while checking update';\n  if (status === 'download-progress')\n    return 'A new update is being downloaded...';\n  if (status === 'update-downloaded')\n    return 'A new update will be installed after you quit and relaunch GDevelop';\n  return '';\n};\n\nexport const getUpdateButtonLabel = (status: string) => {\n  if (status === 'update-available') return 'Update GDevelop to latest version';\n  return 'Check again for new updates';\n};\n\nexport const canDownloadUpdate = (status: string) => {\n  return status === 'update-available';\n};\n","// @flow\nimport React from 'react';\nimport HelpOutline from '@material-ui/icons/HelpOutline';\nimport IconButton from '../IconButton';\nimport { getHelpLink } from '../../Utils/HelpLink';\nimport Window from '../../Utils/Window';\n\ntype PropsType = {\n  helpPagePath: ?string,\n  disabled?: boolean,\n  style?: {|\n    padding?: number,\n    width?: number,\n    height?: number,\n    transform?: string,\n    transition?: string,\n    opacity?: number,\n    margin?: number,\n    marginRight?: number,\n    marginLeft?: number,\n    marginTop?: number,\n    marginBottom?: number,\n  |},\n};\n\n/**\n * The icon that can be used in any dialog to open a help page\n */\nexport default (props: PropsType) => {\n  const { helpPagePath } = props;\n  if (!helpPagePath) return null;\n\n  return (\n    <IconButton\n      onClick={() => Window.openExternalURL(getHelpLink(helpPagePath))}\n      disabled={props.disabled}\n      style={props.style}\n    >\n      <HelpOutline />\n    </IconButton>\n  );\n};\n","// @flow\nimport * as React from 'react';\nimport flatten from 'lodash/flatten';\nimport { SortableContainer, SortableElement } from 'react-sortable-hoc';\nimport { mapFor } from '../Utils/MapFor';\nimport EmptyMessage from '../UI/EmptyMessage';\nimport newNameGenerator from '../Utils/NewNameGenerator';\nimport VariableRow from './VariableRow';\nimport EditVariableRow from './EditVariableRow';\nimport styles from './styles';\nimport {\n  getInitialSelection,\n  hasSelection,\n  addToSelection,\n  getSelection,\n} from '../Utils/SelectionHandler';\nimport { CLIPBOARD_KIND } from './ClipboardKind';\nimport Clipboard from '../Utils/Clipboard';\nimport {\n  serializeToJSObject,\n  unserializeFromJSObject,\n} from '../Utils/Serializer';\nimport { type VariableOrigin } from './VariablesList.flow';\n\nconst gd = global.gd;\n\nconst SortableVariableRow = SortableElement(VariableRow);\nconst SortableAddVariableRow = SortableElement(EditVariableRow);\n\nclass VariablesListBody extends React.Component<*, *> {\n  render() {\n    return <div>{this.props.children}</div>;\n  }\n}\n\nconst SortableVariablesListBody = SortableContainer(VariablesListBody);\nSortableVariablesListBody.muiName = 'TableBody';\n\ntype VariableAndName = {| name: string, ptr: number, variable: gdVariable |};\n\ntype Props = {|\n  variablesContainer: gdVariablesContainer,\n  inheritedVariablesContainer?: ?gdVariablesContainer,\n  emptyExplanationMessage?: React.Node,\n  emptyExplanationSecondMessage?: React.Node,\n  onSizeUpdated?: () => void,\n|};\ntype State = {|\n  nameErrors: { [string]: string },\n  selectedVariables: { [number]: ?VariableAndName },\n  mode: 'select' | 'move',\n|};\n\nexport default class VariablesList extends React.Component<Props, State> {\n  state = {\n    nameErrors: {},\n    selectedVariables: getInitialSelection(),\n    mode: 'select',\n  };\n\n  _selectVariable = (variableAndName: VariableAndName, select: boolean) => {\n    this.setState({\n      selectedVariables: addToSelection(\n        this.state.selectedVariables,\n        variableAndName,\n        select\n      ),\n    });\n  };\n\n  copySelection = () => {\n    Clipboard.set(\n      CLIPBOARD_KIND,\n      getSelection(this.state.selectedVariables).map(({ name, variable }) => ({\n        name,\n        serializedVariable: serializeToJSObject(variable),\n      }))\n    );\n  };\n\n  paste = () => {\n    const { variablesContainer, inheritedVariablesContainer } = this.props;\n    if (!Clipboard.has(CLIPBOARD_KIND)) return;\n\n    const variables = Clipboard.get(CLIPBOARD_KIND);\n    variables.forEach(({ name, serializedVariable }) => {\n      const newName = newNameGenerator(\n        name,\n        name =>\n          inheritedVariablesContainer\n            ? inheritedVariablesContainer.has(name) ||\n              variablesContainer.has(name)\n            : variablesContainer.has(name),\n        'CopyOf'\n      );\n      const newVariable = new gd.Variable();\n      unserializeFromJSObject(newVariable, serializedVariable);\n      variablesContainer.insert(\n        newName,\n        newVariable,\n        variablesContainer.count()\n      );\n      newVariable.delete();\n    });\n    this.forceUpdate();\n  };\n\n  deleteSelection = () => {\n    const { variablesContainer } = this.props;\n    const selection: Array<VariableAndName> = getSelection(\n      this.state.selectedVariables\n    );\n\n    // Only delete ancestor variables, as selection can be composed of variables\n    // that are contained inside others.\n    const ancestorOnlyVariables = selection.filter(variableAndName => {\n      // Make sure that the variable has no ancestor containing it\n      return !selection.find(\n        otherVariableAndName =>\n          variableAndName !== otherVariableAndName &&\n          otherVariableAndName.variable.contains(\n            variableAndName.variable,\n            /*recursive=*/ true\n          )\n      );\n    });\n\n    // We don't want to ever manipulate/access to variables that have been deleted (by removeRecursively):\n    // that's why it's important to only delete ancestor variables.\n    ancestorOnlyVariables.forEach(({ variable }: VariableAndName) =>\n      variablesContainer.removeRecursively(variable)\n    );\n    this.clearSelection();\n  };\n\n  clearSelection = () => {\n    this.setState({\n      selectedVariables: getInitialSelection(),\n    });\n  };\n\n  _updateOrDefineVariable = (\n    name: string,\n    variable: gdVariable,\n    newValue: string,\n    index: number,\n    origin: ?VariableOrigin\n  ) => {\n    const { variablesContainer, inheritedVariablesContainer } = this.props;\n\n    if (inheritedVariablesContainer && origin === 'parent') {\n      const serializedVariable = serializeToJSObject(\n        inheritedVariablesContainer.get(name)\n      );\n      const newVariable = new gd.Variable();\n      unserializeFromJSObject(newVariable, serializedVariable);\n      variablesContainer.insert(name, newVariable, index);\n      newVariable.delete();\n\n      variablesContainer.get(name).setString(newValue);\n    } else {\n      variable.setString(newValue);\n    }\n  };\n\n  _renderVariableChildren(\n    name: string,\n    parentVariable: gdVariable,\n    depth: number,\n    origin: VariableOrigin\n  ): Array<React.Node> {\n    const names = parentVariable.getAllChildrenNames().toJSArray();\n\n    return flatten(\n      names.map((name, index) => {\n        const variable = parentVariable.getChild(name);\n        return this._renderVariableAndChildrenRows(\n          name,\n          variable,\n          depth + 1,\n          index,\n          parentVariable,\n          origin\n        );\n      })\n    );\n  }\n\n  _getVariableOrigin = (name: string) => {\n    const { variablesContainer, inheritedVariablesContainer } = this.props;\n\n    if (!inheritedVariablesContainer || !inheritedVariablesContainer.has(name))\n      return '';\n    return variablesContainer.has(name) ? 'inherited' : 'parent';\n  };\n\n  _renderVariableAndChildrenRows(\n    name: string,\n    variable: gdVariable,\n    depth: number,\n    index: number,\n    parentVariable: ?gdVariable,\n    parentOrigin: ?VariableOrigin = null\n  ) {\n    const { variablesContainer } = this.props;\n    const isStructure = variable.isStructure();\n\n    const origin = parentOrigin ? parentOrigin : this._getVariableOrigin(name);\n\n    return (\n      <SortableVariableRow\n        name={name}\n        index={index}\n        key={'variable-' + name}\n        variable={variable}\n        disabled={depth !== 0}\n        depth={depth}\n        origin={origin}\n        errorText={\n          this.state.nameErrors[variable.ptr]\n            ? 'This name is already taken'\n            : undefined\n        }\n        onChangeValue={text => {\n          this._updateOrDefineVariable(name, variable, text, index, origin);\n\n          this.forceUpdate();\n          if (this.props.onSizeUpdated) this.props.onSizeUpdated();\n        }}\n        onResetToDefaultValue={() => {\n          variablesContainer.removeRecursively(variable);\n          this.forceUpdate();\n          if (this.props.onSizeUpdated) this.props.onSizeUpdated();\n        }}\n        onBlur={event => {\n          const text = event.target.value;\n          if (name === text) return;\n\n          let success = true;\n          if (!parentVariable) {\n            success = variablesContainer.rename(name, text);\n          } else {\n            success = parentVariable.renameChild(name, text);\n          }\n\n          this.setState({\n            nameErrors: {\n              ...this.state.nameErrors,\n              [variable.ptr]: !success,\n            },\n          });\n        }}\n        onRemove={() => {\n          if (!parentVariable) {\n            variablesContainer.remove(name);\n          } else {\n            parentVariable.removeChild(name);\n          }\n\n          this.forceUpdate();\n          if (this.props.onSizeUpdated) this.props.onSizeUpdated();\n        }}\n        onAddChild={() => {\n          const name = newNameGenerator('ChildVariable', name =>\n            variable.hasChild(name)\n          );\n          variable.getChild(name).setString('');\n\n          this.forceUpdate();\n          if (this.props.onSizeUpdated) this.props.onSizeUpdated();\n        }}\n        children={\n          isStructure\n            ? this._renderVariableChildren(name, variable, depth, origin)\n            : null\n        }\n        showHandle={this.state.mode === 'move'}\n        showSelectionCheckbox={this.state.mode === 'select'}\n        isSelected={!!this.state.selectedVariables[variable.ptr]}\n        onSelect={select =>\n          this._selectVariable({ name, ptr: variable.ptr, variable }, select)\n        }\n      />\n    );\n  }\n\n  _renderEmpty() {\n    return (\n      !!this.props.emptyExplanationMessage && (\n        <div>\n          <EmptyMessage\n            style={styles.emptyExplanation}\n            messageStyle={styles.emptyExplanationMessage}\n          >\n            {this.props.emptyExplanationMessage}\n          </EmptyMessage>\n          <EmptyMessage\n            style={styles.emptyExplanation}\n            messageStyle={styles.emptyExplanationMessage}\n          >\n            {this.props.emptyExplanationSecondMessage}\n          </EmptyMessage>\n        </div>\n      )\n    );\n  }\n\n  render() {\n    const { variablesContainer, inheritedVariablesContainer } = this.props;\n    if (!variablesContainer) return null;\n\n    // Display inherited variables, if any\n    const containerInheritedVariablesTree = inheritedVariablesContainer\n      ? mapFor(0, inheritedVariablesContainer.count(), index => {\n          const name = inheritedVariablesContainer.getNameAt(index);\n          if (!variablesContainer.has(name)) {\n            // Show only variables from parent container that are not redefined\n            const variable = inheritedVariablesContainer.getAt(index);\n            return this._renderVariableAndChildrenRows(\n              name,\n              variable,\n              0,\n              index,\n              undefined,\n              'parent'\n            );\n          }\n        })\n      : [];\n\n    const containerVariablesTree = mapFor(\n      0,\n      variablesContainer.count(),\n      index => {\n        const variable = variablesContainer.getAt(index);\n        const name = variablesContainer.getNameAt(index);\n\n        return this._renderVariableAndChildrenRows(\n          name,\n          variable,\n          0,\n          index,\n          undefined\n        );\n      }\n    );\n\n    const editRow = (\n      <SortableAddVariableRow\n        index={0}\n        key={'add-variable-row'}\n        disabled\n        onAdd={() => {\n          const variable = new gd.Variable();\n          variable.setString('');\n          const name = newNameGenerator('Variable', name =>\n            inheritedVariablesContainer\n              ? inheritedVariablesContainer.has(name) ||\n                variablesContainer.has(name)\n              : variablesContainer.has(name)\n          );\n          variablesContainer.insert(name, variable, variablesContainer.count());\n          this.forceUpdate();\n          if (this.props.onSizeUpdated) this.props.onSizeUpdated();\n        }}\n        onCopy={this.copySelection}\n        onPaste={this.paste}\n        onDeleteSelection={this.deleteSelection}\n        hasSelection={hasSelection(this.state.selectedVariables)}\n        hasClipboard={Clipboard.has(CLIPBOARD_KIND)}\n      />\n    );\n\n    return (\n      <SortableVariablesListBody\n        variablesContainer={this.props.variablesContainer}\n        onSortEnd={({ oldIndex, newIndex }) => {\n          this.props.variablesContainer.move(oldIndex, newIndex);\n          this.forceUpdate();\n        }}\n        helperClass=\"sortable-helper\"\n        useDragHandle\n        lockToContainerEdges\n      >\n        {!!containerInheritedVariablesTree.length &&\n          containerInheritedVariablesTree}\n        {!containerVariablesTree.length && this._renderEmpty()}\n        {!!containerVariablesTree.length && containerVariablesTree}\n        {editRow}\n      </SortableVariablesListBody>\n    );\n  }\n}\n","export default {\n  toolColumnHeader: {\n    textAlign: 'left',\n    paddingRight: 4,\n  },\n  toolColumn: {\n    minWidth: 48,\n    flex: 0,\n    justifyContent: 'flex-end',\n  },\n  tableChildIndentation: 24,\n  indent: {\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'flex-end',\n  },\n  indentIconColor: '#DDD', //TODO: Use theme color instead\n  emptyExplanation: {\n    justifyContent: 'flex-start',\n  },\n  emptyExplanationMessage: {\n    textAlign: 'left',\n  },\n  fadedButton: {\n    opacity: 0.7,\n  },\n};\n","// @flow\nimport { showErrorBox } from '../UI/Messages/MessageBox';\nimport values from 'lodash/values';\n\nexport type ProjectError = {\n  type: 'error' | 'warning',\n  message: string,\n  extraExplanation: string,\n};\n\nexport type ProjectErrors = {\n  [string]: Array<ProjectError>,\n};\n\nexport const validatePackageName = (packageName: string) => {\n  const pattern = /^([A-Za-z]{1}[A-Za-z\\d_]*\\.)+[A-Za-z][A-Za-z\\d_]*$/i;\n\n  return pattern.test(packageName);\n};\n\ntype TFunction = string => string; //TODO\n\nexport const getErrors = (t: TFunction, project: gdProject): ProjectErrors => {\n  const errors: ProjectErrors = {};\n\n  const addError = (\n    propertyName: string,\n    type: 'error' | 'warning',\n    message: string,\n    extraExplanation: string = ''\n  ) => {\n    if (!errors[propertyName]) errors[propertyName] = [];\n\n    errors[propertyName].push({\n      type,\n      message,\n      extraExplanation,\n    });\n  };\n\n  if (!project.getPackageName()) {\n    addError(\n      'packageName',\n      'error',\n      t('The package name is empty.'),\n      t('Choose and enter a package name in the game properties.')\n    );\n  } else if (project.getPackageName().length >= 255) {\n    addError(\n      'packageName',\n      'error',\n      t('The package name is too long.'),\n      t('Change the package name in the game properties.')\n    );\n  } else if (!validatePackageName(project.getPackageName())) {\n    addError(\n      'packageName',\n      'error',\n      t(\n        'The package name is containing invalid characters or not following the convention \"xxx.yyy.zzz\" (numbers allowed after a letter only).'\n      ),\n      t('Change the package name in the game properties.')\n    );\n  }\n\n  if (!project.getName()) {\n    addError(\n      'name',\n      'error',\n      t('The name of your game is too long.'),\n      t('Change the name in the game properties.')\n    );\n  }\n\n  if (!project.getVersion() || project.getVersion().split('.').length < 3) {\n    addError(\n      'packageName',\n      'error',\n      t(\"The version that you've set for the game is invalid.\"),\n      t('Enter a version in the game properties.')\n    );\n  }\n\n  return errors;\n};\n\nexport const displayProjectErrorsBox = (\n  t: TFunction,\n  errors: ProjectErrors\n): boolean => {\n  if (!Object.keys(errors).length) return true;\n\n  showErrorBox(\n    t(\n      'Your game has some invalid elements, please fix these before continuing:'\n    ) +\n      '\\n\\n' +\n      values(errors)\n        .map(errors =>\n          errors.map((error: ProjectError) => `- ${error.message}`).join('\\n')\n        )\n        .join('\\n')\n  );\n\n  return false;\n};\n","// @flow\nimport React, { Component } from 'react';\nimport Chip from '@material-ui/core/Chip';\nimport { Column, Line } from '../UI/Grid';\nimport randomColor from 'randomcolor';\nimport SearchBar from '../UI/SearchBar';\n\ntype Props = {|\n  value: string,\n  onChange: string => void,\n  chosenChip: string,\n  onChooseChip: string => void,\n  chips: ?Array<{| text: string, value: string |}>,\n  onRequestSearch: () => void,\n|};\n\nconst styles = {\n  chip: {\n    margin: 2,\n  },\n  chipsList: {\n    marginTop: 4,\n    display: 'flex',\n    flexWrap: 'wrap',\n  },\n};\n\nconst getChipColor = (tag: string) => {\n  return randomColor({\n    seed: tag,\n    luminosity: 'light',\n  });\n};\n\nexport default class SearchbarWithChips extends Component<Props> {\n  _searchBar: ?SearchBar;\n\n  componentDidMount() {\n    if (this._searchBar) this._searchBar.focus();\n  }\n\n  render() {\n    const {\n      chosenChip,\n      onChooseChip,\n      value,\n      onChange,\n      onRequestSearch,\n      chips,\n    } = this.props;\n\n    return (\n      <Column noMargin>\n        <SearchBar\n          value={value}\n          onRequestSearch={onRequestSearch}\n          onChange={value => {\n            onChange(value);\n          }}\n          ref={searchBar => (this._searchBar = searchBar)}\n        />\n        <Line>\n          <Column>\n            <div style={styles.chipsList}>\n              {chips &&\n                chips.map(({ text, value }) => (\n                  <Chip\n                    size=\"small\"\n                    key={value}\n                    style={{\n                      ...styles.chip,\n                      backgroundColor:\n                        !chosenChip || chosenChip === value\n                          ? getChipColor(value)\n                          : undefined,\n                      color:\n                        !chosenChip || chosenChip === value\n                          ? 'black'\n                          : undefined,\n                    }}\n                    onClick={() =>\n                      onChooseChip(chosenChip === value ? '' : value)\n                    }\n                    label={text}\n                  />\n                ))}\n            </div>\n          </Column>\n        </Line>\n      </Column>\n    );\n  }\n}\n","// @flow\nimport { Trans } from '@lingui/macro';\n\nimport React, { Component } from 'react';\nimport FlatButton from '../UI/FlatButton';\nimport TextField from '../UI/TextField';\nimport RaisedButton from '../UI/RaisedButton';\nimport Dialog from '../UI/Dialog';\nimport ColorField from '../UI/ColorField';\nimport EmptyMessage from '../UI/EmptyMessage';\nimport PropertiesEditor from '../PropertiesEditor';\nimport propertiesMapToSchema from '../PropertiesEditor/PropertiesMapToSchema';\nimport some from 'lodash/some';\nimport Checkbox from '../UI/Checkbox';\nimport { isNullPtr } from '../Utils/IsNullPtr';\nconst gd = global.gd;\n\ntype Props = {|\n  open: boolean,\n  layout: gdLayout,\n  project: gdProject,\n  onApply: () => void,\n  onClose: () => void,\n  onOpenMoreSettings?: () => void,\n  onEditVariables: () => void,\n|};\n\ntype State = {|\n  windowTitle: string,\n  shouldStopSoundsOnStartup: boolean,\n  backgroundColor: {\n    r: number,\n    g: number,\n    b: number,\n    a: number,\n  },\n|};\n\nexport default class ScenePropertiesDialog extends Component<Props, State> {\n  constructor(props: Props) {\n    super(props);\n    this.state = this._loadFrom(props.layout);\n  }\n\n  _loadFrom(layout: gdLayout): State {\n    return {\n      windowTitle: layout.getWindowDefaultTitle(),\n      shouldStopSoundsOnStartup: layout.stopSoundsOnStartup(),\n      backgroundColor: {\n        r: layout.getBackgroundColorRed(),\n        g: layout.getBackgroundColorGreen(),\n        b: layout.getBackgroundColorBlue(),\n        a: 1,\n      },\n    };\n  }\n\n  componentWillReceiveProps(newProps: Props) {\n    if (\n      (!this.props.open && newProps.open) ||\n      (newProps.open && this.props.layout !== newProps.layout)\n    ) {\n      this.setState(this._loadFrom(newProps.layout));\n    }\n  }\n\n  _onApply = () => {\n    this.props.layout.setWindowDefaultTitle(this.state.windowTitle);\n    this.props.layout.setStopSoundsOnStartup(\n      this.state.shouldStopSoundsOnStartup\n    );\n    this.props.layout.setBackgroundColor(\n      this.state.backgroundColor.r,\n      this.state.backgroundColor.g,\n      this.state.backgroundColor.b\n    );\n    this.props.onApply();\n  };\n\n  render() {\n    const { layout, project } = this.props;\n    const actions = [\n      // TODO: Add support for cancelling modifications made to BehaviorSharedData\n      // (either by enhancing a function like propertiesMapToSchema or using copies)\n      // and then re-enable cancel button.\n      // <FlatButton\n      //   label={<Trans>Cancel</Trans>}\n      //   primary={false}\n      //   onClick={this.props.onClose}\n      // />,\n      <FlatButton\n        label={<Trans>Ok</Trans>}\n        key=\"ok\"\n        primary={true}\n        keyboardFocused={true}\n        onClick={this._onApply}\n      />,\n    ];\n\n    const allBehaviorSharedDataNames = layout\n      .getAllBehaviorSharedDataNames()\n      .toJSArray();\n\n    const propertiesEditors = allBehaviorSharedDataNames\n      .map(name => {\n        const sharedDataContent = layout.getBehaviorSharedData(name);\n        const type = sharedDataContent.getTypeName();\n\n        const behaviorSharedData = gd.JsPlatform.get().getBehaviorSharedDatas(\n          type\n        );\n        if (isNullPtr(gd, behaviorSharedData)) return null;\n\n        const properties = behaviorSharedData.getProperties(\n          sharedDataContent.getContent(),\n          project\n        );\n        const propertiesSchema = propertiesMapToSchema(\n          properties,\n          sharedDataContent =>\n            behaviorSharedData.getProperties(\n              sharedDataContent.getContent(),\n              project\n            ),\n          (sharedDataContent, name, value) =>\n            behaviorSharedData.updateProperty(\n              sharedDataContent.getContent(),\n              name,\n              value,\n              project\n            )\n        );\n\n        return (\n          !!propertiesSchema.length && (\n            <PropertiesEditor\n              key={name}\n              schema={propertiesSchema}\n              instances={[sharedDataContent]}\n            />\n          )\n        );\n      })\n      .filter(Boolean);\n\n    return (\n      <Dialog\n        title={<Trans>Scene properties</Trans>}\n        actions={actions}\n        secondaryActions={\n          <RaisedButton\n            label={<Trans>Edit scene variables</Trans>}\n            fullWidth\n            onClick={() => {\n              this.props.onEditVariables();\n              this.props.onClose();\n            }}\n          />\n        }\n        open={this.props.open}\n        cannotBeDismissed={true}\n        onRequestClose={this.props.onClose}\n        maxWidth=\"sm\"\n      >\n        <TextField\n          floatingLabelText={<Trans>Window title</Trans>}\n          fullWidth\n          type=\"text\"\n          value={this.state.windowTitle}\n          onChange={(e, value) => this.setState({ windowTitle: value })}\n        />\n        <Checkbox\n          checked={this.state.shouldStopSoundsOnStartup}\n          label={<Trans>Stop musics and sounds on startup</Trans>}\n          onCheck={(e, check) =>\n            this.setState({\n              shouldStopSoundsOnStartup: check,\n            })\n          }\n        />\n        <ColorField\n          floatingLabelText={<Trans>Scene background color</Trans>}\n          fullWidth\n          disableAlpha\n          color={this.state.backgroundColor}\n          onChangeComplete={color =>\n            this.setState({ backgroundColor: color.rgb })\n          }\n        />\n        {!some(propertiesEditors) && (\n          <EmptyMessage>\n            <Trans>\n              Any additional properties will appear here if you add behaviors to\n              objects, like Physics behavior.\n            </Trans>\n          </EmptyMessage>\n        )}\n        {propertiesEditors}\n        {this.props.onOpenMoreSettings && (\n          <RaisedButton\n            label={<Trans>Open advanced settings</Trans>}\n            fullWidth\n            onClick={() => {\n              if (this.props.onOpenMoreSettings)\n                this.props.onOpenMoreSettings();\n              this.props.onClose();\n            }}\n          />\n        )}\n      </Dialog>\n    );\n  }\n}\n","// @flow\nexport const isNullPtr = (\n  gd: libGDevelop,\n  object: gdEmscriptenObject\n): boolean => gd.getPointer(object) === 0;\n","// @flow\nimport * as React from 'react';\nimport { Trans } from '@lingui/macro';\nimport VariablesEditorDialog from '../VariablesList/VariablesEditorDialog';\n\ntype Props = {|\n  open: boolean,\n  layout: gdLayout,\n  onApply: () => void,\n  onClose: () => void,\n|};\n\nexport default (props: Props) => {\n  return (\n    <VariablesEditorDialog\n      open={props.open}\n      variablesContainer={props.layout.getVariables()}\n      onCancel={props.onClose}\n      onApply={props.onApply}\n      title={<Trans>Scene Variables</Trans>}\n      emptyExplanationMessage={\n        <Trans>\n          Scene variables can be used to store any value or text during the\n          game.\n        </Trans>\n      }\n      emptyExplanationSecondMessage={\n        <Trans>\n          For example, you can have a variable called Score representing the\n          current score of the player.\n        </Trans>\n      }\n    />\n  );\n};\n","import React from 'react';\nimport Checkbox from '../../UI/Checkbox';\nimport ThemeConsumer from '../../UI/Theme/ThemeConsumer';\n\nconst SPRITE_SIZE = 100;\nexport const thumbnailContainerStyle = {\n  position: 'relative',\n  display: 'inline-block',\n  width: SPRITE_SIZE,\n  height: SPRITE_SIZE,\n  justifyContent: 'center',\n  alignItems: 'center',\n  lineHeight: SPRITE_SIZE + 'px',\n  textAlign: 'center',\n  border: '#AAAAAA 1px solid',\n  borderColor: '#AAAAAA',\n};\n\nconst styles = {\n  spriteThumbnail: {\n    ...thumbnailContainerStyle,\n    background: 'url(\"res/transparentback.png\") repeat',\n  },\n  spriteThumbnailImage: {\n    maxWidth: SPRITE_SIZE,\n    maxHeight: SPRITE_SIZE,\n    verticalAlign: 'middle',\n    pointerEvents: 'none',\n  },\n  checkboxContainer: {\n    textAlign: 'initial',\n    position: 'absolute',\n    width: 34, // Used to position the checkbox near the right border with a proper margin\n    height: 64,\n    bottom: 0,\n    right: 0,\n  },\n};\n\nconst ImageThumbnail = ({\n  project,\n  resourceName,\n  resourcesLoader,\n  style,\n  selectable,\n  selected,\n  onSelect,\n  onContextMenu,\n  muiTheme,\n}) => {\n  return (\n    <ThemeConsumer>\n      {muiTheme => (\n        <div\n          title={resourceName}\n          style={{\n            ...styles.spriteThumbnail,\n            borderColor: selected\n              ? muiTheme.imageThumbnail.selectedBorderColor\n              : undefined,\n            ...style,\n          }}\n          onContextMenu={e => {\n            e.stopPropagation();\n            if (onContextMenu) onContextMenu(e.clientX, e.clientY);\n          }}\n        >\n          <img\n            style={styles.spriteThumbnailImage}\n            alt={resourceName}\n            src={resourcesLoader.getResourceFullUrl(project, resourceName)}\n            crossOrigin=\"anonymous\"\n          />\n          {selectable && (\n            <div style={styles.checkboxContainer}>\n              <Checkbox\n                checked={selected}\n                onCheck={(e, check) => onSelect(check)}\n              />\n            </div>\n          )}\n        </div>\n      )}\n    </ThemeConsumer>\n  );\n};\n\nexport default ImageThumbnail;\n","// @flow\nimport * as React from 'react';\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport IconButton from '@material-ui/core/IconButton';\nimport Typography from '@material-ui/core/Typography';\nimport Close from '@material-ui/icons/Close';\n\nexport const editorBarHeight = 32;\n\ntype Props = {|\n  title: React.Node,\n  displayLeftCloseButton?: boolean,\n  displayRightCloseButton?: boolean,\n  onClose: () => void,\n|};\n\nconst styles = {\n  appBar: {\n    height: editorBarHeight,\n    minHeight: editorBarHeight,\n  },\n  toolbar: {\n    height: editorBarHeight,\n    minHeight: editorBarHeight,\n    paddingLeft: 15,\n    paddingRight: 15,\n  },\n  title: { fontSize: '15px', flexGrow: 1 },\n};\n\nexport default (props: Props) => {\n  return (\n    <AppBar position=\"static\" style={styles.appBar} color=\"primary\">\n      <Toolbar style={styles.toolbar}>\n        {props.displayLeftCloseButton && (\n          <IconButton onClick={props.onClose} edge=\"start\" color=\"inherit\">\n            <Close />\n          </IconButton>\n        )}\n        <Typography variant=\"h6\" style={styles.title}>\n          {props.title}\n        </Typography>\n\n        {props.displayRightCloseButton && (\n          <IconButton onClick={props.onClose} edge=\"end\" color=\"inherit\">\n            <Close />\n          </IconButton>\n        )}\n      </Toolbar>\n    </AppBar>\n  );\n};\n","// @flow\nimport { Trans } from '@lingui/macro';\n\nimport * as React from 'react';\nimport FlatButton from '../UI/FlatButton';\nimport RaisedButton from '../UI/RaisedButton';\nimport { Column, Line, Spacer } from '../UI/Grid';\nimport Text from '../UI/Text';\nimport BackgroundText from '../UI/BackgroundText';\n\ntype Props = {\n  message?: React.Node,\n  onLogin: () => void,\n  onCreateAccount: () => void,\n};\n\nexport default ({ message, onLogin, onCreateAccount }: Props) => (\n  <Column noMargin>\n    <Line>\n      <Text>\n        {message || (\n          <Trans>\n            You are not connected. Create an account to access to GDevelop\n            online services and build your game for Android, Windows, macOS and\n            Linux in one click!\n          </Trans>\n        )}\n      </Text>\n    </Line>\n    <Line justifyContent=\"center\" alignItems=\"baseline\">\n      <RaisedButton\n        label={<Trans>Create my account</Trans>}\n        onClick={onCreateAccount}\n        primary\n      />\n      <Spacer />\n      <Spacer />\n      <BackgroundText>or</BackgroundText>\n      <Spacer />\n      <FlatButton label={<Trans>Login</Trans>} onClick={onLogin} />\n    </Line>\n  </Column>\n);\n","// @flow\nimport * as React from 'react';\nimport EventsSheet from '../../EventsSheet';\nimport { serializeToJSObject } from '../../Utils/Serializer';\nimport BaseEditor from './BaseEditor';\n\nexport default class EventsEditor extends BaseEditor {\n  editor: ?EventsSheet;\n\n  updateToolbar() {\n    if (this.editor) this.editor.updateToolbar();\n  }\n\n  forceUpdateEditor() {\n    // No updates to be done.\n  }\n\n  getSerializedElements() {\n    const layout = this.getLayout();\n    if (!layout) return {};\n\n    return {\n      ...BaseEditor.getLayoutSerializedElements(layout),\n      events: serializeToJSObject(layout.getEvents()),\n    };\n  }\n\n  getLayout(): ?gdLayout {\n    const { project, layoutName } = this.props;\n    if (!project || !project.hasLayoutNamed(layoutName)) return null;\n\n    return project.getLayout(layoutName);\n  }\n\n  render() {\n    const { project, layoutName } = this.props;\n    const layout = this.getLayout();\n    if (!layout) {\n      //TODO: Error component\n      return <div>No layout called {layoutName} found!</div>;\n    }\n\n    return (\n      <EventsSheet\n        {...this.props}\n        ref={editor => (this.editor = editor)}\n        project={project}\n        scope={{\n          layout,\n        }}\n        globalObjectsContainer={project}\n        objectsContainer={layout}\n        events={layout.getEvents()}\n        onPreview={options => this.props.onPreview(project, layout, options)}\n        onOpenExternalEvents={this.props.onOpenExternalEvents}\n        resourceSources={this.props.resourceSources}\n        onChooseResource={this.props.onChooseResource}\n        resourceExternalEditors={this.props.resourceExternalEditors}\n        openInstructionOrExpression={this.props.openInstructionOrExpression}\n        unsavedChanges={this.props.unsavedChanges}\n      />\n    );\n  }\n}\n","// @flow\nimport * as React from 'react';\nimport { dropIndicator, cantDropIndicator } from './ClassNames';\n\n/**\n * A Drop indicator line for the events sheet\n */\nexport default function DropIndicator({ canDrop }: {| canDrop: boolean |}) {\n  return <div className={canDrop ? dropIndicator : cantDropIndicator} />;\n}\n","import React from 'react';\nconst marginsSize = 4;\n\n/**\n * A Line in the standard GDevelop grid to position components.\n * Check `Layout` first to see if there is already a layout made\n * specifically for your components (like `TextFieldWithButton`).\n */\nexport const Line = props => (\n  <div\n    style={{\n      display: 'flex',\n      marginTop: props.noMargin ? 0 : marginsSize,\n      marginBottom: props.noMargin ? 0 : marginsSize,\n      alignItems: props.alignItems,\n      justifyContent: props.justifyContent,\n      flex: props.expand ? 1 : undefined,\n    }}\n  >\n    {props.children}\n  </div>\n);\n\n/**\n * A Column in the standard GDevelop grid to position components.\n * Check `Layout` first to see if there is already a layout made\n * specifically for your components (like `TextFieldWithButton`).\n */\nexport const Column = props => (\n  <div\n    style={{\n      display: 'flex',\n      marginLeft: props.noMargin ? 0 : marginsSize * 2,\n      marginRight: props.noMargin ? 0 : marginsSize * 2,\n      flexDirection: 'column',\n      alignItems: props.alignItems || 'stretch',\n      justifyContent: props.justifyContent,\n      flex: props.expand ? 1 : undefined,\n      maxHeight: props.useMaxHeight ? '100%' : undefined,\n    }}\n  >\n    {props.children}\n  </div>\n);\n\n/**\n * A Spacer in the standard GDevelop grid to position components.\n * Check `Layout` first to see if there is already a layout made\n * specifically for your components (like `TextFieldWithButton`).\n */\nexport const Spacer = props => (\n  <span\n    style={{\n      width: marginsSize,\n      height: marginsSize,\n      flexShrink: 0, // Ensure the spacer is not shrinked when in a flex container\n    }}\n  />\n);\n","// @flow\nimport * as React from 'react';\nimport SemiControlledTextField from '../../UI/SemiControlledTextField';\nimport { type ParameterFieldProps } from './ParameterFieldCommons';\nimport { type ParameterInlineRendererProps } from './ParameterInlineRenderer.flow';\n\nexport default class DefaultField extends React.Component<\n  ParameterFieldProps,\n  void\n> {\n  _field: ?any = null;\n\n  focus() {\n    if (this._field) this._field.focus();\n  }\n\n  render() {\n    const { parameterMetadata } = this.props;\n    const description = parameterMetadata\n      ? parameterMetadata.getDescription()\n      : undefined;\n\n    return (\n      <SemiControlledTextField\n        margin={this.props.isInline ? 'none' : 'dense'}\n        commitOnBlur\n        value={this.props.value}\n        floatingLabelText={description}\n        helperMarkdownText={\n          parameterMetadata ? parameterMetadata.getLongDescription() : undefined\n        }\n        onChange={(text: string) => this.props.onChange(text)}\n        ref={field => (this._field = field)}\n        fullWidth\n      />\n    );\n  }\n}\n\nexport const renderInlineDefaultField = ({\n  value,\n  parameterMetadata,\n  MissingParameterValue,\n}: ParameterInlineRendererProps) => {\n  if (!value && !parameterMetadata.isOptional()) {\n    return <MissingParameterValue />;\n  }\n\n  return value;\n};\n","// @flow\nimport { t } from '@lingui/macro';\nimport * as React from 'react';\nimport { enumerateObjectsAndGroups } from './EnumerateObjects';\nimport SemiControlledAutoComplete, {\n  type DataSource,\n  type SemiControlledAutoCompleteInterface,\n} from '../UI/SemiControlledAutoComplete';\nimport ListIcon from '../UI/ListIcon';\nimport ObjectsRenderingService from '../ObjectsRendering/ObjectsRenderingService';\nimport { type MessageDescriptor } from '../Utils/i18n/MessageDescriptor.flow';\n\ntype Props = {|\n  project: ?gdProject,\n  globalObjectsContainer: gdObjectsContainer,\n  objectsContainer: gdObjectsContainer,\n  allowedObjectType?: ?string,\n  noGroups?: boolean,\n\n  onChoose?: string => void,\n  onChange: string => void,\n  onRequestClose?: () => void,\n  value: string,\n  errorTextIfInvalid?: React.Node,\n\n  fullWidth?: boolean,\n  floatingLabelText?: React.Node,\n  helperMarkdownText?: ?string,\n  hintText?: MessageDescriptor | string,\n  openOnFocus?: boolean,\n  margin?: 'none' | 'dense',\n|};\n\nconst iconSize = 24;\n\nconst getObjectsAndGroupsDataSource = ({\n  project,\n  globalObjectsContainer,\n  objectsContainer,\n  noGroups,\n  allowedObjectType,\n}: {|\n  project: ?gdProject,\n  globalObjectsContainer: gdObjectsContainer,\n  objectsContainer: gdObjectsContainer,\n  noGroups: ?boolean,\n  allowedObjectType: ?string,\n|}): DataSource => {\n  const list = enumerateObjectsAndGroups(\n    globalObjectsContainer,\n    objectsContainer,\n    allowedObjectType || undefined\n  );\n  const objects = list.allObjectsList.map(({ object }) => {\n    return {\n      text: object.getName(),\n      value: object.getName(),\n      renderIcon: project\n        ? () => (\n            // TODO: This is broken since the changes to ListIcon\n            <ListIcon\n              iconSize={iconSize}\n              src={ObjectsRenderingService.getThumbnail(project, object)}\n            />\n          )\n        : undefined,\n    };\n  });\n  const groups = noGroups\n    ? []\n    : list.allGroupsList.map(({ group }) => {\n        return {\n          text: group.getName(),\n          value: group.getName(),\n        };\n      });\n\n  return [...objects, { type: 'separator' }, ...groups];\n};\n\nexport default class ObjectSelector extends React.Component<Props, {||}> {\n  _field: ?SemiControlledAutoCompleteInterface;\n\n  // Don't add a componentWillUnmount that would call onChange. This can lead to\n  // calling callbacks that would then update a deleted instruction parameters.\n\n  focus() {\n    if (this._field) this._field.focus();\n  }\n\n  render() {\n    const {\n      value,\n      onChange,\n      onChoose,\n      project,\n      globalObjectsContainer,\n      objectsContainer,\n      allowedObjectType,\n      noGroups,\n      errorTextIfInvalid,\n      margin,\n      onRequestClose,\n      ...rest\n    } = this.props;\n\n    const objectAndGroups = getObjectsAndGroupsDataSource({\n      project,\n      globalObjectsContainer,\n      objectsContainer,\n      noGroups,\n      allowedObjectType,\n    });\n    const hasValidChoice =\n      objectAndGroups.filter(\n        choice => choice.text !== undefined && value === choice.text\n      ).length !== 0;\n\n    return (\n      <SemiControlledAutoComplete\n        margin={margin}\n        hintText={t`Choose an object`}\n        value={value}\n        onChange={onChange}\n        onChoose={onChoose}\n        onRequestClose={onRequestClose}\n        dataSource={objectAndGroups}\n        errorText={hasValidChoice ? undefined : errorTextIfInvalid}\n        ref={field => (this._field = field)}\n        {...rest}\n      />\n    );\n  }\n}\n","// @flow\nimport slugs from 'slugs';\nimport * as PIXI from 'pixi.js';\nimport ResourcesLoader from '../ResourcesLoader';\nimport { loadFontFace } from '../Utils/FontFaceLoader';\nconst gd = global.gd;\n\nconst loadedFontFamilies = {};\nconst loadedTextures = {};\nconst invalidTexture = PIXI.Texture.fromImage('res/error48.png');\n\n/**\n * Expose functions to load PIXI textures or fonts, given the names of\n * resources and a gd.Project.\n *\n * This internally uses ResourcesLoader to get the URL of the resources.\n */\nexport default class PixiResourcesLoader {\n  static _initializeTexture(resource: gdResource, texture: any) {\n    if (resource.getKind() !== 'image') return;\n\n    const imageResource = gd.asImageResource(resource);\n    if (!imageResource.isSmooth()) {\n      texture.baseTexture.scaleMode = PIXI.SCALE_MODES.NEAREST;\n    }\n  }\n\n  /**\n   * (Re)load the PIXI texture represented by the given resources.\n   */\n  static loadTextures(\n    project: gdProject,\n    resourceNames: Array<string>,\n    onProgress: (number, number) => void,\n    onComplete: () => void\n  ) {\n    const resourcesManager = project.getResourcesManager();\n    const loader = PIXI.loader;\n    loader.reset();\n    loader.removeAllListeners();\n\n    const allResources = {};\n    resourceNames.forEach(resourceName => {\n      const resource = resourcesManager.getResource(resourceName);\n      const filename = ResourcesLoader.getResourceFullUrl(\n        project,\n        resourceName\n      );\n      loader.add(resourceName, filename);\n      allResources[resourceName] = resource;\n    });\n\n    const totalCount = resourceNames.length;\n    if (!totalCount) {\n      onComplete();\n      return;\n    }\n\n    let loadingCount = 0;\n    loader.once('complete', function(loader, loadedResources) {\n      //Store the loaded textures so that they are ready to use.\n      for (const resourceName in loadedResources) {\n        if (loadedResources.hasOwnProperty(resourceName)) {\n          const resource = resourcesManager.getResource(resourceName);\n          if (resource.getKind() !== 'image') continue;\n\n          loadedTextures[resourceName] = loadedResources[resourceName].texture;\n          PixiResourcesLoader._initializeTexture(\n            resource,\n            loadedTextures[resourceName]\n          );\n        }\n      }\n\n      onComplete();\n    });\n    loader.on('progress', function() {\n      loadingCount++;\n      onProgress(loadingCount, totalCount);\n    });\n\n    loader.load();\n  }\n\n  /**\n   * Return the PIXI texture represented by the given resource.\n   * If not loaded, it will load it.\n   * @returns The PIXI.Texture to be used. It can be loading, so you\n   * should listen to PIXI.Texture `update` event, and refresh your object\n   * if this event is triggered.\n   */\n  static getPIXITexture(project: gdProject, resourceName: string) {\n    if (loadedTextures[resourceName]) {\n      return loadedTextures[resourceName];\n    }\n\n    if (!project.getResourcesManager().hasResource(resourceName))\n      return invalidTexture;\n\n    const resource = project.getResourcesManager().getResource(resourceName);\n    if (resource.getKind() !== 'image') return invalidTexture;\n\n    loadedTextures[resourceName] = PIXI.Texture.fromImage(\n      ResourcesLoader.getResourceFullUrl(project, resourceName),\n      true /* Treats request as cross-origin */\n    );\n\n    PixiResourcesLoader._initializeTexture(\n      resource,\n      loadedTextures[resourceName]\n    );\n    return loadedTextures[resourceName];\n  }\n\n  /**\n   * Return the PIXI video texture represented by the given resource.\n   * If not loaded, it will load it.\n   * @returns The PIXI.Texture to be used. It can be loading, so you\n   * should listen to PIXI.Texture `update` event, and refresh your object\n   * if this event is triggered.\n   */\n  static getPIXIVideoTexture(project: gdProject, resourceName: string) {\n    if (loadedTextures[resourceName]) {\n      return loadedTextures[resourceName];\n    }\n\n    if (!project.getResourcesManager().hasResource(resourceName))\n      return invalidTexture;\n\n    const resource = project.getResourcesManager().getResource(resourceName);\n    if (resource.getKind() !== 'video') return invalidTexture;\n\n    loadedTextures[resourceName] = PIXI.Texture.fromVideo(\n      ResourcesLoader.getResourceFullUrl(\n        project,\n        resourceName,\n        true /* Disable cache bursting for video because it prevent the video to be recognized as such? */\n      ),\n      PIXI.SCALE_MODES.LINEAR,\n      true /* Treats request as cross-origin */,\n      false /* autoplay */\n    );\n\n    // Fix compatibility with Chrome 76+. Only useful for Pixi v4, fixed and can be removed with Pixi v5.\n    // See https://github.com/pixijs/pixi.js/issues/5996\n    loadedTextures[resourceName].baseTexture.source.preload = 'auto';\n    return loadedTextures[resourceName];\n  }\n\n  /**\n   * Load the given font from its url/filename.\n   * @returns a Promise that resolves with the font-family to be used\n   * to render a text with the font.\n   */\n  static loadFontFamily(\n    project: gdProject,\n    resourceName: string\n  ): Promise<string> {\n    // Avoid reloading a font if it's already cached\n    if (loadedFontFamilies[resourceName]) {\n      return Promise.resolve(loadedFontFamilies[resourceName]);\n    }\n\n    const fontFamily = slugs(resourceName);\n    let fullFilename = null;\n    if (project.getResourcesManager().hasResource(resourceName)) {\n      const resource = project.getResourcesManager().getResource(resourceName);\n      if (resource.getKind() === 'font') {\n        fullFilename = ResourcesLoader.getResourceFullUrl(\n          project,\n          resourceName\n        );\n      }\n    } else {\n      // Compatibility with GD <= 5.0-beta56\n      // Assume resourceName is just the filename to the font\n      fullFilename = ResourcesLoader.getFullUrl(project, resourceName);\n      // end of compatibility code\n    }\n\n    if (!fullFilename) {\n      // If no resource is found/resource is not a font, default to Arial,\n      // as done by the game engine too.\n      return Promise.resolve('Arial');\n    }\n\n    return loadFontFace(fontFamily, `url(\"${fullFilename}\")`, {}).then(\n      loadedFace => {\n        loadedFontFamilies[resourceName] = fontFamily;\n\n        return fontFamily;\n      }\n    );\n  }\n\n  /**\n   * Get the font family name for the given font resource.\n   * The font won't be loaded.\n   * @returns The font-family to be used to render a text with the font.\n   */\n  static getFontFamily(project: gdProject, resourceName: string) {\n    if (loadedFontFamilies[resourceName]) {\n      return loadedFontFamilies[resourceName];\n    }\n\n    const fontFamily = slugs(resourceName);\n    return fontFamily;\n  }\n\n  static getInvalidPIXITexture() {\n    return invalidTexture;\n  }\n}\n","// @flow\nimport {\n  type ResourceSource,\n  type ChooseResourceFunction,\n} from '../../ResourcesList/ResourceSource.flow';\nimport { type ResourceExternalEditor } from '../../ResourcesList/ResourceExternalEditor.flow';\nimport { type EventsScope } from '../../InstructionOrExpression/EventsScope.flow';\nimport { type MessageDescriptor } from '../../Utils/i18n/MessageDescriptor.flow';\n\nexport type ParameterRenderingServiceType = {\n  components: any,\n  getParameterComponent: (type: string) => any,\n  getUserFriendlyTypeName: (rawType: string) => ?MessageDescriptor,\n};\n\ntype CommonProps = {|\n  // The parameter\n  parameterMetadata?: gdParameterMetadata,\n  onChange: string => void,\n  value: string,\n\n  // Context\n  project?: gdProject,\n  scope: EventsScope,\n  globalObjectsContainer: gdObjectsContainer,\n  objectsContainer: gdObjectsContainer,\n  isInline?: boolean,\n  onRequestClose?: () => void,\n  resourceSources?: Array<ResourceSource>,\n  onChooseResource?: ChooseResourceFunction,\n  resourceExternalEditors?: Array<ResourceExternalEditor>,\n\n  // Pass the ParameterRenderingService to allow to render nested parameters\n  parameterRenderingService?: ParameterRenderingServiceType,\n|};\n\nexport type ExpressionParameters = {|\n  getParametersCount: () => number,\n  getParameter: (index: number) => string,\n|};\n\nexport type ParameterFieldProps = {|\n  ...CommonProps,\n\n  // Instruction in which the parameter is.\n  instruction?: gdInstruction,\n  // Metadata of the instruction in which the parameter is.\n  instructionMetadata?: gdInstructionMetadata,\n  // Expression in which the parameter is.\n  expression?: ExpressionParameters,\n  // Metadata of the instruction in which the parameter is.\n  expressionMetadata?: gdExpressionMetadata,\n\n  // The index of the parameter in the instruction or expression.\n  parameterIndex?: number,\n|};\n\nexport const getParameterValueOrDefault = (\n  value: string,\n  parameterMetadata: ?gdParameterMetadata\n) => {\n  if (value) return value;\n\n  const defaultValue =\n    parameterMetadata && parameterMetadata.isOptional()\n      ? parameterMetadata.getDefaultValue()\n      : '';\n  return defaultValue;\n};\n","// @flow\nimport {\n  type EnumeratedInstructionOrExpressionMetadata,\n  type InstructionOrExpressionScope,\n} from './EnumeratedInstructionOrExpressionMetadata.js';\nimport { mapVector } from '../Utils/MapFor';\nimport flatten from 'lodash/flatten';\nconst gd = global.gd;\n\nconst GROUP_DELIMITER = '/';\n\nconst getExtensionPrefix = (extension: gdPlatformExtension): string => {\n  const allObjectsTypes = extension.getExtensionObjectsTypes();\n  const allBehaviorsTypes = extension.getBehaviorsTypes();\n\n  if (allObjectsTypes.size() > 0 || allBehaviorsTypes.size() > 0) {\n    return (\n      (extension.getName() === 'BuiltinObject'\n        ? 'Common expressions for all objects'\n        : extension.getFullName()) + GROUP_DELIMITER\n    );\n  }\n\n  return '';\n};\n\nconst enumerateExpressionMetadataMap = (\n  prefix: string,\n  expressions: gdMapStringExpressionMetadata,\n  scope: InstructionOrExpressionScope\n): Array<EnumeratedInstructionOrExpressionMetadata> => {\n  return mapVector(expressions.keys(), expressionType => {\n    const exprMetadata = expressions.get(expressionType);\n    if (!exprMetadata.isShown()) {\n      return null; // Skip hidden expressions\n    }\n\n    var parameters = [];\n    for (var i = 0; i < exprMetadata.getParametersCount(); i++) {\n      if (scope.objectMetadata && i === 0) continue;\n      if (scope.behaviorMetadata && i <= 1) continue; //Skip object and behavior parameters\n      if (exprMetadata.getParameter(i).isCodeOnly()) continue;\n\n      parameters.push(exprMetadata.getParameter(i));\n    }\n\n    return {\n      type: expressionType,\n      name: expressionType,\n      displayedName: exprMetadata.getFullName(),\n      fullGroupName: prefix + exprMetadata.getGroup(),\n      iconFilename: exprMetadata.getSmallIconFilename(),\n      metadata: exprMetadata,\n      parameters: parameters,\n      scope,\n      isPrivate: exprMetadata.isPrivate(),\n    };\n  }).filter(Boolean);\n};\n\n/** Enumerate all the free expressions available. */\nexport const enumerateFreeExpressions = (\n  type: string\n): Array<EnumeratedInstructionOrExpressionMetadata> => {\n  const allExtensions = gd\n    .asPlatform(gd.JsPlatform.get())\n    .getAllPlatformExtensions();\n\n  return flatten(\n    mapVector(allExtensions, extension => {\n      const prefix = getExtensionPrefix(extension);\n      return enumerateExpressionMetadataMap(\n        prefix,\n        type === 'string'\n          ? extension.getAllStrExpressions()\n          : extension.getAllExpressions(),\n        {\n          objectMetadata: undefined,\n          behaviorMetadata: undefined,\n        }\n      );\n    })\n  );\n};\n\n/** Enumerate the expressions available for the given object type. */\nexport const enumerateObjectExpressions = (\n  type: string,\n  objectType: string\n): Array<EnumeratedInstructionOrExpressionMetadata> => {\n  const extensionAndObjectMetadata = gd.MetadataProvider.getExtensionAndObjectMetadata(\n    gd.JsPlatform.get(),\n    objectType\n  );\n  const extension = extensionAndObjectMetadata.getExtension();\n  const objectMetadata = extensionAndObjectMetadata.getMetadata();\n  const scope = { objectMetadata };\n\n  let objectsExpressions = enumerateExpressionMetadataMap(\n    '',\n    type === 'string'\n      ? extension.getAllStrExpressionsForObject(objectType)\n      : extension.getAllExpressionsForObject(objectType),\n    scope\n  );\n\n  const baseObjectType = ''; /* An empty string means the base object */\n  if (objectType !== baseObjectType) {\n    const extensionAndObjectMetadata = gd.MetadataProvider.getExtensionAndObjectMetadata(\n      gd.JsPlatform.get(),\n      baseObjectType\n    );\n    const extension = extensionAndObjectMetadata.getExtension();\n\n    objectsExpressions = [\n      ...objectsExpressions,\n      ...enumerateExpressionMetadataMap(\n        '',\n        type === 'string'\n          ? extension.getAllStrExpressionsForObject(baseObjectType)\n          : extension.getAllExpressionsForObject(baseObjectType),\n        scope\n      ),\n    ];\n  }\n\n  return objectsExpressions;\n};\n\n/** Enumerate the expressions available for the given behavior type. */\nexport const enumerateBehaviorExpressions = (\n  type: string,\n  behaviorType: string\n): Array<EnumeratedInstructionOrExpressionMetadata> => {\n  const extensionAndBehaviorMetadata = gd.MetadataProvider.getExtensionAndBehaviorMetadata(\n    gd.JsPlatform.get(),\n    behaviorType\n  );\n  const extension = extensionAndBehaviorMetadata.getExtension();\n  const behaviorMetadata = extensionAndBehaviorMetadata.getMetadata();\n  const scope = { behaviorMetadata };\n\n  return enumerateExpressionMetadataMap(\n    '',\n    type === 'string'\n      ? extension.getAllStrExpressionsForBehavior(behaviorType)\n      : extension.getAllExpressionsForBehavior(behaviorType),\n    scope\n  );\n};\n\n/** Enumerate all the expressions available. */\nexport const enumerateAllExpressions = (\n  type: string\n): Array<EnumeratedInstructionOrExpressionMetadata> => {\n  const freeExpressions = enumerateFreeExpressions(type);\n  const objectsExpressions = [];\n  const behaviorsExpressions = [];\n\n  const allExtensions = gd\n    .asPlatform(gd.JsPlatform.get())\n    .getAllPlatformExtensions();\n  mapVector(allExtensions, extension => {\n    const prefix = getExtensionPrefix(extension);\n\n    //Objects expressions:\n    mapVector(extension.getExtensionObjectsTypes(), objectType => {\n      const objectMetadata = extension.getObjectMetadata(objectType);\n      objectsExpressions.push.apply(\n        objectsExpressions,\n        enumerateExpressionMetadataMap(\n          prefix,\n          type === 'string'\n            ? extension.getAllStrExpressionsForObject(objectType)\n            : extension.getAllExpressionsForObject(objectType),\n          { objectMetadata }\n        )\n      );\n    });\n\n    //Behaviors expressions:\n    mapVector(extension.getBehaviorsTypes(), behaviorType => {\n      const behaviorMetadata = extension.getBehaviorMetadata(behaviorType);\n      behaviorsExpressions.push.apply(\n        behaviorsExpressions,\n        enumerateExpressionMetadataMap(\n          prefix,\n          type === 'string'\n            ? extension.getAllStrExpressionsForBehavior(behaviorType)\n            : extension.getAllExpressionsForBehavior(behaviorType),\n          { behaviorMetadata }\n        )\n      );\n    });\n  });\n\n  return [...freeExpressions, ...objectsExpressions, ...behaviorsExpressions];\n};\n\nexport const filterExpressions = (\n  list: Array<EnumeratedInstructionOrExpressionMetadata>,\n  searchText: string\n): Array<EnumeratedInstructionOrExpressionMetadata> => {\n  if (!searchText) return list;\n\n  const lowercaseSearchText = searchText.toLowerCase();\n\n  const matchCritera = (\n    enumeratedExpression: EnumeratedInstructionOrExpressionMetadata\n  ) => {\n    return (\n      enumeratedExpression.type.toLowerCase().indexOf(lowercaseSearchText) !==\n      -1\n    );\n  };\n\n  const favorExactMatch = (\n    list: Array<EnumeratedInstructionOrExpressionMetadata>\n  ): Array<EnumeratedInstructionOrExpressionMetadata> => {\n    if (!searchText) {\n      return list;\n    }\n\n    for (var i = 0; i < list.length; ++i) {\n      if (list[i].type.toLowerCase() === lowercaseSearchText) {\n        const exactMatch = list[i];\n        list.splice(i, 1);\n        list.unshift(exactMatch);\n      }\n    }\n\n    return list;\n  };\n\n  // See EnumerateInstructions for a similar logic for instructions\n  return favorExactMatch(list.filter(matchCritera));\n};\n","// @flow\nimport * as React from 'react';\nimport { ListItem } from '../../../UI/List';\nimport ListIcon from '../../../UI/ListIcon';\nimport { type EnumeratedInstructionOrExpressionMetadata } from '../../../InstructionOrExpression/EnumeratedInstructionOrExpressionMetadata.js';\nimport { getInstructionListItemValue, getInstructionListItemKey } from './Keys';\n\ntype Props = {|\n  instructionOrExpressionMetadata: EnumeratedInstructionOrExpressionMetadata,\n  iconSize: number,\n  onClick: () => void,\n  selectedValue: ?string,\n|};\n\nexport const renderInstructionOrExpressionListItem = ({\n  instructionOrExpressionMetadata,\n  iconSize,\n  onClick,\n  selectedValue,\n}: Props) => {\n  return (\n    <ListItem\n      key={getInstructionListItemKey(instructionOrExpressionMetadata)}\n      selected={\n        selectedValue ===\n        getInstructionListItemValue(instructionOrExpressionMetadata.type)\n      }\n      primaryText={instructionOrExpressionMetadata.displayedName}\n      secondaryText={instructionOrExpressionMetadata.fullGroupName}\n      leftIcon={\n        <ListIcon\n          iconSize={iconSize}\n          src={instructionOrExpressionMetadata.iconFilename}\n        />\n      }\n      onClick={onClick}\n    />\n  );\n};\n","// @flow\nimport * as React from 'react';\nimport { ListItem } from '../../../UI/List';\nimport ListIcon from '../../../UI/ListIcon';\nimport { type InstructionOrExpressionTreeNode } from '../../../InstructionOrExpression/CreateTree';\nimport { type EnumeratedInstructionOrExpressionMetadata } from '../../../InstructionOrExpression/EnumeratedInstructionOrExpressionMetadata.js';\nimport Subheader from '../../../UI/Subheader';\nimport flatten from 'lodash/flatten';\nimport { getSubheaderListItemKey, getInstructionListItemValue } from './Keys';\n\ntype Props = {|\n  instructionTreeNode: InstructionOrExpressionTreeNode,\n  onChoose: (type: string, EnumeratedInstructionOrExpressionMetadata) => void,\n  iconSize: number,\n  useSubheaders?: boolean,\n  selectedValue: ?string,\n  initiallyOpenedPath?: ?Array<string>,\n\n  // Optional ref that will be filled with the selected ListItem\n  selectedItemRef?: { current: null | ListItem },\n|};\n\nexport const renderInstructionTree = ({\n  instructionTreeNode,\n  onChoose,\n  iconSize,\n  useSubheaders,\n  selectedValue,\n  selectedItemRef,\n  initiallyOpenedPath,\n}: Props): Array<React$Element<any> | null> => {\n  const [initiallyOpenedKey, ...restOfInitiallyOpenedPath] =\n    initiallyOpenedPath || [];\n\n  return flatten(\n    Object.keys(instructionTreeNode).map(key => {\n      // In theory, we should have a way to distinguish\n      // between instruction (leaf nodes) and group (nodes). We use\n      // the \"type\" properties, but this will fail if a group is called \"type\"\n      // (hence the flow errors, which are valid warnings)\n      const instructionOrGroup = instructionTreeNode[key];\n      if (!instructionOrGroup) return null;\n\n      if (typeof instructionOrGroup.type === 'string') {\n        // $FlowFixMe - see above\n        const instructionInformation: EnumeratedInstructionOrExpressionMetadata = instructionOrGroup;\n        const value = getInstructionListItemValue(instructionOrGroup.type);\n        const selected = selectedValue === value;\n        return (\n          <ListItem\n            key={value}\n            primaryText={key}\n            selected={selected}\n            leftIcon={\n              <ListIcon\n                iconSize={iconSize}\n                src={instructionInformation.iconFilename}\n              />\n            }\n            onClick={() => {\n              onChoose(instructionInformation.type, instructionInformation);\n            }}\n            ref={selected ? selectedItemRef : undefined}\n          />\n        );\n      } else {\n        // $FlowFixMe - see above\n        const groupOfInstructionInformation: InstructionOrExpressionTreeNode = instructionOrGroup;\n        if (useSubheaders) {\n          return [\n            <Subheader key={getSubheaderListItemKey(key)}>{key}</Subheader>,\n          ].concat(\n            renderInstructionTree({\n              instructionTreeNode: groupOfInstructionInformation,\n              onChoose,\n              iconSize,\n              useSubheaders: false,\n              selectedValue,\n              selectedItemRef,\n              initiallyOpenedPath: restOfInitiallyOpenedPath,\n            })\n          );\n        } else {\n          const initiallyOpen = initiallyOpenedKey === key;\n          return (\n            <ListItem\n              key={key}\n              primaryText={key}\n              autoGenerateNestedIndicator={true}\n              initiallyOpen={initiallyOpen}\n              renderNestedItems={() =>\n                renderInstructionTree({\n                  instructionTreeNode: groupOfInstructionInformation,\n                  onChoose,\n                  iconSize,\n                  selectedValue,\n                  selectedItemRef,\n                  initiallyOpenedPath: initiallyOpen\n                    ? restOfInitiallyOpenedPath\n                    : undefined,\n                })\n              }\n            />\n          );\n        }\n      }\n    })\n  );\n};\n","// @flow\nimport { type ExpressionParameters } from './ParameterFieldCommons';\nconst gd = global.gd;\n\n/**\n * Given an instruction or an expression and a parameter number,\n * return the name of the object that this parameter (usually, a \"behavior\" or a \"objectvar\") should use.\n *\n * This is an extension to ParameterMetadataTools.cpp and ParameterMetadataTools.h.\n * It's only here to ease to search of the object name in fields like BehaviorField or\n * ObjectVariableField.\n */\nexport const getLastObjectParameterValue = ({\n  instructionMetadata,\n  instruction,\n  expressionMetadata,\n  expression,\n  parameterIndex,\n}: {|\n  instructionMetadata: ?gdInstructionMetadata,\n  instruction: ?gdInstruction,\n  expressionMetadata: ?gdExpressionMetadata,\n  expression: ?ExpressionParameters,\n  parameterIndex: ?number,\n|}): ?string => {\n  if (parameterIndex === undefined || parameterIndex == null) {\n    // No parameter index given: the parameter is not even in a list of parameters\n    return null;\n  }\n\n  let objectName = null;\n  if (instructionMetadata && instruction) {\n    const objectParameterIndex = gd.ParameterMetadataTools.getObjectParameterIndexFor(\n      instructionMetadata.getParameters(),\n      parameterIndex\n    );\n    if (\n      objectParameterIndex >= 0 &&\n      objectParameterIndex < instruction.getParametersCount()\n    ) {\n      objectName = instruction.getParameter(objectParameterIndex);\n    }\n  } else if (expressionMetadata && expression) {\n    const objectParameterIndex = gd.ParameterMetadataTools.getObjectParameterIndexFor(\n      expressionMetadata.getParameters(),\n      parameterIndex\n    );\n    if (\n      objectParameterIndex >= 0 &&\n      objectParameterIndex < expression.getParametersCount()\n    ) {\n      objectName = expression.getParameter(objectParameterIndex);\n    }\n  }\n\n  return objectName;\n};\n","// @flow\n\nexport const shortenString = (str: string, maxLength: number) => {\n  return str.length > maxLength ? str.substring(0, maxLength) + '...' : str;\n};\n\nexport const makeNonBreakable = (str: string) => {\n  return str.replace(/\\s/g, '\\xa0'); // Non-breakable space is char 0xa0 (160 dec)\n};\n","// @flow\nimport * as React from 'react';\nimport {\n  DragSource,\n  type DragSourceMonitor,\n  type DragSourceConnector,\n  type ConnectDragSource,\n  DropTarget,\n  type DropTargetMonitor,\n  type DropTargetConnector,\n  type ConnectDropTarget,\n} from 'react-dnd';\n\ntype Props<DraggedItemType> = {|\n  children: ({\n    connectDragSource: ConnectDragSource,\n    connectDropTarget: ConnectDropTarget,\n    isOver: boolean,\n    canDrop: boolean,\n  }) => ?React.Node,\n  beginDrag: () => DraggedItemType,\n  canDrag?: (item: DraggedItemType) => boolean,\n  canDrop: (item: DraggedItemType) => boolean,\n  drop: () => void,\n|};\n\ntype DragSourceProps = {|\n  connectDragSource: ConnectDragSource,\n|};\n\ntype DropTargetProps = {|\n  connectDropTarget: ConnectDropTarget,\n  isOver: boolean,\n  canDrop: boolean,\n|};\n\ntype InnerDragSourceAndDropTargetProps<DraggedItemType> = {|\n  ...Props<DraggedItemType>,\n  ...DragSourceProps,\n  ...DropTargetProps,\n|};\n\nexport const makeDragSourceAndDropTarget = <DraggedItemType>(\n  reactDndType: string\n): ((Props<DraggedItemType>) => React.Node) => {\n  const sourceSpec = {\n    canDrag(props: Props<DraggedItemType>, monitor: DragSourceMonitor) {\n      const item = monitor.getItem();\n      const canDrag = props.canDrag || null;\n      if (canDrag) return canDrag(item);\n      return true;\n    },\n    beginDrag(props: InnerDragSourceAndDropTargetProps<DraggedItemType>) {\n      return props.beginDrag();\n    },\n  };\n\n  function sourceCollect(\n    connect: DragSourceConnector,\n    monitor: DragSourceMonitor\n  ): DragSourceProps {\n    return {\n      connectDragSource: connect.dragSource(),\n    };\n  }\n\n  const targetSpec = {\n    canDrop(props: Props<DraggedItemType>, monitor: DropTargetMonitor) {\n      const item = monitor.getItem();\n      return item && props.canDrop(item);\n    },\n    drop(props: Props<DraggedItemType>, monitor: DropTargetMonitor) {\n      if (monitor.didDrop()) {\n        return; // Drop already handled by another target\n      }\n      props.drop();\n    },\n  };\n\n  function targetCollect(\n    connect: DropTargetConnector,\n    monitor: DropTargetMonitor\n  ): DropTargetProps {\n    return {\n      connectDropTarget: connect.dropTarget(),\n      isOver: monitor.isOver({ shallow: true }),\n      canDrop: monitor.canDrop(),\n    };\n  }\n\n  const InnerDragSourceAndDropTarget = DragSource(\n    reactDndType,\n    sourceSpec,\n    sourceCollect\n  )(\n    DropTarget(reactDndType, targetSpec, targetCollect)(\n      ({ children, connectDragSource, connectDropTarget, isOver, canDrop }) => {\n        return children({\n          connectDragSource,\n          connectDropTarget,\n          isOver,\n          canDrop,\n        });\n      }\n    )\n  );\n\n  return (props: Props<DraggedItemType>) => (\n    <InnerDragSourceAndDropTarget {...props} />\n  );\n};\n","// @flow\nimport Clipboard from '../Utils/Clipboard';\nimport {\n  type SelectionState,\n  getSelectedEvents,\n  hasEventSelected,\n  getSelectedEventContexts,\n  hasInstructionSelected,\n  hasInstructionsListSelected,\n  getSelectedInstructionsContexts,\n  getSelectedInstructionsListsContexts,\n  type InstructionsListContext,\n} from './SelectionHandler';\nimport {\n  serializeToJSObject,\n  unserializeFromJSObject,\n} from '../Utils/Serializer';\nconst gd = global.gd;\n\nexport const CLIPBOARD_KIND = 'EventsAndInstructions';\n\nexport const hasClipboardEvents = () => {\n  return (\n    Clipboard.has(CLIPBOARD_KIND) &&\n    Clipboard.get(CLIPBOARD_KIND).eventsCount > 0\n  );\n};\n\nexport const hasClipboardConditions = () => {\n  return (\n    Clipboard.has(CLIPBOARD_KIND) &&\n    Clipboard.get(CLIPBOARD_KIND).conditionsCount > 0\n  );\n};\n\nexport const hasClipboardActions = () => {\n  return (\n    Clipboard.has(CLIPBOARD_KIND) &&\n    Clipboard.get(CLIPBOARD_KIND).actionsCount > 0\n  );\n};\n\nexport const copySelectionToClipboard = (selection: SelectionState) => {\n  const eventsList = new gd.EventsList();\n  const actionsList = new gd.InstructionsList();\n  const conditionsList = new gd.InstructionsList();\n\n  getSelectedEvents(selection).forEach(event =>\n    eventsList.insertEvent(event, eventsList.getEventsCount())\n  );\n  getSelectedInstructionsContexts(selection).forEach(instructionContext => {\n    if (instructionContext.isCondition) {\n      conditionsList.insert(\n        instructionContext.instruction,\n        conditionsList.size()\n      );\n    } else {\n      actionsList.insert(instructionContext.instruction, actionsList.size());\n    }\n  });\n\n  Clipboard.set(CLIPBOARD_KIND, {\n    eventsList: serializeToJSObject(eventsList),\n    eventsCount: eventsList.getEventsCount(),\n    actionsList: serializeToJSObject(actionsList),\n    actionsCount: actionsList.size(),\n    conditionsList: serializeToJSObject(conditionsList),\n    conditionsCount: conditionsList.size(),\n  });\n\n  eventsList.delete();\n  actionsList.delete();\n  conditionsList.delete();\n};\n\nexport const pasteEventsFromClipboardInSelection = (\n  project: gdProject,\n  selection: SelectionState\n): boolean => {\n  if (!hasEventSelected(selection) || !hasClipboardEvents()) return false;\n\n  const eventsList = new gd.EventsList();\n  unserializeFromJSObject(\n    eventsList,\n    Clipboard.get(CLIPBOARD_KIND).eventsList,\n    'unserializeFrom',\n    project\n  );\n  getSelectedEventContexts(selection).forEach(eventContext => {\n    eventContext.eventsList.insertEvents(\n      eventsList,\n      0,\n      eventsList.getEventsCount(),\n      eventContext.indexInList\n    );\n  });\n  eventsList.delete();\n\n  return true;\n};\n\nexport const pasteInstructionsFromClipboardInSelection = (\n  project: gdProject,\n  selection: SelectionState\n): boolean => {\n  if (\n    (!hasInstructionSelected(selection) &&\n      !hasInstructionsListSelected(selection)) ||\n    (!hasClipboardConditions() && !hasClipboardActions())\n  )\n    return false;\n\n  const clipboardContent = Clipboard.get(CLIPBOARD_KIND);\n  const actionsList = new gd.InstructionsList();\n  const conditionsList = new gd.InstructionsList();\n  unserializeFromJSObject(\n    actionsList,\n    clipboardContent.actionsList,\n    'unserializeFrom',\n    project\n  );\n  unserializeFromJSObject(\n    conditionsList,\n    clipboardContent.conditionsList,\n    'unserializeFrom',\n    project\n  );\n  getSelectedInstructionsContexts(selection).forEach(instructionContext => {\n    if (instructionContext.isCondition) {\n      instructionContext.instrsList.insertInstructions(\n        conditionsList,\n        0,\n        conditionsList.size(),\n        instructionContext.indexInList\n      );\n    } else {\n      instructionContext.instrsList.insertInstructions(\n        actionsList,\n        0,\n        actionsList.size(),\n        instructionContext.indexInList\n      );\n    }\n  });\n  getSelectedInstructionsListsContexts(selection).forEach(\n    instructionsListContext => {\n      if (instructionsListContext.isCondition) {\n        instructionsListContext.instrsList.insertInstructions(\n          conditionsList,\n          0,\n          conditionsList.size(),\n          instructionsListContext.instrsList.size()\n        );\n      } else {\n        instructionsListContext.instrsList.insertInstructions(\n          actionsList,\n          0,\n          actionsList.size(),\n          instructionsListContext.instrsList.size()\n        );\n      }\n    }\n  );\n  conditionsList.delete();\n  actionsList.delete();\n\n  return true;\n};\n\nexport const pasteInstructionsFromClipboardInInstructionsList = (\n  project: gdProject,\n  instructionsListContext: InstructionsListContext\n) => {\n  if (!hasClipboardConditions() && !hasClipboardActions()) return false;\n\n  const clipboardContent = Clipboard.get(CLIPBOARD_KIND);\n  const actionsList = new gd.InstructionsList();\n  const conditionsList = new gd.InstructionsList();\n  unserializeFromJSObject(\n    actionsList,\n    clipboardContent.actionsList,\n    'unserializeFrom',\n    project\n  );\n  unserializeFromJSObject(\n    conditionsList,\n    clipboardContent.conditionsList,\n    'unserializeFrom',\n    project\n  );\n\n  if (instructionsListContext.isCondition) {\n    instructionsListContext.instrsList.insertInstructions(\n      conditionsList,\n      0,\n      conditionsList.size(),\n      instructionsListContext.instrsList.size()\n    );\n  } else {\n    instructionsListContext.instrsList.insertInstructions(\n      actionsList,\n      0,\n      actionsList.size(),\n      instructionsListContext.instrsList.size()\n    );\n  }\n  conditionsList.delete();\n  actionsList.delete();\n\n  return true;\n};\n","// @flow\nimport * as React from 'react';\nimport {\n  DropTarget,\n  type DropTargetMonitor,\n  type DropTargetConnector,\n  type ConnectDropTarget,\n} from 'react-dnd';\n\ntype Props<DraggedItemType> = {|\n  children: ({\n    connectDropTarget: ConnectDropTarget,\n    isOver: boolean,\n    canDrop: boolean,\n  }) => ?React.Node,\n  canDrop: (item: DraggedItemType) => boolean,\n  hover?: (monitor: DropTargetMonitor) => void,\n  drop: (monitor: DropTargetMonitor) => void,\n|};\n\ntype DropTargetProps = {|\n  connectDropTarget: ConnectDropTarget,\n  isOver: boolean,\n  canDrop: boolean,\n|};\n\nexport const makeDropTarget = <DraggedItemType>(\n  reactDndType: string\n): ((Props<DraggedItemType>) => React.Node) => {\n  const targetSpec = {\n    canDrop(props: Props<DraggedItemType>, monitor: DropTargetMonitor) {\n      const item = monitor.getItem();\n      return item && props.canDrop(item);\n    },\n    hover(props: Props<DraggedItemType>, monitor: DropTargetMonitor) {\n      if (props.hover) props.hover(monitor);\n    },\n    drop(props: Props<DraggedItemType>, monitor: DropTargetMonitor) {\n      if (monitor.didDrop()) {\n        return; // Drop already handled by another target\n      }\n      props.drop(monitor);\n    },\n  };\n\n  function targetCollect(\n    connect: DropTargetConnector,\n    monitor: DropTargetMonitor\n  ): DropTargetProps {\n    return {\n      connectDropTarget: connect.dropTarget(),\n      isOver: monitor.isOver({ shallow: true }),\n      canDrop: monitor.canDrop(),\n    };\n  }\n\n  const InnerDropTarget = DropTarget(reactDndType, targetSpec, targetCollect)(\n    ({ children, connectDropTarget, isOver, canDrop }) => {\n      return children({\n        connectDropTarget,\n        isOver,\n        canDrop,\n      });\n    }\n  );\n\n  return (props: Props<DraggedItemType>) => <InnerDropTarget {...props} />;\n};\n","// @flow\nimport React from 'react';\nimport { type Tags, removeTag } from '../Utils/TagsHelper';\nimport Chip from '@material-ui/core/Chip';\n\nconst styles = {\n  chipContainer: {\n    display: 'flex',\n    overflowX: 'auto',\n    margin: 4,\n  },\n  chip: {\n    marginLeft: 2,\n    marginRight: 2,\n  },\n};\n\ntype Props = {|\n  tags: Tags,\n  onChange: Tags => void,\n|};\n\nexport default ({ tags, onChange }: Props) => {\n  if (!tags.length) return null;\n\n  return (\n    <div style={styles.chipContainer}>\n      {tags.map(tag => (\n        <Chip\n          key={tag}\n          size=\"small\"\n          style={styles.chip}\n          onDelete={() => onChange(removeTag(tags, tag))}\n          label={tag}\n        />\n      ))}\n    </div>\n  );\n};\n","// @flow\nimport * as React from 'react';\nimport { Line } from '../Grid';\n\ntype Props<TColumnName> = {|\n  columnsRenderer: { [TColumnName]: () => React.Node },\n  getColumns: () => Array<TColumnName>,\n|};\n\nexport const SelectColumns = (props: Props<string>) => {\n  const columns = props.getColumns();\n  return (\n    <Line noMargin expand>\n      {columns.map(columnName =>\n        props.columnsRenderer[columnName]\n          ? props.columnsRenderer[columnName]()\n          : null\n      )}\n    </Line>\n  );\n};\n","// @flow\nimport * as React from 'react';\nimport Button from '@material-ui/core/Button';\nimport { Spacer } from './Grid';\n\n// We support a subset of the props supported by Material-UI v0.x FlatButton\n// They should be self descriptive - refer to Material UI docs otherwise.\ntype Props = {|\n  label: React.Node,\n  onClick: ?() => void,\n  primary?: boolean,\n  disabled?: boolean,\n  keyboardFocused?: boolean,\n  fullWidth?: boolean,\n  icon?: React.Node,\n  style?: {|\n    marginTop?: number,\n    marginBottom?: number,\n    marginLeft?: number,\n    marginRight?: number,\n    margin?: number,\n    flexShrink?: 0,\n  |},\n  target?: '_blank',\n|};\n\n/**\n * A \"flat\" button based on Material-UI button.\n */\nexport default class FlatButton extends React.Component<Props, {||}> {\n  render() {\n    const { label, primary, icon, keyboardFocused, ...otherProps } = this.props;\n\n    // In theory, focus ripple is only shown after a keyboard interaction\n    // (see https://github.com/mui-org/material-ui/issues/12067). However, as\n    // it's important to get focus right in the whole app, make the ripple\n    // always visible to be sure we're getting focusing right.\n    const focusRipple = true;\n\n    return (\n      <Button\n        size=\"small\"\n        color={primary ? 'primary' : 'default'}\n        autoFocus={keyboardFocused}\n        focusRipple={focusRipple}\n        {...otherProps}\n      >\n        {icon}\n        {icon && <Spacer />}\n        {label}\n      </Button>\n    );\n  }\n}\n","// @flow\nimport { serializeToJSObject, unserializeFromJSObject } from './Serializer';\n\n// Tools function to keep track of the history of changes made\n// on a serializable object from libGD.js\n\nexport type HistoryState = {|\n  undoHistory: Array<Object>,\n  current: Object,\n  redoHistory: Array<Object>,\n  maxSize: number,\n|};\n\n/**\n * Return the initial state of the history\n * @param {*} serializableObject\n */\nexport const getHistoryInitialState = (\n  serializableObject: gdSerializable,\n  { historyMaxSize }: { historyMaxSize: number }\n): HistoryState => {\n  return {\n    undoHistory: [],\n    current: serializeToJSObject(serializableObject),\n    redoHistory: [],\n    maxSize: historyMaxSize,\n  };\n};\n\n/**\n * Return true if redo can be applied for the given history\n * @param {*} history\n */\nexport const canRedo = (history: HistoryState): boolean => {\n  return !!history.redoHistory.length;\n};\n\n/**\n * Return true if undo can be applied for the given history\n * @param {*} history\n */\nexport const canUndo = (history: HistoryState): boolean => {\n  return !!history.undoHistory.length;\n};\n\n/**\n * Save a new state of the given serializableObject to the history\n * @param {*} history\n * @param {*} serializableObject\n */\nexport const saveToHistory = (\n  history: HistoryState,\n  serializableObject: gdSerializable\n): HistoryState => {\n  const newUndoHistory = [...history.undoHistory, history.current];\n  if (newUndoHistory.length > history.maxSize) {\n    newUndoHistory.splice(0, newUndoHistory.length - history.maxSize);\n  }\n\n  return {\n    undoHistory: newUndoHistory,\n    current: serializeToJSObject(serializableObject),\n    redoHistory: [],\n    maxSize: history.maxSize,\n  };\n};\n\n/**\n * Update the serializableObject to undo the last changes.\n * /!\\ This mutates the serializableObject and there could be objects owned by it\n * deleted or becoming invalid. Be sure to drop/refresh any reference to them.\n *\n * @param {*} history\n * @param {*} serializableObject\n */\nexport const undo = (\n  history: HistoryState,\n  serializableObject: gdSerializable,\n  project: ?gdProject = undefined\n): HistoryState => {\n  if (!history.undoHistory.length) {\n    return history;\n  }\n\n  const newCurrent = history.undoHistory[history.undoHistory.length - 1];\n  unserializeFromJSObject(\n    serializableObject,\n    newCurrent,\n    'unserializeFrom',\n    project\n  );\n\n  return {\n    undoHistory: history.undoHistory.slice(0, -1),\n    current: newCurrent,\n    redoHistory: [...history.redoHistory, history.current],\n    maxSize: history.maxSize,\n  };\n};\n\n/**\n * Update the serializableObject to undo the last changes.\n * /!\\ This mutates the serializableObject and there could be objects owned by it\n * deleted or becoming invalid. Be sure to drop/refresh any reference to them.\n *\n * @param {*} history\n * @param {*} serializableObject\n */\nexport const redo = (\n  history: HistoryState,\n  serializableObject: gdSerializable,\n  project: ?gdProject = undefined\n): HistoryState => {\n  if (!history.redoHistory.length) {\n    return history;\n  }\n\n  const newCurrent = history.redoHistory[history.redoHistory.length - 1];\n  unserializeFromJSObject(\n    serializableObject,\n    newCurrent,\n    'unserializeFrom',\n    project\n  );\n\n  return {\n    undoHistory: [...history.undoHistory, history.current],\n    current: newCurrent,\n    redoHistory: history.redoHistory.slice(0, -1),\n    maxSize: history.maxSize,\n  };\n};\n","// @flow\nimport { unserializeFromJSObject } from '../../Utils/Serializer';\nimport { mapVector } from '../../Utils/MapFor';\nimport { getFreeEventsFunctionType } from '../../EventsFunctionsExtensionsLoader';\nimport getObjectGroupByName from '../../Utils/GetObjectGroupByName';\nconst gd = global.gd;\n\n/**\n * Set up an events function with the given serialized events,\n * so that the function contains these events, expecting the objects\n * as parameters.\n */\nexport const setupFunctionFromEvents = ({\n  globalObjectsContainer,\n  objectsContainer,\n  serializedEvents,\n  project,\n  eventsFunction,\n}: {\n  project: gdProject,\n  globalObjectsContainer: gdObjectsContainer,\n  objectsContainer: gdObjectsContainer,\n  serializedEvents: Object,\n  eventsFunction: gdEventsFunction,\n}) => {\n  // Set up the function\n  eventsFunction.setName('MyFunction');\n  eventsFunction.setFunctionType(gd.EventsFunction.Action);\n  unserializeFromJSObject(\n    eventsFunction.getEvents(),\n    serializedEvents,\n    'unserializeFrom',\n    project\n  );\n\n  // Analyze events...\n  const eventsContextAnalyzer = new gd.EventsContextAnalyzer(\n    gd.JsPlatform.get(),\n    globalObjectsContainer,\n    objectsContainer\n  );\n  eventsContextAnalyzer.launch(eventsFunction.getEvents());\n  const eventsContext = eventsContextAnalyzer.getEventsContext();\n\n  // ...to extract objects and groups\n  const objectOrGroupNames: Array<string> = eventsContext\n    .getReferencedObjectOrGroupNames()\n    .toNewVectorString()\n    .toJSArray();\n  const objectNames: Array<string> = eventsContext\n    .getObjectNames()\n    .toNewVectorString()\n    .toJSArray();\n  const groups: Array<gdObjectGroup> = objectOrGroupNames\n    // Filter to only keep groups\n    .filter(\n      (objectOrGroupName: string) =>\n        objectNames.indexOf(objectOrGroupName) === -1\n    )\n    .map(groupName =>\n      getObjectGroupByName(globalObjectsContainer, objectsContainer, groupName)\n    )\n    .filter(Boolean);\n\n  // Compute what the parameters should be:\n  // 1) The groups, but only the ones that have no object directly referenced.\n  const parameterGroups: Array<gdObjectGroup> = groups.filter(group => {\n    return !objectOrGroupNames.some(referencedObjectOrGroupName =>\n      group.find(referencedObjectOrGroupName)\n    );\n  });\n  const parameterGroupNames: Array<string> = parameterGroups.map(group =>\n    group.getName()\n  );\n\n  // 2) The objects, but only the ones that are already in the groups in parameters\n  const parameterObjectNames: Array<string> = objectNames.filter(objectName => {\n    return !parameterGroups.some(group => group.find(objectName));\n  });\n\n  // Create parameters for these objects (or these groups without any object directly referenced)\n  const parameters = eventsFunction.getParameters();\n  parameters.clear();\n  [...parameterGroupNames, ...parameterObjectNames].forEach(objectName => {\n    const newParameter = new gd.ParameterMetadata();\n    newParameter.setType('objectList');\n    newParameter.setName(objectName);\n    newParameter.setExtraInfo(\n      gd.getTypeOfObject(\n        globalObjectsContainer,\n        objectsContainer,\n        objectName,\n        true\n      )\n    );\n    parameters.push_back(newParameter);\n\n    const behaviorNames: Array<string> = eventsContext\n      .getBehaviorNamesOfObjectOrGroup(objectName)\n      .toNewVectorString()\n      .toJSArray();\n\n    behaviorNames.forEach(behaviorName => {\n      const newParameter = new gd.ParameterMetadata();\n      newParameter.setType('behavior');\n      newParameter.setName(behaviorName);\n      newParameter.setExtraInfo(\n        gd.getTypeOfBehavior(\n          globalObjectsContainer,\n          objectsContainer,\n          behaviorName\n        )\n      );\n      parameters.push_back(newParameter);\n    });\n  });\n\n  // Import groups that are used in events, but are not in parameters,\n  // inside the events function groups.\n  groups\n    .filter(group => !parameterGroupNames.includes(group.getName()))\n    .forEach(group => {\n      if (group) {\n        eventsFunction.getObjectGroups().insert(group, 0);\n      }\n    });\n\n  eventsContextAnalyzer.delete();\n};\n\n/**\n * Create an instruction to call the given events function\n */\nexport const createNewInstructionForEventsFunction = (\n  extensionName: string,\n  eventsFunction: gdEventsFunction\n): gdInstruction => {\n  const action = new gd.Instruction(); //Add a simple action\n  const runtimeSceneParameterCount = 1; // By convention, first parameter is always the Runtime Scene.\n  const contextParameterCount = 1; // By convention, latest parameter is always the eventsFunctionContext of the calling function (if any).\n\n  action.setType(getFreeEventsFunctionType(extensionName, eventsFunction));\n  action.setParametersCount(\n    eventsFunction.getParameters().size() +\n      runtimeSceneParameterCount +\n      contextParameterCount\n  );\n\n  mapVector(eventsFunction.getParameters(), (parameterMetadata, index) => {\n    action.setParameter(\n      runtimeSceneParameterCount + index,\n      parameterMetadata.getName()\n    );\n  });\n\n  return action;\n};\n\n/**\n * Validate that a function name is valid.\n */\nexport const validateEventsFunctionName = (functionName: string) => {\n  return gd.Project.validateName(functionName);\n};\n\n/**\n * Validate that an events functions extension name is valid.\n */\nexport const validateExtensionName = (extensionName: string) => {\n  return gd.Project.validateName(extensionName);\n};\n\n/**\n * Validate that an events functions extension name is unique in a project.\n */\nexport const validateExtensionNameUniqueness = (\n  project: gdProject,\n  extensionName: string\n) => {\n  return !project.hasEventsFunctionsExtensionNamed(extensionName);\n};\n\n/**\n * Validate that an events function name is unique in a project extension.\n */\nexport const validateEventsFunctionNameUniqueness = (\n  project: gdProject,\n  extensionName: string,\n  eventsFunction: gdEventsFunction\n) => {\n  if (project.hasEventsFunctionsExtensionNamed(extensionName)) {\n    const eventsFunctionsExtension = project.getEventsFunctionsExtension(\n      extensionName\n    );\n\n    return !eventsFunctionsExtension.hasEventsFunctionNamed(\n      eventsFunction.getName()\n    );\n  }\n\n  return true;\n};\n\n/**\n * Return true if the events function can be added to the given extension\n * without any conflict/invalid name.\n */\nexport const canCreateEventsFunction = (\n  project: gdProject,\n  extensionName: string,\n  eventsFunction: gdEventsFunction\n) => {\n  return (\n    extensionName !== '' &&\n    validateExtensionName(extensionName) &&\n    eventsFunction.getName() !== '' &&\n    validateEventsFunctionName(eventsFunction.getName()) &&\n    validateEventsFunctionNameUniqueness(\n      project,\n      extensionName,\n      eventsFunction\n    ) &&\n    eventsFunction.getFullName() !== '' &&\n    eventsFunction.getSentence() !== ''\n  );\n};\n\n/**\n * Return true if the function is considered to have more parameters than usual.\n */\nexport const functionHasLotsOfParameters = (\n  eventsFunction: gdEventsFunction\n) => {\n  return eventsFunction.getParameters().size() > 7;\n};\n","// @flow\nimport { Trans } from '@lingui/macro';\nimport { t } from '@lingui/macro';\nimport { I18n } from '@lingui/react';\nimport { type I18n as I18nType } from '@lingui/core';\nimport * as React from 'react';\nimport { Column, Line, Spacer } from '../../UI/Grid';\nimport SelectField from '../../UI/SelectField';\nimport SelectOption from '../../UI/SelectOption';\nimport { mapVector } from '../../Utils/MapFor';\nimport RaisedButton from '../../UI/RaisedButton';\nimport IconButton from '../../UI/IconButton';\nimport EmptyMessage from '../../UI/EmptyMessage';\nimport ElementWithMenu from '../../UI/Menu/ElementWithMenu';\nimport MoreVert from '@material-ui/icons/MoreVert';\nimport HelpButton from '../../UI/HelpButton';\nimport SemiControlledTextField from '../../UI/SemiControlledTextField';\nimport MiniToolbar, { MiniToolbarText } from '../../UI/MiniToolbar';\nimport { showWarningBox } from '../../UI/Messages/MessageBox';\nimport ObjectTypeSelector from '../../ObjectTypeSelector';\nimport BehaviorTypeSelector from '../../BehaviorTypeSelector';\nimport {\n  isBehaviorLifecycleEventsFunction,\n  isExtensionLifecycleEventsFunction,\n} from '../../EventsFunctionsExtensionsLoader/MetadataDeclarationHelpers';\nimport { getParametersIndexOffset } from '../../EventsFunctionsExtensionsLoader';\nimport Add from '@material-ui/icons/Add';\nimport DismissableAlertMessage from '../../UI/DismissableAlertMessage';\n\nconst gd = global.gd;\n\ntype Props = {|\n  project: gdProject,\n  eventsFunction: gdEventsFunction,\n  eventsBasedBehavior: ?gdEventsBasedBehavior,\n  onParametersUpdated: () => void,\n  helpPagePath?: string,\n  freezeParameters?: boolean,\n|};\n\ntype State = {|\n  longDescriptionShownIndexes: { [number]: boolean },\n|};\n\nconst styles = {\n  parametersContainer: {\n    flex: 1,\n  },\n};\n\nconst validateParameterName = (i18n: I18nType, newName: string) => {\n  if (!newName) {\n    showWarningBox(\n      i18n._(\n        t`The name of a parameter can not be empty. Enter a name for the parameter or you won't be able to use it.`\n      )\n    );\n    return false;\n  }\n\n  if (!gd.Project.validateName(newName)) {\n    showWarningBox(\n      i18n._(\n        t`This name is invalid. Only use alphanumeric characters (0-9, a-z) and underscores. Digits are not allowed as the first character.`\n      )\n    );\n    return false;\n  }\n\n  return true;\n};\n\nexport default class EventsFunctionParametersEditor extends React.Component<\n  Props,\n  State\n> {\n  state = {\n    longDescriptionShownIndexes: {},\n  };\n\n  _addParameter = () => {\n    const { eventsFunction } = this.props;\n    const parameters = eventsFunction.getParameters();\n\n    const newParameter = new gd.ParameterMetadata();\n    newParameter.setType('objectList');\n    parameters.push_back(newParameter);\n    newParameter.delete();\n    this.forceUpdate();\n    this.props.onParametersUpdated();\n  };\n\n  _removeParameter = (index: number) => {\n    const { eventsFunction } = this.props;\n    const parameters = eventsFunction.getParameters();\n\n    gd.removeFromVectorParameterMetadata(parameters, index);\n    this.forceUpdate();\n    this.props.onParametersUpdated();\n  };\n\n  _addLongDescription = (index: number) => {\n    // Show the long description field\n    this.setState(state => ({\n      longDescriptionShownIndexes: {\n        ...state.longDescriptionShownIndexes,\n        [index]: true,\n      },\n    }));\n  };\n\n  _removeLongDescription = (index: number) => {\n    const { eventsFunction } = this.props;\n    const parameters = eventsFunction.getParameters();\n    const parameter = parameters.at(index);\n\n    // Reset the long description and hide the field\n    parameter.setLongDescription('');\n    this.setState(state => ({\n      longDescriptionShownIndexes: {\n        ...state.longDescriptionShownIndexes,\n        [index]: false,\n      },\n    }));\n  };\n\n  render() {\n    const {\n      project,\n      eventsFunction,\n      eventsBasedBehavior,\n      freezeParameters,\n      helpPagePath,\n    } = this.props;\n\n    const parameters = eventsFunction.getParameters();\n    const isABehaviorLifecycleEventsFunction =\n      !!eventsBasedBehavior &&\n      isBehaviorLifecycleEventsFunction(eventsFunction.getName());\n    if (isABehaviorLifecycleEventsFunction) {\n      return (\n        <EmptyMessage>\n          <Trans>\n            This is a \"lifecycle method\". It will be called automatically by the\n            game engine and has two parameters: \"Object\" (the object the\n            behavior is acting on) and \"Behavior\" (the behavior itself).\n          </Trans>\n        </EmptyMessage>\n      );\n    }\n    const isAnExtensionLifecycleEventsFunction =\n      !eventsBasedBehavior &&\n      isExtensionLifecycleEventsFunction(eventsFunction.getName());\n    if (isAnExtensionLifecycleEventsFunction) {\n      return (\n        <React.Fragment>\n          <DismissableAlertMessage\n            kind=\"info\"\n            identifier=\"lifecycle-events-function-included-only-if-extension-used\"\n          >\n            <Trans>\n              For the lifecycle functions to be executed, you need the extension\n              to be used in the game, either by having at least one action,\n              condition or expression used, or a behavior of the extension added\n              to an object. Otherwise, the extension won't be included in the\n              game.\n            </Trans>\n          </DismissableAlertMessage>\n          <EmptyMessage>\n            <Trans>\n              This is a \"lifecycle function\". It will be called automatically by\n              the game engine. It has no parameters. Only global objects can be\n              used as the events will be run for all scenes in your game.\n            </Trans>\n          </EmptyMessage>\n        </React.Fragment>\n      );\n    }\n\n    const isParameterDisabled = index => {\n      return !!freezeParameters || (!!eventsBasedBehavior && index < 2);\n    };\n    const isParameterDescriptionAndTypeShown = index => {\n      // The first two parameters of a behavior method should not be changed at all,\n      // so we even hide their description and type to avoid cluttering the interface.\n      return !eventsBasedBehavior || index >= 2;\n    };\n    const isParameterLongDescriptionShown = (parameter, index): boolean => {\n      if (!isParameterDescriptionAndTypeShown(index)) return false;\n\n      return (\n        !!parameter.getLongDescription() ||\n        !!this.state.longDescriptionShownIndexes[index]\n      );\n    };\n    const parametersIndexOffset = getParametersIndexOffset(\n      !!eventsBasedBehavior\n    );\n\n    return (\n      <I18n>\n        {({ i18n }) => (\n          <Column noMargin>\n            <Line noMargin>\n              <div style={styles.parametersContainer}>\n                {mapVector(\n                  parameters,\n                  (parameter: gdParameterMetadata, i: number) => (\n                    <React.Fragment key={i}>\n                      <MiniToolbar>\n                        <MiniToolbarText>\n                          <Trans>Parameter #{i + parametersIndexOffset}:</Trans>\n                        </MiniToolbarText>\n                        <Column expand noMargin>\n                          <SemiControlledTextField\n                            commitOnBlur\n                            margin=\"none\"\n                            hintText={t`Enter the parameter name (mandatory)`}\n                            value={parameter.getName()}\n                            onChange={text => {\n                              if (!validateParameterName(i18n, text)) return;\n\n                              parameter.setName(text);\n                              this.forceUpdate();\n                              this.props.onParametersUpdated();\n                            }}\n                            disabled={isParameterDisabled(i)}\n                            fullWidth\n                          />\n                        </Column>\n                        <ElementWithMenu\n                          element={\n                            <IconButton>\n                              <MoreVert />\n                            </IconButton>\n                          }\n                          buildMenuTemplate={() => [\n                            {\n                              label: i18n._(t`Delete`),\n                              enabled: !isParameterDisabled(i),\n                              click: () => this._removeParameter(i),\n                            },\n                            { type: 'separator' },\n                            {\n                              label: i18n._(t`Add a Long Description`),\n                              enabled: !isParameterDisabled(i),\n                              visible: !isParameterLongDescriptionShown(\n                                parameter,\n                                i\n                              ),\n                              click: () => this._addLongDescription(i),\n                            },\n                            {\n                              label: i18n._(t`Remove the Long Description`),\n                              enabled: !isParameterDisabled(i),\n                              visible: isParameterLongDescriptionShown(\n                                parameter,\n                                i\n                              ),\n                              click: () => this._removeLongDescription(i),\n                            },\n                          ]}\n                        />\n                      </MiniToolbar>\n                      <Line expand noMargin>\n                        {isParameterDescriptionAndTypeShown(i) && (\n                          <Column expand>\n                            <SelectField\n                              floatingLabelText={<Trans>Type</Trans>}\n                              value={parameter.getType()}\n                              onChange={(e, i, value: string) => {\n                                parameter.setType(value);\n                                this.forceUpdate();\n                                this.props.onParametersUpdated();\n                              }}\n                              disabled={isParameterDisabled(i)}\n                              fullWidth\n                            >\n                              <SelectOption\n                                value=\"objectList\"\n                                primaryText={t`Objects`}\n                              />\n                              <SelectOption\n                                value=\"behavior\"\n                                primaryText={t`Behavior (for the previous object)`}\n                              />\n                              <SelectOption\n                                value=\"expression\"\n                                primaryText={t`Number`}\n                              />\n                              <SelectOption\n                                value=\"string\"\n                                primaryText={t`String (text)`}\n                              />\n                              <SelectOption\n                                value=\"key\"\n                                primaryText={t`Keyboard Key (text)`}\n                              />\n                              <SelectOption\n                                value=\"mouse\"\n                                primaryText={t`Mouse button (text)`}\n                              />\n                              <SelectOption\n                                value=\"color\"\n                                primaryText={t`Color (text)`}\n                              />\n                              <SelectOption\n                                value=\"layer\"\n                                primaryText={t`Layer (text)`}\n                              />\n                              <SelectOption\n                                value=\"sceneName\"\n                                primaryText={t`Scene name (text)`}\n                              />\n                            </SelectField>\n                          </Column>\n                        )}\n                        {gd.ParameterMetadata.isObject(parameter.getType()) && (\n                          <Column expand>\n                            <ObjectTypeSelector\n                              project={project}\n                              value={parameter.getExtraInfo()}\n                              onChange={(value: string) => {\n                                parameter.setExtraInfo(value);\n                                this.forceUpdate();\n                                this.props.onParametersUpdated();\n                              }}\n                              disabled={isParameterDisabled(i)}\n                            />\n                          </Column>\n                        )}\n                        {parameter.getType() === 'behavior' && (\n                          <Column expand>\n                            <BehaviorTypeSelector\n                              project={project}\n                              value={parameter.getExtraInfo()}\n                              onChange={(value: string) => {\n                                parameter.setExtraInfo(value);\n                                this.forceUpdate();\n                                this.props.onParametersUpdated();\n                              }}\n                              disabled={isParameterDisabled(i)}\n                            />\n                          </Column>\n                        )}\n                      </Line>\n                      {isParameterDescriptionAndTypeShown(i) && (\n                        <Line expand noMargin>\n                          <Column expand>\n                            <SemiControlledTextField\n                              commitOnBlur\n                              floatingLabelText={<Trans>Label</Trans>}\n                              floatingLabelFixed\n                              value={parameter.getDescription()}\n                              onChange={text => {\n                                parameter.setDescription(text);\n                                this.forceUpdate();\n                              }}\n                              fullWidth\n                              disabled={\n                                false /* Label, if shown, can always be changed */\n                              }\n                            />\n                          </Column>\n                        </Line>\n                      )}\n                      {isParameterLongDescriptionShown(parameter, i) && (\n                        <Line expand noMargin>\n                          <Column expand>\n                            <SemiControlledTextField\n                              commitOnBlur\n                              floatingLabelText={\n                                <Trans>Long description</Trans>\n                              }\n                              floatingLabelFixed\n                              value={parameter.getLongDescription()}\n                              onChange={text => {\n                                parameter.setLongDescription(text);\n                                this.forceUpdate();\n                              }}\n                              multiLine\n                              fullWidth\n                              disabled={\n                                false /* Long description, if shown, can always be changed */\n                              }\n                            />\n                          </Column>\n                        </Line>\n                      )}\n                    </React.Fragment>\n                  )\n                )}\n                {parameters.size() === 0 ? (\n                  <EmptyMessage>\n                    <Trans>No parameters for this function.</Trans>\n                  </EmptyMessage>\n                ) : null}\n                <Column>\n                  <Line justifyContent=\"flex-end\" expand>\n                    {!freezeParameters && (\n                      <RaisedButton\n                        primary\n                        label={<Trans>Add a parameter</Trans>}\n                        onClick={this._addParameter}\n                        icon={<Add />}\n                      />\n                    )}\n                  </Line>\n                </Column>\n              </div>\n            </Line>\n            {helpPagePath ? (\n              <Line>\n                <HelpButton helpPagePath={helpPagePath} />\n              </Line>\n            ) : (\n              <Spacer />\n            )}\n          </Column>\n        )}\n      </I18n>\n    );\n  }\n}\n","// @flow\nimport { Trans } from '@lingui/macro';\nimport { t } from '@lingui/macro';\n\nimport * as React from 'react';\nimport SelectField from '../UI/SelectField';\nimport SelectOption from '../UI/SelectOption';\nimport {\n  enumerateObjectTypes,\n  type EnumeratedObjectMetadata,\n} from '../ObjectsList/EnumerateObjects';\n\ntype Props = {|\n  project: gdProject,\n  floatingLabelText?: React.Node,\n  value: string,\n  onChange: string => void,\n  disabled?: boolean,\n  allowedObjectTypes?: ?Array<string>,\n|};\ntype State = {|\n  objectMetadata: Array<EnumeratedObjectMetadata>,\n|};\n\nexport default class ObjectTypeSelector extends React.Component<Props, State> {\n  state = {\n    objectMetadata: enumerateObjectTypes(this.props.project),\n  };\n\n  render() {\n    const {\n      disabled,\n      value,\n      onChange,\n      floatingLabelText,\n      allowedObjectTypes,\n    } = this.props;\n    const { objectMetadata } = this.state;\n\n    const isDisabled = (type: string) => {\n      if (!allowedObjectTypes) return false;\n\n      return allowedObjectTypes.indexOf(type) === -1;\n    };\n\n    return (\n      <SelectField\n        floatingLabelText={floatingLabelText || <Trans>Object type</Trans>}\n        value={value}\n        onChange={(e, i, value: string) => {\n          onChange(value);\n        }}\n        disabled={disabled}\n        fullWidth\n      >\n        <SelectOption\n          value=\"\"\n          primaryText={t`Any object`}\n          disabled={isDisabled('')}\n        />\n        {objectMetadata.map((metadata: EnumeratedObjectMetadata) => {\n          if (metadata.name === '') {\n            // Base object is an \"abstract\" object\n            return null;\n          }\n\n          return (\n            <SelectOption\n              key={metadata.name}\n              value={metadata.name}\n              primaryText={metadata.fullName}\n              disabled={isDisabled(metadata.name)}\n            />\n          );\n        })}\n      </SelectField>\n    );\n  }\n}\n","// @flow\nimport { mapFor } from '../Utils/MapFor';\nimport flatten from 'lodash/flatten';\n\nexport type EnumeratedBehaviorMetadata = {|\n  extension: gdPlatformExtension,\n  behaviorMetadata: gdBehaviorMetadata,\n  type: string,\n  objectType: string,\n  defaultName: string,\n  fullName: string,\n  description: string,\n  iconFilename: string,\n|};\n\nexport const enumerateBehaviorsMetadata = (\n  platform: gdPlatform,\n  project: gdProject\n): Array<EnumeratedBehaviorMetadata> => {\n  const extensionsList = platform.getAllPlatformExtensions();\n\n  return flatten(\n    mapFor(0, extensionsList.size(), i => {\n      const extension = extensionsList.at(i);\n\n      return extension\n        .getBehaviorsTypes()\n        .toJSArray()\n        .map(behaviorType => ({\n          behaviorType,\n          behaviorMetadata: extension.getBehaviorMetadata(behaviorType),\n        }))\n        .map(({ behaviorType, behaviorMetadata }) => ({\n          extension,\n          behaviorMetadata,\n          type: behaviorType,\n          defaultName: behaviorMetadata.getDefaultName(),\n          fullName: behaviorMetadata.getFullName(),\n          description: behaviorMetadata.getDescription(),\n          iconFilename: behaviorMetadata.getIconFilename(),\n          objectType: behaviorMetadata.getObjectType(),\n        }));\n    })\n  );\n};\n\nexport const filterEnumeratedBehaviorMetadata = (\n  list: Array<EnumeratedBehaviorMetadata>,\n  searchText: string\n): Array<EnumeratedBehaviorMetadata> => {\n  if (!searchText) return list;\n\n  const lowercaseSearchText = searchText.toLowerCase();\n\n  return list.filter(enumerateBehaviorsMetadata => {\n    return (\n      enumerateBehaviorsMetadata.fullName\n        .toLowerCase()\n        .indexOf(lowercaseSearchText) !== -1 ||\n      enumerateBehaviorsMetadata.description\n        .toLowerCase()\n        .indexOf(lowercaseSearchText) !== -1\n    );\n  });\n};\n","// @flow\nimport { Trans } from '@lingui/macro';\nimport { t } from '@lingui/macro';\nimport { I18n } from '@lingui/react';\nimport { type I18n as I18nType } from '@lingui/core';\n\nimport * as React from 'react';\nimport { Column, Line, Spacer } from '../../UI/Grid';\nimport SelectField from '../../UI/SelectField';\nimport SelectOption from '../../UI/SelectOption';\nimport { mapVector } from '../../Utils/MapFor';\nimport HelpButton from '../../UI/HelpButton';\nimport SemiControlledTextField from '../../UI/SemiControlledTextField';\nimport {\n  isBehaviorLifecycleEventsFunction,\n  isExtensionLifecycleEventsFunction,\n} from '../../EventsFunctionsExtensionsLoader/MetadataDeclarationHelpers';\nimport EmptyMessage from '../../UI/EmptyMessage';\nimport { getParametersIndexOffset } from '../../EventsFunctionsExtensionsLoader';\nimport { type MessageDescriptor } from '../../Utils/i18n/MessageDescriptor.flow';\nimport { ResponsiveLineStackLayout } from '../../UI/Layout';\nimport DismissableAlertMessage from '../../UI/DismissableAlertMessage';\n\nconst gd = global.gd;\n\ntype Props = {|\n  eventsFunction: gdEventsFunction,\n  eventsBasedBehavior: ?gdEventsBasedBehavior,\n  helpPagePath?: string,\n  onConfigurationUpdated?: () => void,\n  renderConfigurationHeader?: () => React.Node,\n  freezeEventsFunctionType?: boolean,\n|};\n\ntype State = {||};\n\nconst styles = {\n  icon: {\n    width: 32,\n    height: 32,\n    marginRight: 8,\n    flexSrink: 0,\n  },\n};\n\nconst getSentenceErrorText = (\n  i18n: I18nType,\n  eventsBasedBehavior: ?gdEventsBasedBehavior,\n  eventsFunction: gdEventsFunction\n) => {\n  const sentence = eventsFunction.getSentence();\n  if (!sentence)\n    return i18n._(\n      t`Enter the sentence that will be displayed in the events sheet`\n    );\n\n  const parametersIndexOffset = getParametersIndexOffset(!!eventsBasedBehavior);\n\n  const missingParameters = mapVector(\n    eventsFunction.getParameters(),\n    (parameter, index) => {\n      if (gd.ParameterMetadata.isBehavior(parameter.getType())) {\n        return null; // Behaviors are usually not shown in sentences.\n      }\n\n      const expectedString = `_PARAM${index + parametersIndexOffset}_`;\n      if (sentence.indexOf(expectedString) === -1) return expectedString;\n\n      return null;\n    }\n  ).filter(Boolean);\n\n  if (missingParameters.length) {\n    return (\n      i18n._(t`The sentence is probably missing this/these parameter(s):`) +\n      missingParameters.join(', ')\n    );\n  }\n\n  return undefined;\n};\n\nconst getFullNameHintText = (type: any): MessageDescriptor => {\n  if (type === gd.EventsFunction.Condition) {\n    return t`Example: Is flashing?`;\n  } else if (type === gd.EventsFunction.Expression) {\n    return t`Example: Life remaining`;\n  } else if (type === gd.EventsFunction.StringExpression) {\n    return t`Example: Equipped shield name`;\n  }\n\n  return t`Example: Flash the object`;\n};\n\nconst getDescriptionHintText = (type: any): MessageDescriptor => {\n  if (type === gd.EventsFunction.Condition) {\n    return t`Example: Check if the object is flashing.`;\n  } else if (type === gd.EventsFunction.Expression) {\n    return t`Example: Life remaining for the player.`;\n  } else if (type === gd.EventsFunction.StringExpression) {\n    return t`Example: Name of the shield equipped by the player.`;\n  }\n\n  return t`Example: Make the object flash for 5 seconds.`;\n};\n\nexport default class EventsFunctionPropertiesEditor extends React.Component<\n  Props,\n  State\n> {\n  render() {\n    const {\n      eventsFunction,\n      freezeEventsFunctionType,\n      onConfigurationUpdated,\n      helpPagePath,\n      renderConfigurationHeader,\n      eventsBasedBehavior,\n    } = this.props;\n\n    const type = eventsFunction.getFunctionType();\n    const isABehaviorLifecycleEventsFunction =\n      !!eventsBasedBehavior &&\n      isBehaviorLifecycleEventsFunction(eventsFunction.getName());\n    if (isABehaviorLifecycleEventsFunction) {\n      return (\n        <EmptyMessage>\n          <Trans>\n            This is a \"lifecycle method\". It will be called automatically by the\n            game engine for each instance living on the scene having the\n            behavior.\n          </Trans>\n        </EmptyMessage>\n      );\n    }\n\n    const isAnExtensionLifecycleEventsFunction =\n      !eventsBasedBehavior &&\n      isExtensionLifecycleEventsFunction(eventsFunction.getName());\n    if (isAnExtensionLifecycleEventsFunction) {\n      return (\n        <React.Fragment>\n          <DismissableAlertMessage\n            kind=\"info\"\n            identifier=\"lifecycle-events-function-included-only-if-extension-used\"\n          >\n            <Trans>\n              For the lifecycle functions to be executed, you need the extension\n              to be used in the game, either by having at least one action,\n              condition or expression used, or a behavior of the extension added\n              to an object. Otherwise, the extension won't be included in the\n              game.\n            </Trans>\n          </DismissableAlertMessage>\n          <EmptyMessage>\n            <Trans>\n              This is a \"lifecycle function\". It will be called automatically by\n              the game engine. It has no parameters. Only global objects can be\n              used as the events will be run for all scenes in your game.\n            </Trans>\n          </EmptyMessage>\n        </React.Fragment>\n      );\n    }\n\n    return (\n      <I18n>\n        {({ i18n }) => (\n          <Column>\n            {renderConfigurationHeader ? renderConfigurationHeader() : null}\n            <ResponsiveLineStackLayout alignItems=\"center\">\n              <Line alignItems=\"center\" noMargin>\n                <img src=\"res/function32.png\" alt=\"\" style={styles.icon} />\n                <SelectField\n                  value={type}\n                  floatingLabelText={<Trans>Function type</Trans>}\n                  fullWidth\n                  disabled={!!freezeEventsFunctionType}\n                  onChange={(e, i, value: string) => {\n                    eventsFunction.setFunctionType(value);\n                    if (onConfigurationUpdated) onConfigurationUpdated();\n                    this.forceUpdate();\n                  }}\n                >\n                  <SelectOption\n                    value={gd.EventsFunction.Action}\n                    primaryText={t`Action`}\n                  />\n                  <SelectOption\n                    value={gd.EventsFunction.Condition}\n                    primaryText={t`Condition`}\n                  />\n                  <SelectOption\n                    value={gd.EventsFunction.Expression}\n                    primaryText={t`Expression`}\n                  />\n                  <SelectOption\n                    value={gd.EventsFunction.StringExpression}\n                    primaryText={t`String Expression`}\n                  />\n                </SelectField>\n              </Line>\n              <SemiControlledTextField\n                commitOnBlur\n                floatingLabelText={<Trans>Full name displayed in editor</Trans>}\n                hintText={getFullNameHintText(type)}\n                value={eventsFunction.getFullName()}\n                onChange={text => {\n                  eventsFunction.setFullName(text);\n                  if (onConfigurationUpdated) onConfigurationUpdated();\n                  this.forceUpdate();\n                }}\n                fullWidth\n              />\n            </ResponsiveLineStackLayout>\n            <Line noMargin>\n              <SemiControlledTextField\n                commitOnBlur\n                floatingLabelText={\n                  <Trans>Description, displayed in editor</Trans>\n                }\n                hintText={getDescriptionHintText(type)}\n                fullWidth\n                multiLine\n                value={eventsFunction.getDescription()}\n                onChange={text => {\n                  eventsFunction.setDescription(text);\n                  if (onConfigurationUpdated) onConfigurationUpdated();\n                  this.forceUpdate();\n                }}\n              />\n            </Line>\n            <Line>\n              {type === gd.EventsFunction.Action ||\n              type === gd.EventsFunction.Condition ? (\n                <SemiControlledTextField\n                  commitOnBlur\n                  floatingLabelText={<Trans>Sentence in Events Sheet</Trans>}\n                  hintText={t`Note: write _PARAMx_ for parameters, e.g: Flash _PARAM1_ for 5 seconds`}\n                  fullWidth\n                  value={eventsFunction.getSentence()}\n                  onChange={text => {\n                    eventsFunction.setSentence(text);\n                    if (onConfigurationUpdated) onConfigurationUpdated();\n                    this.forceUpdate();\n                  }}\n                  errorText={getSentenceErrorText(\n                    i18n,\n                    eventsBasedBehavior,\n                    eventsFunction\n                  )}\n                />\n              ) : null}\n            </Line>\n            {helpPagePath ? (\n              <Line>\n                <HelpButton helpPagePath={helpPagePath} />\n              </Line>\n            ) : (\n              <Spacer />\n            )}\n          </Column>\n        )}\n      </I18n>\n    );\n  }\n}\n","// @flow\nimport * as React from 'react';\nimport Typography from '@material-ui/core/Typography';\n\ntype Props = {|\n  children: ?React.Node,\n  size?: 'body' | 'body2' | 'title',\n  align?: 'inherit' | 'left' | 'center' | 'right' | 'justify',\n  noShrink?: boolean,\n  style?: {|\n    // Margins\n    marginLeft?: number,\n    marginRight?: number,\n    marginTop?: number,\n    marginBottom?: number,\n\n    // Allow to specify that the text should break words\n    overflow?: 'hidden',\n    overflowWrap?: 'break-word',\n\n    // Allow to expand the text\n    flex?: 1,\n\n    // Allow to show the text inline\n    display?: 'inline-block',\n  |},\n|};\n\n// A Text to be displayed in the app. Prefer using this\n// than a `<p>`/`<span>` or `<div>` as this will help to maintain\n// consistency of text in the whole app.\nexport default ({ children, style, size, align, noShrink }: Props) => (\n  <Typography\n    variant={size === 'title' ? 'h6' : size === 'body2' ? 'body2' : 'body1'}\n    style={{\n      ...style,\n      flexShrink: noShrink ? 0 : undefined,\n      marginTop: 6 + ((style && style.marginTop) || 0),\n      marginBottom: 6 + ((style && style.marginBottom) || 0),\n    }}\n    align={align || 'inherit'}\n  >\n    {children}\n  </Typography>\n);\n","// @flow\nimport * as React from 'react';\nimport Button from '@material-ui/core/Button';\nimport { Spacer } from './Grid';\n\n// We support a subset of the props supported by Material-UI v0.x RaisedButton\n// They should be self descriptive - refer to Material UI docs otherwise.\nexport type RaisedButtonPropsWithoutOnClick = {|\n  label?: React.Node,\n  primary?: boolean,\n  disabled?: boolean,\n  fullWidth?: boolean,\n  icon?: React.Node,\n  style?: {|\n    marginTop?: number,\n    marginBottom?: number,\n    marginLeft?: number,\n    marginRight?: number,\n    margin?: number,\n    flexShrink?: 0,\n  |},\n|};\n\ntype Props = {|\n  ...RaisedButtonPropsWithoutOnClick,\n  onClick: ?() => void,\n|};\n\n/**\n * A raised button based on Material-UI button.\n */\nexport default class RaisedButton extends React.Component<Props, {||}> {\n  render() {\n    const { label, primary, icon, ...otherProps } = this.props;\n\n    // In theory, focus ripple is only shown after a keyboard interaction\n    // (see https://github.com/mui-org/material-ui/issues/12067). However, as\n    // it's important to get focus right in the whole app, make the ripple\n    // always visible to be sure we're getting focusing right.\n    const focusRipple = true;\n\n    return (\n      <Button\n        variant=\"contained\"\n        size=\"small\"\n        color={primary ? 'primary' : 'default'}\n        focusRipple={focusRipple}\n        {...otherProps}\n      >\n        {icon}\n        {icon && <Spacer />}\n        {label}\n      </Button>\n    );\n  }\n}\n","import React, { Component } from 'react';\nimport IconButton from '../IconButton';\nimport Close from '@material-ui/icons/Close';\nimport { MosaicWindowContext, MosaicContext } from 'react-mosaic-component';\n\nconst styles = {\n  container: {\n    padding: 0,\n    width: 32,\n    height: 32,\n  },\n  icon: {\n    width: 16,\n    height: 16,\n  },\n};\n\nexport default class CloseButton extends Component {\n  render() {\n    return (\n      <MosaicContext.Consumer>\n        {({ mosaicActions }) => (\n          <MosaicWindowContext.Consumer>\n            {({ mosaicWindowActions }) => (\n              <IconButton\n                onClick={() => {\n                  mosaicActions.remove(mosaicWindowActions.getPath());\n                }}\n                style={styles.container}\n              >\n                <Close htmlColor=\"white\" style={styles.icon} />\n              </IconButton>\n            )}\n          </MosaicWindowContext.Consumer>\n        )}\n      </MosaicContext.Consumer>\n    );\n  }\n}\n","// @flow\nimport * as React from 'react';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport { ResponsiveWindowMeasurer } from '../Reponsive/ResponsiveWindowMeasurer';\n\nconst styles = {\n  defaultBody: {\n    overflowX: 'hidden',\n  },\n  noMarginBody: {\n    padding: 0,\n    overflowX: 'hidden',\n  },\n  flexRowBody: {\n    display: 'flex',\n    flexDirection: 'row',\n  },\n  flexBody: {\n    display: 'flex',\n  },\n  actionsContainerWithSecondaryActions: {\n    display: 'flex',\n    justifyContent: 'space-between',\n  },\n  noTitleMargin: {\n    padding: 0,\n  },\n};\n\n// We support a subset of the props supported by Material-UI v0.x Dialog\n// They should be self descriptive - refer to Material UI docs otherwise.\ntype Props = {|\n  open?: boolean,\n  title?: React.Node,\n  actions?: React.Node,\n  secondaryActions?: React.Node,\n  onRequestClose?: () => void,\n\n  cannotBeDismissed?: boolean, //Force the user to use one of the actions in the Dialog. If true, the dialog can't be closed by clicking outside or pressing Escape.\n\n  children: React.Node, // The content of the dialog\n\n  // Display:\n  flexRowBody?: boolean, //Check if necessary\n  flexBody?: boolean,\n\n  // Size\n  maxWidth?: 'xs' | 'sm' | 'md' | 'lg' | 'xl' | false,\n\n  // Style:\n  noMargin?: boolean,\n  noTitleMargin?: boolean,\n|};\n\n// Help Flow to understand the type of the dialog content style.\ntype DialogContentStyle = {\n  padding?: 0,\n  overflowX?: 'hidden',\n  display?: 'flex',\n  flexDirection?: 'row',\n};\n\n/**\n * A enhanced material-ui Dialog that can have optional secondary actions\n * and no margins if required.\n */\nexport default (props: Props) => {\n  const {\n    secondaryActions,\n    actions,\n    open,\n    onRequestClose,\n    maxWidth,\n    noMargin,\n    title,\n    children,\n    flexRowBody,\n    flexBody,\n    noTitleMargin,\n  } = props;\n  const dialogActions = secondaryActions ? (\n    <React.Fragment>\n      <div key=\"secondary-actions\">{secondaryActions}</div>\n      <div key=\"actions\">{actions}</div>\n    </React.Fragment>\n  ) : (\n    actions\n  );\n  const dialogContentStyle: DialogContentStyle = {\n    ...(noMargin ? styles.noMarginBody : styles.defaultBody),\n    ...((flexRowBody ? styles.flexRowBody : {}): DialogContentStyle),\n    ...((flexBody ? styles.flexBody : {}): DialogContentStyle),\n  };\n\n  return (\n    <ResponsiveWindowMeasurer>\n      {size => (\n        <Dialog\n          open={open}\n          onClose={onRequestClose}\n          fullWidth\n          fullScreen={size === 'small'}\n          maxWidth={maxWidth !== undefined ? maxWidth : 'md'}\n          disableBackdropClick={false}\n          disableEscapeKeyDown={false}\n        >\n          {title && (\n            <DialogTitle\n              style={noTitleMargin ? styles.noTitleMargin : undefined}\n            >\n              {title}\n            </DialogTitle>\n          )}\n          <DialogContent style={dialogContentStyle}>{children}</DialogContent>\n          <DialogActions\n            style={\n              secondaryActions\n                ? styles.actionsContainerWithSecondaryActions\n                : undefined\n            }\n          >\n            {dialogActions}\n          </DialogActions>\n        </Dialog>\n      )}\n    </ResponsiveWindowMeasurer>\n  );\n};\n","// @flow\nimport * as React from 'react';\nimport EventsFunctionsExtensionEditor from '../../EventsFunctionsExtensionEditor';\nimport BaseEditor from './BaseEditor';\nimport { emptyPreviewButtonSettings } from '../Toolbar/PreviewButtons';\n\nconst styles = {\n  container: {\n    display: 'flex',\n    flex: 1,\n  },\n};\n\nexport default class EventsFunctionsExtensionEditorWrapper extends BaseEditor {\n  editor: ?EventsFunctionsExtensionEditor;\n\n  updateToolbar() {\n    if (this.editor) this.editor.updateToolbar();\n  }\n\n  forceUpdateEditor() {\n    // No updates to be done.\n  }\n\n  shouldComponentUpdate(nextProps: *) {\n    // This optimization is a bit more cautious than the one is BaseEditor,\n    // to still be notified when isActive goes from true to false.\n    if (!this.props.isActive && !nextProps.isActive) {\n      return false;\n    }\n\n    return true;\n  }\n\n  componentDidUpdate(prevProps: *) {\n    if (prevProps.isActive && !this.props.isActive) {\n      this.props.onLoadEventsFunctionsExtensions();\n    }\n  }\n\n  _onBehaviorEdited = () => {\n    // Immediately trigger the reload/regeneration of extensions\n    // as a change in the properties of a behavior can create changes\n    // in actions/conditions/expressions to manipulate these properties.\n    this.props.onLoadEventsFunctionsExtensions();\n  };\n\n  getEventsFunctionsExtension(): ?gdEventsFunctionsExtension {\n    const { project, eventsFunctionsExtensionName } = this.props;\n    if (\n      !project.hasEventsFunctionsExtensionNamed(eventsFunctionsExtensionName)\n    ) {\n      return null;\n    }\n    return project.getEventsFunctionsExtension(eventsFunctionsExtensionName);\n  }\n\n  selectEventsFunctionByName(\n    eventsFunctionName: string,\n    behaviorName: ?string\n  ) {\n    if (this.editor)\n      this.editor.selectEventsFunctionByName(eventsFunctionName, behaviorName);\n  }\n\n  render() {\n    const { project, eventsFunctionsExtensionName } = this.props;\n    const eventsFunctionsExtension = this.getEventsFunctionsExtension();\n\n    if (!eventsFunctionsExtension) {\n      //TODO: Error component\n      return (\n        <div>No extension called {eventsFunctionsExtensionName} found!</div>\n      );\n    }\n\n    return (\n      <div style={styles.container}>\n        <EventsFunctionsExtensionEditor\n          key={eventsFunctionsExtension.ptr}\n          project={project}\n          eventsFunctionsExtension={eventsFunctionsExtension}\n          setToolbar={this.props.setToolbar}\n          resourceSources={this.props.resourceSources}\n          onChooseResource={this.props.onChooseResource}\n          resourceExternalEditors={this.props.resourceExternalEditors}\n          openInstructionOrExpression={this.props.openInstructionOrExpression}\n          onCreateEventsFunction={this.props.onCreateEventsFunction}\n          initiallyFocusedFunctionName={this.props.initiallyFocusedFunctionName}\n          initiallyFocusedBehaviorName={this.props.initiallyFocusedBehaviorName}\n          onBehaviorEdited={this._onBehaviorEdited}\n          ref={editor => (this.editor = editor)}\n          unsavedChanges={this.props.unsavedChanges}\n          previewButtonSettings={emptyPreviewButtonSettings}\n        />\n      </div>\n    );\n  }\n}\n","import { Trans } from '@lingui/macro';\nimport React, { Component } from 'react';\nimport FlatButton from '../UI/FlatButton';\nimport ObjectGroupEditor from '.';\nimport Dialog from '../UI/Dialog';\nimport { withSerializableObject } from '../Utils/SerializableObjectEditorContainer';\nconst gd = global.gd;\n\nexport class ObjectGroupEditorDialog extends Component {\n  render() {\n    const { project, group } = this.props;\n    if (!group) return null;\n\n    const actions = [\n      <FlatButton\n        key=\"cancel\"\n        label={<Trans>Cancel</Trans>}\n        keyboardFocused\n        onClick={this.props.onCancel}\n      />,\n      <FlatButton\n        key=\"apply\"\n        label={<Trans>Apply</Trans>}\n        primary\n        keyboardFocused\n        onClick={this.props.onApply}\n      />,\n    ];\n\n    return (\n      <Dialog\n        key={group.ptr}\n        actions={actions}\n        noMargin\n        cannotBeDismissed={true}\n        onRequestClose={this.props.onCancel}\n        open={this.props.open}\n        title={`Edit ${group.getName()} group`}\n      >\n        <ObjectGroupEditor\n          project={project}\n          group={group}\n          globalObjectsContainer={this.props.globalObjectsContainer}\n          objectsContainer={this.props.objectsContainer}\n          onSizeUpdated={\n            () =>\n              this.forceUpdate() /*Force update to ensure dialog is properly positionned*/\n          }\n        />\n      </Dialog>\n    );\n  }\n}\n\nexport default withSerializableObject(ObjectGroupEditorDialog, {\n  newObjectCreator: () => new gd.ObjectGroup(),\n  propName: 'group',\n});\n","import React from 'react';\nimport SvgIcon from '@material-ui/core/SvgIcon';\n\nexport default props => (\n  <SvgIcon {...props} viewBox=\"0 -3 24 24\">\n    <g id=\"Page-1\" stroke=\"none\" strokeWidth=\"1\" fill=\"none\" fillRule=\"evenodd\">\n      <g id=\"Create\" fillRule=\"nonzero\">\n        <polygon\n          id=\"Shape\"\n          fill=\"#2B3990\"\n          points=\"24 8 18 2 18 6 14 6 14 10 18 10 18 14\"\n        />\n        <g id=\"Group-2\" fill=\"#27AAE1\">\n          <rect\n            id=\"Rectangle-path\"\n            transform=\"translate(2.999518, 3.574897) rotate(-45.000000) translate(-2.999518, -3.574897) \"\n            x=\"1.58553176\"\n            y=\"0.746924118\"\n            width=\"2.82797288\"\n            height=\"5.65594576\"\n          />\n          <rect\n            id=\"Rectangle-path\"\n            transform=\"translate(10.999518, 11.574897) rotate(-45.000000) translate(-10.999518, -11.574897) \"\n            x=\"9.58553176\"\n            y=\"8.74692412\"\n            width=\"2.82797288\"\n            height=\"5.65594576\"\n          />\n          <rect\n            id=\"Rectangle-path\"\n            transform=\"translate(2.999518, 11.574897) rotate(-135.000000) translate(-2.999518, -11.574897) \"\n            x=\"1.58553176\"\n            y=\"8.74692412\"\n            width=\"2.82797288\"\n            height=\"5.65594576\"\n          />\n          <rect\n            id=\"Rectangle-path\"\n            transform=\"translate(10.999518, 3.574897) rotate(-135.000000) translate(-10.999518, -3.574897) \"\n            x=\"9.58553176\"\n            y=\"0.746924118\"\n            width=\"2.82797288\"\n            height=\"5.65594576\"\n          />\n        </g>\n      </g>\n    </g>\n  </SvgIcon>\n);\n","import React from 'react';\nimport SvgIcon from '@material-ui/core/SvgIcon';\n\nexport default props => (\n  <SvgIcon {...props} viewBox=\"0 -6 24 24\">\n    <g id=\"Page-1\" stroke=\"none\" strokeWidth=\"1\" fill=\"none\" fillRule=\"evenodd\">\n      <g id=\"Step\" fillRule=\"nonzero\">\n        <polygon\n          id=\"Shape\"\n          fill=\"#2B3990\"\n          points=\"7.5 4.5 3 0 3 3 0 3 0 6 3 6 3 9\"\n        />\n        <circle id=\"Oval\" fill=\"#27AAE1\" cx=\"12\" cy=\"4.5\" r=\"3\" />\n        <circle id=\"Oval\" fill=\"#FFFFFF\" cx=\"12\" cy=\"4.5\" r=\"1.5\" />\n        <polygon\n          id=\"Shape\"\n          fill=\"#2B3990\"\n          points=\"24 4.5 19.5 0 19.5 3 16.5 3 16.5 6 19.5 6 19.5 9\"\n        />\n      </g>\n    </g>\n  </SvgIcon>\n);\n","import React from 'react';\nimport SvgIcon from '@material-ui/core/SvgIcon';\n\nexport default props => (\n  <SvgIcon {...props} viewBox=\"0 -3 24 24\">\n    <g id=\"Page-1\" stroke=\"none\" strokeWidth=\"1\" fill=\"none\" fillRule=\"evenodd\">\n      <g\n        id=\"Destroy\"\n        transform=\"translate(0.000000, -1.000000)\"\n        fillRule=\"nonzero\"\n      >\n        <g id=\"Group\" transform=\"translate(0.000000, 1.000000)\">\n          <polygon\n            id=\"Shape\"\n            fill=\"#2B3990\"\n            points=\"9.92307692 7.07692308 4.38461538 1.53846154 4.38461538 5.23076923 0.692307692 5.23076923 0.692307692 8.92307692 4.38461538 8.92307692 4.38461538 12.6153846\"\n          />\n          <rect\n            id=\"Rectangle-path\"\n            fill=\"#27AAE1\"\n            transform=\"translate(10.845138, 3.385446) rotate(-45.000000) translate(-10.845138, -3.385446) \"\n            x=\"9.53992021\"\n            y=\"0.77500965\"\n            width=\"2.6104365\"\n            height=\"5.22087301\"\n          />\n          <rect\n            id=\"Rectangle-path\"\n            fill=\"#27AAE1\"\n            transform=\"translate(18.229754, 10.770062) rotate(-45.000000) translate(-18.229754, -10.770062) \"\n            x=\"16.9245356\"\n            y=\"8.15962503\"\n            width=\"2.6104365\"\n            height=\"5.22087301\"\n          />\n          <rect\n            id=\"Rectangle-path\"\n            fill=\"#27AAE1\"\n            transform=\"translate(10.846985, 10.770246) rotate(-135.000000) translate(-10.846985, -10.770246) \"\n            x=\"9.54176636\"\n            y=\"8.15980965\"\n            width=\"2.6104365\"\n            height=\"5.22087301\"\n          />\n          <rect\n            id=\"Rectangle-path\"\n            fill=\"#27AAE1\"\n            transform=\"translate(18.231600, 3.385631) rotate(-135.000000) translate(-18.231600, -3.385631) \"\n            x=\"16.9263817\"\n            y=\"0.775194265\"\n            width=\"2.6104365\"\n            height=\"5.22087301\"\n          />\n        </g>\n        <g id=\"Group\" opacity=\"0.1\" transform=\"translate(2.538462, 0.692308)\">\n          <rect\n            id=\"Rectangle-path\"\n            fill=\"#000000\"\n            transform=\"translate(7.616400, 11.768538) rotate(135.000000) translate(-7.616400, -11.768538) \"\n            x=\"5.98441565\"\n            y=\"10.4633202\"\n            width=\"3.2639687\"\n            height=\"2.6104365\"\n          />\n          <polygon\n            id=\"Shape\"\n            fill=\"#FFFFFF\"\n            points=\"7.38461538 7.38461538 1.83645766 1.87268753 1.83645766 3.7132995 6.46153846 8.30769231\"\n          />\n          <rect\n            id=\"Rectangle-path\"\n            fill=\"#FFFFFF\"\n            transform=\"translate(8.308523, 3.693323) rotate(-135.000000) translate(-8.308523, -3.693323) \"\n            x=\"5.69808657\"\n            y=\"2.38810482\"\n            width=\"5.22087301\"\n            height=\"2.6104365\"\n          />\n          <rect\n            id=\"Rectangle-path\"\n            fill=\"#FFFFFF\"\n            transform=\"translate(15.693138, 11.077938) rotate(-135.000000) translate(-15.693138, -11.077938) \"\n            x=\"13.082702\"\n            y=\"9.77272021\"\n            width=\"5.22087301\"\n            height=\"2.6104365\"\n          />\n          <rect\n            id=\"Rectangle-path\"\n            fill=\"#FFFFFF\"\n            transform=\"translate(9.460009, 9.922714) rotate(45.000000) translate(-9.460009, -9.922714) \"\n            x=\"8.15479058\"\n            y=\"8.94333902\"\n            width=\"2.6104365\"\n            height=\"1.95875045\"\n          />\n          <rect\n            id=\"Rectangle-path\"\n            fill=\"#FFFFFF\"\n            transform=\"translate(15.693138, 3.693323) rotate(-135.000000) translate(-15.693138, -3.693323) \"\n            x=\"14.3879202\"\n            y=\"1.08288657\"\n            width=\"2.6104365\"\n            height=\"5.22087301\"\n          />\n        </g>\n      </g>\n    </g>\n  </SvgIcon>\n);\n","import React from 'react';\nimport SvgIcon from '@material-ui/core/SvgIcon';\n\nexport default props => (\n  <SvgIcon {...props}>\n    <g id=\"Page-1\" stroke=\"none\" strokeWidth=\"1\" fill=\"none\" fillRule=\"evenodd\">\n      <g id=\"Function\" fillRule=\"nonzero\">\n        <path\n          d=\"M24,14.5714286 L24,9.42857143 L21.948,9.42857143 C21.7045714,8.48742857 21.336,7.59942857 20.8525714,6.78342857 L22.3028571,5.33314286 L18.6668571,1.69542857 L17.2165714,3.14571429 C16.4005714,2.664 15.5125714,2.29371429 14.5714286,2.05028571 L14.5714286,0 L9.42857143,0 L9.42857143,2.052 C8.48742857,2.29542857 7.59942857,2.664 6.78342857,3.14742857 L5.33314286,1.69714286 L1.69714286,5.33314286 L3.14742857,6.78342857 C2.66571429,7.59942857 2.29542857,8.48742857 2.052,9.42857143 L0,9.42857143 L0,14.5714286 L2.052,14.5714286 C2.29542857,15.5125714 2.664,16.4005714 3.14742857,17.2165714 L1.69714286,18.6668571 L5.33314286,22.3045714 L6.78342857,20.8542857 C7.59942857,21.336 8.48742857,21.7062857 9.42857143,21.9497143 L9.42857143,24 L14.5714286,24 L14.5714286,21.948 C15.5125714,21.7045714 16.4005714,21.336 17.2165714,20.8525714 L18.6668571,22.3028571 L22.3028571,18.6651429 L20.8525714,17.2148571 C21.3342857,16.3988571 21.7045714,15.5108571 21.948,14.5697143 L24,14.5697143 L24,14.5714286 Z\"\n          id=\"Shape\"\n          fill=\"#27AAE1\"\n        />\n        <polygon\n          id=\"Shape\"\n          fill=\"#2B3990\"\n          points=\"17.1428571 7.71428571 10.2857143 11.1428571 10.2857143 12 12 12.8571429 15.4285714 11.1428571 15.4285714 13.7142857 12 15.456 8.57142857 13.7142857 8.57142857 10.2857143 12 8.57142857 15.4285714 6.85714286 12 5.14285714 5.14285714 8.57142857 5.14285714 15.4285714 12 18.8571429 17.5714286 16.0714286 18.8571429 15.4285714 18.8571429 15 18.8571429 8.57142857\"\n        />\n        <g id=\"Group\" opacity=\"0.1\">\n          <path\n            d=\"M3.14571429,6.78342857 C2.664,7.59942857 2.29371429,8.48742857 2.05028571,9.42857143 L0,9.42857143 L0,14.5714286 L2.052,14.5714286 C2.29542857,15.5125714 2.664,16.4005714 3.14742857,17.2165714 L1.69714286,18.6668571 L5.33314286,22.3045714 L6.78342857,20.8542857 C7.59942857,21.336 8.48742857,21.7062857 9.42857143,21.9497143 L9.42857143,24 L14.5714286,24 L14.5714286,21.948 C15.5125714,21.7045714 16.4005714,21.336 17.2165714,20.8525714 L18.6668571,22.3028571 L20.4857143,20.484 L3.51428571,3.51428571 L1.69714286,5.33314286 L3.14571429,6.78342857 Z\"\n            id=\"Shape\"\n            fill=\"#000000\"\n          />\n          <path\n            d=\"M22.3028571,18.6668571 L20.8525714,17.2165714 C21.3342857,16.4005714 21.7045714,15.5125714 21.948,14.5714286 L24,14.5714286 L24,9.42857143 L21.948,9.42857143 C21.7045714,8.48742857 21.336,7.59942857 20.8525714,6.78342857 L22.3028571,5.33314286 L18.6668571,1.69542857 L17.2165714,3.14571429 C16.4005714,2.664 15.5125714,2.29371429 14.5714286,2.05028571 L14.5714286,0 L9.42857143,0 L9.42857143,2.052 C8.48742857,2.29542857 7.59942857,2.664 6.78342857,3.14742857 L5.33314286,1.69714286 L3.51428571,3.51428571 L20.484,20.484 L22.3028571,18.6668571 Z\"\n            id=\"Shape\"\n            fill=\"#FFFFFF\"\n          />\n        </g>\n      </g>\n    </g>\n  </SvgIcon>\n);\n","import React from 'react';\nimport SvgIcon from '@material-ui/core/SvgIcon';\n\nexport default props => (\n  <SvgIcon {...props} viewBox=\"0 -6 24 24\">\n    <g id=\"Page-1\" stroke=\"none\" strokeWidth=\"1\" fill=\"none\" fillRule=\"evenodd\">\n      <g id=\"Activate\" fillRule=\"nonzero\">\n        <rect\n          id=\"Rectangle-path\"\n          fill=\"#27AAE1\"\n          x=\"0\"\n          y=\"0\"\n          width=\"24\"\n          height=\"10.2857143\"\n        />\n        <rect\n          id=\"Rectangle-path\"\n          fill=\"#2B3990\"\n          x=\"1.71428571\"\n          y=\"1.71428571\"\n          width=\"10.2857143\"\n          height=\"6.85714286\"\n        />\n        <polygon\n          id=\"Shape\"\n          fill=\"#FFFFFF\"\n          points=\"20.5710245 1.71428571 18.8571429 3.42897546 17.1432612 5.14285714 15.4285714 6.85673883 17.1432612 8.57142857 18.8571429 6.85673883 20.5710245 5.14285714 22.2857143 3.42897546\"\n        />\n        <polygon\n          id=\"Shape\"\n          fill=\"#FFFFFF\"\n          points=\"18.8567388 3.42857143 17.1428571 5.14326117 15.4289755 3.42857143 13.7142857 5.14326117 15.4289755 6.85714286 18.8567388 6.85714286 20.5714286 5.14326117\"\n        />\n      </g>\n    </g>\n  </SvgIcon>\n);\n","import React from 'react';\nimport SvgIcon from '@material-ui/core/SvgIcon';\n\nexport default props => (\n  <SvgIcon {...props} viewBox=\"0 -6 24 24\">\n    <g id=\"Page-1\" stroke=\"none\" strokeWidth=\"1\" fill=\"none\" fillRule=\"evenodd\">\n      <g id=\"Deactivate\" fillRule=\"nonzero\">\n        <rect\n          id=\"Rectangle-path\"\n          fill=\"#2B3990\"\n          x=\"0\"\n          y=\"0\"\n          width=\"24\"\n          height=\"10.2857143\"\n        />\n        <polygon\n          id=\"Shape\"\n          fill=\"#FFFFFF\"\n          points=\"6.85673883 1.71428571 5.14285714 3.42897546 3.42897546 1.71428571 1.71428571 3.42897546 3.42897546 5.14285714 1.71428571 6.85673883 3.42897546 8.57142857 5.14285714 6.85673883 6.85673883 8.57142857 8.57142857 6.85673883 6.85673883 5.14285714 8.57142857 3.42897546\"\n        />\n        <rect\n          id=\"Rectangle-path\"\n          fill=\"#27AAE1\"\n          x=\"12\"\n          y=\"1.71428571\"\n          width=\"10.2857143\"\n          height=\"6.85714286\"\n        />\n      </g>\n    </g>\n  </SvgIcon>\n);\n","// @flow\nimport { Trans } from '@lingui/macro';\nimport React from 'react';\nimport EventsSheet from '../../EventsSheet';\nimport RaisedButton from '../../UI/RaisedButton';\nimport { serializeToJSObject } from '../../Utils/Serializer';\nimport PlaceholderMessage from '../../UI/PlaceholderMessage';\nimport BaseEditor from './BaseEditor';\nimport LayoutChooserDialog from './LayoutChooserDialog';\nimport Text from '../../UI/Text';\nimport { Line } from '../../UI/Grid';\n\nconst styles = {\n  container: {\n    display: 'flex',\n    flex: 1,\n  },\n};\n\nexport default class ExternalEventsEditor extends BaseEditor {\n  editor: ?EventsSheet;\n\n  state = {\n    layoutChooserOpen: false,\n  };\n\n  updateToolbar() {\n    if (this.editor) this.editor.updateToolbar();\n  }\n\n  forceUpdateEditor() {\n    // No updates to be done.\n  }\n\n  getSerializedElements() {\n    const externalEvents = this.getExternalEvents();\n    const layout = this.getLayout();\n    if (!externalEvents) return {};\n\n    return {\n      ...BaseEditor.getLayoutSerializedElements(layout),\n      events: serializeToJSObject(externalEvents),\n    };\n  }\n\n  getExternalEvents(): ?gdExternalEvents {\n    const { project, externalEventsName } = this.props;\n    if (!project.hasExternalEventsNamed(externalEventsName)) {\n      return null;\n    }\n    return project.getExternalEvents(externalEventsName);\n  }\n\n  getLayout() {\n    const { project } = this.props;\n\n    const externalEvents = this.getExternalEvents();\n    if (!externalEvents) return null;\n\n    const layoutName = externalEvents.getAssociatedLayout();\n    if (!project.hasLayoutNamed(layoutName)) {\n      return null;\n    }\n    return project.getLayout(layoutName);\n  }\n\n  setAssociatedLayout = (layoutName: string) => {\n    const externalEvents = this.getExternalEvents();\n    if (!externalEvents) return;\n\n    externalEvents.setAssociatedLayout(layoutName);\n    this.setState(\n      {\n        layoutChooserOpen: false,\n      },\n      () => this.updateToolbar()\n    );\n  };\n\n  openLayoutChooser = () => {\n    this.setState({\n      layoutChooserOpen: true,\n    });\n  };\n\n  render() {\n    const { project, externalEventsName } = this.props;\n    const externalEvents = this.getExternalEvents();\n    const layout = this.getLayout();\n\n    if (!externalEvents) {\n      //TODO: Error component\n      return <div>No external events called {externalEventsName} found!</div>;\n    }\n\n    return (\n      <div style={styles.container}>\n        {layout && (\n          <EventsSheet\n            {...this.props}\n            ref={editor => (this.editor = editor)}\n            project={project}\n            scope={{\n              layout,\n            }}\n            globalObjectsContainer={project}\n            objectsContainer={layout}\n            events={externalEvents.getEvents()}\n            onPreview={() => this.props.onPreview(project, layout)}\n            onOpenSettings={this.openLayoutChooser}\n            onOpenExternalEvents={this.props.onOpenExternalEvents}\n            resourceSources={this.props.resourceSources}\n            onChooseResource={this.props.onChooseResource}\n            resourceExternalEditors={this.props.resourceExternalEditors}\n            openInstructionOrExpression={this.props.openInstructionOrExpression}\n            unsavedChanges={this.props.unsavedChanges}\n          />\n        )}\n        {!layout && (\n          <PlaceholderMessage>\n            <Text>\n              <Trans>\n                To edit the external events, choose the scene in which it will\n                be included:\n              </Trans>\n            </Text>\n            <Line justifyContent=\"center\">\n              <RaisedButton\n                label={<Trans>Choose the scene</Trans>}\n                primary\n                onClick={this.openLayoutChooser}\n              />\n            </Line>\n          </PlaceholderMessage>\n        )}\n        <LayoutChooserDialog\n          title={<Trans>Choose the associated scene</Trans>}\n          helpText=\"You still need to add a Link event in the scene to import the external events\"\n          open={this.state.layoutChooserOpen}\n          project={project}\n          onChoose={this.setAssociatedLayout}\n          onClose={() => this.setState({ layoutChooserOpen: false })}\n        />\n      </div>\n    );\n  }\n}\n","import { Trans } from '@lingui/macro';\nimport React, { Component } from 'react';\nimport FlatButton from '../../UI/FlatButton';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport Radio from '@material-ui/core/Radio';\nimport RadioGroup from '@material-ui/core/RadioGroup';\nimport Dialog from '../../UI/Dialog';\nimport { mapFor } from '../../Utils/MapFor';\nimport Text from '../../UI/Text';\n\nexport default class LayoutChooserDialog extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      selectedLayoutName: props.layoutName,\n    };\n  }\n\n  componentWillReceiveProps(newProps) {\n    if (newProps.layoutName !== this.props.layoutName) {\n      this.setState({\n        selectedLayoutName: newProps.layoutName,\n      });\n    }\n  }\n\n  chooseLayout(layoutName) {\n    this.setState({\n      selectedLayoutName: layoutName,\n    });\n  }\n\n  render() {\n    const actions = [\n      <FlatButton\n        key=\"cancel\"\n        label={<Trans>Cancel</Trans>}\n        primary={false}\n        onClick={this.props.onClose}\n      />,\n      <FlatButton\n        key=\"choose\"\n        label={<Trans>Choose</Trans>}\n        primary={true}\n        keyboardFocused={true}\n        onClick={() => this.props.onChoose(this.state.selectedLayoutName)}\n        disabled={!this.state.selectedLayoutName}\n      />,\n    ];\n\n    const { project } = this.props;\n    const { selectedLayoutName } = this.state;\n    const layoutNames = mapFor(0, project.getLayoutsCount(), i => {\n      return project.getLayoutAt(i).getName();\n    });\n\n    return (\n      <Dialog\n        actions={actions}\n        open={this.props.open}\n        title={this.props.title}\n        onRequestClose={this.props.onClose}\n        cannotBeDismissed={false}\n        fullWidth\n        maxWidth=\"sm\"\n      >\n        {this.props.helpText && <Text>{this.props.helpText}</Text>}\n        <RadioGroup\n          aria-label=\"Associated scene\"\n          name=\"associated-layout\"\n          value={selectedLayoutName}\n          onChange={event => this.chooseLayout(event.target.value)}\n        >\n          {layoutNames.map(name => (\n            <FormControlLabel\n              key={name}\n              value={name}\n              control={<Radio color=\"primary\" />}\n              label={name}\n            />\n          ))}\n        </RadioGroup>\n      </Dialog>\n    );\n  }\n}\n","// @flow\nimport { Trans } from '@lingui/macro';\n\nimport * as React from 'react';\nimport RaisedButton from '../../UI/RaisedButton';\nimport SceneEditor from '../../SceneEditor';\nimport {\n  serializeToJSObject,\n  unserializeFromJSObject,\n} from '../../Utils/Serializer';\nimport PlaceholderMessage from '../../UI/PlaceholderMessage';\nimport BaseEditor from './BaseEditor';\nimport LayoutChooserDialog from './LayoutChooserDialog';\nimport { Line } from '../../UI/Grid';\nimport Text from '../../UI/Text';\n\nconst styles = {\n  container: {\n    display: 'flex',\n    flex: 1,\n  },\n};\n\nexport default class ExternalLayoutEditor extends BaseEditor {\n  editor: ?SceneEditor;\n  state = {\n    layoutChooserOpen: false,\n  };\n\n  shouldComponentUpdate(nextProps: *) {\n    // This optimization is a bit more cautious than the one is BaseEditor, to still allow\n    // children, and in particular SceneEditor and InstancesEditor, to be notified when isActive\n    // goes from true to false (in which case PIXI rendering is halted). If isActive was false\n    // and remains false, it's safe to stop update here (PIXI rendering is already halted).\n    if (!this.props.isActive && !nextProps.isActive) {\n      return false;\n    }\n\n    return true;\n  }\n\n  updateToolbar() {\n    if (this.editor) this.editor.updateToolbar();\n  }\n\n  forceUpdateEditor() {\n    // No updates to be done.\n  }\n\n  getSerializedElements() {\n    const externalLayout = this.getExternalLayout();\n    const layout = this.getLayout();\n    if (!externalLayout || !layout) return {};\n\n    return {\n      ...BaseEditor.getLayoutSerializedElements(layout),\n      instances: serializeToJSObject(externalLayout.getInitialInstances()),\n      uiSettings: this.editor ? this.editor.getUiSettings() : {},\n    };\n  }\n\n  getExternalLayout(): ?gdExternalLayout {\n    const { project, externalLayoutName } = this.props;\n    if (!project.hasExternalLayoutNamed(externalLayoutName)) {\n      return null;\n    }\n    return project.getExternalLayout(externalLayoutName);\n  }\n\n  getLayout(): ?gdLayout {\n    const { project } = this.props;\n\n    const externalLayout = this.getExternalLayout();\n    if (!externalLayout) return null;\n\n    const layoutName = externalLayout.getAssociatedLayout();\n    if (!project.hasLayoutNamed(layoutName)) {\n      return null;\n    }\n    return project.getLayout(layoutName);\n  }\n\n  setAssociatedLayout = (layoutName: string) => {\n    const externalLayout = this.getExternalLayout();\n    if (!externalLayout) return;\n\n    externalLayout.setAssociatedLayout(layoutName);\n    this.setState(\n      {\n        layoutChooserOpen: false,\n      },\n      () => this.updateToolbar()\n    );\n  };\n\n  openLayoutChooser = () => {\n    this.setState({\n      layoutChooserOpen: true,\n    });\n  };\n\n  saveUiSettings = () => {\n    const layout = this.getExternalLayout();\n    const editor = this.editor;\n\n    if (editor && layout) {\n      unserializeFromJSObject(\n        layout.getAssociatedSettings(),\n        editor.getUiSettings()\n      );\n    }\n  };\n\n  render() {\n    const { project, externalLayoutName, isActive } = this.props;\n    const externalLayout = this.getExternalLayout();\n    const layout = this.getLayout();\n\n    if (!externalLayout) {\n      //TODO: Error component\n      return <div>No external layout called {externalLayoutName} found!</div>;\n    }\n\n    return (\n      <div style={styles.container}>\n        {layout && (\n          <SceneEditor\n            {...this.props}\n            ref={editor => (this.editor = editor)}\n            project={project}\n            layout={layout}\n            initialInstances={externalLayout.getInitialInstances()}\n            initialUiSettings={serializeToJSObject(\n              externalLayout.getAssociatedSettings()\n            )}\n            onPreview={options =>\n              this.props.onPreview(project, layout, externalLayout, options)\n            }\n            previewButtonSettings={this.props.previewButtonSettings}\n            onOpenDebugger={this.props.onOpenDebugger}\n            onOpenMoreSettings={this.openLayoutChooser}\n            isActive={isActive}\n          />\n        )}\n        {!layout && (\n          <PlaceholderMessage>\n            <Text>\n              <Trans>\n                To edit the external layout, choose the scene in which it will\n                be included:\n              </Trans>\n            </Text>\n            <Line justifyContent=\"center\">\n              <RaisedButton\n                label={<Trans>Choose the scene</Trans>}\n                primary\n                onClick={this.openLayoutChooser}\n              />\n            </Line>\n          </PlaceholderMessage>\n        )}\n        <LayoutChooserDialog\n          title={<Trans>Choose the associated scene</Trans>}\n          open={this.state.layoutChooserOpen}\n          project={project}\n          onChoose={this.setAssociatedLayout}\n          onClose={() => this.setState({ layoutChooserOpen: false })}\n        />\n      </div>\n    );\n  }\n}\n","// @flow\nimport { Trans } from '@lingui/macro';\nimport { I18n } from '@lingui/react';\nimport { type I18n as I18nType } from '@lingui/core';\nimport { t } from '@lingui/macro';\n\nimport * as React from 'react';\nimport uniq from 'lodash/uniq';\nimport ObjectsList from '../ObjectsList';\nimport ObjectGroupsList from '../ObjectGroupsList';\nimport ObjectsRenderingService from '../ObjectsRendering/ObjectsRenderingService';\nimport InstancesEditor from '../InstancesEditor';\nimport InstancePropertiesEditor from '../InstancesEditor/InstancePropertiesEditor';\nimport InstancesList from '../InstancesEditor/InstancesList';\nimport LayersList from '../LayersList';\nimport LayerRemoveDialog from '../LayersList/LayerRemoveDialog';\nimport VariablesEditorDialog from '../VariablesList/VariablesEditorDialog';\nimport ObjectEditorDialog from '../ObjectEditor/ObjectEditorDialog';\nimport ObjectGroupEditorDialog from '../ObjectGroupEditor/ObjectGroupEditorDialog';\nimport InstancesSelection from './InstancesSelection';\nimport SetupGridDialog from './SetupGridDialog';\nimport ScenePropertiesDialog from './ScenePropertiesDialog';\nimport Toolbar from './Toolbar';\nimport {\n  serializeToJSObject,\n  unserializeFromJSObject,\n} from '../Utils/Serializer';\nimport Clipboard from '../Utils/Clipboard';\nimport Window from '../Utils/Window';\nimport { passFullSize } from '../UI/FullSizeMeasurer';\nimport { addScrollbars } from '../InstancesEditor/ScrollbarContainer';\nimport { type PreviewOptions } from '../Export/PreviewLauncher.flow';\nimport Drawer from '@material-ui/core/Drawer';\nimport EditorMosaic from '../UI/EditorMosaic';\nimport EditorBar, { editorBarHeight } from '../UI/EditorBar';\nimport InfoBar from '../UI/Messages/InfoBar';\nimport ContextMenu from '../UI/Menu/ContextMenu';\nimport { showWarningBox } from '../UI/Messages/MessageBox';\nimport { shortenString } from '../Utils/StringHelpers';\nimport getObjectByName from '../Utils/GetObjectByName';\n\nimport {\n  type ResourceSource,\n  type ChooseResourceFunction,\n} from '../ResourcesList/ResourceSource.flow';\nimport { type ResourceExternalEditor } from '../ResourcesList/ResourceExternalEditor.flow';\nimport {\n  type HistoryState,\n  undo,\n  redo,\n  canUndo,\n  canRedo,\n  getHistoryInitialState,\n  saveToHistory,\n} from '../Utils/History';\nimport PixiResourcesLoader from '../ObjectsRendering/PixiResourcesLoader';\nimport {\n  type ObjectWithContext,\n  type GroupWithContext,\n  enumerateObjects,\n} from '../ObjectsList/EnumerateObjects';\nimport TagsButton from '../UI/EditorMosaic/TagsButton';\nimport CloseButton from '../UI/EditorMosaic/CloseButton';\nimport {\n  type SelectedTags,\n  buildTagsMenuTemplate,\n  getTagsFromString,\n} from '../Utils/TagsHelper';\nimport { ScreenTypeMeasurer } from '../UI/Reponsive/ScreenTypeMeasurer';\nimport { ResponsiveWindowMeasurer } from '../UI/Reponsive/ResponsiveWindowMeasurer';\nimport { type UnsavedChanges } from '../MainFrame/UnsavedChangesContext';\nimport { type PreviewButtonSettings } from '../MainFrame/Toolbar/PreviewButtons';\nimport SceneVariablesDialog from './SceneVariablesDialog';\nconst gd = global.gd;\n\nconst INSTANCES_CLIPBOARD_KIND = 'Instances';\n\nconst FullSizeInstancesEditor = passFullSize(addScrollbars(InstancesEditor), {\n  useFlex: true,\n});\n\nconst styles = {\n  container: {\n    display: 'flex',\n    flex: 1,\n    position: 'relative',\n    overflow: 'hidden',\n  },\n};\n\nconst instancesDrawerPaperProps = {\n  style: {\n    width: 500,\n    overflow: 'hidden',\n  },\n};\n\nconst initialEditors = {\n  direction: 'row',\n  first: 'properties',\n  splitPercentage: 23,\n  second: {\n    direction: 'row',\n    first: 'instances-editor',\n    second: 'objects-list',\n    splitPercentage: 77,\n  },\n};\n\nconst initialEditorsSmallWindow = {\n  direction: 'row',\n  first: 'instances-editor',\n  second: 'objects-list',\n  splitPercentage: 70,\n};\n\ntype Props = {|\n  previewButtonSettings: PreviewButtonSettings,\n  initialInstances: gdInitialInstancesContainer,\n  initialUiSettings: Object,\n  layout: gdLayout,\n  onEditObject: (object: gdObject) => void,\n  onOpenDebugger: () => void,\n  onOpenMoreSettings: () => void,\n  onPreview: (options: PreviewOptions) => void,\n  project: gdProject,\n  setToolbar: (?React.Node) => void,\n  showNetworkPreviewButton: boolean,\n  showPreviewButton: boolean,\n  resourceSources: Array<ResourceSource>,\n  onChooseResource: ChooseResourceFunction,\n  resourceExternalEditors: Array<ResourceExternalEditor>,\n  isActive: boolean,\n  unsavedChanges?: UnsavedChanges,\n|};\n\ntype State = {|\n  objectsListOpen: boolean,\n  instancesListOpen: boolean,\n  setupGridOpen: boolean,\n  scenePropertiesDialogOpen: boolean,\n  layersListOpen: boolean,\n  layerRemoveDialogOpen: boolean,\n  onCloseLayerRemoveDialog: ?(doRemove: boolean, newLayer: string) => void,\n  layerRemoved: ?string,\n  editedObjectWithContext: ?ObjectWithContext,\n  variablesEditedInstance: ?gdInitialInstance,\n  variablesEditedObject: ?gdObject,\n  selectedObjectNames: Array<string>,\n  newObjectInstanceSceneCoordinates: ?[number, number],\n\n  editedGroup: ?gdObjectGroup,\n\n  uiSettings: Object,\n  history: HistoryState,\n\n  showObjectsListInfoBar: boolean,\n  layoutVariablesDialogOpen: boolean,\n  showPropertiesInfoBar: boolean,\n  showLayersInfoBar: boolean,\n\n  // State for tags of objects:\n  selectedObjectTags: SelectedTags,\n|};\n\ntype CopyCutPasteOptions = { useLastCursorPosition?: boolean };\n\nexport default class SceneEditor extends React.Component<Props, State> {\n  static defaultProps = {\n    setToolbar: () => {},\n  };\n\n  zOrderFinder: ?gd.HighestZOrderFinder;\n  instancesSelection: InstancesSelection;\n  editor: ?InstancesEditor;\n  contextMenu: ?ContextMenu;\n  editorMosaic: ?EditorMosaic;\n  _objectsList: ?ObjectsList;\n  _propertiesEditor: ?InstancePropertiesEditor;\n\n  constructor(props: Props) {\n    super(props);\n\n    this.instancesSelection = new InstancesSelection();\n    this.state = {\n      objectsListOpen: false,\n      instancesListOpen: false,\n      setupGridOpen: false,\n      scenePropertiesDialogOpen: false,\n      layersListOpen: false,\n      layerRemoveDialogOpen: false,\n      onCloseLayerRemoveDialog: null,\n      layerRemoved: null,\n      editedObjectWithContext: null,\n      variablesEditedInstance: null,\n      variablesEditedObject: null,\n      selectedObjectNames: [],\n      newObjectInstanceSceneCoordinates: null,\n      editedGroup: null,\n\n      uiSettings: props.initialUiSettings,\n      history: getHistoryInitialState(props.initialInstances, {\n        historyMaxSize: 50,\n      }),\n\n      showObjectsListInfoBar: false,\n      layoutVariablesDialogOpen: false,\n      showPropertiesInfoBar: false,\n      showLayersInfoBar: false,\n\n      selectedObjectTags: [],\n    };\n  }\n\n  componentWillMount() {\n    this.zOrderFinder = new gd.HighestZOrderFinder();\n  }\n\n  componentDidUpdate(prevProps: Props, prevState: State) {\n    if (this.state.history !== prevState.history)\n      if (this.props.unsavedChanges)\n        this.props.unsavedChanges.triggerUnsavedChanges();\n  }\n\n  getUiSettings() {\n    return this.state.uiSettings;\n  }\n\n  updateToolbar() {\n    this.props.setToolbar(\n      <Toolbar\n        previewButtonSettings={this.props.previewButtonSettings}\n        showPreviewButton={this.props.showPreviewButton}\n        onPreview={() => this.props.onPreview({})}\n        showNetworkPreviewButton={this.props.showNetworkPreviewButton}\n        onNetworkPreview={() => this.props.onPreview({ networkPreview: true })}\n        onOpenDebugger={() => {\n          this.props.onOpenDebugger();\n          this.props.onPreview({});\n        }}\n        instancesSelection={this.instancesSelection}\n        openObjectsList={this.openObjectsList}\n        openObjectGroupsList={this.openObjectGroupsList}\n        openProperties={this.openProperties}\n        deleteSelection={this.deleteSelection}\n        toggleInstancesList={this.toggleInstancesList}\n        toggleLayersList={this.toggleLayersList}\n        toggleWindowMask={this.toggleWindowMask}\n        toggleGrid={this.toggleGrid}\n        isGridShown={() => !!this.state.uiSettings.grid}\n        isWindowMaskShown={() => !!this.state.uiSettings.windowMask}\n        openSetupGrid={this.openSetupGrid}\n        setZoomFactor={this.setZoomFactor}\n        centerView={this.centerView}\n        canUndo={canUndo(this.state.history)}\n        canRedo={canRedo(this.state.history)}\n        undo={this.undo}\n        redo={this.redo}\n        zoomIn={this.zoomIn}\n        zoomOut={this.zoomOut}\n        onOpenSettings={this.openSceneProperties}\n      />\n    );\n  }\n\n  componentWillReceiveProps(nextProps: Props) {\n    if (\n      this.props.layout !== nextProps.layout ||\n      this.props.initialInstances !== nextProps.initialInstances ||\n      this.props.project !== nextProps.project\n    ) {\n      this.instancesSelection.clearSelection();\n      this.openSetupGrid(false);\n      this.editInstanceVariables(null);\n      this.openSceneProperties(false);\n    }\n  }\n\n  openObjectsList = () => {\n    if (!this.editorMosaic) return;\n    if (!this.editorMosaic.openEditor('objects-list', 'end', 75, 'column')) {\n      this.setState({\n        showObjectsListInfoBar: true,\n      });\n    }\n  };\n\n  openProperties = () => {\n    if (!this.editorMosaic) return;\n    if (!this.editorMosaic.openEditor('properties', 'start', 25, 'column')) {\n      this.setState({\n        showPropertiesInfoBar: true,\n      });\n    }\n  };\n\n  openObjectGroupsList = () => {\n    if (!this.editorMosaic) return;\n    this.editorMosaic.openEditor('object-groups-list', 'end', 75, 'column');\n  };\n\n  toggleInstancesList = () => {\n    this.setState({ instancesListOpen: !this.state.instancesListOpen });\n  };\n\n  toggleLayersList = () => {\n    if (!this.editorMosaic) return;\n    if (!this.editorMosaic.openEditor('layers', 'end', 75, 'row')) {\n      this.setState({\n        showLayersInfoBar: true,\n      });\n    }\n  };\n\n  toggleWindowMask = () => {\n    this.setState({\n      uiSettings: {\n        ...this.state.uiSettings,\n        windowMask: !this.state.uiSettings.windowMask,\n      },\n    });\n  };\n\n  toggleGrid = () => {\n    this.setState({\n      uiSettings: {\n        ...this.state.uiSettings,\n        grid: !this.state.uiSettings.grid,\n        snap: !this.state.uiSettings.grid,\n      },\n    });\n  };\n\n  openSetupGrid = (open: boolean = true) => {\n    this.setState({ setupGridOpen: open });\n  };\n\n  openSceneProperties = (open: boolean = true) => {\n    this.setState({ scenePropertiesDialogOpen: open });\n  };\n\n  openObjectEditor = () => {\n    if (!this.instancesSelection.hasSelectedInstances()) {\n      return;\n    }\n    const selectedInstanceObjectName = this.instancesSelection\n      .getSelectedInstances()[0]\n      .getObjectName();\n    this.editObjectByName(selectedInstanceObjectName);\n  };\n\n  editInstanceVariables = (instance: ?gdInitialInstance) => {\n    this.setState({ variablesEditedInstance: instance });\n  };\n\n  editObjectVariables = (object: ?gdObject) => {\n    this.setState({ variablesEditedObject: object });\n  };\n\n  editLayoutVariables = (open: boolean = true) => {\n    this.setState({ layoutVariablesDialogOpen: open });\n  };\n\n  editObject = (editedObject: ?gdObject) => {\n    const { project } = this.props;\n    if (editedObject) {\n      this.setState({\n        editedObjectWithContext: {\n          object: editedObject,\n          global: project.hasObjectNamed(editedObject.getName()),\n        },\n      });\n    } else {\n      this.setState({\n        editedObjectWithContext: null,\n      });\n    }\n  };\n\n  editObjectByName = (objectName: string) => {\n    const { project, layout } = this.props;\n    if (layout.hasObjectNamed(objectName))\n      this.editObject(layout.getObject(objectName));\n    else if (project.hasObjectNamed(objectName))\n      this.editObject(project.getObject(objectName));\n  };\n\n  editGroup = (group: ?gdObjectGroup) => {\n    this.setState({ editedGroup: group });\n  };\n\n  setUiSettings = (uiSettings: Object) => {\n    this.setState({\n      uiSettings: {\n        ...this.state.uiSettings,\n        ...uiSettings,\n      },\n    });\n  };\n\n  undo = () => {\n    this.instancesSelection.clearSelection();\n    this.setState(\n      {\n        history: undo(this.state.history, this.props.initialInstances),\n      },\n      () => {\n        // /!\\ Force the instances editor to destroy and mount again the\n        // renderers to avoid keeping any references to existing instances\n        if (this.editor) this.editor.forceRemount();\n        this.updateToolbar();\n      }\n    );\n  };\n\n  redo = () => {\n    this.instancesSelection.clearSelection();\n    this.setState(\n      {\n        history: redo(this.state.history, this.props.initialInstances),\n      },\n      () => {\n        // /!\\ Force the instances editor to destroy and mount again the\n        // renderers to avoid keeping any references to existing instances\n        if (this.editor) this.editor.forceRemount();\n        this.updateToolbar();\n      }\n    );\n  };\n\n  _onObjectSelected = (selectedObjectName: string) => {\n    if (!selectedObjectName) {\n      this.setState({\n        selectedObjectNames: [],\n      });\n    } else {\n      this.setState({\n        selectedObjectNames: [selectedObjectName],\n      });\n    }\n  };\n\n  _createNewObjectAndInstanceUnderCursor = () => {\n    if (!this.editor) {\n      return;\n    }\n\n    // Remember where to create the instance, when the object will be created\n    this.setState({\n      newObjectInstanceSceneCoordinates: this.editor.getLastCursorSceneCoordinates(),\n    });\n\n    if (this._objectsList)\n      this._objectsList.setState({ newObjectDialogOpen: true });\n  };\n\n  _onAddInstanceUnderCursor = () => {\n    if (!this.state.selectedObjectNames.length || !this.editor) {\n      return;\n    }\n\n    const objectSelected = this.state.selectedObjectNames[0];\n    const cursorPosition = this.editor.getLastCursorSceneCoordinates();\n    this._addInstance(cursorPosition, objectSelected);\n    this.setState({\n      selectedObjectNames: [objectSelected],\n    });\n  };\n\n  _addInstance = (pos: [number, number], objectName: string) => {\n    if (!objectName || !this.editor) return;\n\n    this.editor.addInstances(pos, [objectName]);\n    this.setState(\n      {\n        selectedObjectNames: [],\n        history: saveToHistory(this.state.history, this.props.initialInstances),\n      },\n      () => this.updateToolbar()\n    );\n  };\n\n  _onInstancesAdded = () => {\n    this.setState(\n      {\n        history: saveToHistory(this.state.history, this.props.initialInstances),\n      },\n      () => this.updateToolbar()\n    );\n  };\n\n  _onInstancesSelected = (instances: Array<gdInitialInstance>) => {\n    this.setState({\n      selectedObjectNames: uniq(\n        instances.map(instance => instance.getObjectName())\n      ),\n    });\n    this.forceUpdatePropertiesEditor();\n    this.updateToolbar();\n  };\n\n  _onInstanceDoubleClicked = (instance: gdInitialInstance) => {\n    this.editObjectByName(instance.getObjectName());\n  };\n\n  _onInstancesMoved = (instances: Array<gdInitialInstance>) => {\n    this.setState(\n      {\n        history: saveToHistory(this.state.history, this.props.initialInstances),\n      },\n      () => this.forceUpdatePropertiesEditor()\n    );\n  };\n\n  _onInstancesResized = (instances: Array<gdInitialInstance>) => {\n    this.setState(\n      {\n        history: saveToHistory(this.state.history, this.props.initialInstances),\n      },\n      () => this.forceUpdatePropertiesEditor()\n    );\n  };\n\n  _onInstancesRotated = (instances: Array<gdInitialInstance>) => {\n    this.setState(\n      {\n        history: saveToHistory(this.state.history, this.props.initialInstances),\n      },\n      () => this.forceUpdatePropertiesEditor()\n    );\n  };\n\n  _onInstancesModified = (instances: Array<gdInitialInstance>) => {\n    this.forceUpdate();\n    //TODO: Save for redo with debounce (and cancel on unmount)\n  };\n\n  _onSelectInstances = (\n    instances: Array<gdInitialInstance>,\n    centerView: boolean = true\n  ) => {\n    this.instancesSelection.selectInstances(instances, false);\n\n    if (centerView) {\n      if (this.editor) this.editor.centerViewOn(instances);\n    }\n    this.forceUpdatePropertiesEditor();\n    this.updateToolbar();\n  };\n\n  /**\n   * Create an instance of the given object, at the position\n   * previously chosen (see `newObjectInstanceSceneCoordinates`).\n   */\n  _addInstanceForNewObject = (newObjectName: string) => {\n    const { newObjectInstanceSceneCoordinates } = this.state;\n    if (!newObjectInstanceSceneCoordinates) {\n      return;\n    }\n\n    this._addInstance(newObjectInstanceSceneCoordinates, newObjectName);\n    this.setState({ newObjectInstanceSceneCoordinates: null });\n  };\n\n  _onRemoveLayer = (layerName: string, done: boolean => void) => {\n    this.setState({\n      layerRemoveDialogOpen: true,\n      layerRemoved: layerName,\n      onCloseLayerRemoveDialog: (doRemove, newLayer) => {\n        this.setState(\n          {\n            layerRemoveDialogOpen: false,\n          },\n          () => {\n            if (doRemove) {\n              if (newLayer === null) {\n                this.props.initialInstances.removeAllInstancesOnLayer(\n                  layerName\n                );\n              } else {\n                this.props.initialInstances.moveInstancesToLayer(\n                  layerName,\n                  newLayer\n                );\n              }\n            }\n\n            done(doRemove);\n            // /!\\ Force the instances editor to destroy and mount again the\n            // renderers to avoid keeping any references to existing instances\n            if (this.editor) this.editor.forceRemount();\n            this.updateToolbar();\n          }\n        );\n      },\n    });\n  };\n\n  _onRenameLayer = (\n    oldName: string,\n    newName: string,\n    done: boolean => void\n  ) => {\n    this.props.initialInstances.moveInstancesToLayer(oldName, newName);\n    done(true);\n  };\n\n  _onDeleteObject = (\n    objectWithContext: ObjectWithContext,\n    done: boolean => void\n  ) => {\n    const { object, global } = objectWithContext;\n    const { project, layout } = this.props;\n\n    const answer = Window.showConfirmDialog(\n      'Do you want to remove all references to this object in groups and events (actions and conditions using the object)?'\n    );\n\n    if (global) {\n      gd.WholeProjectRefactorer.globalObjectOrGroupRemoved(\n        project,\n        object.getName(),\n        /* isObjectGroup=*/ false,\n        !!answer\n      );\n    } else {\n      gd.WholeProjectRefactorer.objectOrGroupRemovedInLayout(\n        project,\n        layout,\n        object.getName(),\n        /* isObjectGroup=*/ false,\n        !!answer\n      );\n    }\n    done(true);\n  };\n\n  _canObjectOrGroupUseNewName = (newName: string) => {\n    const { project, layout } = this.props;\n\n    if (\n      layout.hasObjectNamed(newName) ||\n      project.hasObjectNamed(newName) ||\n      layout.getObjectGroups().has(newName) ||\n      project.getObjectGroups().has(newName)\n    ) {\n      showWarningBox('Another object or group with this name already exists.');\n      return false;\n    } else if (!gd.Project.validateName(newName)) {\n      showWarningBox(\n        'This name is invalid. Only use alphanumeric characters (0-9, a-z) and underscores. Digits are not allowed as the first character.'\n      );\n      return false;\n    }\n\n    return true;\n  };\n\n  _onRenameEditedObject = (newName: string) => {\n    const { editedObjectWithContext } = this.state;\n\n    if (editedObjectWithContext) {\n      this._onRenameObject(editedObjectWithContext, newName, () => {});\n    }\n  };\n\n  _onRenameObject = (\n    objectWithContext: ObjectWithContext,\n    newName: string,\n    done: boolean => void\n  ) => {\n    const { object, global } = objectWithContext;\n    const { project, layout } = this.props;\n\n    // newName is supposed to have been already validated\n\n    // Avoid triggering renaming refactoring if name has not really changed\n    if (object.getName() !== newName) {\n      if (global) {\n        gd.WholeProjectRefactorer.globalObjectOrGroupRenamed(\n          project,\n          object.getName(),\n          newName,\n          /* isObjectGroup=*/ false\n        );\n      } else {\n        gd.WholeProjectRefactorer.objectOrGroupRenamedInLayout(\n          project,\n          layout,\n          object.getName(),\n          newName,\n          /* isObjectGroup=*/ false\n        );\n      }\n    }\n\n    object.setName(newName);\n    done(true);\n  };\n\n  _onDeleteGroup = (\n    groupWithContext: GroupWithContext,\n    done: boolean => void\n  ) => {\n    const { group, global } = groupWithContext;\n    const { project, layout } = this.props;\n\n    const answer = Window.showConfirmDialog(\n      'Do you want to remove all references to this group in events (actions and conditions using the group)?'\n    );\n\n    if (global) {\n      gd.WholeProjectRefactorer.globalObjectOrGroupRemoved(\n        project,\n        group.getName(),\n        /* isObjectGroup=*/ true,\n        !!answer\n      );\n    } else {\n      gd.WholeProjectRefactorer.objectOrGroupRemovedInLayout(\n        project,\n        layout,\n        group.getName(),\n        /* isObjectGroup=*/ true,\n        !!answer\n      );\n    }\n    done(true);\n  };\n\n  _onRenameGroup = (\n    groupWithContext: GroupWithContext,\n    newName: string,\n    done: boolean => void\n  ) => {\n    const { group, global } = groupWithContext;\n    const { project, layout } = this.props;\n\n    // newName is supposed to have been already validated\n\n    // Avoid triggering renaming refactoring if name has not really changed\n    if (group.getName() !== newName) {\n      if (global) {\n        gd.WholeProjectRefactorer.globalObjectOrGroupRenamed(\n          project,\n          group.getName(),\n          newName,\n          /* isObjectGroup=*/ true\n        );\n      } else {\n        gd.WholeProjectRefactorer.objectOrGroupRenamedInLayout(\n          project,\n          layout,\n          group.getName(),\n          newName,\n          /* isObjectGroup=*/ true\n        );\n      }\n    }\n\n    done(true);\n  };\n\n  deleteSelection = () => {\n    const selectedInstances = this.instancesSelection.getSelectedInstances();\n    selectedInstances.map(instance =>\n      this.props.initialInstances.removeInstance(instance)\n    );\n\n    this.instancesSelection.clearSelection();\n    if (this.editor) this.editor.clearHighlightedInstance();\n\n    this.setState(\n      {\n        selectedObjectNames: [],\n        history: saveToHistory(this.state.history, this.props.initialInstances),\n      },\n      () => {\n        this.updateToolbar();\n        this.forceUpdatePropertiesEditor();\n      }\n    );\n  };\n\n  centerView = () => {\n    if (this.editor) this.editor.centerView();\n  };\n\n  setZoomFactor = (zoomFactor: number) => {\n    if (this.editor) this.editor.setZoomFactor(zoomFactor);\n  };\n\n  zoomIn = () => {\n    if (this.editor) this.editor.zoomBy(0.1);\n  };\n\n  zoomOut = () => {\n    if (this.editor) this.editor.zoomBy(-0.1);\n  };\n\n  _onContextMenu = (x: number, y: number) => {\n    if (this.contextMenu) this.contextMenu.open(x, y);\n  };\n\n  copySelection = ({ useLastCursorPosition }: CopyCutPasteOptions = {}) => {\n    const serializedSelection = this.instancesSelection\n      .getSelectedInstances()\n      .map(instance => serializeToJSObject(instance));\n\n    if (this.editor) {\n      const position = useLastCursorPosition\n        ? this.editor.getLastCursorSceneCoordinates()\n        : this.editor.getLastContextMenuSceneCoordinates();\n      Clipboard.set(INSTANCES_CLIPBOARD_KIND, {\n        x: position[0],\n        y: position[1],\n        instances: serializedSelection,\n      });\n    }\n  };\n\n  cutSelection = (options: CopyCutPasteOptions = {}) => {\n    this.copySelection(options);\n    this.deleteSelection();\n  };\n\n  paste = ({ useLastCursorPosition }: CopyCutPasteOptions = {}) => {\n    const clipboardContent = Clipboard.get(INSTANCES_CLIPBOARD_KIND);\n    if (!clipboardContent || !this.editor) return;\n\n    const position = useLastCursorPosition\n      ? this.editor.getLastCursorSceneCoordinates()\n      : this.editor.getLastContextMenuSceneCoordinates();\n    const { x, y } = clipboardContent;\n    clipboardContent.instances\n      .map(serializedInstance => {\n        const instance = new gd.InitialInstance();\n        unserializeFromJSObject(instance, serializedInstance);\n        return instance;\n      })\n      .forEach(instance => {\n        instance.setX(instance.getX() - x + position[0]);\n        instance.setY(instance.getY() - y + position[1]);\n        this.props.initialInstances.insertInitialInstance(instance);\n        instance.delete();\n      });\n  };\n\n  updateBehaviorsSharedData = () => {\n    const { layout, project } = this.props;\n    layout.updateBehaviorsSharedData(project);\n  };\n\n  forceUpdateObjectsList = () => {\n    if (this._objectsList) this._objectsList.forceUpdateList();\n  };\n\n  forceUpdatePropertiesEditor = () => {\n    if (this._propertiesEditor) this._propertiesEditor.forceUpdate();\n  };\n\n  reloadResourcesFor = (object: gdObject) => {\n    const { project } = this.props;\n\n    const resourcesInUse = new gd.ResourcesInUseHelper();\n    object.exposeResources(resourcesInUse);\n    const objectResourceNames = resourcesInUse\n      .getAllImages()\n      .toNewVectorString()\n      .toJSArray();\n\n    PixiResourcesLoader.loadTextures(\n      project,\n      objectResourceNames,\n      () => {},\n      () => {\n        if (this.editor) this.editor.resetRenderersFor(object.getName());\n      }\n    );\n  };\n\n  _getAllObjectTags = (): Array<string> => {\n    const { project, layout } = this.props;\n\n    const tagsSet: Set<string> = new Set();\n    enumerateObjects(project, layout).allObjectsList.forEach(({ object }) => {\n      getTagsFromString(object.getTags()).forEach(tag => tagsSet.add(tag));\n    });\n\n    return Array.from(tagsSet);\n  };\n\n  _buildObjectTagsMenuTemplate = (i18n: I18nType): Array<any> => {\n    const { selectedObjectTags } = this.state;\n\n    return buildTagsMenuTemplate({\n      noTagLabel: i18n._(t`No tags - add a tag to an object first`),\n      getAllTags: this._getAllObjectTags,\n      selectedTags: selectedObjectTags,\n      onChange: selectedObjectTags => {\n        this.setState({ selectedObjectTags });\n      },\n    });\n  };\n\n  render() {\n    const {\n      project,\n      layout,\n      initialInstances,\n      resourceSources,\n      onChooseResource,\n      resourceExternalEditors,\n      isActive,\n    } = this.props;\n    const selectedInstances = this.instancesSelection.getSelectedInstances();\n\n    const editors = {\n      properties: {\n        type: 'secondary',\n        title: t`Properties`,\n        renderEditor: () => (\n          <InstancePropertiesEditor\n            project={project}\n            layout={layout}\n            instances={selectedInstances}\n            editInstanceVariables={this.editInstanceVariables}\n            editObjectVariables={this.editObjectVariables}\n            onEditObjectByName={this.editObjectByName}\n            ref={propertiesEditor =>\n              (this._propertiesEditor = propertiesEditor)\n            }\n            unsavedChanges={this.props.unsavedChanges}\n          />\n        ),\n      },\n      layers: {\n        type: 'secondary',\n        title: t`Layers`,\n        renderEditor: () => (\n          <LayersList\n            project={project}\n            resourceSources={resourceSources}\n            resourceExternalEditors={resourceExternalEditors}\n            onChooseResource={onChooseResource}\n            freezeUpdate={false}\n            onRemoveLayer={this._onRemoveLayer}\n            onRenameLayer={this._onRenameLayer}\n            layersContainer={layout}\n            unsavedChanges={this.props.unsavedChanges}\n          />\n        ),\n      },\n      'instances-editor': {\n        type: 'primary',\n        noTitleBar: true,\n        renderEditor: () => (\n          <ScreenTypeMeasurer>\n            {screenType => (\n              <FullSizeInstancesEditor\n                project={project}\n                layout={layout}\n                initialInstances={initialInstances}\n                options={this.state.uiSettings}\n                onChangeOptions={this.setUiSettings}\n                instancesSelection={this.instancesSelection}\n                onDeleteSelection={this.deleteSelection}\n                onInstancesAdded={this._onInstancesAdded}\n                onInstancesSelected={this._onInstancesSelected}\n                onInstanceDoubleClicked={this._onInstanceDoubleClicked}\n                onInstancesMoved={this._onInstancesMoved}\n                onInstancesResized={this._onInstancesResized}\n                onInstancesRotated={this._onInstancesRotated}\n                selectedObjectNames={this.state.selectedObjectNames}\n                onContextMenu={this._onContextMenu}\n                onCopy={() =>\n                  this.copySelection({ useLastCursorPosition: true })\n                }\n                onCut={() => this.cutSelection({ useLastCursorPosition: true })}\n                onPaste={() => this.paste({ useLastCursorPosition: true })}\n                onUndo={this.undo}\n                onRedo={this.redo}\n                onZoomOut={this.zoomOut}\n                onZoomIn={this.zoomIn}\n                wrappedEditorRef={editor => (this.editor = editor)}\n                pauseRendering={!isActive}\n                screenType={screenType}\n              />\n            )}\n          </ScreenTypeMeasurer>\n        ),\n      },\n      'objects-list': {\n        type: 'secondary',\n        title: t`Objects`,\n        toolbarControls: [\n          <I18n key=\"tags\">\n            {({ i18n }) => (\n              <TagsButton\n                buildMenuTemplate={() =>\n                  this._buildObjectTagsMenuTemplate(i18n)\n                }\n              />\n            )}\n          </I18n>,\n          <CloseButton key=\"close\" />,\n        ],\n        renderEditor: () => (\n          <ObjectsList\n            getThumbnail={ObjectsRenderingService.getThumbnail.bind(\n              ObjectsRenderingService\n            )}\n            project={project}\n            objectsContainer={layout}\n            selectedObjectNames={this.state.selectedObjectNames}\n            onEditObject={this.props.onEditObject || this.editObject}\n            onDeleteObject={this._onDeleteObject}\n            canRenameObject={this._canObjectOrGroupUseNewName}\n            onObjectCreated={this._addInstanceForNewObject}\n            onObjectSelected={this._onObjectSelected}\n            onRenameObject={this._onRenameObject}\n            onObjectPasted={() => this.updateBehaviorsSharedData()}\n            selectedObjectTags={this.state.selectedObjectTags}\n            onChangeSelectedObjectTags={selectedObjectTags =>\n              this.setState({\n                selectedObjectTags,\n              })\n            }\n            getAllObjectTags={this._getAllObjectTags}\n            ref={objectsList => (this._objectsList = objectsList)}\n            unsavedChanges={this.props.unsavedChanges}\n          />\n        ),\n      },\n      'object-groups-list': {\n        type: 'secondary',\n        title: t`Object Groups`,\n        renderEditor: () => (\n          <ObjectGroupsList\n            globalObjectGroups={project.getObjectGroups()}\n            objectGroups={layout.getObjectGroups()}\n            onEditGroup={this.editGroup}\n            onDeleteGroup={this._onDeleteGroup}\n            onRenameGroup={this._onRenameGroup}\n            canRenameGroup={this._canObjectOrGroupUseNewName}\n            unsavedChanges={this.props.unsavedChanges}\n          />\n        ),\n      },\n    };\n    return (\n      <div style={styles.container}>\n        <ResponsiveWindowMeasurer>\n          {windowWidth => (\n            <EditorMosaic\n              editors={editors}\n              limitToOneSecondaryEditor={windowWidth === 'small'}\n              initialNodes={\n                windowWidth === 'small'\n                  ? initialEditorsSmallWindow\n                  : initialEditors\n              }\n              ref={editorMosaic => (this.editorMosaic = editorMosaic)}\n            />\n          )}\n        </ResponsiveWindowMeasurer>\n        {this.state.editedObjectWithContext && (\n          <ObjectEditorDialog\n            open\n            object={this.state.editedObjectWithContext.object}\n            project={project}\n            resourceSources={resourceSources}\n            resourceExternalEditors={resourceExternalEditors}\n            onChooseResource={onChooseResource}\n            onCancel={() => {\n              if (this.state.editedObjectWithContext) {\n                this.reloadResourcesFor(\n                  this.state.editedObjectWithContext.object\n                );\n              }\n              this.editObject(null);\n            }}\n            canRenameObject={this._canObjectOrGroupUseNewName}\n            onRename={newName => {\n              this._onRenameEditedObject(newName);\n            }}\n            onApply={() => {\n              if (this.state.editedObjectWithContext) {\n                this.reloadResourcesFor(\n                  this.state.editedObjectWithContext.object\n                );\n              }\n              this.editObject(null);\n              this.updateBehaviorsSharedData();\n              this.forceUpdateObjectsList();\n\n              if (this.props.unsavedChanges)\n                this.props.unsavedChanges.triggerUnsavedChanges();\n            }}\n          />\n        )}\n        {!!this.state.editedGroup && (\n          <ObjectGroupEditorDialog\n            project={project}\n            open\n            group={this.state.editedGroup}\n            objectsContainer={layout}\n            globalObjectsContainer={project}\n            onCancel={() => this.editGroup(null)}\n            onApply={() => this.editGroup(null)}\n          />\n        )}\n        <Drawer\n          open={this.state.instancesListOpen}\n          PaperProps={instancesDrawerPaperProps}\n          anchor=\"right\"\n          onClose={this.toggleInstancesList}\n        >\n          <EditorBar\n            title={<Trans>Instances</Trans>}\n            displayLeftCloseButton\n            onClose={this.toggleInstancesList}\n          />\n          <InstancesList\n            freezeUpdate={!this.state.instancesListOpen}\n            instances={initialInstances}\n            selectedInstances={selectedInstances}\n            onSelectInstances={this._onSelectInstances}\n            style={{\n              height: `calc(100% - ${editorBarHeight}px)`,\n            }}\n          />\n        </Drawer>\n        <InfoBar\n          identifier=\"instance-drag-n-drop-explanation\"\n          message={\n            <Trans>\n              Drag and Drop the object to the scene or use the right click menu\n              to add an instance of it.\n            </Trans>\n          }\n          touchScreenMessage={\n            <Trans>\n              Drag and Drop the object icon to the scene or long press to show\n              options to edit the object.\n            </Trans>\n          }\n          show={!!this.state.selectedObjectNames.length}\n        />\n        <InfoBar\n          identifier=\"objects-panel-explanation\"\n          message={\n            <Trans>\n              Objects panel is already opened: use it to add and edit objects.\n            </Trans>\n          }\n          show={!!this.state.showObjectsListInfoBar}\n        />\n        <InfoBar\n          identifier=\"instance-properties-panel-explanation\"\n          message={\n            <Trans>\n              Properties panel is already opened. After selecting an instance on\n              the scene, inspect and change its properties from this panel.\n            </Trans>\n          }\n          show={!!this.state.showPropertiesInfoBar}\n        />\n        <InfoBar\n          identifier=\"layers-panel-explanation\"\n          message={\n            <Trans>\n              Layers panel is already opened. You can add new layers and apply\n              effects on them from this panel.\n            </Trans>\n          }\n          show={!!this.state.showLayersInfoBar}\n        />\n        {this.state.setupGridOpen && (\n          <SetupGridDialog\n            open\n            gridOptions={this.state.uiSettings}\n            onCancel={() => this.openSetupGrid(false)}\n            onApply={gridOptions => {\n              this.setUiSettings(gridOptions);\n              this.openSetupGrid(false);\n            }}\n          />\n        )}\n        {!!this.state.variablesEditedInstance && (\n          <VariablesEditorDialog\n            open\n            variablesContainer={\n              this.state.variablesEditedInstance &&\n              this.state.variablesEditedInstance.getVariables()\n            }\n            onCancel={() => this.editInstanceVariables(null)}\n            onApply={() => this.editInstanceVariables(null)}\n            emptyExplanationMessage={\n              <Trans>\n                Instance variables will override the default values of the\n                variables of the object.\n              </Trans>\n            }\n            title={<Trans>Instance Variables</Trans>}\n            onEditObjectVariables={() => {\n              if (!this.instancesSelection.hasSelectedInstances()) {\n                return;\n              }\n              const associatedObjectName = this.instancesSelection\n                .getSelectedInstances()[0]\n                .getObjectName();\n              const object = getObjectByName(\n                project,\n                layout,\n                associatedObjectName\n              );\n              if (object) {\n                this.editObjectVariables(object);\n                this.editInstanceVariables(null);\n              }\n            }}\n          />\n        )}\n        {!!this.state.variablesEditedObject && (\n          <VariablesEditorDialog\n            open\n            variablesContainer={\n              this.state.variablesEditedObject &&\n              this.state.variablesEditedObject.getVariables()\n            }\n            onCancel={() => this.editObjectVariables(null)}\n            onApply={() => this.editObjectVariables(null)}\n            emptyExplanationMessage={\n              <Trans>\n                When you add variables to an object, any instance of the object\n                put on the scene or created during the game will have these\n                variables attached to it.\n              </Trans>\n            }\n            title={<Trans>Object Variables</Trans>}\n          />\n        )}\n        {!!this.state.layerRemoveDialogOpen && (\n          <LayerRemoveDialog\n            open\n            layersContainer={layout}\n            layerRemoved={this.state.layerRemoved}\n            onClose={this.state.onCloseLayerRemoveDialog}\n          />\n        )}\n        {this.state.scenePropertiesDialogOpen && (\n          <ScenePropertiesDialog\n            open\n            project={project}\n            layout={layout}\n            onClose={() => this.openSceneProperties(false)}\n            onApply={() => this.openSceneProperties(false)}\n            onEditVariables={() => this.editLayoutVariables(true)}\n            onOpenMoreSettings={this.props.onOpenMoreSettings}\n          />\n        )}\n        {!!this.state.layoutVariablesDialogOpen && (\n          <SceneVariablesDialog\n            open\n            layout={layout}\n            onApply={() => this.editLayoutVariables(false)}\n            onClose={() => this.editLayoutVariables(false)}\n          />\n        )}\n        <ContextMenu\n          ref={contextMenu => (this.contextMenu = contextMenu)}\n          buildMenuTemplate={() => [\n            {\n              label: this.state.selectedObjectNames.length\n                ? 'Add an Instance of ' +\n                  shortenString(this.state.selectedObjectNames[0], 7)\n                : '',\n              click: () => this._onAddInstanceUnderCursor(),\n              visible: this.state.selectedObjectNames.length > 0,\n            },\n            {\n              label: 'Insert a New Object',\n              click: () => this._createNewObjectAndInstanceUnderCursor(),\n              visible: this.state.selectedObjectNames.length === 0,\n            },\n            {\n              label: this.state.selectedObjectNames.length\n                ? 'Edit Object ' +\n                  shortenString(this.state.selectedObjectNames[0], 14)\n                : '',\n              click: () =>\n                this.editObjectByName(this.state.selectedObjectNames[0]),\n              visible: this.state.selectedObjectNames.length > 0,\n            },\n            {\n              label: 'Scene properties',\n              click: () => this.openSceneProperties(true),\n            },\n            { type: 'separator' },\n            {\n              label: 'Copy',\n              click: () => this.copySelection(),\n              enabled: this.instancesSelection.hasSelectedInstances(),\n              accelerator: 'CmdOrCtrl+C',\n            },\n            {\n              label: 'Cut',\n              click: () => this.cutSelection(),\n              enabled: this.instancesSelection.hasSelectedInstances(),\n              accelerator: 'CmdOrCtrl+X',\n            },\n            {\n              label: 'Paste',\n              click: () => this.paste(),\n              enabled: Clipboard.has(INSTANCES_CLIPBOARD_KIND),\n              accelerator: 'CmdOrCtrl+V',\n            },\n            { type: 'separator' },\n            {\n              label: 'Undo',\n              click: this.undo,\n              enabled: canUndo(this.state.history),\n              accelerator: 'CmdOrCtrl+Z',\n            },\n            {\n              label: 'Redo',\n              click: this.redo,\n              enabled: canRedo(this.state.history),\n              accelerator: 'CmdOrCtrl+Shift+Z',\n            },\n            {\n              label: 'Delete',\n              click: () => this.deleteSelection(),\n              enabled: this.instancesSelection.hasSelectedInstances(),\n            },\n          ]}\n        />\n      </div>\n    );\n  }\n}\n","// @flow\nimport ViewPosition from './ViewPosition';\n\nexport const shouldBeHandledByPinch = (event: ?TouchEvent) => {\n  if (!event) return false;\n\n  const { targetTouches } = event;\n  return targetTouches && targetTouches.length >= 2;\n};\n\ntype PinchDetectorArgs = {|\n  canvas: HTMLCanvasElement,\n  onPinchStart: () => void,\n  onPinchMove: (x: number, y: number, scale: number) => void,\n  onPinchEnd: () => void,\n|};\n\n/**\n * Attach events to the canvas that will notify of a pinch at some position\n * and scaling associated with it.\n * Returns a function that can be called to remove these events.\n */\nconst registerCanvasPinchDetector = ({\n  canvas,\n  onPinchStart,\n  onPinchMove,\n  onPinchEnd,\n}: PinchDetectorArgs) => {\n  let lastPinch = null;\n\n  function start() {\n    canvas.addEventListener('touchmove', move);\n  }\n\n  function move(e: TouchEvent) {\n    if (!shouldBeHandledByPinch(e)) {\n      return;\n    }\n    var t = e.targetTouches;\n\n    var dx = t[0].clientX - t[1].clientX;\n    var dy = t[0].clientY - t[1].clientY;\n    var distance = Math.sqrt(dx * dx + dy * dy);\n    if (!lastPinch) {\n      lastPinch = {\n        p: {\n          distance: distance,\n          date: new Date(),\n        },\n      };\n      onPinchStart();\n      return;\n    }\n    var now = new Date();\n    var interval = now - lastPinch.p.date;\n    if (interval < 12) {\n      return;\n    }\n    const newCenter = {\n      x: (t[0].clientX + t[1].clientX) / 2,\n      y: (t[0].clientY + t[1].clientY) / 2,\n    };\n    const scaleChange = distance / lastPinch.p.distance;\n\n    onPinchMove(newCenter.x, newCenter.y, scaleChange);\n    lastPinch.p = {\n      distance: distance,\n      date: now,\n    };\n  }\n\n  function end(e: TouchEvent) {\n    canvas.removeEventListener('touchmove', move);\n    if (!lastPinch) {\n      return;\n    }\n\n    onPinchEnd();\n    lastPinch = null;\n  }\n\n  canvas.addEventListener('touchstart', start);\n  canvas.addEventListener('touchend', end);\n\n  function unregisterCanvasPinchDetector() {\n    canvas.removeEventListener('touchstart', start);\n    canvas.removeEventListener('touchmove', move);\n    canvas.removeEventListener('touchend', end);\n  }\n\n  return unregisterCanvasPinchDetector;\n};\n\ntype Props = {|\n  canvas: HTMLCanvasElement,\n  setZoomFactor: number => void,\n  getZoomFactor: () => number,\n  viewPosition: ViewPosition,\n|};\n\n/**\n * Handle pinch to zoom/move on the canvas, changing the zoom factor or view\n * position accordingly.\n */\nexport default class PinchHandler {\n  _lastPinchCenterX: number | null = null;\n  _lastPinchCenterY: number | null = null;\n  _setZoomFactor: number => void;\n  _getZoomFactor: () => number;\n  _viewPosition: ViewPosition;\n  _unregisterCanvasPinchDetector: () => void;\n\n  constructor({ canvas, setZoomFactor, getZoomFactor, viewPosition }: Props) {\n    this._setZoomFactor = setZoomFactor;\n    this._getZoomFactor = getZoomFactor;\n    this._viewPosition = viewPosition;\n    this._unregisterCanvasPinchDetector = registerCanvasPinchDetector({\n      canvas,\n      onPinchStart: this._startPinch,\n      onPinchMove: this._onPinchMove,\n      onPinchEnd: this._endPinch,\n    });\n  }\n\n  _startPinch = () => {\n    // Nothing to do\n  };\n\n  _onPinchMove = (centerX: number, centerY: number, scale: number) => {\n    if (this._lastPinchCenterX === null || this._lastPinchCenterY === null) {\n      this._lastPinchCenterX = centerX;\n      this._lastPinchCenterY = centerY;\n      return;\n    }\n\n    const deltaX = centerX - this._lastPinchCenterX;\n    const deltaY = centerY - this._lastPinchCenterY;\n    const sceneDeltaX = deltaX / this._getZoomFactor();\n    const sceneDeltaY = deltaY / this._getZoomFactor();\n    this._viewPosition.scrollBy(-sceneDeltaX, -sceneDeltaY);\n    this._lastPinchCenterX = centerX;\n    this._lastPinchCenterY = centerY;\n\n    this._setZoomFactor(this._getZoomFactor() * scale);\n  };\n\n  _endPinch = () => {\n    this._lastPinchCenterX = null;\n    this._lastPinchCenterY = null;\n  };\n\n  unmount = () => {\n    this._unregisterCanvasPinchDetector();\n  };\n}\n","// @flow\n\nexport const roundPosition = (\n  pos: number,\n  gridSize: number,\n  gridOffset: number\n) => {\n  if (gridSize <= 0) {\n    return Math.round(pos);\n  }\n  return Math.floor((pos - gridOffset) / gridSize) * gridSize + gridOffset;\n};\n","import { mapFor } from '../Utils/MapFor';\n\nexport default layersContainer =>\n  mapFor(0, layersContainer.getLayersCount(), i => {\n    return {\n      value: layersContainer.getLayerAt(i).getName(),\n      label: layersContainer.getLayerAt(i).getName() || 'Base layer',\n    };\n  });\n","// @flow\nimport { Trans } from '@lingui/macro';\nimport { t } from '@lingui/macro';\n\nimport * as React from 'react';\nimport SelectField from '../../../../UI/SelectField';\nimport SelectOption from '../../../../UI/SelectOption';\n\nimport Toggle from '../../../../UI/Toggle';\nimport { mapFor } from '../../../../Utils/MapFor';\nimport { getCurrentElements } from './SpriteObjectHelper';\nimport { ResponsiveLineStackLayout } from '../../../../UI/Layout';\n\ntype Props = {|\n  spriteObject: gdSpriteObject,\n\n  animationIndex: number,\n  directionIndex: number,\n  spriteIndex: number,\n\n  chooseAnimation: number => void,\n  chooseDirection: number => void,\n  chooseSprite: number => void,\n\n  sameForAllAnimations: boolean,\n  sameForAllSprites: boolean,\n\n  setSameForAllAnimations: boolean => void,\n  setSameForAllSprites: boolean => void,\n\n  setSameForAllAnimationsLabel: string,\n  setSameForAllSpritesLabel: string,\n|};\n\n/**\n * A component that displays selector to browse the animations/directions/sprite\n * of a Sprite object. Also have toggles so that the user can choose if the edited property\n * (typically, the points or the collision masks of the sprite) should be shared between\n * all sprites of an animation, or between all sprites of all animations of the object.\n */\nexport default class SpriteSelector extends React.Component<Props, void> {\n  render() {\n    const {\n      spriteObject,\n      animationIndex,\n      directionIndex,\n      spriteIndex,\n      sameForAllAnimations,\n      sameForAllSprites,\n      chooseAnimation,\n      chooseDirection,\n      chooseSprite,\n      setSameForAllAnimations,\n      setSameForAllSprites,\n      setSameForAllAnimationsLabel,\n      setSameForAllSpritesLabel,\n    } = this.props;\n\n    const {\n      hasValidAnimation,\n      animation,\n      hasValidDirection,\n      direction,\n    } = getCurrentElements(\n      spriteObject,\n      animationIndex,\n      directionIndex,\n      spriteIndex\n    );\n\n    return (\n      <React.Fragment>\n        <ResponsiveLineStackLayout>\n          <SelectField\n            floatingLabelText={<Trans>Animation</Trans>}\n            value={this.props.animationIndex}\n            onChange={(e, i, value: string) =>\n              chooseAnimation(parseInt(value, 10) || 0)\n            }\n          >\n            {mapFor(0, spriteObject.getAnimationsCount(), i => {\n              const animation = spriteObject.getAnimation(i);\n              return (\n                <SelectOption\n                  key={i}\n                  value={i}\n                  primaryText={t`Animation #${i} ${animation.getName()}`}\n                />\n              );\n            })}\n          </SelectField>\n          {hasValidAnimation && animation.getDirectionsCount() > 1 && (\n            <SelectField\n              floatingLabelText={<Trans>Direction</Trans>}\n              value={this.props.directionIndex}\n              onChange={(e, i, value: string) =>\n                chooseDirection(parseInt(value, 10) || 0)\n              }\n            >\n              {mapFor(0, animation.getDirectionsCount(), i => {\n                return (\n                  <SelectOption\n                    value={i}\n                    key={i}\n                    primaryText={t`Direction #${i}`}\n                  />\n                );\n              })}\n            </SelectField>\n          )}\n          {hasValidDirection && (\n            <SelectField\n              floatingLabelText={<Trans>Frame</Trans>}\n              value={this.props.spriteIndex}\n              onChange={(e, i, value: string) =>\n                chooseSprite(parseInt(value, 10) || 0)\n              }\n            >\n              {mapFor(0, direction.getSpritesCount(), i => {\n                return (\n                  <SelectOption\n                    value={i}\n                    key={i}\n                    primaryText={t`Frame #${i}`}\n                  />\n                );\n              })}\n            </SelectField>\n          )}\n        </ResponsiveLineStackLayout>\n        <Toggle\n          label={setSameForAllAnimationsLabel}\n          labelPosition=\"right\"\n          toggled={sameForAllAnimations}\n          onToggle={(e, checked) => setSameForAllAnimations(checked)}\n        />\n        <Toggle\n          label={setSameForAllSpritesLabel}\n          labelPosition=\"right\"\n          toggled={sameForAllSprites}\n          onToggle={(e, checked) => setSameForAllSprites(checked)}\n        />\n      </React.Fragment>\n    );\n  }\n}\n","// @flow\nimport * as React from 'react';\nimport SceneEditor from '../../SceneEditor';\nimport {\n  serializeToJSObject,\n  unserializeFromJSObject,\n} from '../../Utils/Serializer';\nimport BaseEditor from './BaseEditor';\nimport { type PreviewOptions } from '../../Export/PreviewLauncher.flow';\n\nexport default class SceneEditorContainer extends BaseEditor {\n  editor: ?SceneEditor;\n\n  shouldComponentUpdate(nextProps: *) {\n    // This optimization is a bit more cautious than the one is BaseEditor, to still allow\n    // children, and in particular SceneEditor and InstancesEditor, to be notified when isActive\n    // goes from true to false (in which case PIXI rendering is halted). If isActive was false\n    // and remains false, it's safe to stop update here (PIXI rendering is already halted).\n    if (!this.props.isActive && !nextProps.isActive) {\n      return false;\n    }\n\n    return true;\n  }\n\n  updateToolbar() {\n    if (this.editor) this.editor.updateToolbar();\n  }\n\n  forceUpdateEditor() {\n    if (this.editor) this.editor.forceUpdateObjectsList();\n  }\n\n  getSerializedElements() {\n    const layout = this.getLayout();\n    if (!layout) return {};\n\n    return {\n      ...BaseEditor.getLayoutSerializedElements(layout),\n      instances: serializeToJSObject(layout.getInitialInstances()),\n      uiSettings: this.editor ? this.editor.getUiSettings() : {},\n    };\n  }\n\n  getLayout(): ?gdLayout {\n    const { project, layoutName } = this.props;\n    if (!project || !project.hasLayoutNamed(layoutName)) return null;\n\n    return project.getLayout(layoutName);\n  }\n\n  saveUiSettings = () => {\n    const layout = this.getLayout();\n    const editor = this.editor;\n\n    if (editor && layout) {\n      unserializeFromJSObject(\n        layout.getAssociatedSettings(),\n        editor.getUiSettings()\n      );\n    }\n  };\n\n  render() {\n    const { project, layoutName, isActive } = this.props;\n    const layout = this.getLayout();\n    if (!layout) {\n      //TODO: Error component\n      return <div>No layout called {layoutName} found!</div>;\n    }\n\n    return (\n      <SceneEditor\n        {...this.props}\n        ref={editor => (this.editor = editor)}\n        project={project}\n        layout={layout}\n        initialInstances={layout.getInitialInstances()}\n        initialUiSettings={serializeToJSObject(layout.getAssociatedSettings())}\n        onPreview={(options: PreviewOptions) =>\n          this.props.onPreview(project, layout, options)\n        }\n        previewButtonSettings={this.props.previewButtonSettings}\n        onOpenDebugger={this.props.onOpenDebugger}\n        isActive={isActive}\n      />\n    );\n  }\n}\n","// @flow\n\nexport const timeFunction = (fn: Function, onResult: number => void) => {\n  var t0 = performance.now();\n  fn();\n  var t1 = performance.now();\n  onResult(t1 - t0);\n};\n\nexport const timePromise = <T>(\n  promiseFn: () => Promise<T>,\n  onResult: number => void\n): Promise<T> => {\n  const t0 = performance.now();\n  return promiseFn().then(result => {\n    const t1 = performance.now();\n    onResult(t1 - t0);\n\n    return result;\n  });\n};\n","// @flow\nimport { type I18n } from '@lingui/core';\n\ntype TranslationFunction = (string => string) | null;\ntype NotNullTranslationFunction = string => string;\n\n/**\n * Given the i18n object, return the function that can be used\n * to translate strings. Useful for wiring i18n to extensions\n * and libGD.js, where translations is done with a simple string\n * to string function.\n */\nexport const getTranslationFunction = (i18n: ?I18n): TranslationFunction => {\n  const i18nModule = i18n; // Make flow happy, ensure i18nModule is const.\n  if (i18nModule) {\n    return (str: string) => i18nModule._(str);\n  }\n\n  return null;\n};\n\n/**\n * Given the i18n object, return the function that can be used\n * to translate strings. Useful for wiring i18n to extensions\n * and libGD.js, where translations is done with a simple string\n * to string function.\n */\nexport const getNotNullTranslationFunction = (\n  i18n: ?I18n\n): NotNullTranslationFunction => {\n  const i18nModule = i18n; // Make flow happy, ensure i18nModule is const.\n  if (i18nModule) {\n    return (str: string) => i18nModule._(str);\n  }\n\n  return (str: string) => str;\n};\n","// This file is generated by update-examples-extensions-usage-from-resources-examples.js script\n// prettier-ignore\nmodule.exports = {\n  \"admob\": {\n    \"description\": \"Demonstrate how to show ads from AdMob in your game: banners, interstitial screen or reward videos. Also useful to test that your AdMob account is working properly.\",\n    \"usedExtensions\": [\n      {\n        \"fullName\": \"Sprite\",\n        \"name\": \"Sprite\"\n      },\n      {\n        \"fullName\": \"Text object\",\n        \"name\": \"TextObject\"\n      },\n      {\n        \"fullName\": \"Scene management features\",\n        \"name\": \"BuiltinScene\"\n      },\n      {\n        \"fullName\": \"Features for all objects\",\n        \"name\": \"BuiltinObject\"\n      },\n      {\n        \"fullName\": \"Mouse features\",\n        \"name\": \"BuiltinMouse\"\n      },\n      {\n        \"fullName\": \"Standard events\",\n        \"name\": \"BuiltinCommonInstructions\"\n      },\n      {\n        \"fullName\": \"Variable features\",\n        \"name\": \"BuiltinVariables\"\n      },\n      {\n        \"fullName\": \"AdMob\",\n        \"name\": \"AdMob\"\n      }\n    ]\n  },\n  \"advanced-shape-based-painter\": {\n    \"description\": \"Show how to use Shape Painter objects to create a simple drawing app.\",\n    \"usedExtensions\": [\n      {\n        \"fullName\": \"Primitive drawing\",\n        \"name\": \"PrimitiveDrawing\"\n      },\n      {\n        \"fullName\": \"Sprite\",\n        \"name\": \"Sprite\"\n      },\n      {\n        \"fullName\": \"Text object\",\n        \"name\": \"TextObject\"\n      },\n      {\n        \"fullName\": \"Scene management features\",\n        \"name\": \"BuiltinScene\"\n      },\n      {\n        \"fullName\": \"Mouse features\",\n        \"name\": \"BuiltinMouse\"\n      },\n      {\n        \"fullName\": \"Standard events\",\n        \"name\": \"BuiltinCommonInstructions\"\n      },\n      {\n        \"fullName\": \"Features for all objects\",\n        \"name\": \"BuiltinObject\"\n      },\n      {\n        \"fullName\": \"Variable features\",\n        \"name\": \"BuiltinVariables\"\n      }\n    ]\n  },\n  \"animation-speed-scale\": {\n    \"description\": \"Change the speed of the animation of an object according to its movement speed.\",\n    \"usedExtensions\": [\n      {\n        \"fullName\": \"Sprite\",\n        \"name\": \"Sprite\"\n      },\n      {\n        \"fullName\": \"Tiled Sprite Object\",\n        \"name\": \"TiledSpriteObject\"\n      },\n      {\n        \"fullName\": \"Text object\",\n        \"name\": \"TextObject\"\n      },\n      {\n        \"fullName\": \"Platform Behavior\",\n        \"name\": \"PlatformBehavior\"\n      },\n      {\n        \"fullName\": \"Scene management features\",\n        \"name\": \"BuiltinScene\"\n      },\n      {\n        \"fullName\": \"System information\",\n        \"name\": \"SystemInfo\"\n      },\n      {\n        \"fullName\": \"Features for all objects\",\n        \"name\": \"BuiltinObject\"\n      },\n      {\n        \"fullName\": \"Keyboard features\",\n        \"name\": \"BuiltinKeyboard\"\n      },\n      {\n        \"fullName\": \"Variable features\",\n        \"name\": \"BuiltinVariables\"\n      },\n      {\n        \"fullName\": \"Standard events\",\n        \"name\": \"BuiltinCommonInstructions\"\n      },\n      {\n        \"fullName\": \"Cameras and layers features\",\n        \"name\": \"BuiltinCamera\"\n      },\n      {\n        \"fullName\": \"Mouse features\",\n        \"name\": \"BuiltinMouse\"\n      },\n      {\n        \"fullName\": \"Time\",\n        \"name\": \"BuiltinTime\"\n      }\n    ]\n  },\n  \"asteroids\": {\n    \"description\": \"An adptation of the classic arcade game Asteroids with GDevelop.\",\n    \"usedExtensions\": [\n      {\n        \"fullName\": \"Text object\",\n        \"name\": \"TextObject\"\n      },\n      {\n        \"fullName\": \"Scene management features\",\n        \"name\": \"BuiltinScene\"\n      },\n      {\n        \"fullName\": \"Features for all objects\",\n        \"name\": \"BuiltinObject\"\n      },\n      {\n        \"fullName\": \"Standard events\",\n        \"name\": \"BuiltinCommonInstructions\"\n      },\n      {\n        \"fullName\": \"Mouse features\",\n        \"name\": \"BuiltinMouse\"\n      },\n      {\n        \"fullName\": \"Sprite\",\n        \"name\": \"Sprite\"\n      },\n      {\n        \"fullName\": \"Destroy Outside Screen Behavior\",\n        \"name\": \"DestroyOutsideBehavior\"\n      },\n      {\n        \"fullName\": \"System information\",\n        \"name\": \"SystemInfo\"\n      },\n      {\n        \"fullName\": \"Variable features\",\n        \"name\": \"BuiltinVariables\"\n      },\n      {\n        \"fullName\": \"Time\",\n        \"name\": \"BuiltinTime\"\n      },\n      {\n        \"fullName\": \"Keyboard features\",\n        \"name\": \"BuiltinKeyboard\"\n      },\n      {\n        \"fullName\": \"Cameras and layers features\",\n        \"name\": \"BuiltinCamera\"\n      },\n      {\n        \"fullName\": \"Audio\",\n        \"name\": \"BuiltinAudio\"\n      }\n    ]\n  },\n  \"basic-ai-with-pathfinding\": {\n    \"description\": \"Show how to use pathfinding to make enemies chase the player.\",\n    \"usedExtensions\": [\n      {\n        \"fullName\": \"Sprite\",\n        \"name\": \"Sprite\"\n      },\n      {\n        \"fullName\": \"Text object\",\n        \"name\": \"TextObject\"\n      },\n      {\n        \"fullName\": \"Pathfinding behavior\",\n        \"name\": \"PathfindingBehavior\"\n      },\n      {\n        \"fullName\": \"Keyboard features\",\n        \"name\": \"BuiltinKeyboard\"\n      },\n      {\n        \"fullName\": \"Mouse features\",\n        \"name\": \"BuiltinMouse\"\n      },\n      {\n        \"fullName\": \"Features for all objects\",\n        \"name\": \"BuiltinObject\"\n      },\n      {\n        \"fullName\": \"Linked objects\",\n        \"name\": \"LinkedObjects\"\n      },\n      {\n        \"fullName\": \"Time\",\n        \"name\": \"BuiltinTime\"\n      }\n    ]\n  },\n  \"basic-artificial-intelligence\": {\n    \"description\": \"Show how to create enemies looking at the player and chasing him when spotted.\",\n    \"usedExtensions\": [\n      {\n        \"fullName\": \"Sprite\",\n        \"name\": \"Sprite\"\n      },\n      {\n        \"fullName\": \"Text object\",\n        \"name\": \"TextObject\"\n      },\n      {\n        \"fullName\": \"Keyboard features\",\n        \"name\": \"BuiltinKeyboard\"\n      },\n      {\n        \"fullName\": \"Mouse features\",\n        \"name\": \"BuiltinMouse\"\n      },\n      {\n        \"fullName\": \"Features for all objects\",\n        \"name\": \"BuiltinObject\"\n      },\n      {\n        \"fullName\": \"Linked objects\",\n        \"name\": \"LinkedObjects\"\n      },\n      {\n        \"fullName\": \"Time\",\n        \"name\": \"BuiltinTime\"\n      }\n    ]\n  },\n  \"basic-topdown-car-driving\": {\n    \"description\": \"Show how to create a car that can be controlled by the player.\",\n    \"usedExtensions\": [\n      {\n        \"fullName\": \"Sprite\",\n        \"name\": \"Sprite\"\n      },\n      {\n        \"fullName\": \"Text object\",\n        \"name\": \"TextObject\"\n      },\n      {\n        \"fullName\": \"Scene management features\",\n        \"name\": \"BuiltinScene\"\n      },\n      {\n        \"fullName\": \"System information\",\n        \"name\": \"SystemInfo\"\n      },\n      {\n        \"fullName\": \"Standard events\",\n        \"name\": \"BuiltinCommonInstructions\"\n      },\n      {\n        \"fullName\": \"Features for all objects\",\n        \"name\": \"BuiltinObject\"\n      },\n      {\n        \"fullName\": \"Keyboard features\",\n        \"name\": \"BuiltinKeyboard\"\n      },\n      {\n        \"fullName\": \"Cameras and layers features\",\n        \"name\": \"BuiltinCamera\"\n      },\n      {\n        \"fullName\": \"Mouse features\",\n        \"name\": \"BuiltinMouse\"\n      },\n      {\n        \"fullName\": \"Time\",\n        \"name\": \"BuiltinTime\"\n      },\n      {\n        \"fullName\": \"Audio\",\n        \"name\": \"BuiltinAudio\"\n      }\n    ]\n  },\n  \"bbtext-object-demo\": {\n    \"description\": \"This shows how to change the bbcode text of a BBText object displayed on the screen.\\n\",\n    \"usedExtensions\": [\n      {\n        \"fullName\": \"Text object\",\n        \"name\": \"TextObject\"\n      },\n      {\n        \"fullName\": \"BBCode Text Object\",\n        \"name\": \"BBText\"\n      },\n      {\n        \"fullName\": \"Draggable Behavior\",\n        \"name\": \"DraggableBehavior\"\n      },\n      {\n        \"fullName\": \"Standard events\",\n        \"name\": \"BuiltinCommonInstructions\"\n      },\n      {\n        \"fullName\": \"Keyboard features\",\n        \"name\": \"BuiltinKeyboard\"\n      },\n      {\n        \"fullName\": \"Mouse features\",\n        \"name\": \"BuiltinMouse\"\n      },\n      {\n        \"fullName\": \"Variable features\",\n        \"name\": \"BuiltinVariables\"\n      },\n      {\n        \"fullName\": \"Features for all objects\",\n        \"name\": \"BuiltinObject\"\n      }\n    ]\n  },\n  \"betabox-basics-learning-experience\": {\n    \"description\": \"Example level for teaching basic programming skills with extra features and assets.\",\n    \"usedExtensions\": [\n      {\n        \"fullName\": \"Sprite\",\n        \"name\": \"Sprite\"\n      },\n      {\n        \"fullName\": \"Panel Sprite (9-patch) Object\",\n        \"name\": \"PanelSpriteObject\"\n      },\n      {\n        \"fullName\": \"Tiled Sprite Object\",\n        \"name\": \"TiledSpriteObject\"\n      },\n      {\n        \"fullName\": \"Particle system\",\n        \"name\": \"ParticleSystem\"\n      },\n      {\n        \"fullName\": \"Text object\",\n        \"name\": \"TextObject\"\n      },\n      {\n        \"fullName\": \"Destroy Outside Screen Behavior\",\n        \"name\": \"DestroyOutsideBehavior\"\n      },\n      {\n        \"fullName\": \"Platform Behavior\",\n        \"name\": \"PlatformBehavior\"\n      },\n      {\n        \"fullName\": \"Anchor\",\n        \"name\": \"AnchorBehavior\"\n      },\n      {\n        \"fullName\": \"Scene management features\",\n        \"name\": \"BuiltinScene\"\n      },\n      {\n        \"fullName\": \"Keyboard features\",\n        \"name\": \"BuiltinKeyboard\"\n      },\n      {\n        \"fullName\": \"Standard events\",\n        \"name\": \"BuiltinCommonInstructions\"\n      },\n      {\n        \"fullName\": \"Cameras and layers features\",\n        \"name\": \"BuiltinCamera\"\n      },\n      {\n        \"fullName\": \"Features for all objects\",\n        \"name\": \"BuiltinObject\"\n      },\n      {\n        \"fullName\": \"System information\",\n        \"name\": \"SystemInfo\"\n      },\n      {\n        \"fullName\": \"Variable features\",\n        \"name\": \"BuiltinVariables\"\n      },\n      {\n        \"fullName\": \"Audio\",\n        \"name\": \"BuiltinAudio\"\n      },\n      {\n        \"fullName\": \"Mouse features\",\n        \"name\": \"BuiltinMouse\"\n      }\n    ]\n  },\n  \"bomb-the-crate\": {\n    \"description\": \"A basic bomberman like game, where the player can move on the map, drop bombs and destroy crates on the map.\",\n    \"usedExtensions\": [\n      {\n        \"fullName\": \"Sprite\",\n        \"name\": \"Sprite\"\n      },\n      {\n        \"fullName\": \"Tiled Sprite Object\",\n        \"name\": \"TiledSpriteObject\"\n      },\n      {\n        \"fullName\": \"Text object\",\n        \"name\": \"TextObject\"\n      },\n      {\n        \"fullName\": \"Keyboard features\",\n        \"name\": \"BuiltinKeyboard\"\n      },\n      {\n        \"fullName\": \"Standard events\",\n        \"name\": \"BuiltinCommonInstructions\"\n      },\n      {\n        \"fullName\": \"Features for all objects\",\n        \"name\": \"BuiltinObject\"\n      }\n    ]\n  },\n  \"bouncing-ball-and-rope\": {\n    \"description\": \"Simulate a bouncing ball with ropes that can be created to move the ball around anchors.\",\n    \"usedExtensions\": [\n      {\n        \"fullName\": \"Text object\",\n        \"name\": \"TextObject\"\n      },\n      {\n        \"fullName\": \"Sprite\",\n        \"name\": \"Sprite\"\n      },\n      {\n        \"fullName\": \"Tiled Sprite Object\",\n        \"name\": \"TiledSpriteObject\"\n      },\n      {\n        \"fullName\": \"Scene management features\",\n        \"name\": \"BuiltinScene\"\n      },\n      {\n        \"fullName\": \"Mouse features\",\n        \"name\": \"BuiltinMouse\"\n      },\n      {\n        \"fullName\": \"Cameras and layers features\",\n        \"name\": \"BuiltinCamera\"\n      },\n      {\n        \"fullName\": \"Primitive drawing\",\n        \"name\": \"PrimitiveDrawing\"\n      },\n      {\n        \"fullName\": \"Panel Sprite (9-patch) Object\",\n        \"name\": \"PanelSpriteObject\"\n      },\n      {\n        \"fullName\": \"Physics Engine 2.0\",\n        \"name\": \"Physics2\"\n      },\n      {\n        \"fullName\": \"Variable features\",\n        \"name\": \"BuiltinVariables\"\n      },\n      {\n        \"fullName\": \"Features for all objects\",\n        \"name\": \"BuiltinObject\"\n      },\n      {\n        \"fullName\": \"Standard events\",\n        \"name\": \"BuiltinCommonInstructions\"\n      },\n      {\n        \"fullName\": \"Linked objects\",\n        \"name\": \"LinkedObjects\"\n      }\n    ]\n  },\n  \"breakout\": {\n    \"description\": \"The classic Breakout arcade game adapted in GDevelop. Read the tutorial about it to learn how to make a game like this.\\n\",\n    \"usedExtensions\": [\n      {\n        \"fullName\": \"Text object\",\n        \"name\": \"TextObject\"\n      },\n      {\n        \"fullName\": \"Features for all objects\",\n        \"name\": \"BuiltinObject\"\n      },\n      {\n        \"fullName\": \"Mouse features\",\n        \"name\": \"BuiltinMouse\"\n      },\n      {\n        \"fullName\": \"Scene management features\",\n        \"name\": \"BuiltinScene\"\n      },\n      {\n        \"fullName\": \"Sprite\",\n        \"name\": \"Sprite\"\n      },\n      {\n        \"fullName\": \"Particle system\",\n        \"name\": \"ParticleSystem\"\n      },\n      {\n        \"fullName\": \"\",\n        \"name\": \"\"\n      },\n      {\n        \"fullName\": \"Keyboard features\",\n        \"name\": \"BuiltinKeyboard\"\n      },\n      {\n        \"fullName\": \"Standard events\",\n        \"name\": \"BuiltinCommonInstructions\"\n      },\n      {\n        \"fullName\": \"Variable features\",\n        \"name\": \"BuiltinVariables\"\n      },\n      {\n        \"fullName\": \"External layouts\",\n        \"name\": \"BuiltinExternalLayouts\"\n      },\n      {\n        \"fullName\": \"Physics Engine 2.0\",\n        \"name\": \"Physics2\"\n      }\n    ]\n  },\n  \"buttons\": {\n    \"description\": \"Learn how to make buttons for the menus in your game.\",\n    \"usedExtensions\": [\n      {\n        \"fullName\": \"Sprite\",\n        \"name\": \"Sprite\"\n      },\n      {\n        \"fullName\": \"Text object\",\n        \"name\": \"TextObject\"\n      },\n      {\n        \"fullName\": \"Features for all objects\",\n        \"name\": \"BuiltinObject\"\n      },\n      {\n        \"fullName\": \"Mouse features\",\n        \"name\": \"BuiltinMouse\"\n      },\n      {\n        \"fullName\": \"Scene management features\",\n        \"name\": \"BuiltinScene\"\n      }\n    ]\n  },\n  \"cannon-ball-with-physics\": {\n    \"description\": \"An example showing how to launch a ball from a cannon when using the Physics engine.\\n\",\n    \"usedExtensions\": [\n      {\n        \"fullName\": \"Sprite\",\n        \"name\": \"Sprite\"\n      },\n      {\n        \"fullName\": \"Tiled Sprite Object\",\n        \"name\": \"TiledSpriteObject\"\n      },\n      {\n        \"fullName\": \"Text object\",\n        \"name\": \"TextObject\"\n      },\n      {\n        \"fullName\": \"Physics Engine 2.0\",\n        \"name\": \"Physics2\"\n      },\n      {\n        \"fullName\": \"Scene management features\",\n        \"name\": \"BuiltinScene\"\n      },\n      {\n        \"fullName\": \"Mouse features\",\n        \"name\": \"BuiltinMouse\"\n      },\n      {\n        \"fullName\": \"Standard events\",\n        \"name\": \"BuiltinCommonInstructions\"\n      },\n      {\n        \"fullName\": \"Features for all objects\",\n        \"name\": \"BuiltinObject\"\n      },\n      {\n        \"fullName\": \"Storage\",\n        \"name\": \"BuiltinFile\"\n      }\n    ]\n  },\n  \"car-physics\": {\n    \"description\": \"A fun, physics based driving game\",\n    \"usedExtensions\": [\n      {\n        \"fullName\": \"Sprite\",\n        \"name\": \"Sprite\"\n      },\n      {\n        \"fullName\": \"Text object\",\n        \"name\": \"TextObject\"\n      },\n      {\n        \"fullName\": \"Physics Engine 2.0\",\n        \"name\": \"Physics2\"\n      },\n      {\n        \"fullName\": \"Scene management features\",\n        \"name\": \"BuiltinScene\"\n      },\n      {\n        \"fullName\": \"Standard events\",\n        \"name\": \"BuiltinCommonInstructions\"\n      },\n      {\n        \"fullName\": \"Keyboard features\",\n        \"name\": \"BuiltinKeyboard\"\n      },\n      {\n        \"fullName\": \"Features for all objects\",\n        \"name\": \"BuiltinObject\"\n      },\n      {\n        \"fullName\": \"Cameras and layers features\",\n        \"name\": \"BuiltinCamera\"\n      }\n    ]\n  },\n  \"center-object-within-another\": {\n    \"description\": \"How to put an object on the center of another\",\n    \"usedExtensions\": [\n      {\n        \"fullName\": \"Sprite\",\n        \"name\": \"Sprite\"\n      },\n      {\n        \"fullName\": \"Text object\",\n        \"name\": \"TextObject\"\n      },\n      {\n        \"fullName\": \"Mouse features\",\n        \"name\": \"BuiltinMouse\"\n      },\n      {\n        \"fullName\": \"Standard events\",\n        \"name\": \"BuiltinCommonInstructions\"\n      },\n      {\n        \"fullName\": \"Features for all objects\",\n        \"name\": \"BuiltinObject\"\n      }\n    ]\n  },\n  \"change-position-of-object\": {\n    \"description\": \"Show how to move an object by changing its X and Y position.\",\n    \"usedExtensions\": [\n      {\n        \"fullName\": \"Sprite\",\n        \"name\": \"Sprite\"\n      },\n      {\n        \"fullName\": \"Text object\",\n        \"name\": \"TextObject\"\n      },\n      {\n        \"fullName\": \"Keyboard features\",\n        \"name\": \"BuiltinKeyboard\"\n      },\n      {\n        \"fullName\": \"Mouse features\",\n        \"name\": \"BuiltinMouse\"\n      },\n      {\n        \"fullName\": \"Standard events\",\n        \"name\": \"BuiltinCommonInstructions\"\n      },\n      {\n        \"fullName\": \"Features for all objects\",\n        \"name\": \"BuiltinObject\"\n      }\n    ]\n  },\n  \"change-scale-of-sprites\": {\n    \"description\": \"Show how to change the scale of a sprite (to make a zoom effect for example).\",\n    \"usedExtensions\": [\n      {\n        \"fullName\": \"Sprite\",\n        \"name\": \"Sprite\"\n      },\n      {\n        \"fullName\": \"Text object\",\n        \"name\": \"TextObject\"\n      },\n      {\n        \"fullName\": \"Mouse features\",\n        \"name\": \"BuiltinMouse\"\n      },\n      {\n        \"fullName\": \"Standard events\",\n        \"name\": \"BuiltinCommonInstructions\"\n      },\n      {\n        \"fullName\": \"Features for all objects\",\n        \"name\": \"BuiltinObject\"\n      }\n    ]\n  },\n  \"change-sprite-animation\": {\n    \"description\": \"Learn how to change the animation of a Sprite object (useful for animating almost all objects in your game: characters, enemies, items...)\",\n    \"usedExtensions\": [\n      {\n        \"fullName\": \"Sprite\",\n        \"name\": \"Sprite\"\n      },\n      {\n        \"fullName\": \"Text object\",\n        \"name\": \"TextObject\"\n      },\n      {\n        \"fullName\": \"Standard events\",\n        \"name\": \"BuiltinCommonInstructions\"\n      },\n      {\n        \"fullName\": \"Mouse features\",\n        \"name\": \"BuiltinMouse\"\n      },\n      {\n        \"fullName\": \"Keyboard features\",\n        \"name\": \"BuiltinKeyboard\"\n      },\n      {\n        \"fullName\": \"Features for all objects\",\n        \"name\": \"BuiltinObject\"\n      },\n      {\n        \"fullName\": \"Variable features\",\n        \"name\": \"BuiltinVariables\"\n      }\n    ]\n  },\n  \"change-sprite-color\": {\n    \"description\": \"Learn how to change the color of a Sprite object - useful to achieve effects like invincibility with a blue tint or taking damage with a red effect. \",\n    \"usedExtensions\": [\n      {\n        \"fullName\": \"Sprite\",\n        \"name\": \"Sprite\"\n      },\n      {\n        \"fullName\": \"Destroy Outside Screen Behavior\",\n        \"name\": \"DestroyOutsideBehavior\"\n      },\n      {\n        \"fullName\": \"Features for all objects\",\n        \"name\": \"BuiltinObject\"\n      },\n      {\n        \"fullName\": \"Variable features\",\n        \"name\": \"BuiltinVariables\"\n      }\n    ]\n  },\n  \"character-selection\": {\n    \"description\": \"Example showing how to remember the character selected by the player and use it in other scenes.\",\n    \"usedExtensions\": [\n      {\n        \"fullName\": \"Sprite\",\n        \"name\": \"Sprite\"\n      },\n      {\n        \"fullName\": \"Text object\",\n        \"name\": \"TextObject\"\n      },\n      {\n        \"fullName\": \"Mouse features\",\n        \"name\": \"BuiltinMouse\"\n      },\n      {\n        \"fullName\": \"Features for all objects\",\n        \"name\": \"BuiltinObject\"\n      },\n      {\n        \"fullName\": \"Variable features\",\n        \"name\": \"BuiltinVariables\"\n      },\n      {\n        \"fullName\": \"Scene management features\",\n        \"name\": \"BuiltinScene\"\n      },\n      {\n        \"fullName\": \"Tiled Sprite Object\",\n        \"name\": \"TiledSpriteObject\"\n      },\n      {\n        \"fullName\": \"Platform Behavior\",\n        \"name\": \"PlatformBehavior\"\n      },\n      {\n        \"fullName\": \"Anchor\",\n        \"name\": \"AnchorBehavior\"\n      },\n      {\n        \"fullName\": \"Keyboard features\",\n        \"name\": \"BuiltinKeyboard\"\n      },\n      {\n        \"fullName\": \"Standard events\",\n        \"name\": \"BuiltinCommonInstructions\"\n      },\n      {\n        \"fullName\": \"System information\",\n        \"name\": \"SystemInfo\"\n      },\n      {\n        \"fullName\": \"Audio\",\n        \"name\": \"BuiltinAudio\"\n      },\n      {\n        \"fullName\": \"Cameras and layers features\",\n        \"name\": \"BuiltinCamera\"\n      }\n    ]\n  },\n  \"count-down-timer\": {\n    \"description\": \"Show how to use a variable as a timer and display it on screen like a bomb count down timer.\\n\",\n    \"usedExtensions\": [\n      {\n        \"fullName\": \"Text object\",\n        \"name\": \"TextObject\"\n      },\n      {\n        \"fullName\": \"Scene management features\",\n        \"name\": \"BuiltinScene\"\n      },\n      {\n        \"fullName\": \"Variable features\",\n        \"name\": \"BuiltinVariables\"\n      }\n    ]\n  },\n  \"create-object-with-mouseclick\": {\n    \"description\": \"Show how to create an object at the position of the click.\",\n    \"usedExtensions\": [\n      {\n        \"fullName\": \"Sprite\",\n        \"name\": \"Sprite\"\n      },\n      {\n        \"fullName\": \"Text object\",\n        \"name\": \"TextObject\"\n      },\n      {\n        \"fullName\": \"Mouse features\",\n        \"name\": \"BuiltinMouse\"\n      },\n      {\n        \"fullName\": \"Standard events\",\n        \"name\": \"BuiltinCommonInstructions\"\n      },\n      {\n        \"fullName\": \"Features for all objects\",\n        \"name\": \"BuiltinObject\"\n      }\n    ]\n  },\n  \"create-random-object\": {\n    \"description\": \"Show how to create a object randomly picked in a list.\\n\",\n    \"usedExtensions\": [\n      {\n        \"fullName\": \"Sprite\",\n        \"name\": \"Sprite\"\n      },\n      {\n        \"fullName\": \"Text object\",\n        \"name\": \"TextObject\"\n      },\n      {\n        \"fullName\": \"Mouse features\",\n        \"name\": \"BuiltinMouse\"\n      },\n      {\n        \"fullName\": \"Standard events\",\n        \"name\": \"BuiltinCommonInstructions\"\n      },\n      {\n        \"fullName\": \"Variable features\",\n        \"name\": \"BuiltinVariables\"\n      },\n      {\n        \"fullName\": \"Features for all objects\",\n        \"name\": \"BuiltinObject\"\n      }\n    ]\n  },\n  \"custom-font\": {\n    \"description\": \"Example showing a text with a custom font applied on it.\",\n    \"usedExtensions\": [\n      {\n        \"fullName\": \"Text object\",\n        \"name\": \"TextObject\"\n      },\n      {\n        \"fullName\": \"Scene management features\",\n        \"name\": \"BuiltinScene\"\n      }\n    ]\n  },\n  \"custom-mouse-pointer\": {\n    \"description\": \"Learn how to replace the mouse cursor by a custom image.\\n\",\n    \"usedExtensions\": [\n      {\n        \"fullName\": \"Sprite\",\n        \"name\": \"Sprite\"\n      },\n      {\n        \"fullName\": \"Text object\",\n        \"name\": \"TextObject\"\n      },\n      {\n        \"fullName\": \"Scene management features\",\n        \"name\": \"BuiltinScene\"\n      },\n      {\n        \"fullName\": \"Mouse features\",\n        \"name\": \"BuiltinMouse\"\n      },\n      {\n        \"fullName\": \"Features for all objects\",\n        \"name\": \"BuiltinObject\"\n      }\n    ]\n  },\n  \"customize-keys-with-lastpressedkey\": {\n    \"description\": \"This explains how to remember the last key that was pressed and customize the inputs of your game.\",\n    \"usedExtensions\": [\n      {\n        \"fullName\": \"Text object\",\n        \"name\": \"TextObject\"\n      },\n      {\n        \"fullName\": \"Sprite\",\n        \"name\": \"Sprite\"\n      },\n      {\n        \"fullName\": \"Scene management features\",\n        \"name\": \"BuiltinScene\"\n      },\n      {\n        \"fullName\": \"Keyboard features\",\n        \"name\": \"BuiltinKeyboard\"\n      },\n      {\n        \"fullName\": \"Features for all objects\",\n        \"name\": \"BuiltinObject\"\n      },\n      {\n        \"fullName\": \"Mouse features\",\n        \"name\": \"BuiltinMouse\"\n      },\n      {\n        \"fullName\": \"Variable features\",\n        \"name\": \"BuiltinVariables\"\n      }\n    ]\n  },\n  \"device-orientation-ballgame\": {\n    \"description\": \"Example showing how to use the device sensors to move a ball in a maze.\",\n    \"usedExtensions\": [\n      {\n        \"fullName\": \"Sprite\",\n        \"name\": \"Sprite\"\n      },\n      {\n        \"fullName\": \"Text object\",\n        \"name\": \"TextObject\"\n      },\n      {\n        \"fullName\": \"Scene management features\",\n        \"name\": \"BuiltinScene\"\n      },\n      {\n        \"fullName\": \"Device sensors\",\n        \"name\": \"DeviceSensors\"\n      },\n      {\n        \"fullName\": \"Features for all objects\",\n        \"name\": \"BuiltinObject\"\n      },\n      {\n        \"fullName\": \"Standard events\",\n        \"name\": \"BuiltinCommonInstructions\"\n      },\n      {\n        \"fullName\": \"Cameras and layers features\",\n        \"name\": \"BuiltinCamera\"\n      }\n    ]\n  },\n  \"device-orientation-compass\": {\n    \"description\": \"This shows how to use the device sensors to create a compass like app.\",\n    \"usedExtensions\": [\n      {\n        \"fullName\": \"Sprite\",\n        \"name\": \"Sprite\"\n      },\n      {\n        \"fullName\": \"Scene management features\",\n        \"name\": \"BuiltinScene\"\n      },\n      {\n        \"fullName\": \"Device sensors\",\n        \"name\": \"DeviceSensors\"\n      },\n      {\n        \"fullName\": \"Features for all objects\",\n        \"name\": \"BuiltinObject\"\n      }\n    ]\n  },\n  \"device-vibration\": {\n    \"description\": \"Show how to make the device vibrate.\",\n    \"usedExtensions\": [\n      {\n        \"fullName\": \"Text object\",\n        \"name\": \"TextObject\"\n      },\n      {\n        \"fullName\": \"Sprite\",\n        \"name\": \"Sprite\"\n      },\n      {\n        \"fullName\": \"Features for all objects\",\n        \"name\": \"BuiltinObject\"\n      },\n      {\n        \"fullName\": \"Mouse features\",\n        \"name\": \"BuiltinMouse\"\n      },\n      {\n        \"fullName\": \"Device vibration\",\n        \"name\": \"DeviceVibration\"\n      }\n    ]\n  },\n  \"dialogue-tree-with-yarn\": {\n    \"description\": \"A platformer showing a simple interactive story with dialogues like in RPG games, using the Yarn dialogue tree extension.\\n\",\n    \"usedExtensions\": [\n      {\n        \"fullName\": \"Sprite\",\n        \"name\": \"Sprite\"\n      },\n      {\n        \"fullName\": \"Tiled Sprite Object\",\n        \"name\": \"TiledSpriteObject\"\n      },\n      {\n        \"fullName\": \"Text object\",\n        \"name\": \"TextObject\"\n      },\n      {\n        \"fullName\": \"Panel Sprite (9-patch) Object\",\n        \"name\": \"PanelSpriteObject\"\n      },\n      {\n        \"fullName\": \"BBCode Text Object\",\n        \"name\": \"BBText\"\n      },\n      {\n        \"fullName\": \"Platform Behavior\",\n        \"name\": \"PlatformBehavior\"\n      },\n      {\n        \"fullName\": \"Anchor\",\n        \"name\": \"AnchorBehavior\"\n      },\n      {\n        \"fullName\": \"Features for all objects\",\n        \"name\": \"BuiltinObject\"\n      },\n      {\n        \"fullName\": \"Standard events\",\n        \"name\": \"BuiltinCommonInstructions\"\n      },\n      {\n        \"fullName\": \"Scene management features\",\n        \"name\": \"BuiltinScene\"\n      },\n      {\n        \"fullName\": \"Dialogue Tree (Experimental)\",\n        \"name\": \"DialogueTree\"\n      },\n      {\n        \"fullName\": \"Keyboard features\",\n        \"name\": \"BuiltinKeyboard\"\n      },\n      {\n        \"fullName\": \"System information\",\n        \"name\": \"SystemInfo\"\n      },\n      {\n        \"fullName\": \"Time\",\n        \"name\": \"BuiltinTime\"\n      },\n      {\n        \"fullName\": \"Cameras and layers features\",\n        \"name\": \"BuiltinCamera\"\n      },\n      {\n        \"fullName\": \"Audio\",\n        \"name\": \"BuiltinAudio\"\n      },\n      {\n        \"fullName\": \"Mouse features\",\n        \"name\": \"BuiltinMouse\"\n      },\n      {\n        \"fullName\": \"Variable features\",\n        \"name\": \"BuiltinVariables\"\n      }\n    ]\n  },\n  \"downhill-bike-physics-demo\": {\n    \"description\": \"A fun demo, using the Physics Engine to build an advanced simulation of a bike, with a person pedaling on it. Try to cross the finish line without falling and as fast as possible!\",\n    \"usedExtensions\": [\n      {\n        \"fullName\": \"Sprite\",\n        \"name\": \"Sprite\"\n      },\n      {\n        \"fullName\": \"Text object\",\n        \"name\": \"TextObject\"\n      },\n      {\n        \"fullName\": \"Tiled Sprite Object\",\n        \"name\": \"TiledSpriteObject\"\n      },\n      {\n        \"fullName\": \"Panel Sprite (9-patch) Object\",\n        \"name\": \"PanelSpriteObject\"\n      },\n      {\n        \"fullName\": \"Primitive drawing\",\n        \"name\": \"PrimitiveDrawing\"\n      },\n      {\n        \"fullName\": \"Physics Engine 2.0\",\n        \"name\": \"Physics2\"\n      },\n      {\n        \"fullName\": \"Scene management features\",\n        \"name\": \"BuiltinScene\"\n      },\n      {\n        \"fullName\": \"System information\",\n        \"name\": \"SystemInfo\"\n      },\n      {\n        \"fullName\": \"Advanced control features\",\n        \"name\": \"BuiltinAdvanced\"\n      },\n      {\n        \"fullName\": \"Variable features\",\n        \"name\": \"BuiltinVariables\"\n      },\n      {\n        \"fullName\": \"Standard events\",\n        \"name\": \"BuiltinCommonInstructions\"\n      },\n      {\n        \"fullName\": \"Keyboard features\",\n        \"name\": \"BuiltinKeyboard\"\n      },\n      {\n        \"fullName\": \"Features for all objects\",\n        \"name\": \"BuiltinObject\"\n      },\n      {\n        \"fullName\": \"Mouse features\",\n        \"name\": \"BuiltinMouse\"\n      },\n      {\n        \"fullName\": \"Cameras and layers features\",\n        \"name\": \"BuiltinCamera\"\n      },\n      {\n        \"fullName\": \"Window features\",\n        \"name\": \"BuiltinWindow\"\n      },\n      {\n        \"fullName\": \"Device vibration\",\n        \"name\": \"DeviceVibration\"\n      },\n      {\n        \"fullName\": \"Time\",\n        \"name\": \"BuiltinTime\"\n      }\n    ]\n  },\n  \"drag-camera-with-mouse\": {\n    \"description\": \"This shows how to allow the user to move on a map with the mouse.\",\n    \"usedExtensions\": [\n      {\n        \"fullName\": \"Sprite\",\n        \"name\": \"Sprite\"\n      },\n      {\n        \"fullName\": \"Text object\",\n        \"name\": \"TextObject\"\n      },\n      {\n        \"fullName\": \"Mouse features\",\n        \"name\": \"BuiltinMouse\"\n      },\n      {\n        \"fullName\": \"Standard events\",\n        \"name\": \"BuiltinCommonInstructions\"\n      },\n      {\n        \"fullName\": \"Variable features\",\n        \"name\": \"BuiltinVariables\"\n      },\n      {\n        \"fullName\": \"Cameras and layers features\",\n        \"name\": \"BuiltinCamera\"\n      }\n    ]\n  },\n  \"drop-collect-items-from-storage\": {\n    \"description\": \"Show how to make the player collect objects from boxes on the map.\",\n    \"usedExtensions\": [\n      {\n        \"fullName\": \"Sprite\",\n        \"name\": \"Sprite\"\n      },\n      {\n        \"fullName\": \"Text object\",\n        \"name\": \"TextObject\"\n      },\n      {\n        \"fullName\": \"Mouse features\",\n        \"name\": \"BuiltinMouse\"\n      },\n      {\n        \"fullName\": \"Features for all objects\",\n        \"name\": \"BuiltinObject\"\n      },\n      {\n        \"fullName\": \"Standard events\",\n        \"name\": \"BuiltinCommonInstructions\"\n      }\n    ]\n  },\n  \"endless-up-runner\": {\n    \"description\": \"A game where the player have to jump on platforms and avoid falling down as the screen goes up. With special objects (spring, rocks), score and Game Over handling!\",\n    \"usedExtensions\": [\n      {\n        \"fullName\": \"Sprite\",\n        \"name\": \"Sprite\"\n      },\n      {\n        \"fullName\": \"Text object\",\n        \"name\": \"TextObject\"\n      },\n      {\n        \"fullName\": \"Platform Behavior\",\n        \"name\": \"PlatformBehavior\"\n      },\n      {\n        \"fullName\": \"Scene management features\",\n        \"name\": \"BuiltinScene\"\n      },\n      {\n        \"fullName\": \"System information\",\n        \"name\": \"SystemInfo\"\n      },\n      {\n        \"fullName\": \"Variable features\",\n        \"name\": \"BuiltinVariables\"\n      },\n      {\n        \"fullName\": \"Standard events\",\n        \"name\": \"BuiltinCommonInstructions\"\n      },\n      {\n        \"fullName\": \"Keyboard features\",\n        \"name\": \"BuiltinKeyboard\"\n      },\n      {\n        \"fullName\": \"Features for all objects\",\n        \"name\": \"BuiltinObject\"\n      },\n      {\n        \"fullName\": \"Cameras and layers features\",\n        \"name\": \"BuiltinCamera\"\n      },\n      {\n        \"fullName\": \"Time\",\n        \"name\": \"BuiltinTime\"\n      },\n      {\n        \"fullName\": \"Mouse features\",\n        \"name\": \"BuiltinMouse\"\n      }\n    ]\n  },\n  \"exit-app\": {\n    \"description\": \"Simple example showing how to close your game.\",\n    \"usedExtensions\": [\n      {\n        \"fullName\": \"Text object\",\n        \"name\": \"TextObject\"\n      },\n      {\n        \"fullName\": \"Mouse features\",\n        \"name\": \"BuiltinMouse\"\n      },\n      {\n        \"fullName\": \"Scene management features\",\n        \"name\": \"BuiltinScene\"\n      }\n    ]\n  },\n  \"facebook-instant-game\": {\n    \"description\": \"Learn how to use the various Facebook Instant Games APIs to get information about the player, share their scores and have a leaderboard!\",\n    \"usedExtensions\": [\n      {\n        \"fullName\": \"Sprite\",\n        \"name\": \"Sprite\"\n      },\n      {\n        \"fullName\": \"Text object\",\n        \"name\": \"TextObject\"\n      },\n      {\n        \"fullName\": \"Scene management features\",\n        \"name\": \"BuiltinScene\"\n      },\n      {\n        \"fullName\": \"Mouse features\",\n        \"name\": \"BuiltinMouse\"\n      },\n      {\n        \"fullName\": \"Features for all objects\",\n        \"name\": \"BuiltinObject\"\n      },\n      {\n        \"fullName\": \"Standard events\",\n        \"name\": \"BuiltinCommonInstructions\"\n      },\n      {\n        \"fullName\": \"Variable features\",\n        \"name\": \"BuiltinVariables\"\n      },\n      {\n        \"fullName\": \"Facebook Instant Games\",\n        \"name\": \"FacebookInstantGames\"\n      }\n    ]\n  },\n  \"filesystem-create-directory\": {\n    \"description\": \"Show how to ask the user for a folder name and create it on the disk.\\n\",\n    \"usedExtensions\": [\n      {\n        \"fullName\": \"Sprite\",\n        \"name\": \"Sprite\"\n      },\n      {\n        \"fullName\": \"Text object\",\n        \"name\": \"TextObject\"\n      },\n      {\n        \"fullName\": \"Features for all objects\",\n        \"name\": \"BuiltinObject\"\n      },\n      {\n        \"fullName\": \"Mouse features\",\n        \"name\": \"BuiltinMouse\"\n      },\n      {\n        \"fullName\": \"Scene management features\",\n        \"name\": \"BuiltinScene\"\n      },\n      {\n        \"fullName\": \"Text entry object\",\n        \"name\": \"TextEntryObject\"\n      },\n      {\n        \"fullName\": \"Keyboard features\",\n        \"name\": \"BuiltinKeyboard\"\n      },\n      {\n        \"fullName\": \"Variable features\",\n        \"name\": \"BuiltinVariables\"\n      },\n      {\n        \"fullName\": \"Filesystem\",\n        \"name\": \"FileSystem\"\n      }\n    ]\n  },\n  \"find-diagonals\": {\n    \"description\": \"Show how to delete objects that are located at the diagonals of the click of the player in a board game.\",\n    \"usedExtensions\": [\n      {\n        \"fullName\": \"Sprite\",\n        \"name\": \"Sprite\"\n      },\n      {\n        \"fullName\": \"Text object\",\n        \"name\": \"TextObject\"\n      },\n      {\n        \"fullName\": \"Mouse features\",\n        \"name\": \"BuiltinMouse\"\n      },\n      {\n        \"fullName\": \"Standard events\",\n        \"name\": \"BuiltinCommonInstructions\"\n      },\n      {\n        \"fullName\": \"Features for all objects\",\n        \"name\": \"BuiltinObject\"\n      },\n      {\n        \"fullName\": \"Scene management features\",\n        \"name\": \"BuiltinScene\"\n      },\n      {\n        \"fullName\": \"Variable features\",\n        \"name\": \"BuiltinVariables\"\n      }\n    ]\n  },\n  \"flappy-bird\": {\n    \"description\": \"A clone of the challenging and popular Flappy Bird game, where you control a bird which has to avoid pipes.\\n\",\n    \"usedExtensions\": [\n      {\n        \"fullName\": \"Sprite\",\n        \"name\": \"Sprite\"\n      },\n      {\n        \"fullName\": \"Tiled Sprite Object\",\n        \"name\": \"TiledSpriteObject\"\n      },\n      {\n        \"fullName\": \"Text object\",\n        \"name\": \"TextObject\"\n      },\n      {\n        \"fullName\": \"\",\n        \"name\": \"\"\n      },\n      {\n        \"fullName\": \"Scene management features\",\n        \"name\": \"BuiltinScene\"\n      },\n      {\n        \"fullName\": \"Mouse features\",\n        \"name\": \"BuiltinMouse\"\n      },\n      {\n        \"fullName\": \"Features for all objects\",\n        \"name\": \"BuiltinObject\"\n      },\n      {\n        \"fullName\": \"Variable features\",\n        \"name\": \"BuiltinVariables\"\n      },\n      {\n        \"fullName\": \"Standard events\",\n        \"name\": \"BuiltinCommonInstructions\"\n      },\n      {\n        \"fullName\": \"Audio\",\n        \"name\": \"BuiltinAudio\"\n      },\n      {\n        \"fullName\": \"Storage\",\n        \"name\": \"BuiltinFile\"\n      },\n      {\n        \"fullName\": \"Platform Behavior\",\n        \"name\": \"PlatformBehavior\"\n      },\n      {\n        \"fullName\": \"Destroy Outside Screen Behavior\",\n        \"name\": \"DestroyOutsideBehavior\"\n      },\n      {\n        \"fullName\": \"Keyboard features\",\n        \"name\": \"BuiltinKeyboard\"\n      },\n      {\n        \"fullName\": \"System information\",\n        \"name\": \"SystemInfo\"\n      },\n      {\n        \"fullName\": \"Time\",\n        \"name\": \"BuiltinTime\"\n      }\n    ]\n  },\n  \"geodash\": {\n    \"description\": \"A fast paced game where you must jump and avoid obstacles.\",\n    \"usedExtensions\": [\n      {\n        \"fullName\": \"Sprite\",\n        \"name\": \"Sprite\"\n      },\n      {\n        \"fullName\": \"Text object\",\n        \"name\": \"TextObject\"\n      },\n      {\n        \"fullName\": \"Scene management features\",\n        \"name\": \"BuiltinScene\"\n      },\n      {\n        \"fullName\": \"Audio\",\n        \"name\": \"BuiltinAudio\"\n      },\n      {\n        \"fullName\": \"Mouse features\",\n        \"name\": \"BuiltinMouse\"\n      },\n      {\n        \"fullName\": \"Variable features\",\n        \"name\": \"BuiltinVariables\"\n      },\n      {\n        \"fullName\": \"Cameras and layers features\",\n        \"name\": \"BuiltinCamera\"\n      },\n      {\n        \"fullName\": \"Tiled Sprite Object\",\n        \"name\": \"TiledSpriteObject\"\n      },\n      {\n        \"fullName\": \"Panel Sprite (9-patch) Object\",\n        \"name\": \"PanelSpriteObject\"\n      },\n      {\n        \"fullName\": \"Particle system\",\n        \"name\": \"ParticleSystem\"\n      },\n      {\n        \"fullName\": \"Platform Behavior\",\n        \"name\": \"PlatformBehavior\"\n      },\n      {\n        \"fullName\": \"Time\",\n        \"name\": \"BuiltinTime\"\n      },\n      {\n        \"fullName\": \"Standard events\",\n        \"name\": \"BuiltinCommonInstructions\"\n      },\n      {\n        \"fullName\": \"Features for all objects\",\n        \"name\": \"BuiltinObject\"\n      },\n      {\n        \"fullName\": \"Keyboard features\",\n        \"name\": \"BuiltinKeyboard\"\n      }\n    ]\n  },\n  \"geometry-monster\": {\n    \"description\": \"A hyper casual endless game where you have to collect shapes and avoid bombs, with a progressively increasing difficulty.\\n\",\n    \"usedExtensions\": [\n      {\n        \"fullName\": \"Sprite\",\n        \"name\": \"Sprite\"\n      },\n      {\n        \"fullName\": \"\",\n        \"name\": \"\"\n      },\n      {\n        \"fullName\": \"Features for all objects\",\n        \"name\": \"BuiltinObject\"\n      },\n      {\n        \"fullName\": \"Mouse features\",\n        \"name\": \"BuiltinMouse\"\n      },\n      {\n        \"fullName\": \"Scene management features\",\n        \"name\": \"BuiltinScene\"\n      },\n      {\n        \"fullName\": \"Text object\",\n        \"name\": \"TextObject\"\n      },\n      {\n        \"fullName\": \"Particle system\",\n        \"name\": \"ParticleSystem\"\n      },\n      {\n        \"fullName\": \"Keyboard features\",\n        \"name\": \"BuiltinKeyboard\"\n      },\n      {\n        \"fullName\": \"Time\",\n        \"name\": \"BuiltinTime\"\n      },\n      {\n        \"fullName\": \"Audio\",\n        \"name\": \"BuiltinAudio\"\n      },\n      {\n        \"fullName\": \"Variable features\",\n        \"name\": \"BuiltinVariables\"\n      }\n    ]\n  },\n  \"health-bar\": {\n    \"description\": \"The platform example game adapted to add a health bar to the player, that is decreased when the player touches an enemy.\",\n    \"usedExtensions\": [\n      {\n        \"fullName\": \"Sprite\",\n        \"name\": \"Sprite\"\n      },\n      {\n        \"fullName\": \"Tiled Sprite Object\",\n        \"name\": \"TiledSpriteObject\"\n      },\n      {\n        \"fullName\": \"Text object\",\n        \"name\": \"TextObject\"\n      },\n      {\n        \"fullName\": \"Platform Behavior\",\n        \"name\": \"PlatformBehavior\"\n      },\n      {\n        \"fullName\": \"Anchor\",\n        \"name\": \"AnchorBehavior\"\n      },\n      {\n        \"fullName\": \"Scene management features\",\n        \"name\": \"BuiltinScene\"\n      },\n      {\n        \"fullName\": \"Keyboard features\",\n        \"name\": \"BuiltinKeyboard\"\n      },\n      {\n        \"fullName\": \"Standard events\",\n        \"name\": \"BuiltinCommonInstructions\"\n      },\n      {\n        \"fullName\": \"Features for all objects\",\n        \"name\": \"BuiltinObject\"\n      },\n      {\n        \"fullName\": \"System information\",\n        \"name\": \"SystemInfo\"\n      },\n      {\n        \"fullName\": \"Variable features\",\n        \"name\": \"BuiltinVariables\"\n      },\n      {\n        \"fullName\": \"Audio\",\n        \"name\": \"BuiltinAudio\"\n      },\n      {\n        \"fullName\": \"Cameras and layers features\",\n        \"name\": \"BuiltinCamera\"\n      },\n      {\n        \"fullName\": \"Mouse features\",\n        \"name\": \"BuiltinMouse\"\n      }\n    ]\n  },\n  \"infinite-scrolling-background\": {\n    \"description\": \"Learn how to create a background that is scolling infinitely.\",\n    \"usedExtensions\": [\n      {\n        \"fullName\": \"Sprite\",\n        \"name\": \"Sprite\"\n      },\n      {\n        \"fullName\": \"Scene management features\",\n        \"name\": \"BuiltinScene\"\n      },\n      {\n        \"fullName\": \"Features for all objects\",\n        \"name\": \"BuiltinObject\"\n      },\n      {\n        \"fullName\": \"Variable features\",\n        \"name\": \"BuiltinVariables\"\n      }\n    ]\n  },\n  \"inventory-system\": {\n    \"description\": \"Learn how to display an inventory, with object that can be addded or removed, and how to persist it in storage.\",\n    \"usedExtensions\": [\n      {\n        \"fullName\": \"Sprite\",\n        \"name\": \"Sprite\"\n      },\n      {\n        \"fullName\": \"Text object\",\n        \"name\": \"TextObject\"\n      },\n      {\n        \"fullName\": \"Scene management features\",\n        \"name\": \"BuiltinScene\"\n      },\n      {\n        \"fullName\": \"Mouse features\",\n        \"name\": \"BuiltinMouse\"\n      },\n      {\n        \"fullName\": \"Features for all objects\",\n        \"name\": \"BuiltinObject\"\n      },\n      {\n        \"fullName\": \"Variable features\",\n        \"name\": \"BuiltinVariables\"\n      },\n      {\n        \"fullName\": \"Cameras and layers features\",\n        \"name\": \"BuiltinCamera\"\n      },\n      {\n        \"fullName\": \"Inventory\",\n        \"name\": \"Inventory\"\n      },\n      {\n        \"fullName\": \"Standard events\",\n        \"name\": \"BuiltinCommonInstructions\"\n      },\n      {\n        \"fullName\": \"Keyboard features\",\n        \"name\": \"BuiltinKeyboard\"\n      },\n      {\n        \"fullName\": \"Linked objects\",\n        \"name\": \"LinkedObjects\"\n      },\n      {\n        \"fullName\": \"Storage\",\n        \"name\": \"BuiltinFile\"\n      }\n    ]\n  },\n  \"isometric-game\": {\n    \"description\": \"Example of making an isometric 2D game.\",\n    \"usedExtensions\": [\n      {\n        \"fullName\": \"Sprite\",\n        \"name\": \"Sprite\"\n      },\n      {\n        \"fullName\": \"Tiled Sprite Object\",\n        \"name\": \"TiledSpriteObject\"\n      },\n      {\n        \"fullName\": \"Top-down movement\",\n        \"name\": \"TopDownMovementBehavior\"\n      },\n      {\n        \"fullName\": \"Mouse features\",\n        \"name\": \"BuiltinMouse\"\n      },\n      {\n        \"fullName\": \"Features for all objects\",\n        \"name\": \"BuiltinObject\"\n      },\n      {\n        \"fullName\": \"Scene management features\",\n        \"name\": \"BuiltinScene\"\n      },\n      {\n        \"fullName\": \"Cameras and layers features\",\n        \"name\": \"BuiltinCamera\"\n      }\n    ]\n  },\n  \"javascript-blocks-in-platformer\": {\n    \"description\": \"This shows how to reproduce the Platformer example using JavaScript code instead of events.\",\n    \"usedExtensions\": [\n      {\n        \"fullName\": \"Sprite\",\n        \"name\": \"Sprite\"\n      },\n      {\n        \"fullName\": \"Tiled Sprite Object\",\n        \"name\": \"TiledSpriteObject\"\n      },\n      {\n        \"fullName\": \"Text object\",\n        \"name\": \"TextObject\"\n      },\n      {\n        \"fullName\": \"Platform Behavior\",\n        \"name\": \"PlatformBehavior\"\n      },\n      {\n        \"fullName\": \"Anchor\",\n        \"name\": \"AnchorBehavior\"\n      },\n      {\n        \"fullName\": \"Scene management features\",\n        \"name\": \"BuiltinScene\"\n      },\n      {\n        \"fullName\": \"Keyboard features\",\n        \"name\": \"BuiltinKeyboard\"\n      },\n      {\n        \"fullName\": \"Standard events\",\n        \"name\": \"BuiltinCommonInstructions\"\n      },\n      {\n        \"fullName\": \"Features for all objects\",\n        \"name\": \"BuiltinObject\"\n      },\n      {\n        \"fullName\": \"System information\",\n        \"name\": \"SystemInfo\"\n      },\n      {\n        \"fullName\": \"Audio\",\n        \"name\": \"BuiltinAudio\"\n      },\n      {\n        \"fullName\": \"Cameras and layers features\",\n        \"name\": \"BuiltinCamera\"\n      },\n      {\n        \"fullName\": \"Mouse features\",\n        \"name\": \"BuiltinMouse\"\n      },\n      {\n        \"fullName\": \"Variable features\",\n        \"name\": \"BuiltinVariables\"\n      }\n    ]\n  },\n  \"keyboard-practice\": {\n    \"description\": \"A simple game where the player must press the right keys on the keyboard as fast as possible.\",\n    \"usedExtensions\": [\n      {\n        \"fullName\": \"Sprite\",\n        \"name\": \"Sprite\"\n      },\n      {\n        \"fullName\": \"Text object\",\n        \"name\": \"TextObject\"\n      },\n      {\n        \"fullName\": \"Scene management features\",\n        \"name\": \"BuiltinScene\"\n      },\n      {\n        \"fullName\": \"Variable features\",\n        \"name\": \"BuiltinVariables\"\n      },\n      {\n        \"fullName\": \"Features for all objects\",\n        \"name\": \"BuiltinObject\"\n      },\n      {\n        \"fullName\": \"Keyboard features\",\n        \"name\": \"BuiltinKeyboard\"\n      },\n      {\n        \"fullName\": \"Mouse features\",\n        \"name\": \"BuiltinMouse\"\n      },\n      {\n        \"fullName\": \"Standard events\",\n        \"name\": \"BuiltinCommonInstructions\"\n      },\n      {\n        \"fullName\": \"Time\",\n        \"name\": \"BuiltinTime\"\n      },\n      {\n        \"fullName\": \"Audio\",\n        \"name\": \"BuiltinAudio\"\n      }\n    ]\n  },\n  \"level-editor\": {\n    \"description\": \"Example showing a basic level editor, where you can save and load positions of objects put on the scene during the game. Also shows how to use simple functions.\\n\",\n    \"usedExtensions\": [\n      {\n        \"fullName\": \"Text object\",\n        \"name\": \"TextObject\"\n      },\n      {\n        \"fullName\": \"Features for all objects\",\n        \"name\": \"BuiltinObject\"\n      },\n      {\n        \"fullName\": \"Standard events\",\n        \"name\": \"BuiltinCommonInstructions\"\n      },\n      {\n        \"fullName\": \"Mouse features\",\n        \"name\": \"BuiltinMouse\"\n      },\n      {\n        \"fullName\": \"Variable features\",\n        \"name\": \"BuiltinVariables\"\n      },\n      {\n        \"fullName\": \"Scene management features\",\n        \"name\": \"BuiltinScene\"\n      },\n      {\n        \"fullName\": \"Primitive drawing\",\n        \"name\": \"PrimitiveDrawing\"\n      },\n      {\n        \"fullName\": \"Sprite\",\n        \"name\": \"Sprite\"\n      },\n      {\n        \"fullName\": \"Tiled Sprite Object\",\n        \"name\": \"TiledSpriteObject\"\n      },\n      {\n        \"fullName\": \"Draggable Behavior\",\n        \"name\": \"DraggableBehavior\"\n      },\n      {\n        \"fullName\": \"Keyboard features\",\n        \"name\": \"BuiltinKeyboard\"\n      },\n      {\n        \"fullName\": \"Cameras and layers features\",\n        \"name\": \"BuiltinCamera\"\n      },\n      {\n        \"fullName\": \"Storage\",\n        \"name\": \"BuiltinFile\"\n      },\n      {\n        \"fullName\": \"\",\n        \"name\": \"\"\n      }\n    ]\n  },\n  \"level-selection-unlock\": {\n    \"description\": \"Show how to save user progress and progressively unlock levels.\\n\",\n    \"usedExtensions\": [\n      {\n        \"fullName\": \"Sprite\",\n        \"name\": \"Sprite\"\n      },\n      {\n        \"fullName\": \"Text object\",\n        \"name\": \"TextObject\"\n      },\n      {\n        \"fullName\": \"Scene management features\",\n        \"name\": \"BuiltinScene\"\n      },\n      {\n        \"fullName\": \"Storage\",\n        \"name\": \"BuiltinFile\"\n      },\n      {\n        \"fullName\": \"Mouse features\",\n        \"name\": \"BuiltinMouse\"\n      },\n      {\n        \"fullName\": \"Standard events\",\n        \"name\": \"BuiltinCommonInstructions\"\n      },\n      {\n        \"fullName\": \"Features for all objects\",\n        \"name\": \"BuiltinObject\"\n      }\n    ]\n  },\n  \"load-image-from-url\": {\n    \"description\": \"Advanced example showing how to use JavaScript to load an image from an external URL.\",\n    \"usedExtensions\": [\n      {\n        \"fullName\": \"Sprite\",\n        \"name\": \"Sprite\"\n      },\n      {\n        \"fullName\": \"Text object\",\n        \"name\": \"TextObject\"\n      },\n      {\n        \"fullName\": \"Scene management features\",\n        \"name\": \"BuiltinScene\"\n      },\n      {\n        \"fullName\": \"Standard events\",\n        \"name\": \"BuiltinCommonInstructions\"\n      },\n      {\n        \"fullName\": \"Keyboard features\",\n        \"name\": \"BuiltinKeyboard\"\n      },\n      {\n        \"fullName\": \"Mouse features\",\n        \"name\": \"BuiltinMouse\"\n      },\n      {\n        \"fullName\": \"Variable features\",\n        \"name\": \"BuiltinVariables\"\n      }\n    ]\n  },\n  \"magnet\": {\n    \"description\": \"Show how to move a ball like if it's attracted by a magnet.\",\n    \"usedExtensions\": [\n      {\n        \"fullName\": \"Sprite\",\n        \"name\": \"Sprite\"\n      },\n      {\n        \"fullName\": \"Scene management features\",\n        \"name\": \"BuiltinScene\"\n      },\n      {\n        \"fullName\": \"Features for all objects\",\n        \"name\": \"BuiltinObject\"\n      },\n      {\n        \"fullName\": \"Linked objects\",\n        \"name\": \"LinkedObjects\"\n      },\n      {\n        \"fullName\": \"Cameras and layers features\",\n        \"name\": \"BuiltinCamera\"\n      }\n    ]\n  },\n  \"manipulate-text-object\": {\n    \"description\": \"This shows how to change the text of a Text object displayed on the screen.\",\n    \"usedExtensions\": [\n      {\n        \"fullName\": \"Text object\",\n        \"name\": \"TextObject\"\n      },\n      {\n        \"fullName\": \"Draggable Behavior\",\n        \"name\": \"DraggableBehavior\"\n      },\n      {\n        \"fullName\": \"Keyboard features\",\n        \"name\": \"BuiltinKeyboard\"\n      },\n      {\n        \"fullName\": \"Mouse features\",\n        \"name\": \"BuiltinMouse\"\n      },\n      {\n        \"fullName\": \"Standard events\",\n        \"name\": \"BuiltinCommonInstructions\"\n      },\n      {\n        \"fullName\": \"Features for all objects\",\n        \"name\": \"BuiltinObject\"\n      }\n    ]\n  },\n  \"menu-with-functions-and-text-effects\": {\n    \"description\": \"How to implement the same menu across multiple scenes using functions and text effects for hover/active states.\\n\",\n    \"usedExtensions\": [\n      {\n        \"fullName\": \"Text object\",\n        \"name\": \"TextObject\"\n      },\n      {\n        \"fullName\": \"Sprite\",\n        \"name\": \"Sprite\"\n      },\n      {\n        \"fullName\": \"\",\n        \"name\": \"\"\n      }\n    ]\n  },\n  \"move-camera-to-position\": {\n    \"description\": \"This shows how to move the camera to the position of an object on a map.\",\n    \"usedExtensions\": [\n      {\n        \"fullName\": \"Sprite\",\n        \"name\": \"Sprite\"\n      },\n      {\n        \"fullName\": \"Text object\",\n        \"name\": \"TextObject\"\n      },\n      {\n        \"fullName\": \"Tiled Sprite Object\",\n        \"name\": \"TiledSpriteObject\"\n      },\n      {\n        \"fullName\": \"Draggable Behavior\",\n        \"name\": \"DraggableBehavior\"\n      },\n      {\n        \"fullName\": \"Scene management features\",\n        \"name\": \"BuiltinScene\"\n      },\n      {\n        \"fullName\": \"Standard events\",\n        \"name\": \"BuiltinCommonInstructions\"\n      },\n      {\n        \"fullName\": \"Cameras and layers features\",\n        \"name\": \"BuiltinCamera\"\n      },\n      {\n        \"fullName\": \"Variable features\",\n        \"name\": \"BuiltinVariables\"\n      }\n    ]\n  },\n  \"move-object-back-and-forth\": {\n    \"description\": \"Use events to move objects back and forth vertically or horizontally.\\n\",\n    \"usedExtensions\": [\n      {\n        \"fullName\": \"Sprite\",\n        \"name\": \"Sprite\"\n      },\n      {\n        \"fullName\": \"Scene management features\",\n        \"name\": \"BuiltinScene\"\n      },\n      {\n        \"fullName\": \"Variable features\",\n        \"name\": \"BuiltinVariables\"\n      },\n      {\n        \"fullName\": \"Features for all objects\",\n        \"name\": \"BuiltinObject\"\n      },\n      {\n        \"fullName\": \"Standard events\",\n        \"name\": \"BuiltinCommonInstructions\"\n      }\n    ]\n  },\n  \"move-object-in-circle\": {\n    \"description\": \"This shows how to make an object move in circle around some point.\",\n    \"usedExtensions\": [\n      {\n        \"fullName\": \"Sprite\",\n        \"name\": \"Sprite\"\n      },\n      {\n        \"fullName\": \"Text object\",\n        \"name\": \"TextObject\"\n      },\n      {\n        \"fullName\": \"Variable features\",\n        \"name\": \"BuiltinVariables\"\n      },\n      {\n        \"fullName\": \"Features for all objects\",\n        \"name\": \"BuiltinObject\"\n      }\n    ]\n  },\n  \"move-object-toward-position\": {\n    \"description\": \"This shows how to have an object move to a given position on the screen.\",\n    \"usedExtensions\": [\n      {\n        \"fullName\": \"Sprite\",\n        \"name\": \"Sprite\"\n      },\n      {\n        \"fullName\": \"Text object\",\n        \"name\": \"TextObject\"\n      },\n      {\n        \"fullName\": \"Keyboard features\",\n        \"name\": \"BuiltinKeyboard\"\n      },\n      {\n        \"fullName\": \"Mouse features\",\n        \"name\": \"BuiltinMouse\"\n      },\n      {\n        \"fullName\": \"Standard events\",\n        \"name\": \"BuiltinCommonInstructions\"\n      },\n      {\n        \"fullName\": \"Features for all objects\",\n        \"name\": \"BuiltinObject\"\n      }\n    ]\n  },\n  \"move-object-with-mouse-joint\": {\n    \"description\": \"Show how to use physics engine to move an object around with the mouse and realistic movements.\",\n    \"usedExtensions\": [\n      {\n        \"fullName\": \"Sprite\",\n        \"name\": \"Sprite\"\n      },\n      {\n        \"fullName\": \"Tiled Sprite Object\",\n        \"name\": \"TiledSpriteObject\"\n      },\n      {\n        \"fullName\": \"Physics Engine 2.0\",\n        \"name\": \"Physics2\"\n      },\n      {\n        \"fullName\": \"Mouse features\",\n        \"name\": \"BuiltinMouse\"\n      },\n      {\n        \"fullName\": \"Variable features\",\n        \"name\": \"BuiltinVariables\"\n      },\n      {\n        \"fullName\": \"Features for all objects\",\n        \"name\": \"BuiltinObject\"\n      }\n    ]\n  },\n  \"move-object-with-physics\": {\n    \"description\": \"This shows how to use the forces built in GDevelop to move an object.\",\n    \"usedExtensions\": [\n      {\n        \"fullName\": \"Sprite\",\n        \"name\": \"Sprite\"\n      },\n      {\n        \"fullName\": \"Text object\",\n        \"name\": \"TextObject\"\n      },\n      {\n        \"fullName\": \"Keyboard features\",\n        \"name\": \"BuiltinKeyboard\"\n      },\n      {\n        \"fullName\": \"Mouse features\",\n        \"name\": \"BuiltinMouse\"\n      },\n      {\n        \"fullName\": \"Standard events\",\n        \"name\": \"BuiltinCommonInstructions\"\n      },\n      {\n        \"fullName\": \"Features for all objects\",\n        \"name\": \"BuiltinObject\"\n      }\n    ]\n  },\n  \"multi-language-menu\": {\n    \"description\": \"Show how to translate a menu (titles, buttons) in multiple languages and add an option for the player to choose the language.\\n\",\n    \"usedExtensions\": [\n      {\n        \"fullName\": \"Text object\",\n        \"name\": \"TextObject\"\n      },\n      {\n        \"fullName\": \"Scene management features\",\n        \"name\": \"BuiltinScene\"\n      },\n      {\n        \"fullName\": \"Storage\",\n        \"name\": \"BuiltinFile\"\n      },\n      {\n        \"fullName\": \"Features for all objects\",\n        \"name\": \"BuiltinObject\"\n      },\n      {\n        \"fullName\": \"Mouse features\",\n        \"name\": \"BuiltinMouse\"\n      },\n      {\n        \"fullName\": \"Variable features\",\n        \"name\": \"BuiltinVariables\"\n      },\n      {\n        \"fullName\": \"Standard events\",\n        \"name\": \"BuiltinCommonInstructions\"\n      }\n    ]\n  },\n  \"multiplayer-platformer-with-gamepads\": {\n    \"description\": \"Example showing how to use the Gamepads extension to read the state of gamepads (or controllers), for 2 players.\\n\",\n    \"usedExtensions\": [\n      {\n        \"fullName\": \"Sprite\",\n        \"name\": \"Sprite\"\n      },\n      {\n        \"fullName\": \"Tiled Sprite Object\",\n        \"name\": \"TiledSpriteObject\"\n      },\n      {\n        \"fullName\": \"Text object\",\n        \"name\": \"TextObject\"\n      },\n      {\n        \"fullName\": \"Platform Behavior\",\n        \"name\": \"PlatformBehavior\"\n      },\n      {\n        \"fullName\": \"Anchor\",\n        \"name\": \"AnchorBehavior\"\n      },\n      {\n        \"fullName\": \"Scene management features\",\n        \"name\": \"BuiltinScene\"\n      },\n      {\n        \"fullName\": \"Keyboard features\",\n        \"name\": \"BuiltinKeyboard\"\n      },\n      {\n        \"fullName\": \"Standard events\",\n        \"name\": \"BuiltinCommonInstructions\"\n      },\n      {\n        \"fullName\": \"Features for all objects\",\n        \"name\": \"BuiltinObject\"\n      },\n      {\n        \"fullName\": \"System information\",\n        \"name\": \"SystemInfo\"\n      },\n      {\n        \"fullName\": \"Audio\",\n        \"name\": \"BuiltinAudio\"\n      },\n      {\n        \"fullName\": \"Cameras and layers features\",\n        \"name\": \"BuiltinCamera\"\n      },\n      {\n        \"fullName\": \"Mouse features\",\n        \"name\": \"BuiltinMouse\"\n      },\n      {\n        \"fullName\": \"Variable features\",\n        \"name\": \"BuiltinVariables\"\n      },\n      {\n        \"fullName\": \"\",\n        \"name\": \"\"\n      }\n    ]\n  },\n  \"multitouch\": {\n    \"description\": \"This show how to create multiple markers when the player touches the screen.\",\n    \"usedExtensions\": [\n      {\n        \"fullName\": \"Sprite\",\n        \"name\": \"Sprite\"\n      },\n      {\n        \"fullName\": \"Text object\",\n        \"name\": \"TextObject\"\n      },\n      {\n        \"fullName\": \"Mouse features\",\n        \"name\": \"BuiltinMouse\"\n      },\n      {\n        \"fullName\": \"Features for all objects\",\n        \"name\": \"BuiltinObject\"\n      }\n    ]\n  },\n  \"object-gravity\": {\n    \"description\": \"Use the physics engine to simulate an object moving on a small planet.\",\n    \"usedExtensions\": [\n      {\n        \"fullName\": \"Sprite\",\n        \"name\": \"Sprite\"\n      },\n      {\n        \"fullName\": \"Text object\",\n        \"name\": \"TextObject\"\n      },\n      {\n        \"fullName\": \"Physics Engine 2.0\",\n        \"name\": \"Physics2\"\n      },\n      {\n        \"fullName\": \"Standard events\",\n        \"name\": \"BuiltinCommonInstructions\"\n      },\n      {\n        \"fullName\": \"Features for all objects\",\n        \"name\": \"BuiltinObject\"\n      },\n      {\n        \"fullName\": \"Keyboard features\",\n        \"name\": \"BuiltinKeyboard\"\n      }\n    ]\n  },\n  \"object-selection\": {\n    \"description\": \"Simple example showing how the engine of GDevelop select objects to be used in conditions and actions.\",\n    \"usedExtensions\": [\n      {\n        \"fullName\": \"Sprite\",\n        \"name\": \"Sprite\"\n      },\n      {\n        \"fullName\": \"Text object\",\n        \"name\": \"TextObject\"\n      },\n      {\n        \"fullName\": \"Mouse features\",\n        \"name\": \"BuiltinMouse\"\n      },\n      {\n        \"fullName\": \"Standard events\",\n        \"name\": \"BuiltinCommonInstructions\"\n      },\n      {\n        \"fullName\": \"Features for all objects\",\n        \"name\": \"BuiltinObject\"\n      },\n      {\n        \"fullName\": \"Variable features\",\n        \"name\": \"BuiltinVariables\"\n      }\n    ]\n  },\n  \"objects-timers\": {\n    \"description\": \"Example showing various usage of objects timers (timers that are stored into instances of objects on the scene, as opposed to scene timers which are stored by the scene).\",\n    \"usedExtensions\": [\n      {\n        \"fullName\": \"Sprite\",\n        \"name\": \"Sprite\"\n      },\n      {\n        \"fullName\": \"Text object\",\n        \"name\": \"TextObject\"\n      },\n      {\n        \"fullName\": \"Scene management features\",\n        \"name\": \"BuiltinScene\"\n      },\n      {\n        \"fullName\": \"Features for all objects\",\n        \"name\": \"BuiltinObject\"\n      },\n      {\n        \"fullName\": \"Mouse features\",\n        \"name\": \"BuiltinMouse\"\n      },\n      {\n        \"fullName\": \"Standard events\",\n        \"name\": \"BuiltinCommonInstructions\"\n      }\n    ]\n  },\n  \"open-url-in-browser\": {\n    \"description\": \"This shows how to open a website on the system default browser.\",\n    \"usedExtensions\": [\n      {\n        \"fullName\": \"Text object\",\n        \"name\": \"TextObject\"\n      },\n      {\n        \"fullName\": \"Mouse features\",\n        \"name\": \"BuiltinMouse\"\n      },\n      {\n        \"fullName\": \"Standard events\",\n        \"name\": \"BuiltinCommonInstructions\"\n      },\n      {\n        \"fullName\": \"Storage\",\n        \"name\": \"BuiltinFile\"\n      }\n    ]\n  },\n  \"pairs\": {\n    \"description\": \"Find all matching pairs of cards in this relaxing game. Use tweens to create smooth, natural animations with a few events.\\n\",\n    \"usedExtensions\": [\n      {\n        \"fullName\": \"Sprite\",\n        \"name\": \"Sprite\"\n      },\n      {\n        \"fullName\": \"Text object\",\n        \"name\": \"TextObject\"\n      },\n      {\n        \"fullName\": \"Particle system\",\n        \"name\": \"ParticleSystem\"\n      },\n      {\n        \"fullName\": \"Tween animation\",\n        \"name\": \"Tween\"\n      },\n      {\n        \"fullName\": \"Scene management features\",\n        \"name\": \"BuiltinScene\"\n      },\n      {\n        \"fullName\": \"Features for all objects\",\n        \"name\": \"BuiltinObject\"\n      },\n      {\n        \"fullName\": \"Variable features\",\n        \"name\": \"BuiltinVariables\"\n      },\n      {\n        \"fullName\": \"Mouse features\",\n        \"name\": \"BuiltinMouse\"\n      },\n      {\n        \"fullName\": \"Time\",\n        \"name\": \"BuiltinTime\"\n      },\n      {\n        \"fullName\": \"Standard events\",\n        \"name\": \"BuiltinCommonInstructions\"\n      },\n      {\n        \"fullName\": \"Cameras and layers features\",\n        \"name\": \"BuiltinCamera\"\n      },\n      {\n        \"fullName\": \"Audio\",\n        \"name\": \"BuiltinAudio\"\n      }\n    ]\n  },\n  \"parallax\": {\n    \"description\": \"Shows how to have multiple layers with a parallax effect (where the background layers move slower than the foreground).\",\n    \"usedExtensions\": [\n      {\n        \"fullName\": \"Sprite\",\n        \"name\": \"Sprite\"\n      },\n      {\n        \"fullName\": \"Keyboard features\",\n        \"name\": \"BuiltinKeyboard\"\n      },\n      {\n        \"fullName\": \"Features for all objects\",\n        \"name\": \"BuiltinObject\"\n      },\n      {\n        \"fullName\": \"Cameras and layers features\",\n        \"name\": \"BuiltinCamera\"\n      }\n    ]\n  },\n  \"parallax-scrolling\": {\n    \"description\": \"Another example showing how to have multiple layers with a parallax effect (where the background layers move slower than the foreground).\",\n    \"usedExtensions\": [\n      {\n        \"fullName\": \"Sprite\",\n        \"name\": \"Sprite\"\n      },\n      {\n        \"fullName\": \"Text object\",\n        \"name\": \"TextObject\"\n      },\n      {\n        \"fullName\": \"Platform Behavior\",\n        \"name\": \"PlatformBehavior\"\n      },\n      {\n        \"fullName\": \"Scene management features\",\n        \"name\": \"BuiltinScene\"\n      },\n      {\n        \"fullName\": \"Keyboard features\",\n        \"name\": \"BuiltinKeyboard\"\n      },\n      {\n        \"fullName\": \"Features for all objects\",\n        \"name\": \"BuiltinObject\"\n      },\n      {\n        \"fullName\": \"Cameras and layers features\",\n        \"name\": \"BuiltinCamera\"\n      }\n    ]\n  },\n  \"parse-json-from-api\": {\n    \"description\": \"Advanced example where JSON content is fetched from a website and information extracted from it.\",\n    \"usedExtensions\": [\n      {\n        \"fullName\": \"Sprite\",\n        \"name\": \"Sprite\"\n      },\n      {\n        \"fullName\": \"Text object\",\n        \"name\": \"TextObject\"\n      },\n      {\n        \"fullName\": \"Scene management features\",\n        \"name\": \"BuiltinScene\"\n      },\n      {\n        \"fullName\": \"Standard events\",\n        \"name\": \"BuiltinCommonInstructions\"\n      },\n      {\n        \"fullName\": \"Keyboard features\",\n        \"name\": \"BuiltinKeyboard\"\n      },\n      {\n        \"fullName\": \"Mouse features\",\n        \"name\": \"BuiltinMouse\"\n      },\n      {\n        \"fullName\": \"Variable features\",\n        \"name\": \"BuiltinVariables\"\n      },\n      {\n        \"fullName\": \"Basic internet features\",\n        \"name\": \"BuiltinNetwork\"\n      }\n    ]\n  },\n  \"parse-json-string\": {\n    \"description\": \"Advanced example showing how to extract information from a JSON formatted string.\",\n    \"usedExtensions\": [\n      {\n        \"fullName\": \"Text object\",\n        \"name\": \"TextObject\"\n      },\n      {\n        \"fullName\": \"Scene management features\",\n        \"name\": \"BuiltinScene\"\n      },\n      {\n        \"fullName\": \"Basic internet features\",\n        \"name\": \"BuiltinNetwork\"\n      }\n    ]\n  },\n  \"particles-explosions\": {\n    \"description\": \"Create explosion effects with the particles engine.\",\n    \"usedExtensions\": [\n      {\n        \"fullName\": \"Particle system\",\n        \"name\": \"ParticleSystem\"\n      },\n      {\n        \"fullName\": \"Time\",\n        \"name\": \"BuiltinTime\"\n      },\n      {\n        \"fullName\": \"Features for all objects\",\n        \"name\": \"BuiltinObject\"\n      }\n    ]\n  },\n  \"particles-various-effects\": {\n    \"description\": \"Create various effects with the particles engine.\",\n    \"usedExtensions\": [\n      {\n        \"fullName\": \"Particle system\",\n        \"name\": \"ParticleSystem\"\n      },\n      {\n        \"fullName\": \"Time\",\n        \"name\": \"BuiltinTime\"\n      },\n      {\n        \"fullName\": \"Features for all objects\",\n        \"name\": \"BuiltinObject\"\n      }\n    ]\n  },\n  \"pathfinding\": {\n    \"description\": \"This show how to have an object moving from its position to another automatically avoiding obstacles.\",\n    \"usedExtensions\": [\n      {\n        \"fullName\": \"Sprite\",\n        \"name\": \"Sprite\"\n      },\n      {\n        \"fullName\": \"Tiled Sprite Object\",\n        \"name\": \"TiledSpriteObject\"\n      },\n      {\n        \"fullName\": \"Pathfinding behavior\",\n        \"name\": \"PathfindingBehavior\"\n      },\n      {\n        \"fullName\": \"Mouse features\",\n        \"name\": \"BuiltinMouse\"\n      },\n      {\n        \"fullName\": \"Standard events\",\n        \"name\": \"BuiltinCommonInstructions\"\n      },\n      {\n        \"fullName\": \"Variable features\",\n        \"name\": \"BuiltinVariables\"\n      },\n      {\n        \"fullName\": \"Features for all objects\",\n        \"name\": \"BuiltinObject\"\n      }\n    ]\n  },\n  \"pathfinding-basics\": {\n    \"description\": \"Simpler example showing how to get started with Pathfinding, to have an object automatically find its way around obstacles.\",\n    \"usedExtensions\": [\n      {\n        \"fullName\": \"Sprite\",\n        \"name\": \"Sprite\"\n      },\n      {\n        \"fullName\": \"Text object\",\n        \"name\": \"TextObject\"\n      },\n      {\n        \"fullName\": \"Pathfinding behavior\",\n        \"name\": \"PathfindingBehavior\"\n      },\n      {\n        \"fullName\": \"Draggable Behavior\",\n        \"name\": \"DraggableBehavior\"\n      },\n      {\n        \"fullName\": \"Mouse features\",\n        \"name\": \"BuiltinMouse\"\n      },\n      {\n        \"fullName\": \"Standard events\",\n        \"name\": \"BuiltinCommonInstructions\"\n      },\n      {\n        \"fullName\": \"Features for all objects\",\n        \"name\": \"BuiltinObject\"\n      }\n    ]\n  },\n  \"physics\": {\n    \"description\": \"Example showing various capabilities of the physics engine integrated to GDevelop.\",\n    \"usedExtensions\": [\n      {\n        \"fullName\": \"Sprite\",\n        \"name\": \"Sprite\"\n      },\n      {\n        \"fullName\": \"Text object\",\n        \"name\": \"TextObject\"\n      },\n      {\n        \"fullName\": \"Physics Engine 2.0\",\n        \"name\": \"Physics2\"\n      },\n      {\n        \"fullName\": \"Scene management features\",\n        \"name\": \"BuiltinScene\"\n      },\n      {\n        \"fullName\": \"Mouse features\",\n        \"name\": \"BuiltinMouse\"\n      },\n      {\n        \"fullName\": \"Standard events\",\n        \"name\": \"BuiltinCommonInstructions\"\n      },\n      {\n        \"fullName\": \"Features for all objects\",\n        \"name\": \"BuiltinObject\"\n      }\n    ]\n  },\n  \"physics-joints-demo\": {\n    \"description\": \"A demo of all the joints that can be created using the Physics engine.\",\n    \"usedExtensions\": [\n      {\n        \"fullName\": \"Sprite\",\n        \"name\": \"Sprite\"\n      },\n      {\n        \"fullName\": \"Primitive drawing\",\n        \"name\": \"PrimitiveDrawing\"\n      },\n      {\n        \"fullName\": \"Physics Engine 2.0\",\n        \"name\": \"Physics2\"\n      },\n      {\n        \"fullName\": \"Scene management features\",\n        \"name\": \"BuiltinScene\"\n      },\n      {\n        \"fullName\": \"Keyboard features\",\n        \"name\": \"BuiltinKeyboard\"\n      },\n      {\n        \"fullName\": \"Standard events\",\n        \"name\": \"BuiltinCommonInstructions\"\n      },\n      {\n        \"fullName\": \"Mouse features\",\n        \"name\": \"BuiltinMouse\"\n      },\n      {\n        \"fullName\": \"Features for all objects\",\n        \"name\": \"BuiltinObject\"\n      },\n      {\n        \"fullName\": \"Variable features\",\n        \"name\": \"BuiltinVariables\"\n      }\n    ]\n  },\n  \"physics-joints-settings-demo\": {\n    \"description\": \"A demo of all the joints, and the way they can be customized, using the Physics engine.\",\n    \"usedExtensions\": [\n      {\n        \"fullName\": \"Scene management features\",\n        \"name\": \"BuiltinScene\"\n      },\n      {\n        \"fullName\": \"Features for all objects\",\n        \"name\": \"BuiltinObject\"\n      },\n      {\n        \"fullName\": \"Physics Engine 2.0\",\n        \"name\": \"Physics2\"\n      },\n      {\n        \"fullName\": \"Mouse features\",\n        \"name\": \"BuiltinMouse\"\n      },\n      {\n        \"fullName\": \"Text object\",\n        \"name\": \"TextObject\"\n      },\n      {\n        \"fullName\": \"Sprite\",\n        \"name\": \"Sprite\"\n      },\n      {\n        \"fullName\": \"Primitive drawing\",\n        \"name\": \"PrimitiveDrawing\"\n      },\n      {\n        \"fullName\": \"\",\n        \"name\": \"\"\n      },\n      {\n        \"fullName\": \"Standard events\",\n        \"name\": \"BuiltinCommonInstructions\"\n      },\n      {\n        \"fullName\": \"Variable features\",\n        \"name\": \"BuiltinVariables\"\n      }\n    ]\n  },\n  \"pin-object-to-another\": {\n    \"description\": \"Example showing how to have objects \\\"pinned\\\" to another, meaning that they will move/rotate and follow the object they are pinned too.\",\n    \"usedExtensions\": [\n      {\n        \"fullName\": \"Text object\",\n        \"name\": \"TextObject\"\n      },\n      {\n        \"fullName\": \"Sprite\",\n        \"name\": \"Sprite\"\n      },\n      {\n        \"fullName\": \"Draggable Behavior\",\n        \"name\": \"DraggableBehavior\"\n      },\n      {\n        \"fullName\": \"Scene management features\",\n        \"name\": \"BuiltinScene\"\n      },\n      {\n        \"fullName\": \"Keyboard features\",\n        \"name\": \"BuiltinKeyboard\"\n      },\n      {\n        \"fullName\": \"Features for all objects\",\n        \"name\": \"BuiltinObject\"\n      }\n    ]\n  },\n  \"pin-object-to-another-multiple-parents\": {\n    \"description\": \"Example showing how to have objects \\\"pinned\\\" to multiple other objects, meaning that they will move/rotate and follow the object they are pinned too.\",\n    \"usedExtensions\": [\n      {\n        \"fullName\": \"Text object\",\n        \"name\": \"TextObject\"\n      },\n      {\n        \"fullName\": \"Sprite\",\n        \"name\": \"Sprite\"\n      },\n      {\n        \"fullName\": \"Draggable Behavior\",\n        \"name\": \"DraggableBehavior\"\n      },\n      {\n        \"fullName\": \"Scene management features\",\n        \"name\": \"BuiltinScene\"\n      },\n      {\n        \"fullName\": \"Features for all objects\",\n        \"name\": \"BuiltinObject\"\n      },\n      {\n        \"fullName\": \"Keyboard features\",\n        \"name\": \"BuiltinKeyboard\"\n      },\n      {\n        \"fullName\": \"Linked objects\",\n        \"name\": \"LinkedObjects\"\n      }\n    ]\n  },\n  \"pixel-perfect-platform-game\": {\n    \"description\": \"Very simple example showing the settings to have a pixel-perfect platform game (also applicable to other kind of games).\",\n    \"usedExtensions\": [\n      {\n        \"fullName\": \"Sprite\",\n        \"name\": \"Sprite\"\n      },\n      {\n        \"fullName\": \"Tiled Sprite Object\",\n        \"name\": \"TiledSpriteObject\"\n      },\n      {\n        \"fullName\": \"Text object\",\n        \"name\": \"TextObject\"\n      },\n      {\n        \"fullName\": \"Platform Behavior\",\n        \"name\": \"PlatformBehavior\"\n      }\n    ]\n  },\n  \"plane-and-clouds\": {\n    \"description\": \"Show how to randomly generate clouds to create an infinite sky.\",\n    \"usedExtensions\": [\n      {\n        \"fullName\": \"Sprite\",\n        \"name\": \"Sprite\"\n      },\n      {\n        \"fullName\": \"Particle system\",\n        \"name\": \"ParticleSystem\"\n      },\n      {\n        \"fullName\": \"Scene management features\",\n        \"name\": \"BuiltinScene\"\n      },\n      {\n        \"fullName\": \"Features for all objects\",\n        \"name\": \"BuiltinObject\"\n      },\n      {\n        \"fullName\": \"Variable features\",\n        \"name\": \"BuiltinVariables\"\n      },\n      {\n        \"fullName\": \"Mouse features\",\n        \"name\": \"BuiltinMouse\"\n      },\n      {\n        \"fullName\": \"Cameras and layers features\",\n        \"name\": \"BuiltinCamera\"\n      }\n    ]\n  },\n  \"platformer\": {\n    \"description\": \"An example of a basic platformer (Mario-like) game made with GDevelop.\",\n    \"usedExtensions\": [\n      {\n        \"fullName\": \"Sprite\",\n        \"name\": \"Sprite\"\n      },\n      {\n        \"fullName\": \"Tiled Sprite Object\",\n        \"name\": \"TiledSpriteObject\"\n      },\n      {\n        \"fullName\": \"Text object\",\n        \"name\": \"TextObject\"\n      },\n      {\n        \"fullName\": \"Platform Behavior\",\n        \"name\": \"PlatformBehavior\"\n      },\n      {\n        \"fullName\": \"Anchor\",\n        \"name\": \"AnchorBehavior\"\n      },\n      {\n        \"fullName\": \"Scene management features\",\n        \"name\": \"BuiltinScene\"\n      },\n      {\n        \"fullName\": \"Keyboard features\",\n        \"name\": \"BuiltinKeyboard\"\n      },\n      {\n        \"fullName\": \"Standard events\",\n        \"name\": \"BuiltinCommonInstructions\"\n      },\n      {\n        \"fullName\": \"Features for all objects\",\n        \"name\": \"BuiltinObject\"\n      },\n      {\n        \"fullName\": \"System information\",\n        \"name\": \"SystemInfo\"\n      },\n      {\n        \"fullName\": \"Audio\",\n        \"name\": \"BuiltinAudio\"\n      },\n      {\n        \"fullName\": \"Cameras and layers features\",\n        \"name\": \"BuiltinCamera\"\n      },\n      {\n        \"fullName\": \"Mouse features\",\n        \"name\": \"BuiltinMouse\"\n      },\n      {\n        \"fullName\": \"Variable features\",\n        \"name\": \"BuiltinVariables\"\n      }\n    ]\n  },\n  \"platformer-double-jump\": {\n    \"description\": \"The Platformer example modified to allow the player to do a double jump.\",\n    \"usedExtensions\": [\n      {\n        \"fullName\": \"Sprite\",\n        \"name\": \"Sprite\"\n      },\n      {\n        \"fullName\": \"Tiled Sprite Object\",\n        \"name\": \"TiledSpriteObject\"\n      },\n      {\n        \"fullName\": \"Text object\",\n        \"name\": \"TextObject\"\n      },\n      {\n        \"fullName\": \"Platform Behavior\",\n        \"name\": \"PlatformBehavior\"\n      },\n      {\n        \"fullName\": \"Anchor\",\n        \"name\": \"AnchorBehavior\"\n      },\n      {\n        \"fullName\": \"Scene management features\",\n        \"name\": \"BuiltinScene\"\n      },\n      {\n        \"fullName\": \"Keyboard features\",\n        \"name\": \"BuiltinKeyboard\"\n      },\n      {\n        \"fullName\": \"Standard events\",\n        \"name\": \"BuiltinCommonInstructions\"\n      },\n      {\n        \"fullName\": \"Features for all objects\",\n        \"name\": \"BuiltinObject\"\n      },\n      {\n        \"fullName\": \"System information\",\n        \"name\": \"SystemInfo\"\n      },\n      {\n        \"fullName\": \"Audio\",\n        \"name\": \"BuiltinAudio\"\n      },\n      {\n        \"fullName\": \"Cameras and layers features\",\n        \"name\": \"BuiltinCamera\"\n      },\n      {\n        \"fullName\": \"Mouse features\",\n        \"name\": \"BuiltinMouse\"\n      },\n      {\n        \"fullName\": \"Variable features\",\n        \"name\": \"BuiltinVariables\"\n      }\n    ]\n  },\n  \"play-music-on-mobile\": {\n    \"description\": \"This show how to properly launch a music on a game on mobile.\",\n    \"usedExtensions\": [\n      {\n        \"fullName\": \"Text object\",\n        \"name\": \"TextObject\"\n      },\n      {\n        \"fullName\": \"Scene management features\",\n        \"name\": \"BuiltinScene\"\n      },\n      {\n        \"fullName\": \"Audio\",\n        \"name\": \"BuiltinAudio\"\n      }\n    ]\n  },\n  \"play-stop-sprite-animation\": {\n    \"description\": \"This shows how to pause the animation of a Sprite object.\",\n    \"usedExtensions\": [\n      {\n        \"fullName\": \"Sprite\",\n        \"name\": \"Sprite\"\n      },\n      {\n        \"fullName\": \"Text object\",\n        \"name\": \"TextObject\"\n      },\n      {\n        \"fullName\": \"Keyboard features\",\n        \"name\": \"BuiltinKeyboard\"\n      },\n      {\n        \"fullName\": \"Mouse features\",\n        \"name\": \"BuiltinMouse\"\n      },\n      {\n        \"fullName\": \"Standard events\",\n        \"name\": \"BuiltinCommonInstructions\"\n      },\n      {\n        \"fullName\": \"Variable features\",\n        \"name\": \"BuiltinVariables\"\n      },\n      {\n        \"fullName\": \"Features for all objects\",\n        \"name\": \"BuiltinObject\"\n      }\n    ]\n  },\n  \"racing-game\": {\n    \"description\": \"A top-down racing game made using the Physics engine.\",\n    \"usedExtensions\": [\n      {\n        \"fullName\": \"Sprite\",\n        \"name\": \"Sprite\"\n      },\n      {\n        \"fullName\": \"Tiled Sprite Object\",\n        \"name\": \"TiledSpriteObject\"\n      },\n      {\n        \"fullName\": \"Physics Engine 2.0\",\n        \"name\": \"Physics2\"\n      },\n      {\n        \"fullName\": \"Scene management features\",\n        \"name\": \"BuiltinScene\"\n      },\n      {\n        \"fullName\": \"Features for all objects\",\n        \"name\": \"BuiltinObject\"\n      },\n      {\n        \"fullName\": \"Cameras and layers features\",\n        \"name\": \"BuiltinCamera\"\n      },\n      {\n        \"fullName\": \"Keyboard features\",\n        \"name\": \"BuiltinKeyboard\"\n      },\n      {\n        \"fullName\": \"Audio\",\n        \"name\": \"BuiltinAudio\"\n      },\n      {\n        \"fullName\": \"Variable features\",\n        \"name\": \"BuiltinVariables\"\n      }\n    ]\n  },\n  \"ragdoll\": {\n    \"description\": \"Example of creating a ragdoll with physics joints.\",\n    \"usedExtensions\": [\n      {\n        \"fullName\": \"Sprite\",\n        \"name\": \"Sprite\"\n      },\n      {\n        \"fullName\": \"Text object\",\n        \"name\": \"TextObject\"\n      },\n      {\n        \"fullName\": \"Particle system\",\n        \"name\": \"ParticleSystem\"\n      },\n      {\n        \"fullName\": \"Physics Engine 2.0\",\n        \"name\": \"Physics2\"\n      },\n      {\n        \"fullName\": \"Scene management features\",\n        \"name\": \"BuiltinScene\"\n      },\n      {\n        \"fullName\": \"Variable features\",\n        \"name\": \"BuiltinVariables\"\n      },\n      {\n        \"fullName\": \"Mouse features\",\n        \"name\": \"BuiltinMouse\"\n      },\n      {\n        \"fullName\": \"Advanced control features\",\n        \"name\": \"BuiltinAdvanced\"\n      },\n      {\n        \"fullName\": \"Time\",\n        \"name\": \"BuiltinTime\"\n      },\n      {\n        \"fullName\": \"Standard events\",\n        \"name\": \"BuiltinCommonInstructions\"\n      },\n      {\n        \"fullName\": \"Keyboard features\",\n        \"name\": \"BuiltinKeyboard\"\n      },\n      {\n        \"fullName\": \"Features for all objects\",\n        \"name\": \"BuiltinObject\"\n      },\n      {\n        \"fullName\": \"Cameras and layers features\",\n        \"name\": \"BuiltinCamera\"\n      }\n    ]\n  },\n  \"rain\": {\n    \"description\": \"Show how to simulate a rain effect by creating several objects.\",\n    \"usedExtensions\": [\n      {\n        \"fullName\": \"Sprite\",\n        \"name\": \"Sprite\"\n      },\n      {\n        \"fullName\": \"Destroy Outside Screen Behavior\",\n        \"name\": \"DestroyOutsideBehavior\"\n      },\n      {\n        \"fullName\": \"Scene management features\",\n        \"name\": \"BuiltinScene\"\n      },\n      {\n        \"fullName\": \"Time\",\n        \"name\": \"BuiltinTime\"\n      },\n      {\n        \"fullName\": \"Keyboard features\",\n        \"name\": \"BuiltinKeyboard\"\n      },\n      {\n        \"fullName\": \"Variable features\",\n        \"name\": \"BuiltinVariables\"\n      },\n      {\n        \"fullName\": \"Features for all objects\",\n        \"name\": \"BuiltinObject\"\n      },\n      {\n        \"fullName\": \"Window features\",\n        \"name\": \"BuiltinWindow\"\n      }\n    ]\n  },\n  \"random-color-picker\": {\n    \"description\": \"This shows how to create a grid with random color, and let the player choose one.\",\n    \"usedExtensions\": [\n      {\n        \"fullName\": \"Sprite\",\n        \"name\": \"Sprite\"\n      },\n      {\n        \"fullName\": \"Text object\",\n        \"name\": \"TextObject\"\n      },\n      {\n        \"fullName\": \"Scene management features\",\n        \"name\": \"BuiltinScene\"\n      },\n      {\n        \"fullName\": \"Mouse features\",\n        \"name\": \"BuiltinMouse\"\n      },\n      {\n        \"fullName\": \"Features for all objects\",\n        \"name\": \"BuiltinObject\"\n      }\n    ]\n  },\n  \"rotate-toward-mouse\": {\n    \"description\": \"Show how to rotate an object so that it looks toward the player cursor.\",\n    \"usedExtensions\": [\n      {\n        \"fullName\": \"Sprite\",\n        \"name\": \"Sprite\"\n      },\n      {\n        \"fullName\": \"Features for all objects\",\n        \"name\": \"BuiltinObject\"\n      }\n    ]\n  },\n  \"rotate-toward-position\": {\n    \"description\": \"Show how to rotate an object so that it looks toward a specified position on the scene.\",\n    \"usedExtensions\": [\n      {\n        \"fullName\": \"Sprite\",\n        \"name\": \"Sprite\"\n      },\n      {\n        \"fullName\": \"Text object\",\n        \"name\": \"TextObject\"\n      },\n      {\n        \"fullName\": \"Mouse features\",\n        \"name\": \"BuiltinMouse\"\n      },\n      {\n        \"fullName\": \"Standard events\",\n        \"name\": \"BuiltinCommonInstructions\"\n      },\n      {\n        \"fullName\": \"Features for all objects\",\n        \"name\": \"BuiltinObject\"\n      }\n    ]\n  },\n  \"rotate-with-keypress\": {\n    \"description\": \"Basic example showing how to rotate an object.\",\n    \"usedExtensions\": [\n      {\n        \"fullName\": \"Sprite\",\n        \"name\": \"Sprite\"\n      },\n      {\n        \"fullName\": \"Text object\",\n        \"name\": \"TextObject\"\n      },\n      {\n        \"fullName\": \"Keyboard features\",\n        \"name\": \"BuiltinKeyboard\"\n      },\n      {\n        \"fullName\": \"Features for all objects\",\n        \"name\": \"BuiltinObject\"\n      }\n    ]\n  },\n  \"save-load\": {\n    \"description\": \"Advanced example showing how to persist data and then reload them from storage (useful to store game progress, or save the state of some objects in a game).\",\n    \"usedExtensions\": [\n      {\n        \"fullName\": \"Sprite\",\n        \"name\": \"Sprite\"\n      },\n      {\n        \"fullName\": \"Text object\",\n        \"name\": \"TextObject\"\n      },\n      {\n        \"fullName\": \"Mouse features\",\n        \"name\": \"BuiltinMouse\"\n      },\n      {\n        \"fullName\": \"Features for all objects\",\n        \"name\": \"BuiltinObject\"\n      },\n      {\n        \"fullName\": \"Variable features\",\n        \"name\": \"BuiltinVariables\"\n      },\n      {\n        \"fullName\": \"Scene management features\",\n        \"name\": \"BuiltinScene\"\n      },\n      {\n        \"fullName\": \"Draggable Behavior\",\n        \"name\": \"DraggableBehavior\"\n      },\n      {\n        \"fullName\": \"Storage\",\n        \"name\": \"BuiltinFile\"\n      }\n    ]\n  },\n  \"screen-shake\": {\n    \"description\": \"Make the screen shake when some event occurs.\",\n    \"usedExtensions\": [\n      {\n        \"fullName\": \"Sprite\",\n        \"name\": \"Sprite\"\n      },\n      {\n        \"fullName\": \"Tiled Sprite Object\",\n        \"name\": \"TiledSpriteObject\"\n      },\n      {\n        \"fullName\": \"Platform Behavior\",\n        \"name\": \"PlatformBehavior\"\n      },\n      {\n        \"fullName\": \"Scene management features\",\n        \"name\": \"BuiltinScene\"\n      },\n      {\n        \"fullName\": \"Standard events\",\n        \"name\": \"BuiltinCommonInstructions\"\n      },\n      {\n        \"fullName\": \"Variable features\",\n        \"name\": \"BuiltinVariables\"\n      },\n      {\n        \"fullName\": \"Keyboard features\",\n        \"name\": \"BuiltinKeyboard\"\n      },\n      {\n        \"fullName\": \"Features for all objects\",\n        \"name\": \"BuiltinObject\"\n      },\n      {\n        \"fullName\": \"Cameras and layers features\",\n        \"name\": \"BuiltinCamera\"\n      },\n      {\n        \"fullName\": \"Audio\",\n        \"name\": \"BuiltinAudio\"\n      }\n    ]\n  },\n  \"shoot-bullet-in-parabola\": {\n    \"description\": \"Show how to use various mathematical expressions to move an object following a parabola shape\",\n    \"usedExtensions\": [\n      {\n        \"fullName\": \"Sprite\",\n        \"name\": \"Sprite\"\n      },\n      {\n        \"fullName\": \"Text object\",\n        \"name\": \"TextObject\"\n      },\n      {\n        \"fullName\": \"Draggable Behavior\",\n        \"name\": \"DraggableBehavior\"\n      },\n      {\n        \"fullName\": \"Mouse features\",\n        \"name\": \"BuiltinMouse\"\n      },\n      {\n        \"fullName\": \"Features for all objects\",\n        \"name\": \"BuiltinObject\"\n      },\n      {\n        \"fullName\": \"Variable features\",\n        \"name\": \"BuiltinVariables\"\n      },\n      {\n        \"fullName\": \"Standard events\",\n        \"name\": \"BuiltinCommonInstructions\"\n      },\n      {\n        \"fullName\": \"Scene management features\",\n        \"name\": \"BuiltinScene\"\n      }\n    ]\n  },\n  \"shoot-bullets\": {\n    \"description\": \"Basic example showing how to shoot bullets from an object.\",\n    \"usedExtensions\": [\n      {\n        \"fullName\": \"Sprite\",\n        \"name\": \"Sprite\"\n      },\n      {\n        \"fullName\": \"Text object\",\n        \"name\": \"TextObject\"\n      },\n      {\n        \"fullName\": \"Destroy Outside Screen Behavior\",\n        \"name\": \"DestroyOutsideBehavior\"\n      },\n      {\n        \"fullName\": \"Scene management features\",\n        \"name\": \"BuiltinScene\"\n      },\n      {\n        \"fullName\": \"Standard events\",\n        \"name\": \"BuiltinCommonInstructions\"\n      },\n      {\n        \"fullName\": \"Mouse features\",\n        \"name\": \"BuiltinMouse\"\n      },\n      {\n        \"fullName\": \"Keyboard features\",\n        \"name\": \"BuiltinKeyboard\"\n      },\n      {\n        \"fullName\": \"Time\",\n        \"name\": \"BuiltinTime\"\n      },\n      {\n        \"fullName\": \"Features for all objects\",\n        \"name\": \"BuiltinObject\"\n      }\n    ]\n  },\n  \"shooting-bullets-explanation\": {\n    \"description\": \"Basic example showing how to shoot bullets from one or multiple objects at the same time.\",\n    \"usedExtensions\": [\n      {\n        \"fullName\": \"Sprite\",\n        \"name\": \"Sprite\"\n      },\n      {\n        \"fullName\": \"Destroy Outside Screen Behavior\",\n        \"name\": \"DestroyOutsideBehavior\"\n      },\n      {\n        \"fullName\": \"Mouse features\",\n        \"name\": \"BuiltinMouse\"\n      },\n      {\n        \"fullName\": \"Time\",\n        \"name\": \"BuiltinTime\"\n      },\n      {\n        \"fullName\": \"Features for all objects\",\n        \"name\": \"BuiltinObject\"\n      }\n    ]\n  },\n  \"simple-space-shooter\": {\n    \"description\": \"An older, simple space shooter demo, made without any behaviors from extensions. Prefer taking a look at the Space Shooter starter to learn about useful behaviors and patterns for making your games.\",\n    \"usedExtensions\": [\n      {\n        \"fullName\": \"Sprite\",\n        \"name\": \"Sprite\"\n      },\n      {\n        \"fullName\": \"Tiled Sprite Object\",\n        \"name\": \"TiledSpriteObject\"\n      },\n      {\n        \"fullName\": \"Text object\",\n        \"name\": \"TextObject\"\n      },\n      {\n        \"fullName\": \"Top-down movement\",\n        \"name\": \"TopDownMovementBehavior\"\n      },\n      {\n        \"fullName\": \"Destroy Outside Screen Behavior\",\n        \"name\": \"DestroyOutsideBehavior\"\n      },\n      {\n        \"fullName\": \"Variable features\",\n        \"name\": \"BuiltinVariables\"\n      },\n      {\n        \"fullName\": \"Scene management features\",\n        \"name\": \"BuiltinScene\"\n      },\n      {\n        \"fullName\": \"Features for all objects\",\n        \"name\": \"BuiltinObject\"\n      },\n      {\n        \"fullName\": \"Time\",\n        \"name\": \"BuiltinTime\"\n      },\n      {\n        \"fullName\": \"Mouse features\",\n        \"name\": \"BuiltinMouse\"\n      },\n      {\n        \"fullName\": \"Standard events\",\n        \"name\": \"BuiltinCommonInstructions\"\n      },\n      {\n        \"fullName\": \"Cameras and layers features\",\n        \"name\": \"BuiltinCamera\"\n      },\n      {\n        \"fullName\": \"Audio\",\n        \"name\": \"BuiltinAudio\"\n      }\n    ]\n  },\n  \"snap-object-to-grid\": {\n    \"description\": \"Example showing how to create a grid and have objects snapped to the grid.\",\n    \"usedExtensions\": [\n      {\n        \"fullName\": \"Sprite\",\n        \"name\": \"Sprite\"\n      },\n      {\n        \"fullName\": \"Primitive drawing\",\n        \"name\": \"PrimitiveDrawing\"\n      },\n      {\n        \"fullName\": \"Text object\",\n        \"name\": \"TextObject\"\n      },\n      {\n        \"fullName\": \"Draggable Behavior\",\n        \"name\": \"DraggableBehavior\"\n      },\n      {\n        \"fullName\": \"Scene management features\",\n        \"name\": \"BuiltinScene\"\n      },\n      {\n        \"fullName\": \"Variable features\",\n        \"name\": \"BuiltinVariables\"\n      },\n      {\n        \"fullName\": \"Window features\",\n        \"name\": \"BuiltinWindow\"\n      },\n      {\n        \"fullName\": \"Features for all objects\",\n        \"name\": \"BuiltinObject\"\n      }\n    ]\n  },\n  \"space-invaders\": {\n    \"description\": \"A Space Invaders-like game, where you have a turret and shoot on enemies coming from the sky.\",\n    \"usedExtensions\": [\n      {\n        \"fullName\": \"Sprite\",\n        \"name\": \"Sprite\"\n      },\n      {\n        \"fullName\": \"Text object\",\n        \"name\": \"TextObject\"\n      },\n      {\n        \"fullName\": \"Destroy Outside Screen Behavior\",\n        \"name\": \"DestroyOutsideBehavior\"\n      },\n      {\n        \"fullName\": \"Scene management features\",\n        \"name\": \"BuiltinScene\"\n      },\n      {\n        \"fullName\": \"System information\",\n        \"name\": \"SystemInfo\"\n      },\n      {\n        \"fullName\": \"Variable features\",\n        \"name\": \"BuiltinVariables\"\n      },\n      {\n        \"fullName\": \"Time\",\n        \"name\": \"BuiltinTime\"\n      },\n      {\n        \"fullName\": \"Standard events\",\n        \"name\": \"BuiltinCommonInstructions\"\n      },\n      {\n        \"fullName\": \"Features for all objects\",\n        \"name\": \"BuiltinObject\"\n      },\n      {\n        \"fullName\": \"Cameras and layers features\",\n        \"name\": \"BuiltinCamera\"\n      },\n      {\n        \"fullName\": \"Mouse features\",\n        \"name\": \"BuiltinMouse\"\n      },\n      {\n        \"fullName\": \"Keyboard features\",\n        \"name\": \"BuiltinKeyboard\"\n      },\n      {\n        \"fullName\": \"Audio\",\n        \"name\": \"BuiltinAudio\"\n      },\n      {\n        \"fullName\": \"Window features\",\n        \"name\": \"BuiltinWindow\"\n      }\n    ]\n  },\n  \"space-shooter\": {\n    \"description\": \"A beautiful, retro side-scrolling shooter where you must defeat incoming enemies with your mecha transforming spaceship. Huge boss included!\\n\",\n    \"usedExtensions\": [\n      {\n        \"fullName\": \"Sprite\",\n        \"name\": \"Sprite\"\n      },\n      {\n        \"fullName\": \"Tiled Sprite Object\",\n        \"name\": \"TiledSpriteObject\"\n      },\n      {\n        \"fullName\": \"Panel Sprite (9-patch) Object\",\n        \"name\": \"PanelSpriteObject\"\n      },\n      {\n        \"fullName\": \"\",\n        \"name\": \"\"\n      },\n      {\n        \"fullName\": \"Top-down movement\",\n        \"name\": \"TopDownMovementBehavior\"\n      },\n      {\n        \"fullName\": \"Destroy Outside Screen Behavior\",\n        \"name\": \"DestroyOutsideBehavior\"\n      },\n      {\n        \"fullName\": \"Scene management features\",\n        \"name\": \"BuiltinScene\"\n      },\n      {\n        \"fullName\": \"Variable features\",\n        \"name\": \"BuiltinVariables\"\n      },\n      {\n        \"fullName\": \"Features for all objects\",\n        \"name\": \"BuiltinObject\"\n      },\n      {\n        \"fullName\": \"Standard events\",\n        \"name\": \"BuiltinCommonInstructions\"\n      },\n      {\n        \"fullName\": \"Time\",\n        \"name\": \"BuiltinTime\"\n      },\n      {\n        \"fullName\": \"Audio\",\n        \"name\": \"BuiltinAudio\"\n      },\n      {\n        \"fullName\": \"Cameras and layers features\",\n        \"name\": \"BuiltinCamera\"\n      }\n    ]\n  },\n  \"splash-screen\": {\n    \"description\": \"Show how to create a splashscreen at the beginning of your game.\",\n    \"usedExtensions\": [\n      {\n        \"fullName\": \"Sprite\",\n        \"name\": \"Sprite\"\n      },\n      {\n        \"fullName\": \"Scene management features\",\n        \"name\": \"BuiltinScene\"\n      },\n      {\n        \"fullName\": \"Audio\",\n        \"name\": \"BuiltinAudio\"\n      },\n      {\n        \"fullName\": \"Features for all objects\",\n        \"name\": \"BuiltinObject\"\n      }\n    ]\n  },\n  \"sprite-fade-in-out\": {\n    \"description\": \"This shows how to make a sprite fade in and out on the screen.\",\n    \"usedExtensions\": [\n      {\n        \"fullName\": \"Text object\",\n        \"name\": \"TextObject\"\n      },\n      {\n        \"fullName\": \"Sprite\",\n        \"name\": \"Sprite\"\n      },\n      {\n        \"fullName\": \"Scene management features\",\n        \"name\": \"BuiltinScene\"\n      },\n      {\n        \"fullName\": \"Variable features\",\n        \"name\": \"BuiltinVariables\"\n      }\n    ]\n  },\n  \"take-screenshot\": {\n    \"description\": \"Show how to save a screenshot of the game on the disk (on Windows/macOS/Linux only).\",\n    \"usedExtensions\": [\n      {\n        \"fullName\": \"Sprite\",\n        \"name\": \"Sprite\"\n      },\n      {\n        \"fullName\": \"Text object\",\n        \"name\": \"TextObject\"\n      },\n      {\n        \"fullName\": \"Scene management features\",\n        \"name\": \"BuiltinScene\"\n      },\n      {\n        \"fullName\": \"Features for all objects\",\n        \"name\": \"BuiltinObject\"\n      },\n      {\n        \"fullName\": \"Mouse features\",\n        \"name\": \"BuiltinMouse\"\n      },\n      {\n        \"fullName\": \"Screenshot\",\n        \"name\": \"Screenshot\"\n      },\n      {\n        \"fullName\": \"Audio\",\n        \"name\": \"BuiltinAudio\"\n      }\n    ]\n  },\n  \"text-entry-object\": {\n    \"description\": \"This shows how to use the Text Entry object to capture what is written on the keyboard.\",\n    \"usedExtensions\": [\n      {\n        \"fullName\": \"Text entry object\",\n        \"name\": \"TextEntryObject\"\n      },\n      {\n        \"fullName\": \"Text object\",\n        \"name\": \"TextObject\"\n      }\n    ]\n  },\n  \"text-fade-in-out\": {\n    \"description\": \"This shows how to make a text fade in and out on the screen.\",\n    \"usedExtensions\": [\n      {\n        \"fullName\": \"Text object\",\n        \"name\": \"TextObject\"\n      },\n      {\n        \"fullName\": \"Scene management features\",\n        \"name\": \"BuiltinScene\"\n      },\n      {\n        \"fullName\": \"Variable features\",\n        \"name\": \"BuiltinVariables\"\n      }\n    ]\n  },\n  \"text-to-speech\": {\n    \"description\": \"Advanced example showing how to use JavaScript and HTML5 api to make a text read by your computer.\",\n    \"usedExtensions\": [\n      {\n        \"fullName\": \"Text entry object\",\n        \"name\": \"TextEntryObject\"\n      },\n      {\n        \"fullName\": \"Text object\",\n        \"name\": \"TextObject\"\n      },\n      {\n        \"fullName\": \"Scene management features\",\n        \"name\": \"BuiltinScene\"\n      },\n      {\n        \"fullName\": \"Keyboard features\",\n        \"name\": \"BuiltinKeyboard\"\n      },\n      {\n        \"fullName\": \"Variable features\",\n        \"name\": \"BuiltinVariables\"\n      }\n    ]\n  },\n  \"toggle-music-play-sound\": {\n    \"description\": \"Example showing how to play a music and add controls on the screen to pause it, change the volume or mute the sounds totally.\",\n    \"usedExtensions\": [\n      {\n        \"fullName\": \"Sprite\",\n        \"name\": \"Sprite\"\n      },\n      {\n        \"fullName\": \"Text object\",\n        \"name\": \"TextObject\"\n      },\n      {\n        \"fullName\": \"Scene management features\",\n        \"name\": \"BuiltinScene\"\n      },\n      {\n        \"fullName\": \"Mouse features\",\n        \"name\": \"BuiltinMouse\"\n      },\n      {\n        \"fullName\": \"Features for all objects\",\n        \"name\": \"BuiltinObject\"\n      },\n      {\n        \"fullName\": \"Standard events\",\n        \"name\": \"BuiltinCommonInstructions\"\n      },\n      {\n        \"fullName\": \"Variable features\",\n        \"name\": \"BuiltinVariables\"\n      },\n      {\n        \"fullName\": \"Audio\",\n        \"name\": \"BuiltinAudio\"\n      }\n    ]\n  },\n  \"type-on-text-effect\": {\n    \"description\": \"This show how to create an effect where a text is progressively typed on the screen.\",\n    \"usedExtensions\": [\n      {\n        \"fullName\": \"Text object\",\n        \"name\": \"TextObject\"\n      },\n      {\n        \"fullName\": \"Scene management features\",\n        \"name\": \"BuiltinScene\"\n      },\n      {\n        \"fullName\": \"Variable features\",\n        \"name\": \"BuiltinVariables\"\n      },\n      {\n        \"fullName\": \"Standard events\",\n        \"name\": \"BuiltinCommonInstructions\"\n      },\n      {\n        \"fullName\": \"Keyboard features\",\n        \"name\": \"BuiltinKeyboard\"\n      },\n      {\n        \"fullName\": \"Mouse features\",\n        \"name\": \"BuiltinMouse\"\n      },\n      {\n        \"fullName\": \"Time\",\n        \"name\": \"BuiltinTime\"\n      },\n      {\n        \"fullName\": \"Audio\",\n        \"name\": \"BuiltinAudio\"\n      }\n    ]\n  },\n  \"unlock-items\": {\n    \"description\": \"Show how to save the items unlocked by the user and load them later (when the game is launched again for example, or when starting a saved game).\\n\",\n    \"usedExtensions\": [\n      {\n        \"fullName\": \"Sprite\",\n        \"name\": \"Sprite\"\n      },\n      {\n        \"fullName\": \"Text object\",\n        \"name\": \"TextObject\"\n      },\n      {\n        \"fullName\": \"Scene management features\",\n        \"name\": \"BuiltinScene\"\n      },\n      {\n        \"fullName\": \"Mouse features\",\n        \"name\": \"BuiltinMouse\"\n      },\n      {\n        \"fullName\": \"Features for all objects\",\n        \"name\": \"BuiltinObject\"\n      },\n      {\n        \"fullName\": \"Storage\",\n        \"name\": \"BuiltinFile\"\n      },\n      {\n        \"fullName\": \"Variable features\",\n        \"name\": \"BuiltinVariables\"\n      }\n    ]\n  },\n  \"video-player\": {\n    \"description\": \"An example of a complete video player with controls to play/pause, change the volume, jump to a position in the video...\",\n    \"usedExtensions\": [\n      {\n        \"fullName\": \"Video\",\n        \"name\": \"Video\"\n      },\n      {\n        \"fullName\": \"Sprite\",\n        \"name\": \"Sprite\"\n      },\n      {\n        \"fullName\": \"Text object\",\n        \"name\": \"TextObject\"\n      },\n      {\n        \"fullName\": \"Tween animation\",\n        \"name\": \"Tween\"\n      },\n      {\n        \"fullName\": \"Features for all objects\",\n        \"name\": \"BuiltinObject\"\n      },\n      {\n        \"fullName\": \"Standard events\",\n        \"name\": \"BuiltinCommonInstructions\"\n      },\n      {\n        \"fullName\": \"Mouse features\",\n        \"name\": \"BuiltinMouse\"\n      },\n      {\n        \"fullName\": \"Scene management features\",\n        \"name\": \"BuiltinScene\"\n      },\n      {\n        \"fullName\": \"Keyboard features\",\n        \"name\": \"BuiltinKeyboard\"\n      },\n      {\n        \"fullName\": \"Time\",\n        \"name\": \"BuiltinTime\"\n      },\n      {\n        \"fullName\": \"Advanced control features\",\n        \"name\": \"BuiltinAdvanced\"\n      },\n      {\n        \"fullName\": \"Variable features\",\n        \"name\": \"BuiltinVariables\"\n      },\n      {\n        \"fullName\": \"\",\n        \"name\": \"\"\n      },\n      {\n        \"fullName\": \"Window features\",\n        \"name\": \"BuiltinWindow\"\n      }\n    ]\n  },\n  \"z-depth\": {\n    \"description\": \"Example where the player can move a character on a map, and the character is displayed behind or in front of other objects according to its position.\",\n    \"usedExtensions\": [\n      {\n        \"fullName\": \"Sprite\",\n        \"name\": \"Sprite\"\n      },\n      {\n        \"fullName\": \"Text object\",\n        \"name\": \"TextObject\"\n      },\n      {\n        \"fullName\": \"Scene management features\",\n        \"name\": \"BuiltinScene\"\n      },\n      {\n        \"fullName\": \"Standard events\",\n        \"name\": \"BuiltinCommonInstructions\"\n      },\n      {\n        \"fullName\": \"Mouse features\",\n        \"name\": \"BuiltinMouse\"\n      },\n      {\n        \"fullName\": \"Keyboard features\",\n        \"name\": \"BuiltinKeyboard\"\n      },\n      {\n        \"fullName\": \"Features for all objects\",\n        \"name\": \"BuiltinObject\"\n      }\n    ]\n  },\n  \"zombie-laser\": {\n    \"description\": \"Simple game where the player must use his laser powered gun to destroy zombies running at him.\",\n    \"usedExtensions\": [\n      {\n        \"fullName\": \"Sprite\",\n        \"name\": \"Sprite\"\n      },\n      {\n        \"fullName\": \"Primitive drawing\",\n        \"name\": \"PrimitiveDrawing\"\n      },\n      {\n        \"fullName\": \"Text object\",\n        \"name\": \"TextObject\"\n      },\n      {\n        \"fullName\": \"Pathfinding behavior\",\n        \"name\": \"PathfindingBehavior\"\n      },\n      {\n        \"fullName\": \"Scene management features\",\n        \"name\": \"BuiltinScene\"\n      },\n      {\n        \"fullName\": \"Variable features\",\n        \"name\": \"BuiltinVariables\"\n      },\n      {\n        \"fullName\": \"Mouse features\",\n        \"name\": \"BuiltinMouse\"\n      },\n      {\n        \"fullName\": \"Features for all objects\",\n        \"name\": \"BuiltinObject\"\n      },\n      {\n        \"fullName\": \"Time\",\n        \"name\": \"BuiltinTime\"\n      },\n      {\n        \"fullName\": \"Cameras and layers features\",\n        \"name\": \"BuiltinCamera\"\n      }\n    ]\n  }\n};\n","// @flow\nimport { Trans } from '@lingui/macro';\nimport * as React from 'react';\nimport Text from '../../UI/Text';\nimport { Column, Line } from '../../UI/Grid';\n\nexport const ExplanationHeader = () => (\n  <Text>\n    <Trans>\n      This will export your game as a Cordova project. Cordova is a technology\n      that enables HTML5 games to be packaged for iOS and Android.\n    </Trans>\n  </Text>\n);\n\nexport const DoneFooter = ({\n  renderGameButton,\n}: {|\n  renderGameButton: () => React.Node,\n|}) => (\n  <Column noMargin>\n    <Text>\n      <Trans>\n        You can now compile the game by yourself using Cordova command-line tool\n        to iOS (XCode is required) or Android (Android SDK is required).\n      </Trans>\n    </Text>\n    <Line justifyContent=\"center\">{renderGameButton()}</Line>\n  </Column>\n);\n","// @flow\nimport { Trans } from '@lingui/macro';\nimport * as React from 'react';\nimport Text from '../../UI/Text';\nimport { Column, Line } from '../../UI/Grid';\n\nexport const ExplanationHeader = () => (\n  <Text>\n    <Trans>\n      This will export your game so that you can package it for Windows, macOS\n      or Linux. You will need to install third-party tools (Node.js, Electron\n      Builder) to package your game.\n    </Trans>\n  </Text>\n);\n\nexport const DoneFooter = ({\n  renderGameButton,\n}: {|\n  renderGameButton: () => React.Node,\n|}) => (\n  <Column noMargin>\n    <Text>\n      <Trans>\n        The game was properly exported. You can now use Electron Builder (you\n        need Node.js installed and to use the command-line on your computer to\n        run it) to create an executable.\n      </Trans>\n    </Text>\n    <Line justifyContent=\"center\">{renderGameButton()}</Line>\n  </Column>\n);\n","// @flow\nimport { Trans } from '@lingui/macro';\nimport * as React from 'react';\nimport Text from '../../UI/Text';\nimport { getHelpLink } from '../../Utils/HelpLink';\nimport Window from '../../Utils/Window';\nimport FlatButton from '../../UI/FlatButton';\nimport { Column, Spacer } from '../../UI/Grid';\nimport AlertMessage from '../../UI/AlertMessage';\n\nexport const ExplanationHeader = () => (\n  <Text>\n    <Trans>This will export your game to a folder.</Trans>\n    <Trans>\n      You can then upload it on a website/game hosting service and share it on\n      marketplaces and gaming portals like Kongregate, Game Jolt, itch.io,\n      Poki...\n    </Trans>\n  </Text>\n);\n\nexport const DoneFooter = ({\n  renderGameButton,\n}: {|\n  renderGameButton: () => React.Node,\n|}) => (\n  <Column noMargin>\n    <Text>\n      <Trans>\n        You can now upload the game to a web hosting to play to the game.\n      </Trans>\n    </Text>\n    <AlertMessage kind=\"warning\">\n      <Trans>\n        Your game won't work if you open index.html on your computer. You must\n        upload it to a web hosting (Kongregate, Itch.io, etc...) or a web server\n        to run it.\n      </Trans>\n    </AlertMessage>\n    <Spacer />\n    {renderGameButton()}\n    <Spacer />\n    <FlatButton\n      fullWidth\n      primary\n      onClick={() =>\n        Window.openExternalURL(\n          getHelpLink('/publishing/publishing-to-gamejolt-store')\n        )\n      }\n      label={<Trans>Publish your game on Game Jolt</Trans>}\n    />\n    <FlatButton\n      fullWidth\n      primary\n      onClick={() =>\n        Window.openExternalURL(\n          getHelpLink('/publishing/publishing-to-kongregate-store')\n        )\n      }\n      label={<Trans>Publish your game on Kongregate</Trans>}\n    />\n    <FlatButton\n      fullWidth\n      primary\n      onClick={() =>\n        Window.openExternalURL(getHelpLink('/publishing/publishing-to-itch-io'))\n      }\n      label={<Trans>Publish your game on Itch.io</Trans>}\n    />\n    <FlatButton\n      fullWidth\n      primary\n      onClick={() => Window.openExternalURL('https://gdevelop-app.com/poki')}\n      label={<Trans>Publish your game on Poki.com</Trans>}\n    />\n    <FlatButton\n      fullWidth\n      onClick={() => Window.openExternalURL(getHelpLink('/publishing'))}\n      label={<Trans>Learn more about publishing</Trans>}\n    />\n  </Column>\n);\n","// @flow\nimport { Trans } from '@lingui/macro';\nimport * as React from 'react';\nimport Text from '../../UI/Text';\nimport { Column, Line, Spacer } from '../../UI/Grid';\nimport AlertMessage from '../../UI/AlertMessage';\n\nexport const ExplanationHeader = () => (\n  <Column noMargin>\n    <Text>\n      <Trans>\n        This will export your game using Cocos2d-JS game engine. The game can be\n        compiled for Android or iOS if you install Cocos2d-JS developer tools.\n      </Trans>\n    </Text>\n    <Spacer />\n    <AlertMessage kind=\"info\">\n      <Trans>\n        This export is experimental and not all features are supported by\n        Cocos2D-JS. It's recommended that you thoroughly test your game and be\n        ready to contribute to the game engine if you need to implement missing\n        features.\n      </Trans>\n    </AlertMessage>\n  </Column>\n);\n\nexport const DoneFooter = ({\n  renderGameButton,\n}: {|\n  renderGameButton: () => React.Node,\n|}) => (\n  <Column noMargin>\n    <Text>\n      <Trans>\n        You can now upload the game to a web hosting or use Cocos2d-JS command\n        line tools to export it to other platforms like iOS (XCode is required)\n        or Android (Android SDK is required).\n      </Trans>\n    </Text>\n    <Line justifyContent=\"center\">{renderGameButton()}</Line>\n  </Column>\n);\n","// @flow\n// Note: this file does not use export/imports and use Flow comments to allow its usage from Node.js\n\nconst mapFor = /*:: <T>*/ (\n  start /*: number */,\n  end /*: number */,\n  func /*: (number) => T */\n) /*:Array<T> */ => {\n  const result = [];\n  for (let i = start; i < end; i++) {\n    result.push(func(i));\n  }\n  return result;\n};\n\nconst mapReverseFor = /*:: <T>*/ (\n  start /*: number */,\n  end /*: number */,\n  func /*: (number) => T */\n) /*:Array<T> */ => {\n  const result = [];\n  for (let i = end - 1; i >= start; i--) {\n    result.push(func(i));\n  }\n  return result;\n};\n\n/*flow-include\ntype CppVector<T> = {\n  size: () => number,\n  at: (number) => T,\n}\n*/\n\nconst mapVector = /*:: <T, U>*/ (\n  cppVector /*: CppVector<T> */,\n  func /*: (T, number) => U */\n) /*:Array<U> */ => {\n  return mapFor(0, cppVector.size(), i => func(cppVector.at(i), i));\n};\n\nmodule.exports = {\n  mapFor,\n  mapReverseFor,\n  mapVector,\n};\n","// @flow\nimport { Trans } from '@lingui/macro';\nimport * as React from 'react';\nimport Text from '../../UI/Text';\nimport { Column, Line } from '../../UI/Grid';\nimport FlatButton from '../../UI/FlatButton';\nimport { getHelpLink } from '../../Utils/HelpLink';\nimport Window from '../../Utils/Window';\n\nexport const ExplanationHeader = () => (\n  <Text>\n    <Trans>\n      Prepare your game for Facebook Instant Games so that it can be play on\n      Facebook Messenger. GDevelop will create a compressed file that you can\n      upload on your Facebook Developer account.\n    </Trans>\n  </Text>\n);\n\nexport const DoneFooter = ({\n  renderGameButton,\n}: {|\n  renderGameButton: () => React.Node,\n|}) => {\n  const openLearnMore = () => {\n    Window.openExternalURL(\n      getHelpLink('/publishing/publishing-to-facebook-instant-games')\n    );\n  };\n\n  return (\n    <Column noMargin>\n      <Text>\n        <Trans>\n          You can now create a game on Facebook Instant Games, if not already\n          done, and upload the generated archive.\n        </Trans>\n      </Text>\n      <Line justifyContent=\"center\">\n        {renderGameButton()}\n        <FlatButton\n          label={<Trans>Learn more about Instant Games publication</Trans>}\n          primary\n          onClick={openLearnMore}\n        />\n      </Line>\n    </Column>\n  );\n};\n","// @flow\nimport { Trans } from '@lingui/macro';\nimport * as React from 'react';\nimport Text from '../../UI/Text';\n\nexport const ExplanationHeader = () => (\n  <Text>\n    <Trans>\n      Packaging your game for Android will create an APK file that can be\n      installed on Android phones or published to the Play Store.\n    </Trans>\n  </Text>\n);\n","// @flow\nimport { Trans } from '@lingui/macro';\nimport * as React from 'react';\nimport Text from '../../UI/Text';\nimport Checkbox from '../../UI/Checkbox';\nimport { Column, Line } from '../../UI/Grid';\nimport { type TargetName } from '../../Utils/GDevelopServices/Build';\n\nexport type ExportState = {|\n  targets: Array<TargetName>,\n|};\n\ntype HeaderProps = {|\n  project: gdProject,\n  exportState: ExportState,\n  updateExportState: (\n    updater: (prevExportState: ExportState) => ExportState\n  ) => void,\n|};\n\nexport const SetupExportHeader = ({\n  exportState,\n  updateExportState,\n}: HeaderProps) => {\n  const setTarget = (targetName: TargetName, enable: boolean) => {\n    updateExportState(prevExportState => {\n      if (enable && prevExportState.targets.indexOf(targetName) === -1) {\n        return {\n          ...prevExportState,\n          targets: [...prevExportState.targets, targetName],\n        };\n      } else if (\n        !enable &&\n        prevExportState.targets.indexOf(targetName) !== -1\n      ) {\n        return {\n          ...prevExportState,\n          targets: prevExportState.targets.filter(name => name !== targetName),\n        };\n      }\n\n      return prevExportState;\n    });\n  };\n\n  return (\n    <React.Fragment>\n      <Column noMargin>\n        <Line>\n          <Text>\n            <Trans>\n              Your game will be exported and packaged online as a stand-alone\n              game for Windows, Linux and/or macOS.\n            </Trans>\n          </Text>\n        </Line>\n        <Checkbox\n          label={<Trans>Windows (zip file)</Trans>}\n          checked={exportState.targets.indexOf('winZip') !== -1}\n          onCheck={(e, checked) => setTarget('winZip', checked)}\n        />\n        <Checkbox\n          label={<Trans>Windows (auto-installer file)</Trans>}\n          checked={exportState.targets.indexOf('winExe') !== -1}\n          onCheck={(e, checked) => setTarget('winExe', checked)}\n        />\n        <Checkbox\n          label={<Trans>macOS (zip file)</Trans>}\n          checked={exportState.targets.indexOf('macZip') !== -1}\n          onCheck={(e, checked) => setTarget('macZip', checked)}\n        />\n        <Checkbox\n          label={<Trans>Linux (AppImage)</Trans>}\n          checked={exportState.targets.indexOf('linuxAppImage') !== -1}\n          onCheck={(e, checked) => setTarget('linuxAppImage', checked)}\n        />\n      </Column>\n    </React.Fragment>\n  );\n};\n","// @flow\nimport { Trans } from '@lingui/macro';\nimport * as React from 'react';\nimport Text from '../../UI/Text';\n\nexport const ExplanationHeader = () => (\n  <Text>\n    <Trans>\n      This will export your game and upload it on GDevelop games hosting. The\n      game will be freely accessible from the link, available for a few days and\n      playable from any computer browser or mobile phone (iOS, Android 5+).\n    </Trans>\n  </Text>\n);\n","import React from 'react';\nimport SvgIcon from '@material-ui/core/SvgIcon';\n\nexport default React.memo(props => (\n  <SvgIcon {...props}>\n    <path d=\"M5,3H19A2,2 0 0,1 21,5V19A2,2 0 0,1 19,21H5A2,2 0 0,1 3,19V5A2,2 0 0,1 5,3M18,5H15.5A3.5,3.5 0 0,0 12,8.5V11H10V14H12V21H15V14H18V11H15V9A1,1 0 0,1 16,8H18V5Z\" />\n  </SvgIcon>\n));\n","import React from 'react';\nimport SvgIcon from '@material-ui/core/SvgIcon';\n\nexport default React.memo(props => (\n  <SvgIcon {...props}>\n    <path d=\"M20.18,21.55H16.94L17.17,18.82H15.58L15.35,21.55H8.65L8.42,18.82H6.83L7.06,21.55H3.82L2,9.73L6.55,2.45H17.45L22,9.73L20.18,21.55M16.55,6.09H13.62L13.82,7.45H10.18L10.38,6.09H7.45L5.64,9.73L6.55,17H17.45L18.36,9.73L16.55,6.09M14.95,14.59C14.7,14.59 14.5,13.83 14.5,12.9C14.5,11.96 14.7,11.2 14.95,11.2C15.21,11.2 15.41,11.96 15.41,12.9C15.41,13.83 15.21,14.59 14.95,14.59M9.22,14.73C8.96,14.73 8.76,13.97 8.76,13.04C8.76,12.1 8.96,11.35 9.22,11.35C9.47,11.35 9.67,12.1 9.67,13.04C9.67,13.97 9.47,14.73 9.22,14.73Z\" />\n  </SvgIcon>\n));\n","import React from 'react';\nimport SvgIcon from '@material-ui/core/SvgIcon';\n\nexport default React.memo(props => (\n  <SvgIcon {...props}>\n    <path d=\"M12,20L15.46,14H15.45C15.79,13.4 16,12.73 16,12C16,10.8 15.46,9.73 14.62,9H19.41C19.79,9.93 20,10.94 20,12A8,8 0 0,1 12,20M4,12C4,10.54 4.39,9.18 5.07,8L8.54,14H8.55C9.24,15.19 10.5,16 12,16C12.45,16 12.88,15.91 13.29,15.77L10.89,19.91C7,19.37 4,16.04 4,12M15,12A3,3 0 0,1 12,15A3,3 0 0,1 9,12A3,3 0 0,1 12,9A3,3 0 0,1 15,12M12,4C14.96,4 17.54,5.61 18.92,8H12C10.06,8 8.45,9.38 8.08,11.21L5.7,7.08C7.16,5.21 9.44,4 12,4M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z\" />\n  </SvgIcon>\n));\n","// @flow\n// Note: this file does not use export/imports and use Flow comments to allow its usage from Node.js\n\nconst some = require('lodash/some');\n/*flow-include \nexport type TranslationFunction = (string) => string;\n\nexport type JsExtensionModule = {\n  createExtension(_: TranslationFunction, gd: any): gdPlatformExtension,\n  runExtensionSanityTests(gd: any, extension: gdPlatformExtension): Array<string>,\n};\n\nexport type ExtensionLoadingResult = {\n  error: boolean,\n  message: string,\n  dangerous?: boolean,\n  rawError?: any,\n};\n\nexport interface JsExtensionsLoader {\n  loadAllExtensions(_: TranslationFunction): Promise<\n    Array<{ extensionModulePath: string, result: ExtensionLoadingResult }>\n  >,\n}\n*/\n\n/**\n * Run extensions tests and check for any non-empty results.\n */\nconst runExtensionSanityTests = (\n  gd /*: any */,\n  extension /*: gdPlatformExtension*/,\n  jsExtensionModule /*: JsExtensionModule*/\n) /*: ExtensionLoadingResult*/ => {\n  if (!jsExtensionModule.runExtensionSanityTests) {\n    return {\n      error: true,\n      message:\n        'Missing runExtensionSanityTests in the extension module exports',\n    };\n  }\n\n  const testResults = jsExtensionModule.runExtensionSanityTests(gd, extension);\n  if (some(testResults)) {\n    return {\n      error: true,\n      message: 'One or more tests are failing for the extension (see rawError)',\n      rawError: testResults,\n    };\n  }\n\n  return {\n    error: false,\n    message: 'Tests passed successfully',\n  };\n};\n\n/**\n * Load an extension from the specified JavaScript module, which is supposed\n * to contain a \"createExtension\" function returning a gd.PlatformExtension.\n */\nconst loadExtension = (\n  _ /*: TranslationFunction */,\n  gd /*: any */,\n  platform /*: gdPlatform*/,\n  jsExtensionModule /*: JsExtensionModule*/\n) /*: ExtensionLoadingResult*/ => {\n  if (!jsExtensionModule.createExtension) {\n    return {\n      message:\n        'Extension module found, but no createExtension method is exported',\n      error: true,\n    };\n  }\n\n  let extension = null;\n  try {\n    extension = jsExtensionModule.createExtension(_, gd);\n    if (!extension) {\n      return {\n        message: `createExtension did not return any extension. Did you forget to return the extension created?`,\n        error: true,\n      };\n    }\n  } catch (ex) {\n    return {\n      message: `🚨 Exception caught while running createExtension. 💣 Please fix this error as this will make GDevelop crash at some point.`,\n      error: true,\n      dangerous: true,\n      rawError: ex,\n    };\n  }\n\n  try {\n    const testsResult = runExtensionSanityTests(\n      gd,\n      extension,\n      jsExtensionModule\n    );\n    if (testsResult.error) {\n      extension.delete();\n      return testsResult;\n    }\n  } catch (ex) {\n    return {\n      message: `🚨 Exception caught while running runExtensionSanityTests. 💣 Please fix this error as this will make GDevelop crash at some point.`,\n      error: true,\n      dangerous: true,\n      rawError: ex,\n    };\n  }\n\n  platform.addNewExtension(extension);\n  extension.delete(); // Release the extension as it was copied inside gd.JsPlatform\n\n  return {\n    message: '✅ Successfully loaded the extension.',\n    error: false,\n  };\n};\n\nmodule.exports = {\n  runExtensionSanityTests,\n  loadExtension,\n};\n","// @flow\nimport * as React from 'react';\nimport {\n  type StorageProvider,\n  type StorageProviderOperations,\n  type FileMetadata,\n} from '.';\nimport { type AppArguments } from '../Utils/Window';\n\n/**\n * An empty StorageProvider doing nothing.\n */\nconst emptyStorageProvider: StorageProvider = {\n  internalName: 'Empty',\n  name: 'No storage',\n  createOperations: () => ({\n    onOpenWithPicker: () => Promise.reject('No storage provider set up'),\n    onOpen: () => Promise.reject('No storage provider set up'),\n    hasAutoSave: () => Promise.resolve(false),\n    onSaveProject: (project: gdProject) =>\n      Promise.reject('No storage provider set up'),\n    onSaveProjectAs: (project: gdProject) =>\n      Promise.reject('No storage provider set up'),\n    onAutoSaveProject: (project: gdProject) => {},\n  }),\n};\n\ntype Props = {|\n  appArguments: AppArguments,\n  storageProviders: Array<StorageProvider>,\n  defaultStorageProvider?: StorageProvider,\n  children: ({\n    currentStorageProviderOperations: StorageProviderOperations,\n    storageProviders: Array<StorageProvider>,\n    useStorageProvider: (newStorageProvider: ?StorageProvider) => Promise<void>,\n    initialFileMetadataToOpen: ?FileMetadata,\n  }) => React.Node,\n|};\n\ntype InitialStorageProviderAndFileMetadata = {|\n  currentStorageProvider: ?StorageProvider,\n  initialFileMetadataToOpen: ?FileMetadata,\n|};\n\ntype State = {|\n  ...InitialStorageProviderAndFileMetadata,\n  renderDialog: ?() => React.Node,\n|};\n\nconst computeInitialFileMetadataToOpen = (\n  defaultStorageProvider: ?StorageProvider,\n  storageProviders: Array<StorageProvider>,\n  appArguments: AppArguments\n): InitialStorageProviderAndFileMetadata => {\n  const candidates = storageProviders\n    .map(currentStorageProvider => {\n      return {\n        currentStorageProvider,\n        initialFileMetadataToOpen: currentStorageProvider.getFileMetadataFromAppArguments\n          ? currentStorageProvider.getFileMetadataFromAppArguments(appArguments)\n          : null,\n      };\n    })\n    .filter(({ initialFileMetadataToOpen }) => !!initialFileMetadataToOpen);\n\n  if (candidates.length === 0)\n    return {\n      currentStorageProvider: defaultStorageProvider,\n      initialFileMetadataToOpen: null,\n    };\n\n  if (candidates.length > 1) {\n    console.warn(\n      'More than one storage provider can understand the app arguments. Selecting the first one.'\n    );\n  }\n\n  return candidates[0];\n};\n\nexport default class ProjectStorageProviders extends React.Component<\n  Props,\n  State\n> {\n  state = {\n    ...computeInitialFileMetadataToOpen(\n      this.props.defaultStorageProvider,\n      this.props.storageProviders,\n      this.props.appArguments\n    ),\n    renderDialog: null,\n  };\n\n  _setDialog = (renderDialog: () => React.Node) => {\n    this.setState({\n      renderDialog,\n    });\n  };\n\n  _closeDialog = () => {\n    this.setState({\n      renderDialog: null,\n    });\n  };\n\n  _useStorageProvider = (storageProvider: ?StorageProvider): Promise<void> => {\n    if (!storageProvider) return Promise.resolve();\n\n    return new Promise(resolve => {\n      this.setState(\n        {\n          currentStorageProvider: storageProvider,\n        },\n        () => {\n          resolve();\n        }\n      );\n    });\n  };\n\n  render() {\n    const { children, storageProviders } = this.props;\n    const { renderDialog, initialFileMetadataToOpen } = this.state;\n    const currentStorageProvider =\n      this.state.currentStorageProvider || emptyStorageProvider;\n\n    return (\n      <React.Fragment>\n        {children({\n          currentStorageProviderOperations: currentStorageProvider.createOperations(\n            {\n              setDialog: this._setDialog,\n              closeDialog: this._closeDialog,\n            }\n          ),\n          storageProviders,\n          useStorageProvider: this._useStorageProvider,\n          initialFileMetadataToOpen,\n        })}\n        {renderDialog && renderDialog()}\n      </React.Fragment>\n    );\n  }\n}\n","// @flow\nimport { t } from '@lingui/macro';\nimport * as React from 'react';\nimport { ToolbarGroup } from '../UI/Toolbar';\nimport ToolbarIcon from '../UI/ToolbarIcon';\nimport ToolbarSeparator from '../UI/ToolbarSeparator';\n\ntype Props = {|\n  onPlay: () => void,\n  canPlay: boolean,\n  onPause: () => void,\n  canPause: boolean,\n  onOpenProfiler: () => void,\n|};\n\nexport class Toolbar extends React.PureComponent<Props> {\n  render() {\n    const { onPlay, onPause, canPlay, canPause, onOpenProfiler } = this.props;\n\n    return (\n      <ToolbarGroup lastChild>\n        <ToolbarIcon\n          onClick={onPlay}\n          src=\"res/ribbon_default/preview32.png\"\n          disabled={!canPlay}\n          tooltip={t`Play the game`}\n        />\n        <ToolbarIcon\n          onClick={onPause}\n          src=\"res/ribbon_default/pause32.png\"\n          disabled={!canPause}\n          tooltip={t`Pause the game`}\n        />\n        <ToolbarSeparator />\n        <ToolbarIcon\n          onClick={onOpenProfiler}\n          src=\"res/ribbon_default/profiler32.png\"\n          tooltip={t`Open the performance profiler`}\n        />\n      </ToolbarGroup>\n    );\n  }\n}\n\nexport default Toolbar;\n","// @flow\nimport * as React from 'react';\nimport { List, ListItem } from '../UI/List';\nimport get from 'lodash/get';\nimport {\n  type InspectorDescription,\n  type InspectorDescriptionsGetter,\n  type GameData,\n} from './GDJSInspectorDescriptions';\n\ntype Props = {|\n  gameData: GameData,\n  getInspectorDescriptions: InspectorDescriptionsGetter,\n  onChooseInspector: (\n    InspectorDescription,\n    fullInspectorPath: Array<string>\n  ) => void,\n|};\n\nconst styles = {\n  container: {\n    flex: 1,\n    display: 'flex',\n  },\n  list: {\n    overflowY: 'scroll',\n    flex: 1,\n  },\n};\n\n/**\n * Generate a visual list of inspectors, using gameData and getInspectorDescriptions\n */\nexport default class InspectorsList extends React.Component<Props, void> {\n  _renderInspectorList(\n    gameData: GameData,\n    getInspectorDescriptions: InspectorDescriptionsGetter,\n    path: Array<string>\n  ): Array<React$Element<any> | null> {\n    return getInspectorDescriptions(gameData).map(inspectorDescription => {\n      if (!inspectorDescription) return null;\n      const fullInspectorPath = path.concat(inspectorDescription.key);\n\n      const getSubInspectors = inspectorDescription.getSubInspectors;\n\n      return (\n        <ListItem\n          key={fullInspectorPath.join('.')}\n          primaryText={inspectorDescription.label}\n          initiallyOpen={!!inspectorDescription.initiallyOpen}\n          onClick={() =>\n            this.props.onChooseInspector(\n              inspectorDescription,\n              fullInspectorPath\n            )\n          }\n          renderNestedItems={\n            getSubInspectors\n              ? () =>\n                  this._renderInspectorList(\n                    get(gameData, inspectorDescription.key, null),\n                    getSubInspectors,\n                    fullInspectorPath\n                  )\n              : undefined\n          }\n        />\n      );\n    });\n  }\n\n  render() {\n    return this.props.gameData ? (\n      <List style={styles.list}>\n        {this._renderInspectorList(\n          this.props.gameData,\n          this.props.getInspectorDescriptions,\n          []\n        )}\n      </List>\n    ) : null;\n  }\n}\n","// @flow\nimport * as React from 'react';\nimport ReactJsonView from 'react-json-view';\nimport {\n  type GameData,\n  type EditFunction,\n  type CallFunction,\n} from '../GDJSInspectorDescriptions';\nimport mapValues from 'lodash/mapValues';\n\ntype Props = {|\n  variablesContainer: GameData,\n  onCall: CallFunction,\n  onEdit: EditFunction,\n|};\n\nconst styles = {\n  container: {\n    flex: 1,\n    overflowY: 'scroll',\n  },\n};\n\nconst transformVariable = variable => {\n  if (!variable) return null;\n\n  if (!variable._isStructure) {\n    return variable._stringDirty ? variable._value : variable._str;\n  } else {\n    if (!variable._children) return null;\n\n    return mapValues(variable._children, transformVariable);\n  }\n};\n\nconst transform = variablesContainer => {\n  if (\n    !variablesContainer ||\n    !variablesContainer._variables ||\n    !variablesContainer._variables.items\n  )\n    return null;\n\n  return mapValues(variablesContainer._variables.items, transformVariable);\n};\n\nconst handleEdit = (edit, { onCall, onEdit }: Props) => {\n  // Reconstruct the path to the variable to edit\n  const path = ['_variables', 'items'];\n  edit.namespace.forEach(variableName => {\n    path.push(variableName);\n    path.push('_children');\n  });\n  path.push(edit.name);\n\n  // Guess the type of the new value (number or string)\n  if (parseFloat(edit.new_value).toString() === edit.new_value) {\n    path.push('setNumber');\n    onCall(path, [parseFloat(edit.new_value)]);\n  } else {\n    path.push('setString');\n    onCall(path, ['' + edit.new_value]);\n  }\n\n  return true;\n};\n\nexport default (props: Props) => (\n  <div style={styles.container}>\n    <ReactJsonView\n      collapsed={false}\n      name={false}\n      src={\n        props.variablesContainer ? transform(props.variablesContainer) : null\n      }\n      enableClipboard={false}\n      displayDataTypes={false}\n      displayObjectSize={false}\n      onEdit={edit => handleEdit(edit, props)}\n      groupArraysAfterLength={50}\n      theme=\"monokai\"\n    />\n  </div>\n);\n","// @flow\nimport { Trans } from '@lingui/macro';\n\nimport * as React from 'react';\nimport ReactJsonView from 'react-json-view';\nimport {\n  type GameData,\n  type EditFunction,\n  type CallFunction,\n} from '../GDJSInspectorDescriptions';\nimport VariablesContainerInspector from './VariablesContainerInspector';\nimport Text from '../../UI/Text';\n\ntype Props = {|\n  runtimeObject: GameData,\n  onCall: CallFunction,\n  onEdit: EditFunction,\n|};\n\nconst styles = {\n  container: {\n    flex: 1,\n    overflowY: 'scroll',\n  },\n};\n\nconst transform = runtimeObject => {\n  if (!runtimeObject) return null;\n  return {\n    'X position': runtimeObject.x,\n    'Y position': runtimeObject.y,\n    Angle: runtimeObject.angle,\n    Layer: runtimeObject.layer,\n    'Z order': runtimeObject.zOrder,\n    'Is hidden?': runtimeObject.hidden,\n  };\n};\n\nconst handleEdit = (edit, { onCall, onEdit }: Props) => {\n  if (edit.name === 'X position') {\n    onCall(['setX'], [parseFloat(edit.new_value)]);\n  } else if (edit.name === 'Y position') {\n    onCall(['setY'], [parseFloat(edit.new_value)]);\n  } else if (edit.name === 'Angle') {\n    onCall(['setAngle'], [parseFloat(edit.new_value)]);\n  } else if (edit.name === 'Layer') {\n    onCall(['setLayer'], [edit.new_value]);\n  } else if (edit.name === 'Z order') {\n    onCall(['setZOrder'], [parseFloat(edit.new_value)]);\n  } else if (edit.name === 'Is hidden?') {\n    onCall(['hide'], [!!edit.new_value]);\n  } else return false;\n\n  return true;\n};\n\nexport default (props: Props) => (\n  <div style={styles.container}>\n    <Text>\n      <Trans>General:</Trans>\n    </Text>\n    <ReactJsonView\n      collapsed={false}\n      name={false}\n      src={transform(props.runtimeObject)}\n      enableClipboard={false}\n      displayDataTypes={false}\n      displayObjectSize={false}\n      onEdit={edit => handleEdit(edit, props)}\n      groupArraysAfterLength={50}\n      theme=\"monokai\"\n    />\n    <Text>\n      <Trans>Instance variables:</Trans>\n    </Text>\n    <VariablesContainerInspector\n      variablesContainer={\n        props.runtimeObject ? props.runtimeObject._variables : null\n      }\n      // TODO: onEdit and onCall could benefit from a \"forward\" utility function\n      // (can also be applied in DebuggerContent.js)\n      onEdit={(path, newValue) =>\n        props.onEdit(['_variables'].concat(path), newValue)\n      }\n      onCall={(path, args) => props.onCall(['_variables'].concat(path), args)}\n    />\n  </div>\n);\n","// @flow\nimport { Trans } from '@lingui/macro';\nimport { t } from '@lingui/macro';\n\nimport * as React from 'react';\nimport ReactJsonView from 'react-json-view';\nimport {\n  type GameData,\n  type EditFunction,\n  type CallFunction,\n} from '../GDJSInspectorDescriptions';\nimport { TextFieldWithButtonLayout } from '../../UI/Layout';\nimport mapValues from 'lodash/mapValues';\nimport RaisedButton from '../../UI/RaisedButton';\nimport SemiControlledAutoComplete from '../../UI/SemiControlledAutoComplete';\nimport Text from '../../UI/Text';\n\ntype Props = {|\n  runtimeScene: GameData,\n  onCall: CallFunction,\n  onEdit: EditFunction,\n|};\n\ntype State = {|\n  newObjectName: string,\n|};\n\nconst styles = {\n  container: {\n    flex: 1,\n    overflowY: 'scroll',\n  },\n};\n\nconst transformLayer = layer => {\n  if (!layer) return null;\n  return {\n    'Camera rotation (in deg)': layer._cameraRotation,\n    'Camera zoom': layer._zoomFactor,\n    'Layer is hidden': !!layer._hidden,\n    'Camera X position': layer._cameraX,\n    'Camera Y position': layer._cameraY,\n    'Time scale': layer._timeScale,\n  };\n};\n\nconst transform = runtimeScene => {\n  if (!runtimeScene) return null;\n\n  return {\n    'Time scale': runtimeScene._timeManager\n      ? runtimeScene._timeManager._timeScale\n      : null,\n    Layers:\n      runtimeScene._layers && runtimeScene._layers.items\n        ? mapValues(runtimeScene._layers.items, transformLayer)\n        : null,\n  };\n};\n\nconst handleEdit = (edit, { onCall, onEdit }: Props) => {\n  if (edit.namespace.length === 0 && edit.name === 'Time scale') {\n    onCall(['_timeManager', 'setTimeScale'], [parseFloat(edit.new_value)]);\n  } else if (edit.namespace.length >= 2) {\n    if (edit.namespace[0] === 'Layers') {\n      if (edit.name === 'Camera rotation (in deg)') {\n        onCall(\n          ['_layers', 'items', edit.namespace[1], 'setCameraRotation'],\n          [parseFloat(edit.new_value)]\n        );\n      } else if (edit.name === 'Camera zoom') {\n        onCall(\n          ['_layers', 'items', edit.namespace[1], 'setCameraZoom'],\n          [parseFloat(edit.new_value)]\n        );\n      } else if (edit.name === 'Layer is hidden') {\n        onCall(\n          ['_layers', 'items', edit.namespace[1], 'show'],\n          [!edit.new_value]\n        );\n      } else if (edit.name === 'Camera X position') {\n        onCall(\n          ['_layers', 'items', edit.namespace[1], 'setCameraX'],\n          [parseFloat(edit.new_value)]\n        );\n      } else if (edit.name === 'Camera Y position') {\n        onCall(\n          ['_layers', 'items', edit.namespace[1], 'setCameraY'],\n          [parseFloat(edit.new_value)]\n        );\n      } else if (edit.name === 'Time scale') {\n        onCall(\n          ['_layers', 'items', edit.namespace[1], 'setTimeScale'],\n          [parseFloat(edit.new_value)]\n        );\n      }\n    }\n  } else return false;\n\n  return true;\n};\n\nexport default class RuntimeSceneInspector extends React.Component<\n  Props,\n  State\n> {\n  state = {\n    newObjectName: '',\n  };\n\n  render() {\n    const { runtimeScene, onCall } = this.props;\n    if (!runtimeScene) return null;\n\n    return (\n      <div style={styles.container}>\n        <Text>\n          <Trans>Layers:</Trans>\n        </Text>\n        <ReactJsonView\n          collapsed={false}\n          name={false}\n          src={transform(runtimeScene)}\n          enableClipboard={false}\n          displayDataTypes={false}\n          displayObjectSize={false}\n          onEdit={edit => handleEdit(edit, this.props)}\n          groupArraysAfterLength={50}\n          theme=\"monokai\"\n        />\n        <Text>\n          <Trans>\n            Create a new instance on the scene (will be at position 0;0):\n          </Trans>\n        </Text>\n        {runtimeScene._objects && runtimeScene._objects.items && (\n          <TextFieldWithButtonLayout\n            noFloatingLabelText\n            renderTextField={() => (\n              <SemiControlledAutoComplete\n                hintText={t`Enter the name of the object`}\n                value={this.state.newObjectName}\n                onChange={value => {\n                  this.setState({\n                    newObjectName: value,\n                  });\n                }}\n                dataSource={Object.keys(runtimeScene._objects.items).map(\n                  objectName => ({\n                    text: objectName,\n                    value: objectName,\n                  })\n                )}\n                openOnFocus\n                fullWidth\n              />\n            )}\n            renderButton={style => (\n              <RaisedButton\n                style={style}\n                label={<Trans>Create</Trans>}\n                primary\n                onClick={() => {\n                  onCall(['createObject'], [this.state.newObjectName]);\n                }}\n              />\n            )}\n          />\n        )}\n      </div>\n    );\n  }\n}\n","// @flow\nimport * as React from 'react';\nimport RuntimeObjectInspector from './Inspectors/RuntimeObjectInspector';\nimport VariablesContainerInspector from './Inspectors/VariablesContainerInspector';\nimport RuntimeSceneInspector from './Inspectors/RuntimeSceneInspector';\n\nexport type GameData = any;\nexport type EditFunction = (path: Array<string>, newValue: any) => boolean;\nexport type CallFunction = (path: Array<string>, args: Array<any>) => boolean;\n\nexport type InspectorDescriptionsGetter = (\n  gameData: GameData\n) => Array<InspectorDescription>; //eslint-disable-line\n\nexport type InspectorDescription = {|\n  label: string,\n  key: string | Array<string>,\n  renderInspector: (\n    gameData: GameData,\n    {\n      onCall: CallFunction,\n      onEdit: EditFunction,\n    }\n  ) => React.Node,\n  getSubInspectors?: InspectorDescriptionsGetter,\n  initiallyOpen?: boolean,\n|};\n\n/**\n * Returns the list of inspectors, given the data coming from a GDJS RuntimeGame.\n * @param {*} gdjsRuntimeGame\n */\nexport const getInspectorDescriptions = (\n  gdjsRuntimeGame: GameData\n): Array<InspectorDescription> => {\n  return [\n    {\n      label: 'Global variables',\n      key: '_variables',\n      renderInspector: (gameData, { onCall, onEdit }) => (\n        <VariablesContainerInspector\n          variablesContainer={gameData}\n          onCall={onCall}\n          onEdit={onEdit}\n        />\n      ),\n    },\n    {\n      label: 'Scenes',\n      key: ['_sceneStack', '_stack'],\n      renderInspector: () => null,\n      initiallyOpen: true,\n      getSubInspectors: gdjsStack => {\n        if (!gdjsStack) return [];\n\n        return gdjsStack.map((runtimeScene, index) => ({\n          label: runtimeScene._name,\n          key: index,\n          renderInspector: (gameData, { onCall, onEdit }) => (\n            <RuntimeSceneInspector\n              runtimeScene={gameData}\n              onCall={onCall}\n              onEdit={onEdit}\n            />\n          ),\n          initiallyOpen: true,\n          getSubInspectors: runtimeScene => [\n            {\n              label: 'Scene variables',\n              key: `_variables`,\n              renderInspector: (gameData, { onCall, onEdit }) => (\n                <VariablesContainerInspector\n                  variablesContainer={gameData}\n                  onCall={onCall}\n                  onEdit={onEdit}\n                />\n              ),\n            },\n            {\n              label: 'Instances',\n              key: `_instances`,\n              renderInspector: () => null,\n              initiallyOpen: true,\n              getSubInspectors: instances => {\n                if (!instances || !instances.items) return [];\n\n                return Object.keys(instances.items).map(objectName => {\n                  if (\n                    !instances.items[objectName] ||\n                    typeof instances.items[objectName].length === undefined\n                  )\n                    return null;\n\n                  return {\n                    label: `${objectName} (${\n                      instances.items[objectName].length\n                    })`,\n                    key: ['items', objectName],\n                    renderInspector: () => null,\n                    getSubInspectors: instancesList =>\n                      instancesList\n                        ? instancesList\n                            .filter(runtimeObject => !!runtimeObject)\n                            .map((runtimeObject, index) => {\n                              return {\n                                label: `#${runtimeObject.id}`,\n                                key: index,\n                                renderInspector: (\n                                  gameData,\n                                  { onCall, onEdit }\n                                ) => (\n                                  <RuntimeObjectInspector\n                                    runtimeObject={gameData}\n                                    onCall={onCall}\n                                    onEdit={onEdit}\n                                  />\n                                ),\n                              };\n                            })\n                        : [],\n                  };\n                });\n              },\n            },\n          ],\n        }));\n      },\n    },\n  ];\n};\n","// @flow\nimport { Trans } from '@lingui/macro';\n\nimport * as React from 'react';\nimport ReactJsonView from 'react-json-view';\nimport { type GameData } from '../GDJSInspectorDescriptions';\nimport EmptyMessage from '../../UI/EmptyMessage';\n\ntype Props = {|\n  gameData: GameData,\n  onEdit: (path: Array<string>, newValue: any) => boolean,\n|};\n\nconst styles = {\n  container: {\n    flex: 1,\n    overflowY: 'scroll',\n  },\n};\n\n/**\n * A very simple inspector that display the raw information given by the gameData\n * object.\n */\nexport default ({ gameData, onEdit }: Props) => (\n  <div style={styles.container}>\n    <EmptyMessage>\n      <Trans>\n        You are in raw mode. You can edit the fields, but be aware that this can\n        lead to unexpected results or even crash the debugged game!\n      </Trans>\n    </EmptyMessage>\n    <ReactJsonView\n      collapsed={1}\n      name={false}\n      src={gameData}\n      onEdit={edit => {\n        return onEdit(edit.namespace.concat(edit.name), edit.new_value);\n      }}\n      groupArraysAfterLength={50}\n      theme=\"monokai\"\n    />\n  </div>\n);\n","// @flow\nimport { Trans } from '@lingui/macro';\n\nimport * as React from 'react';\nimport { AutoSizer, Table, Column } from 'react-virtualized';\nimport ThemeConsumer from '../../UI/Theme/ThemeConsumer';\nimport flatMap from 'lodash/flatMap';\nimport { type ProfilerMeasuresSection } from '..';\nimport IconButton from '../../UI/IconButton';\nimport ExpandMore from '@material-ui/icons/ExpandMore';\nimport ChevronRight from '@material-ui/icons/ChevronRight';\n\nconst styles = {\n  indent: {\n    display: 'flex',\n    alignItems: 'center',\n  },\n};\n\ntype Props = {|\n  profilerMeasures: ?ProfilerMeasuresSection,\n|};\n\ntype ProfilerRowData = {|\n  name: string,\n  time: string,\n  parentPercent: string,\n  totalPercent: string,\n  depth: number,\n  hasSubsections: boolean,\n  path: string,\n  isCollapsed: boolean,\n|};\n\ntype State = {|\n  collapsedPaths: { [string]: boolean },\n|};\n\nexport default class MeasuresTable extends React.Component<Props, State> {\n  state = {\n    collapsedPaths: {},\n  };\n\n  _convertToDataRows = (\n    name: string,\n    parentSection: ?ProfilerMeasuresSection,\n    section: ProfilerMeasuresSection,\n    depth: number = 0,\n    path: string = ''\n  ): Array<ProfilerRowData> => {\n    const { profilerMeasures } = this.props;\n\n    const parentPercent =\n      parentSection && section.time && parentSection.time !== 0\n        ? (section.time / parentSection.time) * 100\n        : 100;\n    const totalPercent =\n      profilerMeasures && section.time && profilerMeasures.time !== 0\n        ? (section.time / profilerMeasures.time) * 100\n        : 100;\n    const isCollapsed = this._isSectionCollapsed(path);\n\n    return [\n      {\n        name,\n        time: section.time ? `${section.time.toFixed(2)}ms` : '?',\n        parentPercent: `${parentPercent.toFixed(2)}%`,\n        totalPercent: `${totalPercent.toFixed(2)}%`,\n        depth,\n        hasSubsections: !!Object.keys(section.subsections).length,\n        path,\n        isCollapsed,\n      },\n      ...(isCollapsed\n        ? []\n        : flatMap(section.subsections, (subsection, subsectionName) =>\n            this._convertToDataRows(\n              subsectionName,\n              section,\n              subsection,\n              depth + 1,\n              `${path}>${depth}.${subsectionName}`\n            )\n          )),\n    ];\n  };\n\n  _isSectionCollapsed = (path: string) => {\n    return this.state.collapsedPaths[path];\n  };\n\n  _toggleSection = (path: string) => {\n    this.setState(state => ({\n      collapsedPaths: {\n        ...state.collapsedPaths,\n        [path]: !state.collapsedPaths[path],\n      },\n    }));\n  };\n\n  _rowClassName = ({ index }: { index: number }) => {\n    if (index < 0) {\n      return 'tableHeaderRow';\n    } else {\n      return index % 2 === 0 ? 'tableEvenRow' : 'tableOddRow';\n    }\n  };\n\n  _renderSectionNameCell = ({ rowData }: { rowData: ProfilerRowData }) => {\n    return (\n      <div style={styles.indent}>\n        <div style={{ width: rowData.depth * 8 }} />\n        {rowData.hasSubsections ? (\n          <IconButton onClick={() => this._toggleSection(rowData.path)}>\n            {rowData.isCollapsed ? <ChevronRight /> : <ExpandMore />}\n          </IconButton>\n        ) : (\n          <div style={{ width: 24 }} />\n        )}\n        {rowData.name}\n      </div>\n    );\n  };\n\n  render() {\n    const { profilerMeasures } = this.props;\n    if (!profilerMeasures) return null;\n\n    const dataRows = this._convertToDataRows('All', null, profilerMeasures);\n\n    return (\n      <ThemeConsumer>\n        {muiTheme => (\n          <AutoSizer>\n            {({ height, width }) => (\n              <Table\n                headerHeight={30}\n                height={height}\n                className={muiTheme.tableRootClassName}\n                headerClassName={'tableHeaderColumn'}\n                rowCount={dataRows.length}\n                rowGetter={({ index }) => dataRows[index]}\n                rowHeight={35}\n                onRowClick={() => {}}\n                rowClassName={this._rowClassName}\n                width={width}\n              >\n                <Column\n                  label={<Trans>Section name</Trans>}\n                  dataKey=\"name\"\n                  width={width * 0.4}\n                  className={'tableColumn'}\n                  cellRenderer={this._renderSectionNameCell}\n                />\n                <Column\n                  label={<Trans>Time (ms)</Trans>}\n                  dataKey=\"time\"\n                  width={width * 0.2}\n                  className={'tableColumn'}\n                />\n                <Column\n                  label={<Trans>% of parent</Trans>}\n                  dataKey=\"parentPercent\"\n                  width={width * 0.2}\n                  className={'tableColumn'}\n                />\n                <Column\n                  label={<Trans>% of total</Trans>}\n                  dataKey=\"totalPercent\"\n                  width={width * 0.2}\n                  className={'tableColumn'}\n                />\n              </Table>\n            )}\n          </AutoSizer>\n        )}\n      </ThemeConsumer>\n    );\n  }\n}\n","// @flow\nimport { Trans } from '@lingui/macro';\n\nimport * as React from 'react';\nimport RaisedButton from '../../UI/RaisedButton';\nimport MeasuresTable from './MeasuresTable';\nimport { type ProfilerOutput } from '..';\nimport EmptyMessage from '../../UI/EmptyMessage';\nimport { Line } from '../../UI/Grid';\nimport Background from '../../UI/Background';\nimport LinearProgress from '@material-ui/core/LinearProgress';\nimport Text from '../../UI/Text';\n\nconst styles = {\n  tableContainer: {\n    flex: 1,\n  },\n};\n\ntype Props = {|\n  onStart: () => void,\n  onStop: () => void,\n  profilerOutput: ?ProfilerOutput,\n  profilingInProgress: boolean,\n|};\n\nexport default class Profiler extends React.Component<Props, void> {\n  render() {\n    const { onStart, onStop, profilerOutput, profilingInProgress } = this.props;\n\n    return (\n      <Background>\n        <Line alignItems=\"center\" justifyContent=\"center\">\n          {!profilingInProgress && profilerOutput && (\n            <Text>\n              <Trans>\n                Last run collected on {profilerOutput.stats.framesCount} frames.\n              </Trans>\n            </Text>\n          )}\n          {!profilingInProgress && profilerOutput && (\n            <RaisedButton label={<Trans>Restart</Trans>} onClick={onStart} />\n          )}\n          {!profilingInProgress && !profilerOutput && (\n            <RaisedButton\n              label={<Trans>Start profiling</Trans>}\n              onClick={onStart}\n            />\n          )}\n          {profilingInProgress && (\n            <RaisedButton\n              label={<Trans>Stop profiling</Trans>}\n              onClick={onStop}\n            />\n          )}\n        </Line>\n        {profilingInProgress && (\n          <Line alignItems=\"center\">\n            <LinearProgress style={{ flex: 1 }} variant={'indeterminate'} />\n          </Line>\n        )}\n        <div style={styles.tableContainer}>\n          {profilerOutput && (\n            <MeasuresTable\n              profilerMeasures={profilerOutput.framesAverageMeasures}\n            />\n          )}\n          {!profilerOutput && (\n            <EmptyMessage>\n              <Trans>\n                Start profiling and then stop it after a few seconds to see the\n                results.\n              </Trans>\n            </EmptyMessage>\n          )}\n        </div>\n      </Background>\n    );\n  }\n}\n","// @flow\nimport { Trans } from '@lingui/macro';\nimport { t } from '@lingui/macro';\n\nimport * as React from 'react';\nimport EditorMosaic from '../UI/EditorMosaic';\nimport Background from '../UI/Background';\nimport get from 'lodash/get';\nimport RaisedButton from '../UI/RaisedButton';\nimport { Column, Line } from '../UI/Grid';\nimport InspectorsList from './InspectorsList';\nimport {\n  getInspectorDescriptions,\n  type InspectorDescription,\n  type EditFunction,\n  type CallFunction,\n} from './GDJSInspectorDescriptions';\nimport RawContentInspector from './Inspectors/RawContentInspector';\nimport EmptyMessage from '../UI/EmptyMessage';\nimport Checkbox from '../UI/Checkbox';\nimport Flash from '@material-ui/icons/FlashOn';\nimport FlashOff from '@material-ui/icons/FlashOff';\nimport HelpButton from '../UI/HelpButton';\nimport Profiler from './Profiler';\nimport { type ProfilerOutput } from '.';\n\ntype Props = {|\n  gameData: ?any,\n  onEdit: EditFunction,\n  onCall: CallFunction,\n  onPlay: () => void,\n  onPause: () => void,\n  onRefresh: () => void,\n  onStartProfiler: () => void,\n  onStopProfiler: () => void,\n  profilerOutput: ?ProfilerOutput,\n  profilingInProgress: boolean,\n|};\n\ntype State = {|\n  selectedInspector: ?InspectorDescription,\n  selectedInspectorFullPath: Array<string>,\n  rawMode: boolean,\n|};\n\n/**\n * The debugger interface: show the list of inspectors for a game, along with the\n * currently selected inspector.\n */\nexport default class DebuggerContent extends React.Component<Props, State> {\n  state = {\n    selectedInspector: null,\n    selectedInspectorFullPath: [],\n    rawMode: false,\n  };\n\n  _editors: ?EditorMosaic = null;\n\n  openProfiler = () => {\n    if (this._editors) this._editors.openEditor('profiler', 'end', 75, 'row');\n  };\n\n  render() {\n    const {\n      gameData,\n      onRefresh,\n      onCall,\n      onEdit,\n      onStartProfiler,\n      onStopProfiler,\n      profilerOutput,\n      profilingInProgress,\n    } = this.props;\n    const {\n      selectedInspector,\n      selectedInspectorFullPath,\n      rawMode,\n    } = this.state;\n\n    return (\n      <EditorMosaic\n        ref={editors => (this._editors = editors)}\n        editors={{\n          inspectors: {\n            type: 'primary',\n            title: t`Inspectors`,\n            toolbarControls: [],\n            renderEditor: () => (\n              <Background>\n                <Column expand noMargin useMaxHeight>\n                  <Line justifyContent=\"center\">\n                    <RaisedButton\n                      label={<Trans>Refresh</Trans>}\n                      onClick={onRefresh}\n                      primary\n                    />\n                  </Line>\n                  <InspectorsList\n                    gameData={gameData}\n                    getInspectorDescriptions={getInspectorDescriptions}\n                    onChooseInspector={(\n                      selectedInspector,\n                      selectedInspectorFullPath\n                    ) =>\n                      this.setState({\n                        selectedInspector,\n                        selectedInspectorFullPath,\n                      })\n                    }\n                  />\n                </Column>\n              </Background>\n            ),\n          },\n          'selected-inspector': {\n            type: 'primary',\n            noTitleBar: true,\n            renderEditor: () => (\n              <Background>\n                <Column expand noMargin>\n                  {selectedInspector ? (\n                    rawMode ? (\n                      <RawContentInspector\n                        gameData={get(\n                          gameData,\n                          selectedInspectorFullPath,\n                          null\n                        )}\n                        onEdit={(path, newValue) =>\n                          onEdit(\n                            selectedInspectorFullPath.concat(path),\n                            newValue\n                          )\n                        }\n                      />\n                    ) : (\n                      selectedInspector.renderInspector(\n                        get(gameData, selectedInspectorFullPath, null),\n                        {\n                          onCall: (path, args) =>\n                            onCall(\n                              selectedInspectorFullPath.concat(path),\n                              args\n                            ),\n                          onEdit: (path, newValue) =>\n                            onEdit(\n                              selectedInspectorFullPath.concat(path),\n                              newValue\n                            ),\n                        }\n                      ) || (\n                        <EmptyMessage>\n                          <Trans>\n                            No inspector, choose another element in the list or\n                            toggle the raw data view.\n                          </Trans>\n                        </EmptyMessage>\n                      )\n                    )\n                  ) : (\n                    <EmptyMessage>\n                      {gameData ? (\n                        <Trans>Choose an element to inspect in the list</Trans>\n                      ) : (\n                        <Trans>\n                          Pause the game (from the toolbar) or hit refresh (on\n                          the left) to inspect the game\n                        </Trans>\n                      )}\n                    </EmptyMessage>\n                  )}\n                  <Column>\n                    <Line justifyContent=\"space-between\" alignItems=\"center\">\n                      <HelpButton helpPagePath=\"/interface/debugger\" />\n                      <div>\n                        <Checkbox\n                          checkedIcon={<Flash />}\n                          uncheckedIcon={<FlashOff />}\n                          checked={rawMode}\n                          onCheck={(e, enabled) =>\n                            this.setState({\n                              rawMode: enabled,\n                            })\n                          }\n                        />\n                      </div>\n                    </Line>\n                  </Column>\n                </Column>\n              </Background>\n            ),\n          },\n          profiler: {\n            type: 'secondary',\n            title: t`Profiler`,\n            renderEditor: () => (\n              <Profiler\n                onStart={onStartProfiler}\n                onStop={onStopProfiler}\n                profilerOutput={profilerOutput}\n                profilingInProgress={profilingInProgress}\n              />\n            ),\n          },\n        }}\n        initialNodes={{\n          direction: 'column',\n          first: {\n            direction: 'row',\n            first: 'inspectors',\n            second: 'selected-inspector',\n            splitPercentage: 25,\n          },\n          second: 'profiler',\n          splitPercentage: 65,\n        }}\n      />\n    );\n  }\n}\n","// @flow\nimport { t } from '@lingui/macro';\nimport * as React from 'react';\nimport SelectField from '../UI/SelectField';\nimport SelectOption from '../UI/SelectOption';\nimport { Column } from '../UI/Grid';\nimport { type DebuggerId } from '.';\n\ntype Props = {|\n  selectedId: DebuggerId,\n  debuggerIds: Array<DebuggerId>,\n  onChooseDebugger: DebuggerId => void,\n|};\n\nexport default class DebuggerSelector extends React.Component<Props, void> {\n  render() {\n    const hasDebuggers = !!this.props.debuggerIds.length;\n    return (\n      <Column>\n        <SelectField\n          fullWidth\n          value={hasDebuggers ? this.props.selectedId : 0}\n          onChange={(e, i, value) =>\n            this.props.onChooseDebugger(parseInt(value, 10) || 0)\n          }\n          disabled={!hasDebuggers}\n        >\n          {this.props.debuggerIds.map(id => (\n            <SelectOption\n              value={id}\n              key={id}\n              primaryText={t`Game preview #${id}`}\n            />\n          ))}\n          {!hasDebuggers && (\n            <SelectOption\n              value={0}\n              primaryText={t`No preview running. Run a preview and you will be able to inspect it with the debugger`}\n            />\n          )}\n        </SelectField>\n      </Column>\n    );\n  }\n}\n","// @flow\nimport { Trans } from '@lingui/macro';\n\nimport * as React from 'react';\nimport Toolbar from './Toolbar';\nimport DebuggerContent from './DebuggerContent';\nimport DebuggerSelector from './DebuggerSelector';\nimport { Column } from '../UI/Grid';\nimport Text from '../UI/Text';\nimport PlaceholderLoader from '../UI/PlaceholderLoader';\nimport PlaceholderMessage from '../UI/PlaceholderMessage';\nimport Background from '../UI/Background';\nimport optionalRequire from '../Utils/OptionalRequire';\nimport EmptyMessage from '../UI/EmptyMessage';\nconst electron = optionalRequire('electron');\nconst ipcRenderer = electron ? electron.ipcRenderer : null;\n\n//Each game connected to the debugger server is identified by a unique number\nexport type DebuggerId = number;\n\nexport type ProfilerMeasuresSection = {|\n  time: number,\n  subsections: { [string]: ProfilerMeasuresSection },\n|};\n\nexport type ProfilerOutput = {|\n  framesAverageMeasures: ProfilerMeasuresSection,\n  stats: {\n    framesCount: number,\n  },\n|};\n\ntype Props = {|\n  project: gdProject,\n  setToolbar: React.Node => void,\n  isActive: boolean,\n|};\n\ntype State = {|\n  debuggerServerStarted: boolean,\n  debuggerServerError: ?any,\n\n  debuggerIds: Array<DebuggerId>,\n  debuggerGameData: { [DebuggerId]: any },\n  profilerOutputs: { [DebuggerId]: ProfilerOutput },\n  profilingInProgress: { [DebuggerId]: boolean },\n  selectedId: DebuggerId,\n|};\n\n/**\n * Start the debugger server, listen to commands received and issue commands to it.\n * This is only supported on Electron runtime for now.\n */\nexport default class Debugger extends React.Component<Props, State> {\n  state = {\n    debuggerServerStarted: false,\n    debuggerServerError: null,\n    debuggerIds: [],\n    debuggerGameData: {},\n    profilerOutputs: {},\n    profilingInProgress: {},\n    selectedId: 0,\n  };\n\n  _debuggerContents: { [DebuggerId]: ?DebuggerContent } = {};\n\n  updateToolbar() {\n    if (!this.props.isActive) return;\n\n    this.props.setToolbar(\n      <Toolbar\n        onPlay={() => this._play(this.state.selectedId)}\n        onPause={() => this._pause(this.state.selectedId)}\n        canPlay={this._hasSelectedDebugger()}\n        canPause={this._hasSelectedDebugger()}\n        onOpenProfiler={() => {\n          if (this._debuggerContents[this.state.selectedId])\n            this._debuggerContents[this.state.selectedId].openProfiler();\n        }}\n      />\n    );\n  }\n\n  componentDidMount() {\n    if (this.props.isActive) {\n      this._startServer();\n    }\n  }\n\n  componentWillReceiveProps(nextProps: Props) {\n    if (nextProps.isActive && !this.props.isActive) {\n      this._startServer();\n    }\n  }\n\n  componentWillUnmount() {\n    this._removeServerListeners();\n  }\n\n  _removeServerListeners = () => {\n    if (!ipcRenderer) return;\n\n    ipcRenderer.removeAllListeners('debugger-send-message-done');\n    ipcRenderer.removeAllListeners('debugger-error-received');\n    ipcRenderer.removeAllListeners('debugger-connection-closed');\n    ipcRenderer.removeAllListeners('debugger-connection-opened');\n    ipcRenderer.removeAllListeners('debugger-start-server-done');\n    ipcRenderer.removeAllListeners('debugger-message-received');\n  };\n\n  _startServer = () => {\n    if (!ipcRenderer) return;\n\n    this.setState({\n      debuggerServerStarted: false,\n    });\n    this._removeServerListeners();\n\n    ipcRenderer.on('debugger-error-received', (event, err) => {\n      this.setState(\n        {\n          debuggerServerError: err,\n        },\n        () => this.updateToolbar()\n      );\n    });\n\n    ipcRenderer.on('debugger-connection-closed', (event, { id }) => {\n      const { debuggerIds, selectedId } = this.state;\n      const remainingDebuggerIds = debuggerIds.filter(\n        debuggerId => debuggerId !== id\n      );\n      this.setState(\n        {\n          debuggerIds: remainingDebuggerIds,\n          selectedId:\n            selectedId !== id\n              ? selectedId\n              : remainingDebuggerIds.length\n              ? remainingDebuggerIds[remainingDebuggerIds.length - 1]\n              : selectedId,\n        },\n        () => this.updateToolbar()\n      );\n    });\n\n    ipcRenderer.on('debugger-connection-opened', (event, { id }) => {\n      this.setState(\n        {\n          debuggerIds: [...this.state.debuggerIds, id],\n          selectedId: id,\n        },\n        () => this.updateToolbar()\n      );\n    });\n\n    ipcRenderer.on('debugger-start-server-done', event => {\n      this.setState(\n        {\n          debuggerServerStarted: true,\n        },\n        () => this.updateToolbar()\n      );\n    });\n\n    ipcRenderer.on('debugger-message-received', (event, { id, message }) => {\n      console.log('Processing message received for debugger');\n      try {\n        const data = JSON.parse(message);\n        this._handleMessage(id, data);\n      } catch (e) {\n        console.warn(\n          'Error while parsing message received from debugger client:',\n          e\n        );\n      }\n    });\n    ipcRenderer.send('debugger-start-server');\n  };\n\n  _handleMessage = (id: DebuggerId, data: any) => {\n    if (data.command === 'dump') {\n      this.setState({\n        debuggerGameData: {\n          ...this.state.debuggerGameData,\n          [id]: data.payload,\n        },\n      });\n    } else if (data.command === 'profiler.output') {\n      this.setState({\n        profilerOutputs: {\n          ...this.state.profilerOutputs,\n          [id]: data.payload,\n        },\n      });\n    } else if (data.command === 'profiler.started') {\n      this.setState(state => ({\n        profilingInProgress: { ...state.profilingInProgress, [id]: true },\n      }));\n    } else if (data.command === 'profiler.stopped') {\n      this.setState(state => ({\n        profilingInProgress: { ...state.profilingInProgress, [id]: false },\n      }));\n    } else {\n      console.warn(\n        'Unknown command received from debugger client:',\n        data.command\n      );\n    }\n  };\n\n  _play = (id: DebuggerId) => {\n    if (!ipcRenderer) return;\n\n    ipcRenderer.send('debugger-send-message', {\n      id,\n      message: '{\"command\": \"play\"}',\n    });\n  };\n\n  _pause = (id: DebuggerId) => {\n    if (!ipcRenderer) return;\n\n    ipcRenderer.send('debugger-send-message', {\n      id,\n      message: '{\"command\": \"pause\"}',\n    });\n  };\n\n  _refresh = (id: DebuggerId) => {\n    if (!ipcRenderer) return;\n\n    ipcRenderer.send('debugger-send-message', {\n      id,\n      message: '{\"command\": \"refresh\"}',\n    });\n  };\n\n  _edit = (id: DebuggerId, path: Array<string>, newValue: any) => {\n    if (!ipcRenderer) return false;\n\n    ipcRenderer.send('debugger-send-message', {\n      id,\n      message: JSON.stringify({\n        command: 'set',\n        path,\n        newValue,\n      }),\n    });\n\n    setTimeout(() => this._refresh(id), 100);\n    return true;\n  };\n\n  _call = (id: DebuggerId, path: Array<string>, args: Array<any>) => {\n    if (!ipcRenderer) return false;\n\n    ipcRenderer.send('debugger-send-message', {\n      id,\n      message: JSON.stringify({\n        command: 'call',\n        path,\n        args,\n      }),\n    });\n\n    setTimeout(() => this._refresh(id), 100);\n    return true;\n  };\n\n  _startProfiler = (id: DebuggerId) => {\n    if (!ipcRenderer) return;\n\n    ipcRenderer.send('debugger-send-message', {\n      id,\n      message: '{\"command\": \"profiler.start\"}',\n    });\n  };\n\n  _stopProfiler = (id: DebuggerId) => {\n    if (!ipcRenderer) return;\n\n    ipcRenderer.send('debugger-send-message', {\n      id,\n      message: '{\"command\": \"profiler.stop\"}',\n    });\n  };\n\n  _hasSelectedDebugger = () => {\n    const { selectedId, debuggerIds } = this.state;\n    return debuggerIds.indexOf(selectedId) !== -1;\n  };\n\n  render() {\n    const {\n      debuggerServerError,\n      debuggerServerStarted,\n      selectedId,\n      debuggerIds,\n      debuggerGameData,\n      profilerOutputs,\n      profilingInProgress,\n    } = this.state;\n\n    return (\n      <Background>\n        {!debuggerServerStarted && !debuggerServerError && (\n          <PlaceholderMessage>\n            <PlaceholderLoader />\n            <Text>\n              <Trans>Debugger is starting...</Trans>\n            </Text>\n          </PlaceholderMessage>\n        )}\n        {!debuggerServerStarted && debuggerServerError && (\n          <PlaceholderMessage>\n            <Text>\n              <Trans>\n                Unable to start the debugger server! Make sure that you are\n                authorized to run servers on this computer.\n              </Trans>\n            </Text>\n          </PlaceholderMessage>\n        )}\n        {debuggerServerStarted && (\n          <Column expand noMargin>\n            <DebuggerSelector\n              selectedId={selectedId}\n              debuggerIds={debuggerIds}\n              onChooseDebugger={id =>\n                this.setState({\n                  selectedId: id,\n                })\n              }\n            />\n            {this._hasSelectedDebugger() && (\n              <DebuggerContent\n                ref={debuggerContent =>\n                  (this._debuggerContents[selectedId] = debuggerContent)\n                }\n                gameData={debuggerGameData[selectedId]}\n                onPlay={() => this._play(selectedId)}\n                onPause={() => this._pause(selectedId)}\n                onRefresh={() => this._refresh(selectedId)}\n                onEdit={(path, args) => this._edit(selectedId, path, args)}\n                onCall={(path, args) => this._call(selectedId, path, args)}\n                onStartProfiler={() => this._startProfiler(selectedId)}\n                onStopProfiler={() => this._stopProfiler(selectedId)}\n                profilerOutput={profilerOutputs[selectedId]}\n                profilingInProgress={profilingInProgress[selectedId]}\n              />\n            )}\n            {!this._hasSelectedDebugger() && (\n              <EmptyMessage>\n                <Trans>\n                  Run a preview and you will be able to inspect it with the\n                  debugger.\n                </Trans>\n              </EmptyMessage>\n            )}\n          </Column>\n        )}\n      </Background>\n    );\n  }\n}\n","// @flow\nimport { Trans } from '@lingui/macro';\n\nimport * as React from 'react';\nimport Debugger from '../../Debugger';\nimport BaseEditor from './BaseEditor';\nimport SubscriptionChecker from '../../Profile/SubscriptionChecker';\n\nexport default class DebuggerEditor extends BaseEditor {\n  editor: ?Debugger;\n  _subscriptionChecker: ?SubscriptionChecker;\n  state = {\n    subscriptionChecked: false,\n  };\n\n  updateToolbar() {\n    if (this.editor) this.editor.updateToolbar();\n  }\n\n  forceUpdateEditor() {\n    // No updates to be done.\n  }\n\n  componentWillReceiveProps() {\n    this._checkHasSubscription();\n  }\n\n  componentDidMount() {\n    this._checkHasSubscription();\n  }\n\n  _checkHasSubscription() {\n    if (\n      this._subscriptionChecker &&\n      this.props.isActive &&\n      !this.state.subscriptionChecked\n    ) {\n      this._subscriptionChecker.checkHasSubscription();\n      this.setState({\n        subscriptionChecked: true,\n      });\n    }\n  }\n\n  render() {\n    return (\n      <React.Fragment>\n        <Debugger {...this.props} ref={editor => (this.editor = editor)} />\n        <SubscriptionChecker\n          ref={subscriptionChecker =>\n            (this._subscriptionChecker = subscriptionChecker)\n          }\n          onChangeSubscription={() => {\n            if (this.props.onChangeSubscription)\n              this.props.onChangeSubscription();\n          }}\n          id=\"Debugger\"\n          title={<Trans>Debugger</Trans>}\n          mode=\"try\"\n        />\n      </React.Fragment>\n    );\n  }\n}\n","// @flow\nimport { t } from '@lingui/macro';\nimport { I18n } from '@lingui/react';\nimport { Trans } from '@lingui/macro';\nimport * as React from 'react';\nimport RaisedButton from '../../UI/RaisedButton';\nimport FlatButton from '../../UI/FlatButton';\nimport { Spacer, Line } from '../../UI/Grid';\nimport EmptyMessage from '../../UI/EmptyMessage';\nimport difference_in_seconds from 'date-fns/difference_in_seconds';\nimport LinearProgress from '@material-ui/core/LinearProgress';\nimport Text from '../../UI/Text';\nimport {\n  type Build,\n  type BuildArtifactKeyName,\n} from '../../Utils/GDevelopServices/Build';\n\nconst buildTypesConfig = {\n  'cordova-build': {\n    estimatedTimeInSeconds: (build: Build) => 300,\n    completeDescription:\n      'You can download it on your Android phone and install it.',\n  },\n  'electron-build': {\n    estimatedTimeInSeconds: (build: Build) =>\n      90 + 130 * (build.targets ? build.targets.length : 0),\n    completeDescription: '',\n  },\n  'web-build': {\n    estimatedTimeInSeconds: (build: Build) => 5,\n    completeDescription: '',\n  },\n};\n\nconst buttons = [\n  {\n    displayName: t`Download`,\n    key: 'apkKey',\n  },\n  {\n    displayName: t`Windows (zip)`,\n    key: 'windowsZipKey',\n  },\n  {\n    displayName: t`Windows (exe)`,\n    key: 'windowsExeKey',\n  },\n  {\n    displayName: t`macOS (zip)`,\n    key: 'macosZipKey',\n  },\n  {\n    displayName: t`Linux (AppImage)`,\n    key: 'linuxAppImageKey',\n  },\n  {\n    displayName: t`Open`,\n    key: 's3Key',\n  },\n];\n\ntype Props = {|\n  build: Build,\n  onDownload: (key: BuildArtifactKeyName) => void,\n|};\n\n/**\n * Show an estimate of the progress of a build or the button\n * to download the artifacts.\n */\nexport default ({ build, onDownload }: Props) => {\n  const config = buildTypesConfig[build.type];\n  const secondsSinceLastUpdate = Math.abs(\n    difference_in_seconds(build.updatedAt, Date.now())\n  );\n  const estimatedRemainingTime = Math.max(\n    config ? config.estimatedTimeInSeconds(build) - secondsSinceLastUpdate : 0,\n    0\n  );\n\n  return (\n    <I18n>\n      {({ i18n }) =>\n        build.status === 'error' ? (\n          <React.Fragment>\n            <Line alignItems=\"center\">\n              <Text>\n                <Trans>Something wrong happened :(</Trans>\n              </Text>\n              <Spacer />\n              <RaisedButton\n                label={<Trans>See logs</Trans>}\n                onClick={() => onDownload('logsKey')}\n              />\n            </Line>\n            <Line alignItems=\"center\">\n              <EmptyMessage>\n                <Trans>\n                  Check the logs to see if there is an explanation about what\n                  went wrong, or try again later.\n                </Trans>\n              </EmptyMessage>\n            </Line>\n          </React.Fragment>\n        ) : build.status === 'pending' ? (\n          <Line alignItems=\"center\" expand>\n            <LinearProgress\n              style={{ flex: 1 }}\n              value={\n                config.estimatedTimeInSeconds(build) > 0\n                  ? ((config.estimatedTimeInSeconds(build) -\n                      estimatedRemainingTime) /\n                      config.estimatedTimeInSeconds(build)) *\n                    100\n                  : 0\n              }\n              variant={\n                estimatedRemainingTime > 0 ? 'determinate' : 'indeterminate'\n              }\n            />\n            <Spacer />\n            {estimatedRemainingTime > 0 ? (\n              <Text>\n                <Trans>\n                  ~{Math.round(estimatedRemainingTime / 60)} minutes.\n                </Trans>\n              </Text>\n            ) : (\n              <Text>\n                <Trans>Should finish soon.</Trans>\n              </Text>\n            )}\n          </Line>\n        ) : build.status === 'complete' ? (\n          <React.Fragment>\n            <Line expand>\n              {buttons\n                .filter(button => !!build[button.key])\n                .map((button, index) => (\n                  <React.Fragment key={button.key}>\n                    {index !== 0 && <Spacer />}\n                    <RaisedButton\n                      label={i18n._(button.displayName)}\n                      primary\n                      onClick={() => onDownload(button.key)}\n                    />\n                  </React.Fragment>\n                ))}\n              <FlatButton\n                label={<Trans>See logs</Trans>}\n                onClick={() => onDownload('logsKey')}\n              />\n            </Line>\n            <Line expand>\n              {config && <Text>{config.completeDescription}</Text>}\n            </Line>\n          </React.Fragment>\n        ) : (\n          <Line>\n            <Trans>Unknown status</Trans>\n          </Line>\n        )\n      }\n    </I18n>\n  );\n};\n","// @flow\nimport { Trans } from '@lingui/macro';\n\nimport * as React from 'react';\nimport Paper from '@material-ui/core/Paper';\nimport {\n  type Build,\n  type BuildArtifactKeyName,\n} from '../../Utils/GDevelopServices/Build';\nimport { Column, Line } from '../../UI/Grid';\nimport EmptyMessage from '../../UI/EmptyMessage';\nimport PlaceholderLoader from '../../UI/PlaceholderLoader';\nimport BuildProgress from './BuildProgress';\nimport { type UserProfile } from '../../Profile/UserProfileContext';\nimport format from 'date-fns/format';\nimport difference_in_calendar_days from 'date-fns/difference_in_calendar_days';\nimport Text from '../../UI/Text';\n\ntype Props = {|\n  builds: ?Array<Build>,\n  userProfile: UserProfile,\n  onDownload: (build: Build, key: BuildArtifactKeyName) => void,\n|};\n\nconst styles = {\n  buildContainer: {\n    padding: 10,\n  },\n};\n\nconst formatBuildText = (\n  buildType: 'cordova-build' | 'electron-build' | 'web-build'\n) => {\n  switch (buildType) {\n    case 'cordova-build':\n      return <Trans>Android Build</Trans>;\n    case 'electron-build':\n      return <Trans>Windows/macOS/Linux Build</Trans>;\n    case 'web-build':\n      return <Trans>Web (upload online) Build</Trans>;\n    default:\n      return buildType;\n  }\n};\n\nexport default ({ builds, userProfile, onDownload }: Props) => {\n  return (\n    <Column noMargin expand>\n      <Line>\n        <Column>\n          <EmptyMessage>\n            <Trans>\n              This is the list of builds that you've done. Note that you can\n              download games generated during the last 7 days, after which they\n              are removed.\n            </Trans>\n          </EmptyMessage>\n        </Column>\n      </Line>\n      <Line>\n        {!userProfile.authenticated ? (\n          <EmptyMessage>\n            <Trans>You need to login first to see your builds.</Trans>\n          </EmptyMessage>\n        ) : !builds ? (\n          <PlaceholderLoader />\n        ) : builds.length === 0 ? (\n          <EmptyMessage>\n            <Trans>\n              You don't have any builds on the online services for now.\n            </Trans>\n          </EmptyMessage>\n        ) : (\n          <Column noMargin expand>\n            {builds.map((build: Build) => {\n              const isOld =\n                build &&\n                difference_in_calendar_days(Date.now(), build.updatedAt) > 6;\n\n              return (\n                <Paper style={styles.buildContainer} key={build.id}>\n                  <Text>\n                    {formatBuildText(build.type)} -{' '}\n                    <Trans>Last updated on</Trans>{' '}\n                    {format(build.updatedAt, 'YYYY-MM-DD HH:mm:ss')}\n                  </Text>\n                  {!isOld && (\n                    <BuildProgress\n                      build={build}\n                      onDownload={key => onDownload(build, key)}\n                    />\n                  )}\n                  {isOld && (\n                    <EmptyMessage>\n                      <Trans>\n                        This build is old and the generated games can't be\n                        downloaded anymore.\n                      </Trans>\n                    </EmptyMessage>\n                  )}\n                </Paper>\n              );\n            })}\n          </Column>\n        )}\n      </Line>\n    </Column>\n  );\n};\n","//@flow\nexport const delay = (ms: number): Promise<void> =>\n  new Promise(res => setTimeout(res, ms));\n","// @flow\nimport { type Build, getBuild } from '../../Utils/GDevelopServices/Build';\nimport { delay } from '../../Utils/Delay';\nimport { type UserProfile } from '../../Profile/UserProfileContext';\n\nconst waitTime = 1500;\nconst bulkWaitTime = 5000;\nconst maxTimeBeforeIgnoring = 12 * 60 * 60 * 1000; // 12 hours in milliseconds\n\nexport default class BuildsWatcher {\n  runningWatchers: { [string]: boolean } = {};\n  nextWatcherId = 0;\n  onBuildUpdated: ?(build: Build) => void;\n  userProfile: ?UserProfile;\n\n  start({\n    userProfile,\n    builds,\n    onBuildUpdated,\n  }: {\n    userProfile: UserProfile,\n    builds: Array<Build>,\n    onBuildUpdated: (build: Build) => void,\n  }) {\n    this.stop();\n    this.userProfile = userProfile;\n    this.onBuildUpdated = onBuildUpdated;\n\n    builds.forEach(build => {\n      if (build.status === 'pending') {\n        if (\n          (!build.createdAt ||\n            build.createdAt < Date.now() - maxTimeBeforeIgnoring) &&\n          (!build.updatedAt ||\n            build.updatedAt < Date.now() - maxTimeBeforeIgnoring)\n        ) {\n          console.info(\n            \"Ignoring a build for polling as it's too old and still pending\",\n            build\n          );\n        } else {\n          this._pollBuild(\n            build.id,\n            builds.length > 1 ? bulkWaitTime : waitTime\n          );\n        }\n      }\n    });\n  }\n\n  stop() {\n    this.runningWatchers = {};\n  }\n\n  _pollBuild = async (buildId: string, waitTime: number) => {\n    const watcherId = this.nextWatcherId.toString();\n    this.nextWatcherId++;\n\n    this.runningWatchers[watcherId] = true;\n\n    let build = null;\n    do {\n      if (!this.userProfile) return;\n\n      const { getAuthorizationHeader, profile } = this.userProfile;\n      if (!profile) return;\n\n      try {\n        console.info(`Checking progress of build ${buildId}...`);\n        build = await getBuild(getAuthorizationHeader, profile.uid, buildId);\n        if (this.onBuildUpdated) this.onBuildUpdated(build);\n      } catch (e) {\n        console.warn('Error while watching build progress:', e);\n      }\n\n      await delay(waitTime);\n      if (!this.runningWatchers[watcherId]) {\n        console.info(`Stopping watch of build ${buildId}.`);\n        return;\n      }\n    } while (build && build.status === 'pending');\n\n    console.info(`Watch of build ${buildId} finished.`);\n  };\n}\n","// @flow\nimport React, { Component } from 'react';\nimport { type UserProfile } from '../../Profile/UserProfileContext';\nimport BuildsList from './BuildsList';\nimport {\n  getBuilds,\n  type Build,\n  type BuildArtifactKeyName,\n  getBuildArtifactUrl,\n} from '../../Utils/GDevelopServices/Build';\nimport Window from '../../Utils/Window';\nimport BuildsWatcher from './BuildsWatcher';\n\ntype Props = {|\n  onBuildsUpdated: ?() => void,\n  userProfile: UserProfile,\n|};\ntype State = {|\n  builds: ?Array<Build>,\n|};\n\nexport default class Builds extends Component<Props, State> {\n  state = {\n    builds: null,\n  };\n  buildsWatcher = new BuildsWatcher();\n\n  componentDidMount() {\n    this._refreshBuilds();\n  }\n\n  componentWillUnmount() {\n    this.buildsWatcher.stop();\n  }\n\n  _startBuildsWatcher = () => {\n    if (!this.state.builds) return;\n\n    this.buildsWatcher.start({\n      userProfile: this.props.userProfile,\n      builds: this.state.builds,\n      onBuildUpdated: (newBuild: Build) => {\n        if (!this.state.builds) return;\n\n        this.setState({\n          builds: this.state.builds.map((oldBuild: Build) => {\n            if (newBuild.id === oldBuild.id) return newBuild;\n\n            return oldBuild;\n          }),\n        });\n      },\n    });\n  };\n\n  _refreshBuilds = () => {\n    const { getAuthorizationHeader, profile } = this.props.userProfile;\n    if (!profile) return;\n\n    getBuilds(getAuthorizationHeader, profile.uid).then(\n      builds => {\n        this.setState(\n          {\n            builds,\n          },\n          () => {\n            this._startBuildsWatcher();\n            if (this.props.onBuildsUpdated) this.props.onBuildsUpdated();\n          }\n        );\n      },\n      () => {\n        //TODO: Handle error\n      }\n    );\n  };\n\n  _download = (build: Build, key: BuildArtifactKeyName) => {\n    const url = getBuildArtifactUrl(build, key);\n    if (url) Window.openExternalURL(url);\n  };\n\n  render() {\n    return (\n      <BuildsList\n        builds={this.state.builds}\n        userProfile={this.props.userProfile}\n        onDownload={this._download}\n      />\n    );\n  }\n}\n","// @flow\nimport { Trans } from '@lingui/macro';\n\nimport React, { Component } from 'react';\nimport Dialog from '../../UI/Dialog';\nimport HelpButton from '../../UI/HelpButton';\nimport FlatButton from '../../UI/FlatButton';\nimport Builds from '.';\nimport { type UserProfile } from '../../Profile/UserProfileContext';\n\ntype Props = {|\n  userProfile: UserProfile,\n  open: boolean,\n  onClose: () => void,\n|};\ntype State = {||};\n\nexport default class BuildsDialog extends Component<Props, State> {\n  _onBuildsUpdated = () => {\n    // Force the Dialog repositioning\n    this.forceUpdate();\n  };\n\n  render() {\n    const { open, onClose, userProfile } = this.props;\n    if (!open) return null;\n\n    return (\n      <Dialog\n        title={<Trans>All your builds</Trans>}\n        onRequestClose={onClose}\n        actions={[\n          <FlatButton\n            label={<Trans>Close</Trans>}\n            key=\"close\"\n            primary={false}\n            onClick={onClose}\n          />,\n        ]}\n        secondaryActions={[\n          <HelpButton key=\"help\" helpPagePath={'/publishing'} />,\n        ]}\n        cannotBeDismissed={false}\n        open={open}\n        noMargin\n      >\n        <Builds\n          onBuildsUpdated={this._onBuildsUpdated}\n          userProfile={userProfile}\n        />\n      </Dialog>\n    );\n  }\n}\n","// @flow\nimport { Trans } from '@lingui/macro';\n\nimport * as React from 'react';\nimport RaisedButton from '../UI/RaisedButton';\nimport { Column, Line } from '../UI/Grid';\nimport { type Limit, type Subscription } from '../Utils/GDevelopServices/Usage';\nimport PlaceholderLoader from '../UI/PlaceholderLoader';\nimport Text from '../UI/Text';\n\ntype Props = {|\n  subscription: ?Subscription,\n  limit: ?Limit,\n  onChangeSubscription: Function,\n|};\n\nexport default ({ subscription, limit, onChangeSubscription }: Props) => {\n  if (!limit) return <PlaceholderLoader />;\n  const hasSubscription = subscription && !!subscription.planId;\n  const noSubscription = subscription && !subscription.planId;\n\n  return (\n    <Column noMargin>\n      <Text>\n        <Trans>\n          You have {Math.max(limit.max - limit.current, 0)} remaining builds for\n          today (out of {limit.max}).\n        </Trans>\n      </Text>\n      {hasSubscription && limit.limitReached && (\n        <Text>\n          <Trans>\n            Need more power? You can upgrade to a new plan to increase the\n            limit!\n          </Trans>\n        </Text>\n      )}\n      {hasSubscription && limit.limitReached && (\n        <Line justifyContent=\"center\" alignItems=\"center\">\n          <RaisedButton\n            label={<Trans>Upgrade my account</Trans>}\n            onClick={onChangeSubscription}\n            primary\n          />\n        </Line>\n      )}\n      {noSubscription && (\n        <Text>\n          <Trans>\n            You don't have a subscription. Get one to increase the limits!\n          </Trans>\n        </Text>\n      )}\n      {noSubscription && (\n        <Line justifyContent=\"center\" alignItems=\"center\">\n          <RaisedButton\n            label={<Trans>Get a subscription</Trans>}\n            onClick={onChangeSubscription}\n            primary\n          />\n        </Line>\n      )}\n    </Column>\n  );\n};\n","// @flow\nimport { Trans } from '@lingui/macro';\n\nimport * as React from 'react';\nimport Stepper from '@material-ui/core/Stepper';\nimport Step from '@material-ui/core/Step';\nimport StepLabel from '@material-ui/core/StepLabel';\nimport StepContent from '@material-ui/core/StepContent';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport LinearProgress from '@material-ui/core/LinearProgress';\nimport { Line, Spacer, Column } from '../../UI/Grid';\nimport BuildProgress from './BuildProgress';\nimport {\n  type Build,\n  type BuildArtifactKeyName,\n} from '../../Utils/GDevelopServices/Build';\nimport EmptyMessage from '../../UI/EmptyMessage';\nimport Text from '../../UI/Text';\nimport AlertMessage from '../../UI/AlertMessage';\n\nconst styles = {\n  stepper: { flex: 1 },\n  linearProgress: { flex: 1 },\n};\n\nexport type BuildStep =\n  | ''\n  | 'export'\n  | 'resources-download'\n  | 'compress'\n  | 'upload'\n  | 'waiting-for-build'\n  | 'build'\n  | 'done';\n\ntype Props = {|\n  exportStep: BuildStep,\n  onDownload: (key: BuildArtifactKeyName) => void,\n  build: ?Build,\n  stepMaxProgress: number,\n  stepCurrentProgress: number,\n  errored: boolean,\n  showSeeAllMyBuildsExplanation?: boolean,\n  hasBuildStep: boolean,\n|};\n\n/**\n * Can be used in an exporter to show the overall progress of a build\n * (including local archiving/upload steps and remote build progress)\n */\nexport default ({\n  exportStep,\n  onDownload,\n  build,\n  stepMaxProgress,\n  stepCurrentProgress,\n  errored,\n  hasBuildStep,\n  showSeeAllMyBuildsExplanation,\n}: Props) => (\n  <Stepper\n    activeStep={\n      exportStep === 'export' || exportStep === 'resources-download'\n        ? 0\n        : exportStep === 'compress' || exportStep === 'upload'\n        ? 1\n        : exportStep === 'waiting-for-build' || exportStep === 'build'\n        ? 2\n        : exportStep === 'done'\n        ? hasBuildStep\n          ? 2\n          : 1\n        : -1\n    }\n    orientation=\"vertical\"\n    style={styles.stepper}\n  >\n    <Step>\n      <StepLabel>\n        <Trans>Game export</Trans>\n      </StepLabel>\n      <StepContent>\n        {errored ? (\n          <AlertMessage kind=\"error\">\n            <Trans>Can't properly export the game.</Trans>{' '}\n            <Trans>\n              Please check your internet connection or try again later.\n            </Trans>\n          </AlertMessage>\n        ) : exportStep === 'resources-download' ? (\n          <Column expand noMargin>\n            <Text>\n              <Trans>Downloading game resources...</Trans>\n            </Text>\n            <Line expand>\n              <LinearProgress\n                style={styles.linearProgress}\n                value={\n                  stepMaxProgress > 0\n                    ? (stepCurrentProgress / stepMaxProgress) * 100\n                    : 0\n                }\n                variant=\"determinate\"\n              />\n            </Line>\n          </Column>\n        ) : (\n          <Column expand noMargin>\n            <Text>\n              <Trans>Export in progress...</Trans>\n            </Text>\n            <Line expand>\n              <LinearProgress style={styles.linearProgress} />\n            </Line>\n          </Column>\n        )}\n      </StepContent>\n    </Step>\n    {hasBuildStep && (\n      <Step>\n        <StepLabel>\n          <Trans>Upload to build service</Trans>\n        </StepLabel>\n        <StepContent>\n          {errored ? (\n            <AlertMessage kind=\"error\">\n              <Trans>Can't upload your game to the build service.</Trans>{' '}\n              <Trans>\n                Please check your internet connection or try again later.\n              </Trans>\n            </AlertMessage>\n          ) : exportStep === 'compress' ? (\n            <Line alignItems=\"center\">\n              <CircularProgress size={20} />\n              <Spacer />\n              <Text>\n                <Trans>Compressing before upload...</Trans>\n              </Text>\n            </Line>\n          ) : (\n            <Line alignItems=\"center\" expand>\n              <LinearProgress\n                style={styles.linearProgress}\n                value={\n                  stepMaxProgress > 0\n                    ? (stepCurrentProgress / stepMaxProgress) * 100\n                    : 0\n                }\n                variant=\"determinate\"\n              />\n            </Line>\n          )}\n        </StepContent>\n      </Step>\n    )}\n    {hasBuildStep && (\n      <Step>\n        <StepLabel>\n          <Trans>Build and download</Trans>\n        </StepLabel>\n        <StepContent>\n          {errored && (\n            <AlertMessage kind=\"error\">\n              <Trans>\n                Build could not start or errored. Please check your internet\n                connection or try again later.\n              </Trans>\n            </AlertMessage>\n          )}\n          {!build && !errored && (\n            <Text>\n              <Trans>Build is starting...</Trans>\n            </Text>\n          )}\n          {build && <BuildProgress build={build} onDownload={onDownload} />}\n          {showSeeAllMyBuildsExplanation && (\n            <EmptyMessage>\n              <Trans>\n                If you close this window while the build is being done, you can\n                see its progress and download the game later by clicking on See\n                All My Builds below.\n              </Trans>\n            </EmptyMessage>\n          )}\n        </StepContent>\n      </Step>\n    )}\n    {!hasBuildStep && (\n      <Step>\n        <StepLabel>\n          <Trans>Done</Trans>\n        </StepLabel>\n        <StepContent />\n      </Step>\n    )}\n  </Stepper>\n);\n","// @flow\n\nimport React, { Component } from 'react';\nimport RaisedButton from '../UI/RaisedButton';\nimport { sendExportLaunched } from '../Utils/Analytics/EventSender';\nimport {\n  type Build,\n  type BuildArtifactKeyName,\n  getBuildArtifactUrl,\n} from '../Utils/GDevelopServices/Build';\nimport { type UserProfile } from '../Profile/UserProfileContext';\nimport { Column, Line } from '../UI/Grid';\nimport { showErrorBox } from '../UI/Messages/MessageBox';\nimport Window from '../Utils/Window';\nimport CreateProfile from '../Profile/CreateProfile';\nimport LimitDisplayer from '../Profile/LimitDisplayer';\nimport {\n  displayProjectErrorsBox,\n  getErrors,\n} from '../ProjectManager/ProjectErrorsChecker';\nimport { type Limit } from '../Utils/GDevelopServices/Usage';\nimport BuildsWatcher from './Builds/BuildsWatcher';\nimport BuildStepsProgress, {\n  type BuildStep,\n} from './Builds/BuildStepsProgress';\nimport { type ExportPipeline } from './ExportPipeline.flow';\n\ntype State = {|\n  exportStep: BuildStep,\n  compressionOutput: any,\n  build: ?Build,\n  stepCurrentProgress: number,\n  stepMaxProgress: number,\n  errored: boolean,\n  exportState: any,\n  doneFooterOpen: boolean,\n|};\n\ntype Props = {|\n  project: gdProject,\n  onChangeSubscription: () => void,\n  userProfile: UserProfile,\n  exportPipeline: ExportPipeline<any, any, any, any, any>,\n|};\n\n/**\n * A generic UI to launch, monitor the progres and get the result\n * of an export.\n */\nexport default class ExportLauncher extends Component<Props, State> {\n  state = {\n    exportStep: '',\n    build: null,\n    compressionOutput: null,\n    stepCurrentProgress: 0,\n    stepMaxProgress: 0,\n    doneFooterOpen: false,\n    errored: false,\n    exportState: this.props.exportPipeline.getInitialExportState(\n      this.props.project\n    ),\n  };\n  buildsWatcher = new BuildsWatcher();\n\n  componentWillUnmount() {\n    this.buildsWatcher.stop();\n  }\n\n  _updateStepProgress = (\n    stepCurrentProgress: number,\n    stepMaxProgress: number\n  ) =>\n    this.setState({\n      stepCurrentProgress,\n      stepMaxProgress,\n    });\n\n  _startBuildWatch = (userProfile: UserProfile) => {\n    if (!this.state.build) return;\n\n    this.buildsWatcher.start({\n      userProfile,\n      builds: [this.state.build],\n      onBuildUpdated: (build: Build) => this.setState({ build }),\n    });\n  };\n\n  launchWholeExport = (userProfile: UserProfile) => {\n    const t = str => str; //TODO;\n    const { project, exportPipeline } = this.props;\n    sendExportLaunched(exportPipeline.name);\n\n    if (!displayProjectErrorsBox(t, getErrors(t, project))) return;\n\n    const handleError = (message: string) => (err: Error) => {\n      if (!this.state.errored) {\n        this.setState({\n          errored: true,\n        });\n        showErrorBox(message + (err.message ? `\\n${err.message}` : ''), {\n          exportStep: this.state.exportStep,\n          rawError: err,\n        });\n      }\n\n      throw err;\n    };\n\n    const exportPipelineContext = {\n      project,\n      updateStepProgress: this._updateStepProgress,\n      exportState: this.state.exportState,\n    };\n\n    this.setState({\n      exportStep: 'export',\n      stepCurrentProgress: 0,\n      stepMaxProgress: 0,\n      errored: false,\n      build: null,\n    });\n    exportPipeline\n      .prepareExporter(exportPipelineContext)\n      .then(preparedExporter => {\n        return exportPipeline.launchExport(\n          exportPipelineContext,\n          preparedExporter\n        );\n      }, handleError(t('Error while preparing the exporter.')))\n      .then(exportOutput => {\n        this.setState({\n          exportStep: 'resources-download',\n        });\n        return exportPipeline.launchResourcesDownload(\n          exportPipelineContext,\n          exportOutput\n        );\n      }, handleError(t('Error while exporting the game.')))\n      .then(resourcesDownloadOutput => {\n        this.setState({\n          exportStep: 'compress',\n        });\n        return exportPipeline.launchCompression(\n          exportPipelineContext,\n          resourcesDownloadOutput\n        );\n      }, handleError(t('Error while exporting the game.')))\n      .then(compressionOutput => {\n        const { launchUpload, launchOnlineBuild } = exportPipeline;\n        if (!!launchUpload && !!launchOnlineBuild) {\n          this.setState({\n            exportStep: 'upload',\n          });\n          return launchUpload(exportPipelineContext, compressionOutput)\n            .then((uploadBucketKey: string) => {\n              this.setState({\n                exportStep: 'waiting-for-build',\n              });\n              return launchOnlineBuild(\n                this.state.exportState,\n                userProfile,\n                uploadBucketKey\n              );\n            }, handleError(t('Error while uploading the game. Check your internet connection or try again later.')))\n            .then(build => {\n              this.setState(\n                {\n                  build,\n                  exportStep: 'build',\n                },\n                () => {\n                  this._startBuildWatch(userProfile);\n                }\n              );\n\n              return { compressionOutput };\n            }, handleError(t('Error while lauching the build of the game.')));\n        }\n\n        return { compressionOutput };\n      }, handleError(t('Error while compressing the game.')))\n      .then(({ compressionOutput }) => {\n        this.setState({\n          compressionOutput,\n          doneFooterOpen: true,\n          exportStep: 'done',\n        });\n      })\n      .catch(() => {\n        /* Error handled previously */\n      });\n  };\n\n  _downloadBuild = (key: BuildArtifactKeyName) => {\n    const url = getBuildArtifactUrl(this.state.build, key);\n    if (url) Window.openExternalURL(url);\n  };\n\n  _closeDoneFooter = () =>\n    this.setState({\n      doneFooterOpen: false,\n    });\n\n  _updateExportState = (updater: any => any) => {\n    this.setState(prevState => ({\n      ...prevState,\n      exportState: updater(prevState.exportState),\n    }));\n  };\n\n  render() {\n    const {\n      exportStep,\n      compressionOutput,\n      build,\n      stepMaxProgress,\n      stepCurrentProgress,\n      errored,\n      doneFooterOpen,\n      exportState,\n    } = this.state;\n    const { project, userProfile, exportPipeline } = this.props;\n    if (!project) return null;\n\n    const getBuildLimit = (userProfile: UserProfile): ?Limit =>\n      userProfile.limits && exportPipeline.onlineBuildType\n        ? userProfile.limits[exportPipeline.onlineBuildType]\n        : null;\n    const canLaunchBuild = (userProfile: UserProfile) => {\n      if (!errored && exportStep !== '' && exportStep !== 'done') return false;\n\n      const limit: ?Limit = getBuildLimit(userProfile);\n      if (limit && limit.limitReached) return false;\n\n      return exportPipeline.canLaunchBuild(exportState);\n    };\n\n    return (\n      <Column noMargin>\n        <Line>\n          {exportPipeline.renderHeader({\n            project,\n            exportState,\n            updateExportState: this._updateExportState,\n          })}\n        </Line>\n        {(!exportPipeline.onlineBuildType || userProfile.authenticated) && (\n          <Line justifyContent=\"center\">\n            <RaisedButton\n              label={exportPipeline.renderLaunchButtonLabel()}\n              primary\n              onClick={() => this.launchWholeExport(userProfile)}\n              disabled={!canLaunchBuild(userProfile)}\n            />\n          </Line>\n        )}\n        {!!exportPipeline.onlineBuildType && userProfile.authenticated && (\n          <LimitDisplayer\n            subscription={userProfile.subscription}\n            limit={getBuildLimit(userProfile)}\n            onChangeSubscription={this.props.onChangeSubscription}\n          />\n        )}\n        {!!exportPipeline.onlineBuildType && !userProfile.authenticated && (\n          <CreateProfile\n            onLogin={userProfile.onLogin}\n            onCreateAccount={userProfile.onCreateAccount}\n          />\n        )}\n        <Line expand>\n          <BuildStepsProgress\n            exportStep={exportStep}\n            hasBuildStep={!!exportPipeline.onlineBuildType}\n            build={build}\n            onDownload={this._downloadBuild}\n            stepMaxProgress={stepMaxProgress}\n            stepCurrentProgress={stepCurrentProgress}\n            errored={errored}\n          />\n        </Line>\n        {doneFooterOpen &&\n          exportPipeline.renderDoneFooter &&\n          exportPipeline.renderDoneFooter({\n            compressionOutput,\n            exportState,\n            onClose: this._closeDoneFooter,\n          })}\n      </Column>\n    );\n  }\n}\n","// @flow\nimport * as React from 'react';\n\nfunction getOnlineStatus() {\n  return typeof navigator !== 'undefined' &&\n    typeof navigator.onLine === 'boolean'\n    ? navigator.onLine\n    : true;\n}\n\n/**\n * React Hook listening to the navigator online status.\n */\nexport const useOnlineStatus = () => {\n  const [onlineStatus, setOnlineStatus] = React.useState(getOnlineStatus());\n\n  const goOnline = () => setOnlineStatus(true);\n\n  const goOffline = () => setOnlineStatus(false);\n\n  React.useEffect(() => {\n    window.addEventListener('online', goOnline);\n    window.addEventListener('offline', goOffline);\n\n    return () => {\n      window.removeEventListener('online', goOnline);\n      window.removeEventListener('offline', goOffline);\n    };\n  }, []);\n\n  return onlineStatus;\n};\n\ntype Props = {|\n  children: (onlineStatus: boolean) => React.Node,\n|};\n\n/**\n * Component listening to the navigator online status, passing\n * it down to children.\n */\nexport const OnlineStatus = ({ children }: Props) => {\n  const onlineStatus = useOnlineStatus();\n  return children(onlineStatus);\n};\n","// @flow\nimport { Trans } from '@lingui/macro';\nimport * as React from 'react';\nimport Dialog from '../UI/Dialog';\nimport HelpButton from '../UI/HelpButton';\nimport FlatButton from '../UI/FlatButton';\nimport Subheader from '../UI/Subheader';\nimport { List, ListItem } from '../UI/List';\nimport Visibility from '@material-ui/icons/Visibility';\nimport VisibilityOff from '@material-ui/icons/VisibilityOff';\nimport BuildsDialog from './Builds/BuildsDialog';\nimport { Line } from '../UI/Grid';\nimport UserProfileContext, {\n  type UserProfile,\n} from '../Profile/UserProfileContext';\nimport ExportLauncher from './ExportLauncher';\nimport { type ExportPipeline } from './ExportPipeline.flow';\nimport { OnlineStatus } from '../Utils/OnlineStatus';\nimport AlertMessage from '../UI/AlertMessage';\n\nconst styles = {\n  icon: { width: 40, height: 40 },\n  disabledItem: { opacity: 0.6 },\n  content: { padding: 24 },\n};\n\nexport type Exporter = {|\n  name: React.Node,\n  renderIcon: (props: {|\n    style: {| width: number, height: number |},\n  |}) => React.Node,\n  helpPage: string,\n  description: React.Node,\n  disabled?: boolean,\n  advanced?: boolean,\n  experimental?: boolean,\n  key: string,\n  exportPipeline: ExportPipeline<any, any, any, any, any>,\n|};\n\nexport type ExportDialogWithoutExportsProps = {|\n  project: ?gdProject,\n  onClose: () => void,\n  onChangeSubscription: () => void,\n|};\n\ntype Props = {|\n  ...ExportDialogWithoutExportsProps,\n  exporters: Array<Exporter>,\n  allExportersRequireOnline?: boolean,\n|};\n\ntype State = {|\n  chosenExporterKey: string,\n  showExperimental: boolean,\n  buildsDialogOpen: boolean,\n|};\n\nexport default class ExportDialog extends React.Component<Props, State> {\n  state = {\n    chosenExporterKey: '',\n    showExperimental: false,\n    buildsDialogOpen: false,\n  };\n\n  chooseExporter = (key: string) => {\n    this.setState({\n      chosenExporterKey: key,\n    });\n  };\n\n  _showExperimental = (show: boolean = true) => {\n    this.setState({\n      showExperimental: show,\n    });\n  };\n\n  _openBuildsDialog = (open: boolean = true) => {\n    this.setState({\n      buildsDialogOpen: open,\n    });\n  };\n\n  _renderExporterListItem = (\n    exporter: Exporter,\n    index: number,\n    forceDisable: boolean\n  ) => {\n    return (\n      <ListItem\n        key={exporter.key}\n        disabled={forceDisable || exporter.disabled}\n        style={\n          forceDisable || exporter.disabled ? styles.disabledItem : undefined\n        }\n        leftIcon={exporter.renderIcon({ style: styles.icon })}\n        primaryText={exporter.name}\n        secondaryText={exporter.description}\n        secondaryTextLines={2}\n        onClick={() => this.chooseExporter(exporter.key)}\n      />\n    );\n  };\n\n  render() {\n    const {\n      project,\n      onClose,\n      allExportersRequireOnline,\n      onChangeSubscription,\n      exporters,\n    } = this.props;\n    const { showExperimental, chosenExporterKey } = this.state;\n    if (!project) return null;\n\n    const exporter = exporters.find(\n      exporter => exporter.key === chosenExporterKey\n    );\n\n    return (\n      <UserProfileContext.Consumer>\n        {(userProfile: UserProfile) => (\n          <OnlineStatus>\n            {onlineStatus => {\n              const cantExportBecauseOffline =\n                !!allExportersRequireOnline && !onlineStatus;\n              return (\n                <Dialog\n                  title={<Trans>Export project to a standalone game</Trans>}\n                  onRequestClose={onClose}\n                  cannotBeDismissed={false}\n                  actions={[\n                    chosenExporterKey && (\n                      <FlatButton\n                        label={<Trans>Back</Trans>}\n                        key=\"back\"\n                        primary={false}\n                        onClick={() => this.chooseExporter('')}\n                      />\n                    ),\n                    <FlatButton\n                      label={<Trans>Close</Trans>}\n                      key=\"close\"\n                      primary={false}\n                      onClick={onClose}\n                    />,\n                  ]}\n                  secondaryActions={[\n                    <HelpButton\n                      key=\"help\"\n                      helpPagePath={\n                        (exporter && exporter.helpPage) || '/publishing'\n                      }\n                    />,\n                    <FlatButton\n                      key=\"builds\"\n                      label={<Trans>See all my builds</Trans>}\n                      onClick={() => this._openBuildsDialog(true)}\n                    />,\n                  ]}\n                  open\n                  noMargin\n                >\n                  {cantExportBecauseOffline && (\n                    <AlertMessage kind=\"error\">\n                      <Trans>\n                        You must be online and have a proper internet connection\n                        to export your game.\n                      </Trans>\n                    </AlertMessage>\n                  )}\n                  {!exporter && (\n                    <React.Fragment>\n                      <List>\n                        {exporters\n                          .filter(\n                            exporter =>\n                              !exporter.advanced && !exporter.experimental\n                          )\n                          .map((exporter, index) =>\n                            this._renderExporterListItem(\n                              exporter,\n                              index,\n                              cantExportBecauseOffline\n                            )\n                          )}\n\n                        <Subheader>Advanced</Subheader>\n                        {exporters\n                          .filter(exporter => exporter.advanced)\n                          .map((exporter, index) =>\n                            this._renderExporterListItem(\n                              exporter,\n                              index,\n                              cantExportBecauseOffline\n                            )\n                          )}\n\n                        {showExperimental && (\n                          <Subheader>Experimental</Subheader>\n                        )}\n                        {showExperimental &&\n                          exporters\n                            .filter(exporter => exporter.experimental)\n                            .map((exporter, index) =>\n                              this._renderExporterListItem(\n                                exporter,\n                                index,\n                                cantExportBecauseOffline\n                              )\n                            )}\n                      </List>\n                      <Line justifyContent=\"center\" alignItems=\"center\">\n                        {!showExperimental ? (\n                          <FlatButton\n                            key=\"toggle-experimental\"\n                            icon={<Visibility />}\n                            primary={false}\n                            onClick={() => this._showExperimental(true)}\n                            label={<Trans>Show experimental exports</Trans>}\n                          />\n                        ) : (\n                          <FlatButton\n                            key=\"toggle-experimental\"\n                            icon={<VisibilityOff />}\n                            primary={false}\n                            onClick={() => this._showExperimental(false)}\n                            label={<Trans>Hide experimental exports</Trans>}\n                          />\n                        )}\n                      </Line>\n                    </React.Fragment>\n                  )}\n                  {exporter && exporter.exportPipeline && (\n                    <div style={styles.content}>\n                      <ExportLauncher\n                        exportPipeline={exporter.exportPipeline}\n                        project={project}\n                        onChangeSubscription={onChangeSubscription}\n                        userProfile={userProfile}\n                      />\n                    </div>\n                  )}\n                  <BuildsDialog\n                    open={this.state.buildsDialogOpen}\n                    onClose={() => this._openBuildsDialog(false)}\n                    userProfile={userProfile}\n                  />\n                </Dialog>\n              );\n            }}\n          </OnlineStatus>\n        )}\n      </UserProfileContext.Consumer>\n    );\n  }\n}\n","import { Component } from 'react';\nimport MultiBackend from 'react-dnd-multi-backend';\nimport HTML5toTouch from 'react-dnd-multi-backend/lib/HTML5toTouch';\nimport { DragDropContext } from 'react-dnd';\n\nclass DragAndDropContextProvider extends Component {\n  render() {\n    return this.props.children;\n  }\n}\n\n/**\n * A react-dnd provider that automatically switch to react-dnd-touch-backend\n * when a touch event is recognized (react-dnd-html5-backend won't work on\n * touch devices like phones).\n *\n * When doing the switch from HTML5 backend to Touch backend, the existing events\n * are passed to the new backend. Unsure if this is necessary in GDevelop case.\n */\nexport default DragDropContext(MultiBackend(HTML5toTouch))(\n  DragAndDropContextProvider\n);\n","// @flow\nimport * as React from 'react';\nimport CircularProgress from '@material-ui/core/CircularProgress';\n\nconst styles = {\n  progress: { marginLeft: 8, verticalAlign: 'middle' },\n};\n\nexport default ({\n  children,\n  isLoading,\n}: {\n  children: React.Node,\n  isLoading: ?boolean,\n}) => (\n  <span>\n    {children}\n    {isLoading && <CircularProgress size={20} style={styles.progress} />}\n  </span>\n);\n","// @flow\nimport { Trans } from '@lingui/macro';\n\nimport React, { Component } from 'react';\nimport FlatButton from '../UI/FlatButton';\nimport RaisedButton from '../UI/RaisedButton';\nimport Dialog from '../UI/Dialog';\nimport { Column } from '../UI/Grid';\nimport TextField from '../UI/TextField';\nimport {\n  type LoginForm,\n  type LoginError,\n} from '../Utils/GDevelopServices/Authentification';\nimport LeftLoader from '../UI/LeftLoader';\nimport BackgroundText from '../UI/BackgroundText';\n\ntype Props = {|\n  onClose: () => void,\n  onGoToLogin: () => void,\n  onCreateAccount: (form: LoginForm) => void,\n  createAccountInProgress: boolean,\n  error: ?LoginError,\n|};\n\ntype State = {|\n  form: LoginForm,\n|};\n\nexport const getEmailErrorText = (error: ?LoginError) => {\n  if (!error) return undefined;\n\n  if (error.code === 'auth/invalid-email') return 'This email is invalid';\n  if (error.code === 'auth/user-disabled') return 'The user was disabled';\n  if (error.code === 'auth/user-not-found')\n    return 'This user was not found: have you created your account?';\n  if (error.code === 'auth/email-already-in-use')\n    return 'This email was already used for another account';\n  if (error.code === 'auth/operation-not-allowed')\n    return 'Service seems to be unavailable, please try again later';\n  return undefined;\n};\n\nexport const getPasswordErrorText = (error: ?LoginError) => {\n  if (!error) return undefined;\n\n  if (error.code === 'auth/wrong-password') return 'The password is invalid';\n  if (error.code === 'auth/weak-password')\n    return 'This password is too weak: please use more letters and digits';\n  return undefined;\n};\n\nexport default class CreateAccountDialog extends Component<Props, State> {\n  state = {\n    form: {\n      email: '',\n      password: '',\n    },\n  };\n\n  _onCreateAccount = () => {\n    const { form } = this.state;\n    this.props.onCreateAccount(form);\n  };\n\n  render() {\n    const { onClose, createAccountInProgress, onGoToLogin, error } = this.props;\n\n    return (\n      <Dialog\n        title={<Trans>Create a new GDevelop account</Trans>}\n        actions={[\n          <FlatButton\n            label={<Trans>Back</Trans>}\n            disabled={createAccountInProgress}\n            key=\"close\"\n            primary={false}\n            onClick={onClose}\n          />,\n          <LeftLoader isLoading={createAccountInProgress} key=\"create-account\">\n            <RaisedButton\n              label={<Trans>Create my account</Trans>}\n              primary\n              disabled={createAccountInProgress}\n              onClick={this._onCreateAccount}\n            />\n          </LeftLoader>,\n        ]}\n        secondaryActions={[\n          <FlatButton\n            label={<Trans>Already have an account?</Trans>}\n            primary={false}\n            key=\"already-have-account\"\n            onClick={onGoToLogin}\n          />,\n        ]}\n        onRequestClose={() => {\n          if (!createAccountInProgress) onClose();\n        }}\n        maxWidth=\"sm\"\n        cannotBeDismissed={true}\n        open\n      >\n        <Column noMargin>\n          <BackgroundText>\n            <Trans>\n              By creating an account and using GDevelop, you agree to the Terms\n              and Conditions. Having an account allows to export your game on\n              Android, as a desktop app and unlock other services for your\n              project!\n            </Trans>\n          </BackgroundText>\n          <TextField\n            value={this.state.form.email}\n            floatingLabelText={<Trans>Email</Trans>}\n            errorText={getEmailErrorText(error)}\n            fullWidth\n            onChange={(e, value) => {\n              this.setState({\n                form: {\n                  ...this.state.form,\n                  email: value,\n                },\n              });\n            }}\n          />\n          <TextField\n            value={this.state.form.password}\n            floatingLabelText={<Trans>Password</Trans>}\n            errorText={getPasswordErrorText(error)}\n            type=\"password\"\n            fullWidth\n            onChange={(e, value) => {\n              this.setState({\n                form: {\n                  ...this.state.form,\n                  password: value,\n                },\n              });\n            }}\n          />\n        </Column>\n      </Dialog>\n    );\n  }\n}\n","// @flow\nimport { Trans } from '@lingui/macro';\n\nimport React, { Component } from 'react';\nimport FlatButton from '../UI/FlatButton';\nimport RaisedButton from '../UI/RaisedButton';\nimport Dialog from '../UI/Dialog';\nimport { Column } from '../UI/Grid';\nimport TextField from '../UI/TextField';\nimport {\n  type LoginForm,\n  type LoginError,\n} from '../Utils/GDevelopServices/Authentification';\nimport RightLoader from '../UI/RightLoader';\nimport LeftLoader from '../UI/LeftLoader';\nimport Text from '../UI/Text';\nimport { getEmailErrorText, getPasswordErrorText } from './CreateAccountDialog';\nimport AlertMessage from '../UI/AlertMessage';\n\ntype Props = {|\n  onClose: () => void,\n  onGoToCreateAccount: () => void,\n  onLogin: (form: LoginForm) => void,\n  onForgotPassword: (form: LoginForm) => void,\n  loginInProgress: boolean,\n  error: ?LoginError,\n  resetPasswordDialogOpen: boolean,\n  onCloseResetPasswordDialog: () => void,\n  forgotPasswordInProgress: boolean,\n|};\n\ntype State = {|\n  form: LoginForm,\n|};\n\nexport default class LoginDialog extends Component<Props, State> {\n  state = {\n    form: {\n      email: '',\n      password: '',\n    },\n  };\n\n  _onLogin = () => {\n    const { form } = this.state;\n    this.props.onLogin(form);\n  };\n\n  _onForgotPassword = () => {\n    const { form } = this.state;\n    this.props.onForgotPassword(form);\n  };\n\n  render() {\n    const {\n      onClose,\n      onGoToCreateAccount,\n      loginInProgress,\n      error,\n      resetPasswordDialogOpen,\n      onCloseResetPasswordDialog,\n      forgotPasswordInProgress,\n    } = this.props;\n    const actions = [\n      <FlatButton\n        label={<Trans>Back</Trans>}\n        disabled={loginInProgress || forgotPasswordInProgress}\n        key=\"back\"\n        primary={false}\n        onClick={onClose}\n      />,\n      <LeftLoader isLoading={loginInProgress} key=\"login\">\n        <RaisedButton\n          label={<Trans>Login</Trans>}\n          primary\n          onClick={this._onLogin}\n          disabled={loginInProgress || forgotPasswordInProgress}\n        />\n      </LeftLoader>,\n    ];\n\n    return (\n      <Dialog\n        title={<Trans>Login to your GDevelop account</Trans>}\n        actions={actions}\n        secondaryActions={[\n          <RightLoader\n            isLoading={forgotPasswordInProgress}\n            key=\"forgot-password\"\n          >\n            <FlatButton\n              label={<Trans>I forgot my password</Trans>}\n              primary={false}\n              disabled={loginInProgress || forgotPasswordInProgress}\n              onClick={this._onForgotPassword}\n            />\n          </RightLoader>,\n        ]}\n        onRequestClose={() => {\n          if (!loginInProgress && !forgotPasswordInProgress) onClose();\n        }}\n        maxWidth=\"sm\"\n        cannotBeDismissed={true}\n        open\n      >\n        <Column noMargin>\n          <AlertMessage\n            kind=\"info\"\n            renderRightButton={() => (\n              <FlatButton\n                label={<Trans>Create my account</Trans>}\n                disabled={loginInProgress || forgotPasswordInProgress}\n                primary\n                onClick={onGoToCreateAccount}\n              />\n            )}\n          >\n            <Trans>Don't have an account yet?</Trans>\n          </AlertMessage>\n          <TextField\n            value={this.state.form.email}\n            floatingLabelText={<Trans>Email</Trans>}\n            errorText={getEmailErrorText(error)}\n            fullWidth\n            onChange={(e, value) => {\n              this.setState({\n                form: {\n                  ...this.state.form,\n                  email: value,\n                },\n              });\n            }}\n          />\n          <TextField\n            value={this.state.form.password}\n            floatingLabelText={<Trans>Password</Trans>}\n            errorText={getPasswordErrorText(error)}\n            type=\"password\"\n            fullWidth\n            onChange={(e, value) => {\n              this.setState({\n                form: {\n                  ...this.state.form,\n                  password: value,\n                },\n              });\n            }}\n          />\n        </Column>\n        <Dialog\n          cannotBeDismissed={true}\n          open={resetPasswordDialogOpen}\n          title={<Trans>Reset your password</Trans>}\n          actions={[\n            <FlatButton\n              label={<Trans>Close</Trans>}\n              key=\"close\"\n              onClick={onCloseResetPasswordDialog}\n            />,\n          ]}\n        >\n          <Column noMargin>\n            <Text>\n              <Trans>\n                You should have received an email containing instructions to\n                reset and set a new password. Once it's done, you can use your\n                new password in GDevelop.\n              </Trans>\n            </Text>\n          </Column>\n        </Dialog>\n      </Dialog>\n    );\n  }\n}\n","// @flow\nimport React from 'react';\n\nexport const watchPromiseInState = (\n  component: React.Component<*, *>,\n  stateField: string,\n  fn: () => Promise<any>\n) => {\n  component.setState({\n    [stateField]: true,\n  });\n  return fn()\n    .then(value => {\n      component.setState({\n        [stateField]: false,\n      });\n      return value;\n    })\n    .catch(err => {\n      component.setState({\n        [stateField]: false,\n      });\n      throw err;\n    });\n};\n","// @flow\n\nimport * as React from 'react';\nimport {\n  getUserUsages,\n  getUserSubscription,\n  getUserLimits,\n} from '../Utils/GDevelopServices/Usage';\nimport Authentification, {\n  type Profile,\n  type LoginForm,\n  type LoginError,\n} from '../Utils/GDevelopServices/Authentification';\nimport LoginDialog from './LoginDialog';\nimport { watchPromiseInState } from '../Utils/WatchPromiseInState';\nimport { showWarningBox } from '../UI/Messages/MessageBox';\nimport { sendSignupDone } from '../Utils/Analytics/EventSender';\nimport UserProfileContext, {\n  initialUserProfile,\n  type UserProfile,\n} from './UserProfileContext';\nimport CreateAccountDialog from './CreateAccountDialog';\n\ntype Props = {\n  authentification: Authentification,\n  children: React.Node,\n};\n\ntype State = {|\n  userProfile: UserProfile,\n  loginDialogOpen: boolean,\n  createAccountDialogOpen: boolean,\n  loginInProgress: boolean,\n  createAccountInProgress: boolean,\n  loginError: ?LoginError,\n  resetPasswordDialogOpen: boolean,\n  forgotPasswordInProgress: boolean,\n|};\n\nexport default class UserProfileProvider extends React.Component<Props, State> {\n  state = {\n    userProfile: initialUserProfile,\n    loginDialogOpen: false,\n    createAccountDialogOpen: false,\n    loginInProgress: false,\n    createAccountInProgress: false,\n    loginError: null,\n    resetPasswordDialogOpen: false,\n    forgotPasswordInProgress: false,\n  };\n\n  componentDidMount() {\n    this._resetUserProfile();\n    this.props.authentification.onUserChange(this._fetchUserProfile);\n  }\n\n  _resetUserProfile() {\n    this.setState({\n      userProfile: {\n        ...initialUserProfile,\n        onLogout: this._doLogout,\n        onLogin: () => this.openLoginDialog(true),\n        onCreateAccount: () => this.openCreateAccountDialog(true),\n        onRefreshUserProfile: this._fetchUserProfile,\n        getAuthorizationHeader: () =>\n          this.props.authentification.getAuthorizationHeader(),\n      },\n    });\n  }\n\n  _fetchUserProfile = () => {\n    const { authentification } = this.props;\n\n    authentification.getUserProfile((err, profile: ?Profile) => {\n      if (err && err.unauthenticated) {\n        return this.setState({\n          userProfile: {\n            ...this.state.userProfile,\n            authenticated: false,\n            profile: null,\n            usages: null,\n            limits: null,\n            subscription: null,\n          },\n        });\n      } else if (err || !profile) {\n        console.log('Unable to fetch user profile', err);\n        return;\n      }\n\n      this.setState(\n        {\n          userProfile: {\n            ...this.state.userProfile,\n            authenticated: true,\n            profile,\n          },\n        },\n        () => {\n          if (!profile) return;\n\n          getUserUsages(\n            authentification.getAuthorizationHeader,\n            profile.uid\n          ).then(usages =>\n            this.setState({\n              userProfile: {\n                ...this.state.userProfile,\n                usages,\n              },\n            })\n          );\n          getUserSubscription(\n            authentification.getAuthorizationHeader,\n            profile.uid\n          ).then(subscription =>\n            this.setState({\n              userProfile: {\n                ...this.state.userProfile,\n                subscription,\n              },\n            })\n          );\n          getUserLimits(\n            authentification.getAuthorizationHeader,\n            profile.uid\n          ).then(limits =>\n            this.setState({\n              userProfile: {\n                ...this.state.userProfile,\n                limits,\n              },\n            })\n          );\n        }\n      );\n    });\n  };\n\n  _doLogout = () => {\n    if (this.props.authentification) this.props.authentification.logout();\n    this._resetUserProfile();\n  };\n\n  _doLogin = (form: LoginForm) => {\n    const { authentification } = this.props;\n    if (!authentification) return;\n\n    watchPromiseInState(this, 'loginInProgress', () =>\n      authentification.login(form).then(\n        () => {\n          this._fetchUserProfile();\n          this.openLoginDialog(false);\n        },\n        (loginError: LoginError) => {\n          this.setState({\n            loginError,\n          });\n        }\n      )\n    );\n  };\n\n  _doCreateAccount = (form: LoginForm) => {\n    const { authentification } = this.props;\n    if (!authentification) return;\n\n    watchPromiseInState(this, 'createAccountInProgress', () =>\n      authentification.createAccount(form).then(\n        () => {\n          this._fetchUserProfile();\n          this.openLoginDialog(false);\n          sendSignupDone(form.email);\n        },\n        (loginError: LoginError) => {\n          this.setState({\n            loginError,\n          });\n        }\n      )\n    );\n  };\n\n  _doForgotPassword = (form: LoginForm) => {\n    const { authentification } = this.props;\n    if (!authentification) return;\n\n    watchPromiseInState(this, 'forgotPasswordInProgress', () =>\n      authentification.forgotPassword(form).then(\n        () => {\n          this.openResetPassword(true);\n        },\n        (loginError: LoginError) => {\n          this.setState({\n            loginError,\n          });\n          showWarningBox(\n            \"Unable to send you an email to reset your password. Please double-check that the email address that you've entered is valid.\"\n          );\n        }\n      )\n    );\n  };\n\n  openResetPassword = (open: boolean = true) => {\n    this.setState({\n      resetPasswordDialogOpen: open,\n    });\n  };\n\n  openLoginDialog = (open: boolean = true) => {\n    this.setState({\n      loginDialogOpen: open,\n      createAccountDialogOpen: false,\n    });\n  };\n\n  openCreateAccountDialog = (open: boolean = true) => {\n    this.setState({\n      loginDialogOpen: false,\n      createAccountDialogOpen: open,\n    });\n  };\n\n  render() {\n    return (\n      <React.Fragment>\n        <UserProfileContext.Provider value={this.state.userProfile}>\n          {this.props.children}\n        </UserProfileContext.Provider>\n        {this.state.loginDialogOpen && (\n          <LoginDialog\n            onClose={() => this.openLoginDialog(false)}\n            onGoToCreateAccount={() => this.openCreateAccountDialog(true)}\n            onLogin={this._doLogin}\n            loginInProgress={this.state.loginInProgress}\n            error={this.state.loginError}\n            onForgotPassword={this._doForgotPassword}\n            resetPasswordDialogOpen={this.state.resetPasswordDialogOpen}\n            onCloseResetPasswordDialog={() => this.openResetPassword(false)}\n            forgotPasswordInProgress={this.state.forgotPasswordInProgress}\n          />\n        )}\n        {this.state.createAccountDialogOpen && (\n          <CreateAccountDialog\n            onClose={() => this.openCreateAccountDialog(false)}\n            onGoToLogin={() => this.openLoginDialog(true)}\n            onCreateAccount={this._doCreateAccount}\n            createAccountInProgress={this.state.createAccountInProgress}\n            error={this.state.loginError}\n          />\n        )}\n      </React.Fragment>\n    );\n  }\n}\n","// @flow\n\nimport * as React from 'react';\nimport PreferencesContext, {\n  initialPreferences,\n  type Preferences,\n  type AlertMessageIdentifier,\n} from './PreferencesContext';\nimport optionalRequire from '../../Utils/OptionalRequire';\nimport { getIDEVersion } from '../../Version';\nimport type { PreferencesValues } from './PreferencesContext';\nimport type { ResourceKind } from '../../ResourcesList/ResourceSource.flow';\nconst electron = optionalRequire('electron');\nconst ipcRenderer = electron ? electron.ipcRenderer : null;\n\ntype Props = {|\n  children: React.Node,\n  disableCheckForUpdates: boolean,\n|};\n\ntype State = Preferences;\n\nconst LocalStorageItem = 'gd-preferences';\n\nexport default class PreferencesProvider extends React.Component<Props, State> {\n  state = {\n    values: this._loadValuesFromLocalStorage() || initialPreferences.values,\n    setLanguage: this._setLanguage.bind(this),\n    setThemeName: this._setThemeName.bind(this),\n    setCodeEditorThemeName: this._setCodeEditorThemeName.bind(this),\n    setAutoDownloadUpdates: this._setAutoDownloadUpdates.bind(this),\n    checkUpdates: this._checkUpdates.bind(this),\n    setAutoDisplayChangelog: this._setAutoDisplayChangelog.bind(this),\n    showAlertMessage: this._showAlertMessage.bind(this),\n    verifyIfIsNewVersion: this._verifyIfIsNewVersion.bind(this),\n    setEventsSheetShowObjectThumbnails: this._setEventsSheetShowObjectThumbnails.bind(\n      this\n    ),\n    setAutosaveOnPreview: this._setAutosaveOnPreview.bind(this),\n    setUseNewInstructionEditorDialog: this._setUseNewInstructionEditorDialog.bind(\n      this\n    ),\n    setUseGDJSDevelopmentWatcher: this._setUseGDJSDevelopmentWatcher.bind(this),\n    setEventsSheetUseAssignmentOperators: this._setEventsSheetUseAssignmentOperators.bind(\n      this\n    ),\n    setShowEffectParameterNames: this._setShowEffectParameterNames.bind(this),\n    getLastUsedPath: this._getLastUsedPath.bind(this),\n    setLastUsedPath: this._setLastUsedPath.bind(this),\n  };\n\n  componentDidMount() {\n    setTimeout(() => this._checkUpdates(), 10000);\n  }\n\n  _setLanguage(language: string) {\n    this.setState(\n      state => ({\n        values: {\n          ...state.values,\n          language,\n        },\n      }),\n      () => this._persistValuesToLocalStorage(this.state)\n    );\n  }\n\n  _setEventsSheetShowObjectThumbnails(\n    eventsSheetShowObjectThumbnails: boolean\n  ) {\n    this.setState(\n      state => ({\n        values: {\n          ...state.values,\n          eventsSheetShowObjectThumbnails,\n        },\n      }),\n      () => this._persistValuesToLocalStorage(this.state)\n    );\n  }\n\n  _setAutosaveOnPreview(autosaveOnPreview: boolean) {\n    this.setState(\n      state => ({\n        values: {\n          ...state.values,\n          autosaveOnPreview,\n        },\n      }),\n      () => this._persistValuesToLocalStorage(this.state)\n    );\n  }\n\n  _setUseNewInstructionEditorDialog(useNewInstructionEditorDialog: boolean) {\n    this.setState(\n      state => ({\n        values: {\n          ...state.values,\n          useNewInstructionEditorDialog,\n        },\n      }),\n      () => this._persistValuesToLocalStorage(this.state)\n    );\n  }\n\n  _setUseGDJSDevelopmentWatcher(useGDJSDevelopmentWatcher: boolean) {\n    this.setState(\n      state => ({\n        values: {\n          ...state.values,\n          useGDJSDevelopmentWatcher,\n        },\n      }),\n      () => this._persistValuesToLocalStorage(this.state)\n    );\n  }\n\n  _setEventsSheetUseAssignmentOperators(\n    eventsSheetUseAssignmentOperators: boolean\n  ) {\n    this.setState(\n      state => ({\n        values: {\n          ...state.values,\n          eventsSheetUseAssignmentOperators,\n        },\n      }),\n      () => this._persistValuesToLocalStorage(this.state)\n    );\n  }\n\n  _setShowEffectParameterNames(showEffectParameterNames: boolean) {\n    this.setState(\n      state => ({\n        values: {\n          ...state.values,\n          showEffectParameterNames,\n        },\n      }),\n      () => this._persistValuesToLocalStorage(this.state)\n    );\n  }\n\n  _setThemeName(themeName: string) {\n    this.setState(\n      state => ({\n        values: {\n          ...state.values,\n          themeName,\n        },\n      }),\n      () => this._persistValuesToLocalStorage(this.state)\n    );\n  }\n\n  _setCodeEditorThemeName(codeEditorThemeName: string) {\n    this.setState(\n      state => ({\n        values: {\n          ...state.values,\n          codeEditorThemeName,\n        },\n      }),\n      () => this._persistValuesToLocalStorage(this.state)\n    );\n  }\n\n  _setAutoDownloadUpdates(autoDownloadUpdates: boolean) {\n    this.setState(\n      state => ({\n        values: {\n          ...state.values,\n          autoDownloadUpdates,\n        },\n      }),\n      () => this._persistValuesToLocalStorage(this.state)\n    );\n  }\n\n  _setAutoDisplayChangelog(autoDisplayChangelog: boolean) {\n    this.setState(\n      state => ({\n        values: {\n          ...state.values,\n          autoDisplayChangelog,\n        },\n      }),\n      () => this._persistValuesToLocalStorage(this.state)\n    );\n  }\n\n  _checkUpdates(forceDownload?: boolean) {\n    // Checking for updates is only done on Electron.\n    // Note: This could be abstracted away later if other updates mechanisms\n    // should be supported.\n    const { disableCheckForUpdates } = this.props;\n    if (!ipcRenderer || disableCheckForUpdates) return;\n\n    if (!!forceDownload || this.state.values.autoDownloadUpdates) {\n      ipcRenderer.send('updates-check-and-download');\n    } else {\n      ipcRenderer.send('updates-check');\n    }\n  }\n\n  _verifyIfIsNewVersion() {\n    const currentVersion = getIDEVersion();\n    const { lastLaunchedVersion } = this.state.values;\n    if (lastLaunchedVersion === currentVersion) {\n      // This is not a new version\n      return false;\n    }\n\n    // This is a new version: store the version number\n    this.setState(\n      state => ({\n        values: {\n          ...state.values,\n          lastLaunchedVersion: currentVersion,\n        },\n      }),\n      () => this._persistValuesToLocalStorage(this.state)\n    );\n\n    if (lastLaunchedVersion === undefined) {\n      // This is the first time GDevelop is launched, don't\n      // warn about this version being new.\n      return false;\n    }\n\n    return true;\n  }\n\n  _showAlertMessage(identifier: AlertMessageIdentifier, show: boolean) {\n    this.setState(\n      state => ({\n        values: {\n          ...state.values,\n          hiddenAlertMessages: {\n            ...state.values.hiddenAlertMessages,\n            // $FlowFixMe - Flow won't typecheck this because of https://medium.com/flow-type/spreads-common-errors-fixes-9701012e9d58\n            [identifier]: !show,\n          },\n        },\n      }),\n      () => this._persistValuesToLocalStorage(this.state)\n    );\n  }\n\n  _loadValuesFromLocalStorage(): ?PreferencesValues {\n    try {\n      const persistedState = localStorage.getItem(LocalStorageItem);\n      if (!persistedState) return null;\n\n      const values = JSON.parse(persistedState);\n\n      // \"Migrate\" non existing properties to their default values\n      // (useful when upgrading the preferences to a new version where\n      // a new preference was added).\n      for (const key in initialPreferences.values) {\n        if (\n          initialPreferences.values.hasOwnProperty(key) &&\n          typeof values[key] === 'undefined'\n        ) {\n          values[key] = initialPreferences.values[key];\n        }\n      }\n\n      return values;\n    } catch (e) {\n      return null;\n    }\n  }\n\n  _persistValuesToLocalStorage(preferences: Preferences) {\n    try {\n      localStorage.setItem(\n        LocalStorageItem,\n        JSON.stringify(preferences.values)\n      );\n    } catch (e) {\n      console.warn('Unable to persist preferences', e);\n    }\n\n    return preferences;\n  }\n\n  _getLastUsedPath(project: gdProject, kind: ResourceKind) {\n    const projectPath = project.getProjectFile();\n    const { values } = this.state;\n    const projectPaths = values.projectLastUsedPaths[projectPath];\n    if (projectPaths && projectPaths[kind]) {\n      return projectPaths[kind];\n    }\n    if (!projectPath) return null;\n  }\n\n  _setLastUsedPath(project: gdProject, kind: ResourceKind, latestPath: string) {\n    const projectPath = project.getProjectFile();\n\n    const { values } = this.state;\n    const newProjectLastUsedPaths =\n      values.projectLastUsedPaths[projectPath] || {};\n    newProjectLastUsedPaths[kind] = latestPath;\n\n    this.setState(\n      {\n        values: {\n          ...values,\n          projectLastUsedPaths: {\n            ...values.projectLastUsedPaths,\n            [projectPath]: newProjectLastUsedPaths,\n          },\n        },\n      },\n      () => this._persistValuesToLocalStorage(this.state)\n    );\n  }\n\n  render() {\n    return (\n      <PreferencesContext.Provider value={this.state}>\n        {this.props.children}\n      </PreferencesContext.Provider>\n    );\n  }\n}\n","// @flow\n\nimport * as React from 'react';\nimport EventsFunctionsExtensionsContext, {\n  type EventsFunctionsExtensionsState,\n} from './EventsFunctionsExtensionsContext';\nimport {\n  loadProjectEventsFunctionsExtensions,\n  type EventsFunctionCodeWriter,\n  unloadProjectEventsFunctionsExtensions,\n} from '.';\nimport {\n  type EventsFunctionsExtensionWriter,\n  type EventsFunctionsExtensionOpener,\n} from './Storage';\nimport { showErrorBox } from '../UI/Messages/MessageBox';\nimport { t } from '@lingui/macro';\nimport { type I18n as I18nType } from '@lingui/core';\n\ntype Props = {|\n  children: React.Node,\n  i18n: I18nType,\n  eventsFunctionCodeWriter: ?EventsFunctionCodeWriter,\n  eventsFunctionsExtensionWriter: ?EventsFunctionsExtensionWriter,\n  eventsFunctionsExtensionOpener: ?EventsFunctionsExtensionOpener,\n|};\n\ntype State = EventsFunctionsExtensionsState;\n\n/**\n * Allow children components to request the loading (or unloading) of\n * the events functions extensions of the project.\n * Useful when dealing with events functions extensions (new extension created,\n * removed, pasted, installed, etc...).\n */\nexport default class EventsFunctionsExtensionsProvider extends React.Component<\n  Props,\n  State\n> {\n  state = {\n    eventsFunctionsExtensionsError: null,\n    loadProjectEventsFunctionsExtensions: this._loadProjectEventsFunctionsExtensions.bind(\n      this\n    ),\n    unloadProjectEventsFunctionsExtensions: this._unloadProjectEventsFunctionsExtensions.bind(\n      this\n    ),\n    reloadProjectEventsFunctionsExtensions: this._reloadProjectEventsFunctionsExtensions.bind(\n      this\n    ),\n    getEventsFunctionsExtensionWriter: () =>\n      this.props.eventsFunctionsExtensionWriter,\n    getEventsFunctionsExtensionOpener: () =>\n      this.props.eventsFunctionsExtensionOpener,\n  };\n\n  _loadProjectEventsFunctionsExtensions(project: ?gdProject): Promise<void> {\n    const { i18n, eventsFunctionCodeWriter } = this.props;\n    if (!project || !eventsFunctionCodeWriter) return Promise.resolve();\n\n    return loadProjectEventsFunctionsExtensions(\n      project,\n      eventsFunctionCodeWriter,\n      i18n\n    )\n      .then(() =>\n        this.setState({\n          eventsFunctionsExtensionsError: null,\n        })\n      )\n      .catch((eventsFunctionsExtensionsError: Error) => {\n        this.setState({\n          eventsFunctionsExtensionsError,\n        });\n        showErrorBox(\n          i18n._(\n            t`An error has occured during functions generation. If GDevelop is installed, verify that nothing is preventing GDevelop from writing on disk. If you're running GDevelop online, verify your internet connection and refresh functions from the Project Manager.`\n          ),\n          eventsFunctionsExtensionsError\n        );\n      });\n  }\n\n  _unloadProjectEventsFunctionsExtensions(project: gdProject) {\n    unloadProjectEventsFunctionsExtensions(project);\n  }\n\n  _reloadProjectEventsFunctionsExtensions(project: ?gdProject): Promise<void> {\n    if (project) {\n      this._unloadProjectEventsFunctionsExtensions(project);\n    }\n    return this._loadProjectEventsFunctionsExtensions(project);\n  }\n\n  render() {\n    return (\n      <EventsFunctionsExtensionsContext.Provider value={this.state}>\n        {this.props.children}\n      </EventsFunctionsExtensionsContext.Provider>\n    );\n  }\n}\n","// @flow\nimport * as React from 'react';\nimport DragAndDropContextProvider from '../UI/DragAndDrop/DragAndDropContextProvider';\nimport { ThemeProvider } from '@material-ui/styles';\nimport { getTheme } from '../UI/Theme';\nimport UserProfileProvider from '../Profile/UserProfileProvider';\nimport Authentification from '../Utils/GDevelopServices/Authentification';\nimport PreferencesProvider from './Preferences/PreferencesProvider';\nimport PreferencesContext from './Preferences/PreferencesContext';\nimport GDI18nProvider from '../Utils/i18n/GDI18nProvider';\nimport { I18n } from '@lingui/react';\nimport { type I18n as I18nType } from '@lingui/core';\nimport EventsFunctionsExtensionsProvider from '../EventsFunctionsExtensionsLoader/EventsFunctionsExtensionsProvider';\nimport EventsFunctionsExtensionsContext, {\n  type EventsFunctionsExtensionsState,\n} from '../EventsFunctionsExtensionsLoader/EventsFunctionsExtensionsContext';\nimport { type EventsFunctionCodeWriter } from '../EventsFunctionsExtensionsLoader';\nimport {\n  type EventsFunctionsExtensionWriter,\n  type EventsFunctionsExtensionOpener,\n} from '../EventsFunctionsExtensionsLoader/Storage';\nimport GDevelopThemeContext from '../UI/Theme/ThemeContext';\nimport { UnsavedChangesContextProvider } from './UnsavedChangesContext';\n\ntype Props = {|\n  authentification: Authentification,\n  disableCheckForUpdates: boolean,\n  eventsFunctionCodeWriter: ?EventsFunctionCodeWriter,\n  eventsFunctionsExtensionWriter: ?EventsFunctionsExtensionWriter,\n  eventsFunctionsExtensionOpener: ?EventsFunctionsExtensionOpener,\n  children: ({\n    i18n: I18nType,\n    eventsFunctionsExtensionsState: EventsFunctionsExtensionsState,\n  }) => React.Node,\n|};\n\n/**\n * Wrap the children with Drag and Drop, Material UI theme and i18n React providers,\n * so that these modules can be used in the children.\n */\nexport default class Providers extends React.Component<Props, {||}> {\n  render() {\n    const {\n      disableCheckForUpdates,\n      authentification,\n      children,\n      eventsFunctionCodeWriter,\n      eventsFunctionsExtensionWriter,\n      eventsFunctionsExtensionOpener,\n    } = this.props;\n    return (\n      <DragAndDropContextProvider>\n        <UnsavedChangesContextProvider>\n          <PreferencesProvider disableCheckForUpdates={disableCheckForUpdates}>\n            <PreferencesContext.Consumer>\n              {({ values }) => {\n                const theme = getTheme(values.themeName);\n                return (\n                  <GDI18nProvider language={values.language}>\n                    <GDevelopThemeContext.Provider value={theme.gdevelopTheme}>\n                      <ThemeProvider theme={theme.muiTheme}>\n                        <UserProfileProvider\n                          authentification={authentification}\n                        >\n                          <I18n update>\n                            {({ i18n }) => (\n                              <EventsFunctionsExtensionsProvider\n                                i18n={i18n}\n                                eventsFunctionCodeWriter={\n                                  eventsFunctionCodeWriter\n                                }\n                                eventsFunctionsExtensionWriter={\n                                  eventsFunctionsExtensionWriter\n                                }\n                                eventsFunctionsExtensionOpener={\n                                  eventsFunctionsExtensionOpener\n                                }\n                              >\n                                <EventsFunctionsExtensionsContext.Consumer>\n                                  {eventsFunctionsExtensionsState =>\n                                    children({\n                                      i18n,\n                                      eventsFunctionsExtensionsState,\n                                    })\n                                  }\n                                </EventsFunctionsExtensionsContext.Consumer>\n                              </EventsFunctionsExtensionsProvider>\n                            )}\n                          </I18n>\n                        </UserProfileProvider>\n                      </ThemeProvider>\n                    </GDevelopThemeContext.Provider>\n                  </GDI18nProvider>\n                );\n              }}\n            </PreferencesContext.Consumer>\n          </PreferencesProvider>\n        </UnsavedChangesContextProvider>\n      </DragAndDropContextProvider>\n    );\n  }\n}\n","const themeData = {\n  base: 'vs-dark',\n  inherit: true,\n  rules: [\n    {\n      foreground: '969896',\n      token: 'comment',\n    },\n    {\n      foreground: 'ced1cf',\n      token: 'keyword.operator.class',\n    },\n    {\n      foreground: 'ced1cf',\n      token: 'constant.other',\n    },\n    {\n      foreground: 'ced1cf',\n      token: 'source.php.embedded.line',\n    },\n    {\n      foreground: 'cc6666',\n      token: 'variable',\n    },\n    {\n      foreground: 'cc6666',\n      token: 'support.other.variable',\n    },\n    {\n      foreground: 'cc6666',\n      token: 'string.other.link',\n    },\n    {\n      foreground: 'cc6666',\n      token: 'string.regexp',\n    },\n    {\n      foreground: 'cc6666',\n      token: 'entity.name.tag',\n    },\n    {\n      foreground: 'cc6666',\n      token: 'entity.other.attribute-name',\n    },\n    {\n      foreground: 'cc6666',\n      token: 'meta.tag',\n    },\n    {\n      foreground: 'cc6666',\n      token: 'declaration.tag',\n    },\n    {\n      foreground: 'de935f',\n      token: 'constant.numeric',\n    },\n    {\n      foreground: 'de935f',\n      token: 'constant.language',\n    },\n    {\n      foreground: 'de935f',\n      token: 'support.constant',\n    },\n    {\n      foreground: 'de935f',\n      token: 'constant.character',\n    },\n    {\n      foreground: 'de935f',\n      token: 'variable.parameter',\n    },\n    {\n      foreground: 'de935f',\n      token: 'punctuation.section.embedded',\n    },\n    {\n      foreground: 'de935f',\n      token: 'keyword.other.unit',\n    },\n    {\n      foreground: 'f0c674',\n      token: 'entity.name.class',\n    },\n    {\n      foreground: 'f0c674',\n      token: 'entity.name.type.class',\n    },\n    {\n      foreground: 'f0c674',\n      token: 'support.type',\n    },\n    {\n      foreground: 'f0c674',\n      token: 'support.class',\n    },\n    {\n      foreground: 'b5bd68',\n      token: 'string',\n    },\n    {\n      foreground: 'b5bd68',\n      token: 'constant.other.symbol',\n    },\n    {\n      foreground: 'b5bd68',\n      token: 'entity.other.inherited-class',\n    },\n    {\n      foreground: 'b5bd68',\n      token: 'markup.heading',\n    },\n    {\n      foreground: '8abeb7',\n      token: 'keyword.operator',\n    },\n    {\n      foreground: '8abeb7',\n      token: 'constant.other.color',\n    },\n    {\n      foreground: '81a2be',\n      token: 'entity.name.function',\n    },\n    {\n      foreground: '81a2be',\n      token: 'meta.function-call',\n    },\n    {\n      foreground: '81a2be',\n      token: 'support.function',\n    },\n    {\n      foreground: '81a2be',\n      token: 'keyword.other.special-method',\n    },\n    {\n      foreground: '81a2be',\n      token: 'meta.block-level',\n    },\n    {\n      foreground: 'b294bb',\n      token: 'keyword',\n    },\n    {\n      foreground: 'b294bb',\n      token: 'storage',\n    },\n    {\n      foreground: 'b294bb',\n      token: 'storage.type',\n    },\n    {\n      foreground: 'b294bb',\n      token: 'entity.name.tag.css',\n    },\n    {\n      foreground: 'ced2cf',\n      background: 'df5f5f',\n      token: 'invalid',\n    },\n    {\n      foreground: 'ced2cf',\n      background: '82a3bf',\n      token: 'meta.separator',\n    },\n    {\n      foreground: 'ced2cf',\n      background: 'b798bf',\n      token: 'invalid.deprecated',\n    },\n  ],\n  colors: {\n    'editor.foreground': '#C5C8C6',\n    'editor.background': '#1D1F21',\n    'editor.selectionBackground': '#373B41',\n    'editor.lineHighlightBackground': '#282A2E',\n    'editorCursor.foreground': '#AEAFAD',\n    'editorWhitespace.foreground': '#4B4E55',\n  },\n};\n\nexport default {\n  name: 'Tomorrow-Night',\n  themeName: 'tomorrow-night',\n  themeData,\n};\n","const themeData = {\n  base: 'vs-dark',\n  inherit: true,\n  rules: [\n    {\n      foreground: '75715e',\n      token: 'comment',\n    },\n    {\n      foreground: 'e6db74',\n      token: 'string',\n    },\n    {\n      foreground: 'ae81ff',\n      token: 'constant.numeric',\n    },\n    {\n      foreground: 'ae81ff',\n      token: 'constant.language',\n    },\n    {\n      foreground: 'ae81ff',\n      token: 'constant.character',\n    },\n    {\n      foreground: 'ae81ff',\n      token: 'constant.other',\n    },\n    {\n      foreground: 'f92672',\n      token: 'keyword',\n    },\n    {\n      foreground: 'f92672',\n      token: 'storage',\n    },\n    {\n      foreground: '66d9ef',\n      fontStyle: 'italic',\n      token: 'storage.type',\n    },\n    {\n      foreground: 'a6e22e',\n      fontStyle: 'underline',\n      token: 'entity.name.class',\n    },\n    {\n      foreground: 'a6e22e',\n      fontStyle: 'italic underline',\n      token: 'entity.other.inherited-class',\n    },\n    {\n      foreground: 'a6e22e',\n      token: 'entity.name.function',\n    },\n    {\n      foreground: 'fd971f',\n      fontStyle: 'italic',\n      token: 'variable.parameter',\n    },\n    {\n      foreground: 'f92672',\n      token: 'entity.name.tag',\n    },\n    {\n      foreground: 'a6e22e',\n      token: 'entity.other.attribute-name',\n    },\n    {\n      foreground: '66d9ef',\n      token: 'support.function',\n    },\n    {\n      foreground: '66d9ef',\n      token: 'support.constant',\n    },\n    {\n      foreground: '66d9ef',\n      fontStyle: 'italic',\n      token: 'support.type',\n    },\n    {\n      foreground: '66d9ef',\n      fontStyle: 'italic',\n      token: 'support.class',\n    },\n    {\n      foreground: 'f8f8f0',\n      background: 'f92672',\n      token: 'invalid',\n    },\n    {\n      foreground: 'f8f8f0',\n      background: 'ae81ff',\n      token: 'invalid.deprecated',\n    },\n    {\n      foreground: 'cfcfc2',\n      token: 'meta.structure.dictionary.json string.quoted.double.json',\n    },\n    {\n      foreground: '75715e',\n      token: 'meta.diff',\n    },\n    {\n      foreground: '75715e',\n      token: 'meta.diff.header',\n    },\n    {\n      foreground: 'f92672',\n      token: 'markup.deleted',\n    },\n    {\n      foreground: 'a6e22e',\n      token: 'markup.inserted',\n    },\n    {\n      foreground: 'e6db74',\n      token: 'markup.changed',\n    },\n    {\n      foreground: 'ae81ff',\n      token: 'constant.numeric.line-number.find-in-files - match',\n    },\n    {\n      foreground: 'e6db74',\n      token: 'entity.name.filename.find-in-files',\n    },\n  ],\n  colors: {\n    'editor.foreground': '#F8F8F2',\n    'editor.background': '#272822',\n    'editor.selectionBackground': '#49483E',\n    'editor.lineHighlightBackground': '#3E3D32',\n    'editorCursor.foreground': '#F8F8F0',\n    'editorWhitespace.foreground': '#3B3A32',\n    'editorIndentGuide.activeBackground': '#9D550F',\n    'editor.selectionHighlightBorder': '#222218',\n  },\n};\n\nexport default {\n  name: 'Monokai',\n  themeName: 'monokai',\n  themeData,\n};\n","const themeData = {\n  base: 'vs',\n  inherit: true,\n  rules: [\n    {\n      foreground: '8e908c',\n      token: 'comment',\n    },\n    {\n      foreground: '666969',\n      token: 'keyword.operator.class',\n    },\n    {\n      foreground: '666969',\n      token: 'constant.other',\n    },\n    {\n      foreground: '666969',\n      token: 'source.php.embedded.line',\n    },\n    {\n      foreground: 'c82829',\n      token: 'variable',\n    },\n    {\n      foreground: 'c82829',\n      token: 'support.other.variable',\n    },\n    {\n      foreground: 'c82829',\n      token: 'string.other.link',\n    },\n    {\n      foreground: 'c82829',\n      token: 'string.regexp',\n    },\n    {\n      foreground: 'c82829',\n      token: 'entity.name.tag',\n    },\n    {\n      foreground: 'c82829',\n      token: 'entity.other.attribute-name',\n    },\n    {\n      foreground: 'c82829',\n      token: 'meta.tag',\n    },\n    {\n      foreground: 'c82829',\n      token: 'declaration.tag',\n    },\n    {\n      foreground: 'f5871f',\n      token: 'constant.numeric',\n    },\n    {\n      foreground: 'f5871f',\n      token: 'constant.language',\n    },\n    {\n      foreground: 'f5871f',\n      token: 'support.constant',\n    },\n    {\n      foreground: 'f5871f',\n      token: 'constant.character',\n    },\n    {\n      foreground: 'f5871f',\n      token: 'variable.parameter',\n    },\n    {\n      foreground: 'f5871f',\n      token: 'punctuation.section.embedded',\n    },\n    {\n      foreground: 'f5871f',\n      token: 'keyword.other.unit',\n    },\n    {\n      foreground: 'c99e00',\n      token: 'entity.name.class',\n    },\n    {\n      foreground: 'c99e00',\n      token: 'entity.name.type.class',\n    },\n    {\n      foreground: 'c99e00',\n      token: 'support.type',\n    },\n    {\n      foreground: 'c99e00',\n      token: 'support.class',\n    },\n    {\n      foreground: '718c00',\n      token: 'string',\n    },\n    {\n      foreground: '718c00',\n      token: 'constant.other.symbol',\n    },\n    {\n      foreground: '718c00',\n      token: 'entity.other.inherited-class',\n    },\n    {\n      foreground: '718c00',\n      token: 'markup.heading',\n    },\n    {\n      foreground: '3e999f',\n      token: 'keyword.operator',\n    },\n    {\n      foreground: '3e999f',\n      token: 'constant.other.color',\n    },\n    {\n      foreground: '4271ae',\n      token: 'entity.name.function',\n    },\n    {\n      foreground: '4271ae',\n      token: 'meta.function-call',\n    },\n    {\n      foreground: '4271ae',\n      token: 'support.function',\n    },\n    {\n      foreground: '4271ae',\n      token: 'keyword.other.special-method',\n    },\n    {\n      foreground: '4271ae',\n      token: 'meta.block-level',\n    },\n    {\n      foreground: '8959a8',\n      token: 'keyword',\n    },\n    {\n      foreground: '8959a8',\n      token: 'storage',\n    },\n    {\n      foreground: '8959a8',\n      token: 'storage.type',\n    },\n    {\n      foreground: 'ffffff',\n      background: 'c82829',\n      token: 'invalid',\n    },\n    {\n      foreground: 'ffffff',\n      background: '4271ae',\n      token: 'meta.separator',\n    },\n    {\n      foreground: 'ffffff',\n      background: '8959a8',\n      token: 'invalid.deprecated',\n    },\n  ],\n  colors: {\n    'editor.foreground': '#4D4D4C',\n    'editor.background': '#FFFFFF',\n    'editor.selectionBackground': '#D6D6D6',\n    'editor.lineHighlightBackground': '#EFEFEF',\n    'editorCursor.foreground': '#AEAFAD',\n    'editorWhitespace.foreground': '#D1D1D1',\n  },\n};\n\nexport default {\n  name: 'Tomorrow',\n  themeName: 'tomorrow',\n  themeData,\n};\n","const themeData = {\n  base: 'vs-dark',\n  inherit: true,\n  rules: [\n    {\n      foreground: '657b83',\n      fontStyle: 'italic',\n      token: 'comment',\n    },\n    {\n      foreground: '2aa198',\n      token: 'string',\n    },\n    {\n      foreground: 'd30102',\n      token: 'string.regexp',\n    },\n    {\n      foreground: 'd33682',\n      token: 'constant.numeric',\n    },\n    {\n      foreground: '268bd2',\n      token: 'variable.language',\n    },\n    {\n      foreground: '268bd2',\n      token: 'variable.other',\n    },\n    {\n      foreground: '859900',\n      token: 'keyword',\n    },\n    {\n      foreground: '93a1a1',\n      fontStyle: 'bold',\n      token: 'storage',\n    },\n    {\n      foreground: 'cb4b16',\n      token: 'entity.name.class',\n    },\n    {\n      foreground: 'cb4b16',\n      token: 'entity.name.type.class',\n    },\n    {\n      foreground: '268bd2',\n      token: 'entity.name.function',\n    },\n    {\n      foreground: '859900',\n      token: 'punctuation.definition.variable',\n    },\n    {\n      foreground: 'd30102',\n      token: 'punctuation.section.embedded.begin',\n    },\n    {\n      foreground: 'd30102',\n      token: 'punctuation.section.embedded.end',\n    },\n    {\n      foreground: 'b58900',\n      token: 'constant.language',\n    },\n    {\n      foreground: 'b58900',\n      token: 'meta.preprocessor',\n    },\n    {\n      foreground: 'cb4b16',\n      token: 'support.function.construct',\n    },\n    {\n      foreground: 'cb4b16',\n      token: 'keyword.other.new',\n    },\n    {\n      foreground: 'cb4b16',\n      token: 'constant.character',\n    },\n    {\n      foreground: 'cb4b16',\n      token: 'constant.other',\n    },\n    {\n      foreground: '6c71c4',\n      token: 'entity.other.inherited-class',\n    },\n    {\n      foreground: '268bd2',\n      fontStyle: 'bold',\n      token: 'entity.name.tag',\n    },\n    {\n      foreground: '657b83',\n      token: 'punctuation.definition.tag',\n    },\n    {\n      foreground: '93a1a1',\n      token: 'entity.other.attribute-name',\n    },\n    {\n      foreground: '268bd2',\n      token: 'support.function',\n    },\n    {\n      foreground: 'd30102',\n      token: 'punctuation.separator.continuation',\n    },\n    {\n      foreground: '859900',\n      token: 'support.type',\n    },\n    {\n      foreground: '859900',\n      token: 'support.class',\n    },\n    {\n      foreground: 'cb4b16',\n      token: 'support.type.exception',\n    },\n  ],\n  colors: {\n    'editor.foreground': '#93A1A1',\n    'editor.background': '#002B36',\n    'editor.selectionBackground': '#073642',\n    'editor.lineHighlightBackground': '#073642',\n    'editorCursor.foreground': '#D30102',\n    'editorWhitespace.foreground': '#93A1A1',\n  },\n};\n\nexport default {\n  name: 'Solarized-Dark',\n  themeName: 'solarized-dark',\n  themeData,\n};\n","const themeData = {\n  base: 'vs',\n  inherit: true,\n  rules: [\n    {\n      foreground: '93a1a1',\n      token: 'comment',\n    },\n    {\n      foreground: '2aa198',\n      token: 'string',\n    },\n    {\n      foreground: 'd30102',\n      token: 'string.regexp',\n    },\n    {\n      foreground: 'd33682',\n      token: 'constant.numeric',\n    },\n    {\n      foreground: '268bd2',\n      token: 'variable.language',\n    },\n    {\n      foreground: '268bd2',\n      token: 'variable.other',\n    },\n    {\n      foreground: '859900',\n      token: 'keyword',\n    },\n    {\n      foreground: '073642',\n      fontStyle: 'bold',\n      token: 'storage',\n    },\n    {\n      foreground: '268bd2',\n      token: 'entity.name.class',\n    },\n    {\n      foreground: '268bd2',\n      token: 'entity.name.type.class',\n    },\n    {\n      foreground: '268bd2',\n      token: 'entity.name.function',\n    },\n    {\n      foreground: '859900',\n      token: 'punctuation.definition.variable',\n    },\n    {\n      foreground: 'd30102',\n      token: 'punctuation.section.embedded.begin',\n    },\n    {\n      foreground: 'd30102',\n      token: 'punctuation.section.embedded.end',\n    },\n    {\n      foreground: 'b58900',\n      token: 'constant.language',\n    },\n    {\n      foreground: 'b58900',\n      token: 'meta.preprocessor',\n    },\n    {\n      foreground: 'd30102',\n      token: 'support.function.construct',\n    },\n    {\n      foreground: 'd30102',\n      token: 'keyword.other.new',\n    },\n    {\n      foreground: 'cb4b16',\n      token: 'constant.character',\n    },\n    {\n      foreground: 'cb4b16',\n      token: 'constant.other',\n    },\n    {\n      foreground: '268bd2',\n      fontStyle: 'bold',\n      token: 'entity.name.tag',\n    },\n    {\n      foreground: '93a1a1',\n      token: 'punctuation.definition.tag.begin',\n    },\n    {\n      foreground: '93a1a1',\n      token: 'punctuation.definition.tag.end',\n    },\n    {\n      foreground: '93a1a1',\n      token: 'entity.other.attribute-name',\n    },\n    {\n      foreground: '268bd2',\n      token: 'support.function',\n    },\n    {\n      foreground: 'd30102',\n      token: 'punctuation.separator.continuation',\n    },\n    {\n      foreground: '859900',\n      token: 'support.type',\n    },\n    {\n      foreground: '859900',\n      token: 'support.class',\n    },\n    {\n      foreground: 'cb4b16',\n      token: 'support.type.exception',\n    },\n  ],\n  colors: {\n    'editor.foreground': '#586E75',\n    'editor.background': '#FDF6E3',\n    'editor.selectionBackground': '#073642',\n    'editor.lineHighlightBackground': '#EEE8D5',\n    'editorCursor.foreground': '#000000',\n    'editorWhitespace.foreground': '#93A1A1',\n  },\n};\n\nexport default {\n  name: 'Solarized-Light',\n  themeName: 'solarized-light',\n  themeData,\n};\n","const themeData = {\n  base: 'vs-dark',\n  inherit: true,\n  rules: [\n    {\n      foreground: 'ffffff',\n      background: '0f0f0f',\n      token: 'text',\n    },\n    {\n      background: '000000',\n      token: 'source.ruby.rails.embedded.html',\n    },\n    {\n      foreground: 'ffffff',\n      background: '101010',\n      token: 'text.html.ruby',\n    },\n    {\n      foreground: 'ccff33',\n      background: '000000',\n      token: 'invalid',\n    },\n    {\n      foreground: 'ccff33',\n      background: '000000',\n      token: 'invalid.deprecated',\n    },\n    {\n      foreground: '99cc99',\n      token: 'constant.numeric',\n    },\n    {\n      foreground: 'ffffff',\n      background: '000000',\n      token: 'source',\n    },\n    {\n      foreground: '9933cc',\n      token: 'comment',\n    },\n    {\n      foreground: '339999',\n      token: 'constant',\n    },\n    {\n      foreground: 'ff6600',\n      token: 'keyword',\n    },\n    {\n      foreground: 'edf8f9',\n      token: 'keyword.preprocessor',\n    },\n    {\n      foreground: 'ffffff',\n      token: 'keyword.preprocessor directive',\n    },\n    {\n      foreground: 'ffcc00',\n      token: 'entity.name.function',\n    },\n    {\n      foreground: 'ffcc00',\n      token: 'storage.type.function.js',\n    },\n    {\n      fontStyle: 'italic',\n      token: 'variable.parameter',\n    },\n    {\n      foreground: '772cb7',\n      background: '070707',\n      token: 'source comment.block',\n    },\n    {\n      foreground: 'ffffff',\n      token: 'variable.other',\n    },\n    {\n      foreground: 'ffcc00',\n      token: 'support.function',\n    },\n    {\n      foreground: '66ff00',\n      token: 'string',\n    },\n    {\n      foreground: 'aaaaaa',\n      token: 'string constant.character.escape',\n    },\n    {\n      foreground: '000000',\n      background: 'cccc33',\n      token: 'string.interpolated',\n    },\n    {\n      foreground: '44b4cc',\n      token: 'string.regexp',\n    },\n    {\n      foreground: 'cccc33',\n      token: 'string.literal',\n    },\n    {\n      foreground: '555555',\n      token: 'string.interpolated constant.character.escape',\n    },\n    {\n      fontStyle: 'underline',\n      token: 'entity.name.class',\n    },\n    {\n      fontStyle: 'underline',\n      token: 'support.class.js',\n    },\n    {\n      fontStyle: 'italic underline',\n      token: 'entity.other.inherited-class',\n    },\n    {\n      foreground: 'ff6600',\n      token: 'meta.tag.inline.any.html',\n    },\n    {\n      foreground: 'ff6600',\n      token: 'meta.tag.block.any.html',\n    },\n    {\n      foreground: '99cc99',\n      fontStyle: 'italic',\n      token: 'entity.other.attribute-name',\n    },\n    {\n      foreground: 'dde93d',\n      token: 'keyword.other',\n    },\n    {\n      foreground: 'ff6600',\n      token: 'meta.selector.css',\n    },\n    {\n      foreground: 'ff6600',\n      token: 'entity.other.attribute-name.pseudo-class.css',\n    },\n    {\n      foreground: 'ff6600',\n      token: 'entity.name.tag.wildcard.css',\n    },\n    {\n      foreground: 'ff6600',\n      token: 'entity.other.attribute-name.id.css',\n    },\n    {\n      foreground: 'ff6600',\n      token: 'entity.other.attribute-name.class.css',\n    },\n    {\n      foreground: '999966',\n      token: 'support.type.property-name.css',\n    },\n    {\n      foreground: 'ffffff',\n      token: 'keyword.other.unit.css',\n    },\n    {\n      foreground: 'ffffff',\n      token: 'constant.other.rgb-value.css',\n    },\n    {\n      foreground: 'ffffff',\n      token: 'constant.numeric.css',\n    },\n    {\n      foreground: 'ffffff',\n      token: 'support.function.event-handler.js',\n    },\n    {\n      foreground: 'ffffff',\n      token: 'keyword.operator.js',\n    },\n    {\n      foreground: 'cccc66',\n      token: 'keyword.control.js',\n    },\n    {\n      foreground: 'ffffff',\n      token: 'support.class.prototype.js',\n    },\n    {\n      foreground: 'ff6600',\n      token: 'object.property.function.prototype.js',\n    },\n  ],\n  colors: {\n    'editor.foreground': '#FFFFFF',\n    'editor.background': '#0F0F0F',\n    'editor.selectionBackground': '#6699CC',\n    'editor.lineHighlightBackground': '#333333',\n    'editorCursor.foreground': '#FFFFFF',\n    'editorWhitespace.foreground': '#404040',\n  },\n};\n\nexport default {\n  name: 'Vibrant Ink',\n  themeName: 'vibrant-ink',\n  themeData,\n};\n","const themeData = {\n  base: 'vs',\n  inherit: true,\n  rules: [\n    {\n      foreground: '999988',\n      fontStyle: 'italic',\n      token: 'comment',\n    },\n    {\n      foreground: '999999',\n      fontStyle: 'bold',\n      token: 'comment.block.preprocessor',\n    },\n    {\n      foreground: '999999',\n      fontStyle: 'bold italic',\n      token: 'comment.documentation',\n    },\n    {\n      foreground: '999999',\n      fontStyle: 'bold italic',\n      token: 'comment.block.documentation',\n    },\n    {\n      foreground: 'a61717',\n      background: 'e3d2d2',\n      token: 'invalid.illegal',\n    },\n    {\n      fontStyle: 'bold',\n      token: 'keyword',\n    },\n    {\n      fontStyle: 'bold',\n      token: 'storage',\n    },\n    {\n      fontStyle: 'bold',\n      token: 'keyword.operator',\n    },\n    {\n      fontStyle: 'bold',\n      token: 'constant.language',\n    },\n    {\n      fontStyle: 'bold',\n      token: 'support.constant',\n    },\n    {\n      foreground: '445588',\n      fontStyle: 'bold',\n      token: 'storage.type',\n    },\n    {\n      foreground: '445588',\n      fontStyle: 'bold',\n      token: 'support.type',\n    },\n    {\n      foreground: '008080',\n      token: 'entity.other.attribute-name',\n    },\n    {\n      foreground: '0086b3',\n      token: 'variable.other',\n    },\n    {\n      foreground: '999999',\n      token: 'variable.language',\n    },\n    {\n      foreground: '445588',\n      fontStyle: 'bold',\n      token: 'entity.name.type',\n    },\n    {\n      foreground: '445588',\n      fontStyle: 'bold',\n      token: 'entity.other.inherited-class',\n    },\n    {\n      foreground: '445588',\n      fontStyle: 'bold',\n      token: 'support.class',\n    },\n    {\n      foreground: '008080',\n      token: 'variable.other.constant',\n    },\n    {\n      foreground: '800080',\n      token: 'constant.character.entity',\n    },\n    {\n      foreground: '990000',\n      token: 'entity.name.exception',\n    },\n    {\n      foreground: '990000',\n      token: 'entity.name.function',\n    },\n    {\n      foreground: '990000',\n      token: 'support.function',\n    },\n    {\n      foreground: '990000',\n      token: 'keyword.other.name-of-parameter',\n    },\n    {\n      foreground: '555555',\n      token: 'entity.name.section',\n    },\n    {\n      foreground: '000080',\n      token: 'entity.name.tag',\n    },\n    {\n      foreground: '008080',\n      token: 'variable.parameter',\n    },\n    {\n      foreground: '008080',\n      token: 'support.variable',\n    },\n    {\n      foreground: '009999',\n      token: 'constant.numeric',\n    },\n    {\n      foreground: '009999',\n      token: 'constant.other',\n    },\n    {\n      foreground: 'dd1144',\n      token: 'string - string source',\n    },\n    {\n      foreground: 'dd1144',\n      token: 'constant.character',\n    },\n    {\n      foreground: '009926',\n      token: 'string.regexp',\n    },\n    {\n      foreground: '990073',\n      token: 'constant.other.symbol',\n    },\n    {\n      fontStyle: 'bold',\n      token: 'punctuation',\n    },\n    {\n      foreground: '000000',\n      background: 'ffdddd',\n      token: 'markup.deleted',\n    },\n    {\n      fontStyle: 'italic',\n      token: 'markup.italic',\n    },\n    {\n      foreground: 'aa0000',\n      token: 'markup.error',\n    },\n    {\n      foreground: '999999',\n      token: 'markup.heading.1',\n    },\n    {\n      foreground: '000000',\n      background: 'ddffdd',\n      token: 'markup.inserted',\n    },\n    {\n      foreground: '888888',\n      token: 'markup.output',\n    },\n    {\n      foreground: '888888',\n      token: 'markup.raw',\n    },\n    {\n      foreground: '555555',\n      token: 'markup.prompt',\n    },\n    {\n      fontStyle: 'bold',\n      token: 'markup.bold',\n    },\n    {\n      foreground: 'aaaaaa',\n      token: 'markup.heading',\n    },\n    {\n      foreground: 'aa0000',\n      token: 'markup.traceback',\n    },\n    {\n      fontStyle: 'underline',\n      token: 'markup.underline',\n    },\n    {\n      foreground: '999999',\n      background: 'eaf2f5',\n      token: 'meta.diff.range',\n    },\n    {\n      foreground: '999999',\n      background: 'eaf2f5',\n      token: 'meta.diff.index',\n    },\n    {\n      foreground: '999999',\n      background: 'eaf2f5',\n      token: 'meta.separator',\n    },\n    {\n      foreground: '999999',\n      background: 'ffdddd',\n      token: 'meta.diff.header.from-file',\n    },\n    {\n      foreground: '999999',\n      background: 'ddffdd',\n      token: 'meta.diff.header.to-file',\n    },\n    {\n      foreground: '4183c4',\n      token: 'meta.link',\n    },\n  ],\n  colors: {\n    'editor.foreground': '#000000',\n    'editor.background': '#F8F8FF',\n    'editor.selectionBackground': '#B4D5FE',\n    'editor.lineHighlightBackground': '#FFFEEB',\n    'editorCursor.foreground': '#666666',\n    'editorWhitespace.foreground': '#BBBBBB',\n  },\n};\n\nexport default {\n  name: 'GitHub',\n  themeName: 'github',\n  themeData,\n};\n","// @flow\nimport TomorrowNight from './TomorrowNight';\nimport Monokai from './Monokai';\nimport Tomorrow from './Tomorrow';\nimport SolarizedDark from './SolarizedDark';\nimport SolarizedLight from './SolarizedLight';\nimport VibrantInk from './VibrantInk';\nimport GitHub from './GitHub';\n\ntype CodeEditorTheme = {|\n  name: string,\n  themeName: string,\n  themeData?: any,\n|};\n\n// Want to add a new theme? Grab a theme made for Visual Studio Code (Monaco Editor)\n// (for example on https://bitwiser.in/monaco-themes/). Copy an existing file (like Monokai.js),\n// replace themeData, update the name, and finally add it to this list\n// (+import it at the top of the file):\nconst themes: Array<CodeEditorTheme> = [\n  // Built-in Monaco editor themes\n  {\n    name: 'Visual Studio',\n    themeName: 'vs',\n  },\n  {\n    name: 'Visual Studio Dark',\n    themeName: 'vs-dark',\n  },\n  // Third parties themes\n  GitHub,\n  Monokai,\n  SolarizedDark,\n  SolarizedLight,\n  Tomorrow,\n  TomorrowNight,\n  VibrantInk,\n];\n\nexport const getAllThemes = () => themes;\n","// @flow\nimport * as React from 'react';\nimport ThemeConsumer from './Theme/ThemeConsumer';\nimport BackgroundText from './BackgroundText';\n// No i18n in this file\n\nconst styles = {\n  containerStyle: {\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n    flex: 1,\n    padding: 10,\n  },\n};\n\ntype Props = {|\n  style?: Object,\n  messageStyle?: Object,\n  children: ?React.Node,\n|};\n\nconst EmptyMessage = (props: Props) => (\n  <ThemeConsumer>\n    {muiTheme => (\n      <div style={{ ...styles.containerStyle, ...props.style }}>\n        <BackgroundText style={props.messageStyle}>\n          {props.children}\n        </BackgroundText>\n      </div>\n    )}\n  </ThemeConsumer>\n);\n\nexport default EmptyMessage;\n","// @flow\nimport * as React from 'react';\n\nconst styles = {\n  previewContainer: {\n    display: 'flex',\n    width: '100%',\n    alignItems: 'center',\n    justifyContent: 'center',\n    height: 200,\n    border: '#AAAAAA 1px solid',\n    background: 'url(\"res/transparentback.png\") repeat',\n  },\n  icon: { width: 60, height: 60 },\n};\n\ntype Props = {|\n  renderIcon: ({| style: Object |}) => React.Node,\n|};\n\n/**\n * Display a generic container to display an icon.\n */\nexport default ({ renderIcon }: Props) => (\n  <div style={styles.previewContainer}>\n    {renderIcon({ style: styles.icon })}\n  </div>\n);\n","// @flow\nimport * as React from 'react';\nimport ResourcesLoader from '../../ResourcesLoader';\nimport { type ResourceKind } from '../ResourceSource.flow';\nimport ImagePreview from './ImagePreview';\nimport GenericIconPreview from './GenericIconPreview';\nimport Audiotrack from '@material-ui/icons/Audiotrack';\nimport InsertDriveFile from '@material-ui/icons/InsertDriveFile';\nimport VideoLibrary from '@material-ui/icons/VideoLibrary';\nimport FontDownload from '@material-ui/icons/FontDownload';\n\ntype Props = {|\n  project: gdProject,\n  resourceName: string,\n  resourcePath?: string,\n  resourcesLoader: typeof ResourcesLoader,\n  style?: Object,\n  onSize?: (number, number) => void,\n|};\n\ntype State = {|\n  resourceKind: ?ResourceKind,\n|};\n\n/**\n * Display the right preview for any given resource of a project\n */\nexport default class ResourcePreview extends React.PureComponent<Props, State> {\n  state = this._loadFrom(this.props);\n\n  componentWillReceiveProps(newProps: Props) {\n    if (\n      newProps.resourceName !== this.props.resourceName ||\n      newProps.project !== this.props.project ||\n      newProps.resourcePath !== this.props.resourcePath\n    ) {\n      this.setState(this._loadFrom(newProps));\n    }\n  }\n\n  _loadFrom(props: Props): State {\n    const { project, resourceName } = props;\n    const resourcesManager = project.getResourcesManager();\n    const resourceKind = resourcesManager.hasResource(resourceName)\n      ? resourcesManager.getResource(resourceName).getKind()\n      : null;\n\n    return {\n      resourceKind,\n    };\n  }\n\n  render() {\n    const { resourceKind } = this.state;\n\n    switch (resourceKind) {\n      case 'image':\n        return (\n          <ImagePreview\n            project={this.props.project}\n            resourceName={this.props.resourceName}\n            resourcesLoader={this.props.resourcesLoader}\n            style={this.props.style}\n            onSize={this.props.onSize}\n            resourcePath={this.props.resourcePath}\n          />\n        );\n      case 'audio':\n        return (\n          <GenericIconPreview renderIcon={props => <Audiotrack {...props} />} />\n        );\n      case 'json':\n        return (\n          <GenericIconPreview\n            renderIcon={props => <InsertDriveFile {...props} />}\n          />\n        );\n      case 'video':\n        return (\n          <GenericIconPreview\n            renderIcon={props => <VideoLibrary {...props} />}\n          />\n        );\n      case 'font':\n        return (\n          <GenericIconPreview\n            renderIcon={props => <FontDownload {...props} />}\n          />\n        );\n      default:\n        return null;\n    }\n  }\n}\n","// @flow\nimport { Trans } from '@lingui/macro';\n\nimport * as React from 'react';\nimport Background from '../../UI/Background';\nimport EmptyMessage from '../../UI/EmptyMessage';\nimport PropertiesEditor from '../../PropertiesEditor';\nimport ResourcePreview from '../../ResourcesList/ResourcePreview';\nimport ResourcesLoader from '../../ResourcesLoader';\nimport propertiesMapToSchema from '../../PropertiesEditor/PropertiesMapToSchema';\nimport { type Schema } from '../../PropertiesEditor';\n\nimport {\n  type ResourceSource,\n  type ChooseResourceFunction,\n} from '../../ResourcesList/ResourceSource.flow';\n\nconst styles = {\n  imagePreview: { flex: 1 },\n  propertiesContainer: {\n    padding: 10,\n    overflowY: 'scroll',\n    overflowX: 'hidden',\n    flex: 2,\n  },\n};\n\ntype Props = {|\n  project: gdProject,\n  resourcesLoader: typeof ResourcesLoader,\n  resources: Array<gdResource>,\n  onResourcePathUpdated: () => void,\n  resourceSources: Array<ResourceSource>,\n  onChooseResource: ChooseResourceFunction,\n|};\n\nexport default class ResourcePropertiesEditor extends React.Component<\n  Props,\n  {}\n> {\n  schema: Schema = [\n    {\n      name: 'Resource name',\n      valueType: 'string',\n      disabled: true,\n      getValue: (resource: gdResource) => resource.getName(),\n      setValue: (resource: gdResource, newValue: string) =>\n        resource.setName(newValue),\n    },\n    {\n      name: 'File',\n      valueType: 'string',\n      getValue: (resource: gdResource) => resource.getFile(),\n      setValue: (resource: gdResource, newValue: string) =>\n        resource.setFile(newValue),\n      onEditButtonClick: () => this._chooseResourcePath(),\n    },\n  ];\n\n  _renderEmpty() {\n    return (\n      <EmptyMessage>\n        <Trans>\n          Resources are automatically added to your project whenever you add an\n          image, a font or a video to an object or when you choose an audio file\n          in events. Choose a resource to display its properties.\n        </Trans>\n      </EmptyMessage>\n    );\n  }\n\n  _chooseResourcePath = () => {\n    const {\n      resources,\n      onResourcePathUpdated,\n      onChooseResource,\n      resourceSources,\n    } = this.props;\n    const resource = resources[0];\n    const sources = resourceSources.filter(\n      source => source.kind === resource.getKind()\n    );\n    if (!sources.length) return;\n    onChooseResource(sources[0].name).then(resources => {\n      if (!resources.length) return; // No path was chosen by the user.\n      resource.setFile(resources[0].getFile());\n\n      // Important, we are responsible for deleting the resources that were given to us.\n      // Otherwise we have a memory leak.\n      resources.forEach(resource => resource.delete());\n\n      onResourcePathUpdated();\n      this.forceUpdate();\n    });\n  };\n\n  _renderResourcesProperties() {\n    const { resources, project } = this.props;\n    //TODO: Multiple resources support\n    const properties = resources[0].getProperties(project);\n    const resourceSchema = propertiesMapToSchema(\n      properties,\n      resource => resource.getProperties(project),\n      (resource, name, value) => resource.updateProperty(name, value, project)\n    );\n\n    return (\n      <div\n        style={styles.propertiesContainer}\n        key={resources.map(resource => '' + resource.ptr).join(';')}\n      >\n        <PropertiesEditor\n          schema={this.schema.concat(resourceSchema)}\n          instances={resources}\n        />\n      </div>\n    );\n  }\n\n  _renderPreview() {\n    const { resources, project, resourcesLoader } = this.props;\n    if (!resources || !resources.length) return;\n\n    return (\n      <ResourcePreview\n        style={styles.imagePreview}\n        resourceName={resources[0].getName()}\n        resourcePath={resources[0].getFile()}\n        resourcesLoader={resourcesLoader}\n        project={project}\n      />\n    );\n  }\n\n  render() {\n    const { resources } = this.props;\n\n    return (\n      <Background maxWidth>\n        {this._renderPreview()}\n        {!resources || !resources.length\n          ? this._renderEmpty()\n          : this._renderResourcesProperties()}\n      </Background>\n    );\n  }\n}\n","// @flow\nimport { t } from '@lingui/macro';\nimport React, { PureComponent } from 'react';\nimport { ToolbarGroup } from '../UI/Toolbar';\nimport ToolbarIcon from '../UI/ToolbarIcon';\nimport ToolbarSeparator from '../UI/ToolbarSeparator';\n\ntype Props = {|\n  onOpenProjectFolder: () => void,\n  onDeleteSelection: () => void,\n  canDelete: boolean,\n  onOpenProperties: () => void,\n|};\n\ntype State = {||};\n\nexport class Toolbar extends PureComponent<Props, State> {\n  render() {\n    const { canDelete } = this.props;\n\n    return (\n      <ToolbarGroup lastChild>\n        <ToolbarIcon\n          onClick={this.props.onOpenProjectFolder}\n          src=\"res/ribbon_default/open32.png\"\n          tooltip={t`Open the project folder`}\n        />\n        <ToolbarSeparator />\n        <ToolbarIcon\n          onClick={this.props.onOpenProperties}\n          src=\"res/ribbon_default/editprop32.png\"\n          tooltip={t`Open the properties panel`}\n        />\n        <ToolbarSeparator />\n        <ToolbarIcon\n          onClick={this.props.onDeleteSelection}\n          src=\"res/ribbon_default/deleteselected32.png\"\n          disabled={!canDelete}\n          tooltip={t`Delete the selected resource`}\n        />\n      </ToolbarGroup>\n    );\n  }\n}\n\nexport default Toolbar;\n","// @flow\nimport { Trans } from '@lingui/macro';\nimport { t } from '@lingui/macro';\n\nimport * as React from 'react';\nimport ResourcesList from '../ResourcesList';\nimport ResourcePropertiesEditor from './ResourcePropertiesEditor';\nimport Toolbar from './Toolbar';\nimport EditorMosaic from '../UI/EditorMosaic';\nimport InfoBar from '../UI/Messages/InfoBar';\nimport ResourcesLoader from '../ResourcesLoader';\nimport optionalRequire from '../Utils/OptionalRequire';\nimport Window from '../Utils/Window';\n\nimport {\n  type ResourceSource,\n  type ChooseResourceFunction,\n} from '../ResourcesList/ResourceSource.flow';\n\nconst electron = optionalRequire('electron');\nconst shell = electron ? electron.shell : null;\nconst path = optionalRequire('path');\nconst styles = {\n  container: {\n    display: 'flex',\n    flex: 1,\n    position: 'relative',\n    overflow: 'hidden',\n  },\n};\n\ntype State = {\n  showPropertiesInfoBar: boolean,\n  selectedResource: ?gdResource,\n};\n\ntype Props = {\n  setToolbar: React.Node => void,\n  project: gdProject,\n  onDeleteResource: (resource: gdResource, cb: (boolean) => void) => void,\n  onRenameResource: (\n    resource: gdResource,\n    newName: string,\n    cb: (boolean) => void\n  ) => void,\n  resourceSources: Array<ResourceSource>,\n  onChooseResource: ChooseResourceFunction,\n};\n\nexport default class ResourcesEditor extends React.Component<Props, State> {\n  static defaultProps = {\n    setToolbar: () => {},\n  };\n\n  editorMosaic: ?EditorMosaic = null;\n  _propertiesEditor: ?ResourcePropertiesEditor = null;\n  _resourcesList: ?ResourcesList = null;\n  resourcesLoader = ResourcesLoader;\n  state = {\n    showPropertiesInfoBar: false,\n    selectedResource: null,\n  };\n\n  updateToolbar() {\n    this.props.setToolbar(\n      <Toolbar\n        onOpenProjectFolder={this.openProjectFolder}\n        onOpenProperties={this.openProperties}\n        canDelete={!!this.state.selectedResource}\n        onDeleteSelection={() =>\n          this.deleteResource(this.state.selectedResource)\n        }\n      />\n    );\n  }\n\n  deleteResource = (resource: ?gdResource) => {\n    const { project, onDeleteResource } = this.props;\n    if (!resource) return;\n\n    const answer = Window.showConfirmDialog(\n      \"Are you sure you want to remove this resource? This can't be undone.\"\n    );\n    if (!answer) return;\n\n    onDeleteResource(resource, doRemove => {\n      if (!doRemove || !resource) return;\n\n      project.getResourcesManager().removeResource(resource.getName());\n      this.setState(\n        {\n          selectedResource: null,\n        },\n        () => {\n          if (this._resourcesList) this._resourcesList.forceUpdateList();\n          this.updateToolbar();\n        }\n      );\n    });\n  };\n\n  openProjectFolder = () => {\n    const project = this.props.project;\n    if (shell) shell.openItem(path.dirname(project.getProjectFile()));\n  };\n\n  openProperties = () => {\n    if (!this.editorMosaic) return;\n    if (!this.editorMosaic.openEditor('properties', 'start', 66, 'column')) {\n      this.setState({\n        showPropertiesInfoBar: true,\n      });\n    }\n  };\n\n  _onResourceSelected = (selectedResource: ?gdResource) => {\n    this.setState(\n      {\n        selectedResource,\n      },\n      () => {\n        if (this._propertiesEditor) this._propertiesEditor.forceUpdate();\n        this.updateToolbar();\n      }\n    );\n  };\n\n  render() {\n    const {\n      project,\n      onRenameResource,\n      onChooseResource,\n      resourceSources,\n    } = this.props;\n    const { selectedResource } = this.state;\n\n    const editors = {\n      properties: {\n        type: 'secondary',\n        title: t`Properties`,\n        renderEditor: () => (\n          <ResourcePropertiesEditor\n            key={selectedResource ? selectedResource.ptr : undefined}\n            resources={selectedResource ? [selectedResource] : []}\n            project={project}\n            resourcesLoader={this.resourcesLoader}\n            ref={propertiesEditor =>\n              (this._propertiesEditor = propertiesEditor)\n            }\n            onResourcePathUpdated={() => {\n              if (this._resourcesList) {\n                this._resourcesList.checkMissingPaths();\n              }\n            }}\n            onChooseResource={onChooseResource}\n            resourceSources={resourceSources}\n          />\n        ),\n      },\n      'resources-list': {\n        type: 'primary',\n        noTitleBar: true,\n        renderEditor: () => (\n          <ResourcesList\n            project={project}\n            onDeleteResource={this.deleteResource}\n            onRenameResource={onRenameResource}\n            onSelectResource={this._onResourceSelected}\n            selectedResource={selectedResource}\n            ref={resourcesList => (this._resourcesList = resourcesList)}\n          />\n        ),\n      },\n    };\n\n    return (\n      <div style={styles.container}>\n        <EditorMosaic\n          editors={editors}\n          ref={editorMosaic => (this.editorMosaic = editorMosaic)}\n          initialNodes={{\n            direction: 'row',\n            first: 'properties',\n            second: 'resources-list',\n            splitPercentage: 66,\n          }}\n        />\n        <InfoBar\n          message={\n            <Trans>\n              Properties panel is already opened. After selecting a resource,\n              inspect and change its properties from this panel.\n            </Trans>\n          }\n          show={!!this.state.showPropertiesInfoBar}\n          identifier=\"resource-properties-panel-explanation\"\n        />\n      </div>\n    );\n  }\n}\n","import React from 'react';\nimport BaseEditor from './BaseEditor';\nimport ResourcesFullEditor from '../../ResourcesEditor';\n\nexport default class ResourcesEditor extends BaseEditor {\n  updateToolbar() {\n    if (this.editor) this.editor.updateToolbar();\n  }\n\n  forceUpdateEditor() {\n    // No updates to be done.\n  }\n\n  render() {\n    const { project } = this.props;\n\n    return (\n      <ResourcesFullEditor\n        {...this.props}\n        ref={editor => (this.editor = editor)}\n        project={project}\n      />\n    );\n  }\n}\n","// @flow\nimport axios from 'axios';\nimport { GDevelopExtensionApi } from './ApiConfigs';\nimport semverSatisfies from 'semver/functions/satisfies';\n\nexport type ExtensionShortHeader = {|\n  shortDescription: string,\n  extensionNamespace: string,\n  fullName: string,\n  name: string,\n  version: string,\n  gdevelopVersion?: string,\n  url: string,\n  headerUrl: string,\n  tags: string,\n  eventsBasedBehaviorsCount: number,\n  eventsFunctionsCount: number,\n|};\nexport type ExtensionHeader = {|\n  ...ExtensionShortHeader,\n  description: string,\n|};\n\nexport type SerializedExtension = {\n  ...ExtensionHeader,\n};\n\nexport type ExtensionsRegistry = {\n  version: string,\n  allTags: Array<string>,\n  extensionShortHeaders: Array<ExtensionShortHeader>,\n};\n\n/** Check if the IDE version, passed as argument, satisfiy the version required by the extension. */\nexport const isCompatibleWithExtension = (\n  ideVersion: string,\n  extensionShortHeader: ExtensionShortHeader\n) =>\n  extensionShortHeader.gdevelopVersion\n    ? semverSatisfies(ideVersion, extensionShortHeader.gdevelopVersion, {\n        includePrerelease: true,\n      })\n    : true;\n\n// Handle urls to extension header or file. If the URL is not absolute and HTTPS,\n// it is assumed to be relative to the registry base url.\nconst resolveExtensionUrl = (url: string): string => {\n  const trimmedUrl = url.trim();\n  if (trimmedUrl.indexOf('https://') === 0) {\n    return trimmedUrl;\n  }\n\n  return `${GDevelopExtensionApi.baseUrl}/${trimmedUrl}`;\n};\n\nexport const getExtensionsRegistry = (): Promise<ExtensionsRegistry> => {\n  return axios\n    .get(`${GDevelopExtensionApi.baseUrl}/extensions-registry.json`)\n    .then(response => response.data);\n};\n\nexport const getExtensionHeader = (\n  extensionShortHeader: ExtensionShortHeader\n): Promise<ExtensionHeader> => {\n  return axios\n    .get(resolveExtensionUrl(extensionShortHeader.headerUrl))\n    .then(response => response.data);\n};\n\nexport const getExtension = (\n  extensionHeader: ExtensionShortHeader | ExtensionHeader\n): Promise<SerializedExtension> => {\n  return axios\n    .get(resolveExtensionUrl(extensionHeader.url))\n    .then(response => response.data);\n};\n","// @flow\nimport { Trans } from '@lingui/macro';\nimport * as React from 'react';\nimport { Column, Line } from './Grid';\nimport RaisedButton from './RaisedButton';\nimport EmptyMessage from './EmptyMessage';\n\ntype Props = {|\n  children: React.Node,\n  onRetry?: () => void,\n|};\n\nexport default ({ onRetry, children }: Props) => (\n  <Column expand alignItems=\"center\">\n    <EmptyMessage>{children}</EmptyMessage>\n    <Line>\n      {onRetry && (\n        <RaisedButton\n          primary\n          label={<Trans>Retry</Trans>}\n          onClick={() => onRetry()}\n        />\n      )}\n    </Line>\n  </Column>\n);\n","// @flow\nimport { Trans } from '@lingui/macro';\nimport React, { Component } from 'react';\nimport Dialog from '../UI/Dialog';\nimport FlatButton from '../UI/FlatButton';\nimport {\n  type ExtensionShortHeader,\n  type ExtensionHeader,\n  getExtensionHeader,\n  isCompatibleWithExtension,\n} from '../Utils/GDevelopServices/Extension';\nimport LeftLoader from '../UI/LeftLoader';\nimport PlaceholderLoader from '../UI/PlaceholderLoader';\nimport PlaceholderError from '../UI/PlaceholderError';\nimport { MarkdownText } from '../UI/MarkdownText';\nimport Text from '../UI/Text';\nimport AlertMessage from '../UI/AlertMessage';\nimport { getIDEVersion } from '../Version';\n\ntype Props = {|\n  extensionShortHeader: ExtensionShortHeader,\n  isInstalling: boolean,\n  onClose: () => void,\n  onInstall: () => void,\n  alreadyInstalled: boolean,\n|};\ntype State = {|\n  extensionHeader: ?ExtensionHeader,\n  error: ?Error,\n|};\n\nexport default class ExtensionInstallDialog extends Component<Props, State> {\n  state = {\n    extensionHeader: null,\n    error: null,\n  };\n\n  componentDidMount() {\n    this._loadExtensionheader();\n  }\n\n  _loadExtensionheader = () => {\n    this.setState({\n      error: null,\n    });\n    getExtensionHeader(this.props.extensionShortHeader).then(\n      extensionHeader => {\n        this.setState({\n          extensionHeader,\n        });\n      },\n      error => {\n        this.setState({\n          error,\n        });\n      }\n    );\n  };\n\n  render() {\n    const {\n      isInstalling,\n      extensionShortHeader,\n      onClose,\n      onInstall,\n      alreadyInstalled,\n    } = this.props;\n    const { extensionHeader, error } = this.state;\n\n    const isCompatible = isCompatibleWithExtension(\n      getIDEVersion(),\n      extensionShortHeader\n    );\n\n    return (\n      <Dialog\n        title={\n          extensionHeader\n            ? extensionHeader.fullName\n            : extensionShortHeader.fullName\n        }\n        actions={[\n          <FlatButton\n            key=\"close\"\n            label={<Trans>Back</Trans>}\n            primary={false}\n            onClick={onClose}\n            disabled={isInstalling}\n          />,\n          <LeftLoader isLoading={isInstalling}>\n            <FlatButton\n              key=\"install\"\n              label={\n                !isCompatible ? (\n                  <Trans>Not compatible</Trans>\n                ) : alreadyInstalled ? (\n                  <Trans>Re-install/update</Trans>\n                ) : (\n                  <Trans>Install in project</Trans>\n                )\n              }\n              primary\n              onClick={onInstall}\n              disabled={isInstalling || !isCompatible}\n            />\n          </LeftLoader>,\n        ]}\n        cannotBeDismissed={false}\n        open\n        onRequestClose={onClose}\n      >\n        {!isCompatible && (\n          <AlertMessage kind=\"error\">\n            <Trans>\n              Unfortunately, this extension requires a newer version of GDevelop\n              to work. Upgrade GDevelop to be able to use this extension in your\n              project.\n            </Trans>\n          </AlertMessage>\n        )}\n        {!extensionHeader ? (\n          <Text>{extensionShortHeader.shortDescription}</Text>\n        ) : (\n          <MarkdownText source={extensionHeader.description} isStandaloneText />\n        )}\n        {!extensionHeader && !error && <PlaceholderLoader />}\n        {!extensionHeader && error && (\n          <PlaceholderError onRetry={this._loadExtensionheader}>\n            <Trans>\n              Can't load the extension registry. Verify your internet connection\n              or try again later.\n            </Trans>\n          </PlaceholderError>\n        )}\n      </Dialog>\n    );\n  }\n}\n","// @flow\nimport { t } from '@lingui/macro';\nimport { Trans } from '@lingui/macro';\nimport { I18n } from '@lingui/react';\nimport { type I18n as I18nType } from '@lingui/core';\n\nimport React, { Component } from 'react';\nimport {\n  getExtensionsRegistry,\n  type ExtensionsRegistry,\n  type ExtensionShortHeader,\n  type SerializedExtension,\n  getExtension,\n} from '../Utils/GDevelopServices/Extension';\nimport { List, ListItem } from '../UI/List';\nimport PlaceholderLoader from '../UI/PlaceholderLoader';\nimport ExtensionInstallDialog from './ExtensionInstallDialog';\nimport { unserializeFromJSObject } from '../Utils/Serializer';\nimport { showErrorBox } from '../UI/Messages/MessageBox';\nimport EventsFunctionsExtensionsContext, {\n  type EventsFunctionsExtensionsState,\n} from '../EventsFunctionsExtensionsLoader/EventsFunctionsExtensionsContext';\nimport PlaceholderError from '../UI/PlaceholderError';\nimport EmptyMessage from '../UI/EmptyMessage';\nimport SearchbarWithChips from '../UI/SearchbarWithChips';\n\n/**\n * Add a serialized (JS object) events function extension to the project,\n * triggering reload of extensions.\n */\nexport const addSerializedExtensionToProject = (\n  eventsFunctionsExtensionsState: EventsFunctionsExtensionsState,\n  project: gdProject,\n  serializedExtension: SerializedExtension\n): Promise<void> => {\n  const { name } = serializedExtension;\n  if (!name)\n    return Promise.reject(new Error('Malformed extension (missing name).'));\n\n  const newEventsFunctionsExtension = project.hasEventsFunctionsExtensionNamed(\n    name\n  )\n    ? project.getEventsFunctionsExtension(name)\n    : project.insertNewEventsFunctionsExtension(name, 0);\n\n  unserializeFromJSObject(\n    newEventsFunctionsExtension,\n    serializedExtension,\n    'unserializeFrom',\n    project\n  );\n\n  return eventsFunctionsExtensionsState.loadProjectEventsFunctionsExtensions(\n    project\n  );\n};\n\ntype Props = {|\n  project: gdProject,\n  showOnlyWithBehaviors: boolean,\n  onNewExtensionInstalled: () => void,\n  onRegistryLoaded?: () => void,\n|};\n\ntype State = {|\n  isInstalling: boolean,\n  selectedExtensionShortHeader: ?ExtensionShortHeader,\n  searchText: string,\n  chosenTag: string,\n  extensionsRegistry: ?ExtensionsRegistry,\n  error: ?Error,\n|};\n\ntype FilteringOptions = {|\n  searchText: string,\n  chosenTag: string,\n  showOnlyWithBehaviors: boolean,\n|};\n\nconst filterExtensionShortHeaders = (\n  extensionShortHeaders: Array<ExtensionShortHeader>,\n  { searchText, chosenTag, showOnlyWithBehaviors }: FilteringOptions\n): Array<ExtensionShortHeader> => {\n  const behaviorsFilteredHeaders = extensionShortHeaders.filter(\n    ({ eventsBasedBehaviorsCount }) =>\n      !showOnlyWithBehaviors || eventsBasedBehaviorsCount > 0\n  );\n\n  if (!searchText && !chosenTag) return behaviorsFilteredHeaders;\n\n  const lowercaseSearchText = searchText.toLowerCase();\n  return behaviorsFilteredHeaders\n    .filter(({ tags }) => !chosenTag || tags.indexOf(chosenTag) !== -1)\n    .filter(\n      ({ name, shortDescription }) =>\n        !searchText ||\n        (name.toLowerCase().indexOf(lowercaseSearchText) !== -1 ||\n          shortDescription.toLowerCase().indexOf(lowercaseSearchText) !== -1)\n    );\n};\n\nconst MAX_DISPLAYED_RESULTS = 20;\n\n/**\n * Display a list of extensions that the user can search in.\n * Can be used as is, or in a dialog (see ExtensionsSearchDialog).\n */\nexport default class ExtensionsSearch extends Component<Props, State> {\n  state = {\n    isInstalling: false,\n    extensionsRegistry: null,\n    selectedExtensionShortHeader: null,\n    searchText: '',\n    error: null,\n    chosenTag: '',\n  };\n\n  componentDidMount() {\n    this._loadExtensionsRegistry();\n  }\n\n  _loadExtensionsRegistry = () => {\n    this.setState({\n      error: null,\n    });\n    getExtensionsRegistry().then(\n      extensionsRegistry => {\n        this.setState(\n          {\n            extensionsRegistry,\n          },\n          () => {\n            if (this.props.onRegistryLoaded) {\n              this.props.onRegistryLoaded();\n            }\n          }\n        );\n      },\n      error => {\n        this.setState({\n          error,\n        });\n      }\n    );\n  };\n\n  _install = (\n    i18n: I18nType,\n    eventsFunctionsExtensionsState: EventsFunctionsExtensionsState,\n    extensionShortHeader: ExtensionShortHeader\n  ) => {\n    const { project } = this.props;\n\n    this.setState({\n      isInstalling: true,\n    });\n    getExtension(extensionShortHeader)\n      .then(\n        serializedExtension => {\n          return addSerializedExtensionToProject(\n            eventsFunctionsExtensionsState,\n            project,\n            serializedExtension\n          ).then(() => {\n            this.setState(\n              {\n                selectedExtensionShortHeader: null,\n              },\n              () => this.props.onNewExtensionInstalled()\n            );\n          });\n        },\n        err => {\n          showErrorBox(\n            i18n._(\n              t`Unable to download and install the extension. Verify that your internet connection is working or try again later.`\n            ),\n            err\n          );\n        }\n      )\n      .then(() => {\n        this.setState({\n          isInstalling: false,\n        });\n      });\n  };\n\n  render() {\n    const { project, showOnlyWithBehaviors } = this.props;\n    const {\n      selectedExtensionShortHeader,\n      extensionsRegistry,\n      searchText,\n      isInstalling,\n      error,\n      chosenTag,\n    } = this.state;\n\n    const extensionShortHeaders = extensionsRegistry\n      ? filterExtensionShortHeaders(extensionsRegistry.extensionShortHeaders, {\n          searchText,\n          chosenTag,\n          showOnlyWithBehaviors,\n        })\n      : [];\n\n    return (\n      <I18n>\n        {({ i18n }) => (\n          <EventsFunctionsExtensionsContext.Consumer>\n            {eventsFunctionsExtensionsState => (\n              <React.Fragment>\n                <SearchbarWithChips\n                  value={searchText}\n                  onRequestSearch={() => {\n                    if (extensionShortHeaders.length) {\n                      this.setState({\n                        selectedExtensionShortHeader: extensionShortHeaders[0],\n                      });\n                    }\n                  }}\n                  onChange={searchText =>\n                    this.setState({\n                      searchText,\n                    })\n                  }\n                  chips={\n                    !!extensionsRegistry\n                      ? extensionsRegistry.allTags.map(tag => ({\n                          text: tag,\n                          value: tag,\n                        }))\n                      : null\n                  }\n                  chosenChip={chosenTag}\n                  onChooseChip={chosenTag =>\n                    this.setState({\n                      chosenTag,\n                    })\n                  }\n                />\n                <List>\n                  {!extensionsRegistry && !error && <PlaceholderLoader />}\n                  {!!extensionsRegistry &&\n                    extensionShortHeaders\n                      .slice(0, MAX_DISPLAYED_RESULTS)\n                      .map(extensionShortHeader => {\n                        const alreadyInstalled = project.hasEventsFunctionsExtensionNamed(\n                          extensionShortHeader.name\n                        );\n\n                        return (\n                          <ListItem\n                            key={extensionShortHeader.name}\n                            primaryText={\n                              <span>\n                                {extensionShortHeader.fullName}{' '}\n                                {alreadyInstalled && (\n                                  <Trans> (already installed)</Trans>\n                                )}\n                              </span>\n                            }\n                            secondaryText={\n                              extensionShortHeader.shortDescription\n                            }\n                            secondaryTextLines={2}\n                            onClick={() =>\n                              this.setState({\n                                selectedExtensionShortHeader: extensionShortHeader,\n                              })\n                            }\n                          />\n                        );\n                      })}\n                  {!!extensionsRegistry &&\n                    extensionShortHeaders.length > MAX_DISPLAYED_RESULTS && (\n                      <EmptyMessage>\n                        <Trans>\n                          There are other results not displayed. Enter more\n                          precise search criteria to find other extensions.\n                        </Trans>\n                      </EmptyMessage>\n                    )}\n                  {!extensionsRegistry && error && (\n                    <PlaceholderError onRetry={this._loadExtensionsRegistry}>\n                      <Trans>\n                        Can't load the extension registry. Verify your internet\n                        connection or try again later.\n                      </Trans>\n                    </PlaceholderError>\n                  )}\n                </List>\n                {!!selectedExtensionShortHeader && (\n                  <ExtensionInstallDialog\n                    isInstalling={isInstalling}\n                    extensionShortHeader={selectedExtensionShortHeader}\n                    alreadyInstalled={project.hasEventsFunctionsExtensionNamed(\n                      selectedExtensionShortHeader.name\n                    )}\n                    onInstall={() =>\n                      this._install(\n                        i18n,\n                        eventsFunctionsExtensionsState,\n                        selectedExtensionShortHeader\n                      )\n                    }\n                    onClose={() =>\n                      this.setState({\n                        selectedExtensionShortHeader: null,\n                      })\n                    }\n                  />\n                )}\n              </React.Fragment>\n            )}\n          </EventsFunctionsExtensionsContext.Consumer>\n        )}\n      </I18n>\n    );\n  }\n}\n","// @flow\nimport { Trans } from '@lingui/macro';\nimport React, { Component } from 'react';\nimport Dialog from '../UI/Dialog';\nimport FlatButton from '../UI/FlatButton';\nimport ListIcon from '../UI/ListIcon';\nimport Subheader from '../UI/Subheader';\nimport { List, ListItem } from '../UI/List';\nimport Visibility from '@material-ui/icons/Visibility';\nimport VisibilityOff from '@material-ui/icons/VisibilityOff';\nimport {\n  enumerateObjectTypes,\n  type EnumeratedObjectMetadata,\n} from './EnumerateObjects';\nimport HelpButton from '../UI/HelpButton';\nimport { getExperimentalObjects } from '../Hints';\nimport { Line } from '../UI/Grid';\n\nconst ObjectListItem = ({\n  objectMetadata,\n  onClick,\n}: {|\n  objectMetadata: EnumeratedObjectMetadata,\n  onClick: () => void,\n|}) => {\n  if (objectMetadata.name === '') {\n    // Base object is an \"abstract\" object\n    return null;\n  }\n\n  return (\n    <ListItem\n      leftIcon={\n        <ListIcon\n          src={objectMetadata.iconFilename}\n          iconSize={40}\n          isGDevelopIcon\n        />\n      }\n      key={objectMetadata.name}\n      primaryText={objectMetadata.fullName}\n      secondaryText={objectMetadata.description}\n      secondaryTextLines={2}\n      onClick={onClick}\n    />\n  );\n};\n\ntype Props = {|\n  project: gdProject,\n  open: boolean,\n  onClose: () => void,\n  onChoose: string => void,\n|};\n\ntype State = {|\n  objectMetadata: Array<EnumeratedObjectMetadata>,\n  showExperimental: boolean,\n|};\n\nexport default class NewObjectDialog extends Component<Props, State> {\n  state = { ...this._loadFrom(this.props.project), showExperimental: false };\n\n  _loadFrom(project: gdProject) {\n    if (!project || !project.getCurrentPlatform()) {\n      return { objectMetadata: [] };\n    }\n\n    return {\n      objectMetadata: enumerateObjectTypes(project),\n    };\n  }\n\n  componentWillReceiveProps(newProps: Props) {\n    if (\n      (!this.props.open && newProps.open) ||\n      (newProps.open && this.props.project !== newProps.project)\n    ) {\n      this.setState(this._loadFrom(newProps.project));\n    }\n  }\n\n  _showExperimental = (showExperimental: boolean = true) => {\n    this.setState({\n      showExperimental,\n    });\n  };\n\n  render() {\n    const { project, open, onClose, onChoose } = this.props;\n    const { objectMetadata, showExperimental } = this.state;\n    if (!open || !project) return null;\n\n    const experimentalObjectsInformation = getExperimentalObjects();\n\n    const objects = objectMetadata.filter(\n      ({ name }) => !experimentalObjectsInformation[name]\n    );\n    const experimentalObjects = objectMetadata.filter(\n      ({ name }) => !!experimentalObjectsInformation[name]\n    );\n\n    return (\n      <Dialog\n        title={<Trans>Add a new object</Trans>}\n        secondaryActions={<HelpButton helpPagePath=\"/objects\" />}\n        actions={\n          <FlatButton\n            label={<Trans>Close</Trans>}\n            primary={false}\n            onClick={onClose}\n          />\n        }\n        onRequestClose={onClose}\n        cannotBeDismissed={false}\n        open={open}\n        noMargin\n      >\n        <List>\n          {objects.map(objectMetadata => (\n            <ObjectListItem\n              key={objectMetadata.name}\n              objectMetadata={objectMetadata}\n              onClick={() => onChoose(objectMetadata.name)}\n            />\n          ))}\n          {showExperimental && (\n            <Subheader>\n              Experimental (make sure to read the documentation page)\n            </Subheader>\n          )}\n          {showExperimental &&\n            experimentalObjects.map(objectMetadata => (\n              <ObjectListItem\n                key={objectMetadata.name}\n                objectMetadata={objectMetadata}\n                onClick={() => onChoose(objectMetadata.name)}\n              />\n            ))}\n        </List>\n        <Line justifyContent=\"center\" alignItems=\"center\">\n          {!showExperimental ? (\n            <FlatButton\n              key=\"toggle-experimental\"\n              icon={<Visibility />}\n              primary={false}\n              onClick={() => this._showExperimental(true)}\n              label={<Trans>Show experimental objects</Trans>}\n            />\n          ) : (\n            <FlatButton\n              key=\"toggle-experimental\"\n              icon={<VisibilityOff />}\n              primary={false}\n              onClick={() => this._showExperimental(false)}\n              label={<Trans>Hide experimental objects</Trans>}\n            />\n          )}\n        </Line>\n      </Dialog>\n    );\n  }\n}\n","// @flow\nimport * as React from 'react';\nimport { t } from '@lingui/macro';\nimport Dialog from './Dialog';\nimport TextField from './TextField';\nimport FlatButton from './FlatButton';\nimport { Trans } from '@lingui/macro';\nimport { type Tags, getTagsFromString } from '../Utils/TagsHelper';\n\ntype Props = {|\n  tagsString: string,\n  onCancel: () => void,\n  onEdit: (tags: Tags) => void,\n|};\n\ntype State = {|\n  tagsString: string,\n|};\n\n/**\n * Dialog to edit tags, with keyboard support (auto focus of tags field,\n * enter to validate, esc to dismiss dialog).\n */\nexport default class EditTagsDialog extends React.Component<Props, State> {\n  state = {\n    tagsString: this.props.tagsString,\n  };\n  _tagsField = React.createRef<TextField>();\n\n  componentDidMount() {\n    setTimeout(() => {\n      if (this._tagsField && this._tagsField.current) {\n        this._tagsField.current.focus();\n      }\n    }, 10);\n  }\n\n  render() {\n    const { onCancel, onEdit } = this.props;\n    const { tagsString } = this.state;\n\n    const tags = getTagsFromString(tagsString);\n\n    return (\n      <Dialog\n        actions={[\n          <FlatButton\n            key=\"close\"\n            label={<Trans>Cancel</Trans>}\n            primary={false}\n            onClick={onCancel}\n          />,\n          <FlatButton\n            key=\"add\"\n            label={\n              this.props.tagsString && !tags.length ? (\n                <Trans>Remove all tags</Trans>\n              ) : (\n                <Trans>Add/update {tags.length} tag(s)</Trans>\n              )\n            }\n            primary\n            onClick={() => onEdit(tags)}\n            disabled={!this.props.tagsString && !tags.length}\n          />,\n        ]}\n        cannotBeDismissed={true}\n        open\n        onRequestClose={onCancel}\n      >\n        <TextField\n          fullWidth\n          value={tagsString}\n          onChange={(e, tagsString) =>\n            this.setState({\n              tagsString,\n            })\n          }\n          floatingLabelText=\"Tag(s) (comma-separated)\"\n          hintText={t`For example: player, spaceship, inventory...`}\n          onKeyPress={event => {\n            if (event.key === 'Enter') {\n              onEdit(tags);\n            }\n          }}\n          ref={this._tagsField}\n        />\n      </Dialog>\n    );\n  }\n}\n","// @flow\nimport { Trans } from '@lingui/macro';\n\nimport React from 'react';\nimport { AutoSizer } from 'react-virtualized';\nimport SortableVirtualizedItemList from '../UI/SortableVirtualizedItemList';\nimport Background from '../UI/Background';\nimport SearchBar from '../UI/SearchBar';\nimport NewObjectDialog from './NewObjectDialog';\nimport VariablesEditorDialog from '../VariablesList/VariablesEditorDialog';\nimport newNameGenerator from '../Utils/NewNameGenerator';\nimport Clipboard from '../Utils/Clipboard';\nimport Window from '../Utils/Window';\nimport {\n  serializeToJSObject,\n  unserializeFromJSObject,\n} from '../Utils/Serializer';\nimport { showWarningBox } from '../UI/Messages/MessageBox';\nimport {\n  enumerateObjects,\n  filterObjectsList,\n  isSameObjectWithContext,\n} from './EnumerateObjects';\nimport type {\n  ObjectWithContextList,\n  ObjectWithContext,\n} from '../ObjectsList/EnumerateObjects';\nimport { CLIPBOARD_KIND } from './ClipboardKind';\nimport TagChips from '../UI/TagChips';\nimport EditTagsDialog from '../UI/EditTagsDialog';\nimport {\n  type Tags,\n  type SelectedTags,\n  getStringFromTags,\n  buildTagsMenuTemplate,\n  getTagsFromString,\n} from '../Utils/TagsHelper';\nimport { type UnsavedChanges } from '../MainFrame/UnsavedChangesContext';\n\nconst styles = {\n  listContainer: {\n    flex: 1,\n  },\n};\n\nexport const objectWithContextReactDndType = 'GD_OBJECT_WITH_CONTEXT';\n\nconst getObjectWithContextName = (objectWithContext: ObjectWithContext) =>\n  objectWithContext.object.getName();\n\nconst isObjectWithContextGlobal = (objectWithContext: ObjectWithContext) =>\n  objectWithContext.global;\n\nconst getPasteLabel = isGlobalObject => {\n  let clipboardObjectName = '';\n  if (Clipboard.has(CLIPBOARD_KIND)) {\n    const clipboardContent = Clipboard.get(CLIPBOARD_KIND);\n    if (clipboardContent) {\n      clipboardObjectName = clipboardContent.name;\n    }\n  }\n\n  return isGlobalObject\n    ? 'Paste ' + clipboardObjectName + ' as a Global Object'\n    : 'Paste ' + clipboardObjectName;\n};\n\ntype State = {|\n  newObjectDialogOpen: boolean,\n  renamedObjectWithContext: ?ObjectWithContext,\n  variablesEditedObject: ?gdObject,\n  searchText: string,\n  tagEditedObject: ?gdObject,\n|};\n\ntype Props = {|\n  project: gdProject,\n  objectsContainer: gdObjectsContainer,\n  onDeleteObject: (\n    objectWithContext: ObjectWithContext,\n    cb: (boolean) => void\n  ) => void,\n  onRenameObject: (\n    objectWithContext: ObjectWithContext,\n    newName: string,\n    cb: (boolean) => void\n  ) => void,\n  selectedObjectNames: Array<string>,\n\n  selectedObjectTags: SelectedTags,\n  getAllObjectTags: () => Tags,\n  onChangeSelectedObjectTags: SelectedTags => void,\n\n  onEditObject: gdObject => void,\n  onObjectCreated: string => void,\n  onObjectSelected: string => void,\n  onObjectPasted?: gdObject => void,\n  canRenameObject: (newName: string) => boolean,\n\n  getThumbnail: (project: gdProject, object: Object) => string,\n  unsavedChanges?: UnsavedChanges,\n|};\n\nexport default class ObjectsList extends React.Component<Props, State> {\n  sortableList: ?SortableVirtualizedItemList<ObjectWithContext>;\n  _displayedObjectWithContextsList: ObjectWithContextList = [];\n  state = {\n    newObjectDialogOpen: false,\n    renamedObjectWithContext: null,\n    variablesEditedObject: null,\n    searchText: '',\n    tagEditedObject: null,\n  };\n\n  shouldComponentUpdate(nextProps: Props, nextState: State) {\n    // The component is costly to render, so avoid any re-rendering as much\n    // as possible.\n    // We make the assumption that no changes to objects list is made outside\n    // from the component.\n    // If a change is made, the component won't notice it: you have to manually\n    // call forceUpdate.\n\n    if (\n      this.state.newObjectDialogOpen !== nextState.newObjectDialogOpen ||\n      this.state.renamedObjectWithContext !==\n        nextState.renamedObjectWithContext ||\n      this.state.variablesEditedObject !== nextState.variablesEditedObject ||\n      this.state.searchText !== nextState.searchText ||\n      this.state.tagEditedObject !== nextState.tagEditedObject\n    )\n      return true;\n\n    if (\n      this.props.selectedObjectNames !== nextProps.selectedObjectNames ||\n      this.props.selectedObjectTags !== nextProps.selectedObjectTags\n    )\n      return true;\n\n    if (\n      this.props.project !== nextProps.project ||\n      this.props.objectsContainer !== nextProps.objectsContainer\n    )\n      return true;\n\n    return false;\n  }\n\n  addObject = (objectType: string) => {\n    const {\n      project,\n      objectsContainer,\n      onEditObject,\n      onObjectCreated,\n      onObjectSelected,\n    } = this.props;\n\n    const name = newNameGenerator(\n      'NewObject',\n      name =>\n        objectsContainer.hasObjectNamed(name) || project.hasObjectNamed(name)\n    );\n\n    const object = objectsContainer.insertNewObject(\n      project,\n      objectType,\n      name,\n      objectsContainer.getObjectsCount()\n    );\n    object.setTags(getStringFromTags(this.props.selectedObjectTags));\n\n    this.setState(\n      {\n        newObjectDialogOpen: false,\n      },\n      () => {\n        if (onEditObject) {\n          onEditObject(object);\n          onObjectCreated(name);\n          onObjectSelected(name);\n        }\n      }\n    );\n  };\n\n  onAddNewObject = () => {\n    this.setState({ newObjectDialogOpen: true });\n  };\n\n  _deleteObject = (objectWithContext: ObjectWithContext) => {\n    const { object, global } = objectWithContext;\n    const { project, objectsContainer } = this.props;\n\n    const answer = Window.showConfirmDialog(\n      \"Are you sure you want to remove this object? This can't be undone.\"\n    );\n    if (!answer) return;\n\n    // It's important to call onDeleteObject, because the parent might\n    // have to do some refactoring/clean up work before the object is deleted\n    // (typically, the SceneEditor will remove instances refering to the object,\n    // leading to the removal of their renderer - which can keep a reference to\n    // the object).\n    this.props.onDeleteObject(objectWithContext, doRemove => {\n      if (!doRemove) return;\n\n      if (global) {\n        project.removeObject(object.getName());\n      } else {\n        objectsContainer.removeObject(object.getName());\n      }\n\n      this._onObjectModified(false);\n    });\n  };\n\n  _copyObject = (objectWithContext: ObjectWithContext) => {\n    const { object } = objectWithContext;\n    Clipboard.set(CLIPBOARD_KIND, {\n      type: object.getType(),\n      name: object.getName(),\n      object: serializeToJSObject(object),\n    });\n  };\n\n  _cutObject = (objectWithContext: ObjectWithContext) => {\n    this._copyObject(objectWithContext);\n    this._deleteObject(objectWithContext);\n  };\n\n  _duplicateObject = (objectWithContext: ObjectWithContext) => {\n    this._copyObject(objectWithContext);\n    this._pasteAndRename(objectWithContext);\n  };\n\n  _pasteAndRename = (objectWithContext: ObjectWithContext) => {\n    this._editName(this._paste(objectWithContext));\n  };\n\n  _paste = (objectWithContext: ObjectWithContext): ?ObjectWithContext => {\n    if (!Clipboard.has(CLIPBOARD_KIND)) return null;\n\n    const { object: pasteObject, global } = objectWithContext;\n    const { object: copiedObject, type, name } = Clipboard.get(CLIPBOARD_KIND);\n    const { project, objectsContainer, onObjectPasted } = this.props;\n\n    const newName = newNameGenerator(\n      name,\n      name =>\n        objectsContainer.hasObjectNamed(name) || project.hasObjectNamed(name),\n      ''\n    );\n\n    const newObject = global\n      ? project.insertNewObject(\n          project,\n          type,\n          newName,\n          project.getObjectPosition(pasteObject.getName())\n        )\n      : objectsContainer.insertNewObject(\n          project,\n          type,\n          newName,\n          objectsContainer.getObjectPosition(pasteObject.getName())\n        );\n\n    unserializeFromJSObject(\n      newObject,\n      copiedObject,\n      'unserializeFrom',\n      project\n    );\n    newObject.setName(newName); // Unserialization has overwritten the name.\n\n    this._onObjectModified(false);\n    if (onObjectPasted) onObjectPasted(newObject);\n\n    return { object: newObject, global };\n  };\n\n  _editName = (objectWithContext: ?ObjectWithContext) => {\n    this.setState(\n      {\n        renamedObjectWithContext: objectWithContext,\n      },\n      () => {\n        if (this.sortableList) this.sortableList.forceUpdateGrid();\n      }\n    );\n  };\n\n  _editVariables = (object: ?gdObject) => {\n    this.setState({\n      variablesEditedObject: object,\n    });\n  };\n\n  _rename = (objectWithContext: ObjectWithContext, newName: string) => {\n    const { object } = objectWithContext;\n    this.setState({\n      renamedObjectWithContext: null,\n    });\n\n    if (getObjectWithContextName(objectWithContext) === newName) return;\n\n    if (this.props.canRenameObject(newName)) {\n      this.props.onRenameObject(objectWithContext, newName, doRename => {\n        if (!doRename) return;\n\n        object.setName(newName);\n        this._onObjectModified(false);\n      });\n    }\n  };\n\n  _canMoveSelectionTo = (destinationObjectWithContext: ObjectWithContext) => {\n    // Check if at least one element in the selection can be moved.\n    const selectedObjects = this._displayedObjectWithContextsList.filter(\n      objectWithContext =>\n        this.props.selectedObjectNames.indexOf(\n          objectWithContext.object.getName()\n        ) !== -1\n    );\n    return (\n      selectedObjects.filter(movedObjectWithContext => {\n        return (\n          movedObjectWithContext.global === destinationObjectWithContext.global\n        );\n      }).length > 0\n    );\n  };\n\n  _moveSelectionTo = (destinationObjectWithContext: ObjectWithContext) => {\n    const { project, objectsContainer } = this.props;\n\n    const container: gdObjectsContainer = destinationObjectWithContext.global\n      ? project\n      : objectsContainer;\n\n    const selectedObjects = this._displayedObjectWithContextsList.filter(\n      objectWithContext =>\n        this.props.selectedObjectNames.indexOf(\n          objectWithContext.object.getName()\n        ) !== -1\n    );\n    selectedObjects.forEach(movedObjectWithContext => {\n      if (\n        movedObjectWithContext.global !== destinationObjectWithContext.global\n      ) {\n        // Can't move an object from the objects container to the global objects\n        // or vice-versa.\n        return;\n      }\n\n      container.moveObject(\n        container.getObjectPosition(movedObjectWithContext.object.getName()),\n        container.getObjectPosition(\n          destinationObjectWithContext.object.getName()\n        )\n      );\n    });\n    this._onObjectModified(true);\n  };\n\n  _setAsGlobalObject = (objectWithContext: ObjectWithContext) => {\n    const { object } = objectWithContext;\n    const { project, objectsContainer } = this.props;\n\n    const objectName: string = object.getName();\n    if (!objectsContainer.hasObjectNamed(objectName)) return;\n\n    if (project.hasObjectNamed(objectName)) {\n      showWarningBox(\n        'A global object with this name already exists. Please change the object name before setting it as a global object'\n      );\n      return;\n    }\n\n    const answer = Window.showConfirmDialog(\n      \"This object will be loaded and available in all the scenes. This is only recommended for objects that you reuse a lot and can't be undone. Make this object global?\"\n    );\n    if (!answer) return;\n\n    // It's safe to call moveObjectToAnotherContainer because it does not invalidate the\n    // references to the object in memory - so other editors like InstancesRenderer can\n    // continue to work.\n    objectsContainer.moveObjectToAnotherContainer(\n      objectName,\n      project,\n      project.getObjectsCount()\n    );\n    this._onObjectModified(true);\n  };\n\n  forceUpdateList = () => {\n    this.forceUpdate();\n    if (this.sortableList) this.sortableList.forceUpdateGrid();\n  };\n\n  _openEditTagDialog = (tagEditedObject: ?gdObject) => {\n    this.setState({\n      tagEditedObject,\n    });\n  };\n\n  _changeObjectTags = (object: gdObject, tags: Tags) => {\n    object.setTags(getStringFromTags(tags));\n\n    // Force update the list as it's possible that user removed a tag\n    // from an object, that should then not be shown anymore in the list.\n    this._onObjectModified(true);\n  };\n\n  _selectObject = (objectWithContext: ?ObjectWithContext) => {\n    this.props.onObjectSelected(\n      objectWithContext ? objectWithContext.object.getName() : ''\n    );\n  };\n\n  _getObjectThumbnail = (objectWithContext: ObjectWithContext) =>\n    this.props.getThumbnail(this.props.project, objectWithContext.object);\n\n  _renderObjectMenuTemplate = (\n    objectWithContext: ObjectWithContext,\n    index: number\n  ) => {\n    const { object } = objectWithContext;\n    return [\n      {\n        label: 'Edit object',\n        click: () => this.props.onEditObject(object),\n      },\n      {\n        label: 'Edit object variables',\n        click: () => this._editVariables(object),\n      },\n      { type: 'separator' },\n      {\n        label: 'Tags',\n        submenu: buildTagsMenuTemplate({\n          noTagLabel: 'No tags',\n          getAllTags: this.props.getAllObjectTags,\n          selectedTags: getTagsFromString(object.getTags()),\n          onChange: objectTags => {\n            this._changeObjectTags(object, objectTags);\n          },\n          editTagsLabel: 'Add/edit tags...',\n          onEditTags: () => this._openEditTagDialog(object),\n        }),\n      },\n      {\n        label: 'Rename',\n        click: () => this._editName(objectWithContext),\n      },\n      {\n        label: 'Set as a global object',\n        click: () => this._setAsGlobalObject(objectWithContext),\n      },\n      {\n        label: 'Delete',\n        click: () => this._deleteObject(objectWithContext),\n      },\n      { type: 'separator' },\n      {\n        label: 'Add a new object...',\n        click: () => this.onAddNewObject(),\n      },\n      { type: 'separator' },\n      {\n        label: 'Copy',\n        click: () => this._copyObject(objectWithContext),\n      },\n      {\n        label: 'Cut',\n        click: () => this._cutObject(objectWithContext),\n      },\n      {\n        label: getPasteLabel(objectWithContext.global),\n        enabled: Clipboard.has(CLIPBOARD_KIND),\n        click: () => this._paste(objectWithContext),\n      },\n      {\n        label: 'Duplicate',\n        click: () => this._duplicateObject(objectWithContext),\n      },\n    ];\n  };\n\n  _onObjectModified = (shouldForceUpdateList: boolean) => {\n    if (this.props.unsavedChanges)\n      this.props.unsavedChanges.triggerUnsavedChanges();\n\n    if (shouldForceUpdateList) this.forceUpdateList();\n    else this.forceUpdate();\n  };\n\n  render() {\n    const { project, objectsContainer, selectedObjectTags } = this.props;\n    const { searchText, tagEditedObject } = this.state;\n\n    const lists = enumerateObjects(project, objectsContainer);\n    this._displayedObjectWithContextsList = filterObjectsList(\n      lists.allObjectsList,\n      {\n        searchText,\n        selectedTags: selectedObjectTags,\n      }\n    );\n    const selectedObjects = this._displayedObjectWithContextsList.filter(\n      objectWithContext =>\n        this.props.selectedObjectNames.indexOf(\n          objectWithContext.object.getName()\n        ) !== -1\n    );\n    const renamedObjectWithContext = this._displayedObjectWithContextsList.find(\n      isSameObjectWithContext(this.state.renamedObjectWithContext)\n    );\n\n    // Force List component to be mounted again if project or objectsContainer\n    // has been changed. Avoid accessing to invalid objects that could\n    // crash the app.\n    const listKey = project.ptr + ';' + objectsContainer.ptr;\n\n    return (\n      <Background maxWidth>\n        <TagChips\n          tags={this.props.selectedObjectTags}\n          onChange={this.props.onChangeSelectedObjectTags}\n        />\n        <div style={styles.listContainer}>\n          <AutoSizer>\n            {({ height, width }) => (\n              <SortableVirtualizedItemList\n                key={listKey}\n                ref={sortableList => (this.sortableList = sortableList)}\n                fullList={this._displayedObjectWithContextsList}\n                width={width}\n                height={height}\n                getItemName={getObjectWithContextName}\n                getItemThumbnail={this._getObjectThumbnail}\n                isItemBold={isObjectWithContextGlobal}\n                onEditItem={objectWithContext =>\n                  this.props.onEditObject(objectWithContext.object)\n                }\n                onAddNewItem={this.onAddNewObject}\n                addNewItemLabel={<Trans>Add a new object</Trans>}\n                selectedItems={selectedObjects}\n                onItemSelected={this._selectObject}\n                renamedItem={renamedObjectWithContext}\n                onRename={this._rename}\n                buildMenuTemplate={this._renderObjectMenuTemplate}\n                onMoveSelectionToItem={this._moveSelectionTo}\n                canMoveSelectionToItem={this._canMoveSelectionTo}\n                reactDndType={objectWithContextReactDndType}\n              />\n            )}\n          </AutoSizer>\n        </div>\n        <SearchBar\n          value={searchText}\n          onRequestSearch={() => {}}\n          onChange={text =>\n            this.setState({\n              searchText: text,\n            })\n          }\n        />\n        {this.state.newObjectDialogOpen && (\n          <NewObjectDialog\n            open={this.state.newObjectDialogOpen}\n            onClose={() =>\n              this.setState({\n                newObjectDialogOpen: false,\n              })\n            }\n            onChoose={this.addObject}\n            project={project}\n          />\n        )}\n        {this.state.variablesEditedObject && (\n          <VariablesEditorDialog\n            open\n            variablesContainer={\n              this.state.variablesEditedObject &&\n              this.state.variablesEditedObject.getVariables()\n            }\n            onCancel={() => this._editVariables(null)}\n            onApply={() => this._editVariables(null)}\n            title={<Trans>Object Variables</Trans>}\n            emptyExplanationMessage={\n              <Trans>\n                When you add variables to an object, any instance of the object\n                put on the scene or created during the game will have these\n                variables attached to it.\n              </Trans>\n            }\n            emptyExplanationSecondMessage={\n              <Trans>\n                For example, you can have a variable called Life representing\n                the health of the object.\n              </Trans>\n            }\n          />\n        )}\n        {tagEditedObject && (\n          <EditTagsDialog\n            tagsString={tagEditedObject.getTags()}\n            onEdit={tags => {\n              this._changeObjectTags(tagEditedObject, tags);\n              this._openEditTagDialog(null);\n            }}\n            onCancel={() => this._openEditTagDialog(null)}\n          />\n        )}\n      </Background>\n    );\n  }\n}\n","export const CLIPBOARD_KIND = 'Object';\n","// @flow\nimport { Trans } from '@lingui/macro';\n\nimport * as React from 'react';\nimport {\n  type Release,\n  findRelease,\n} from '../../Utils/GDevelopServices/Release';\nimport EmptyMessage from '../../UI/EmptyMessage';\nimport PlaceholderLoader from '../../UI/PlaceholderLoader';\nimport { MarkdownText } from '../../UI/MarkdownText';\nimport { Column, Line } from '../../UI/Grid';\nimport Window from '../../Utils/Window';\nimport { hasBreakingChange } from '../../Utils/GDevelopServices/Release';\nimport AlertMessage from '../../UI/AlertMessage';\nimport FlatButton from '../../UI/FlatButton';\nimport RaisedButton from '../../UI/RaisedButton';\n\ntype Props = {|\n  releases: ?Array<Release>,\n  error: ?Error,\n  currentReleaseName: string,\n|};\n\n/**\n * Display information about latest releases.\n */\nconst ChangelogRenderer = ({ releases, error, currentReleaseName }: Props) => {\n  const openReleaseNote = () =>\n    Window.openExternalURL('https://github.com/4ian/GDevelop/releases');\n\n  if (error) {\n    return (\n      <Column>\n        <Line>\n          <AlertMessage kind=\"warning\">\n            <Trans>\n              Please double check online the changes to make sure that you are\n              aware of anything new in this version that would require you to\n              adapt your project.\n            </Trans>\n          </AlertMessage>\n        </Line>\n        <Line>\n          <EmptyMessage>\n            <Trans>\n              Unable to load the information about the latest GDevelop releases.\n              Verify your internet connection or retry later.\n            </Trans>\n          </EmptyMessage>\n        </Line>\n        <Line justifyContent=\"center\">\n          <RaisedButton\n            label={<Trans>See the releases notes online</Trans>}\n            onClick={openReleaseNote}\n          />\n        </Line>\n      </Column>\n    );\n  }\n\n  if (!releases) {\n    return <PlaceholderLoader />;\n  }\n\n  const currentRelease = findRelease(releases, currentReleaseName);\n  const currentVersionHasBreakingChange =\n    !!currentRelease && hasBreakingChange(currentRelease);\n\n  return (\n    <Column>\n      {currentVersionHasBreakingChange && (\n        <AlertMessage kind=\"warning\">\n          This version of GDevelop has a breaking change. Please make sure to\n          read the changes below to understand if any change or adaptation must\n          be made to your project.\n        </AlertMessage>\n      )}\n      {releases.map(release =>\n        release.name ? (\n          <MarkdownText\n            key={release.name}\n            source={\n              '# Version ' +\n              release.name +\n              '\\n---\\n' +\n              (release.description ||\n                'Changes and new features description will be available soon.')\n            }\n            isStandaloneText\n          />\n        ) : null\n      )}\n      <Line justifyContent=\"center\">\n        <FlatButton\n          label={<Trans>See all the releases notes</Trans>}\n          onClick={openReleaseNote}\n        />\n      </Line>\n    </Column>\n  );\n};\n\nexport default ChangelogRenderer;\n","// @flow\nimport axios from 'axios';\nimport { GDevelopReleaseApi } from './ApiConfigs';\n\nexport type Release = {\n  name: ?string,\n  publishedAt: ?string,\n  description: ?string,\n};\n\nexport const getReleases = (): Promise<Array<Release>> => {\n  return axios\n    .get(`${GDevelopReleaseApi.baseUrl}/release`, {\n      params: {\n        last: 4,\n      },\n    })\n    .then(response => response.data);\n};\n\nexport const hasBreakingChange = (release: Release): boolean => {\n  return (\n    (release.description || '').toLowerCase().indexOf('breaking change') !== -1\n  );\n};\n\nexport const findRelease = (\n  releases: Array<Release>,\n  name: string\n): ?Release => {\n  return releases.find(release => release.name === name);\n};\n","// @flow\nimport * as React from 'react';\nimport {\n  getReleases,\n  type Release,\n} from '../../Utils/GDevelopServices/Release';\nimport ChangelogRenderer from './ChangelogRenderer';\nimport { getIDEVersion } from '../../Version';\n\ntype State = {|\n  releases: ?Array<Release>,\n  error: ?Error,\n|};\n\ntype Props = {|\n  onUpdated?: () => void,\n|};\n\n/**\n * Load information about latest releases and display them.\n */\nexport default class Changelog extends React.Component<Props, State> {\n  state = {\n    releases: null,\n    error: null,\n  };\n\n  _onUpdated = () => {\n    if (this.props.onUpdated) this.props.onUpdated();\n  };\n\n  componentDidMount() {\n    getReleases()\n      .then(releases =>\n        this.setState(\n          {\n            releases,\n            error: null,\n          },\n          this._onUpdated\n        )\n      )\n      .catch((error: ?Error) =>\n        this.setState(\n          {\n            error,\n          },\n          this._onUpdated\n        )\n      );\n  }\n\n  render() {\n    const { releases, error } = this.state;\n    return (\n      <ChangelogRenderer\n        releases={releases}\n        error={error}\n        currentReleaseName={getIDEVersion()}\n      />\n    );\n  }\n}\n","// @flow\nimport { Trans } from '@lingui/macro';\nimport { I18n } from '@lingui/react';\nimport { type I18n as I18nType } from '@lingui/core';\nimport { t } from '@lingui/macro';\n\nimport * as React from 'react';\nimport {\n  createTree,\n  type InstructionOrExpressionTreeNode,\n  findInTree,\n} from '../../InstructionOrExpression/CreateTree';\nimport {\n  enumerateFreeInstructions,\n  filterInstructionsList,\n} from '../../InstructionOrExpression/EnumerateInstructions';\nimport { type EnumeratedInstructionOrExpressionMetadata } from '../../InstructionOrExpression/EnumeratedInstructionOrExpressionMetadata.js';\nimport { List, ListItem } from '../../UI/List';\nimport SearchBar from '../../UI/SearchBar';\nimport ThemeConsumer from '../../UI/Theme/ThemeConsumer';\nimport ScrollView, { type ScrollViewInterface } from '../../UI/ScrollView';\nimport { Tabs, Tab } from '../../UI/Tabs';\nimport Subheader from '../../UI/Subheader';\nimport {\n  enumerateObjectsAndGroups,\n  filterObjectsList,\n  filterGroupsList,\n  enumerateObjects,\n} from '../../ObjectsList/EnumerateObjects';\nimport TagChips from '../../UI/TagChips';\nimport { renderGroupObjectsListItem } from './SelectorListItems/SelectorGroupObjectsListItem';\nimport { renderObjectListItem } from './SelectorListItems/SelectorObjectListItem';\nimport { renderInstructionOrExpressionListItem } from './SelectorListItems/SelectorInstructionOrExpressionListItem';\nimport { renderInstructionTree } from './SelectorListItems/SelectorInstructionsTreeListItem';\nimport EmptyMessage from '../../UI/EmptyMessage';\nimport {\n  buildTagsMenuTemplate,\n  getTagsFromString,\n} from '../../Utils/TagsHelper';\nimport {\n  getObjectOrObjectGroupListItemValue,\n  getInstructionListItemValue,\n} from './SelectorListItems/Keys';\n\nconst styles = {\n  searchBar: {\n    flexShrink: 0,\n  },\n};\n\nexport type TabName = 'objects' | 'free-instructions';\n\ntype State = {|\n  searchText: string,\n\n  // State for tags of objects:\n  selectedObjectTags: Array<string>,\n|};\n\ntype Props = {|\n  project: gdProject,\n  globalObjectsContainer: gdObjectsContainer,\n  objectsContainer: gdObjectsContainer,\n  currentTab: TabName,\n  onChangeTab: TabName => void,\n  isCondition: boolean,\n  focusOnMount?: boolean,\n  chosenInstructionType: ?string,\n  onChooseInstruction: (\n    type: string,\n    EnumeratedInstructionOrExpressionMetadata\n  ) => void,\n  chosenObjectName: ?string,\n  onChooseObject: (objectName: string) => void,\n  onSearchStartOrReset?: () => void,\n  style?: Object,\n|};\n\nconst iconSize = 24;\nconst minHeight = 400; // Avoid a super small list in empty scenes. 400 is enough to be displayed on an iPhone SE.\n\nexport default class InstructionOrObjectSelector extends React.PureComponent<\n  Props,\n  State\n> {\n  state = { searchText: '', selectedObjectTags: [] };\n  _searchBar = React.createRef<SearchBar>();\n  _scrollView = React.createRef<ScrollViewInterface>();\n  _selectedItem = React.createRef<ListItem>();\n\n  instructionsInfo: Array<EnumeratedInstructionOrExpressionMetadata> = enumerateFreeInstructions(\n    this.props.isCondition\n  );\n  instructionsInfoTree: InstructionOrExpressionTreeNode = createTree(\n    this.instructionsInfo\n  );\n  initialInstructionTypePath = findInTree(\n    this.instructionsInfoTree,\n    this.props.chosenInstructionType\n  );\n\n  componentDidMount() {\n    if (this.props.focusOnMount && this._searchBar.current) {\n      this._searchBar.current.focus();\n    }\n    if (this._selectedItem.current && this._scrollView.current) {\n      this._scrollView.current.scrollTo(this._selectedItem.current);\n    }\n  }\n\n  _getAllObjectTags = (): Array<string> => {\n    const { globalObjectsContainer, objectsContainer } = this.props;\n\n    const tagsSet: Set<string> = new Set();\n    enumerateObjects(\n      globalObjectsContainer,\n      objectsContainer\n    ).allObjectsList.forEach(({ object }) => {\n      getTagsFromString(object.getTags()).forEach(tag => tagsSet.add(tag));\n    });\n\n    return Array.from(tagsSet);\n  };\n\n  _buildObjectTagsMenuTemplate = (i18n: I18nType): Array<any> => {\n    const { selectedObjectTags } = this.state;\n\n    return buildTagsMenuTemplate({\n      noTagLabel: i18n._(t`No tags - add a tag to an object first`),\n      getAllTags: this._getAllObjectTags,\n      selectedTags: selectedObjectTags,\n      onChange: selectedObjectTags => {\n        this.setState({ selectedObjectTags });\n      },\n    });\n  };\n\n  render() {\n    const {\n      style,\n      globalObjectsContainer,\n      objectsContainer,\n      project,\n      chosenInstructionType,\n      onChooseInstruction,\n      chosenObjectName,\n      onChooseObject,\n      isCondition,\n      currentTab,\n      onChangeTab,\n      onSearchStartOrReset,\n    } = this.props;\n    const { searchText, selectedObjectTags } = this.state;\n\n    // If the global objects container is not the project, consider that we're\n    // not in the events of a layout or an external events sheet - but in an extension.\n    const isOutsideLayout = globalObjectsContainer !== project;\n\n    const { allObjectsList, allGroupsList } = enumerateObjectsAndGroups(\n      globalObjectsContainer,\n      objectsContainer\n    );\n    const displayedObjectsList = filterObjectsList(allObjectsList, {\n      searchText,\n      selectedTags: selectedObjectTags,\n    });\n    const displayedObjectGroupsList = selectedObjectTags.length\n      ? []\n      : filterGroupsList(allGroupsList, searchText);\n    const displayedInstructionsList = filterInstructionsList(\n      this.instructionsInfo,\n      { searchText }\n    );\n    const isSearching = !!searchText;\n    const hasResults =\n      !isSearching ||\n      !!displayedObjectsList.length ||\n      !!displayedObjectGroupsList.length ||\n      !!displayedInstructionsList.length;\n\n    const onSubmitSearch = () => {\n      if (!isSearching) return;\n\n      if (displayedObjectsList.length > 0) {\n        onChooseObject(displayedObjectsList[0].object.getName());\n      } else if (displayedObjectGroupsList.length > 0) {\n        onChooseObject(displayedObjectGroupsList[0].group.getName());\n      } else if (displayedInstructionsList.length > 0) {\n        onChooseInstruction(\n          displayedInstructionsList[0].type,\n          displayedInstructionsList[0]\n        );\n      }\n    };\n\n    return (\n      <I18n key=\"tags\">\n        {({ i18n }) => (\n          <ThemeConsumer>\n            {muiTheme => (\n              <div\n                style={{\n                  backgroundColor: muiTheme.list.itemsBackgroundColor,\n                  minHeight,\n                  ...style,\n                }}\n              >\n                <SearchBar\n                  value={searchText}\n                  onChange={searchText => {\n                    const oldSearchText = this.state.searchText;\n                    this.setState({\n                      searchText,\n                    });\n\n                    // Notify if needed that we started or cleared a search\n                    if (\n                      (!oldSearchText && searchText) ||\n                      (oldSearchText && !searchText)\n                    ) {\n                      if (onSearchStartOrReset) onSearchStartOrReset();\n                    }\n                  }}\n                  onRequestSearch={onSubmitSearch}\n                  buildTagsMenuTemplate={() =>\n                    this._buildObjectTagsMenuTemplate(i18n)\n                  }\n                  style={styles.searchBar}\n                  ref={this._searchBar}\n                />\n                {!isSearching && (\n                  <Tabs value={currentTab} onChange={onChangeTab}>\n                    <Tab\n                      label={<Trans>Objects</Trans>}\n                      value={('objects': TabName)}\n                    />\n                    <Tab\n                      label={\n                        isCondition ? (\n                          <Trans>Other conditions</Trans>\n                        ) : (\n                          <Trans>Other actions</Trans>\n                        )\n                      }\n                      value={('free-instructions': TabName)}\n                    />\n                  </Tabs>\n                )}\n                <ScrollView\n                  ref={\n                    // $FlowFixMe - improper typing of ScrollView?\n                    this._scrollView\n                  }\n                >\n                  {!isSearching && currentTab === 'objects' && (\n                    <TagChips\n                      tags={selectedObjectTags}\n                      onChange={selectedObjectTags =>\n                        this.setState({\n                          selectedObjectTags,\n                        })\n                      }\n                    />\n                  )}\n                  {hasResults && (\n                    <List>\n                      {(isSearching || currentTab === 'objects') &&\n                        displayedObjectsList.map(objectWithContext =>\n                          renderObjectListItem({\n                            project: project,\n                            objectWithContext: objectWithContext,\n                            iconSize: iconSize,\n                            onClick: () =>\n                              onChooseObject(\n                                objectWithContext.object.getName()\n                              ),\n                            selectedValue: chosenObjectName\n                              ? getObjectOrObjectGroupListItemValue(\n                                  chosenObjectName\n                                )\n                              : undefined,\n                          })\n                        )}\n                      {(isSearching || currentTab === 'objects') &&\n                        displayedObjectGroupsList.length > 0 && (\n                          <Subheader>\n                            <Trans>Object groups</Trans>\n                          </Subheader>\n                        )}\n                      {(isSearching || currentTab === 'objects') &&\n                        displayedObjectGroupsList.map(groupWithContext =>\n                          renderGroupObjectsListItem({\n                            groupWithContext: groupWithContext,\n                            iconSize: iconSize,\n                            onClick: () =>\n                              onChooseObject(groupWithContext.group.getName()),\n                            selectedValue: chosenObjectName\n                              ? getObjectOrObjectGroupListItemValue(\n                                  chosenObjectName\n                                )\n                              : undefined,\n                          })\n                        )}\n                      {isSearching && displayedInstructionsList.length > 0 && (\n                        <Subheader>\n                          {isCondition ? (\n                            <Trans>Non-objects and other conditions</Trans>\n                          ) : (\n                            <Trans>Non-objects and other actions</Trans>\n                          )}\n                        </Subheader>\n                      )}\n                      {isSearching &&\n                        displayedInstructionsList.map(instructionMetadata =>\n                          renderInstructionOrExpressionListItem({\n                            instructionOrExpressionMetadata: instructionMetadata,\n                            iconSize: iconSize,\n                            onClick: () =>\n                              onChooseInstruction(\n                                instructionMetadata.type,\n                                instructionMetadata\n                              ),\n                            selectedValue: chosenInstructionType\n                              ? getInstructionListItemValue(\n                                  chosenInstructionType\n                                )\n                              : undefined,\n                          })\n                        )}\n                      {!isSearching &&\n                        currentTab === 'free-instructions' &&\n                        renderInstructionTree({\n                          instructionTreeNode: this.instructionsInfoTree,\n                          onChoose: onChooseInstruction,\n                          iconSize,\n                          selectedValue: chosenInstructionType\n                            ? getInstructionListItemValue(chosenInstructionType)\n                            : undefined,\n                          initiallyOpenedPath: this.initialInstructionTypePath,\n                          selectedItemRef: this._selectedItem,\n                        })}\n                    </List>\n                  )}\n                  {!isSearching &&\n                    currentTab === 'objects' &&\n                    !allObjectsList.length && (\n                      <EmptyMessage>\n                        {isOutsideLayout ? (\n                          <Trans>\n                            There are no objects. Objects will appear if you add\n                            some as parameters.\n                          </Trans>\n                        ) : (\n                          <Trans>\n                            There is no object in your game or in this scene.\n                            Start by adding an new object in the scene editor,\n                            using the objects list.\n                          </Trans>\n                        )}\n                      </EmptyMessage>\n                    )}\n                  {!hasResults && (\n                    <EmptyMessage>\n                      <Trans>\n                        Nothing corresponding to your search. Choose an object\n                        first or browse the list of actions/conditions.\n                      </Trans>\n                    </EmptyMessage>\n                  )}\n                </ScrollView>\n              </div>\n            )}\n          </ThemeConsumer>\n        )}\n      </I18n>\n    );\n  }\n}\n","// @flow\nimport * as React from 'react';\nimport { ListItem } from '../../../UI/List';\nimport ListIcon from '../../../UI/ListIcon';\nimport ObjectsRenderingService from '../../../ObjectsRendering/ObjectsRenderingService';\nimport type { ObjectWithContext } from '../../../ObjectsList/EnumerateObjects';\nimport {\n  getObjectOrObjectGroupListItemValue,\n  getObjectListItemKey,\n} from './Keys';\n\ntype Props = {|\n  project: gdProject,\n  objectWithContext: ObjectWithContext,\n  iconSize: number,\n  onClick: () => void,\n  selectedValue: ?string,\n|};\n\nexport const renderObjectListItem = ({\n  project,\n  objectWithContext,\n  iconSize,\n  onClick,\n  selectedValue,\n}: Props) => {\n  const objectName: string = objectWithContext.object.getName();\n  return (\n    <ListItem\n      key={getObjectListItemKey(objectWithContext)}\n      selected={\n        selectedValue === getObjectOrObjectGroupListItemValue(objectName)\n      }\n      primaryText={objectName}\n      leftIcon={\n        <ListIcon\n          iconSize={iconSize}\n          src={ObjectsRenderingService.getThumbnail(\n            project,\n            objectWithContext.object\n          )}\n        />\n      }\n      onClick={onClick}\n    />\n  );\n};\n","// @flow\nimport * as React from 'react';\nimport { ListItem } from '../../../UI/List';\nimport ListIcon from '../../../UI/ListIcon';\nimport type { GroupWithContext } from '../../../ObjectsList/EnumerateObjects';\nimport {\n  getObjectGroupListItemKey,\n  getObjectOrObjectGroupListItemValue,\n} from './Keys';\n\ntype Props = {|\n  groupWithContext: GroupWithContext,\n  iconSize: number,\n  onClick: () => void,\n  selectedValue: ?string,\n|};\n\nexport const renderGroupObjectsListItem = ({\n  groupWithContext,\n  iconSize,\n  onClick,\n  selectedValue,\n}: Props) => {\n  const groupName: string = groupWithContext.group.getName();\n  return (\n    <ListItem\n      key={getObjectGroupListItemKey(groupWithContext)}\n      selected={\n        selectedValue === getObjectOrObjectGroupListItemValue(groupName)\n      }\n      primaryText={groupName}\n      leftIcon={\n        <ListIcon\n          iconSize={iconSize}\n          src=\"res/ribbon_default/objectsgroups64.png\"\n        />\n      }\n      onClick={onClick}\n    />\n  );\n};\n","import { Trans } from '@lingui/macro';\nimport React, { PureComponent } from 'react';\nimport { Column, Line } from '../UI/Grid';\nimport { sendTutorialOpened } from '../Utils/Analytics/EventSender';\nimport Window from '../Utils/Window';\nimport { getHelpLink } from '../Utils/HelpLink';\nimport { List, ListItem } from '../UI/List';\nimport Text from '../UI/Text';\nimport Subheader from '../UI/Subheader';\n\nexport default class Tutorials extends PureComponent {\n  render() {\n    return (\n      <Column noMargin>\n        <Line>\n          <Column>\n            <Text>\n              <Trans>\n                Tutorials are available on GDevelop wiki. Choose a tutorial to\n                read:\n              </Trans>\n            </Text>\n          </Column>\n        </Line>\n        <Line>\n          <Column expand noMargin>\n            <List>\n              <ListItem\n                primaryText={<Trans>Geometry Monster Tutorial</Trans>}\n                secondaryText={\n                  <Trans>\n                    Make a hyper-casual mobile game where the player must grab\n                    shapes and avoid bombs.\n                  </Trans>\n                }\n                onClick={() => {\n                  sendTutorialOpened('Geometry Monster');\n                  Window.openExternalURL(\n                    getHelpLink('/tutorials/geometry-monster')\n                  );\n                }}\n              />\n              <ListItem\n                primaryText={<Trans>Platformer Tutorial</Trans>}\n                secondaryText={\n                  <Trans>Make a platform game from scratch.</Trans>\n                }\n                onClick={() => {\n                  sendTutorialOpened('Platformer');\n                  Window.openExternalURL(\n                    getHelpLink('/tutorials/platform-game/start')\n                  );\n                }}\n              />\n              <ListItem\n                primaryText={<Trans>Tank Shooter Tutorial</Trans>}\n                secondaryText={\n                  <Trans>Make a simple tank shooter game from scratch.</Trans>\n                }\n                onClick={() => {\n                  sendTutorialOpened('Tank Shooter');\n                  Window.openExternalURL(\n                    getHelpLink('/tutorials/tank-shooter')\n                  );\n                }}\n              />\n              <Subheader>\n                <Trans>Community Tutorials</Trans>\n              </Subheader>\n              <ListItem\n                primaryText={<Trans>Endless Runner Tutorial</Trans>}\n                secondaryText={\n                  <Trans>\n                    Make a simple game where the player must jump on platforms\n                    for as long as possible.\n                  </Trans>\n                }\n                secondaryTextLines={2}\n                onClick={() => {\n                  sendTutorialOpened('Endless Runner');\n                  Window.openExternalURL(\n                    getHelpLink('/tutorials/endless-runner')\n                  );\n                }}\n              />\n              <ListItem\n                primaryText={<Trans>Endless Car Game Tutorial</Trans>}\n                secondaryText={\n                  <Trans>\n                    Create a simple game where you must dodge the cars on the\n                    road.\n                  </Trans>\n                }\n                secondaryTextLines={2}\n                onClick={() => {\n                  sendTutorialOpened('Endless Car Game');\n                  Window.openExternalURL(getHelpLink('/tutorials/roadrider'));\n                }}\n              />\n              <ListItem\n                primaryText={<Trans>Breakout Tutorial</Trans>}\n                secondaryText={\n                  <Trans>\n                    Create a simple breakout game where you must destroy all the\n                    bricks on the screen.\n                  </Trans>\n                }\n                secondaryTextLines={2}\n                onClick={() => {\n                  sendTutorialOpened('Breakout');\n                  Window.openExternalURL(getHelpLink('/tutorials/breakout'));\n                }}\n              />\n            </List>\n          </Column>\n        </Line>\n      </Column>\n    );\n  }\n}\n","// @flow\nimport { Trans } from '@lingui/macro';\n\nimport * as React from 'react';\nimport Dialog from '../UI/Dialog';\nimport FlatButton from '../UI/FlatButton';\nimport { Tabs, Tab } from '../UI/Tabs';\nimport Tutorials from './Tutorials';\nimport { Column } from '../UI/Grid';\nimport { type StorageProvider, type FileMetadata } from '../ProjectsStorage';\n\ntype State = {|\n  currentTab: 'starters' | 'examples' | 'tutorials',\n|};\n\nexport type CreateProjectDialogWithComponentsProps = {|\n  open: boolean,\n  onClose: () => void,\n  onOpen: (\n    storageProvider: StorageProvider,\n    fileMetadata: FileMetadata\n  ) => void,\n  onCreate: (\n    gdProject,\n    storageProvider: ?StorageProvider,\n    fileMetadata: ?FileMetadata\n  ) => void,\n|};\n\ntype Props = {|\n  ...CreateProjectDialogWithComponentsProps,\n  startersComponent: any,\n  examplesComponent: any,\n|};\n\nexport default class CreateProjectDialog extends React.Component<Props, State> {\n  state = {\n    currentTab: 'starters',\n  };\n\n  _onChangeTab = (newTab: 'starters' | 'examples' | 'tutorials') => {\n    this.setState({\n      currentTab: newTab,\n    });\n  };\n\n  _showExamples = () => this._onChangeTab('examples');\n\n  _onExamplesLoaded = () => {\n    // Force an update to ensure dialog is properly positioned.\n    this.forceUpdate();\n  };\n\n  render() {\n    const { open, onClose, onOpen, onCreate } = this.props;\n    if (!open) return null;\n\n    const ExamplesComponent = this.props.examplesComponent;\n    const StartersComponent = this.props.startersComponent;\n\n    return (\n      <Dialog\n        title={<Trans>Create a new game</Trans>}\n        actions={[\n          <FlatButton\n            key=\"close\"\n            label={<Trans>Close</Trans>}\n            primary={false}\n            onClick={onClose}\n          />,\n        ]}\n        cannotBeDismissed={false}\n        onRequestClose={onClose}\n        open={open}\n        noMargin\n      >\n        <Column noMargin>\n          <Tabs value={this.state.currentTab} onChange={this._onChangeTab}>\n            <Tab label={<Trans>Starters</Trans>} value=\"starters\" />\n            <Tab label={<Trans>Examples</Trans>} value=\"examples\" />\n            <Tab label={<Trans>Tutorials</Trans>} value=\"tutorials\" />\n          </Tabs>\n          {this.state.currentTab === 'starters' && (\n            <StartersComponent\n              onOpen={onOpen}\n              onCreate={onCreate}\n              onShowExamples={this._showExamples}\n            />\n          )}\n          {this.state.currentTab === 'examples' && (\n            <ExamplesComponent\n              onOpen={onOpen}\n              onCreate={onCreate}\n              onExamplesLoaded={this._onExamplesLoaded}\n            />\n          )}\n          {this.state.currentTab === 'tutorials' && <Tutorials />}\n        </Column>\n      </Dialog>\n    );\n  }\n}\n","// @flow\nimport { type Theme } from '../DefaultTheme';\nimport { createMuiTheme, darken, lighten } from '@material-ui/core/styles';\nimport './Mosaic.css';\nimport './EventsSheet.css';\nimport 'react-virtualized/styles.css'; // Styles for react-virtualized Table\nimport './Table.css';\nimport './Markdown.css';\n\nconst almostWhite = '#EEE';\nconst lightWhite = '#DDD';\nconst notSoWhite = '#CCC';\nconst gdevelopDarkBlue = '#3c4698';\nconst blue = '#2c6bf5';\n\n// Use the fonts provided by the operating system(s) as possible.\n// If you update this font list, be sure to do it in all the other places using fonts in the codebase.\nconst fontFamily =\n  \"-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen-Sans, Ubuntu, 'Helvetica Neue', Helvetica, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol'\";\n\nconst systemSelectionColor = '#4c92ff'; //OS X selection\n\n/**\n * The background color of the main window\n */\nconst backgroundColor = '#252525';\n\n/**\n * The background color of the \"papers\", \"dialogs\", etc...\n */\nconst canvasColor = '#303030';\n\n// GDevelop specific variables:\nconst gdevelopTheme = {\n  palette: {\n    canvasColor,\n  },\n  message: {\n    warning: '#ffa500',\n    error: '#f00',\n  },\n  toolbar: {\n    backgroundColor: backgroundColor,\n    separatorColor: '#303030',\n  },\n  closableTabs: {\n    fontFamily,\n    backgroundColor: backgroundColor,\n    textColor: '#878787',\n    selectedBackgroundColor: gdevelopDarkBlue,\n    selectedTextColor: almostWhite,\n    width: 200,\n    height: 32,\n    closeButtonWidth: 24,\n  },\n  imageThumbnail: {\n    selectedBorderColor: systemSelectionColor,\n  },\n  list: {\n    itemsBackgroundColor: '#494949',\n  },\n  listItem: {\n    groupBackgroundColor: backgroundColor,\n    groupTextColor: '#AAA',\n    deprecatedGroupTextColor: '#888',\n    separatorColor: '#303030',\n    selectedBackgroundColor: systemSelectionColor,\n    selectedTextColor: almostWhite,\n    errorTextColor: '#ff2e16',\n    warningTextColor: '#ffb032',\n    selectedErrorBackgroundColor: '#ff2e16',\n    selectedWarningBackgroundColor: '#ffb032',\n  },\n  emptyMessage: {\n    shadowColor: '#000',\n  },\n  logo: {\n    src: 'res/GD-logo.png',\n  },\n  mosaicRootClassName: 'mosaic-gd-dark-theme', // See Mosaic.css\n  eventsSheetRootClassName: 'gd-events-sheet-dark-theme', // See EventsSheet.css\n  tableRootClassName: 'gd-table-dark-theme', // See Table.css\n  markdownRootClassName: 'gd-markdown-dark-theme', // See Markdown.css\n  gdevelopIconsCSSFilter: '',\n};\n\n// Theme for Material-UI components\nconst muiTheme = createMuiTheme({\n  typography: {\n    fontFamily,\n  },\n  palette: {\n    type: 'dark',\n    common: { black: 'rgba(110, 42, 42, 1)', white: '#fff' },\n    background: {\n      paper: canvasColor,\n      default: backgroundColor,\n    },\n    primary: {\n      light: lighten(blue, 0.05),\n      main: blue,\n      dark: darken(blue, 0.05),\n      contrastText: '#fff',\n    },\n    secondary: {\n      light: lighten(almostWhite, 0.05),\n      main: almostWhite,\n      dark: darken(almostWhite, 0.05),\n      contrastText: '#000',\n    },\n    text: {\n      primary: lightWhite,\n      secondary: notSoWhite,\n      disabled: '#888888',\n      hint: notSoWhite,\n    },\n  },\n  overrides: {\n    MuiTypography: {\n      h6: {\n        // Make h6, used in Drawer title bars, use the same weight as tabs and mosaic windows\n        fontWeight: 400,\n      },\n    },\n    MuiInput: {\n      underline: {\n        '&:before': {\n          borderBottom: `1px solid #444444`,\n        },\n      },\n    },\n    MuiAppBar: {\n      colorPrimary: {\n        backgroundColor: gdevelopDarkBlue,\n      },\n    },\n    // Use a more visible color scheme for tabs:\n    MuiTabs: {\n      root: {\n        backgroundColor: gdevelopDarkBlue,\n      },\n    },\n    MuiTab: {\n      textColorPrimary: {\n        color: '#fff !important',\n      },\n    },\n    // Remove the web-ish \"pointer\" (hand) cursor from buttons\n    MuiButtonBase: {\n      root: {\n        cursor: 'default',\n      },\n    },\n    // Use non rounded buttons\n    MuiButton: {\n      root: {\n        borderRadius: 0,\n        fontWeight: 400, // Lower a bit the weight of buttons\n      },\n    },\n  },\n});\n\nconst theme: Theme = {\n  gdevelopTheme,\n  muiTheme,\n};\n\nexport default theme;\n","// @flow\nimport DarkTheme from './DarkTheme';\nimport DefaultTheme from './DefaultTheme';\nimport { type Theme } from './DefaultTheme';\n\n// To add a new theme:\n// * copy the folder of an existing one (DarkTheme for example),\n// * import it at the top of the file\n// * add it below:\nexport const themes = {\n  'GDevelop default': DefaultTheme,\n  Dark: DarkTheme,\n};\n\nexport const getTheme = (themeName: string): Theme =>\n  themes[themeName] || themes['GDevelop default'];\n\nexport type GDevelopTheme = $PropertyType<Theme, 'gdevelopTheme'>;\n","// @flow\nimport { Trans } from '@lingui/macro';\n\nimport * as React from 'react';\nimport RaisedButton from '../UI/RaisedButton';\nimport { Column, Line } from '../UI/Grid';\nimport { List, ListItem } from '../UI/List';\nimport Text from '../UI/Text';\nimport PlaceholderLoader from '../UI/PlaceholderLoader';\nimport ExamplesSearchbar from './ExamplesSearchbar';\nimport ExamplesInformation from './ExamplesInformation';\nimport Window from '../Utils/Window';\nimport { fuzzyOrEmptyFilter } from '../Utils/FuzzyOrEmptyFilter';\nimport optionalRequire from '../Utils/OptionalRequire.js';\nconst electron = optionalRequire('electron');\n\ntype ExtensionUsage = Array<{\n  fullName: string,\n  name: string,\n}>;\n\ntype ExampleInformation = {|\n  description: string,\n  usedExtensions: ExtensionUsage,\n|};\n\ntype SearchEnhancedExampleInformation = {|\n  ...ExampleInformation,\n  searchableDescription: string,\n|};\n\ntype Props = {|\n  exampleNames: ?Array<string>,\n  onCreateFromExample: string => void,\n|};\n\ntype State = {|\n  searchText: string,\n  chosenExtensionName: string,\n|};\n\nconst searchableExamplesInformation: {\n  [string]: SearchEnhancedExampleInformation,\n} = {};\nObject.keys(ExamplesInformation).forEach(exampleName => {\n  const exampleInformation = ExamplesInformation[exampleName];\n  searchableExamplesInformation[exampleName] = {\n    ...exampleInformation,\n    searchableDescription: exampleInformation.description\n      .replace(/ /g, '')\n      .toLowerCase(),\n  };\n});\n\nconst formatExampleName = (name: string) => {\n  if (!name.length) return '';\n\n  return name[0].toUpperCase() + name.substr(1).replace(/-/g, ' ');\n};\n\nconst getExampleInformation = (\n  name: string\n): SearchEnhancedExampleInformation => {\n  return (\n    searchableExamplesInformation[name] || {\n      description: '',\n      searchableDescription: '',\n      usedExtensions: [],\n    }\n  );\n};\n\nconst isUsingExtension = (\n  extensionUsage: ?ExtensionUsage,\n  extensionName: string\n) => {\n  return (\n    !extensionName ||\n    (extensionUsage &&\n      !!extensionUsage.find(usage => usage.name === extensionName))\n  );\n};\n\nexport default class LocalExamples extends React.Component<Props, State> {\n  state = {\n    searchText: '',\n    chosenExtensionName: '',\n  };\n\n  changeSearchText = (searchText: string) => {\n    this.setState({\n      searchText,\n      chosenExtensionName: '',\n    });\n  };\n\n  chooseExtensionName = (chosenExtensionName: string) => {\n    this.setState({\n      searchText: '',\n      chosenExtensionName,\n    });\n  };\n\n  _submitExample() {\n    const body = `Hi!\n\n  I'd like to submit a new example to be added to GDevelop.\n  Here is the link to download it: **INSERT the link to your game here, or add it as an attachment**.\n\n  I confirm that any assets can be used freely by anybody, including for commercial usage.\n  `;\n    Window.openExternalURL(\n      `https://github.com/4ian/GDevelop/issues/new?body=${encodeURIComponent(\n        body\n      )}&title=New%20example`\n    );\n  }\n\n  render() {\n    const { searchText, chosenExtensionName } = this.state;\n    const lowercaseSearchText = searchText.toLowerCase();\n\n    return (\n      <Column noMargin>\n        <Line noMargin>\n          <ExamplesSearchbar\n            value={searchText}\n            onChange={this.changeSearchText}\n            chosenExtensionName={chosenExtensionName}\n            onExtensionNameChosen={this.chooseExtensionName}\n          />\n        </Line>\n        <Line noMargin>\n          <Column expand noMargin>\n            <List>\n              {this.props.exampleNames &&\n                this.props.exampleNames.map(exampleName => {\n                  const exampleFullName = formatExampleName(exampleName);\n                  const exampleInformation = getExampleInformation(exampleName);\n                  if (\n                    (searchText &&\n                      (!fuzzyOrEmptyFilter(searchText, exampleFullName) &&\n                        exampleInformation.searchableDescription.indexOf(\n                          lowercaseSearchText\n                        ) === -1)) ||\n                    !isUsingExtension(\n                      exampleInformation.usedExtensions,\n                      chosenExtensionName\n                    )\n                  ) {\n                    return null;\n                  }\n\n                  return (\n                    <ListItem\n                      key={exampleName}\n                      primaryText={exampleFullName}\n                      secondaryText={exampleInformation.description}\n                      secondaryTextLines={2}\n                      onClick={() =>\n                        this.props.onCreateFromExample(exampleName)\n                      }\n                    />\n                  );\n                })}\n              {!this.props.exampleNames && <PlaceholderLoader />}\n            </List>\n            {!!electron && (\n              <Column expand>\n                <Text>\n                  <Trans>Want to contribute to the examples?</Trans>\n                </Text>\n                <Line alignItems=\"center\" justifyContent=\"center\">\n                  <RaisedButton\n                    label={<Trans>Submit your example</Trans>}\n                    onClick={this._submitExample}\n                  />\n                </Line>\n              </Column>\n            )}\n          </Column>\n        </Line>\n      </Column>\n    );\n  }\n}\n","// @flow\nconst fuzzyFilter = (searchText: string, key: string) => {\n  const compareString = key.toLowerCase();\n  searchText = searchText.toLowerCase();\n\n  let searchTextIndex = 0;\n  for (let index = 0; index < key.length; index++) {\n    if (compareString[index] === searchText[searchTextIndex]) {\n      searchTextIndex += 1;\n    }\n  }\n\n  return searchTextIndex === searchText.length;\n};\n\n/**\n * A fuzzy filter that still return true if the key is empty.\n */\nexport const fuzzyOrEmptyFilter = (searchText: string, key: string) => {\n  return !key || fuzzyFilter(searchText, key);\n};\n","import React from 'react';\nimport { ListItem } from '../UI/List';\nimport TextField, {\n  noMarginTextFieldInListItemTopOffset,\n} from '../UI/TextField';\nimport ThemeConsumer from '../UI/Theme/ThemeConsumer';\n\ntype Props = {|\n  group: gdObjectGroup,\n  style: Object,\n  onEdit: ?(gdObjectGroup) => void,\n  onEditName: () => void,\n  onDelete: () => void,\n  onRename: string => void,\n  editingName: boolean,\n  isGlobalGroup: boolean,\n  canSetAsGlobalGroup?: boolean,\n|};\n\nconst styles = {\n  groupName: {\n    overflow: 'hidden',\n    whiteSpace: 'nowrap',\n    textOverflow: 'ellipsis',\n  },\n  textField: {\n    top: noMarginTextFieldInListItemTopOffset,\n  },\n};\n\nexport default class GroupRow extends React.Component<Props, {||}> {\n  componentDidUpdate(prevProps) {\n    if (!prevProps.editingName && this.props.editingName) {\n      setTimeout(() => {\n        if (this.textField) this.textField.focus();\n      }, 100);\n    }\n  }\n\n  render() {\n    const { group, style, isGlobalGroup } = this.props;\n\n    const groupName = group.getName();\n    const label = this.props.editingName ? (\n      <TextField\n        id=\"rename-object-field\"\n        margin=\"none\"\n        ref={textField => (this.textField = textField)}\n        defaultValue={groupName}\n        onBlur={e => this.props.onRename(e.target.value)}\n        onKeyPress={event => {\n          if (event.charCode === 13) {\n            // enter key pressed\n            this.textField.blur();\n          }\n        }}\n        fullWidth\n        style={styles.textField}\n      />\n    ) : (\n      <div\n        style={{\n          ...styles.groupName,\n          fontStyle: isGlobalGroup ? 'italic' : undefined,\n          fontWeight: isGlobalGroup ? 'bold' : 'normal',\n        }}\n      >\n        {groupName}\n      </div>\n    );\n\n    return (\n      <ThemeConsumer>\n        {muiTheme => (\n          <ListItem\n            style={{\n              borderBottom: `1px solid ${muiTheme.listItem.separatorColor}`,\n              ...style,\n            }}\n            primaryText={label}\n            displayMenuButton\n            buildMenuTemplate={() => [\n              {\n                label: 'Edit group',\n                click: () => this.props.onEdit(group),\n              },\n              {\n                label: 'Set as Global group',\n                enabled: !this.props.isGlobalGroup,\n                click: () => this.props.onSetAsGlobalGroup(),\n                visible: this.props.canSetAsGlobalGroup !== false,\n              },\n              {\n                label: 'Rename',\n                enabled: !!this.props.onEdit,\n                click: () => this.props.onEditName(),\n              },\n              {\n                label: 'Delete',\n                enabled: !!this.props.onEdit,\n                click: () => this.props.onDelete(),\n              },\n            ]}\n            onClick={() => {\n              // It's essential to discard clicks when editing the name,\n              // to avoid weird opening of an editor when clicking on the\n              // text field.\n              if (!this.props.editingName) this.props.onEdit(group);\n            }}\n          />\n        )}\n      </ThemeConsumer>\n    );\n  }\n}\n","// @flow\nimport { Trans } from '@lingui/macro';\n\nimport React, { Component } from 'react';\nimport { AutoSizer, List } from 'react-virtualized';\nimport Background from '../UI/Background';\nimport SearchBar from '../UI/SearchBar';\nimport GroupRow from './GroupRow';\nimport newNameGenerator from '../Utils/NewNameGenerator';\nimport { showWarningBox } from '../UI/Messages/MessageBox';\nimport { AddListItem } from '../UI/ListCommonItem';\nimport { SortableContainer, SortableElement } from 'react-sortable-hoc';\nimport {\n  filterGroupsList,\n  enumerateGroups,\n} from '../ObjectsList/EnumerateObjects';\nimport {\n  type GroupWithContextList,\n  type GroupWithContext,\n} from '../ObjectsList/EnumerateObjects';\nimport { listItemWithoutIconHeight } from '../UI/List';\nimport Window from '../Utils/Window';\nimport { type UnsavedChanges } from '../MainFrame/UnsavedChangesContext';\n\n// TODO: This component should be updated to be implemented using SortableVirtualizedItemList,\n// so that drag'n'drop is identical to other lists (and to benefit from better typing + future improvements\n// in SortableVirtualizedItemList).\n\nconst styles = {\n  listContainer: {\n    flex: 1,\n  },\n};\n\nconst SortableGroupRow = SortableElement(props => {\n  const { style, ...otherProps } = props;\n  return (\n    <div style={style}>\n      <GroupRow {...otherProps} />\n    </div>\n  );\n});\n\nconst SortableAddGroupRow = SortableElement(props => {\n  const { style, ...otherProps } = props;\n  return (\n    <div style={style}>\n      <AddListItem {...otherProps} />\n    </div>\n  );\n});\n\nclass GroupsList extends Component<*, *> {\n  list: ?List;\n\n  forceUpdateGrid() {\n    if (this.list) this.list.forceUpdateGrid();\n  }\n\n  render() {\n    const { height, width, fullList } = this.props;\n\n    return (\n      <List\n        ref={list => (this.list = list)}\n        height={height}\n        rowCount={fullList.length}\n        rowHeight={listItemWithoutIconHeight}\n        rowRenderer={({ index, key, style }) => {\n          const groupWithContext = fullList[index];\n          if (groupWithContext.key === 'add-groups-row') {\n            return (\n              <SortableAddGroupRow\n                index={fullList.length}\n                key={key}\n                style={style}\n                disabled\n                onClick={this.props.onAddGroup}\n                primaryText={<Trans>Click to add a group</Trans>}\n              />\n            );\n          }\n\n          const nameBeingEdited =\n            this.props.renamedGroupWithScope &&\n            this.props.renamedGroupWithScope.group === groupWithContext.group &&\n            this.props.renamedGroupWithScope.global === groupWithContext.global;\n\n          return (\n            <SortableGroupRow\n              index={index}\n              key={groupWithContext.group.ptr}\n              group={groupWithContext.group}\n              style={style}\n              onEdit={\n                this.props.onEditGroup\n                  ? () => this.props.onEditGroup(groupWithContext.group)\n                  : undefined\n              }\n              onEditName={() => this.props.onEditName(groupWithContext)}\n              onDelete={() => this.props.onDelete(groupWithContext)}\n              onRename={newName =>\n                this.props.onRename(groupWithContext, newName)\n              }\n              editingName={nameBeingEdited}\n              isGlobalGroup={groupWithContext.global}\n              canSetAsGlobalGroup={this.props.canSetAsGlobalGroup}\n              onSetAsGlobalGroup={\n                groupWithContext.global\n                  ? undefined\n                  : () => this.props.onSetAsGlobalGroup(groupWithContext)\n              }\n            />\n          );\n        }}\n        width={width}\n      />\n    );\n  }\n}\n\nconst SortableGroupsList = SortableContainer(GroupsList, { withRef: true });\n\ntype State = {|\n  renamedGroupWithScope: ?GroupWithContext,\n  searchText: string,\n|};\n\ntype Props = {|\n  globalObjectGroups: gdObjectGroupsContainer,\n  objectGroups: gdObjectGroupsContainer,\n  onDeleteGroup: (groupWithContext: GroupWithContext, cb: Function) => void,\n  onEditGroup: gdObjectGroup => void,\n  canRenameGroup: (newName: string) => boolean,\n  onRenameGroup: (\n    groupWithContext: GroupWithContext,\n    newName: string,\n    cb: Function\n  ) => void,\n  onGroupAdded?: () => void,\n  onGroupRemoved?: () => void,\n  onGroupRenamed?: () => void,\n  canSetAsGlobalGroup?: boolean,\n  unsavedChanges?: UnsavedChanges,\n|};\n\nexport default class GroupsListContainer extends React.Component<Props, State> {\n  static defaultProps = {\n    onDeleteGroup: (groupWithContext: GroupWithContext, cb: Function) =>\n      cb(true),\n    onRenameGroup: (\n      groupWithContext: GroupWithContext,\n      newName: string,\n      cb: Function\n    ) => cb(true),\n  };\n\n  sortableList: any;\n  objectGroupsList: GroupWithContextList = [];\n  globalObjectGroupsList: GroupWithContextList = [];\n  state: State = {\n    renamedGroupWithScope: null,\n    searchText: '',\n  };\n\n  shouldComponentUpdate(nextProps: Props, nextState: State) {\n    // The component is costly to render, so avoid any re-rendering as much\n    // as possible.\n    // We make the assumption that no changes to groups list is made outside\n    // from the component.\n    // If a change is made, the component won't notice it: you have to manually\n    // call forceUpdate.\n\n    if (\n      this.state.renamedGroupWithScope !== nextState.renamedGroupWithScope ||\n      this.state.searchText !== nextState.searchText\n    )\n      return true;\n\n    if (\n      this.props.globalObjectGroups !== nextProps.globalObjectGroups ||\n      this.props.objectGroups !== nextProps.objectGroups\n    ) {\n      return true;\n    }\n\n    return false;\n  }\n\n  addGroup = () => {\n    const { globalObjectGroups, objectGroups } = this.props;\n\n    const name = newNameGenerator(\n      'Group',\n      name => objectGroups.has(name) || globalObjectGroups.has(name)\n    );\n\n    objectGroups.insertNew(name, objectGroups.count());\n    this._onObjectGroupModified();\n\n    if (this.props.onGroupAdded) {\n      this.props.onGroupAdded();\n    }\n  };\n\n  _onDelete = (groupWithContext: GroupWithContext) => {\n    const { group, global } = groupWithContext;\n    const { globalObjectGroups, objectGroups } = this.props;\n\n    const answer = Window.showConfirmDialog(\n      \"Are you sure you want to remove this group? This can't be undone.\"\n    );\n    if (!answer) return;\n\n    this.props.onDeleteGroup(groupWithContext, doRemove => {\n      if (!doRemove) return;\n\n      if (global) {\n        globalObjectGroups.remove(group.getName());\n      } else {\n        objectGroups.remove(group.getName());\n      }\n\n      this._onObjectGroupModified();\n      if (this.props.onGroupRemoved) {\n        this.props.onGroupRemoved();\n      }\n    });\n  };\n\n  _onEditName = (groupWithContext: GroupWithContext) => {\n    this.setState(\n      {\n        renamedGroupWithScope: groupWithContext,\n      },\n      () => this.sortableList.getWrappedInstance().forceUpdateGrid()\n    );\n  };\n\n  _onRename = (groupWithContext: GroupWithContext, newName: string) => {\n    const { group } = groupWithContext;\n    const { globalObjectGroups, objectGroups } = this.props;\n\n    this.setState({\n      renamedGroupWithScope: null,\n    });\n\n    if (group.getName() === newName) return;\n\n    if (objectGroups.has(newName) || globalObjectGroups.has(newName)) {\n      showWarningBox('Another object with this name already exists');\n      return;\n    }\n\n    if (this.props.canRenameGroup(newName)) {\n      this.props.onRenameGroup(groupWithContext, newName, doRename => {\n        if (!doRename) return;\n\n        group.setName(newName);\n\n        this._onObjectGroupModified();\n        if (this.props.onGroupRenamed) {\n          this.props.onGroupRenamed();\n        }\n      });\n    }\n  };\n\n  _onMove = (oldIndex: number, newIndex: number) => {\n    const { globalObjectGroups, objectGroups } = this.props;\n\n    const isInGroupsList = oldIndex < this.objectGroupsList.length;\n    if (isInGroupsList) {\n      objectGroups.move(\n        oldIndex,\n        Math.min(newIndex, this.objectGroupsList.length - 1)\n      );\n    } else {\n      const globalObjectGroupsOldIndex =\n        oldIndex - this.objectGroupsList.length;\n      const globalObjectGroupsNewIndex =\n        newIndex - this.objectGroupsList.length;\n\n      globalObjectGroups.move(\n        globalObjectGroupsOldIndex,\n        Math.min(\n          globalObjectGroupsNewIndex,\n          this.globalObjectGroupsList.length - 1\n        )\n      );\n    }\n\n    this._onObjectGroupModified();\n    this.sortableList.getWrappedInstance().forceUpdateGrid();\n  };\n\n  _setAsGlobalGroup = (groupWithContext: GroupWithContext) => {\n    const { group } = groupWithContext;\n    const { globalObjectGroups, objectGroups } = this.props;\n\n    const groupName = group.getName();\n\n    if (globalObjectGroups.has(groupName)) {\n      showWarningBox(\n        'A global object with this name already exists. Please change the object name before setting it as a global object'\n      );\n      return;\n    }\n\n    const answer = Window.showConfirmDialog(\n      \"This group will be loaded and available in all the scenes. This is only recommended for groups that you reuse a lot and can't be undone. Make this group global?\"\n    );\n    if (!answer) return;\n\n    globalObjectGroups.insert(group, globalObjectGroups.count());\n    objectGroups.remove(groupName);\n    this._onObjectGroupModified();\n  };\n\n  _onObjectGroupModified = () => {\n    if (this.props.unsavedChanges)\n      this.props.unsavedChanges.triggerUnsavedChanges();\n    this.forceUpdate();\n  };\n\n  render() {\n    const { globalObjectGroups, objectGroups } = this.props;\n    const { searchText } = this.state;\n\n    const objectGroupsList: GroupWithContextList = enumerateGroups(\n      objectGroups\n    ).map(group => ({ group, global: false }));\n    const globalObjectGroupsList: GroupWithContextList = enumerateGroups(\n      globalObjectGroups\n    ).map(group => ({ group, global: true }));\n    this.objectGroupsList = filterGroupsList(objectGroupsList, searchText);\n    this.globalObjectGroupsList = filterGroupsList(\n      globalObjectGroupsList,\n      searchText\n    );\n    const allGroupsList = filterGroupsList(\n      [...objectGroupsList, ...globalObjectGroupsList],\n      searchText\n    );\n    const fullList = allGroupsList.concat({\n      key: 'add-groups-row',\n      object: null,\n    });\n\n    // Force List component to be mounted again if globalObjectGroups or objectGroups\n    // has been changed. Avoid accessing to invalid objects that could\n    // crash the app.\n    const listKey = objectGroups.ptr + ';' + globalObjectGroups.ptr;\n\n    return (\n      <Background>\n        <div style={styles.listContainer}>\n          <AutoSizer>\n            {({ height, width }) => (\n              <SortableGroupsList\n                key={listKey}\n                ref={sortableList => (this.sortableList = sortableList)}\n                fullList={fullList}\n                width={width}\n                height={height}\n                renamedGroupWithScope={this.state.renamedGroupWithScope}\n                onEditGroup={this.props.onEditGroup}\n                onAddGroup={this.addGroup}\n                onEditName={this._onEditName}\n                onDelete={this._onDelete}\n                onRename={this._onRename}\n                canSetAsGlobalGroup={this.props.canSetAsGlobalGroup}\n                onSetAsGlobalGroup={this._setAsGlobalGroup}\n                onSortEnd={({ oldIndex, newIndex }) =>\n                  this._onMove(oldIndex, newIndex)\n                }\n                helperClass=\"sortable-helper\"\n                distance={20}\n              />\n            )}\n          </AutoSizer>\n        </div>\n        <SearchBar\n          value={searchText}\n          onRequestSearch={() => {}}\n          onChange={text =>\n            this.setState({\n              searchText: text,\n            })\n          }\n        />\n      </Background>\n    );\n  }\n}\n","// @flow\nimport * as React from 'react';\nimport { I18n } from '@lingui/react';\nimport MUITextField from '@material-ui/core/TextField';\nimport { type MessageDescriptor } from '../Utils/i18n/MessageDescriptor.flow';\nimport { MarkdownText } from './MarkdownText';\n\ntype ValueProps =\n  // Support \"text\" and \"password\" type:\n  | {|\n      type?: 'text' | 'password',\n      value: string,\n      onChange?: (\n        event: {| target: {| value: string |} |},\n        text: string\n      ) => void,\n    |}\n  // Support \"number\" type (note that onChange returns a string):\n  | {|\n      type: 'number',\n      value: number | string,\n      onChange?: (event: {||}, value: string) => void,\n    |}\n  // Support an \"uncontrolled\" field:\n  | {| defaultValue: string |}\n  // Support an empty field with just a hint text:\n  | {| hintText?: React.Node |};\n\n// We support a subset of the props supported by Material-UI v0.x TextField\n// They should be self descriptive - refer to Material UI docs otherwise.\ntype Props = {|\n  // Value and change handling:\n  ...ValueProps,\n\n  // DOM events:\n  onFocus?: ({\n    currentTarget: {\n      value: string,\n    },\n    preventDefault: () => void,\n  }) => void,\n  onBlur?: ({\n    currentTarget: {\n      value: string,\n    },\n  }) => void,\n\n  // Advanced DOM events, for exceptional usage:\n  onClick?: () => void,\n  onKeyPress?: (event: SyntheticKeyboardEvent<>) => void,\n  onKeyUp?: (event: SyntheticKeyboardEvent<>) => void,\n  onKeyDown?: (event: SyntheticKeyboardEvent<>) => void,\n\n  // Error handling:\n  errorText?: React.Node,\n\n  // Labels:\n  disabled?: boolean,\n  floatingLabelFixed?: boolean,\n  floatingLabelText?: React.Node,\n  name?: string,\n  hintText?: MessageDescriptor,\n  helperMarkdownText?: ?string,\n  id?: string,\n\n  // Keyboard focus:\n  autoFocus?: boolean,\n\n  // Number text field:\n  precision?: number,\n  max?: number,\n  min?: number,\n  step?: number,\n\n  // Support for multiline:\n  multiLine?: boolean,\n  rows?: number,\n  rowsMax?: number,\n\n  // Styling:\n  margin?: 'none' | 'dense',\n  fullWidth?: boolean,\n  style?: {|\n    fontSize?: 14 | 18,\n    fontStyle?: 'normal' | 'italic',\n    width?: number | '100%',\n    flex?: 1,\n    top?: number,\n    padding?: number,\n  |},\n  inputStyle?: {|\n    // Allow to customize color (replace by color prop?) // TO VERIFY\n    color?: string,\n    WebkitTextFillColor?: string,\n\n    // Allow to display monospaced font\n    fontFamily?: '\"Lucida Console\", Monaco, monospace',\n    lineHeight?: 1.4 | 1.5,\n    padding?: 0,\n  |},\n  underlineFocusStyle?: {| borderColor: string |}, // TODO\n  underlineShow?: boolean,\n|};\n\n/**\n * Compute the `variant`, `margin` and `hiddenLabel` props for a material-ui `TextField`\n * to give it the proper style according to its usage.\n *\n * 1. A traditional `TextField` is by default \"filled\"\n *    (see material-ui component doc: https://material-ui.com/components/text-fields/\n *     and [Material Design specification](https://material.io/components/text-fields/#specs)).\n *\n *   The filled background gives them more emphasize compared compared to a single underline\n *   (as done in previous GDevelop versions). They have a label indicating what they refer to.\n *\n * 2. Sometimes, a floating label would not provide more information and is considered to be\n *   obvious (thanks to the existing value, dialog title or button label).\n *\n *   In this case, not specifying a label is fine (`floatingLabelText` is undefined or empty).\n *   This will lead to a filled text field without the extra space for the label.\n *\n *   A `placeholder` should still be passed so that the user can know what the field is about\n *     when not filled.\n *   Example: this is particularly adapted to file/folder pickers (see `LocalFilePicker`,\n *     `LocalFolderPicker`) or a `SearchPanel`.\n *\n * 3. `TextField` in `MiniToolbar` are usually less changed by the user than other text fields\n *   (for example, they are the animation name or the object name in a Sprite editor.\n *   These are not changed a lot compared to behaviours or object properties).\n *\n *   They also are already in a MiniToolbar that has an \"emphasis\" with the slightly\n *   different background color of `MiniToolbar`. Finally, `MiniToolbar` is also small in height.\n *\n *   In these cases, use `none` for `margin`.\n *   This will generate a text field without filled background (just an underline).\n *\n * 4. `TextField` can be used with `margin=\"none\"` and also the underline hidden,\n *   in the very special case of an embedded text field in another form control (like `SearchBar`).\n */\nexport const computeTextFieldStyleProps = (props: {\n  margin?: 'none' | 'dense',\n  floatingLabelText?: React.Node,\n}) => {\n  return {\n    // Use \"filled\" variant by default, unless `margin` is \"none\" (see 1. and 2.)\n    variant: props.margin === 'none' ? 'standard' : 'filled',\n    // Use \"dense\" fields by default, unless `margin` is \"none\" (see 3.)\n    margin: props.margin === 'none' ? 'none' : 'dense',\n    // For variant \"standard\", if there is no label, no extra space is taken. For variant \"filled\",\n    // even when no label is passed, there is a space for it. Remove this space if no\n    // label is provided. (see 2.)\n    hiddenLabel: props.margin !== 'none' && !props.floatingLabelText,\n  };\n};\n\n/**\n * A text field based on Material-UI text field.\n */\nexport default class TextField extends React.Component<Props, {||}> {\n  _input = React.createRef<HTMLInputElement>();\n\n  focus() {\n    if (this._input.current) {\n      this._input.current.focus();\n    }\n  }\n\n  blur() {\n    if (this._input.current) {\n      this._input.current.blur();\n    }\n  }\n\n  getInputNode(): ?HTMLInputElement {\n    if (this._input.current) {\n      return this._input.current;\n    }\n\n    return null;\n  }\n\n  render() {\n    const { props } = this;\n    const onChange = props.onChange || undefined;\n\n    const helperText = props.helperMarkdownText ? (\n      <MarkdownText source={props.helperMarkdownText} />\n    ) : null;\n\n    return (\n      <I18n>\n        {({ i18n }) => (\n          <MUITextField\n            // Value and change handling:\n            type={props.type !== undefined ? props.type : undefined}\n            value={props.value !== undefined ? props.value : undefined}\n            defaultValue={\n              props.defaultValue !== undefined ? props.defaultValue : undefined\n            }\n            onChange={\n              onChange\n                ? event => onChange(event, event.target.value)\n                : undefined\n            }\n            // Error handling:\n            error={!!props.errorText}\n            helperText={props.errorText || helperText}\n            disabled={props.disabled}\n            InputLabelProps={{\n              shrink: props.floatingLabelFixed ? true : undefined,\n            }}\n            label={props.floatingLabelText}\n            name={props.name}\n            placeholder={props.hintText ? i18n._(props.hintText) : undefined}\n            id={props.id}\n            // Keyboard focus:\n            autoFocus={props.autoFocus}\n            // Multiline:\n            multiline={props.multiLine}\n            rows={props.rows}\n            rowsMax={props.rowsMax}\n            // Styling:\n            {...computeTextFieldStyleProps(props)}\n            fullWidth={props.fullWidth}\n            InputProps={{\n              disableUnderline:\n                props.underlineShow === undefined\n                  ? false\n                  : !props.underlineShow,\n              style: {\n                fontSize: props.style ? props.style.fontSize : undefined,\n                fontStyle: props.style ? props.style.fontStyle : undefined,\n                ...props.inputStyle,\n              },\n              inputProps: {\n                onKeyPress: props.onKeyPress,\n                onKeyUp: props.onKeyUp,\n                onKeyDown: props.onKeyDown,\n                onClick: props.onClick,\n                // Number field props:\n                max: props.max,\n                min: props.min,\n                step: props.step,\n              },\n            }}\n            style={\n              props.style\n                ? {\n                    width: props.style.width || undefined,\n                    flex: props.style.flex || undefined,\n                    top: props.style.top || undefined,\n                  }\n                : undefined\n            }\n            onFocus={props.onFocus}\n            onBlur={props.onBlur}\n            inputRef={this._input}\n          />\n        )}\n      </I18n>\n    );\n  }\n}\n\n// The \"top\" offset to add to the position of the TextField when\n// it's used inside a ListItem \"primaryText\"\nexport const noMarginTextFieldInListItemTopOffset = -7;\n","// @flow\nimport { t } from '@lingui/macro';\nimport React, { PureComponent } from 'react';\nimport { Toolbar, ToolbarGroup } from '../UI/Toolbar';\nimport ToolbarIcon from '../UI/ToolbarIcon';\nimport ToolbarSeparator from '../UI/ToolbarSeparator';\nimport ElementWithMenu from '../UI/Menu/ElementWithMenu';\nimport Window from '../Utils/Window';\nimport { I18n } from '@lingui/react';\nimport { ResponsiveWindowMeasurer } from '../UI/Reponsive/ResponsiveWindowMeasurer';\n\ntype Props = {\n  showProjectIcons: boolean,\n  hasProject: boolean,\n  toggleProjectManager: () => void,\n  requestUpdate: ?() => void,\n  simulateUpdateDownloaded: ?() => void,\n  simulateUpdateAvailable: ?() => void,\n  exportProject: Function,\n};\n\ntype State = {\n  editorToolbar: any,\n};\n\nexport class MainFrameToolbar extends PureComponent<Props, State> {\n  state = {\n    editorToolbar: null,\n  };\n\n  isDev = Window.isDev();\n\n  setEditorToolbar(editorToolbar: any) {\n    this.setState({\n      editorToolbar,\n    });\n  }\n\n  render() {\n    return (\n      <ResponsiveWindowMeasurer>\n        {windowWidth => (\n          <I18n>\n            {({ i18n }) => (\n              <Toolbar>\n                <ToolbarGroup firstChild>\n                  {this.props.showProjectIcons && (\n                    <ToolbarIcon\n                      onClick={this.props.toggleProjectManager}\n                      src=\"res/ribbon_default/projectManager32.png\"\n                      disabled={!this.props.hasProject}\n                      tooltip={t`Project manager`}\n                    />\n                  )}\n                  {this.props.showProjectIcons && (\n                    <ToolbarIcon\n                      onClick={this.props.exportProject}\n                      src=\"res/ribbon_default/export32.png\"\n                      disabled={!this.props.hasProject}\n                      tooltip={t`Export the game (Web, Android, iOS...)`}\n                    />\n                  )}\n                  {this.isDev && (\n                    <ElementWithMenu\n                      element={\n                        <ToolbarIcon src=\"res/ribbon_default/bug32.png\" />\n                      }\n                      buildMenuTemplate={() => [\n                        {\n                          label: 'Request update from external editor',\n                          disabled: !this.props.requestUpdate,\n                          click: () => {\n                            this.props.requestUpdate &&\n                              this.props.requestUpdate();\n                          },\n                        },\n                        {\n                          label: 'Simulate update downloaded',\n                          disabled: !this.props.simulateUpdateDownloaded,\n                          click: () => {\n                            this.props.simulateUpdateDownloaded &&\n                              this.props.simulateUpdateDownloaded();\n                          },\n                        },\n                        {\n                          label: 'Simulate update available',\n                          disabled: !this.props.simulateUpdateAvailable,\n                          click: () => {\n                            this.props.simulateUpdateAvailable &&\n                              this.props.simulateUpdateAvailable();\n                          },\n                        },\n                      ]}\n                    />\n                  )}\n                  <ToolbarSeparator />\n                </ToolbarGroup>\n                {this.state.editorToolbar || <ToolbarGroup />}\n              </Toolbar>\n            )}\n          </I18n>\n        )}\n      </ResponsiveWindowMeasurer>\n    );\n  }\n}\n\nexport default MainFrameToolbar;\n","// @flow\nimport * as React from 'react';\nimport MUIList from '@material-ui/core/List';\nimport MUIListItem from '@material-ui/core/ListItem';\nimport MUIListItemIcon from '@material-ui/core/ListItemIcon';\nimport MUIListItemText from '@material-ui/core/ListItemText';\nimport MUIListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction';\nimport ExpandLess from '@material-ui/icons/ExpandLess';\nimport ExpandMore from '@material-ui/icons/ExpandMore';\nimport IconButton from '@material-ui/core/IconButton';\nimport Refresh from '@material-ui/icons/Refresh';\nimport MoreVert from '@material-ui/icons/MoreVert';\nimport OpenInNew from '@material-ui/icons/OpenInNew';\nimport Remove from '@material-ui/icons/Remove';\nimport ElementWithMenu from './Menu/ElementWithMenu';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport Add from '@material-ui/icons/Add';\nimport Search from '@material-ui/icons/Search';\nimport { type MenuItemTemplate } from './Menu/Menu.flow';\n\nconst useDenseLists = true;\nexport const listItemWith32PxIconHeight = 40;\nexport const listItemWithoutIconHeight = 37;\n\ntype DoubleClickMouseEvent = {| button: 0 | 1 | 2 |};\n\n// Support for a bunch of different secondary actions\ntype ListItemRightButtonProps =\n  | {|\n      displayReloadButton: boolean,\n      reloadButtonTooltip: string,\n      onReload?: () => void,\n    |}\n  | {|\n      displayMenuButton: boolean,\n      buildMenuTemplate: () => Array<MenuItemTemplate>,\n    |}\n  | {|\n      displayLinkButton: boolean,\n      onOpenLink: () => void,\n    |}\n  | {|\n      displayRemoveButton: true,\n      onRemove: () => void,\n    |}\n  | {|\n      displayAddIcon: true,\n    |}\n  | {|\n      displaySearchIcon: true,\n    |}\n  | {||};\n\n// We support a subset of the props supported by Material-UI v0.x ListItem\n// They should be self descriptive - refer to Material UI docs otherwise.\ntype ListItemProps = {|\n  onClick?: () => void,\n  onDoubleClick?: (event: DoubleClickMouseEvent) => void,\n  primaryText: ?React.Node,\n  secondaryText?: React.Node,\n  selected?: boolean,\n  autoGenerateNestedIndicator?: boolean, // TODO: Rename?\n  renderNestedItems?: () => Array<React$Element<any> | null>,\n  open?: boolean,\n  initiallyOpen?: boolean,\n  disabled?: boolean,\n\n  nestedListStyle?: {|\n    padding: 0,\n  |},\n\n  style?: {|\n    color?: string,\n    backgroundColor?: string,\n    borderBottom?: string,\n    opacity?: number,\n  |},\n\n  leftIcon?: React.Node,\n  ...ListItemRightButtonProps,\n\n  secondaryTextLines?: 1 | 2,\n|};\n\ntype ListItemState = {|\n  isOpen: boolean,\n|};\n\n/**\n * A ListItem to be used in a List.\n *\n * Also used outside of a List by virtualized lists.\n */\nexport class ListItem extends React.Component<ListItemProps, ListItemState> {\n  state = {\n    isOpen: !!this.props.initiallyOpen,\n  };\n  _elementWithMenu: ?ElementWithMenu;\n\n  _renderListItemSecondaryAction = () => {\n    const { props } = this;\n    if (props.displayReloadButton) {\n      return (\n        <MUIListItemSecondaryAction>\n          <Tooltip title={props.reloadButtonTooltip}>\n            <IconButton edge=\"end\" aria-label=\"reload\" onClick={props.onReload}>\n              <Refresh />\n            </IconButton>\n          </Tooltip>\n        </MUIListItemSecondaryAction>\n      );\n    }\n    if (props.buildMenuTemplate) {\n      return props.displayMenuButton ? (\n        <MUIListItemSecondaryAction>\n          <ElementWithMenu\n            ref={elementWithMenu => (this._elementWithMenu = elementWithMenu)}\n            element={\n              <IconButton edge=\"end\" aria-label=\"menu\">\n                <MoreVert />\n              </IconButton>\n            }\n            buildMenuTemplate={props.buildMenuTemplate}\n          />\n        </MUIListItemSecondaryAction>\n      ) : (\n        <ElementWithMenu\n          ref={elementWithMenu => (this._elementWithMenu = elementWithMenu)}\n          element={\n            <div /> /* We still need a dummy div for context menu placement */\n          }\n          buildMenuTemplate={props.buildMenuTemplate}\n        />\n      );\n    }\n    if (props.displayLinkButton) {\n      return (\n        <MUIListItemSecondaryAction>\n          <IconButton\n            edge=\"end\"\n            aria-label=\"open link\"\n            onClick={props.onOpenLink}\n          >\n            <OpenInNew />\n          </IconButton>\n        </MUIListItemSecondaryAction>\n      );\n    }\n    if (props.displayRemoveButton) {\n      return (\n        <MUIListItemSecondaryAction>\n          <IconButton edge=\"end\" aria-label=\"remove\" onClick={props.onRemove}>\n            <Remove />\n          </IconButton>\n        </MUIListItemSecondaryAction>\n      );\n    }\n\n    return null;\n  };\n\n  _openContextMenu = (event: any) => {\n    if (this._elementWithMenu) {\n      this._elementWithMenu.open(event);\n    }\n  };\n\n  render() {\n    const { props, state } = this;\n    const { renderNestedItems } = props;\n\n    if (!renderNestedItems) {\n      return (\n        <MUIListItem\n          button\n          dense={useDenseLists}\n          disableRipple\n          ContainerComponent={\n            'div' /* Otherwise, when ListItemSecondaryAction is defined, we would get a li, that is not playing well in virtualized list, that are using ListItem without List */\n          }\n          onClick={props.onClick}\n          onDoubleClick={props.onDoubleClick}\n          disabled={props.disabled}\n          selected={props.selected}\n          style={props.style}\n          onContextMenu={\n            props.buildMenuTemplate ? this._openContextMenu : undefined\n          }\n          alignItems={props.secondaryTextLines === 2 ? 'flex-start' : undefined}\n        >\n          {props.leftIcon && (\n            <MUIListItemIcon>{props.leftIcon}</MUIListItemIcon>\n          )}\n          <MUIListItemText\n            primary={props.primaryText}\n            secondary={props.secondaryText}\n          />\n          {this._renderListItemSecondaryAction()}\n          {props.displayAddIcon && <Add />}\n          {props.displaySearchIcon && <Search />}\n        </MUIListItem>\n      );\n    } else {\n      const isOpen = props.open === undefined ? state.isOpen : props.open;\n      return (\n        <React.Fragment>\n          <MUIListItem\n            button\n            dense={useDenseLists}\n            disableRipple\n            onClick={() => {\n              this.setState(state => ({ isOpen: !state.isOpen }));\n              if (props.onClick) {\n                props.onClick();\n              }\n            }}\n            disabled={props.disabled}\n            style={props.style}\n          >\n            {props.leftIcon && (\n              <MUIListItemIcon>{props.leftIcon}</MUIListItemIcon>\n            )}\n            <MUIListItemText\n              primary={props.primaryText}\n              secondary={props.secondaryText}\n            />\n            {props.autoGenerateNestedIndicator ? (\n              isOpen ? (\n                <ExpandLess />\n              ) : (\n                <ExpandMore />\n              )\n            ) : null}\n            {this._renderListItemSecondaryAction()}\n          </MUIListItem>\n          {isOpen && (\n            <MUIList\n              component=\"div\"\n              disablePadding\n              style={{\n                paddingLeft: 16,\n                ...props.nestedListStyle,\n              }}\n              dense={useDenseLists}\n            >\n              {renderNestedItems()}\n            </MUIList>\n          )}\n        </React.Fragment>\n      );\n    }\n  }\n}\n\n// We support a subset of the props supported by Material-UI v0.x List\n// They should be self descriptive - refer to Material UI docs otherwise.\ntype ListProps = {|\n  children: React.Node,\n  style?: {|\n    overflowY?: 'scroll',\n    flex?: 1,\n    padding?: number,\n  |},\n|};\n\n/**\n * List based on Material-UI List.\n */\nexport class List extends React.Component<ListProps, {||}> {\n  render() {\n    return (\n      <MUIList style={this.props.style} dense={useDenseLists}>\n        {this.props.children}\n      </MUIList>\n    );\n  }\n}\n","// @flow\nimport * as React from 'react';\nimport ThemeContext from '../UI/Theme/ThemeContext';\nimport Window from '../Utils/Window';\nimport { type FileMetadata } from '../ProjectsStorage';\nimport UnsavedChangesContext from './UnsavedChangesContext';\n\ntype Props = {|\n  fileMetadata: ?FileMetadata,\n|};\n\n/**\n * Update the title bar according to the project and the current theme.\n */\nexport default function ProjectTitlebar({ fileMetadata }: Props) {\n  const gdevelopTheme = React.useContext(ThemeContext);\n  const unsavedChanges = React.useContext(UnsavedChangesContext);\n  const hasUnsavedChanges = unsavedChanges.hasUnsavedChanges;\n\n  React.useEffect(\n    () => {\n      const title = [\n        'GDevelop 5',\n        fileMetadata\n          ? fileMetadata.fileIdentifier + (hasUnsavedChanges ? ' *' : '')\n          : '',\n      ]\n        .filter(Boolean)\n        .join(' - ');\n\n      Window.setTitle(title);\n      Window.setTitleBarColor(gdevelopTheme.toolbar.backgroundColor);\n    },\n    [fileMetadata, hasUnsavedChanges, gdevelopTheme.toolbar.backgroundColor]\n  );\n\n  return null;\n}\n","// @flow\nimport { Trans } from '@lingui/macro';\n\nimport React from 'react';\nimport SelectField from '../../UI/SelectField';\nimport FlatButton from '../../UI/FlatButton';\nimport SelectOption from '../../UI/SelectOption';\nimport Toggle from '../../UI/Toggle';\nimport Dialog from '../../UI/Dialog';\nimport { Column, Line } from '../../UI/Grid';\nimport { themes } from '../../UI/Theme';\nimport { getAllThemes } from '../../CodeEditor/Theme';\nimport Window from '../../Utils/Window';\nimport PreferencesContext, { allAlertMessages } from './PreferencesContext';\nimport Text from '../../UI/Text';\nimport { ResponsiveLineStackLayout } from '../../UI/Layout';\nimport { Tabs, Tab } from '../../UI/Tabs';\n\ntype Props = {|\n  onClose: Function,\n|};\n\nconst PreferencesDialog = ({ onClose }: Props) => {\n  const [currentTab, setCurrentTab] = React.useState('preferences');\n  const {\n    values,\n    setThemeName,\n    setCodeEditorThemeName,\n    setAutoDownloadUpdates,\n    showAlertMessage,\n    setAutoDisplayChangelog,\n    setEventsSheetShowObjectThumbnails,\n    setAutosaveOnPreview,\n    setUseNewInstructionEditorDialog,\n    setUseGDJSDevelopmentWatcher,\n    setEventsSheetUseAssignmentOperators,\n  } = React.useContext(PreferencesContext);\n\n  return (\n    <Dialog\n      actions={[\n        <FlatButton\n          key=\"close\"\n          label={<Trans>Close</Trans>}\n          primary={false}\n          onClick={onClose}\n        />,\n      ]}\n      onRequestClose={onClose}\n      cannotBeDismissed={true}\n      open\n      title={<Trans>GDevelop Preferences</Trans>}\n      maxWidth=\"sm\"\n      noMargin\n    >\n      <Tabs value={currentTab} onChange={setCurrentTab}>\n        <Tab label={<Trans>Preferences</Trans>} value=\"preferences\" />\n        <Tab label={<Trans>Hints &amp; explanations</Trans>} value=\"hints\" />\n      </Tabs>\n      {currentTab === 'preferences' && (\n        <Column>\n          <Text size=\"title\">\n            <Trans>Appearance</Trans>\n          </Text>\n          <ResponsiveLineStackLayout noMargin>\n            <SelectField\n              floatingLabelText={<Trans>UI Theme</Trans>}\n              value={values.themeName}\n              onChange={(e, i, value: string) => setThemeName(value)}\n              fullWidth\n            >\n              {Object.keys(themes).map(themeName => (\n                <SelectOption\n                  value={themeName}\n                  primaryText={themeName}\n                  key={themeName}\n                />\n              ))}\n            </SelectField>\n            <SelectField\n              floatingLabelText={<Trans>Code editor Theme</Trans>}\n              value={values.codeEditorThemeName}\n              onChange={(e, i, value: string) => setCodeEditorThemeName(value)}\n              fullWidth\n            >\n              {getAllThemes().map(codeEditorTheme => (\n                <SelectOption\n                  value={codeEditorTheme.themeName}\n                  primaryText={codeEditorTheme.name}\n                  key={codeEditorTheme.themeName}\n                />\n              ))}\n            </SelectField>\n          </ResponsiveLineStackLayout>\n          <Line noMargin>\n            <Text>\n              <Trans>You can contribute and create your own themes: </Trans>\n            </Text>\n            <FlatButton\n              label={<Trans>Learn more</Trans>}\n              onClick={() => {\n                Window.openExternalURL(\n                  'https://github.com/4ian/GDevelop/tree/master/newIDE#theming'\n                );\n              }}\n            />\n          </Line>\n          <Text size=\"title\">\n            <Trans>Updates</Trans>\n          </Text>\n          <Line>\n            <Toggle\n              onToggle={(e, check) => setAutoDownloadUpdates(check)}\n              toggled={values.autoDownloadUpdates}\n              labelPosition=\"right\"\n              label={\n                <Trans>Auto download and install updates (recommended)</Trans>\n              }\n            />\n          </Line>\n          <Line>\n            <Toggle\n              onToggle={(e, check) => setAutoDisplayChangelog(check)}\n              toggled={values.autoDisplayChangelog}\n              labelPosition=\"right\"\n              label={\n                <Trans>\n                  Display What's New when a new version is launched\n                  (recommended)\n                </Trans>\n              }\n            />\n          </Line>\n          <Text size=\"title\">\n            <Trans>Events Sheet</Trans>\n          </Text>\n          <Line>\n            <Toggle\n              onToggle={(e, check) => setEventsSheetShowObjectThumbnails(check)}\n              toggled={values.eventsSheetShowObjectThumbnails}\n              labelPosition=\"right\"\n              label={<Trans>Display object thumbnails in Events Sheets</Trans>}\n            />\n          </Line>\n          <Line>\n            <Toggle\n              onToggle={(e, check) =>\n                setEventsSheetUseAssignmentOperators(check)\n              }\n              toggled={values.eventsSheetUseAssignmentOperators}\n              labelPosition=\"right\"\n              label={\n                <Trans>Display assignment operators in Events Sheets</Trans>\n              }\n            />\n          </Line>\n          <Line>\n            <Toggle\n              onToggle={(e, check) => setUseNewInstructionEditorDialog(check)}\n              toggled={values.useNewInstructionEditorDialog}\n              labelPosition=\"right\"\n              label={<Trans>Use the new action/condition editor</Trans>}\n            />\n          </Line>\n          <Text size=\"title\">\n            <Trans>Advanced</Trans>\n          </Text>\n          <Line>\n            <Toggle\n              onToggle={(e, check) => setAutosaveOnPreview(check)}\n              toggled={values.autosaveOnPreview}\n              labelPosition=\"right\"\n              label={<Trans>Auto-save project on Preview</Trans>}\n            />\n          </Line>\n          {Window.isDev() && (\n            <Line>\n              <Toggle\n                onToggle={(e, check) => setUseGDJSDevelopmentWatcher(check)}\n                toggled={values.useGDJSDevelopmentWatcher}\n                labelPosition=\"right\"\n                label={\n                  <Trans>\n                    Watch changes in game engine (GDJS) sources and auto import\n                    them (dev only)\n                  </Trans>\n                }\n              />\n            </Line>\n          )}\n        </Column>\n      )}\n      {currentTab === 'hints' && (\n        <Column>\n          <Line>\n            <Column noMargin>\n              <Text>\n                <Trans>Warn/show explanation about:</Trans>\n              </Text>\n              {allAlertMessages.map(({ key, label }) => (\n                <Line>\n                  <Toggle\n                    onToggle={(e, check) => showAlertMessage(key, check)}\n                    toggled={!values.hiddenAlertMessages[key]}\n                    labelPosition=\"right\"\n                    label={label}\n                  />\n                </Line>\n              ))}\n            </Column>\n          </Line>\n        </Column>\n      )}\n    </Dialog>\n  );\n};\n\nexport default PreferencesDialog;\n"],"sourceRoot":""}