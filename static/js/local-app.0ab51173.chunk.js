(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{1676:function(e,t,n){"use strict";(function(e){var r=n(12),o=n(26),a=n(65),i=n(64),l=n(66),c=n(1677),u=n(25),s=n.n(u),p=n(9),d=e.gd,m=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(a.a)(this,Object(i.a)(t).call(this,e))).editorOpened=!1,n.lastShowCommandDate=0,n.sendingUpdate=!1,n.editor=null,n._serializedObject=null,n._hideIfNotJustShown=function(){Date.now()-n.lastShowCommandDate<100?console.info("The editor is not hidden because it receive a `show` command less than 100ms ago."):p.a.hide()},n.sendUpdate=function(){if(console.log("Sending update to server editor"),n.state.loading)console.warn("Already loading an update, abort send");else if(n.sendingUpdate)console.warn("Already sending an update, abort send");else if(n.editor){n.sendingUpdate=!0;var e=n.editor.getSerializedElements();for(var t in e)e.hasOwnProperty(t)&&n.bridge.send("update",e[t],t);n.sendingUpdate=!1,console.log("Update send done")}else console.error("No children editor to use to get the updated edited element")},n.editObject=function(e){n.sendUpdate(),n.bridge.send("editObject",e.getName())},n.requestUpdate=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1]?"requestForcedUpdate":"requestUpdate";n.bridge.send(t,void 0,e)},n._onUpdateReceived=function(e,t){console.log("Received project update from server"),""===t?n.setState({loading:!0},function(){return setTimeout(function(){n._serializedObject&&n._serializedObject.delete();var t=performance.now();n._serializedObject=d.Serializer.fromJSObject(e);var r=performance.now();console.log("Call to gd.Serializer.fromJSObject took "+(r-t)+" milliseconds."),n.editor.loadFromSerializedProject(n._serializedObject,function(){n._serializedObject.delete(),n._serializedObject=null,n.editorOpened||(n.editorOpened=!0,"scene-editor"===n.props.editor&&n.editor.openLayout(n.props.editedElementName,{openEventsEditor:!1}),"external-layout-editor"===n.props.editor&&n.editor.openExternalLayout(n.props.editedElementName)),n.setState({loading:!1})})})}):console.warn("Not implemented: received ".concat(t," update from server"))},n.bridge=new c.a,n.state={loading:!1},n.bridge.isSupported()?(console.log("Connection to an external editor..."),n.bridge.onReceive(function(e,t,r){"update"===e?n._onUpdateReceived(t,r):"setBounds"===e?n.props.isIntegrated&&p.a.setBounds(t.x,t.y,t.width,t.height):"show"===e?(n.lastShowCommandDate=Date.now(),p.a.show()):"hide"===e&&n.props.isIntegrated&&p.a.hide(t&&t.forceHide)}),n.bridge.onConnected(function(){n.requestUpdate("",!0)}),p.a.onBlur(function(){n.props.isIntegrated&&n._hideIfNotJustShown(),n.sendUpdate()}),p.a.onFocus(function(){n.requestUpdate()}),p.a.onClose(function(){n.sendUpdate()}),n.bridge.connectTo(n.props.serverPort)):console.warn("Connection to an external editor is not supported"),n}return Object(l.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;return s.a.cloneElement(this.props.children,{loading:this.state.loading,ref:function(t){return e.editor=t},requestUpdate:function(){return e.requestUpdate("",!0)},onEditObject:this.editObject,integratedEditor:!0})}}]),t}(u.Component);t.a=m}).call(this,n(3))},1677:function(e,t,n){"use strict";var r=n(8),o=n.n(r),a=n(668),i=o()("electron"),l=i?i.remote.require("buffer").Buffer:null;function c(){this.net=o()("net"),this.client=null,this.connected=!1,this._onReceiveCb=null}c.prototype.isSupported=function(){return!!this.net},c.prototype.connectTo=function(e){if(this.net){var t=this;this.client=new this.net.Socket,this.client.connect(e,"localhost",function(){console.log("Connection made on port",e),t.connected=!0,t._onConnected&&t._onConnected()});var n="",r=l.from([0]);this.client.on("data",function(e){for(var o=0,a=e.indexOf(r);o<e.length;)-1===a?(n+=e.slice(o),o=e.length):(n+=e.slice(o,a),t._receive(n),n="",o=a+1,a=e.indexOf(r,o))}),this.client.on("close",function(){t.connected=!1})}},c.prototype.send=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(!this.connected)return!1;var r=JSON.stringify({command:e,scope:n,payload:t});return this.client.write(r+"\0"),!0},c.prototype._receive=function(e){var t;console.info("Received data"),Object(a.a)(function(){try{t=JSON.parse(e)}catch(n){console.warn("Received invalid data (JSON parse failed)",n)}},function(e){return console.info("JSON parse took ".concat(e,"ms"))}),t&&this._onReceiveCb&&this._onReceiveCb(t.command,t.payload,t.scope)},c.prototype.onReceive=function(e){this._onReceiveCb=e},c.prototype.onConnected=function(e){this._onConnected=e},t.a=c},1678:function(e,t,n){"use strict";n.d(t,"a",function(){return S});var r=n(12),o=n(26),a=n(65),i=n(64),l=n(66),c=n(322),u=n(25),s=n.n(u),p=n(374),d=n.n(p),m=n(458),f=n(17),h=n(331),b=n(885),g=n(8),v=n.n(g),E=n(886),x=n(887),y=v()("path"),w=v()("electron"),j=w?w.remote.app:null,O=v()("fs-extra"),S=function(e){function t(){var e,n;Object(r.a)(this,t);for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];return(n=Object(a.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(l)))).state={outputPath:Object(E.a)(y&&j?y.join(j.getPath("home"),"GDevelop projects"):""),exampleNames:null},n._handleChangePath=function(e){return n.setState({outputPath:e})},n.createFromExample=function(e){var t=n.state.outputPath;O&&t&&Object(b.a)(function(r){O.mkdirsSync(t),O.copySync(y.join(r,e),t),n.props.onOpen(y.join(t,e+".json")),Object(f.h)(e)})},n}return Object(l.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;Object(b.a)(function(t){O.readdir(t,function(t,n){t?console.error("Unable to read examples:",t):e.setState({exampleNames:n.filter(function(e){return".DS_Store"!==e})},function(){return e.props.onExamplesLoaded()})})})}},{key:"render",value:function(){return s.a.createElement(h.a,{noMargin:!0},s.a.createElement(h.a,null,s.a.createElement("p",null,s.a.createElement(c.Trans,{id:"Choose or search for an example to open:"}))),s.a.createElement(h.b,null,s.a.createElement(x.a,{exampleNames:this.state.exampleNames,onCreateFromExample:this.createFromExample})),s.a.createElement(d.a,null),s.a.createElement(h.b,{expand:!0},s.a.createElement(h.a,{expand:!0},s.a.createElement(m.a,{fullWidth:!0,value:this.state.outputPath,onChange:this._handleChangePath,type:"create-game"}))))}}]),t}(u.Component)},1681:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return k});var r=n(12),o=n(26),a=n(65),i=n(64),l=n(66),c=n(322),u=n(25),s=n.n(u),p=n(374),d=n.n(p),m=n(340),f=n.n(m),h=n(458),b=n(17),g=n(331),v=n(354),E=n(885),x=n(8),y=n.n(x),w=n(886),j=y()("path"),O=y()("electron"),S=O?O.remote.app:null,C=y()("fs-extra"),P=e.gd,k=function(e){function t(){var e,n;Object(r.a)(this,t);for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];return(n=Object(a.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(l)))).state={outputPath:Object(w.a)(j&&S?j.join(S.getPath("home"),"GDevelop projects"):"")},n._handleChangePath=function(e){return n.setState({outputPath:e})},n}return Object(l.a)(t,e),Object(o.a)(t,[{key:"createFromExample",value:function(e){var t=this,n=this.state.outputPath;C&&n&&Object(E.a)(function(r){C.mkdirsSync(n),C.copySync(j.join(r,e),n),t.props.onOpen(j.join(n,e+".json")),Object(b.h)(e)})}},{key:"createEmptyGame",value:function(){var e=this.state.outputPath;if(C&&e){C.mkdirsSync(e);var t=P.ProjectHelper.createNewGDJSProject();t.setProjectFile(j.join(e,"game.json")),this.props.onCreate(t),Object(b.h)("")}}},{key:"render",value:function(){var e=this;return s.a.createElement(g.a,{noMargin:!0},s.a.createElement(g.b,null,s.a.createElement(g.a,null,s.a.createElement("p",null,s.a.createElement(c.Trans,{id:"Choose a game to use as a starter:"})))),s.a.createElement(g.b,null,s.a.createElement(g.a,{expand:!0,noMargin:!0},s.a.createElement(v.List,null,s.a.createElement(v.ListItem,{primaryText:s.a.createElement(c.Trans,{id:"Platformer"}),secondaryText:s.a.createElement("p",null,s.a.createElement(c.Trans,{id:"A simple platform game, with coins to collect, moving platforms and enemies."})),secondaryTextLines:2,onClick:function(){return e.createFromExample("platformer")}}),s.a.createElement(v.ListItem,{primaryText:s.a.createElement(c.Trans,{id:"Space Shooter"}),secondaryText:s.a.createElement("p",null,s.a.createElement(c.Trans,{id:"A side-scrolling shooter where you must defeat incoming enemies with your spaceship."})),secondaryTextLines:2,onClick:function(){return e.createFromExample("space-shooter")}}),s.a.createElement(v.ListItem,{primaryText:s.a.createElement(c.Trans,{id:"Isometric game"}),secondaryText:s.a.createElement("p",null,s.a.createElement(c.Trans,{id:"An example of an isometric game where you can explore a map with your character."})),secondaryTextLines:2,onClick:function(){return e.createFromExample("isometric-game")}}),s.a.createElement(v.ListItem,{primaryText:"Downhill Bike Racing",secondaryText:s.a.createElement("p",null,s.a.createElement(c.Trans,{id:"An example of a 2D physics based driving game, where player have to reach the end as fast as possible."})),secondaryTextLines:2,onClick:function(){return e.createFromExample("downhill-bike-physics-demo")}}),s.a.createElement(v.ListItem,{primaryText:"Pairs",secondaryText:s.a.createElement("p",null,s.a.createElement(c.Trans,{id:"Find all matching pairs of cards in this relaxing game. Use tweens to create smooth, natural animations with a few events."})),secondaryTextLines:2,onClick:function(){return e.createFromExample("pairs")}}),s.a.createElement(v.ListItem,{primaryText:s.a.createElement(c.Trans,{id:"Empty game"}),secondaryText:s.a.createElement("p",null,s.a.createElement(c.Trans,{id:"Start a new game from scratch."})),secondaryTextLines:2,onClick:function(){return e.createEmptyGame()}})),s.a.createElement(g.b,{alignItems:"center",justifyContent:"center"},s.a.createElement(f.a,{label:s.a.createElement(c.Trans,{id:"See examples"}),onClick:function(){return e.props.onShowExamples()}})))),s.a.createElement(d.a,null),s.a.createElement(g.b,{expand:!0},s.a.createElement(g.a,{expand:!0},s.a.createElement(h.a,{fullWidth:!0,value:this.state.outputPath,onChange:this._handleChangePath,type:"create-game"}))))}}]),t}(u.Component)}).call(this,n(3))},1682:function(e,t,n){"use strict";(function(e){var r,o,a,i,l=n(12),c=n(26),u=n(65),s=n(64),p=n(66),d=n(25),m=n(447),f=n(8),h=n.n(f),b=h()("electron"),g=b?b.remote.dialog:null,v=h()("path"),E=e.gd;t.a=[{name:"localAudioFileOpener",displayName:"Choose a new audio file",kind:"audio",component:(r=function(e){function t(){var e,n;Object(l.a)(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(n=Object(u.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(o)))).chooseResources=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return x(e,{multiSelections:t,title:"Choose an audio file",name:"Audio files",extensions:["wav","mp3","ogg"]}).then(function(t){return t.map(function(t){var n=new E.AudioResource,r=v.dirname(e.getProjectFile());return n.setFile(v.relative(r,t)),n.setName(v.relative(r,t)),n})})},n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return null}}]),t}(d.Component),r)},{name:"localFileOpener",displayName:"Choose a new image",kind:"image",component:(o=function(e){function t(){var e,n;Object(l.a)(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(n=Object(u.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(o)))).chooseResources=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return x(e,{multiSelections:t,title:"Choose an image",name:"Image files",extensions:["png","jpg"]}).then(function(t){return t.map(function(t){var n=new E.ImageResource,r=v.dirname(e.getProjectFile());return n.setFile(v.relative(r,t)),n.setName(v.relative(r,t)),n})})},n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return null}}]),t}(d.Component),o)},{name:"localFontFileOpener",displayName:"Choose a new font file",kind:"font",component:(a=function(e){function t(){var e,n;Object(l.a)(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(n=Object(u.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(o)))).chooseResources=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return x(e,{multiSelections:t,title:"Choose a font file",name:"Font files",extensions:["ttf","otf"]}).then(function(t){return t.map(function(t){var n=new E.FontResource,r=v.dirname(e.getProjectFile());return n.setFile(v.relative(r,t)),n.setName(v.relative(r,t)),n})})},n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return null}}]),t}(d.Component),a)},{name:"localVideoFileOpener",displayName:"Choose a new video file",kind:"video",component:(i=function(e){function t(){var e,n;Object(l.a)(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(n=Object(u.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(o)))).chooseResources=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return x(e,{multiSelections:t,title:"Choose a video file",name:"Video files",extensions:["mp4"]}).then(function(t){return t.map(function(t){var n=new E.VideoResource,r=v.dirname(e.getProjectFile());return n.setFile(v.relative(r,t)),n.setName(v.relative(r,t)),n})})},n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return null}}]),t}(d.Component),i)}];var x=function(e,t){return new Promise(function(n,r){if(!g)return r("Not supported");var o=["openFile"];t.multiSelections&&o.push("multiSelections");var a=v.dirname(e.getProjectFile()),i=b.remote.getCurrentWindow();g.showOpenDialog(i,{title:t.title,properties:o,filters:[{name:t.name,extensions:t.extensions}],defaultPath:a},function(t){return t&&Object(m.c)(e,t[0])?n(t):n([])})})}}).call(this,n(3))},1683:function(e,t,n){"use strict";var r=n(1684),o=n(1685),a=n(17),i=[{name:"piskel-app",displayName:"Edit with Piskel",kind:"image",edit:function(e){return Object(a.e)("piskel"),Object(r.a)(e)}},{name:"Jfxr",displayName:"Create/Edit a Sound effect with Jfxr (*.wav)",kind:"audio",edit:function(e){return Object(a.e)("jfxr"),Object(o.a)(e)}}];t.a=i},1684:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return p});var r=n(334),o=n(8),a=n.n(o),i=n(447),l=a()("electron"),c=a()("path"),u=l?l.ipcRenderer:null,s=e.gd,p=function(e){var t=e.project,n=(e.resourcesLoader,e.resourceNames),o=e.singleFrame,a=e.onChangesSaved,p=e.extraOptions;if(l&&u){var d=n.map(function(e,n){return{resourcePath:Object(i.e)(t,e),resourceName:e,originalIndex:n}}),m=c.dirname(t.getProjectFile()),f=Object(r.a)({},p,{resources:d,singleFrame:o,projectPath:m});u.removeAllListeners("piskel-changes-saved"),u.on("piskel-changes-saved",function(e,n,r,o){var l=o.data?{pskl:o}:null,u=t.getResourcesManager();n.forEach(function(e){e.name=c.relative(m,e.path),Object(i.d)(t,new s.ImageResource,e.name)}),o.singleFrame?(l&&u.getResource(c.relative(m,n[0].path)).setMetadata(JSON.stringify(l)),a(n,r)):a(n,r,l)}),u.send("piskel-open-then-load-animation",f)}}}).call(this,n(3))},1685:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return s});var r=n(8),o=n.n(r),a=n(447),i=o()("electron"),l=o()("path"),c=i?i.ipcRenderer:null,u=e.gd,s=function(e){var t=e.project,n=(e.resourcesLoader,e.resourceNames),r=e.onChangesSaved,o=(e.resourcePath,e.extraOptions);if(i&&c){var s=l.dirname(t.getProjectFile()),p={resourcePath:Object(a.e)(t,n[0]),externalEditorData:o.initialResourceMetadata,projectPath:s};c.removeAllListeners("jfxr-changes-saved"),c.on("jfxr-changes-saved",function(e,n,o){var i=l.relative(s,n);Object(a.d)(t,new u.AudioResource,i);var c={jfxr:o};t.getResourcesManager().getResource(i).setMetadata(JSON.stringify(c)),r([{metadata:c}],i)}),c.send("jfxr-create-wav",p)}}}).call(this,n(3))},1686:function(e,t,n){"use strict";n.d(t,"a",function(){return p});var r=n(12),o=n(363),a=n(8),i=n.n(a),l=n(888),c=i()("fs-extra"),u=i()("path"),s=function(e,t){if(!c)return Promise.reject(new Error("Filesystem is not supported."));try{var n=JSON.stringify(e,null,2);return c.ensureDir(u.dirname(t)).then(function(){return new Promise(function(e,r){c.writeFile(t,n,function(t){return t?r(t):e()})})})}catch(r){return Promise.reject(r)}},p=function e(){Object(r.a)(this,e)};p.saveProject=function(e){var t=e.getProjectFile(),n=u.dirname(e.getProjectFile());if(!t)return Promise.reject('Unimplemented "Save as" feature');var r=Object(o.a)(e);if(e.isFolderProject()){var a=Object(l.b)(r,{pathSeparator:"/",getArrayItemReferenceName:Object(l.a)("name"),shouldSplit:Object(l.c)(new Set(["/layouts/*","/externalLayouts/*","/externalEvents/*","/layouts/*","/eventsFunctionsExtensions/*"])),isReferenceMagicPropertyName:"__REFERENCE_TO_SPLIT_OBJECT"});return Promise.all(a.map(function(e){return s(e.object,u.join(n,e.reference)+".json").catch(function(e){throw console.error("Unable to write a partial file:",e),e})})).then(function(){return s(r,t).catch(function(e){throw console.error("Unable to write the split project:",e),e})})}return s(r,t).catch(function(e){throw console.error("Unable to write the project:",e),e})},p.autoSaveProject=function(e){var t=e.getProjectFile()+".autosave";s(Object(o.a)(e),t).catch(function(e){throw console.error("Unable to write ".concat(t,":"),e),e})}},1687:function(e,t,n){"use strict";n.d(t,"a",function(){return d});var r=n(12),o=n(8),a=n.n(o),i=n(888),l=a()("fs"),c=a()("path"),u=a()("electron"),s=u?u.remote.dialog:null,p=function(e){return l?new Promise(function(t,n){l.readFile(e,{encoding:"utf8"},function(r,o){if(r)return n(r);try{var a=JSON.parse(o);return t(a)}catch(i){return n(e+" is a corrupted/malformed file.")}})}):Promise.reject("Filesystem is not supported.")},d=function e(){Object(r.a)(this,e)};d.chooseProjectFile=function(){return new Promise(function(e,t){if(!s)return t("Not supported");var n=u.remote.getCurrentWindow();s.showOpenDialog(n,{title:"Open a project",properties:["openFile"],message:"If you want to open your GDevelop 4 project, be sure to save it as a .json file",filters:[{name:"GDevelop 5 project",extensions:["json"]}]},function(t){return t&&t.length?e(t[0]):e(null)})})},d.readProjectFile=function(e){var t=c.dirname(e);return p(e).then(function(e){return Object(i.d)(e,{getReferencePartialObject:function(e){return p(c.join(t,e)+".json")},isReferenceMagicPropertyName:"__REFERENCE_TO_SPLIT_OBJECT",maxUnsplitDepth:3}).then(function(){return e})})},d.shouldOpenAutosave=function(e,t,n){if(l.existsSync(t)){if(!n)return!0;try{if(l.statSync(t).mtime.getTime()>l.statSync(e).mtime.getTime())return!0}catch(r){return console.error("Unable to compare *.autosave to project",r),!1}return!1}return!1}},1688:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return S});var r=n(12),o=n(26),a=n(65),i=n(64),l=n(66),c=n(322),u=n(25),s=n(419),p=n(8),d=n.n(p),m=n(668),f=n(393),h=n(1689),b=n(402),g=n.n(b),v=n(1690),E=n(623),x=d()("electron"),y=d()("path"),w=x?x.ipcRenderer:null,j=x?x.remote.BrowserWindow:null,O=e.gd,S=function(e){function t(){var e,n;Object(r.a)(this,t);for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];return(n=Object(a.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(l)))).canDoNetworkPreview=function(){return!0},n.state={networkPreviewDialogOpen:!1,networkPreviewHost:null,networkPreviewPort:null,networkPreviewError:null,previewGamePath:null,previewBrowserWindowConfig:null},n._subscriptionChecker=null,n._openPreviewBrowserWindow=function(){j&&n.state.previewBrowserWindowConfig&&n.state.previewGamePath&&new j(n.state.previewBrowserWindowConfig).loadURL("file://".concat(n.state.previewGamePath,"/index.html"))},n._openPreviewWindow=function(e,t,r){n.setState({previewBrowserWindowConfig:{width:e.getMainWindowDefaultWidth(),height:e.getMainWindowDefaultHeight(),useContentSize:!0,title:"Preview of ".concat(e.getName()),backgroundColor:"#000000"},previewGamePath:t},function(){if(r.networkPreview){if(!w)return;w.removeAllListeners("serve-folder-done"),w.removeAllListeners("local-network-ips"),w.on("serve-folder-done",function(e,t,r){t?n.setState({networkPreviewDialogOpen:!0,networkPreviewPort:null,networkPreviewHost:null,networkPreviewError:t}):n.setState({networkPreviewDialogOpen:!0,networkPreviewPort:r.port}),setTimeout(function(){return n._checkSubscription()})}),w.on("local-network-ips",function(e,t){n.setState({networkPreviewHost:Object(v.a)(t)})}),w.send("serve-folder",{root:t}),w.send("get-local-network-ips")}else n._openPreviewBrowserWindow()})},n._prepareExporter=function(){return new Promise(function(e,t){Object(f.findGDJS)(function(n){if(!n)return console.error("Could not find GDJS"),t();console.info("GDJS found in ",n);var r=g()(new O.AbstractFileSystemJS,s.a),o=y.join(r.getTempDir(),"preview"),a=new O.Exporter(r,n);e({outputDir:o,exporter:a})})})},n.launchLayoutPreview=function(e,t,r){return e&&t?n._prepareExporter().then(function(o){var a=o.outputDir,i=o.exporter;Object(m.a)(function(){i.exportLayoutForPixiPreview(e,t,a),i.delete(),n._openPreviewWindow(e,a,r)},function(e){return console.info("Preview took ".concat(e,"ms"))})}):Promise.reject()},n.launchExternalLayoutPreview=function(e,t,r,o){return e&&r?n._prepareExporter().then(function(a){var i=a.outputDir,l=a.exporter;Object(m.a)(function(){l.exportExternalLayoutForPixiPreview(e,t,r,i),l.delete(),n._openPreviewWindow(e,i,o)},function(e){return console.info("Preview took ".concat(e,"ms"))})}):Promise.reject()},n._checkSubscription=function(e){return!n._subscriptionChecker||n._subscriptionChecker.checkHasSubscription()},n}return Object(l.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this,t=this.state,n=t.networkPreviewDialogOpen,r=t.networkPreviewHost,o=t.networkPreviewPort,a=t.networkPreviewError;return u.createElement(u.Fragment,null,u.createElement(E.a,{ref:function(t){return e._subscriptionChecker=t},onChangeSubscription:function(){e.setState({networkPreviewDialogOpen:!1}),e.props.onChangeSubscription&&e.props.onChangeSubscription()},id:"Preview over wifi",title:u.createElement(c.Trans,{id:"Preview over wifi"}),mode:"try"}),u.createElement(h.a,{open:n,url:r&&o?"".concat(r,":").concat(o):null,error:a,onClose:function(){return e.setState({networkPreviewDialogOpen:!1})},onExport:this.props.onExport,onRunPreviewLocally:this._openPreviewBrowserWindow}))}}]),t}(u.Component)}).call(this,n(3))},1689:function(e,t,n){"use strict";n.d(t,"a",function(){return g});var r=n(12),o=n(26),a=n(65),i=n(64),l=n(66),c=n(322),u=n(25),s=n(338),p=n(333),d=n.n(p),m=n(345),f=n.n(m),h=n(331),b=n(380),g=function(e){function t(){return Object(r.a)(this,t),Object(a.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props,t=e.url,n=e.open,r=e.error,o=e.onExport,a=e.onClose,i=e.onRunPreviewLocally;return n?u.createElement(s.a,{actions:[u.createElement(d.a,{key:"close",label:u.createElement(c.Trans,{id:"Close"}),primary:!0,onClick:a})],secondaryActions:[o&&u.createElement(d.a,{key:"export",label:u.createElement(c.Trans,{id:"Export game"}),onClick:o}),u.createElement(d.a,{key:"run-preview-locally",label:u.createElement(c.Trans,{id:"Run on this computer"}),onClick:i})],modal:!0,open:n,onRequestClose:a},r&&u.createElement(h.b,null,u.createElement(c.Trans,{id:"Unable to start the server for the preview! Make sure that you are authorized to run servers on this computer. Otherwise, use classic preview to test your game."})),!r&&!t&&u.createElement(b.a,null),!r&&t&&u.createElement("div",null,u.createElement(h.b,null,u.createElement(c.Trans,{id:"Your preview is ready! On your mobile or tablet, open your browser and enter in the address bar:"})),u.createElement(f.a,{value:t,fullWidth:!0}),u.createElement(h.b,null,u.createElement(c.Trans,{id:"Please note that your device should be connected on the same network as this computer."})))):null}}]),t}(u.Component)},1690:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r=function(e){if(!e.length)return null;var t=e.find(function(e){return 0===e.indexOf("192.168")});return t||((t=e.find(function(e){return 0===e.indexOf("192")}))||e[0])}},1691:function(e,t,n){"use strict";n.d(t,"a",function(){return y});var r=n(25),o=n(889),a=n(1692),i=n(1694),l=n(1695),c=n(1696),u=n(1697),s=n(1698),p=n(1701),d=n(893),m=n.n(d),f=n(894),h=n.n(f),b=n(895),g=n.n(b),v=n(896),E=n(897),x=n(898),y=function(){return[{name:"Android (& iOS coming soon)",renderIcon:function(e){return r.createElement(m.a,e)},helpPage:"/publishing/android_and_ios",description:"Package your game for Android directly from GDevelop. iOS support is coming soon!",key:"localonlinecordovaexport",ExportComponent:i.a},{name:"Facebook Instant Games",renderIcon:function(e){return r.createElement(v.a,e)},helpPage:"/publishing/publishing-to-facebook-instant-games",description:"Package your game as a Facebook Instant Games that can be played on Facebook Messenger.",key:"localfacebookinstantgames",ExportComponent:s.a},{name:"Web (upload online)",renderIcon:function(e){return r.createElement(x.a,e)},helpPage:"/publishing/web",description:"Upload your game online directly from GDevelop and share the link to players. Play to your game using your browser on computers and mobile phones.",key:"locals3export",ExportComponent:a.a},{name:"Local folder",renderIcon:function(e){return r.createElement(g.a,e)},helpPage:"/publishing/html5_game_in_a_local_folder",description:"Build the game locally as a HTML5 game. You can then export it on website like Itch.io or Kongregate.",key:"localexport",ExportComponent:o.a,advanced:!0},{name:"iOS & Android (manual)",renderIcon:function(e){return r.createElement(E.a,e)},helpPage:"/publishing/android_and_ios_with_cordova",description:"Build the game locally as a Cordova project, and export it manually to iOS or Android with Cordova developers tools.",key:"localcordovaexport",ExportComponent:l.a,advanced:!0},{name:"Windows/macOS/Linux (beta)",renderIcon:function(e){return r.createElement(h.a,e)},helpPage:"/publishing/windows-macos-linux",description:"Package your game as an app for Windows, macOS or Linux directly from GDevelop.",key:"localonlineelectronexport",ExportComponent:u.a},{name:"Windows/macOS/Linux (manual)",renderIcon:function(e){return r.createElement(h.a,e)},helpPage:"/publishing/windows-macos-linux-with-electron",description:"Build the game locally and export it manually to Windows, macOS or Linux with third-party developer tools.",key:"localelectronexport",ExportComponent:p.a,advanced:!0},{name:"Cocos2d-JS",renderIcon:function(e){return r.createElement(m.a,e)},helpPage:"/publishing/android_and_ios_with_cocos2d-js",description:"Export your game using Cocos2d-JS game engine. The game can be compiled for Android or iOS if you install Cocos2d-JS developer tools.",key:"localcocos2dexport",ExportComponent:c.a,experimental:!0}]}},1692:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return T});var r=n(12),o=n(26),a=n(65),i=n(64),l=n(66),c=n(322),u=n(25),s=n.n(u),p=n(469),d=n.n(p),m=n(1693),f=n(340),h=n.n(f),b=n(17),g=n(889),v=n(8),E=n.n(v),x=n(331),y=n(442),w=n.n(y),j=n(69),O=n(669),S=n(345),C=n.n(S),P=E()("os"),k=E()("electron"),D=k?k.ipcRenderer:null,F=k?k.shell:null,_=e.gd,T=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(a.a)(this,Object(i.a)(t).call(this,e)))._uploadToS3=function(e){return D.removeAllListeners("s3-folder-upload-progress"),D.removeAllListeners("s3-folder-upload-done"),new Promise(function(t,r){D.on("s3-folder-upload-progress",function(e,t,r){return n.setState({uploadProgress:t,uploadMax:r})}),D.on("s3-folder-upload-done",function(e,o,a){if(o)return r(o);n.setState({uploadDone:!0}),t(a)}),D.send("s3-folder-upload",e)})},n._deploy=function(e){return Object(m.sleep)(200).then(function(){return d()(j.e.deployEndpoint,{method:"post",params:{name:e}})}).then(function(e){return n.setState({deployDone:!0}),e.data.deployedPrefix})},n.launchExport=function(){var e=n.props.project;if(e){Object(b.d)("s3"),n.setState({exportStarted:!0,exportDone:!1,uploadDone:!1,deployDone:!1});var t=P.tmpdir()+"/GDS3Export-"+Object(O.a)();g.a.prepareExporter().then(function(r){var o=r.exporter,a=new _.MapStringBoolean;o.exportWholePixiProject(e,t,a),a.delete(),o.delete(),n.setState({exportDone:!0})}).then(function(){return n._uploadToS3(t)}).then(function(e){return n._deploy(e)}).then(function(e){n.setState({url:"".concat(j.e.gamesHost,"/").concat(e)})}).catch(function(e){console.error(e)}).then(function(){return n.setState({exportStarted:!1})})}},n.openURL=function(){F.openExternal(n.state.url)},n.renderUrl=function(){return s.a.createElement(x.b,{alignItems:"baseline"},"You game is available here:",s.a.createElement(x.c,null),s.a.createElement(C.a,{value:n.state.url,style:{flex:1}}),s.a.createElement(x.c,null),s.a.createElement(h.a,{label:s.a.createElement(c.Trans,{id:"Open"}),primary:!0,onClick:n.openURL}))},n.state={exportStarted:!1,exportDone:!1,uploadDone:!1,deployDone:!1},n}return Object(l.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){if(!this.props.project)return null;var e=this.state,t=e.url,n=e.exportStarted,r=e.exportDone,o=e.uploadProgress,a=e.uploadMax,i=e.uploadDone,l=e.deployDone;return s.a.createElement(x.a,{noMargin:!0},s.a.createElement(x.b,null,s.a.createElement(c.Trans,{id:"This will export your game and upload it on GDevelop games hosting. The game will be free and available for a few days."})),s.a.createElement(x.b,{alignItems:"center"},s.a.createElement(w.a,{style:{flex:1},max:a,value:o,mode:n&&!r||i&&!l?"indeterminate":"determinate"}),s.a.createElement(x.c,null),s.a.createElement(h.a,{label:s.a.createElement(c.Trans,{id:"Export and upload my game"}),primary:!0,onClick:this.launchExport,disabled:n})),!!t&&this.renderUrl())}}]),t}(u.Component)}).call(this,n(3))},1693:function(e,t,n){"use strict";function r(e,t,n,r){this.every(e,r),this.before(t),this.after(0|n)}r.prototype={before:function(e){return this.startTime=Date.now(),this.expires=this.startTime+e,this},and:function(e){return this.routine=e,this},after:function(e){return this.afterTime=e,this},every:function(e,t){return this.interval=e,null!=t&&this.limit(t),this},limit:function(e){return e=e>0?e:1/0,this.limit=e,this},check:function(e){return e=e||function(){},this.before(0).until(e)},forward:function(){return this.until(function(){return!1})},till:function(e){var t=this;return this.until(function(){try{return!0===e()}catch(n){throw t.limit=0,n}})},until:function(e){var t,n=this.interval,r=this.afterTime,o=this.routine,a=this,i=0;return new Promise(function(l,c){function u(){var n,r;o&&o(i),i++;try{r=e()}catch(u){n=u}finally{return Date.now()>=a.expires||i>=a.limit?(clearInterval(t),void 0!==n||!1===r?c(n||new Error("check failed")):l(r),!0):void 0===n&&!1!==r&&(clearInterval(t),l(r),!0)}}setTimeout(function(){u()||(t=setInterval(u,n))},r)})}},e.exports={every:function(e,t){return new r(e,1/0,0,t)},and:function(e){return new r(100,1/0,0).and(e)},limit:function(e){return new r(100,1/0,0,e)},before:function(e,t){return new r(100,e,0,t)},after:function(e){return new r(100,1/0,e)},sleep:function(e){return new r(100,1/0,e).check()},until:function(e){return new r(100,1/0).until(e)},forward:function(){return new r(100,1/0).forward()},till:function(e){return new r(100,1/0).till(e)},check:function(e){return new r(100,0).until(e)}}},1694:function(e,t,n){"use strict";(function(e){var r=n(12),o=n(26),a=n(65),i=n(64),l=n(66),c=n(25),u=n.n(c),s=n(402),p=n.n(s),d=n(340),m=n.n(d),f=n(17),h=n(546),b=n(429),g=n(331),v=n(68),E=n(393),x=n(419),y=n(670),w=n(8),j=n.n(w),O=n(9),S=n(627),C=n(890),P=n(477),k=n(672),D=n(891),F=j()("path"),_=j()("os"),T=j()("electron"),L=T?T.ipcRenderer:null,A=e.gd,R=function(e){function t(){var e,n;Object(r.a)(this,t);for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];return(n=Object(a.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(l)))).state={exportStep:"",build:null,uploadProgress:0,uploadMax:0,errored:!1},n.buildsWatcher=new k.a,n.launchExport=function(){var e=n.props.project;return e?t.prepareExporter().then(function(t){var n=t.exporter,r=t.outputDir,o=new A.MapStringBoolean;return o.set("exportForCordova",!0),n.exportWholePixiProject(e,r,o),o.delete(),n.delete(),r}).catch(function(e){throw Object(v.a)("Unable to export the game",e),e}):Promise.reject()},n.launchCompression=function(e){var t=_.tmpdir();return Object(y.a)({path:e,outputFilename:F.join(t,"game-archive.zip")})},n.launchUpload=function(e){return L?(L.removeAllListeners("s3-file-upload-progress"),L.removeAllListeners("s3-file-upload-done"),new Promise(function(t,r){L.on("s3-file-upload-progress",function(e,t,r){n.setState({uploadProgress:t,uploadMax:r})}),L.on("s3-file-upload-done",function(e,n,o){if(n)return r(n);t(o)}),L.send("s3-file-upload",e)})):Promise.reject("No support for upload")},n.launchBuild=function(e,t){var n=e.getAuthorizationHeader,r=e.profile;return r?Object(h.a)(n,r.uid,t):Promise.reject(new Error("User is not authenticated"))},n.startBuildWatch=function(e){n.state.build&&n.buildsWatcher.start({userProfile:e,builds:[n.state.build],onBuildUpdated:function(e){return n.setState({build:e})}})},n.launchWholeExport=function(e){var t=function(e){return e},r=n.props.project;if(Object(f.d)("local-online-cordova"),Object(P.a)(t,Object(P.b)(t,r))){var o=function(e){return function(t){throw n.state.errored||(n.setState({errored:!0}),Object(v.a)(e+(t.message?"\n".concat(t.message):""),{exportStep:n.state.exportStep,rawError:t})),t}};n.setState({exportStep:"export",uploadProgress:0,uploadMax:0,errored:!1,build:null}),n.launchExport().then(function(e){return n.setState({exportStep:"compress"}),n.launchCompression(e)},o(t("Error while exporting the game."))).then(function(e){return n.setState({exportStep:"upload"}),n.launchUpload(e)},o(t("Error while compressing the game."))).then(function(t){return n.setState({exportStep:"waiting-for-build"}),n.launchBuild(e,t)},o(t("Error while uploading the game. Check your internet connection or try again later."))).then(function(t){n.setState({build:t,exportStep:"build"},function(){n.startBuildWatch(e)})},o(t("Error while lauching the build of the game.")))}},n._download=function(e){n.state.build&&n.state.build[e]&&O.a.openExternalURL(Object(h.e)(n.state.build[e]))},n}return Object(l.a)(t,e),Object(o.a)(t,[{key:"componentWillUnmount",value:function(){this.buildsWatcher.stop()}},{key:"render",value:function(){var e=this,t=this.state,n=t.exportStep,r=t.build,o=t.uploadMax,a=t.uploadProgress,i=t.errored,l=function(e){return e};if(!this.props.project)return null;var c=function(e){return e.limits?e.limits["cordova-build"]:null},s=function(e){if(!i&&""!==n&&"build"!==n)return!1;var t=c(e);return!t||!t.limitReached};return u.a.createElement(b.a.Consumer,null,function(t){return u.a.createElement(g.a,{noMargin:!0},u.a.createElement(g.b,null,l("Packaging your game for Android will create an APK file that can be installed on Android phones, based on Cordova framework.")),t.authenticated&&u.a.createElement(g.b,{justifyContent:"center"},u.a.createElement(m.a,{label:l("Package for Android"),primary:!0,onClick:function(){return e.launchWholeExport(t)},disabled:!s(t)})),t.authenticated&&u.a.createElement(C.a,{subscription:t.subscription,limit:c(t),onChangeSubscription:e.props.onChangeSubscription}),!t.authenticated&&u.a.createElement(S.a,{message:l("Create an account to build your game for Android in one-click:"),onLogin:t.onLogin}),u.a.createElement(g.b,{expand:!0},u.a.createElement(D.a,{exportStep:n,build:r,onDownload:e._download,uploadMax:o,uploadProgress:a,errored:i})))})}}]),t}(c.Component);R.prepareExporter=function(){return new Promise(function(e,t){Object(E.findGDJS)(function(n){if(!n)return Object(v.a)("Could not find GDJS"),t();console.info("GDJS found in ",n);var r=p()(new A.AbstractFileSystemJS,x.a),o=new A.Exporter(r,n),a=F.join(r.getTempDir(),"OnlineCordovaExport");r.mkDir(a),r.clearDir(a),e({exporter:o,outputDir:a})})})},t.a=R}).call(this,n(3))},1695:function(e,t,n){"use strict";(function(e){var r=n(12),o=n(26),a=n(65),i=n(64),l=n(66),c=n(322),u=n(25),s=n.n(u),p=n(338),d=n(333),m=n.n(d),f=n(340),h=n.n(f),b=n(17),g=n(331),v=n(68),E=n(393),x=n(419),y=n(458),w=n(360),j=n(477),O=n(402),S=n.n(O),C=n(8),P=n.n(C),k=n(9),D=P()("electron"),F=D?D.shell:null,_=e.gd,T=function(e){function t(){var e,n;Object(r.a)(this,t);for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];return(n=Object(a.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(l)))).state={exportFinishedDialogOpen:!1,outputDir:""},n.launchExport=function(){var e=function(e){return e},r=n.props.project;if(r&&(Object(b.d)("local-cordova"),Object(j.a)(e,Object(j.b)(e,r)))){var o=n.state.outputDir;r.setLastCompilationDirectory(o),t.prepareExporter().then(function(e){var t=e.exporter,a=new _.MapStringBoolean;a.set("exportForCordova",!0),t.exportWholePixiProject(r,o,a),a.delete(),t.delete(),n.setState({exportFinishedDialogOpen:!0})}).catch(function(e){Object(v.a)("Unable to export the game",e)})}},n.openExportFolder=function(){F&&F.openItem(n.state.outputDir)},n.openPhoneGapBuild=function(){k.a.openExternalURL("https://build.phonegap.com")},n}return Object(l.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.project;this.setState({outputDir:e?e.getLastCompilationDirectory():""})}},{key:"render",value:function(){var e=this,t=function(e){return e},n=this.props.project;return n?s.a.createElement(g.a,{noMargin:!0},s.a.createElement(g.b,null,s.a.createElement(g.a,{noMargin:!0},s.a.createElement("p",null,"This will export your game as a Cordova project. Cordova is a technology that enables HTML5 games to be packaged for ",s.a.createElement("b",null,"iOS"),","," ",s.a.createElement("b",null,"Android")," and more."),s.a.createElement("p",null,"Third-party tools like ",s.a.createElement("b",null,"Adobe PhoneGap Build")," allow game developers to bundle their games using Cordova."))),s.a.createElement(g.b,null,s.a.createElement(y.a,{type:"export",value:this.state.outputDir,defaultPath:n.getLastCompilationDirectory(),onChange:function(t){return e.setState({outputDir:t})},fullWidth:!0})),s.a.createElement(g.b,null,s.a.createElement(g.c,{expand:!0}),s.a.createElement(h.a,{label:s.a.createElement(c.Trans,{id:"Export"}),primary:!0,onClick:this.launchExport,disabled:!this.state.outputDir})),s.a.createElement(p.a,{title:t("Export finished"),actions:[s.a.createElement(m.a,{key:"open",label:s.a.createElement(c.Trans,{id:"Open folder"}),primary:!0,onClick:this.openExportFolder}),s.a.createElement(m.a,{key:"close",label:s.a.createElement(c.Trans,{id:"Close"}),primary:!1,onClick:function(){return e.setState({exportFinishedDialogOpen:!1})}})],secondaryActions:s.a.createElement(w.a,{key:"help",helpPagePath:"/publishing"}),modal:!0,open:this.state.exportFinishedDialogOpen},s.a.createElement("p",null,"You can now compress and upload the game to ",s.a.createElement("b",null,"PhoneGap Build")," ","which will compile it for you to an iOS and Android app."),s.a.createElement("p",null,s.a.createElement(c.Trans,{id:"You can also compile the game by yourself using Cordova command-line tool to iOS (XCode is required) or Android (Android SDK is required)."})),s.a.createElement(h.a,{fullWidth:!0,primary:!0,onClick:function(){return e.openPhoneGapBuild()},label:t("Open PhoneGap Build")}))):null}}]),t}(u.Component);T.prepareExporter=function(){return new Promise(function(e,t){Object(E.findGDJS)(function(n){if(!n)return Object(v.a)("Could not find GDJS"),t();console.info("GDJS found in ",n);var r=S()(new _.AbstractFileSystemJS,x.a),o=new _.Exporter(r,n);e({exporter:o})})})},t.a=T}).call(this,n(3))},1696:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return _});var r=n(12),o=n(26),a=n(65),i=n(64),l=n(66),c=n(322),u=n(25),s=n.n(u),p=n(338),d=n(333),m=n.n(d),f=n(340),h=n.n(f),b=n(439),g=n.n(b),v=n(17),E=n(331),x=n(360),y=n(68),w=n(393),j=n(419),O=n(458),S=n(402),C=n.n(S),P=n(8),k=n.n(P)()("electron"),D=k?k.shell:null,F=e.gd,_=function(e){function t(){var e,n;Object(r.a)(this,t);for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];return(n=Object(a.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(l)))).state={exportFinishedDialogOpen:!1,outputDir:"",debugMode:!1},n.launchExport=function(){var e=n.props.project;if(e){Object(v.d)("local-cocos2d");var r=n.state,o=r.outputDir,a=r.debugMode;e.setLastCompilationDirectory(o),t.prepareExporter().then(function(t){var r=t.exporter;r.exportWholeCocos2dProject(e,a,o),r.delete(),n.setState({exportFinishedDialogOpen:!0})}).catch(function(e){Object(y.a)("Unable to export the game with Cocos2d-JS",e)})}},n.openExportFolder=function(){D.openItem(n.state.outputDir)},n}return Object(l.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.project;this.setState({outputDir:e?e.getLastCompilationDirectory():""})}},{key:"render",value:function(){var e=this,t=this.props.project;return t?s.a.createElement(E.a,{noMargin:!0},s.a.createElement(E.b,null,s.a.createElement(c.Trans,{id:"This will export your game using Cocos2d-JS game engine. The game can be compiled for Android or iOS if you install Cocos2d-JS developer tools."})),s.a.createElement(E.b,null,s.a.createElement(O.a,{type:"export",value:this.state.outputDir,defaultPath:t.getLastCompilationDirectory(),onChange:function(t){return e.setState({outputDir:t})},fullWidth:!0})),s.a.createElement(E.b,null,s.a.createElement(g.a,{onToggle:function(t,n){return e.setState({debugMode:n})},toggled:this.state.debugMode,labelPosition:"right",label:s.a.createElement(c.Trans,{id:"Debug mode (show FPS counter and stats in the bottom left)"})})),s.a.createElement(E.b,null,s.a.createElement(E.c,{expand:!0}),s.a.createElement(h.a,{label:s.a.createElement(c.Trans,{id:"Export"}),primary:!0,onClick:this.launchExport,disabled:!this.state.outputDir})),s.a.createElement(p.a,{title:s.a.createElement(c.Trans,{id:"Export finished"}),actions:[s.a.createElement(m.a,{key:"open",label:s.a.createElement(c.Trans,{id:"Open folder"}),primary:!0,onClick:this.openExportFolder}),s.a.createElement(m.a,{key:"close",label:s.a.createElement(c.Trans,{id:"Close"}),primary:!1,onClick:function(){return e.setState({exportFinishedDialogOpen:!1})}})],secondaryActions:s.a.createElement(x.a,{key:"help",helpPagePath:"/publishing"}),modal:!0,open:this.state.exportFinishedDialogOpen},"You can now upload the game to a web hosting or use Cocos2d-JS command line tools to export it to other platforms like iOS (XCode is required) or Android (Android SDK is required).")):null}}]),t}(u.Component);_.prepareExporter=function(){return new Promise(function(e,t){Object(w.findGDJS)(function(n){if(!n)return Object(y.a)("Could not find GDJS"),t();console.info("GDJS found in ",n);var r=C()(new F.AbstractFileSystemJS,j.a),o=new F.Exporter(r,n);e({exporter:o})})})}}).call(this,n(3))},1697:function(e,t,n){"use strict";(function(e){var r=n(361),o=n(12),a=n(26),i=n(65),l=n(64),c=n(66),u=n(322),s=n(25),p=n.n(s),d=n(402),m=n.n(d),f=n(340),h=n.n(f),b=n(362),g=n.n(b),v=n(17),E=n(546),x=n(429),y=n(331),w=n(68),j=n(393),O=n(419),S=n(670),C=n(8),P=n.n(C),k=n(9),D=n(627),F=n(890),_=n(477),T=n(672),L=n(891),A=P()("path"),R=P()("os"),U=P()("electron"),M=U?U.ipcRenderer:null,I=e.gd,W=function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,c=new Array(a),u=0;u<a;u++)c[u]=arguments[u];return(n=Object(i.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(c)))).state={exportStep:"",build:null,uploadProgress:0,uploadMax:0,errored:!1,targets:["winExe"]},n.buildsWatcher=new T.a,n.launchExport=function(){var e=n.props.project;return e?t.prepareExporter().then(function(t){var n=t.exporter,r=t.outputDir,o=new I.MapStringBoolean;return o.set("exportForElectron",!0),n.exportWholePixiProject(e,r,o),o.delete(),n.delete(),r}).catch(function(e){throw Object(w.a)("Unable to export the game",e),e}):Promise.reject()},n.launchCompression=function(e){var t=R.tmpdir();return Object(S.a)({path:e,outputFilename:A.join(t,"game-archive.zip")})},n.launchUpload=function(e){return M?(M.removeAllListeners("s3-file-upload-progress"),M.removeAllListeners("s3-file-upload-done"),new Promise(function(t,r){M.on("s3-file-upload-progress",function(e,t,r){n.setState({uploadProgress:t,uploadMax:r})}),M.on("s3-file-upload-done",function(e,n,o){if(n)return r(n);t(o)}),M.send("s3-file-upload",e)})):Promise.reject("No support for upload")},n.launchBuild=function(e,t){var r=e.getAuthorizationHeader,o=e.profile;return o?Object(E.b)(r,o.uid,t,n.state.targets):Promise.reject(new Error("User is not authenticated"))},n.startBuildWatch=function(e){n.state.build&&n.buildsWatcher.start({userProfile:e,builds:[n.state.build],onBuildUpdated:function(e){return n.setState({build:e})}})},n.launchWholeExport=function(e){var t=function(e){return e},r=n.props.project;if(Object(v.d)("local-online-electron"),Object(_.a)(t,Object(_.b)(t,r))){var o=function(e){return function(t){throw n.state.errored||(n.setState({errored:!0}),Object(w.a)(e+(t.message?"\n".concat(t.message):""),{exportStep:n.state.exportStep,rawError:t})),t}};n.setState({exportStep:"export",uploadProgress:0,uploadMax:0,errored:!1,build:null}),n.launchExport().then(function(e){return n.setState({exportStep:"compress"}),n.launchCompression(e)},o(t("Error while exporting the game."))).then(function(e){return n.setState({exportStep:"upload"}),n.launchUpload(e)},o(t("Error while compressing the game."))).then(function(t){return n.setState({exportStep:"waiting-for-build"}),n.launchBuild(e,t)},o(t("Error while uploading the game. Check your internet connection or try again later."))).then(function(t){n.setState({build:t,exportStep:"build"},function(){n.startBuildWatch(e)})},o(t("Error while lauching the build of the game.")))}},n._download=function(e){n.state.build&&n.state.build[e]&&k.a.openExternalURL(Object(E.e)(n.state.build[e]))},n._setTarget=function(e,t){t&&-1===n.state.targets.indexOf(e)?n.setState({targets:[].concat(Object(r.a)(n.state.targets),[e])}):t||-1===n.state.targets.indexOf(e)||n.setState({targets:n.state.targets.filter(function(t){return t!==e})})},n}return Object(c.a)(t,e),Object(a.a)(t,[{key:"componentWillUnmount",value:function(){this.buildsWatcher.stop()}},{key:"render",value:function(){var e=this,t=this.state,n=t.exportStep,r=t.build,o=t.uploadMax,a=t.uploadProgress,i=t.errored,l=function(e){return e};if(!this.props.project)return null;var c=function(e){return e.limits?e.limits["electron-build"]:null},s=function(t){if(!i&&""!==n&&"build"!==n)return!1;var r=c(t);return(!r||!r.limitReached)&&!!e.state.targets.length};return p.a.createElement(x.a.Consumer,null,function(t){return p.a.createElement(y.a,{noMargin:!0},p.a.createElement(y.b,null,l("Your game will be exported and packaged online as an stand-alone game for Windows, Linux and/or macOS.")),p.a.createElement(g.a,{label:p.a.createElement(u.Trans,{id:"Windows (zip file)"}),checked:-1!==e.state.targets.indexOf("winZip"),onCheck:function(t,n){return e._setTarget("winZip",n)}}),p.a.createElement(g.a,{label:p.a.createElement(u.Trans,{id:"Windows (auto-installer file)"}),checked:-1!==e.state.targets.indexOf("winExe"),onCheck:function(t,n){return e._setTarget("winExe",n)}}),p.a.createElement(g.a,{label:p.a.createElement(u.Trans,{id:"macOS (zip file)"}),checked:-1!==e.state.targets.indexOf("macZip"),onCheck:function(t,n){return e._setTarget("macZip",n)}}),p.a.createElement(g.a,{label:p.a.createElement(u.Trans,{id:"Linux (AppImage)"}),checked:-1!==e.state.targets.indexOf("linuxAppImage"),onCheck:function(t,n){return e._setTarget("linuxAppImage",n)}}),t.authenticated&&p.a.createElement(y.b,{justifyContent:"center"},p.a.createElement(h.a,{label:l("Export"),primary:!0,onClick:function(){return e.launchWholeExport(t)},disabled:!s(t)})),t.authenticated&&p.a.createElement(F.a,{subscription:t.subscription,limit:c(t),onChangeSubscription:e.props.onChangeSubscription}),!t.authenticated&&p.a.createElement(D.a,{message:l("Create an account to build your game for Windows, Linux and macOS in one-click:"),onLogin:t.onLogin}),p.a.createElement(y.b,{expand:!0},p.a.createElement(L.a,{exportStep:n,build:r,onDownload:e._download,uploadMax:o,uploadProgress:a,errored:i,showSeeAllMyBuildsExplanation:!0})))})}}]),t}(s.Component);W.prepareExporter=function(){return new Promise(function(e,t){Object(j.findGDJS)(function(n){if(!n)return Object(w.a)("Could not find GDJS"),t();console.info("GDJS found in ",n);var r=m()(new I.AbstractFileSystemJS,O.a),o=new I.Exporter(r,n),a=A.join(r.getTempDir(),"OnlineElectronExport");r.mkDir(a),r.clearDir(a),e({exporter:o,outputDir:a})})})},t.a=W}).call(this,n(3))},1698:function(e,t,n){"use strict";(function(e){var r=n(12),o=n(26),a=n(65),i=n(64),l=n(66),c=n(25),u=n.n(c),s=n(402),p=n.n(s),d=n(340),m=n.n(d),f=n(17),h=n(331),b=n(1699),g=n(68),v=n(393),E=n(419),x=n(1700),y=n(670),w=n(8),j=n.n(w),O=n(9),S=n(430),C=j()("path"),P=j()("electron"),k=P?P.remote.app:null,D=P?P.shell:null,F=e.gd,_=function(e){function t(){var e,n;Object(r.a)(this,t);for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];return(n=Object(a.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(l)))).state={archiveOutputFilename:k?C.join(k.getPath("documents"),"fb-instant-game.zip"):"",exportStep:"",errored:!1},n.launchExport=function(){var e=n.props.project;return e?t.prepareExporter().then(function(t){var n=t.exporter,r=t.outputDir,o=new F.MapStringBoolean;return o.set("exportForFacebookInstantGames",!0),n.exportWholePixiProject(e,r,o),o.delete(),n.delete(),r}).catch(function(e){throw Object(g.a)("Unable to export the game",e),e}):Promise.reject()},n.launchCompression=function(e){return Object(y.a)({path:e,outputFilename:n.state.archiveOutputFilename})},n.launchWholeExport=function(){var e=function(e){return e};Object(f.d)("local-facebook-instant-games");var t=function(e){return function(t){throw n.state.errored||(n.setState({errored:!0}),Object(g.a)(e,{exportStep:n.state.exportStep,rawError:t})),t}};n.setState({exportStep:"export",errored:!1}),n.launchExport().then(function(e){return n.setState({exportStep:"compress"}),n.launchCompression(e)},t(e("Error while exporting the game."))).then(function(){n.setState({exportStep:"done"})},t(e("Error while building the game.")))},n.openExportFolder=function(){D&&D.openItem(C.dirname(n.state.archiveOutputFilename))},n.openLearnMore=function(){O.a.openExternalURL(Object(S.a)("/publishing/publishing-to-facebook-instant-games"))},n}return Object(l.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this,t=this.state,n=t.exportStep,r=t.errored,o=function(e){return e};return this.props.project?u.a.createElement(h.a,{noMargin:!0},u.a.createElement(h.b,null,o("Prepare your game for Facebook Instant Games so that it can be play on Facebook Messenger. GDevelop will create a compressed file that you can upload on your Facebook Developer account.")),u.a.createElement(h.b,null,u.a.createElement(b.a,{title:o("Facebook Instant Games export zip file"),message:o("Choose where to save the exported file for Facebook Instant Games"),filters:[{name:o("Compressed file for Facebook Instant Games"),extensions:["zip"]}],value:this.state.archiveOutputFilename,defaultPath:k?k.getPath("documents"):"",onChange:function(t){return e.setState({archiveOutputFilename:t})},fullWidth:!0})),u.a.createElement(h.b,null,u.a.createElement(h.c,{expand:!0}),u.a.createElement(m.a,{label:o("Export"),primary:!0,onClick:this.launchWholeExport,disabled:!this.state.archiveOutputFilename})),u.a.createElement(h.b,null,u.a.createElement(x.a,{exportStep:n,errored:r,onOpenExportFolder:this.openExportFolder,onOpenLearnMore:this.openLearnMore}))):null}}]),t}(c.Component);_.prepareExporter=function(){return new Promise(function(e,t){Object(v.findGDJS)(function(n){if(!n)return Object(g.a)("Could not find GDJS"),t();console.info("GDJS found in ",n);var r=p()(new F.AbstractFileSystemJS,E.a),o=new F.Exporter(r,n),a=C.join(r.getTempDir(),"FacebookInstantGamesExport");r.mkDir(a),r.clearDir(a),e({exporter:o,outputDir:a})})})},t.a=_}).call(this,n(3))},1699:function(e,t,n){"use strict";n.d(t,"a",function(){return x});var r=n(334),o=n(12),a=n(26),i=n(65),l=n(64),c=n(66),u=n(322),s=n(25),p=n.n(s),d=n(345),m=n.n(d),f=n(333),h=n.n(f),b=n(8),g=n.n(b)()("electron"),v=g?g.remote.dialog:null,E={container:{position:"relative",display:"flex",alignItems:"baseline"},button:{marginLeft:10},textField:{flex:1}},x=function(e){function t(){var e,n;Object(o.a)(this,t);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(n=Object(i.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(a)))).onChooseFolder=function(){if(v&&g){var e=g.remote.getCurrentWindow();v.showSaveDialog(e,{title:n.props.title,filters:n.props.filters,message:n.props.message,defaultPath:n.props.defaultPath},function(e){n.props.onChange(e||"")})}},n}return Object(c.a)(t,e),Object(a.a)(t,[{key:"render",value:function(){var e=this;return p.a.createElement("div",{style:Object(r.a)({},E.container,{width:this.props.fullWidth?"100%":void 0})},p.a.createElement(m.a,{style:E.textField,floatingLabelText:this.props.floatingLabelText,floatingLabelFixed:!0,type:"text",hintText:p.a.createElement(u.Trans,{id:"Click to choose"}),value:this.props.value,onChange:function(t,n){return e.props.onChange(n)}}),p.a.createElement(h.a,{label:p.a.createElement(u.Trans,{id:"Choose"}),style:E.button,onClick:this.onChooseFolder}))}}]),t}(s.PureComponent)},1700:function(e,t,n){"use strict";var r=n(322),o=n(25),a=n(892),i=n(428),l=n.n(i),c=n(340),u=n.n(c),s=n(333),p=n.n(s),d=n(331);t.a=function(e){var t=e.exportStep,n=e.errored,i=e.onOpenExportFolder,c=e.onOpenLearnMore;return o.createElement(a.Stepper,{activeStep:"export"===t?0:"compress"===t?1:"done"===t?2:void 0,orientation:"vertical"},o.createElement(a.Step,null,o.createElement(a.StepLabel,null,"Game export"),o.createElement(a.StepContent,null,o.createElement(d.b,{alignItems:"center"},o.createElement(l.a,{size:20}),o.createElement(d.c,null),o.createElement("p",null,o.createElement(r.Trans,{id:"Export in progress..."}))))),o.createElement(a.Step,null,o.createElement(a.StepLabel,null,"Upload to build service"),o.createElement(a.StepContent,null,n?o.createElement("p",null,o.createElement(r.Trans,{id:"Can't compress the game. Please check that you have rights to write on this computer."})):o.createElement(d.b,{alignItems:"center"},o.createElement(l.a,{size:20}),o.createElement(d.c,null),o.createElement("p",null,o.createElement(r.Trans,{id:"Compressing..."}))))),o.createElement(a.Step,null,o.createElement(a.StepLabel,null,"Export finished"),o.createElement(a.StepContent,null,o.createElement(d.b,{expand:!0},"You can now create a game on Facebook Instant Games, if not already done, and upload the archive generated."),o.createElement(d.b,{expand:!0},o.createElement(p.a,{label:o.createElement(r.Trans,{id:"Open folder"}),onClick:i}),o.createElement(u.a,{label:o.createElement(r.Trans,{id:"Learn more about Instant Games publication"}),primary:!0,onClick:c})))))}},1701:function(e,t,n){"use strict";(function(e){var r=n(12),o=n(26),a=n(65),i=n(64),l=n(66),c=n(322),u=n(25),s=n.n(u),p=n(338),d=n(333),m=n.n(d),f=n(340),h=n.n(f),b=n(17),g=n(331),v=n(68),E=n(393),x=n(419),y=n(458),w=n(360),j=n(477),O=n(402),S=n.n(O),C=n(8),P=n.n(C)()("electron"),k=P?P.shell:null,D=e.gd,F=function(e){function t(){var e,n;Object(r.a)(this,t);for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];return(n=Object(a.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(l)))).state={exportFinishedDialogOpen:!1,outputDir:""},n.launchExport=function(){var e=function(e){return e},r=n.props.project;if(r&&(Object(b.d)("local-electron"),Object(j.a)(e,Object(j.b)(e,r)))){var o=n.state.outputDir;r.setLastCompilationDirectory(o),t.prepareExporter().then(function(e){var t=e.exporter,a=new D.MapStringBoolean;a.set("exportForElectron",!0),t.exportWholePixiProject(r,o,a),a.delete(),t.delete(),n.setState({exportFinishedDialogOpen:!0})}).catch(function(e){Object(v.a)("Unable to export the game",e)})}},n.openExportFolder=function(){k&&k.openItem(n.state.outputDir)},n}return Object(l.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.project;this.setState({outputDir:e?e.getLastCompilationDirectory():""})}},{key:"render",value:function(){var e,t=this,n=this.props.project;return n?s.a.createElement(g.a,{noMargin:!0},s.a.createElement(g.b,null,s.a.createElement(g.a,{noMargin:!0},s.a.createElement("p",null,s.a.createElement(c.Trans,{id:"This will export your game so that you can package it for Windows, macOS or Linux. You will need to install third-party tools (Node.js, Electron Builder) to package your game by yourself."})))),s.a.createElement(g.b,null,s.a.createElement(y.a,{type:"export",value:this.state.outputDir,defaultPath:n.getLastCompilationDirectory(),onChange:function(e){return t.setState({outputDir:e})},fullWidth:!0})),s.a.createElement(g.b,null,s.a.createElement(g.c,{expand:!0}),s.a.createElement(h.a,{label:s.a.createElement(c.Trans,{id:"Export"}),primary:!0,onClick:this.launchExport,disabled:!this.state.outputDir})),s.a.createElement(p.a,{title:(e="Export finished",e),actions:[s.a.createElement(m.a,{key:"open",label:s.a.createElement(c.Trans,{id:"Open folder"}),primary:!0,onClick:this.openExportFolder}),s.a.createElement(m.a,{key:"close",label:s.a.createElement(c.Trans,{id:"Close"}),primary:!1,onClick:function(){return t.setState({exportFinishedDialogOpen:!1})}})],secondaryActions:s.a.createElement(w.a,{key:"help",helpPagePath:"/publishing"}),modal:!0,open:this.state.exportFinishedDialogOpen},s.a.createElement("p",null,s.a.createElement(c.Trans,{id:"The game was properly exported. You can now use Electron Builder (you need Node.js installed and to use the command-line to run it) to create an executable."})))):null}}]),t}(u.Component);F.prepareExporter=function(){return new Promise(function(e,t){Object(E.findGDJS)(function(n){if(!n)return Object(v.a)("Could not find GDJS"),t();console.info("GDJS found in ",n);var r=S()(new D.AbstractFileSystemJS,x.a),o=new D.Exporter(r,n);e({exporter:o})})})},t.a=F}).call(this,n(3))},1702:function(e,t,n){"use strict";var r=n(12),o=n(26),a=n(65),i=n(64),l=n(66),c=n(25),u=(n(549),n(8)),s=n.n(u),p=n(74),d=s()("electron"),m=d?d.ipcRenderer:null,f=function(e){function t(){return Object(r.a)(this,t),Object(a.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;m&&(m.on("main-menu-open",function(t){return e._editor&&e._editor.chooseProject()}),m.on("main-menu-save",function(t){return e._editor&&e._editor.save()}),m.on("main-menu-close",function(t){return e._editor&&e._editor.askToCloseProject(function(){})}),m.on("main-menu-export",function(t){return e._editor&&e._editor.openExportDialog()}),m.on("main-menu-create",function(t){return e._editor&&e._editor.openCreateDialog()}),m.on("main-menu-open-project-manager",function(t){return e._editor&&e._editor.openProjectManager()}),m.on("main-menu-open-start-page",function(t){return e._editor&&e._editor.openStartPage()}),m.on("main-menu-open-debugger",function(t){return e._editor&&e._editor.openDebugger()}),m.on("main-menu-open-about",function(t){return e._editor&&e._editor.openAboutDialog()}),m.on("main-menu-open-preferences",function(t){return e._editor&&e._editor.openPreferences()}),m.on("main-menu-open-language",function(t){return e._editor&&e._editor.openLanguage()}),m.on("main-menu-open-profile",function(t){return e._editor&&e._editor.openProfile()}),m.on("update-status",function(t,n){return e._editor&&e._editor.setUpdateStatus(n)}))}},{key:"componentDidUpdate",value:function(){this.props.i18n.language!==this._language&&(this._buildAndSendMenuTemplate(),this._language=this.props.i18n.language)}},{key:"_buildAndSendMenuTemplate",value:function(){var e=this.props.i18n,t={label:e._({id:"File"}),submenu:[{label:e._({id:"Create a New Project..."}),accelerator:"CommandOrControl+N",onClickSendEvent:"main-menu-create"},{type:"separator"},{label:e._({id:"Open..."}),accelerator:"CommandOrControl+O",onClickSendEvent:"main-menu-open"},{type:"separator"},{label:e._({id:"Save"}),accelerator:"CommandOrControl+S",onClickSendEvent:"main-menu-save"},{label:e._({id:"Save as..."}),enabled:!1,onClickSendEvent:"main-menu-save-as"},{type:"separator"},{label:e._({id:"Export (web, iOS, Android)..."}),onClickSendEvent:"main-menu-export"},{type:"separator"},{label:e._({id:"Close Project"}),accelerator:"CommandOrControl+Shift+W",onClickSendEvent:"main-menu-close"}]};Object(p.a)()||t.submenu.push({type:"separator"},{label:e._({id:"My Profile"}),onClickSendEvent:"main-menu-open-profile"},{label:e._({id:"Preferences"}),onClickSendEvent:"main-menu-open-preferences"},{label:e._({id:"Language"}),onClickSendEvent:"main-menu-open-language"});var n={label:e._({id:"Edit"}),submenu:[{role:"undo"},{role:"redo"},{type:"separator"},{role:"cut"},{role:"copy"},{role:"paste"},{role:"pasteandmatchstyle"},{role:"delete"},{role:"selectall"}]},r={label:e._({id:"View"}),submenu:[{label:e._({id:"Show Project Manager"}),accelerator:"CommandOrControl+Alt+P",onClickSendEvent:"main-menu-open-project-manager"},{label:e._({id:"Show Start Page"}),onClickSendEvent:"main-menu-open-start-page"},{label:e._({id:"Open Debugger"}),onClickSendEvent:"main-menu-open-debugger"},{type:"separator"},{role:"toggledevtools"},{type:"separator"},{role:"togglefullscreen"}]},o={role:"window",submenu:[{role:"minimize"}]},a={role:"help",submenu:[{label:e._({id:"GDevelop website"}),onClickOpenLink:"http://gdevelop-app.com"},{type:"separator"},{label:e._({id:"Community Forums"}),onClickOpenLink:"https://forum.gdevelop-app.com"},{label:e._({id:"Community Discord Chat"}),onClickOpenLink:"https://discord.gg/rjdYHvj"},{type:"separator"},{label:e._({id:"Contribute to GDevelop"}),onClickOpenLink:"https://gdevelop-app.com/contribute/"},{label:e._({id:"Create Extensions for GDevelop"}),onClickOpenLink:"https://github.com/4ian/GDevelop/blob/master/newIDE/README-extensions.md"},{type:"separator"},{label:e._({id:"Help to Translate GDevelop"}),onClickOpenLink:"https://crowdin.com/project/gdevelop"},{label:e._({id:"Report a wrong translation"}),onClickOpenLink:"https://github.com/4ian/GDevelop/issues/969"}]};Object(p.a)()||a.submenu.push({type:"separator"},{label:e._({id:"About GDevelop"}),onClickSendEvent:"main-menu-open-about"});var i=[t,n,r,o,a];Object(p.a)()&&(i.unshift({label:e._({id:"GDevelop 5"}),submenu:[{label:e._({id:"About GDevelop"}),onClickSendEvent:"main-menu-open-about"},{type:"separator"},{label:e._({id:"My Profile"}),onClickSendEvent:"main-menu-open-profile"},{label:e._({id:"Preferences"}),onClickSendEvent:"main-menu-open-preferences"},{label:e._({id:"Language"}),onClickSendEvent:"main-menu-open-language"},{type:"separator"},{role:"services",submenu:[]},{type:"separator"},{role:"hide"},{role:"hideothers"},{role:"unhide"},{type:"separator"},{role:"quit"}]}),n.submenu.push({type:"separator"},{label:e._({id:"Speech"}),submenu:[{role:"startspeaking"},{role:"stopspeaking"}]}),o.submenu=[{role:"minimize"},{role:"zoom"},{type:"separator"},{role:"front"}]),m&&m.send("set-main-menu",i)}},{key:"render",value:function(){var e=this;return c.cloneElement(this.props.children,{ref:function(t){return e._editor=t}})}}]),t}(c.Component);t.a=f},1703:function(e,t,n){var r=n(899).loadExtension,o=n(8),a=n(1704).findJsExtensionModules;e.exports=function(e){var t=e.gd,n=e.objectsEditorService,i=e.objectsRenderingService,l=e.filterExamples;return{loadAllExtensions:function(e){return a({filterExamples:l}).then(function(a){return Promise.all(a.map(function(a){var l=null;try{l=o(a,{rethrowException:!0})}catch(c){return{extensionModulePath:a,result:{message:"Unable to import extension. Please check for any syntax error or error that would prevent it from being run.",error:!0,rawError:c}}}return l?(n&&l.registerEditorConfigurations&&l.registerEditorConfigurations(n),i&&l.registerInstanceRenderers&&l.registerInstanceRenderers(i),{extensionModulePath:a,result:r(e,t,t.JsPlatform.get(),l)}):{extensionModulePath:a,result:{error:!0,message:"Unknown error. Please check for any syntax error or error that would prevent it from being run."}}}))},function(e){throw console.error("Unable to find JS extensions modules"),e})}}}},1704:function(e,t,n){var r=n(393).findGDJS,o=n(8),a=o("path"),i=o("fs");e.exports={findJsExtensionModules:function(e){var t=e.filterExamples;return new Promise(function(e,n){r(function(r){if(!r)return n();var o=a.join(r,"Runtime","Extensions");console.info("Searching for JS extensions (file called JsExtension.js) in ".concat(o,"...")),i.readdir(o,function(r,l){if(r)return n(r);var c=l.filter(function(e){return!t||-1===e.indexOf("Example")});Promise.all(c.map(function(e){return t=a.join(o,e),new Promise(function(e){var n=a.join(t,"JsExtension.js");i.stat(n,function(t,r){return e(t?null:r.isFile()?n:null)})});var t})).then(function(t){e(t.filter(function(e){return!!e}))},n)})})})}}},1705:function(e,t,n){"use strict";n.d(t,"a",function(){return u});var r=n(8),o=n.n(r),a=n(534),i=n.n(a),l=o()("os"),c=o()("fs"),u=function(){var e=l.tmpdir()+"/GDGeneratedEventsFunctions";c.mkdir(e,function(e){e&&"EEXIST"!==e.code&&console.error("Unable to create the directory where to output events functions generated code: ",e)});var t=function(t){return"".concat(e,"/").concat(i()(t),".js")};return{getIncludeFileFor:function(e){return t(e)},writeFunctionCode:function(e,n){return new Promise(function(r,o){var a=t(e);c.writeFile(a,n,function(e){if(e)return o(e);r()})})},writeBehaviorCode:function(e,n){return new Promise(function(r,o){var a=t(e);c.writeFile(a,n,function(e){if(e)return o(e);r()})})}}}},1708:function(e,t,n){"use strict";n.d(t,"a",function(){return p});var r=n(12),o=n(363),a=n(8),i=n.n(a),l=i()("fs-extra"),c=i()("path"),u=i()("electron"),s=u?u.remote.dialog:null,p=function e(){Object(r.a)(this,e)};p.chooseEventsFunctionExtensionFile=function(){return new Promise(function(e,t){if(!s)return t("Not supported");var n=u.remote.getCurrentWindow();s.showSaveDialog(n,{title:"Export an extension of the project",filters:[{name:'GDevelop 5 "events based" extension',extensions:["json"]}],defaultPath:"Extension.json"},function(t){return e(t||null)})})},p.writeEventsFunctionsExtension=function(e,t){return function(e,t){if(!l)return Promise.reject(new Error("Filesystem is not supported."));try{var n=JSON.stringify(e,null,2);return l.ensureDir(c.dirname(t)).then(function(){return new Promise(function(e,r){l.writeFile(t,n,function(t){return t?r(t):e()})})})}catch(r){return Promise.reject(r)}}(Object(o.a)(e),t).catch(function(e){throw console.error("Unable to write the events function extension:",e),e})}},1709:function(e,t,n){"use strict";n.d(t,"a",function(){return u});var r=n(12),o=n(8),a=n.n(o),i=a()("fs"),l=a()("electron"),c=l?l.remote.dialog:null,u=function e(){Object(r.a)(this,e)};u.chooseEventsFunctionExtensionFile=function(){return new Promise(function(e,t){if(!c)return t("Not supported");var n=l.remote.getCurrentWindow();c.showOpenDialog(n,{title:"Import an extension in the project",properties:["openFile"],message:"Choose an extension file to import (.json file)",filters:[{name:'GDevelop 5 "events based" extension',extensions:["json"]}]},function(t){return t&&t.length?e(t[0]):e(null)})})},u.readEventsFunctionExtensionFile=function(e){return function(e){return i?new Promise(function(t,n){i.readFile(e,{encoding:"utf8"},function(r,o){if(r)return n(r);try{var a=JSON.parse(o);return t(a)}catch(i){return n(e+" is a corrupted/malformed file.")}})}):Promise.reject("Filesystem is not supported.")}(e)}},1961:function(e,t,n){"use strict";n.r(t),function(e){n.d(t,"create",function(){return k});var r=n(25),o=n.n(r),a=n(549),i=n(9),l=n(908),c=n(913),u=(n(40),n(134),n(1676)),s=n(1678),p=n(1681),d=n(1682),m=n(1683),f=n(1686),h=n(1687),b=n(1688),g=n(1691),v=n(1702),E=n(1703),x=n.n(E),y=n(1705),w=n(541),j=n(451),O=n(906),S=n(1708),C=n(1709),P=e.gd,k=function(e){i.a.setUpContextMenu();var t=i.a.getArguments();return t["server-port"]?o.a.createElement(O.a,{authentification:e,disableCheckForUpdates:!!t["disable-update-check"],eventsFunctionCodeWriter:null,eventsFunctionsExtensionWriter:null,eventsFunctionsExtensionOpener:null},function(n){var r=n.i18n,i=n.eventsFunctionsExtensionsState;return o.a.createElement(u.a,{serverPort:t["server-port"],isIntegrated:"integrated"===t.mode,editor:t.editor,editedElementName:t["edited-element-name"]},o.a.createElement(a.a,{i18n:r,eventsFunctionsExtensionsState:i,resourceSources:d.a,authentification:e,onReadFromPathOrURL:function(){return Promise.reject("Should never be called")},resourceExternalEditors:m.a,initialPathsOrURLsToOpen:[]}))}):o.a.createElement(O.a,{authentification:e,disableCheckForUpdates:!!t["disable-update-check"],eventsFunctionCodeWriter:Object(y.a)(),eventsFunctionsExtensionWriter:S.a,eventsFunctionsExtensionOpener:C.a},function(n){var r=n.i18n,u=n.eventsFunctionsExtensionsState;return o.a.createElement(v.a,{i18n:r},o.a.createElement(a.a,{i18n:r,eventsFunctionsExtensionsState:u,previewLauncher:o.a.createElement(b.a,null),exportDialog:o.a.createElement(l.a,{exporters:Object(g.a)()}),createDialog:o.a.createElement(c.a,{examplesComponent:s.a,startersComponent:p.a}),onSaveProject:f.a.saveProject,onAutoSaveProject:f.a.autoSaveProject,onChooseProject:h.a.chooseProjectFile,onReadFromPathOrURL:h.a.readProjectFile,shouldOpenAutosave:h.a.shouldOpenAutosave,resourceSources:d.a,resourceExternalEditors:m.a,authentification:e,extensionsLoader:x()({gd:P,objectsEditorService:w.a,objectsRenderingService:j.a,filterExamples:!i.a.isDev()}),initialPathsOrURLsToOpen:t._}))})}}.call(this,n(3))},419:function(e,t,n){"use strict";(function(e){var r=n(8),o=n.n(r),a=o()("fs-extra"),i=o()("path"),l=o()("os"),c=e.gd;t.a={mkDir:function(e){try{a.mkdirsSync(e)}catch(t){return console.log("mkDir("+e+") failed: "+t),!1}return!0},dirExists:function(e){return a.existsSync(e)},clearDir:function(e){var t=this;a.existsSync(e)&&a.readdirSync(e).forEach(function(n){var r=e+"/"+n;a.lstatSync(r).isDirectory()?t.clearDir(r):a.unlinkSync(r)})},getTempDir:function(){return l.tmpdir()},fileNameFrom:function(e){return this._isExternalURL(e)?e:(e=this._translateURL(e),i.basename(e))},dirNameFrom:function(e){return this._isExternalURL(e)?"":(e=this._translateURL(e),i.dirname(e))},makeAbsolute:function(e,t){return this._isExternalURL(e)?e:(e=this._translateURL(e),this.isAbsolute(t)||(t=i.resolve(t)),i.resolve(t,i.normalize(e)))},makeRelative:function(e,t){return this._isExternalURL(e)?e:(e=this._translateURL(e),i.relative(t,i.normalize(e)))},isAbsolute:function(e){return!!this._isExternalURL(e)||(0===e.length||((e=this._translateURL(e)).length>0&&"/"===e.charAt(0)||e.length>1&&":"===e.charAt(1)))},copyFile:function(e,t){if(this._isExternalURL(e))return!0;e=this._translateURL(e);try{e!==t&&a.copySync(e,t)}catch(n){return console.log("copyFile("+e+", "+t+") failed: "+n),!1}return!0},copyDir:function(e,t){throw new Error("copyDir was never tested, please check that it does what you want to.")},writeToFile:function(e,t){try{a.outputFileSync(e,t)}catch(n){return console.log("writeToFile("+e+", ...) failed: "+n),!1}return!0},readFile:function(e){try{return a.readFileSync(e).toString()}catch(t){return console.log("readFile("+e+") failed: "+t),""}},readDir:function(e,t){t=t.toUpperCase();var n=new c.VectorString;try{a.existsSync(e)&&a.readdirSync(e).forEach(function(r){0!==t.length&&-1===r.toUpperCase().indexOf(t,r.length-t.length)||n.push_back(e+"/"+r)})}catch(r){console.log("readDir("+e+","+t+") failed: "+r)}return n},fileExists:function(e){e=this._translateURL(e);try{return a.statSync(e).isFile()}catch(t){return!1}},_isExternalURL:function(e){return"http"===e.substr(0,4)||"ftp"===e.substr(0,4)},_translateURL:function(e){return"g/"!==e.substr(0,2)&&"g\\"!==e.substr(0,2)||(e=e.substr(2)),e}}}).call(this,n(3))},458:function(e,t,n){"use strict";n.d(t,"a",function(){return x});var r=n(334),o=n(12),a=n(26),i=n(65),l=n(64),c=n(66),u=n(322),s=n(25),p=n.n(s),d=n(345),m=n.n(d),f=n(333),h=n.n(f),b=n(8),g=n.n(b)()("electron"),v=g?g.remote.dialog:null,E={container:{position:"relative",display:"flex",alignItems:"baseline"},button:{marginLeft:10},textField:{flex:1}},x=function(e){function t(){var e,n;Object(o.a)(this,t);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(n=Object(i.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(a))))._onChooseFolder=function(e){var t=e.title,r=e.message;if(v&&g){var o=g.remote.getCurrentWindow();v.showOpenDialog(o,{title:t,properties:["openDirectory","createDirectory"],message:r,defaultPath:n.props.defaultPath},function(e){e&&e.length&&n.props.onChange(e[0])})}},n._getTitleAndMessage=function(e){var t=n.props.type;return"export"===t?{title:e._({id:"Choose an export folder"}),message:e._({id:"Choose where to export the game"})}:"create-game"===t?{title:e._({id:"Choose a folder for the new game"}),message:e._({id:"Choose where to create the game"})}:{title:void 0,message:void 0}},n}return Object(c.a)(t,e),Object(a.a)(t,[{key:"render",value:function(){var e=this;return p.a.createElement(u.I18n,null,function(t){var n=t.i18n;return p.a.createElement("div",{style:Object(r.a)({},E.container,{width:e.props.fullWidth?"100%":void 0})},p.a.createElement(m.a,{style:E.textField,floatingLabelText:e.props.floatingLabelText,floatingLabelFixed:!0,type:"text",hintText:p.a.createElement(u.Trans,{id:"Click to choose"}),value:e.props.value,onChange:function(t,n){return e.props.onChange(n)}}),p.a.createElement(h.a,{label:p.a.createElement(u.Trans,{id:"Choose folder"}),style:E.button,onClick:function(){return e._onChooseFolder(e._getTitleAndMessage(n))}}))})}}]),t}(s.PureComponent)},670:function(e,t,n){"use strict";n.d(t,"a",function(){return l});var r=n(8),o=n.n(r),a=o()("fs"),i=o()("archiver"),l=function(e){var t=e.path,n=e.outputFilename;return new Promise(function(e,r){if(!a||!i)return r(new Error("Archiver unavailable"));var o=a.createWriteStream(n),l=i("zip",{zlib:{level:9}});o.on("close",function(){console.log("Archive written at ".concat(n,", ").concat(l.pointer()," total bytes.")),e(n)}),l.on("error",function(e){r(e)}),l.pipe(o),l.directory(t,!1),l.finalize()})}},885:function(e,t,n){"use strict";n.d(t,"a",function(){return p});var r=n(8),o=n.n(r),a=o()("electron"),i=o()("path"),l=a?a.remote.app:null,c=o()("fs"),u=o()("process"),s=function(e,t,n){return c.access(e,c.constants.R_OK,function(r){r?n():t(e)})},p=function(e){if(!u||!c)return"";var t=l?l.getAppPath():u.cwd();s(i.join(t,"..","examples"),e,function(){s(i.join(t,"..","..","app","resources","examples"),e,function(){e(null)})})}},886:function(e,t,n){"use strict";n.d(t,"a",function(){return c});var r=n(377),o=n(8),a=n.n(o),i=a()("path"),l=a()("fs-extra"),c=function(e){if(!i)return e;var t=Object(r.a)("My project",function(t){try{l.accessSync(i.join(e,t))}catch(n){return!1}return!0});return i.join(e,t)}},888:function(e,t,n){"use strict";n.d(t,"b",function(){return l}),n.d(t,"d",function(){return c}),n.d(t,"c",function(){return u}),n.d(t,"a",function(){return s});var r=n(348),o=n(377),a=n(534),i=n.n(a),l=function(e,t){var n=t.pathSeparator,o=t.getArrayItemReferenceName,a=t.shouldSplit,i=t.isReferenceMagicPropertyName,l=[],c=function(e,t){var n;return l.push({reference:e,object:t}),n={},Object(r.a)(n,i,!0),Object(r.a)(n,"referenceTo",e),n};return function e(t,r,i){if(null!==t&&"object"===typeof t)if(Array.isArray(t))for(var l in t){var u=r+n+"*";if(a(u)){var s=t[l],p=o(s,i),d=i+n+p;t[l]=c(d,s),e(s,u,d)}else{var m=i+n+l;e(t[l],u,m)}}else for(var f in t){var h=r+n+f,b=i+n+f;if(a(h)){var g=t[f];t[f]=c(b,g),e(g,h,b)}else e(t[f],h,b)}}(e,"",""),l},c=function(e,t){var n=t.isReferenceMagicPropertyName,r=t.getReferencePartialObject,o=t.maxUnsplitDepth;return function e(t,a){if(void 0!==o&&a>=o)return Promise.resolve();if(null!==t&&"object"===typeof t){var i=Object.keys(t);if(i)return Promise.all(i.map(function(o){var i,l=!0===(i=t[o])[n]?i:null;return l?r(l.referenceTo).then(function(n){return t[o]=n,e(t[o],a+1)}):e(t[o],a+1)})).then(function(){})}return Promise.resolve()}(e,0)},u=function(e){return function(t){return e.has(t)}},s=function(e){var t={};return function(n,r){var a=n[e];if("string"!==typeof a)throw new Error("Property ".concat(e," is not a string"));t[r]=t[r]||{};var l=Object(o.a)(i()(a),function(e){return!!t[r][e]});return t[r][l]=!0,l}}},889:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return T});var r=n(12),o=n(26),a=n(65),i=n(64),l=n(66),c=n(322),u=n(25),s=n.n(u),p=n(338),d=n(333),m=n.n(d),f=n(340),h=n.n(f),b=n(17),g=n(331),v=n(68),E=n(393),x=n(419),y=n(458),w=n(402),j=n.n(w),O=n(8),S=n.n(O),C=n(9),P=n(430),k=n(410),D=S()("electron"),F=D?D.shell:null,_=e.gd,T=function(e){function t(){var e,n;Object(r.a)(this,t);for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];return(n=Object(a.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(l)))).state={exportFinishedDialogOpen:!1,outputDir:""},n.launchExport=function(){var e=n.props.project;if(e){Object(b.d)("local");var r=n.state.outputDir;e.setLastCompilationDirectory(r),t.prepareExporter().then(function(t){var o=t.exporter,a=new _.MapStringBoolean;o.exportWholePixiProject(e,r,a),a.delete(),o.delete(),n.setState({exportFinishedDialogOpen:!0})}).catch(function(e){Object(v.a)("Unable to export the game",e)})}},n.openExportFolder=function(){F&&F.openItem(n.state.outputDir)},n.openItchioHelp=function(){C.a.openExternalURL(Object(P.a)("/publishing/publishing-to-itch-io"))},n.openLearnMore=function(){C.a.openExternalURL(Object(P.a)("/publishing"))},n}return Object(l.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.project;this.setState({outputDir:e?e.getLastCompilationDirectory():""})}},{key:"render",value:function(){var e=this,t=this.props.project;return t?s.a.createElement(g.a,{noMargin:!0},s.a.createElement(g.b,null,s.a.createElement(c.Trans,{id:"This will export your game to a folder that you can then upload on a website or on game hosting like itch.io."})),s.a.createElement(g.b,null,s.a.createElement(y.a,{type:"export",value:this.state.outputDir,defaultPath:t.getLastCompilationDirectory(),onChange:function(t){return e.setState({outputDir:t})},fullWidth:!0})),s.a.createElement(g.b,null,s.a.createElement(g.c,{expand:!0}),s.a.createElement(h.a,{label:s.a.createElement(c.Trans,{id:"Export"}),primary:!0,onClick:this.launchExport,disabled:!this.state.outputDir})),s.a.createElement(p.a,{title:s.a.createElement(c.Trans,{id:"Export finished"}),actions:[s.a.createElement(m.a,{key:"open",label:s.a.createElement(c.Trans,{id:"Open folder"}),primary:!0,onClick:this.openExportFolder}),s.a.createElement(m.a,{key:"close",label:s.a.createElement(c.Trans,{id:"Close"}),primary:!1,onClick:function(){return e.setState({exportFinishedDialogOpen:!1})}})],modal:!0,open:this.state.exportFinishedDialogOpen},s.a.createElement("p",null,s.a.createElement(c.Trans,{id:"You can now upload the game to a web hosting to play to the game."})),s.a.createElement(k.a,{kind:"warning"},s.a.createElement(c.Trans,{id:"Your game won't work if you open index.html on your computer. You must upload it to a web hosting (Kongregate, Itch.io, etc...) or a web server to run it."})),s.a.createElement(g.c,null),s.a.createElement(h.a,{fullWidth:!0,primary:!0,onClick:function(){return e.openItchioHelp()},label:s.a.createElement(c.Trans,{id:"Publish your game on Itch.io"})}),s.a.createElement(m.a,{fullWidth:!0,onClick:function(){return e.openLearnMore()},label:s.a.createElement(c.Trans,{id:"Learn more about publishing"})}))):null}}]),t}(u.Component);T.prepareExporter=function(){return new Promise(function(e,t){Object(E.findGDJS)(function(n){if(!n)return Object(v.a)("Could not find GDJS"),t();console.info("GDJS found in ",n);var r=j()(new _.AbstractFileSystemJS,x.a),o=new _.Exporter(r,n);e({exporter:o})})})}}).call(this,n(3))},890:function(e,t,n){"use strict";var r=n(322),o=n(25),a=n(340),i=n.n(a),l=n(331),c=n(380);t.a=function(e){var t=e.subscription,n=e.limit,a=e.onChangeSubscription;if(!n)return o.createElement(c.a,null);var u=t&&!!t.planId,s=t&&!t.planId;return o.createElement(l.a,{noMargin:!0},o.createElement("p",null,o.createElement(r.Trans,{id:"You have {0} remaining builds for today (out of {1}).",values:{0:Math.max(n.max-n.current,0),1:n.max}})),u&&n.limitReached&&o.createElement("p",null,o.createElement(r.Trans,{id:"Need more power? You can upgrade to a new plan to increase the limit!"})),u&&n.limitReached&&o.createElement(l.b,{justifyContent:"center",alignItems:"center"},o.createElement(i.a,{label:o.createElement(r.Trans,{id:"Upgrade my account"}),onClick:a,primary:!0})),s&&o.createElement("p",null,o.createElement(r.Trans,{id:"You don't have a subscription. Get one to increase the limits!"})),s&&o.createElement(l.b,{justifyContent:"center",alignItems:"center"},o.createElement(i.a,{label:o.createElement(r.Trans,{id:"Get a subscription"}),onClick:a,primary:!0})))}},891:function(e,t,n){"use strict";var r=n(322),o=n(25),a=n(892),i=n(428),l=n.n(i),c=n(442),u=n.n(c),s=n(331),p=n(884),d=n(344),m={stepper:{flex:1}};t.a=function(e){var t=e.exportStep,n=e.onDownload,i=e.build,c=e.uploadMax,f=e.uploadProgress,h=e.errored,b=e.showSeeAllMyBuildsExplanation;return o.createElement(a.Stepper,{activeStep:"export"===t?0:"compress"===t||"upload"===t?1:"waiting-for-build"===t||"build"===t?2:void 0,orientation:"vertical",style:m.stepper},o.createElement(a.Step,null,o.createElement(a.StepLabel,null,"Game export"),o.createElement(a.StepContent,null,o.createElement(s.b,{alignItems:"center"},o.createElement(l.a,{size:20}),o.createElement(s.c,null),o.createElement("p",null,o.createElement(r.Trans,{id:"Export in progress..."}))))),o.createElement(a.Step,null,o.createElement(a.StepLabel,null,"Upload to build service"),o.createElement(a.StepContent,null,h?o.createElement("p",null,o.createElement(r.Trans,{id:"Can't upload your game to the build service. Please check your internet connection or try again later."})):"compress"===t?o.createElement(s.b,{alignItems:"center"},o.createElement(l.a,{size:20}),o.createElement(s.c,null),o.createElement("p",null,o.createElement(r.Trans,{id:"Compressing before upload..."}))):o.createElement(s.b,{alignItems:"center",expand:!0},o.createElement(u.a,{style:{flex:1},max:c,value:f,mode:"determinate"})))),o.createElement(a.Step,null,o.createElement(a.StepLabel,null,"Build and download"),o.createElement(a.StepContent,null,!i&&o.createElement("p",null,o.createElement(r.Trans,{id:"Build is starting..."})),i&&o.createElement(p.a,{build:i,onDownload:n}),b&&o.createElement(d.a,null,o.createElement(r.Trans,{id:"If you close this window while the build is being done, you can see its progress and download the game later by clicking on See All My Builds below."})))))}},892:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Stepper=t.StepLabel=t.StepContent=t.StepButton=t.Step=void 0;var r=c(n(608)),o=c(n(609)),a=c(n(610)),i=c(n(514)),l=c(n(611));function c(e){return e&&e.__esModule?e:{default:e}}t.Step=r.default,t.StepButton=o.default,t.StepContent=a.default,t.StepLabel=i.default,t.Stepper=l.default}}]);
//# sourceMappingURL=local-app.0ab51173.chunk.js.map