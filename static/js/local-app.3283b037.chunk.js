(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{1795:function(e,t,n){"use strict";(function(e){var r=n(7),o=n(17),a=n(37),i=n(36),c=n(38),l=n(1796),u=n(16),s=n.n(u),p=n(5),d=e.gd,f=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(a.a)(this,Object(i.a)(t).call(this,e))).editorOpened=!1,n.lastShowCommandDate=0,n.sendingUpdate=!1,n.editor=null,n._serializedObject=null,n._hideIfNotJustShown=function(){Date.now()-n.lastShowCommandDate<100?console.info("The editor is not hidden because it receive a `show` command less than 100ms ago."):p.b.hide()},n.sendUpdate=function(){if(console.log("Sending update to server editor"),n.state.loading)console.warn("Already loading an update, abort send");else if(n.sendingUpdate)console.warn("Already sending an update, abort send");else if(n.editor){n.sendingUpdate=!0;var e=n.editor.getSerializedElements();for(var t in e)e.hasOwnProperty(t)&&n.bridge.send("update",e[t],t);n.sendingUpdate=!1,console.log("Update send done")}else console.error("No children editor to use to get the updated edited element")},n.editObject=function(e){n.sendUpdate(),n.bridge.send("editObject",e.getName())},n.requestUpdate=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1]?"requestForcedUpdate":"requestUpdate";n.bridge.send(t,void 0,e)},n._onUpdateReceived=function(e,t){console.log("Received project update from server"),""===t?n.setState({loading:!0},function(){return setTimeout(function(){n._serializedObject&&n._serializedObject.delete();var t=performance.now();n._serializedObject=d.Serializer.fromJSObject(e);var r=performance.now();console.log("Call to gd.Serializer.fromJSObject took "+(r-t)+" milliseconds."),n.editor.loadFromSerializedProject(n._serializedObject,function(){n._serializedObject.delete(),n._serializedObject=null,n.editorOpened||(n.editorOpened=!0,"scene-editor"===n.props.editor&&n.editor.openLayout(n.props.editedElementName,{openEventsEditor:!1}),"external-layout-editor"===n.props.editor&&n.editor.openExternalLayout(n.props.editedElementName)),n.setState({loading:!1})})})}):console.warn("Not implemented: received ".concat(t," update from server"))},n.bridge=new l.a,n.state={loading:!1},n.bridge.isSupported()?(console.log("Connection to an external editor..."),n.bridge.onReceive(function(e,t,r){"update"===e?n._onUpdateReceived(t,r):"setBounds"===e?n.props.isIntegrated&&p.b.setBounds(t.x,t.y,t.width,t.height):"show"===e?(n.lastShowCommandDate=Date.now(),p.b.show()):"hide"===e&&n.props.isIntegrated&&p.b.hide(t&&t.forceHide)}),n.bridge.onConnected(function(){n.requestUpdate("",!0)}),p.b.onBlur(function(){n.props.isIntegrated&&n._hideIfNotJustShown(),n.sendUpdate()}),p.b.onFocus(function(){n.requestUpdate()}),p.b.onClose(function(){n.sendUpdate()}),n.bridge.connectTo(n.props.serverPort)):console.warn("Connection to an external editor is not supported"),n}return Object(c.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;return s.a.cloneElement(this.props.children,{loading:this.state.loading,ref:function(t){return e.editor=t},requestUpdate:function(){return e.requestUpdate("",!0)},onEditObject:this.editObject,integratedEditor:!0})}}]),t}(u.Component);t.a=f}).call(this,n(3))},1796:function(e,t,n){"use strict";var r=n(4),o=n.n(r),a=n(602),i=o()("electron"),c=i?i.remote.require("buffer").Buffer:null;function l(){this.net=o()("net"),this.client=null,this.connected=!1,this._onReceiveCb=null}l.prototype.isSupported=function(){return!!this.net},l.prototype.connectTo=function(e){if(this.net){var t=this;this.client=new this.net.Socket,this.client.connect(e,"localhost",function(){console.log("Connection made on port",e),t.connected=!0,t._onConnected&&t._onConnected()});var n="",r=c.from([0]);this.client.on("data",function(e){for(var o=0,a=e.indexOf(r);o<e.length;)-1===a?(n+=e.slice(o),o=e.length):(n+=e.slice(o,a),t._receive(n),n="",o=a+1,a=e.indexOf(r,o))}),this.client.on("close",function(){t.connected=!1})}},l.prototype.send=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(!this.connected)return!1;var r=JSON.stringify({command:e,scope:n,payload:t});return this.client.write(r+"\0"),!0},l.prototype._receive=function(e){var t;console.info("Received data"),Object(a.a)(function(){try{t=JSON.parse(e)}catch(n){console.warn("Received invalid data (JSON parse failed)",n)}},function(e){return console.info("JSON parse took ".concat(e,"ms"))}),t&&this._onReceiveCb&&this._onReceiveCb(t.command,t.payload,t.scope)},l.prototype.onReceive=function(e){this._onReceiveCb=e},l.prototype.onConnected=function(e){this._onConnected=e},t.a=l},1798:function(e,t,n){"use strict";(function(e){n.d(t,"b",function(){return b}),n.d(t,"c",function(){return E}),n.d(t,"a",function(){return w});var r=n(192),o=n(225),a=n(4),i=n.n(a),c=n(882),l=n(279),u=n(231),s=n.n(u),p=e.gd,d=i()("fs-extra"),f=i()("path"),m=i()("electron"),h=m?m.remote.dialog:null,v=function(e,t){if(!d)return Promise.reject(new Error("Filesystem is not supported."));try{var n=JSON.stringify(e,null,2);return d.ensureDir(f.dirname(t)).then(function(){return new Promise(function(e,r){d.writeFile(t,n,function(t){return t?r(t):e()})})})}catch(r){return Promise.reject(r)}},g=function(e,t,n){var r=Object(o.b)(e);if(e.isFolderProject()){var a=Object(c.b)(r,{pathSeparator:"/",getArrayItemReferenceName:Object(c.a)("name"),shouldSplit:Object(c.c)(new Set(["/layouts/*","/externalLayouts/*","/externalEvents/*","/layouts/*","/eventsFunctionsExtensions/*"])),isReferenceMagicPropertyName:"__REFERENCE_TO_SPLIT_OBJECT"});return Promise.all(a.map(function(e){return v(e.object,f.join(n,e.reference)+".json").catch(function(e){throw console.error("Unable to write a partial file:",e),e})})).then(function(){return v(r,t).catch(function(e){throw console.error("Unable to write the split project:",e),e})})}return v(r,t).catch(function(e){throw console.error("Unable to write the project:",e),e})},b=function(e,t){var n=t.fileIdentifier;if(!n)return Promise.reject('Project file is empty, "Save as" should have been called?');var r=f.dirname(n);return g(e,n,r).then(function(){return{wasSaved:!0,fileMetadata:t}})},E=function(e,t){var n=t?t.fileIdentifier:"",o=s()(new p.AbstractFileSystemJS,l.a),a=m.remote.getCurrentWindow(),i={defaultPath:n,filters:[{name:"GDevelop 5 project",extensions:["json"]}]};if(!h)return Promise.reject("Unsupported");var c=h.showSaveDialog(a,i);if(!c)return Promise.resolve({wasSaved:!1,fileMetadata:t});var u=f.dirname(c);return p.ProjectResourcesCopier.copyAllResourcesTo(e,o,u,!0,!1,!0),e.setProjectFile(c),g(e,c,u).then(function(){return{wasSaved:!0,fileMetadata:Object(r.a)({},t,{fileIdentifier:c})}})},w=function(e,t){var n=t.fileIdentifier+".autosave";v(Object(o.b)(e),n).catch(function(e){throw console.error("Unable to write ".concat(n,":"),e),e})}}).call(this,n(3))},1807:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return _});var r=n(7),o=n(17),a=n(37),i=n(36),c=n(38),l=n(187),u=n(16),s=n.n(u),p=n(2181),d=n(199),f=n(351),m=n(198),h=n(11),v=n(189),g=n(211),b=n(879),E=n(4),w=n.n(E),y=n(880),x=n(254),j=n(878),O=n(606),P=w()("path"),S=w()("electron"),C=S?S.remote.app:null,D=w()("fs-extra"),k=e.gd,_=function(e){function t(){var e,n;Object(r.a)(this,t);for(var o=arguments.length,c=new Array(o),l=0;l<o;l++)c[l]=arguments[l];return(n=Object(a.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(c)))).state={outputPath:Object(y.a)(P&&C?P.join(C.getPath("documents"),"GDevelop projects"):"")},n._handleChangePath=function(e){return n.setState({outputPath:e})},n}return Object(c.a)(t,e),Object(o.a)(t,[{key:"createFromExample",value:function(e,t){var n=this,r=this.state.outputPath;D&&r&&Object(b.a)(function(o){try{D.mkdirsSync(r),D.copySync(P.join(o,t),r)}catch(a){return void Object(j.b)(e,r,a)}n.props.onOpen(O.a,{fileIdentifier:P.join(r,t+".json")}),Object(h.h)(t)})}},{key:"createEmptyGame",value:function(e){var t=this.state.outputPath;if(D&&t){try{D.mkdirsSync(t)}catch(o){return void Object(j.b)(e,t,o)}var n=k.ProjectHelper.createNewGDJSProject(),r=P.join(t,"game.json");n.setProjectFile(r),this.props.onCreate(n,O.a,{fileIdentifier:r}),Object(h.h)("")}}},{key:"render",value:function(){var e=this;return s.a.createElement(l.I18n,null,function(t){var n=t.i18n;return s.a.createElement(v.a,{noMargin:!0},s.a.createElement(v.b,null,s.a.createElement(v.a,null,s.a.createElement(m.a,null,s.a.createElement(l.Trans,{id:"Choose a game to use as a starter:"})))),s.a.createElement(v.b,null,s.a.createElement(v.a,{expand:!0,noMargin:!0},s.a.createElement(g.a,null,s.a.createElement(g.b,{leftIcon:s.a.createElement(x.a,{iconSize:40,src:"res/starters_icons/platformer.png"}),primaryText:s.a.createElement(l.Trans,{id:"Platformer"}),secondaryText:s.a.createElement(l.Trans,{id:"A simple platform game, with coins to collect, moving platforms and enemies."}),secondaryTextLines:2,onClick:function(){return e.createFromExample(n,"platformer")}}),s.a.createElement(g.b,{leftIcon:s.a.createElement(x.a,{iconSize:40,src:"res/starters_icons/space-shooter.png"}),primaryText:s.a.createElement(l.Trans,{id:"8-bit Space Shooter"}),secondaryText:s.a.createElement(l.Trans,{id:"A beautiful, retro side-scrolling shooter where you must defeat incoming enemies with your mecha transforming spaceship. Huge boss included!"}),secondaryTextLines:2,onClick:function(){return e.createFromExample(n,"space-shooter")}}),s.a.createElement(g.b,{leftIcon:s.a.createElement(x.a,{iconSize:40,src:"res/starters_icons/geometry-monster.png"}),primaryText:s.a.createElement(l.Trans,{id:"Geometry Monster"}),secondaryText:s.a.createElement(l.Trans,{id:"A hyper casual endless game where you have to collect shapes and avoid bombs, with a progressively increasing difficulty."}),secondaryTextLines:2,onClick:function(){return e.createFromExample(n,"geometry-monster")}}),s.a.createElement(g.b,{leftIcon:s.a.createElement(x.a,{iconSize:40,src:"res/starters_icons/isometric-game.png"}),primaryText:s.a.createElement(l.Trans,{id:"Isometric game"}),secondaryText:s.a.createElement(l.Trans,{id:"An example of an isometric game where you can explore a map with your character."}),secondaryTextLines:2,onClick:function(){return e.createFromExample(n,"isometric-game")}}),s.a.createElement(g.b,{leftIcon:s.a.createElement(x.a,{iconSize:40,src:"res/starters_icons/downhill-bike-physics-demo.png"}),primaryText:"Downhill Bike Racing",secondaryText:s.a.createElement(l.Trans,{id:"An example of a 2D physics based game, where players have to reach the end as fast as possible."}),secondaryTextLines:2,onClick:function(){return e.createFromExample(n,"downhill-bike-physics-demo")}}),s.a.createElement(g.b,{leftIcon:s.a.createElement(x.a,{iconSize:40,src:"res/starters_icons/pairs.png"}),primaryText:"Pairs",secondaryText:s.a.createElement(l.Trans,{id:"Find all matching pairs of cards in this relaxing game. Use tweens to create smooth, natural animations with a few events."}),secondaryTextLines:2,onClick:function(){return e.createFromExample(n,"pairs")}}),s.a.createElement(g.b,{primaryText:s.a.createElement(l.Trans,{id:"Empty game"}),secondaryText:s.a.createElement(l.Trans,{id:"Start a new game from scratch."}),secondaryTextLines:2,onClick:function(){return e.createEmptyGame(n)}})),s.a.createElement(v.b,{alignItems:"center",justifyContent:"center"},s.a.createElement(d.a,{label:s.a.createElement(l.Trans,{id:"See examples"}),onClick:function(){return e.props.onShowExamples()}})))),s.a.createElement(p.a,null),s.a.createElement(v.b,{expand:!0},s.a.createElement(v.a,{expand:!0},s.a.createElement(f.a,{fullWidth:!0,value:e.state.outputPath,onChange:e._handleChangePath,type:"create-game"}))))})}}]),t}(u.Component)}).call(this,n(3))},1808:function(e,t,n){"use strict";(function(e){var r,o,a,i,c,l=n(7),u=n(17),s=n(37),p=n(36),d=n(38),f=n(16),m=n(315),h=n(4),v=n.n(h),g=v()("electron"),b=g?g.remote.dialog:null,E=v()("path"),w=e.gd;t.a=[{name:"localAudioFileOpener",displayName:"Choose a new audio file",kind:"audio",component:(r=function(e){function t(){var e,n;Object(l.a)(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(n=Object(s.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(o)))).chooseResources=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=n.props.i18n,o={multiSelections:t,title:r._({id:"Choose an audio file"}),name:r._({id:"Audio files"}),extensions:["wav","mp3","ogg"]};return y(r,e,o).then(function(t){return t.map(function(t){var n=new w.AudioResource,r=E.dirname(e.getProjectFile());return n.setFile(E.relative(r,t)),n.setName(E.relative(r,t)),n})})},n}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return null}}]),t}(f.Component),r)},{name:"localFileOpener",displayName:"Choose a new image",kind:"image",component:(o=function(e){function t(){var e,n;Object(l.a)(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(n=Object(s.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(o)))).chooseResources=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=n.props.i18n,o={multiSelections:t,title:r._({id:"Choose an image"}),name:r._({id:"Image files"}),extensions:["png","jpg"]};return y(r,e,o).then(function(t){return t.map(function(t){var n=new w.ImageResource,r=E.dirname(e.getProjectFile());return n.setFile(E.relative(r,t)),n.setName(E.relative(r,t)),n})})},n}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return null}}]),t}(f.Component),o)},{name:"localFontFileOpener",displayName:"Choose a new font file",kind:"font",component:(a=function(e){function t(){var e,n;Object(l.a)(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(n=Object(s.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(o)))).chooseResources=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=n.props.i18n,o={multiSelections:t,title:r._({id:"Choose a font file"}),name:r._({id:"Font files"}),extensions:["ttf","otf"]};return y(r,e,o).then(function(t){return t.map(function(t){var n=new w.FontResource,r=E.dirname(e.getProjectFile());return n.setFile(E.relative(r,t)),n.setName(E.relative(r,t)),n})})},n}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return null}}]),t}(f.Component),a)},{name:"localVideoFileOpener",displayName:"Choose a new video file",kind:"video",component:(i=function(e){function t(){var e,n;Object(l.a)(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(n=Object(s.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(o)))).chooseResources=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=n.props.i18n,o={multiSelections:t,title:r._({id:"Choose a video file"}),name:r._({id:"Video files"}),extensions:["mp4"]};return y(r,e,o).then(function(t){return t.map(function(t){var n=new w.VideoResource,r=E.dirname(e.getProjectFile());return n.setFile(E.relative(r,t)),n.setName(E.relative(r,t)),n})})},n}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return null}}]),t}(f.Component),i)},{name:"localJsonFileOpener",displayName:"Choose a new json file",kind:"json",component:(c=function(e){function t(){var e,n;Object(l.a)(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(n=Object(s.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(o)))).chooseResources=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=n.props.i18n,o={multiSelections:t,title:r._({id:"Choose a json file"}),name:r._({id:"JSON file"}),extensions:["json"]};return y(r,e,o).then(function(t){return t.map(function(t){var n=new w.JsonResource,r=E.dirname(e.getProjectFile());return n.setFile(E.relative(r,t)),n.setName(E.relative(r,t)),n})})},n}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return null}}]),t}(f.Component),c)}];var y=function(e,t,n){return new Promise(function(r,o){if(!b)return o("Not supported");var a=["openFile"];n.multiSelections&&a.push("multiSelections");var i=E.dirname(t.getProjectFile()),c=g.remote.getCurrentWindow();b.showOpenDialog(c,{title:n.title,properties:a,filters:[{name:n.name,extensions:n.extensions}],defaultPath:i},function(n){if(!n)return r([]);if(n.filter(function(e){return!Object(m.g)(t,e)}).length&&confirm(e._({id:"This/these file(s) are outside the project folder. Would you like to make a copy of them in your project folder first (recommended)?"})))return r(Object(m.c)(t,n));return r(n)})})}}).call(this,n(3))},1809:function(e,t,n){"use strict";var r=n(1810),o=n(1811),a=n(1812),i=n(11),c=[{name:"piskel-app",displayName:"Edit with Piskel",kind:"image",edit:function(e){return Object(i.e)("piskel"),Object(r.a)(e)}},{name:"Jfxr",displayName:"Create/Edit a Sound effect with Jfxr (*.wav)",kind:"audio",edit:function(e){return Object(i.e)("jfxr"),Object(o.a)(e)}},{name:"Yarn",displayName:"Create/Edit a Dialogue Tree with Yarn (*.json)",kind:"json",edit:function(e){return Object(i.e)("yarn"),Object(a.a)(e)}}];t.a=c},1810:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return p});var r=n(192),o=n(4),a=n.n(o),i=n(315),c=a()("electron"),l=a()("path"),u=c?c.ipcRenderer:null,s=e.gd,p=function(e){var t=e.project,n=(e.resourcesLoader,e.resourceNames),o=e.singleFrame,a=e.onChangesSaved,p=e.extraOptions;if(c&&u){var d=n.map(function(e,n){return{resourcePath:Object(i.e)(t,e),resourceName:e,originalIndex:n}}),f=l.dirname(t.getProjectFile()),m=Object(r.a)({},p,{resources:d,singleFrame:o,projectPath:f});u.removeAllListeners("piskel-changes-saved"),u.on("piskel-changes-saved",function(e,n,r,o){var c=o.data?{pskl:o}:null,u=t.getResourcesManager();n.forEach(function(e){e.name=l.relative(f,e.path),Object(i.d)(t,new s.ImageResource,e.name)}),n[0].metadata=c,n[0].newAnimationName=r,o.singleFrame?(c&&u.getResource(l.relative(f,n[0].path)).setMetadata(JSON.stringify(c)),a(n)):a(n)}),u.send("piskel-open-then-load-animation",m)}}}).call(this,n(3))},1811:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return s});var r=n(4),o=n.n(r),a=n(315),i=o()("electron"),c=o()("path"),l=i?i.ipcRenderer:null,u=e.gd,s=function(e){var t=e.project,n=(e.resourcesLoader,e.resourceNames),r=e.onChangesSaved,o=(e.resourcePath,e.extraOptions);if(i&&l){var s=c.dirname(t.getProjectFile()),p={resourcePath:Object(a.e)(t,n[0]),externalEditorData:o.externalEditorData,projectPath:s};l.removeAllListeners("jfxr-changes-saved"),l.on("jfxr-changes-saved",function(e,n,o){var i=c.relative(s,n);Object(a.d)(t,new u.AudioResource,i);var l={jfxr:o};t.getResourcesManager().getResource(i).setMetadata(JSON.stringify(l)),r([{metadata:l,name:i}])}),l.send("jfxr-create-wav",p)}}}).call(this,n(3))},1812:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return s});var r=n(4),o=n.n(r),a=n(315),i=o()("electron"),c=o()("path"),l=i?i.ipcRenderer:null,u=e.gd,s=function(e){var t=e.project,n=(e.resourcesLoader,e.resourceNames),r=e.onChangesSaved,o=(e.resourcePath,e.extraOptions);if(i&&l){var s=c.dirname(t.getProjectFile()),p={resourcePath:Object(a.e)(t,n[0]),externalEditorData:o.externalEditorData,projectPath:s};l.removeAllListeners("yarn-changes-saved"),l.on("yarn-changes-saved",function(e,n){var o=c.relative(s,n);Object(a.d)(t,new u.JsonResource,o),r([{name:o}])}),l.send("yarn-create-json",p)}}}).call(this,n(3))},1813:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return P});var r=n(7),o=n(17),a=n(37),i=n(36),c=n(38),l=n(187),u=n(16),s=n(279),p=n(4),d=n.n(p),f=n(602),m=n(268),h=n(1814),v=n(231),g=n.n(v),b=n(1815),E=n(522),w=d()("electron"),y=d()("path"),x=w?w.ipcRenderer:null,j=w?w.remote.BrowserWindow:null,O=e.gd,P=function(e){function t(){var e,n;Object(r.a)(this,t);for(var o=arguments.length,c=new Array(o),l=0;l<o;l++)c[l]=arguments[l];return(n=Object(a.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(c)))).canDoNetworkPreview=function(){return!0},n.state={networkPreviewDialogOpen:!1,networkPreviewHost:null,networkPreviewPort:null,networkPreviewError:null,previewGamePath:null,devToolsOpen:!1,previewBrowserWindowConfig:null},n._subscriptionChecker=null,n._openPreviewBrowserWindow=function(){if(j&&n.state.previewBrowserWindowConfig&&n.state.previewGamePath){var e=new j(n.state.previewBrowserWindowConfig);e.loadURL("file://".concat(n.state.previewGamePath,"/index.html")),e.webContents.on("devtools-opened",function(){n.setState({devToolsOpen:!0})}),e.webContents.on("devtools-closed",function(){n.setState({devToolsOpen:!1})}),n.state.devToolsOpen&&e.openDevTools()}},n._openPreviewWindow=function(e,t,r){n.setState({previewBrowserWindowConfig:{width:e.getGameResolutionWidth(),height:e.getGameResolutionHeight(),useContentSize:!0,title:"Preview of ".concat(e.getName()),backgroundColor:"#000000"},previewGamePath:t},function(){if(r.networkPreview){if(!x)return;x.removeAllListeners("serve-folder-done"),x.removeAllListeners("local-network-ips"),x.on("serve-folder-done",function(e,t,r){t?n.setState({networkPreviewDialogOpen:!0,networkPreviewPort:null,networkPreviewHost:null,networkPreviewError:t}):n.setState({networkPreviewDialogOpen:!0,networkPreviewPort:r.port}),setTimeout(function(){return n._checkSubscription()})}),x.on("local-network-ips",function(e,t){n.setState({networkPreviewHost:Object(b.a)(t)})}),x.send("serve-folder",{root:t}),x.send("get-local-network-ips")}else n._openPreviewBrowserWindow()})},n._prepareExporter=function(){return Object(m.findGDJS)().then(function(e){var t=e.gdjsRoot;console.info("GDJS found in ",t);var n=g()(new O.AbstractFileSystemJS,s.a);return{outputDir:y.join(n.getTempDir(),"preview"),exporter:new O.Exporter(n,t)}})},n.launchLayoutPreview=function(e,t,r){return e&&t?n._prepareExporter().then(function(o){var a=o.outputDir,i=o.exporter;Object(f.a)(function(){i.exportLayoutForPixiPreview(e,t,a),i.delete(),n._openPreviewWindow(e,a,r)},function(e){return console.info("Preview took ".concat(e,"ms"))})}):Promise.reject()},n.launchExternalLayoutPreview=function(e,t,r,o){return e&&r?n._prepareExporter().then(function(a){var i=a.outputDir,c=a.exporter;Object(f.a)(function(){c.exportExternalLayoutForPixiPreview(e,t,r,i),c.delete(),n._openPreviewWindow(e,i,o)},function(e){return console.info("Preview took ".concat(e,"ms"))})}):Promise.reject()},n._checkSubscription=function(){return!n._subscriptionChecker||n._subscriptionChecker.checkHasSubscription()},n}return Object(c.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this,t=this.state,n=t.networkPreviewDialogOpen,r=t.networkPreviewHost,o=t.networkPreviewPort,a=t.networkPreviewError;return u.createElement(u.Fragment,null,u.createElement(E.a,{ref:function(t){return e._subscriptionChecker=t},onChangeSubscription:function(){e.setState({networkPreviewDialogOpen:!1}),e.props.onChangeSubscription&&e.props.onChangeSubscription()},id:"Preview over wifi",title:u.createElement(l.Trans,{id:"Preview over wifi"}),mode:"try"}),u.createElement(h.a,{open:n,url:r&&o?"".concat(r,":").concat(o):null,error:a,onClose:function(){return e.setState({networkPreviewDialogOpen:!1})},onExport:this.props.onExport,onRunPreviewLocally:this._openPreviewBrowserWindow}))}}]),t}(u.Component)}).call(this,n(3))},1814:function(e,t,n){"use strict";n.d(t,"a",function(){return v});var r=n(7),o=n(17),a=n(37),i=n(36),c=n(38),l=n(187),u=n(16),s=n(201),p=n(197),d=n(206),f=n(198),m=n(189),h=n(259),v=function(e){function t(){return Object(r.a)(this,t),Object(a.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props,t=e.url,n=e.open,r=e.error,o=e.onExport,a=e.onClose,i=e.onRunPreviewLocally;return n?u.createElement(s.a,{actions:[u.createElement(p.a,{key:"close",label:u.createElement(l.Trans,{id:"Close"}),primary:!0,onClick:a})],secondaryActions:[o&&u.createElement(p.a,{key:"export",label:u.createElement(l.Trans,{id:"Export game"}),onClick:o}),u.createElement(p.a,{key:"run-preview-locally",label:u.createElement(l.Trans,{id:"Run on this computer"}),onClick:i})],modal:!0,open:n,onRequestClose:a},r&&u.createElement(m.b,null,u.createElement(f.a,null,u.createElement(l.Trans,{id:"Unable to start the server for the preview! Make sure that you are authorized to run servers on this computer. Otherwise, use classic preview to test your game."}))),!r&&!t&&u.createElement(h.a,null),!r&&t&&u.createElement("div",null,u.createElement(m.b,null,u.createElement(f.a,null,u.createElement(l.Trans,{id:"Your preview is ready! On your mobile or tablet, open your browser and enter in the address bar:"}))),u.createElement(d.b,{value:t,fullWidth:!0}),u.createElement(m.b,null,u.createElement(f.a,null,u.createElement(l.Trans,{id:"Please note that your device should be connected on the same network as this computer."}))))):null}}]),t}(u.Component)},1815:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r=function(e){if(!e.length)return null;var t=e.find(function(e){return 0===e.indexOf("192.168")});return t||((t=e.find(function(e){return 0===e.indexOf("192")}))||e[0])}},1816:function(e,t,n){"use strict";n.d(t,"a",function(){return x});var r=n(187),o=n(16),a=n(1817),i=n(1818),c=n(1819),l=n(1820),u=n(1821),s=n(1823),p=n(1824),d=n(1825),f=n(894),m=n.n(f),h=n(896),v=n.n(h),g=n(895),b=n.n(g),E=n(891),w=n(892),y=n(893),x=function(){return[{name:o.createElement(r.Trans,{id:"Android (& iOS coming soon)"}),renderIcon:function(e){return o.createElement(m.a,e)},helpPage:"/publishing/android_and_ios",description:o.createElement(r.Trans,{id:"Package your game for Android directly from GDevelop. iOS support is coming soon!"}),key:"localonlinecordovaexport",exportPipeline:s.a},{name:o.createElement(r.Trans,{id:"Web (upload online)"}),renderIcon:function(e){return o.createElement(y.a,e)},helpPage:"/publishing/web",description:o.createElement(r.Trans,{id:"Upload your game online directly from GDevelop and share the link to players. Play to your game using your browser on computers and mobile phones."}),key:"localonlinewebexport",exportPipeline:d.a},{name:o.createElement(r.Trans,{id:"Local folder"}),renderIcon:function(e){return o.createElement(b.a,e)},helpPage:"/publishing/html5_game_in_a_local_folder",description:o.createElement(r.Trans,{id:"Build the game locally as a HTML5 game. You can then publish it on website like Kongregate, Game Jolt, itch.io, Poki..."}),key:"localexport",exportPipeline:c.a,advanced:!0},{name:o.createElement(r.Trans,{id:"Facebook Instant Games"}),renderIcon:function(e){return o.createElement(E.a,e)},helpPage:"/publishing/publishing-to-facebook-instant-games",description:o.createElement(r.Trans,{id:"Package your game as a Facebook Instant Games that can be played on Facebook Messenger."}),key:"localfacebookinstantgames",exportPipeline:u.a,advanced:!0},{name:o.createElement(r.Trans,{id:"iOS & Android (manual)"}),renderIcon:function(e){return o.createElement(w.a,e)},helpPage:"/publishing/android_and_ios_with_cordova",description:o.createElement(r.Trans,{id:"Build the game locally as a Cordova project, and export it manually to iOS or Android with Cordova developers tools."}),key:"localcordovaexport",exportPipeline:a.a,advanced:!0},{name:o.createElement(r.Trans,{id:"Windows/macOS/Linux"}),renderIcon:function(e){return o.createElement(v.a,e)},helpPage:"/publishing/windows-macos-linux",description:o.createElement(r.Trans,{id:"Package your game as an app for Windows, macOS or Linux directly from GDevelop."}),key:"localonlineelectronexport",exportPipeline:p.a},{name:o.createElement(r.Trans,{id:"Windows/macOS/Linux (manual)"}),renderIcon:function(e){return o.createElement(v.a,e)},helpPage:"/publishing/windows-macos-linux-with-electron",description:o.createElement(r.Trans,{id:"Build the game locally and export it manually to Windows, macOS or Linux with third-party developer tools."}),key:"localelectronexport",exportPipeline:i.a,advanced:!0},{name:o.createElement(r.Trans,{id:"Cocos2d-JS"}),renderIcon:function(e){return o.createElement(m.a,e)},helpPage:"/publishing/android_and_ios_with_cocos2d-js",description:o.createElement(r.Trans,{id:"Export your game using Cocos2d-JS game engine. The game can be compiled for Android or iOS if you install Cocos2d-JS developer tools."}),key:"localcocos2dexport",exportPipeline:l.a,experimental:!0}]}},1817:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return E});var r=n(187),o=n(16),a=n.n(o),i=n(199),c=n(189),l=n(268),u=n(279),s=n(351),p=n(231),d=n.n(p),f=n(4),m=n.n(f),h=n(883),v=m()("electron"),g=v?v.shell:null,b=e.gd,E={name:"local-cordova",getInitialExportState:function(e){return{outputDir:e.getLastCompilationDirectory()}},canLaunchBuild:function(e){return!!e.outputDir},renderHeader:function(e){var t=e.project,n=e.exportState,r=e.updateExportState;return a.a.createElement(c.a,{noMargin:!0},a.a.createElement(c.b,null,a.a.createElement(c.a,{noMargin:!0},a.a.createElement(h.b,null))),a.a.createElement(c.b,null,a.a.createElement(s.a,{type:"export",value:n.outputDir,defaultPath:t.getLastCompilationDirectory(),onChange:function(e){r(function(){return{outputDir:e}})},fullWidth:!0})))},renderLaunchButtonLabel:function(){return a.a.createElement(r.Trans,{id:"Package"})},prepareExporter:function(e){return Object(l.findGDJS)().then(function(e){var t=e.gdjsRoot;console.info("GDJS found in ",t);var n=d()(new b.AbstractFileSystemJS,u.a);return{exporter:new b.Exporter(n,t)}})},launchExport:function(e,t){var n=t.exporter,r=new b.MapStringBoolean;return r.set("exportForCordova",!0),n.exportWholePixiProject(e.project,e.exportState.outputDir,r),r.delete(),n.delete(),Promise.resolve(null)},launchResourcesDownload:function(e,t){return Promise.resolve(null)},launchCompression:function(e,t){return Promise.resolve(null)},renderDoneFooter:function(e){var t=e.exportState,n=(e.onClose,function(){g&&g.openItem(t.outputDir)});return a.a.createElement(h.a,{renderGameButton:function(){return a.a.createElement(i.a,{key:"open",label:a.a.createElement(r.Trans,{id:"Open folder"}),primary:!0,onClick:n})}})}}}).call(this,n(3))},1818:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return E});var r=n(187),o=n(16),a=n.n(o),i=n(199),c=n(189),l=n(268),u=n(279),s=n(351),p=n(231),d=n.n(p),f=n(4),m=n.n(f),h=n(884),v=m()("electron"),g=v?v.shell:null,b=e.gd,E={name:"local-electron",getInitialExportState:function(e){return{outputDir:e.getLastCompilationDirectory()}},canLaunchBuild:function(e){return!!e.outputDir},renderHeader:function(e){var t=e.project,n=e.exportState,r=e.updateExportState;return a.a.createElement(c.a,{noMargin:!0},a.a.createElement(c.b,null,a.a.createElement(c.a,{noMargin:!0},a.a.createElement(h.b,null))),a.a.createElement(c.b,null,a.a.createElement(s.a,{type:"export",value:n.outputDir,defaultPath:t.getLastCompilationDirectory(),onChange:function(e){r(function(){return{outputDir:e}})},fullWidth:!0})))},renderLaunchButtonLabel:function(){return a.a.createElement(r.Trans,{id:"Package"})},prepareExporter:function(e){return Object(l.findGDJS)().then(function(e){var t=e.gdjsRoot;console.info("GDJS found in ",t);var n=d()(new b.AbstractFileSystemJS,u.a);return{exporter:new b.Exporter(n,t)}})},launchExport:function(e,t){var n=t.exporter,r=new b.MapStringBoolean;return r.set("exportForElectron",!0),n.exportWholePixiProject(e.project,e.exportState.outputDir,r),r.delete(),n.delete(),Promise.resolve(null)},launchResourcesDownload:function(e,t){return Promise.resolve(null)},launchCompression:function(e,t){return Promise.resolve(null)},renderDoneFooter:function(e){var t=e.exportState,n=(e.onClose,function(){g&&g.openItem(t.outputDir)});return a.a.createElement(h.a,{renderGameButton:function(){return a.a.createElement(i.a,{key:"open",label:a.a.createElement(r.Trans,{id:"Open folder"}),primary:!0,onClick:n})}})}}}).call(this,n(3))},1819:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return E});var r=n(187),o=n(16),a=n.n(o),i=n(199),c=n(189),l=n(268),u=n(279),s=n(351),p=n(231),d=n.n(p),f=n(4),m=n.n(f),h=n(885),v=m()("electron"),g=v?v.shell:null,b=e.gd,E={name:"local-html5",getInitialExportState:function(e){return{outputDir:e.getLastCompilationDirectory()}},canLaunchBuild:function(e){return!!e.outputDir},renderHeader:function(e){var t=e.project,n=e.exportState,r=e.updateExportState;return a.a.createElement(c.a,{noMargin:!0},a.a.createElement(c.b,null,a.a.createElement(h.b,null)),a.a.createElement(c.b,null,a.a.createElement(s.a,{type:"export",value:n.outputDir,defaultPath:t.getLastCompilationDirectory(),onChange:function(e){r(function(){return{outputDir:e}})},fullWidth:!0})))},renderLaunchButtonLabel:function(){return a.a.createElement(r.Trans,{id:"Export as a HTML5 game"})},prepareExporter:function(e){return Object(l.findGDJS)().then(function(e){var t=e.gdjsRoot;console.info("GDJS found in ",t);var n=d()(new b.AbstractFileSystemJS,u.a);return{exporter:new b.Exporter(n,t)}})},launchExport:function(e,t){var n=t.exporter,r=new b.MapStringBoolean;return n.exportWholePixiProject(e.project,e.exportState.outputDir,r),r.delete(),n.delete(),Promise.resolve(null)},launchResourcesDownload:function(e,t){return Promise.resolve(null)},launchCompression:function(e,t){return Promise.resolve(null)},renderDoneFooter:function(e){var t=e.exportState;e.onClose;return a.a.createElement(h.a,{renderGameButton:function(){return a.a.createElement(i.a,{fullWidth:!0,primary:!0,onClick:function(){g&&g.openItem(t.outputDir)},label:a.a.createElement(r.Trans,{id:"Open the exported game folder"})})}})}}}).call(this,n(3))},1820:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return y});var r=n(192),o=n(187),a=n(16),i=n.n(a),c=n(199),l=n(189),u=n(268),s=n(279),p=n(351),d=n(231),f=n.n(d),m=n(4),h=n.n(m),v=n(366),g=n(886),b=h()("electron"),E=b?b.shell:null,w=e.gd,y={name:"local-cocos2d",getInitialExportState:function(e){return{outputDir:e.getLastCompilationDirectory(),debugMode:!1}},canLaunchBuild:function(e){return!!e.outputDir},renderHeader:function(e){var t=e.project,n=e.exportState,a=e.updateExportState;return i.a.createElement(l.a,{noMargin:!0},i.a.createElement(l.b,null,i.a.createElement(g.b,null)),i.a.createElement(l.b,null,i.a.createElement(p.a,{type:"export",value:n.outputDir,defaultPath:t.getLastCompilationDirectory(),onChange:function(e){a(function(t){return Object(r.a)({},t,{outputDir:e})})},fullWidth:!0})),i.a.createElement(l.b,null,i.a.createElement(v.a,{onToggle:function(e,t){return a(function(e){return Object(r.a)({},e,{debugMode:t})})},toggled:n.debugMode,labelPosition:"right",label:i.a.createElement(o.Trans,{id:"Debug mode (show FPS counter and stats in the bottom left)"})})))},renderLaunchButtonLabel:function(){return i.a.createElement(o.Trans,{id:"Package"})},prepareExporter:function(e){return Object(u.findGDJS)().then(function(e){var t=e.gdjsRoot;console.info("GDJS found in ",t);var n=f()(new w.AbstractFileSystemJS,s.a);return{exporter:new w.Exporter(n,t)}})},launchExport:function(e,t){var n=t.exporter;return n.exportWholeCocos2dProject(e.project,e.exportState.debugMode,e.exportState.outputDir),n.delete(),Promise.resolve(null)},launchResourcesDownload:function(e,t){return Promise.resolve(null)},launchCompression:function(e,t){return Promise.resolve(null)},renderDoneFooter:function(e){var t=e.exportState,n=(e.onClose,function(){E&&E.openItem(t.outputDir)});return i.a.createElement(g.a,{renderGameButton:function(){return i.a.createElement(c.a,{key:"open",label:i.a.createElement(o.Trans,{id:"Open folder"}),primary:!0,onClick:n})}})}}}).call(this,n(3))},1821:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return x});var r=n(187),o=n(16),a=n.n(o),i=n(199),c=n(189),l=n(268),u=n(279),s=n(231),p=n.n(s),d=n(4),f=n.n(d),m=n(1822),h=n(473),v=n(887),g=f()("path"),b=f()("electron"),E=b?b.remote.app:null,w=b?b.shell:null,y=e.gd,x={name:"local-facebook-instant-games",getInitialExportState:function(e){return{archiveOutputFilename:E?g.join(E.getPath("documents"),"fb-instant-game.zip"):""}},canLaunchBuild:function(e){return!!e.archiveOutputFilename},renderHeader:function(e){e.project;var t=e.exportState,n=e.updateExportState;return a.a.createElement(c.a,{noMargin:!0},a.a.createElement(c.b,null,a.a.createElement(v.b,null)),a.a.createElement(c.b,null,a.a.createElement(m.a,{title:"Facebook Instant Games export zip file",message:"Choose where to save the exported file for Facebook Instant Games",filters:[{name:"Compressed file for Facebook Instant Games",extensions:["zip"]}],value:t.archiveOutputFilename,defaultPath:E?E.getPath("documents"):"",onChange:function(e){return n(function(){return{archiveOutputFilename:e}})},fullWidth:!0})))},renderLaunchButtonLabel:function(){return a.a.createElement(r.Trans,{id:"Package"})},prepareExporter:function(e){return Object(l.findGDJS)().then(function(e){var t=e.gdjsRoot;console.info("GDJS found in ",t);var n=p()(new y.AbstractFileSystemJS,u.a),r=new y.Exporter(n,t),o=g.join(n.getTempDir(),"FacebookInstantGamesExport");return n.mkDir(o),n.clearDir(o),{exporter:r,temporaryOutputDir:o}})},launchExport:function(e,t){var n=t.exporter,r=t.temporaryOutputDir,o=new y.MapStringBoolean;return o.set("exportForFacebookInstantGames",!0),n.exportWholePixiProject(e.project,r,o),o.delete(),n.delete(),Promise.resolve({temporaryOutputDir:r})},launchResourcesDownload:function(e,t){var n=t.temporaryOutputDir;return Promise.resolve({temporaryOutputDir:n})},launchCompression:function(e,t){var n=t.temporaryOutputDir;return Object(h.a)({path:n,outputFilename:e.exportState.archiveOutputFilename})},renderDoneFooter:function(e){var t=e.exportState,n=(e.onClose,function(){w&&g&&w.openItem(g.dirname(t.archiveOutputFilename))});return a.a.createElement(v.a,{renderGameButton:function(){return a.a.createElement(i.a,{key:"open",label:a.a.createElement(r.Trans,{id:"Open folder"}),primary:!0,onClick:n})}})}}}).call(this,n(3))},1822:function(e,t,n){"use strict";n.d(t,"a",function(){return E});var r=n(192),o=n(7),a=n(17),i=n(37),c=n(36),l=n(38),u=n(187),s=n(16),p=n.n(s),d=n(206),f=n(4),m=n.n(f),h=n(199),v=m()("electron"),g=v?v.remote.dialog:null,b={container:{position:"relative",display:"flex",alignItems:"baseline"},button:{marginLeft:10},textField:{flex:1}},E=function(e){function t(){var e,n;Object(o.a)(this,t);for(var r=arguments.length,a=new Array(r),l=0;l<r;l++)a[l]=arguments[l];return(n=Object(i.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(a)))).onChooseFolder=function(){if(g&&v){var e=v.remote.getCurrentWindow();g.showSaveDialog(e,{title:n.props.title,filters:n.props.filters,message:n.props.message,defaultPath:n.props.defaultPath},function(e){n.props.onChange(e||"")})}},n}return Object(l.a)(t,e),Object(a.a)(t,[{key:"render",value:function(){var e=this;return p.a.createElement("div",{style:Object(r.a)({},b.container,{width:this.props.fullWidth?"100%":void 0})},p.a.createElement(d.b,{margin:"dense",style:b.textField,type:"text",hintText:{id:"Choose a file"},value:this.props.value,onChange:function(t,n){return e.props.onChange(n)}}),p.a.createElement(h.a,{label:p.a.createElement(u.Trans,{id:"Choose"}),style:b.button,onClick:this.onChooseFolder}))}}]),t}(s.PureComponent)},1823:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return E});var r=n(187),o=n(16),a=n(231),i=n.n(a),c=n(289),l=n(268),u=n(473),s=n(4),p=n.n(s),d=n(279),f=n(888),m=p()("path"),h=p()("os"),v=p()("electron"),g=v?v.ipcRenderer:null,b=e.gd,E={name:"local-online-cordova",onlineBuildType:"cordova-build",getInitialExportState:function(){return null},canLaunchBuild:function(){return!0},renderHeader:function(){return o.createElement(f.a,null)},renderLaunchButtonLabel:function(){return o.createElement(r.Trans,{id:"Packaging for Android"})},prepareExporter:function(e){return Object(l.findGDJS)().then(function(e){var t=e.gdjsRoot;console.info("GDJS found in ",t);var n=i()(new b.AbstractFileSystemJS,d.a),r=new b.Exporter(n,t),o=m.join(n.getTempDir(),"OnlineCordovaExport");return n.mkDir(o),n.clearDir(o),{exporter:r,temporaryOutputDir:o}})},launchExport:function(e,t){var n=t.exporter,r=t.temporaryOutputDir,o=new b.MapStringBoolean;return o.set("exportForCordova",!0),n.exportWholePixiProject(e.project,r,o),o.delete(),n.delete(),Promise.resolve({temporaryOutputDir:r})},launchResourcesDownload:function(e,t){var n=t.temporaryOutputDir;return Promise.resolve({temporaryOutputDir:n})},launchCompression:function(e,t){var n=t.temporaryOutputDir,r=h.tmpdir();return Object(u.a)({path:n,outputFilename:m.join(r,"game-archive.zip")})},launchUpload:function(e,t){return g?(g.removeAllListeners("s3-file-upload-progress"),g.removeAllListeners("s3-file-upload-done"),new Promise(function(n,r){g.on("s3-file-upload-progress",function(t,n,r){e.updateStepProgress(n,r)}),g.on("s3-file-upload-done",function(e,t,o){if(t)return r(t);n(o)}),g.send("s3-file-upload",t)})):Promise.reject("No support for upload")},launchOnlineBuild:function(e,t,n){var r=t.getAuthorizationHeader,o=t.profile;return o?Object(c.a)(r,o.uid,n):Promise.reject(new Error("User is not authenticated"))}}}).call(this,n(3))},1824:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return E});var r=n(187),o=n(16),a=n(231),i=n.n(a),c=n(289),l=n(268),u=n(473),s=n(4),p=n.n(s),d=n(279),f=n(889),m=p()("path"),h=p()("os"),v=p()("electron"),g=v?v.ipcRenderer:null,b=e.gd,E={name:"local-online-electron",onlineBuildType:"electron-build",getInitialExportState:function(){return{targets:["winExe"]}},canLaunchBuild:function(e){return!!e.targets.length},renderHeader:function(e){return o.createElement(f.a,e)},renderLaunchButtonLabel:function(){return o.createElement(r.Trans,{id:"Package"})},prepareExporter:function(e){return Object(l.findGDJS)().then(function(e){var t=e.gdjsRoot;console.info("GDJS found in ",t);var n=i()(new b.AbstractFileSystemJS,d.a),r=new b.Exporter(n,t),o=m.join(n.getTempDir(),"OnlineElectronExport");return n.mkDir(o),n.clearDir(o),{exporter:r,temporaryOutputDir:o}})},launchExport:function(e,t){var n=t.exporter,r=t.temporaryOutputDir,o=new b.MapStringBoolean;return o.set("exportForElectron",!0),n.exportWholePixiProject(e.project,r,o),o.delete(),n.delete(),Promise.resolve({temporaryOutputDir:r})},launchResourcesDownload:function(e,t){var n=t.temporaryOutputDir;return Promise.resolve({temporaryOutputDir:n})},launchCompression:function(e,t){var n=t.temporaryOutputDir,r=h.tmpdir();return Object(u.a)({path:n,outputFilename:m.join(r,"game-archive.zip")})},launchUpload:function(e,t){return g?(g.removeAllListeners("s3-file-upload-progress"),g.removeAllListeners("s3-file-upload-done"),new Promise(function(n,r){g.on("s3-file-upload-progress",function(t,n,r){e.updateStepProgress(n,r)}),g.on("s3-file-upload-done",function(e,t,o){if(t)return r(t);n(o)}),g.send("s3-file-upload",t)})):Promise.reject("No support for upload")},launchOnlineBuild:function(e,t,n){var r=t.getAuthorizationHeader,o=t.profile;return o?Object(c.b)(r,o.uid,n,e.targets):Promise.reject(new Error("User is not authenticated"))}}}).call(this,n(3))},1825:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return E});var r=n(187),o=n(16),a=n(231),i=n.n(a),c=n(289),l=n(268),u=n(473),s=n(4),p=n.n(s),d=n(279),f=n(890),m=p()("path"),h=p()("os"),v=p()("electron"),g=v?v.ipcRenderer:null,b=e.gd,E={name:"local-online-web",onlineBuildType:"web-build",getInitialExportState:function(){return null},canLaunchBuild:function(){return!0},renderHeader:function(){return o.createElement(f.a,null)},renderLaunchButtonLabel:function(){return o.createElement(r.Trans,{id:"Publish online"})},prepareExporter:function(e){return Object(l.findGDJS)().then(function(e){var t=e.gdjsRoot;console.info("GDJS found in ",t);var n=i()(new b.AbstractFileSystemJS,d.a),r=new b.Exporter(n,t),o=m.join(n.getTempDir(),"OnlineWebExport");return n.mkDir(o),n.clearDir(o),{exporter:r,temporaryOutputDir:o}})},launchExport:function(e,t){var n=t.exporter,r=t.temporaryOutputDir,o=new b.MapStringBoolean;return n.exportWholePixiProject(e.project,r,o),o.delete(),n.delete(),Promise.resolve({temporaryOutputDir:r})},launchResourcesDownload:function(e,t){var n=t.temporaryOutputDir;return Promise.resolve({temporaryOutputDir:n})},launchCompression:function(e,t){var n=t.temporaryOutputDir,r=h.tmpdir();return Object(u.a)({path:n,outputFilename:m.join(r,"game-archive.zip")})},launchUpload:function(e,t){return g?(g.removeAllListeners("s3-file-upload-progress"),g.removeAllListeners("s3-file-upload-done"),new Promise(function(n,r){g.on("s3-file-upload-progress",function(t,n,r){e.updateStepProgress(n,r)}),g.on("s3-file-upload-done",function(e,t,o){if(t)return r(t);n(o)}),g.send("s3-file-upload",t)})):Promise.reject("No support for upload")},launchOnlineBuild:function(e,t,n){var r=t.getAuthorizationHeader,o=t.profile;return o?Object(c.c)(r,o.uid,n):Promise.reject(new Error("User is not authenticated"))}}}).call(this,n(3))},1826:function(e,t,n){"use strict";var r=n(7),o=n(17),a=n(37),i=n(36),c=n(38),l=n(16),u=(n(480),n(4)),s=n.n(u),p=n(43),d=s()("electron"),f=d?d.ipcRenderer:null,m=function(e){function t(){return Object(r.a)(this,t),Object(a.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;f&&(f.on("main-menu-open",function(t){return e._editor&&e._editor.chooseProject()}),f.on("main-menu-save",function(t){return e._editor&&e._editor.saveProject()}),f.on("main-menu-save-as",function(t){return e._editor&&e._editor.saveProjectAs()}),f.on("main-menu-close",function(t){return e._editor&&e._editor.askToCloseProject()}),f.on("main-menu-export",function(t){return e._editor&&e._editor.openExportDialog()}),f.on("main-menu-create",function(t){return e._editor&&e._editor.openCreateDialog()}),f.on("main-menu-open-project-manager",function(t){return e._editor&&e._editor.openProjectManager()}),f.on("main-menu-open-start-page",function(t){return e._editor&&e._editor.openStartPage()}),f.on("main-menu-open-debugger",function(t){return e._editor&&e._editor.openDebugger()}),f.on("main-menu-open-about",function(t){return e._editor&&e._editor.openAboutDialog()}),f.on("main-menu-open-preferences",function(t){return e._editor&&e._editor.openPreferences()}),f.on("main-menu-open-language",function(t){return e._editor&&e._editor.openLanguage()}),f.on("main-menu-open-profile",function(t){return e._editor&&e._editor.openProfile()}),f.on("update-status",function(t,n){return e._editor&&e._editor.setUpdateStatus(n)}),this._buildAndSendMenuTemplate())}},{key:"componentDidUpdate",value:function(){this.props.i18n.language!==this._language&&(this._buildAndSendMenuTemplate(),this._language=this.props.i18n.language)}},{key:"_buildAndSendMenuTemplate",value:function(){var e=this.props.i18n,t={label:e._({id:"File"}),submenu:[{label:e._({id:"Create a New Project..."}),accelerator:"CommandOrControl+N",onClickSendEvent:"main-menu-create"},{type:"separator"},{label:e._({id:"Open..."}),accelerator:"CommandOrControl+O",onClickSendEvent:"main-menu-open"},{type:"separator"},{label:e._({id:"Save"}),accelerator:"CommandOrControl+S",onClickSendEvent:"main-menu-save"},{label:e._({id:"Save as..."}),accelerator:"CommandOrControl+Alt+S",onClickSendEvent:"main-menu-save-as"},{type:"separator"},{label:e._({id:"Export (web, iOS, Android)..."}),onClickSendEvent:"main-menu-export"},{type:"separator"},{label:e._({id:"Close Project"}),accelerator:"CommandOrControl+Shift+W",onClickSendEvent:"main-menu-close"}]};Object(p.a)()||t.submenu.push({type:"separator"},{label:e._({id:"My Profile"}),onClickSendEvent:"main-menu-open-profile"},{label:e._({id:"Preferences"}),onClickSendEvent:"main-menu-open-preferences"},{label:e._({id:"Language"}),onClickSendEvent:"main-menu-open-language"});var n={label:e._({id:"Edit"}),submenu:[{role:"undo"},{role:"redo"},{type:"separator"},{role:"cut"},{role:"copy"},{role:"paste"},{role:"pasteandmatchstyle"},{role:"delete"},{role:"selectall"}]},r={label:e._({id:"View"}),submenu:[{label:e._({id:"Show Project Manager"}),accelerator:"CommandOrControl+Alt+P",onClickSendEvent:"main-menu-open-project-manager"},{label:e._({id:"Show Start Page"}),onClickSendEvent:"main-menu-open-start-page"},{label:e._({id:"Open Debugger"}),onClickSendEvent:"main-menu-open-debugger"},{type:"separator"},{role:"toggledevtools"},{type:"separator"},{role:"togglefullscreen"}]},o={role:"window",submenu:[{role:"minimize"}]},a={role:"help",submenu:[{label:e._({id:"GDevelop website"}),onClickOpenLink:"http://gdevelop-app.com"},{type:"separator"},{label:e._({id:"Community Forums"}),onClickOpenLink:"https://forum.gdevelop-app.com"},{label:e._({id:"Community Discord Chat"}),onClickOpenLink:"https://discord.gg/rjdYHvj"},{type:"separator"},{label:e._({id:"Contribute to GDevelop"}),onClickOpenLink:"https://gdevelop-app.com/contribute/"},{label:e._({id:"Create Extensions for GDevelop"}),onClickOpenLink:"https://github.com/4ian/GDevelop/blob/master/newIDE/README-extensions.md"},{type:"separator"},{label:e._({id:"Help to Translate GDevelop"}),onClickOpenLink:"https://crowdin.com/project/gdevelop"},{label:e._({id:"Report a wrong translation"}),onClickOpenLink:"https://github.com/4ian/GDevelop/issues/969"}]};Object(p.a)()||a.submenu.push({type:"separator"},{label:e._({id:"About GDevelop"}),onClickSendEvent:"main-menu-open-about"});var i=[t,n,r,o,a];Object(p.a)()&&(i.unshift({label:e._({id:"GDevelop 5"}),submenu:[{label:e._({id:"About GDevelop"}),onClickSendEvent:"main-menu-open-about"},{type:"separator"},{label:e._({id:"My Profile"}),onClickSendEvent:"main-menu-open-profile"},{label:e._({id:"Preferences"}),onClickSendEvent:"main-menu-open-preferences"},{label:e._({id:"Language"}),onClickSendEvent:"main-menu-open-language"},{type:"separator"},{role:"services",submenu:[]},{type:"separator"},{role:"hide"},{role:"hideothers"},{role:"unhide"},{type:"separator"},{role:"quit"}]}),n.submenu.push({type:"separator"},{label:e._({id:"Speech"}),submenu:[{role:"startspeaking"},{role:"stopspeaking"}]}),o.submenu=[{role:"minimize"},{role:"zoom"},{type:"separator"},{role:"front"}]),f&&f.send("set-main-menu",i)}},{key:"render",value:function(){var e=this;return l.cloneElement(this.props.children,{ref:function(t){return e._editor=t}})}}]),t}(l.Component);t.a=m},1827:function(e,t,n){var r=n(897).loadExtension,o=n(4),a=n(1828).findJsExtensionModules;e.exports=function(e){var t=e.gd,n=e.objectsEditorService,i=e.objectsRenderingService,c=e.filterExamples;return{loadAllExtensions:function(e){return a({filterExamples:c}).then(function(a){return Promise.all(a.map(function(a){var c=null;try{c=o(a,{rethrowException:!0})}catch(l){return{extensionModulePath:a,result:{message:"Unable to import extension. Please check for any syntax error or error that would prevent it from being run.",error:!0,rawError:l}}}return c?(n&&c.registerEditorConfigurations&&c.registerEditorConfigurations(n),i&&c.registerInstanceRenderers&&c.registerInstanceRenderers(i),{extensionModulePath:a,result:r(e,t,t.JsPlatform.get(),c)}):{extensionModulePath:a,result:{error:!0,message:"Unknown error. Please check for any syntax error or error that would prevent it from being run."}}}))},function(e){throw console.error("Unable to find JS extensions modules"),e})}}}},1828:function(e,t,n){var r=n(268).findGDJS,o=n(4),a=o("path"),i=o("fs");e.exports={findJsExtensionModules:function(e){var t=e.filterExamples;return r().then(function(e){var n=e.gdjsRoot,r=a.join(n,"Runtime","Extensions");return console.info("Searching for JS extensions (file called JsExtension.js) in ".concat(r,"...")),new Promise(function(e,n){i.readdir(r,function(o,c){if(o)return n(o);var l=c.filter(function(e){return!t||-1===e.indexOf("Example")});Promise.all(l.map(function(e){return t=a.join(r,e),new Promise(function(e){var n=a.join(t,"JsExtension.js");i.stat(n,function(t,r){return e(t?null:r.isFile()?n:null)})});var t})).then(function(t){e(t.filter(function(e){return!!e}))},n)})})})}}},1829:function(e,t,n){"use strict";n.d(t,"a",function(){return u});var r=n(4),o=n.n(r),a=n(444),i=n.n(a),c=o()("os"),l=o()("fs"),u=function(){var e=c.tmpdir()+"/GDGeneratedEventsFunctions";l.mkdir(e,function(e){e&&"EEXIST"!==e.code&&console.error("Unable to create the directory where to output events functions generated code: ",e)});var t=function(t){return"".concat(e,"/").concat(i()(t),".js")};return{getIncludeFileFor:function(e){return t(e)},writeFunctionCode:function(e,n){return new Promise(function(r,o){var a=t(e);l.writeFile(a,n,function(e){if(e)return o(e);r()})})},writeBehaviorCode:function(e,n){return new Promise(function(r,o){var a=t(e);l.writeFile(a,n,function(e){if(e)return o(e);r()})})}}}},1832:function(e,t,n){"use strict";n.d(t,"a",function(){return p});var r=n(7),o=n(225),a=n(4),i=n.n(a),c=i()("fs-extra"),l=i()("path"),u=i()("electron"),s=u?u.remote.dialog:null,p=function e(){Object(r.a)(this,e)};p.chooseEventsFunctionExtensionFile=function(){return new Promise(function(e,t){if(!s)return t("Not supported");var n=u.remote.getCurrentWindow();s.showSaveDialog(n,{title:"Export an extension of the project",filters:[{name:'GDevelop 5 "events based" extension',extensions:["json"]}],defaultPath:"Extension.json"},function(t){return e(t||null)})})},p.writeEventsFunctionsExtension=function(e,t){return function(e,t){if(!c)return Promise.reject(new Error("Filesystem is not supported."));try{var n=JSON.stringify(e,null,2);return c.ensureDir(l.dirname(t)).then(function(){return new Promise(function(e,r){c.writeFile(t,n,function(t){return t?r(t):e()})})})}catch(r){return Promise.reject(r)}}(Object(o.b)(e),t).catch(function(e){throw console.error("Unable to write the events function extension:",e),e})}},1833:function(e,t,n){"use strict";n.d(t,"a",function(){return u});var r=n(7),o=n(4),a=n.n(o),i=a()("fs"),c=a()("electron"),l=c?c.remote.dialog:null,u=function e(){Object(r.a)(this,e)};u.chooseEventsFunctionExtensionFile=function(){return new Promise(function(e,t){if(!l)return t("Not supported");var n=c.remote.getCurrentWindow();l.showOpenDialog(n,{title:"Import an extension in the project",properties:["openFile"],message:"Choose an extension file to import (.json file)",filters:[{name:'GDevelop 5 "events based" extension',extensions:["json"]}]},function(t){return t&&t.length?e(t[0]):e(null)})})},u.readEventsFunctionExtensionFile=function(e){return function(e){return i?new Promise(function(t,n){i.readFile(e,{encoding:"utf8"},function(r,o){if(r)return n(r);try{var a=JSON.parse(o);return t(a)}catch(i){return n(e+" is a corrupted/malformed file.")}})}):Promise.reject("Filesystem is not supported.")}(e)}},1834:function(e,t,n){"use strict";n.d(t,"a",function(){return E});var r=n(227),o=n(16),a=n(4),i=n.n(a),c=n(249),l=n(345),u=n.n(l),s=i()("electron"),p=i()("fs"),d=i()("child_process"),f=i()("process"),m=i()("path"),h=function(){if(!s)return"";var e=f.cwd();return m.join(e,"../app")},v=function(){if(!s||!p)return Promise.resolve({paths:[],pathsWithErrors:{}});var e={},t=m.join(h(),"../.."),n=m.join(t,"GDJS/Runtime"),o=m.join(t,"Extensions");return new Promise(function(t){return p.readdir(o,function(n,r){if(n)return e[o]=n,void t([]);t(Promise.all(r.map(function(t){return new Promise(function(n){var r=m.join(o,t);p.stat(r,function(t,o){if(t)return e[r]=t,void n(r);n(o.isDirectory()?r:null)})})})).then(function(e){return e.filter(Boolean)}))})}).then(function(t){return Promise.resolve([n].concat(["Cocos2d","Cordova","Electron","FacebookInstantGames","cocos-renderers","cocos-sound-manager","events-tools","fontfaceobserver-font-manager","howler-sound-manager","libs","pixi-renderers","websocket-debugger-client"].map(function(e){return m.join(n,e)}))).then(function(n){return{paths:[].concat(Object(r.a)(n),Object(r.a)(t)),pathsWithErrors:e}})})},g=function(){return d&&m?new Promise(function(e,t){d.exec('node "'.concat(m.join(h(),"scripts/import-GDJS-Runtime.js"),'"'),function(n,r,o){return n?(console.error("GDJS Runtime update error: ".concat(n)),void t(n)):(console.info("GDJS Runtime update: ".concat(r)),o?(console.error("GDJS Runtime update error: ".concat(o)),void t(new Error("Error while updating GDJS Runtime"))):void e())})}):Promise.reject(new Error("Unsupported"))},b=u()(function(e,t){var n=e||"unknown-event",r=t||"unknown-file";console.info('GDJS/extensions watchers found a "'.concat(n,'" in ').concat(r,", updating GDJS Runtime...")),g().catch(function(){})},100),E=function(){var e=o.useContext(c.b).values.useGDJSDevelopmentWatcher;return o.useEffect(function(){if(e){var t=!1,n=[],r=performance.now();return v().then(function(e){var o=e.paths,a=e.pathsWithErrors;if(!t)if(p){g().catch(function(){}),o.forEach(function(e){var t=null;try{t=p.watch(e,{},b)}catch(r){return a[e]=r,null}t&&(t.on("error",function(e){console.warn("Error in watcher for GDJS Runtime - manually call npm run `node import-GDJS-Runtime.js` in the newIDE/app/scripts folder if you make changes to GDJS.",e)}),n.push(t))}),Object.keys(a).length&&console.warn("Error while setting up watchers for some paths: ",a);var i=(performance.now()-r).toFixed(2);n.length?console.info("Watchers for GDJS Runtime/extensions installed in ".concat(i,"ms.")):console.warn("No watchers for GDJS Runtime/extensions installed (took ".concat(i,"ms)."))}else console.error("Unable to use 'fs' from Node.js to watch changes in GDJS.")}),function(){t=!0,n.length&&(n.forEach(function(e){e.close()}),console.info("Watchers for GDJS Runtime closed."))}}},[e]),null}},185:function(e,t,n){"use strict";n.r(t),function(e){n.d(t,"create",function(){return k});var r=n(16),o=n.n(r),a=n(480),i=n(5),c=n(904),l=n(913),u=(n(21),n(78),n(1795)),s=n(878),p=n(1807),d=n(1808),f=n(1809),m=n(1813),h=n(1816),v=n(1826),g=n(1827),b=n.n(g),E=n(1829),w=n(468),y=n(297),x=n(905),j=n(1832),O=n(1833),P=n(898),S=n(606),C=n(1834),D=e.gd,k=function(e){i.b.setUpContextMenu();var t=i.b.getArguments(),n=i.b.isDev();return t["server-port"]?o.a.createElement(x.a,{authentification:e,disableCheckForUpdates:!!t["disable-update-check"],eventsFunctionCodeWriter:null,eventsFunctionsExtensionWriter:null,eventsFunctionsExtensionOpener:null},function(e){var n=e.i18n,r=e.eventsFunctionsExtensionsState;return o.a.createElement(P.a,{appArguments:t,storageProviders:[]},function(e){var i=e.currentStorageProviderOperations,c=e.useStorageProvider,l=e.storageProviders,s=e.initialFileMetadataToOpen;return o.a.createElement(u.a,{serverPort:t["server-port"],isIntegrated:"integrated"===t.mode,editor:t.editor,editedElementName:t["edited-element-name"]},o.a.createElement(a.a,{i18n:n,eventsFunctionsExtensionsState:r,resourceSources:d.a,storageProviders:l,useStorageProvider:c,storageProviderOperations:i,resourceExternalEditors:f.a,initialFileMetadataToOpen:s}))})}):o.a.createElement(x.a,{authentification:e,disableCheckForUpdates:!!t["disable-update-check"],eventsFunctionCodeWriter:Object(E.a)(),eventsFunctionsExtensionWriter:j.a,eventsFunctionsExtensionOpener:O.a},function(e){var r=e.i18n,i=e.eventsFunctionsExtensionsState;return o.a.createElement(P.a,{appArguments:t,storageProviders:[S.a],defaultStorageProvider:S.a},function(e){var t=e.currentStorageProviderOperations,u=e.useStorageProvider,g=e.storageProviders,E=e.initialFileMetadataToOpen;return o.a.createElement(v.a,{i18n:r},o.a.createElement(a.a,{i18n:r,eventsFunctionsExtensionsState:i,renderPreviewLauncher:function(e,t){return o.a.createElement(m.a,Object.assign({},e,{ref:t}))},renderExportDialog:function(e){return o.a.createElement(c.a,Object.assign({},e,{exporters:Object(h.a)()}))},renderCreateDialog:function(e){return o.a.createElement(l.a,Object.assign({},e,{examplesComponent:s.a,startersComponent:p.a}))},renderGDJSDevelopmentWatcher:n?function(){return o.a.createElement(C.a,null)}:null,storageProviders:g,useStorageProvider:u,storageProviderOperations:t,resourceSources:d.a,resourceExternalEditors:f.a,extensionsLoader:b()({gd:D,objectsEditorService:w.a,objectsRenderingService:y.a,filterExamples:!n}),initialFileMetadataToOpen:E}))})})}}.call(this,n(3))},279:function(e,t,n){"use strict";(function(e){var r=n(4),o=n.n(r),a=o()("fs-extra"),i=o()("path"),c=o()("os"),l=e.gd;t.a={mkDir:function(e){try{a.mkdirsSync(e)}catch(t){return console.log("mkDir("+e+") failed: "+t),!1}return!0},dirExists:function(e){return a.existsSync(e)},clearDir:function(e){var t=this;a.existsSync(e)&&a.readdirSync(e).forEach(function(n){var r=e+"/"+n;a.lstatSync(r).isDirectory()?t.clearDir(r):a.unlinkSync(r)})},getTempDir:function(){return c.tmpdir()},fileNameFrom:function(e){return this._isExternalURL(e)?e:(e=this._translateURL(e),i.basename(e))},dirNameFrom:function(e){return this._isExternalURL(e)?"":(e=this._translateURL(e),i.dirname(e))},makeAbsolute:function(e,t){return this._isExternalURL(e)?e:(e=this._translateURL(e),this.isAbsolute(t)||(t=i.resolve(t)),i.resolve(t,i.normalize(e)))},makeRelative:function(e,t){return this._isExternalURL(e)?e:(e=this._translateURL(e),i.relative(t,i.normalize(e)))},isAbsolute:function(e){return!!this._isExternalURL(e)||(0===e.length||((e=this._translateURL(e)).length>0&&"/"===e.charAt(0)||e.length>1&&":"===e.charAt(1)))},copyFile:function(e,t){if(this._isExternalURL(e))return!0;e=this._translateURL(e);try{e!==t&&a.copySync(e,t)}catch(n){return console.log("copyFile("+e+", "+t+") failed: "+n),!1}return!0},writeToFile:function(e,t){try{a.outputFileSync(e,t)}catch(n){return console.log("writeToFile("+e+", ...) failed: "+n),!1}return!0},readFile:function(e){try{return a.readFileSync(e).toString()}catch(t){return console.log("readFile("+e+") failed: "+t),""}},readDir:function(e,t){t=t.toUpperCase();var n=new l.VectorString;try{a.existsSync(e)&&a.readdirSync(e).forEach(function(r){0!==t.length&&-1===r.toUpperCase().indexOf(t,r.length-t.length)||n.push_back(e+"/"+r)})}catch(r){console.log("readDir("+e+","+t+") failed: "+r)}return n},fileExists:function(e){e=this._translateURL(e);try{return a.statSync(e).isFile()}catch(t){return!1}},_isExternalURL:function(e){return"http"===e.substr(0,4)||"ftp"===e.substr(0,4)},_translateURL:function(e){return"g/"!==e.substr(0,2)&&"g\\"!==e.substr(0,2)||(e=e.substr(2)),e}}}).call(this,n(3))},351:function(e,t,n){"use strict";n.d(t,"a",function(){return b});var r=n(192),o=n(7),a=n(17),i=n(37),c=n(36),l=n(38),u=n(187),s=n(16),p=n.n(s),d=n(206),f=n(199),m=n(4),h=n.n(m)()("electron"),v=h?h.remote.dialog:null,g={container:{position:"relative",display:"flex",alignItems:"baseline"},button:{marginLeft:10},textField:{flex:1}},b=function(e){function t(){var e,n;Object(o.a)(this,t);for(var r=arguments.length,a=new Array(r),l=0;l<r;l++)a[l]=arguments[l];return(n=Object(i.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(a))))._onChooseFolder=function(e){var t=e.title,r=e.message;if(v&&h){var o=h.remote.getCurrentWindow();v.showOpenDialog(o,{title:t,properties:["openDirectory","createDirectory"],message:r,defaultPath:n.props.defaultPath},function(e){e&&e.length&&n.props.onChange(e[0])})}},n._getTitleAndMessage=function(e){var t=n.props.type;return"export"===t?{title:e._({id:"Choose an export folder"}),message:e._({id:"Choose where to export the game"})}:"create-game"===t?{title:e._({id:"Choose a folder for the new game"}),message:e._({id:"Choose where to create the game"})}:{title:void 0,message:void 0}},n}return Object(l.a)(t,e),Object(a.a)(t,[{key:"render",value:function(){var e=this;return p.a.createElement(u.I18n,null,function(t){var n=t.i18n,o=e._getTitleAndMessage(n);return p.a.createElement("div",{style:Object(r.a)({},g.container,{width:e.props.fullWidth?"100%":void 0})},p.a.createElement(d.b,{margin:"dense",style:g.textField,type:"text",hintText:o.title,value:e.props.value,onChange:function(t,n){return e.props.onChange(n)}}),p.a.createElement(f.a,{label:p.a.createElement(u.Trans,{id:"Choose folder"}),primary:!1,style:g.button,onClick:function(){return e._onChooseFolder(o)}}))})}}]),t}(s.PureComponent)},473:function(e,t,n){"use strict";n.d(t,"a",function(){return c});var r=n(4),o=n.n(r),a=o()("fs"),i=o()("archiver"),c=function(e){var t=e.path,n=e.outputFilename;return new Promise(function(e,r){if(!a||!i)return r(new Error("Archiver unavailable"));var o=a.createWriteStream(n),c=i("zip",{zlib:{level:9}});o.on("close",function(){console.log("Archive written at ".concat(n,", ").concat(c.pointer()," total bytes.")),e(n)}),c.on("error",function(e){r(e)}),c.pipe(o),c.directory(t,!1),c.finalize()})}},606:function(e,t,n){"use strict";var r=n(192),o=n(4),a=n.n(o),i=n(882),c=a()("fs"),l=a()("path"),u=a()("electron"),s=u?u.remote.dialog:null,p=function(e){return c?new Promise(function(t,n){c.readFile(e,{encoding:"utf8"},function(r,o){if(r)return n(r);try{var a=JSON.parse(o);return t(a)}catch(i){return n(e+" is a corrupted/malformed file.")}})}):Promise.reject("Filesystem is not supported.")},d=function(){return new Promise(function(e,t){if(!s)return t("Not supported");var n=u.remote.getCurrentWindow();s.showOpenDialog(n,{title:"Open a project",properties:["openFile"],message:"If you want to open your GDevelop 4 project, be sure to save it as a .json file",filters:[{name:"GDevelop 5 project",extensions:["json"]}]},function(t){return t&&t.length?e({fileIdentifier:t[0]}):e(null)})})},f=function(e){var t=e.fileIdentifier,n=l.dirname(t);return p(t).then(function(e){return Object(i.d)(e,{getReferencePartialObject:function(e){return p(l.join(n,e)+".json")},isReferenceMagicPropertyName:"__REFERENCE_TO_SPLIT_OBJECT",maxUnsplitDepth:3}).then(function(){return{content:e}})})},m=function(e,t){var n=e.fileIdentifier,r=n+".autosave";if(c.existsSync(r)){if(!t)return Promise.resolve(!0);try{if(c.statSync(r).mtime.getTime()>c.statSync(n).mtime.getTime())return Promise.resolve(!0)}catch(o){return console.error("Unable to compare *.autosave to project",o),Promise.resolve(!1)}return Promise.resolve(!1)}return Promise.resolve(!1)},h=function(e){return Promise.resolve(Object(r.a)({},e,{fileIdentifier:e.fileIdentifier+".autosave"}))},v=n(1798),g=n(5);t.a={internalName:"LocalFile",name:{id:"Local file system"},getFileMetadataFromAppArguments:function(e){return e[g.a]&&e[g.a].length?{fileIdentifier:e[g.a][0]}:null},createOperations:function(){return{onOpenWithPicker:d,onOpen:f,hasAutoSave:m,onSaveProject:v.b,onSaveProjectAs:v.c,onAutoSaveProject:v.a,onGetAutoSave:h,getOpenErrorMessage:function(e){return{id:"Check that the file exists, that this file is a proper game created with GDevelop and that you have the authorizations to open it."}}}}}},878:function(e,t,n){"use strict";n.d(t,"b",function(){return C}),n.d(t,"a",function(){return D});var r=n(7),o=n(17),a=n(37),i=n(36),c=n(38),l=n(187),u=n(16),s=n.n(u),p=n(2181),d=n(351),f=n(198),m=n(11),h=n(189),v=n(879),g=n(4),b=n.n(g),E=n(880),w=n(911),y=n(40),x=n(606),j=b()("path"),O=b()("electron"),P=O?O.remote.app:null,S=b()("fs-extra"),C=function(e,t,n){Object(y.c)(e._({id:"Unable to create the game in the specified folder. Check that you have permissions to write in this folder: {outputPath} or choose another folder.",values:{outputPath:t}}),n)},D=function(e){function t(){var e,n;Object(r.a)(this,t);for(var o=arguments.length,c=new Array(o),l=0;l<o;l++)c[l]=arguments[l];return(n=Object(a.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(c)))).state={outputPath:Object(E.a)(j&&P?j.join(P.getPath("documents"),"GDevelop projects"):""),exampleNames:null},n._handleChangePath=function(e){return n.setState({outputPath:e})},n.createFromExample=function(e,t){var r=n.state.outputPath;S&&r&&Object(v.a)(function(o){try{S.mkdirsSync(r),S.copySync(j.join(o,t),r)}catch(a){return void C(e,r,a)}n.props.onOpen(x.a,{fileIdentifier:j.join(r,t+".json")}),Object(m.h)(t)})},n}return Object(c.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;Object(v.a)(function(t){S.readdir(t,function(t,n){t?console.error("Unable to read examples:",t):e.setState({exampleNames:n.filter(function(e){return".DS_Store"!==e})},function(){return e.props.onExamplesLoaded()})})})}},{key:"render",value:function(){var e=this;return s.a.createElement(l.I18n,null,function(t){var n=t.i18n;return s.a.createElement(h.a,{noMargin:!0},s.a.createElement(h.b,null,s.a.createElement(h.a,null,s.a.createElement(f.a,null,s.a.createElement(l.Trans,{id:"Choose or search for an example to open:"})))),s.a.createElement(h.b,null,s.a.createElement(w.a,{exampleNames:e.state.exampleNames,onCreateFromExample:function(t){return e.createFromExample(n,t)}})),s.a.createElement(p.a,null),s.a.createElement(h.b,{expand:!0},s.a.createElement(h.a,{expand:!0},s.a.createElement(d.a,{fullWidth:!0,value:e.state.outputPath,onChange:e._handleChangePath,type:"create-game"}))))})}}]),t}(u.Component)},879:function(e,t,n){"use strict";n.d(t,"a",function(){return p});var r=n(4),o=n.n(r),a=o()("electron"),i=o()("path"),c=a?a.remote.app:null,l=o()("fs"),u=o()("process"),s=function(e,t,n){return l.access(e,l.constants.R_OK,function(r){r?n():t(e)})},p=function(e){if(!u||!l)return"";var t=c?c.getAppPath():u.cwd();s(i.join(t,"..","examples"),e,function(){s(i.join(t,"..","..","app","resources","examples"),e,function(){e(null)})})}},880:function(e,t,n){"use strict";n.d(t,"a",function(){return l});var r=n(251),o=n(4),a=n.n(o),i=a()("path"),c=a()("fs-extra"),l=function(e){if(!i)return e;var t=Object(r.a)("My project",function(t){try{c.accessSync(i.join(e,t))}catch(n){return!1}return!0});return i.join(e,t)}},882:function(e,t,n){"use strict";n.d(t,"b",function(){return c}),n.d(t,"d",function(){return l}),n.d(t,"c",function(){return u}),n.d(t,"a",function(){return s});var r=n(210),o=n(251),a=n(444),i=n.n(a),c=function(e,t){var n=t.pathSeparator,o=t.getArrayItemReferenceName,a=t.shouldSplit,i=t.isReferenceMagicPropertyName,c=[],l=function(e,t){var n;return c.push({reference:e,object:t}),n={},Object(r.a)(n,i,!0),Object(r.a)(n,"referenceTo",e),n};return function e(t,r,i){if(null!==t&&"object"===typeof t)if(Array.isArray(t))for(var c in t){var u=r+n+"*";if(a(u)){var s=t[c],p=o(s,i),d=i+n+p;t[c]=l(d,s),e(s,u,d)}else{var f=i+n+c;e(t[c],u,f)}}else for(var m in t){var h=r+n+m,v=i+n+m;if(a(h)){var g=t[m];t[m]=l(v,g),e(g,h,v)}else e(t[m],h,v)}}(e,"",""),c},l=function(e,t){var n=t.isReferenceMagicPropertyName,r=t.getReferencePartialObject,o=t.maxUnsplitDepth;return function e(t,a){if(void 0!==o&&a>=o)return Promise.resolve();if(null!==t&&"object"===typeof t){var i=Object.keys(t);if(i)return Promise.all(i.map(function(o){var i,c=!0===(i=t[o])[n]?i:null;return c?r(c.referenceTo).then(function(n){return t[o]=n,e(t[o],a+1)}):e(t[o],a+1)})).then(function(){})}return Promise.resolve()}(e,0)},u=function(e){return function(t){return e.has(t)}},s=function(e){var t={};return function(n,r){var a=n[e];if("string"!==typeof a)throw new Error("Property ".concat(e," is not a string"));t[r]=t[r]||{};var c=Object(o.a)(i()(a),function(e){return!!t[r][e]});return t[r][c]=!0,c}}}}]);
//# sourceMappingURL=local-app.3283b037.chunk.js.map