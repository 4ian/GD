(this["webpackJsonpgdevelop-ide"]=this["webpackJsonpgdevelop-ide"]||[]).push([[4],{169:function(e,t,n){"use strict";(function(e){var r=n(3),o=n.n(r),a=o()("fs-extra"),i=o()("path"),s=o()("os");const l=e.gd;t.a={mkDir:function(e){try{a.mkdirsSync(e)}catch(t){return console.error("mkDir("+e+") failed: "+t),!1}return!0},dirExists:function(e){return a.existsSync(e)},clearDir:function(e){var t=this;try{a.existsSync(e)&&a.readdirSync(e).forEach((function(n){var r=e+"/"+n;if(a.lstatSync(r).isDirectory())t.clearDir(r);else try{a.unlinkSync(r)}catch(o){console.error("fs.unlinkSync("+r+") failed: "+o)}}))}catch(n){console.error("clearDir("+e+") failed: "+n)}},getTempDir:function(){return s.tmpdir()},fileNameFrom:function(e){return this._isExternalURL(e)?e:(e=this._translateURL(e),i.basename(e))},dirNameFrom:function(e){return this._isExternalURL(e)?"":(e=this._translateURL(e),i.dirname(e))},makeAbsolute:function(e,t){return this._isExternalURL(e)?e:(e=this._translateURL(e),this.isAbsolute(t)||(t=i.resolve(t)),i.resolve(t,i.normalize(e)))},makeRelative:function(e,t){return this._isExternalURL(e)?e:(e=this._translateURL(e),i.relative(t,i.normalize(e)))},isAbsolute:function(e){return!!this._isExternalURL(e)||(0===e.length||((e=this._translateURL(e)).length>0&&"/"===e.charAt(0)||e.length>1&&":"===e.charAt(1)))},copyFile:function(e,t){if(this._isExternalURL(e))return!0;e=this._translateURL(e);try{e!==t&&a.copySync(e,t)}catch(n){return console.error("copyFile("+e+", "+t+") failed: "+n),!1}return!0},writeToFile:function(e,t){try{a.outputFileSync(e,t)}catch(n){return console.error("writeToFile("+e+", ...) failed: "+n),!1}return!0},readFile:function(e){try{return a.readFileSync(e).toString()}catch(t){return console.error("readFile("+e+") failed: "+t),""}},readDir:function(e,t){t=t.toUpperCase();var n=new l.VectorString;try{a.existsSync(e)&&a.readdirSync(e).forEach((function(r){0!==t.length&&-1===r.toUpperCase().indexOf(t,r.length-t.length)||n.push_back(e+"/"+r)}))}catch(r){console.error("readDir("+e+","+t+") failed: "+r)}return n},fileExists:function(e){e=this._translateURL(e);try{return a.statSync(e).isFile()}catch(t){return!1}},_isExternalURL:function(e){return"http"===e.substr(0,4)||"ftp"===e.substr(0,4)},_translateURL:function(e){return"g/"!==e.substr(0,2)&&"g\\"!==e.substr(0,2)||(e=e.substr(2)),e}}}).call(this,n(1))},1986:function(e,t,n){"use strict";(function(e){n.d(t,"b",(function(){return v})),n.d(t,"c",(function(){return b})),n.d(t,"a",(function(){return x}));var r=n(78),o=n(121),a=n(3),i=n.n(a),s=n(885),l=n(169),c=n(117),u=n.n(c);const p=e.gd,d=i()("fs-extra"),m=i()("path"),h=i()("electron"),f=h?h.remote.dialog:null,g=(e,t)=>{if(!d)return Promise.reject(new Error("Filesystem is not supported."));try{const n=JSON.stringify(e,null,2);return d.ensureDir(m.dirname(t)).then(()=>new Promise((e,r)=>{d.writeFile(t,n,t=>t?r(t):e())}))}catch(n){return Promise.reject(n)}},E=(e,t,n)=>{const r=Object(o.b)(e);if(e.isFolderProject()){const e=Object(s.b)(r,{pathSeparator:"/",getArrayItemReferenceName:Object(s.a)("name"),shouldSplit:Object(s.c)(new Set(["/layouts/*","/externalLayouts/*","/externalEvents/*","/layouts/*","/eventsFunctionsExtensions/*"])),isReferenceMagicPropertyName:"__REFERENCE_TO_SPLIT_OBJECT"});return Promise.all(e.map(e=>g(e.object,m.join(n,e.reference)+".json").catch(e=>{throw console.error("Unable to write a partial file:",e),e}))).then(()=>g(r,t).catch(e=>{throw console.error("Unable to write the split project:",e),e}))}return g(r,t).catch(e=>{throw console.error("Unable to write the project:",e),e})},v=(e,t)=>{const n=t.fileIdentifier;if(!n)return Promise.reject('Project file is empty, "Save as" should have been called?');const r=m.dirname(n);return E(e,n,r).then(()=>({wasSaved:!0,fileMetadata:t}))},b=(e,t)=>{const n=t?t.fileIdentifier:"",o=u()(new p.AbstractFileSystemJS,l.a),a=h.remote.getCurrentWindow(),i={defaultPath:n,filters:[{name:"GDevelop 5 project",extensions:["json"]}]};if(!f)return Promise.reject("Unsupported");const s=f.showSaveDialogSync(a,i);if(!s)return Promise.resolve({wasSaved:!1,fileMetadata:t});const c=m.dirname(s);return p.ProjectResourcesCopier.copyAllResourcesTo(e,o,c,!0,!1,!0),e.setProjectFile(s),E(e,s,c).then(()=>({wasSaved:!0,fileMetadata:Object(r.a)({},t,{fileIdentifier:s})}))},x=(e,t)=>{const n=t.fileIdentifier+".autosave";g(Object(o.b)(e),n).catch(e=>{throw console.error("Unable to write ".concat(n,":"),e),e})}}).call(this,n(1))},1999:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return S}));var r=n(72),o=n(2),a=n.n(o),i=n(2381),s=n(84),l=n(253),c=n(83),u=n(8),p=n(75),d=n(100),m=n(882),h=n(3),f=n.n(h),g=n(883),E=n(135),v=n(881),b=n(544);const x=f()("path"),w=f()("electron"),y=w?w.remote.app:null;var P=f()("fs-extra");const j=e.gd;class S extends o.Component{constructor(...e){super(...e),this.state={outputPath:Object(g.a)(x&&y?x.join(y.getPath("documents"),"GDevelop projects"):"")},this._handleChangePath=e=>this.setState({outputPath:e})}createFromExample(e,t){const n=this.state.outputPath;P&&n&&Object(m.a)(r=>{try{P.mkdirsSync(n),P.copySync(x.join(r,t),n)}catch(o){return void Object(v.b)(e,n,o)}this.props.onOpen(b.a,{fileIdentifier:x.join(n,t+".json")}),Object(u.h)(t)})}createEmptyGame(e){const t=this.state.outputPath;if(!P||!t)return;try{P.mkdirsSync(t)}catch(o){return void Object(v.b)(e,t,o)}const n=j.ProjectHelper.createNewGDJSProject(),r=x.join(t,"game.json");n.setProjectFile(r),this.props.onCreate(n,b.a,{fileIdentifier:r}),Object(u.h)("")}render(){return a.a.createElement(r.I18n,null,({i18n:e})=>a.a.createElement(p.a,{noMargin:!0},a.a.createElement(p.b,{expand:!0},a.a.createElement(p.a,{expand:!0},a.a.createElement(l.a,{fullWidth:!0,value:this.state.outputPath,onChange:this._handleChangePath,type:"create-game"}))),a.a.createElement(i.a,null),a.a.createElement(p.b,null,a.a.createElement(p.a,null,a.a.createElement(c.a,null,a.a.createElement(r.Trans,{id:"Choose a game to use as a starter:"})))),a.a.createElement(p.b,null,a.a.createElement(p.a,{expand:!0,noMargin:!0},a.a.createElement(d.a,null,a.a.createElement(d.b,{leftIcon:a.a.createElement(E.a,{iconSize:40,src:"res/starters_icons/platformer.png"}),primaryText:a.a.createElement(r.Trans,{id:"Platformer"}),secondaryText:a.a.createElement(r.Trans,{id:"A simple platform game, with coins to collect, moving platforms and enemies."}),secondaryTextLines:2,onClick:()=>this.createFromExample(e,"platformer")}),a.a.createElement(d.b,{leftIcon:a.a.createElement(E.a,{iconSize:40,src:"res/starters_icons/space-shooter.png"}),primaryText:a.a.createElement(r.Trans,{id:"8-bit Space Shooter"}),secondaryText:a.a.createElement(r.Trans,{id:"A beautiful, retro side-scrolling shooter where you must defeat incoming enemies with your mecha transforming spaceship. Huge boss included!"}),secondaryTextLines:2,onClick:()=>this.createFromExample(e,"space-shooter")}),a.a.createElement(d.b,{leftIcon:a.a.createElement(E.a,{iconSize:40,src:"res/starters_icons/geometry-monster.png"}),primaryText:a.a.createElement(r.Trans,{id:"Geometry Monster"}),secondaryText:a.a.createElement(r.Trans,{id:"A hyper casual endless game where you have to collect shapes and avoid bombs, with a progressively increasing difficulty."}),secondaryTextLines:2,onClick:()=>this.createFromExample(e,"geometry-monster")}),a.a.createElement(d.b,{leftIcon:a.a.createElement(E.a,{iconSize:40,src:"res/starters_icons/isometric-game.png"}),primaryText:a.a.createElement(r.Trans,{id:"Isometric game"}),secondaryText:a.a.createElement(r.Trans,{id:"An example of an isometric game where you can explore a map with your character."}),secondaryTextLines:2,onClick:()=>this.createFromExample(e,"isometric-game")}),a.a.createElement(d.b,{leftIcon:a.a.createElement(E.a,{iconSize:40,src:"res/starters_icons/downhill-bike-physics-demo.png"}),primaryText:"Downhill Bike Racing",secondaryText:a.a.createElement(r.Trans,{id:"An example of a 2D physics based game, where players have to reach the end as fast as possible."}),secondaryTextLines:2,onClick:()=>this.createFromExample(e,"downhill-bike-physics-demo")}),a.a.createElement(d.b,{leftIcon:a.a.createElement(E.a,{iconSize:40,src:"res/starters_icons/pairs.png"}),primaryText:"Pairs",secondaryText:a.a.createElement(r.Trans,{id:"Find all matching pairs of cards in this relaxing game. Use tweens to create smooth, natural animations with a few events."}),secondaryTextLines:2,onClick:()=>this.createFromExample(e,"pairs")}),a.a.createElement(d.b,{primaryText:a.a.createElement(r.Trans,{id:"Empty game"}),secondaryText:a.a.createElement(r.Trans,{id:"Start a new game from scratch."}),secondaryTextLines:2,onClick:()=>this.createEmptyGame(e)})),a.a.createElement(p.b,{alignItems:"center",justifyContent:"center"},a.a.createElement(s.a,{label:a.a.createElement(r.Trans,{id:"See examples"}),onClick:()=>this.props.onShowExamples()}))))))}}}).call(this,n(1))},2e3:function(e,t,n){"use strict";(function(e){var r,o,a,i,s,l=n(2),c=n(212),u=n(3),p=n.n(u),d=n(5);const m=p()("electron"),h=m?m.remote.dialog:null,f=p()("path"),g=e.gd;t.a=[{name:"localAudioFileOpener",displayName:"Choose a new audio file",kind:"audio",component:(r=class extends l.Component{constructor(...e){super(...e),this.chooseResources=(e,t=!0)=>{const n=this.props,r=n.i18n,o=n.getLastUsedPath,a=n.setLastUsedPath,i={multiSelections:t,title:r._({id:"Choose an audio file"}),name:r._({id:"Audio files"}),extensions:["wav","mp3","ogg"]};return E(r,e,i,o,a,"audio").then(t=>t.map(t=>{const n=new g.AudioResource,r=f.dirname(e.getProjectFile());return n.setFile(f.relative(r,t)),n.setName(f.relative(r,t)),n}))}}render(){return null}},r)},{name:"localFileOpener",displayName:"Choose a new image",kind:"image",component:(o=class extends l.Component{constructor(...e){super(...e),this.chooseResources=(e,t=!0)=>{const n=this.props,r=n.i18n,o=n.getLastUsedPath,a=n.setLastUsedPath,i={multiSelections:t,title:r._({id:"Choose an image"}),name:r._({id:"Image files"}),extensions:["png","jpg"]};return E(r,e,i,o,a,"image").then(t=>t.map(t=>{const n=new g.ImageResource,r=f.dirname(e.getProjectFile());return n.setFile(f.relative(r,t)),n.setName(f.relative(r,t)),n}))}}render(){return null}},o)},{name:"localFontFileOpener",displayName:"Choose a new font file",kind:"font",component:(a=class extends l.Component{constructor(...e){super(...e),this.chooseResources=(e,t=!0)=>{const n=this.props,r=n.i18n,o=n.getLastUsedPath,a=n.setLastUsedPath,i={multiSelections:t,title:r._({id:"Choose a font file"}),name:r._({id:"Font files"}),extensions:["ttf","otf"]};return E(r,e,i,o,a,"font").then(t=>t.map(t=>{const n=new g.FontResource,r=f.dirname(e.getProjectFile());return n.setFile(f.relative(r,t)),n.setName(f.relative(r,t)),n}))}}render(){return null}},a)},{name:"localVideoFileOpener",displayName:"Choose a new video file",kind:"video",component:(i=class extends l.Component{constructor(...e){super(...e),this.chooseResources=(e,t=!0)=>{const n=this.props,r=n.i18n,o=n.getLastUsedPath,a=n.setLastUsedPath,i={multiSelections:t,title:r._({id:"Choose a video file"}),name:r._({id:"Video files"}),extensions:["mp4"]};return E(r,e,i,o,a,"video").then(t=>t.map(t=>{const n=new g.VideoResource,r=f.dirname(e.getProjectFile());return n.setFile(f.relative(r,t)),n.setName(f.relative(r,t)),n}))}}render(){return null}},i)},{name:"localJsonFileOpener",displayName:"Choose a new json file",kind:"json",component:(s=class extends l.Component{constructor(...e){super(...e),this.chooseResources=(e,t=!0)=>{const n=this.props,r=n.i18n,o=n.getLastUsedPath,a=n.setLastUsedPath,i={multiSelections:t,title:r._({id:"Choose a json file"}),name:r._({id:"JSON file"}),extensions:["json"]};return E(r,e,i,o,a,"json").then(t=>t.map(t=>{const n=new g.JsonResource,r=f.dirname(e.getProjectFile());return n.setFile(f.relative(r,t)),n.setName(f.relative(r,t)),n}))}}render(){return null}},s)}];const E=(e,t,n,r,o,a)=>{if(!h)return Promise.reject("Not supported");const i=["openFile"];n.multiSelections&&i.push("multiSelections");const s=f.dirname(t.getProjectFile()),l=r(t,a)||s,u=m.remote.getCurrentWindow();return h.showOpenDialog(u,{title:n.title,properties:i,filters:[{name:n.name,extensions:n.extensions}],defaultPath:l}).then(({filePaths:n})=>{if(!n||!n.length)return[];const r=f.parse(n[0]).dir;if(o(t,a,r),n.filter(e=>!Object(c.g)(t,e)).length){if(d.b.showConfirmDialog(e._({id:"This/these file(s) are outside the project folder. Would you like to make a copy of them in your project folder first (recommended)?"})))return Object(c.c)(t,n)}return n})}}).call(this,n(1))},2001:function(e,t,n){"use strict";var r=n(2002),o=n(2003),a=n(2004),i=n(8);const s=[{name:"piskel-app",displayName:"Edit with Piskel",kind:"image",edit:e=>(Object(i.e)("piskel"),Object(r.a)(e))},{name:"Jfxr",displayName:"Create/Edit a Sound effect with Jfxr (*.wav)",kind:"audio",edit:e=>(Object(i.e)("jfxr"),Object(o.a)(e))},{name:"Yarn",displayName:"Create/Edit a Dialogue Tree with Yarn (*.json)",kind:"json",edit:e=>(Object(i.e)("yarn"),Object(a.a)(e))}];t.a=s},2002:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return p}));var r=n(78),o=n(3),a=n.n(o),i=n(212);const s=a()("electron"),l=a()("path"),c=s?s.ipcRenderer:null,u=e.gd,p=({project:e,resourcesLoader:t,resourceNames:n,singleFrame:o,onChangesSaved:a,extraOptions:p})=>{if(!s||!c)return;const d=n.map((t,n)=>({resourcePath:Object(i.e)(e,t),resourceName:t,originalIndex:n})),m=l.dirname(e.getProjectFile()),h=Object(r.a)({},p,{resources:d,singleFrame:o,projectPath:m});c.removeAllListeners("piskel-changes-saved"),c.on("piskel-changes-saved",(t,n,r,o)=>{const s=o.data?{pskl:o}:null,c=e.getResourcesManager();n.forEach(t=>{t.name=l.relative(m,t.path),Object(i.d)(e,new u.ImageResource,t.name)}),n[0].metadata=s,n[0].newAnimationName=r,o.singleFrame?(s&&c.getResource(l.relative(m,n[0].path)).setMetadata(JSON.stringify(s)),a(n)):a(n)}),c.send("piskel-open-then-load-animation",h)}}).call(this,n(1))},2003:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return u}));var r=n(3),o=n.n(r),a=n(212);const i=o()("electron"),s=o()("path"),l=i?i.ipcRenderer:null,c=e.gd,u=({project:e,resourcesLoader:t,resourceNames:n,onChangesSaved:r,extraOptions:o})=>{if(!i||!l)return;const u=s.dirname(e.getProjectFile()),p={resourcePath:Object(a.e)(e,n[0]),externalEditorData:o.externalEditorData,projectPath:u};l.removeAllListeners("jfxr-changes-saved"),l.on("jfxr-changes-saved",(t,n,o)=>{const i=s.relative(u,n);Object(a.d)(e,new c.AudioResource,i);const l={jfxr:o};e.getResourcesManager().getResource(i).setMetadata(JSON.stringify(l)),r([{metadata:l,name:i}])}),l.send("jfxr-create-wav",p)}}).call(this,n(1))},2004:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return u}));var r=n(3),o=n.n(r),a=n(212);const i=o()("electron"),s=o()("path"),l=i?i.ipcRenderer:null,c=e.gd,u=({project:e,resourcesLoader:t,resourceNames:n,onChangesSaved:r,extraOptions:o})=>{if(!i||!l)return;const u=s.dirname(e.getProjectFile()),p={resourcePath:Object(a.e)(e,n[0]),externalEditorData:o.externalEditorData,projectPath:u};l.removeAllListeners("yarn-changes-saved"),l.on("yarn-changes-saved",(t,n)=>{const o=s.relative(u,n);Object(a.d)(e,new c.JsonResource,o),r([{name:o}])}),l.send("yarn-create-json",p)}}).call(this,n(1))},2005:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return x}));var r=n(72),o=n(2),a=n(169),i=n(3),s=n.n(i),l=n(873),c=n(152),u=n(2006),p=n(117),d=n.n(p),m=n(2007),h=n(446);const f=s()("electron"),g=s()("path"),E=f?f.ipcRenderer:null,v=f?f.remote.BrowserWindow:null,b=e.gd;class x extends o.Component{constructor(...e){super(...e),this.canDoNetworkPreview=()=>!0,this.state={networkPreviewDialogOpen:!1,networkPreviewHost:null,networkPreviewPort:null,networkPreviewError:null,previewGamePath:null,devToolsOpen:!1,previewBrowserWindowConfig:null},this._subscriptionChecker=null,this._openPreviewBrowserWindow=()=>{if(!v||!this.state.previewBrowserWindowConfig||!this.state.previewGamePath)return;const e=new v(this.state.previewBrowserWindowConfig);e.loadURL("file://".concat(this.state.previewGamePath,"/index.html")),e.webContents.on("devtools-opened",()=>{this.setState({devToolsOpen:!0})}),e.webContents.on("devtools-closed",()=>{this.setState({devToolsOpen:!1})}),this.state.devToolsOpen&&e.openDevTools()},this._openPreviewWindow=(e,t,n)=>{this.setState({previewBrowserWindowConfig:{width:e.getGameResolutionWidth(),height:e.getGameResolutionHeight(),useContentSize:!0,title:"Preview of ".concat(e.getName()),backgroundColor:"#000000",webPreferences:{nodeIntegration:!0}},previewGamePath:t},()=>{if(n.networkPreview){if(!E)return;E.removeAllListeners("serve-folder-done"),E.removeAllListeners("local-network-ips"),E.on("serve-folder-done",(e,t,n)=>{t?this.setState({networkPreviewDialogOpen:!0,networkPreviewPort:null,networkPreviewHost:null,networkPreviewError:t}):this.setState({networkPreviewDialogOpen:!0,networkPreviewPort:n.port}),setTimeout(()=>this._checkSubscription())}),E.on("local-network-ips",(e,t)=>{this.setState({networkPreviewHost:Object(m.a)(t)})}),E.send("serve-folder",{root:t}),E.send("get-local-network-ips")}else this._openPreviewBrowserWindow()})},this._prepareExporter=()=>Object(c.findGDJS)().then(({gdjsRoot:e})=>{console.info("GDJS found in ",e);const t=d()(new b.AbstractFileSystemJS,a.a);return{outputDir:g.join(t.getTempDir(),"preview"),exporter:new b.Exporter(t,e)}}),this.launchLayoutPreview=(e,t,n)=>e&&t?this._prepareExporter().then(({outputDir:r,exporter:o})=>{Object(l.a)(()=>{o.exportLayoutForPixiPreview(e,t,r),o.delete(),this._openPreviewWindow(e,r,n)},e=>console.info("Preview took ".concat(e,"ms")))}):Promise.reject(),this.launchExternalLayoutPreview=(e,t,n,r)=>e&&n?this._prepareExporter().then(({outputDir:o,exporter:a})=>{Object(l.a)(()=>{a.exportExternalLayoutForPixiPreview(e,t,n,o),a.delete(),this._openPreviewWindow(e,o,r)},e=>console.info("Preview took ".concat(e,"ms")))}):Promise.reject(),this._checkSubscription=()=>!this._subscriptionChecker||this._subscriptionChecker.checkHasSubscription()}render(){const e=this.state,t=e.networkPreviewDialogOpen,n=e.networkPreviewHost,a=e.networkPreviewPort,i=e.networkPreviewError;return o.createElement(o.Fragment,null,o.createElement(h.a,{ref:e=>this._subscriptionChecker=e,onChangeSubscription:()=>{this.setState({networkPreviewDialogOpen:!1}),this.props.onChangeSubscription&&this.props.onChangeSubscription()},id:"Preview over wifi",title:o.createElement(r.Trans,{id:"Preview over wifi"}),mode:"try"}),o.createElement(u.a,{open:t,url:n&&a?"".concat(n,":").concat(a):null,error:i,onClose:()=>this.setState({networkPreviewDialogOpen:!1}),onExport:this.props.onExport,onRunPreviewLocally:this._openPreviewBrowserWindow}))}}}).call(this,n(1))},2006:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r=n(72),o=n(2),a=n(86),i=n(82),s=n(94),l=n(83),c=n(75),u=n(143);class p extends o.Component{render(){const e=this.props,t=e.url,n=e.open,p=e.error,d=e.onExport,m=e.onClose,h=e.onRunPreviewLocally;return n?o.createElement(a.a,{actions:[o.createElement(i.a,{key:"close",label:o.createElement(r.Trans,{id:"Close"}),primary:!0,onClick:m})],secondaryActions:[d&&o.createElement(i.a,{key:"export",label:o.createElement(r.Trans,{id:"Export game"}),onClick:d}),o.createElement(i.a,{key:"run-preview-locally",label:o.createElement(r.Trans,{id:"Run on this computer"}),onClick:h})],cannotBeDismissed:!0,open:n,onRequestClose:m},p&&o.createElement(c.b,null,o.createElement(l.a,null,o.createElement(r.Trans,{id:"Unable to start the server for the preview! Make sure that you are authorized to run servers on this computer. Otherwise, use classic preview to test your game."}))),!p&&!t&&o.createElement(u.a,null),!p&&t&&o.createElement("div",null,o.createElement(c.b,null,o.createElement(l.a,null,o.createElement(r.Trans,{id:"Your preview is ready! On your mobile or tablet, open your browser and enter in the address bar:"}))),o.createElement(s.b,{value:t,fullWidth:!0}),o.createElement(c.b,null,o.createElement(l.a,null,o.createElement(r.Trans,{id:"Please note that your device should be connected on the same network as this computer."}))))):null}}},2007:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));const r=e=>{if(!e.length)return null;let t=e.find(e=>0===e.indexOf("192.168"));return t||(t=e.find(e=>0===e.indexOf("192")),t||e[0])}},2008:function(e,t,n){"use strict";n.d(t,"a",(function(){return y}));var r=n(72),o=n(2),a=n(2009),i=n(2010),s=n(2011),l=n(2012),c=n(2013),u=n(2015),p=n(2016),d=n(2017),m=n(897),h=n.n(m),f=n(899),g=n.n(f),E=n(898),v=n.n(E),b=n(894),x=n(895),w=n(896);const y=()=>[{name:o.createElement(r.Trans,{id:"Android (& iOS coming soon)"}),renderIcon:e=>o.createElement(h.a,e),helpPage:"/publishing/android_and_ios",description:o.createElement(r.Trans,{id:"Package your game for Android directly from GDevelop. iOS support is coming soon!"}),key:"localonlinecordovaexport",exportPipeline:u.a},{name:o.createElement(r.Trans,{id:"Web (upload online)"}),renderIcon:e=>o.createElement(w.a,e),helpPage:"/publishing/web",description:o.createElement(r.Trans,{id:"Upload your game online directly from GDevelop and share the link to players. Play to your game using your browser on computers and mobile phones."}),key:"localonlinewebexport",exportPipeline:d.a},{name:o.createElement(r.Trans,{id:"Local folder"}),renderIcon:e=>o.createElement(v.a,e),helpPage:"/publishing/html5_game_in_a_local_folder",description:o.createElement(r.Trans,{id:"Build the game locally as a HTML5 game. You can then publish it on website like Kongregate, Game Jolt, itch.io, Poki..."}),key:"localexport",exportPipeline:s.a,advanced:!0},{name:o.createElement(r.Trans,{id:"Facebook Instant Games"}),renderIcon:e=>o.createElement(b.a,e),helpPage:"/publishing/publishing-to-facebook-instant-games",description:o.createElement(r.Trans,{id:"Package your game as a Facebook Instant Games that can be played on Facebook Messenger."}),key:"localfacebookinstantgames",exportPipeline:c.a,advanced:!0},{name:o.createElement(r.Trans,{id:"iOS & Android (manual)"}),renderIcon:e=>o.createElement(x.a,e),helpPage:"/publishing/android_and_ios_with_cordova",description:o.createElement(r.Trans,{id:"Build the game locally as a Cordova project, and export it manually to iOS or Android with Cordova developers tools."}),key:"localcordovaexport",exportPipeline:a.a,advanced:!0},{name:o.createElement(r.Trans,{id:"Windows/macOS/Linux"}),renderIcon:e=>o.createElement(g.a,e),helpPage:"/publishing/windows-macos-linux",description:o.createElement(r.Trans,{id:"Package your game as an app for Windows, macOS or Linux directly from GDevelop."}),key:"localonlineelectronexport",exportPipeline:p.a},{name:o.createElement(r.Trans,{id:"Windows/macOS/Linux (manual)"}),renderIcon:e=>o.createElement(g.a,e),helpPage:"/publishing/windows-macos-linux-with-electron",description:o.createElement(r.Trans,{id:"Build the game locally and export it manually to Windows, macOS or Linux with third-party developer tools."}),key:"localelectronexport",exportPipeline:i.a,advanced:!0},{name:o.createElement(r.Trans,{id:"Cocos2d-JS"}),renderIcon:e=>o.createElement(h.a,e),helpPage:"/publishing/android_and_ios_with_cocos2d-js",description:o.createElement(r.Trans,{id:"Export your game using Cocos2d-JS game engine. The game can be compiled for Android or iOS if you install Cocos2d-JS developer tools."}),key:"localcocos2dexport",exportPipeline:l.a,experimental:!0}]},2009:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return b}));var r=n(72),o=n(2),a=n.n(o),i=n(84),s=n(75),l=n(152),c=n(169),u=n(253),p=n(117),d=n.n(p),m=n(3),h=n.n(m),f=n(886);const g=h()("electron"),E=g?g.shell:null,v=e.gd,b={name:"local-cordova",getInitialExportState:e=>({outputDir:e.getLastCompilationDirectory()}),canLaunchBuild:e=>!!e.outputDir,renderHeader:({project:e,exportState:t,updateExportState:n})=>a.a.createElement(s.a,{noMargin:!0},a.a.createElement(s.b,null,a.a.createElement(s.a,{noMargin:!0},a.a.createElement(f.b,null))),a.a.createElement(s.b,null,a.a.createElement(u.a,{type:"export",value:t.outputDir,defaultPath:e.getLastCompilationDirectory(),onChange:e=>{n(()=>({outputDir:e}))},fullWidth:!0}))),renderLaunchButtonLabel:()=>a.a.createElement(r.Trans,{id:"Package"}),prepareExporter:e=>Object(l.findGDJS)().then(({gdjsRoot:e})=>{console.info("GDJS found in ",e);const t=d()(new v.AbstractFileSystemJS,c.a);return{exporter:new v.Exporter(t,e)}}),launchExport:(e,{exporter:t})=>{const n=new v.MapStringBoolean;return n.set("exportForCordova",!0),t.exportWholePixiProject(e.project,e.exportState.outputDir,n),n.delete(),t.delete(),Promise.resolve(null)},launchResourcesDownload:(e,t)=>Promise.resolve(null),launchCompression:(e,t)=>Promise.resolve(null),renderDoneFooter:({exportState:e,onClose:t})=>{const n=()=>{E&&E.openItem(e.outputDir)};return a.a.createElement(f.a,{renderGameButton:()=>a.a.createElement(i.a,{key:"open",label:a.a.createElement(r.Trans,{id:"Open folder"}),primary:!0,onClick:n})})}}}).call(this,n(1))},2010:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return b}));var r=n(72),o=n(2),a=n.n(o),i=n(84),s=n(75),l=n(152),c=n(169),u=n(253),p=n(117),d=n.n(p),m=n(3),h=n.n(m),f=n(887);const g=h()("electron"),E=g?g.shell:null,v=e.gd,b={name:"local-electron",getInitialExportState:e=>({outputDir:e.getLastCompilationDirectory()}),canLaunchBuild:e=>!!e.outputDir,renderHeader:({project:e,exportState:t,updateExportState:n})=>a.a.createElement(s.a,{noMargin:!0},a.a.createElement(s.b,null,a.a.createElement(s.a,{noMargin:!0},a.a.createElement(f.b,null))),a.a.createElement(s.b,null,a.a.createElement(u.a,{type:"export",value:t.outputDir,defaultPath:e.getLastCompilationDirectory(),onChange:e=>{n(()=>({outputDir:e}))},fullWidth:!0}))),renderLaunchButtonLabel:()=>a.a.createElement(r.Trans,{id:"Package"}),prepareExporter:e=>Object(l.findGDJS)().then(({gdjsRoot:e})=>{console.info("GDJS found in ",e);const t=d()(new v.AbstractFileSystemJS,c.a);return{exporter:new v.Exporter(t,e)}}),launchExport:(e,{exporter:t})=>{const n=new v.MapStringBoolean;return n.set("exportForElectron",!0),t.exportWholePixiProject(e.project,e.exportState.outputDir,n),n.delete(),t.delete(),Promise.resolve(null)},launchResourcesDownload:(e,t)=>Promise.resolve(null),launchCompression:(e,t)=>Promise.resolve(null),renderDoneFooter:({exportState:e,onClose:t})=>{const n=()=>{E&&E.openItem(e.outputDir)};return a.a.createElement(f.a,{renderGameButton:()=>a.a.createElement(i.a,{key:"open",label:a.a.createElement(r.Trans,{id:"Open folder"}),primary:!0,onClick:n})})}}}).call(this,n(1))},2011:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return b}));var r=n(72),o=n(2),a=n.n(o),i=n(84),s=n(75),l=n(152),c=n(169),u=n(253),p=n(117),d=n.n(p),m=n(3),h=n.n(m),f=n(888);const g=h()("electron"),E=g?g.shell:null,v=e.gd,b={name:"local-html5",getInitialExportState:e=>({outputDir:e.getLastCompilationDirectory()}),canLaunchBuild:e=>!!e.outputDir,renderHeader:({project:e,exportState:t,updateExportState:n})=>a.a.createElement(s.a,{noMargin:!0},a.a.createElement(s.b,null,a.a.createElement(f.b,null)),a.a.createElement(s.b,null,a.a.createElement(u.a,{type:"export",value:t.outputDir,defaultPath:e.getLastCompilationDirectory(),onChange:e=>{n(()=>({outputDir:e}))},fullWidth:!0}))),renderLaunchButtonLabel:()=>a.a.createElement(r.Trans,{id:"Export as a HTML5 game"}),prepareExporter:e=>Object(l.findGDJS)().then(({gdjsRoot:e})=>{console.info("GDJS found in ",e);const t=d()(new v.AbstractFileSystemJS,c.a);return{exporter:new v.Exporter(t,e)}}),launchExport:(e,{exporter:t})=>{const n=new v.MapStringBoolean;return t.exportWholePixiProject(e.project,e.exportState.outputDir,n),n.delete(),t.delete(),Promise.resolve(null)},launchResourcesDownload:(e,t)=>Promise.resolve(null),launchCompression:(e,t)=>Promise.resolve(null),renderDoneFooter:({exportState:e,onClose:t})=>a.a.createElement(f.a,{renderGameButton:()=>a.a.createElement(i.a,{fullWidth:!0,primary:!0,onClick:()=>{E&&E.openItem(e.outputDir)},label:a.a.createElement(r.Trans,{id:"Open the exported game folder"})})})}}).call(this,n(1))},2012:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return w}));var r=n(78),o=n(72),a=n(2),i=n.n(a),s=n(84),l=n(75),c=n(152),u=n(169),p=n(253),d=n(117),m=n.n(d),h=n(3),f=n.n(h),g=n(272),E=n(889);const v=f()("electron"),b=v?v.shell:null,x=e.gd,w={name:"local-cocos2d",getInitialExportState:e=>({outputDir:e.getLastCompilationDirectory(),debugMode:!1}),canLaunchBuild:e=>!!e.outputDir,renderHeader:({project:e,exportState:t,updateExportState:n})=>i.a.createElement(l.a,{noMargin:!0},i.a.createElement(l.b,null,i.a.createElement(E.b,null)),i.a.createElement(l.b,null,i.a.createElement(p.a,{type:"export",value:t.outputDir,defaultPath:e.getLastCompilationDirectory(),onChange:e=>{n(t=>Object(r.a)({},t,{outputDir:e}))},fullWidth:!0})),i.a.createElement(l.b,null,i.a.createElement(g.a,{onToggle:(e,t)=>n(e=>Object(r.a)({},e,{debugMode:t})),toggled:t.debugMode,labelPosition:"right",label:i.a.createElement(o.Trans,{id:"Debug mode (show FPS counter and stats in the bottom left)"})}))),renderLaunchButtonLabel:()=>i.a.createElement(o.Trans,{id:"Package"}),prepareExporter:e=>Object(c.findGDJS)().then(({gdjsRoot:e})=>{console.info("GDJS found in ",e);const t=m()(new x.AbstractFileSystemJS,u.a);return{exporter:new x.Exporter(t,e)}}),launchExport:(e,{exporter:t})=>(t.exportWholeCocos2dProject(e.project,e.exportState.debugMode,e.exportState.outputDir),t.delete(),Promise.resolve(null)),launchResourcesDownload:(e,t)=>Promise.resolve(null),launchCompression:(e,t)=>Promise.resolve(null),renderDoneFooter:({exportState:e,onClose:t})=>{const n=()=>{b&&b.openItem(e.outputDir)};return i.a.createElement(E.a,{renderGameButton:()=>i.a.createElement(s.a,{key:"open",label:i.a.createElement(o.Trans,{id:"Open folder"}),primary:!0,onClick:n})})}}}).call(this,n(1))},2013:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return y}));var r=n(72),o=n(2),a=n.n(o),i=n(84),s=n(75),l=n(152),c=n(169),u=n(117),p=n.n(u),d=n(3),m=n.n(d),h=n(2014),f=n(401),g=n(890);const E=m()("path"),v=m()("electron"),b=v?v.remote.app:null,x=v?v.shell:null,w=e.gd,y={name:"local-facebook-instant-games",getInitialExportState:e=>({archiveOutputFilename:b?E.join(b.getPath("documents"),"fb-instant-game.zip"):""}),canLaunchBuild:e=>!!e.archiveOutputFilename,renderHeader:({project:e,exportState:t,updateExportState:n})=>a.a.createElement(s.a,{noMargin:!0},a.a.createElement(s.b,null,a.a.createElement(g.b,null)),a.a.createElement(s.b,null,a.a.createElement(h.a,{title:"Facebook Instant Games export zip file",message:"Choose where to save the exported file for Facebook Instant Games",filters:[{name:"Compressed file for Facebook Instant Games",extensions:["zip"]}],value:t.archiveOutputFilename,defaultPath:b?b.getPath("documents"):"",onChange:e=>n(()=>({archiveOutputFilename:e})),fullWidth:!0}))),renderLaunchButtonLabel:()=>a.a.createElement(r.Trans,{id:"Package"}),prepareExporter:e=>Object(l.findGDJS)().then(({gdjsRoot:e})=>{console.info("GDJS found in ",e);const t=p()(new w.AbstractFileSystemJS,c.a),n=new w.Exporter(t,e),r=E.join(t.getTempDir(),"FacebookInstantGamesExport");return t.mkDir(r),t.clearDir(r),{exporter:n,temporaryOutputDir:r}}),launchExport:(e,{exporter:t,temporaryOutputDir:n})=>{const r=new w.MapStringBoolean;return r.set("exportForFacebookInstantGames",!0),t.exportWholePixiProject(e.project,n,r),r.delete(),t.delete(),Promise.resolve({temporaryOutputDir:n})},launchResourcesDownload:(e,{temporaryOutputDir:t})=>Promise.resolve({temporaryOutputDir:t}),launchCompression:(e,{temporaryOutputDir:t})=>Object(f.a)({path:t,outputFilename:e.exportState.archiveOutputFilename}),renderDoneFooter:({exportState:e,onClose:t})=>{const n=()=>{x&&E&&x.openItem(E.dirname(e.archiveOutputFilename))};return a.a.createElement(g.a,{renderGameButton:()=>a.a.createElement(i.a,{key:"open",label:a.a.createElement(r.Trans,{id:"Open folder"}),primary:!0,onClick:n})})}}}).call(this,n(1))},2014:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var r=n(78),o=n(72),a=n(2),i=n.n(a),s=n(94),l=n(3),c=n.n(l),u=n(84);const p=c()("electron"),d=p?p.remote.dialog:null,m={container:{position:"relative",display:"flex",alignItems:"baseline"},button:{marginLeft:10},textField:{flex:1}};class h extends a.PureComponent{constructor(...e){super(...e),this.onChooseFolder=()=>{if(!d||!p)return;const e=p.remote.getCurrentWindow();return d.showSaveDialog(e,{title:this.props.title,filters:this.props.filters,message:this.props.message,defaultPath:this.props.defaultPath}).then(({filePath:e})=>{this.props.onChange(e||"")})}}render(){return i.a.createElement("div",{style:Object(r.a)({},m.container,{width:this.props.fullWidth?"100%":void 0})},i.a.createElement(s.b,{margin:"dense",style:m.textField,type:"text",hintText:{id:"Choose a file"},value:this.props.value,onChange:(e,t)=>this.props.onChange(t)}),i.a.createElement(u.a,{label:i.a.createElement(o.Trans,{id:"Choose"}),style:m.button,onClick:this.onChooseFolder}))}}},2015:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return v}));var r=n(72),o=n(2),a=n(117),i=n.n(a),s=n(181),l=n(541),c=n(152),u=n(401),p=n(3),d=n.n(p),m=n(169),h=n(891);const f=d()("path"),g=d()("os"),E=e.gd,v={name:"local-online-cordova",onlineBuildType:"cordova-build",getInitialExportState:()=>null,canLaunchBuild:()=>!0,renderHeader:()=>o.createElement(h.a,null),renderLaunchButtonLabel:()=>o.createElement(r.Trans,{id:"Packaging for Android"}),prepareExporter:e=>Object(c.findGDJS)().then(({gdjsRoot:e})=>{console.info("GDJS found in ",e);const t=i()(new E.AbstractFileSystemJS,m.a),n=new E.Exporter(t,e),r=f.join(t.getTempDir(),"OnlineCordovaExport");return t.mkDir(r),t.clearDir(r),{exporter:n,temporaryOutputDir:r}}),launchExport:(e,{exporter:t,temporaryOutputDir:n})=>{const r=new E.MapStringBoolean;return r.set("exportForCordova",!0),t.exportWholePixiProject(e.project,n,r),r.delete(),t.delete(),Promise.resolve({temporaryOutputDir:n})},launchResourcesDownload:(e,{temporaryOutputDir:t})=>Promise.resolve({temporaryOutputDir:t}),launchCompression:(e,{temporaryOutputDir:t})=>{const n=g.tmpdir();return Object(u.a)({path:t,outputFilename:f.join(n,"game-archive.zip")})},launchUpload:(e,t)=>Object(s.f)().then(n=>Object(l.a)(t,n,e.updateStepProgress).then(()=>n.key)),launchOnlineBuild:(e,t,n)=>{const r=t.getAuthorizationHeader,o=t.profile;return o?Object(s.a)(r,o.uid,n):Promise.reject(new Error("User is not authenticated"))}}}).call(this,n(1))},2016:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return v}));var r=n(72),o=n(2),a=n(117),i=n.n(a),s=n(181),l=n(152),c=n(541),u=n(401),p=n(3),d=n.n(p),m=n(169),h=n(892);const f=d()("path"),g=d()("os"),E=e.gd,v={name:"local-online-electron",onlineBuildType:"electron-build",getInitialExportState:()=>({targets:["winExe"]}),canLaunchBuild:e=>!!e.targets.length,renderHeader:e=>o.createElement(h.a,e),renderLaunchButtonLabel:()=>o.createElement(r.Trans,{id:"Package"}),prepareExporter:e=>Object(l.findGDJS)().then(({gdjsRoot:e})=>{console.info("GDJS found in ",e);const t=i()(new E.AbstractFileSystemJS,m.a),n=new E.Exporter(t,e),r=f.join(t.getTempDir(),"OnlineElectronExport");return t.mkDir(r),t.clearDir(r),{exporter:n,temporaryOutputDir:r}}),launchExport:(e,{exporter:t,temporaryOutputDir:n})=>{const r=new E.MapStringBoolean;return r.set("exportForElectron",!0),t.exportWholePixiProject(e.project,n,r),r.delete(),t.delete(),Promise.resolve({temporaryOutputDir:n})},launchResourcesDownload:(e,{temporaryOutputDir:t})=>Promise.resolve({temporaryOutputDir:t}),launchCompression:(e,{temporaryOutputDir:t})=>{const n=g.tmpdir();return Object(u.a)({path:t,outputFilename:f.join(n,"game-archive.zip")})},launchUpload:(e,t)=>Object(s.f)().then(n=>Object(c.a)(t,n,e.updateStepProgress).then(()=>n.key)),launchOnlineBuild:(e,t,n)=>{const r=t.getAuthorizationHeader,o=t.profile;return o?Object(s.b)(r,o.uid,n,e.targets):Promise.reject(new Error("User is not authenticated"))}}}).call(this,n(1))},2017:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return v}));var r=n(72),o=n(2),a=n(117),i=n.n(a),s=n(181),l=n(541),c=n(152),u=n(401),p=n(3),d=n.n(p),m=n(169),h=n(893);const f=d()("path"),g=d()("os"),E=e.gd,v={name:"local-online-web",onlineBuildType:"web-build",getInitialExportState:()=>null,canLaunchBuild:()=>!0,renderHeader:()=>o.createElement(h.a,null),renderLaunchButtonLabel:()=>o.createElement(r.Trans,{id:"Publish online"}),prepareExporter:e=>Object(c.findGDJS)().then(({gdjsRoot:e})=>{console.info("GDJS found in ",e);const t=i()(new E.AbstractFileSystemJS,m.a),n=new E.Exporter(t,e),r=f.join(t.getTempDir(),"OnlineWebExport");return t.mkDir(r),t.clearDir(r),{exporter:n,temporaryOutputDir:r}}),launchExport:(e,{exporter:t,temporaryOutputDir:n})=>{const r=new E.MapStringBoolean;return t.exportWholePixiProject(e.project,n,r),r.delete(),t.delete(),Promise.resolve({temporaryOutputDir:n})},launchResourcesDownload:(e,{temporaryOutputDir:t})=>Promise.resolve({temporaryOutputDir:t}),launchCompression:(e,{temporaryOutputDir:t})=>{const n=g.tmpdir();return Object(u.a)({path:t,outputFilename:f.join(n,"game-archive.zip")})},launchUpload:(e,t)=>Object(s.f)().then(n=>Object(l.a)(t,n,e.updateStepProgress).then(()=>n.key)),launchOnlineBuild:(e,t,n)=>{const r=t.getAuthorizationHeader,o=t.profile;return o?Object(s.c)(r,o.uid,n):Promise.reject(new Error("User is not authenticated"))}}}).call(this,n(1))},2018:function(e,t,n){"use strict";var r=n(2),o=n(3),a=n.n(o),i=n(24);const s=a()("electron"),l=s?s.ipcRenderer:null,c=(e,t)=>{r.useEffect(()=>{if(!l)return;const n=(e,...n)=>t(...n);return l.on(e,n),()=>l.removeListener(e,n)},[e,t])};t.a=e=>{const t=e.i18n,n=e.project,o=t.language;return c("main-menu-open",e.onChooseProject),c("main-menu-save",e.onSaveProject),c("main-menu-save-as",e.onSaveProjectAs),c("main-menu-close",e.onCloseProject),c("main-menu-close-app",e.onCloseApp),c("main-menu-export",e.onExportProject),c("main-menu-create",e.onCreateProject),c("main-menu-open-project-manager",e.onOpenProjectManager),c("main-menu-open-start-page",e.onOpenStartPage),c("main-menu-open-debugger",e.onOpenDebugger),c("main-menu-open-about",e.onOpenAbout),c("main-menu-open-preferences",e.onOpenPreferences),c("main-menu-open-language",e.onOpenLanguage),c("main-menu-open-profile",e.onOpenProfile),c("update-status",e.setUpdateStatus),r.useEffect(()=>{((e,t)=>{const n={label:t._({id:"File"}),submenu:[{label:t._({id:"Create a New Project..."}),accelerator:"CommandOrControl+N",onClickSendEvent:"main-menu-create"},{type:"separator"},{label:t._({id:"Open..."}),accelerator:"CommandOrControl+O",onClickSendEvent:"main-menu-open"},{type:"separator"},{label:t._({id:"Save"}),accelerator:"CommandOrControl+S",onClickSendEvent:"main-menu-save",enabled:!!e},{label:t._({id:"Save as..."}),accelerator:"CommandOrControl+Alt+S",onClickSendEvent:"main-menu-save-as",enabled:!!e},{type:"separator"},{label:t._({id:"Export (web, iOS, Android)..."}),accelerator:"CommandOrControl+E",onClickSendEvent:"main-menu-export",enabled:!!e},{type:"separator"},{label:t._({id:"Close Project"}),accelerator:"CommandOrControl+Shift+W",onClickSendEvent:"main-menu-close",enabled:!!e}]};Object(i.e)()||n.submenu.push({type:"separator"},{label:t._({id:"My Profile"}),onClickSendEvent:"main-menu-open-profile"},{label:t._({id:"Preferences"}),onClickSendEvent:"main-menu-open-preferences"},{label:t._({id:"Language"}),onClickSendEvent:"main-menu-open-language"},{type:"separator"},{label:t._({id:"Exit GDevelop"}),accelerator:"Control+Q",onClickSendEvent:"main-menu-close-app"});const r={label:t._({id:"Edit"}),submenu:[{role:"undo"},{role:"redo"},{type:"separator"},{role:"cut"},{role:"copy"},{role:"paste"},{role:"pasteandmatchstyle"},{role:"delete"},{role:"selectall"}]},o={label:t._({id:"View"}),submenu:[{label:t._({id:"Show Project Manager"}),accelerator:"CommandOrControl+Alt+P",onClickSendEvent:"main-menu-open-project-manager",enabled:!!e},{label:t._({id:"Show Start Page"}),onClickSendEvent:"main-menu-open-start-page"},{label:t._({id:"Open Debugger"}),onClickSendEvent:"main-menu-open-debugger",enabled:!!e},{type:"separator"},{role:"toggledevtools"},{type:"separator"},{role:"togglefullscreen"}]},a={role:"window",submenu:[{role:"minimize"}]},s={role:"help",submenu:[{label:t._({id:"GDevelop website"}),onClickOpenLink:"http://gdevelop-app.com"},{type:"separator"},{label:t._({id:"Community Forums"}),onClickOpenLink:"https://forum.gdevelop-app.com"},{label:t._({id:"Community Discord Chat"}),onClickOpenLink:"https://discord.gg/rjdYHvj"},{type:"separator"},{label:t._({id:"Contribute to GDevelop"}),onClickOpenLink:"https://gdevelop-app.com/contribute/"},{label:t._({id:"Create Extensions for GDevelop"}),onClickOpenLink:"https://github.com/4ian/GDevelop/blob/master/newIDE/README-extensions.md"},{type:"separator"},{label:t._({id:"Help to Translate GDevelop"}),onClickOpenLink:"https://crowdin.com/project/gdevelop"},{label:t._({id:"Report a wrong translation"}),onClickOpenLink:"https://github.com/4ian/GDevelop/issues/969"}]};Object(i.e)()||s.submenu.push({type:"separator"},{label:t._({id:"About GDevelop"}),onClickSendEvent:"main-menu-open-about"});const c=[n,r,o,a,s];Object(i.e)()&&(c.unshift({label:t._({id:"GDevelop 5"}),submenu:[{label:t._({id:"About GDevelop"}),onClickSendEvent:"main-menu-open-about"},{type:"separator"},{label:t._({id:"My Profile"}),onClickSendEvent:"main-menu-open-profile"},{label:t._({id:"Preferences"}),onClickSendEvent:"main-menu-open-preferences"},{label:t._({id:"Language"}),onClickSendEvent:"main-menu-open-language"},{type:"separator"},{role:"services",submenu:[]},{type:"separator"},{role:"hide"},{role:"hideothers"},{role:"unhide"},{type:"separator"},{role:"quit"}]}),r.submenu.push({type:"separator"},{label:t._({id:"Speech"}),submenu:[{role:"startspeaking"},{role:"stopspeaking"}]}),a.submenu=[{role:"minimize"},{role:"zoom"},{type:"separator"},{role:"front"}]),l&&l.send("set-main-menu",c)})(n,t)},[t,o,n]),null}},2019:function(e,t,n){const r=n(900).loadExtension,o=n(3),a=n(2020).findJsExtensionModules;e.exports=function({gd:e,objectsEditorService:t,objectsRenderingService:n,filterExamples:i}){return{loadAllExtensions:s=>a({filterExamples:i}).then(a=>Promise.all(a.map(a=>{let i=null;try{i=o(a,{rethrowException:!0})}catch(l){return{extensionModulePath:a,result:{message:"Unable to import extension. Please check for any syntax error or error that would prevent it from being run.",error:!0,rawError:l}}}return i?(t&&i.registerEditorConfigurations&&i.registerEditorConfigurations(t),n&&i.registerInstanceRenderers&&i.registerInstanceRenderers(n),{extensionModulePath:a,result:r(s,e,e.JsPlatform.get(),i)}):{extensionModulePath:a,result:{error:!0,message:"Unknown error. Please check for any syntax error or error that would prevent it from being run."}}})),e=>{throw console.error("Unable to find JS extensions modules"),e})}}},2020:function(e,t,n){const r=n(152).findGDJS,o=n(3),a=o("path"),i=o("fs");e.exports={findJsExtensionModules:({filterExamples:e})=>r().then(({gdjsRoot:t})=>{const n=a.join(t,"Runtime","Extensions");return console.info("Searching for JS extensions (file called JsExtension.js) in ".concat(n,"...")),new Promise((t,r)=>{i.readdir(n,(o,s)=>{if(o)return r(o);const l=s.filter(t=>!e||-1===t.indexOf("Example"));Promise.all(l.map(e=>{return t=a.join(n,e),new Promise(e=>{const n=a.join(t,"JsExtension.js");i.stat(n,(t,r)=>e(t?null:r.isFile()?n:null))});var t})).then(e=>{t(e.filter(e=>!!e))},r)})})})}},2021:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(3),o=n.n(r),a=n(369),i=n.n(a);const s=o()("os"),l=o()("fs"),c=()=>{const e=s.tmpdir()+"/GDGeneratedEventsFunctions";l.mkdir(e,e=>{e&&"EEXIST"!==e.code&&console.error("Unable to create the directory where to output events functions generated code: ",e)});const t=t=>"".concat(e,"/").concat(i()(t),".js");return{getIncludeFileFor:e=>t(e),writeFunctionCode:(e,n)=>new Promise((r,o)=>{const a=t(e);l.writeFile(a,n,e=>{if(e)return o(e);r()})}),writeBehaviorCode:(e,n)=>new Promise((r,o)=>{const a=t(e);l.writeFile(a,n,e=>{if(e)return o(e);r()})})}}},2024:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(121),o=n(3),a=n.n(o);const i=a()("fs-extra"),s=a()("path"),l=a()("electron"),c=l?l.remote.dialog:null;class u{}u.chooseEventsFunctionExtensionFile=()=>{if(!c)return Promise.reject("Not supported");const e=l.remote.getCurrentWindow();return c.showSaveDialog(e,{title:"Export an extension of the project",filters:[{name:'GDevelop 5 "events based" extension',extensions:["json"]}],defaultPath:"Extension.json"}).then(({filePath:e})=>e||null)},u.writeEventsFunctionsExtension=(e,t)=>((e,t)=>{if(!i)return Promise.reject(new Error("Filesystem is not supported."));try{const n=JSON.stringify(e,null,2);return i.ensureDir(s.dirname(t)).then(()=>new Promise((e,r)=>{i.writeFile(t,n,t=>t?r(t):e())}))}catch(n){return Promise.reject(n)}})(Object(r.b)(e),t).catch(e=>{throw console.error("Unable to write the events function extension:",e),e})},2025:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(3),o=n.n(r);const a=o()("fs"),i=o()("electron"),s=i?i.remote.dialog:null;class l{}l.chooseEventsFunctionExtensionFile=()=>{if(!s)return Promise.reject("Not supported");const e=i.remote.getCurrentWindow();return s.showOpenDialog(e,{title:"Import an extension in the project",properties:["openFile"],message:"Choose an extension file to import (.json file)",filters:[{name:'GDevelop 5 "events based" extension',extensions:["json"]}]}).then(({filePaths:e})=>e&&e.length?e[0]:null)},l.readEventsFunctionExtensionFile=e=>(e=>a?new Promise((t,n)=>{a.readFile(e,{encoding:"utf8"},(r,o)=>{if(r)return n(r);try{const e=JSON.parse(o);return t(e)}catch(a){return n(e+" is a corrupted/malformed file.")}})}):Promise.reject("Filesystem is not supported."))(e)},2026:function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var r=n(2),o=n(3),a=n.n(o),i=n(119),s=n(246),l=n.n(s);const c=a()("electron"),u=a()("fs"),p=a()("child_process"),d=a()("process"),m=a()("path"),h=()=>{if(!c)return"";const e=d.cwd();return m.join(e,"../app")},f=()=>{if(!c||!u)return Promise.resolve({paths:[],pathsWithErrors:{}});const e={},t=m.join(h(),"../.."),n=m.join(t,"GDJS/Runtime"),r=m.join(t,"Extensions");return new Promise(t=>u.readdir(r,(n,o)=>{if(n)return e[r]=n,void t([]);t(Promise.all(o.map(t=>new Promise(n=>{const o=m.join(r,t);u.stat(o,(t,r)=>{if(t)return e[o]=t,void n(o);n(r.isDirectory()?o:null)})}))).then(e=>e.filter(Boolean)))})).then(t=>Promise.resolve([n].concat(["Cocos2d","Cordova","Electron","FacebookInstantGames","cocos-renderers","cocos-sound-manager","events-tools","fontfaceobserver-font-manager","howler-sound-manager","libs","pixi-renderers","websocket-debugger-client"].map(e=>m.join(n,e)))).then(n=>({paths:[...n,...t],pathsWithErrors:e})))},g=()=>p&&m?new Promise((e,t)=>{p.exec('node "'.concat(m.join(h(),"scripts/import-GDJS-Runtime.js"),'"'),(n,r,o)=>n?(console.error("GDJS Runtime update error: ".concat(n)),void t(n)):(console.info("GDJS Runtime update: ".concat(r)),o?(console.error("GDJS Runtime update error: ".concat(o)),void t(new Error("Error while updating GDJS Runtime"))):void e()))}):Promise.reject(new Error("Unsupported")),E=l()((e,t)=>{const n=e||"unknown-event",r=t||"unknown-file";console.info('GDJS/extensions watchers found a "'.concat(n,'" in ').concat(r,", updating GDJS Runtime...")),g().catch(()=>{})},100),v=()=>{const e=r.useContext(i.b).values.useGDJSDevelopmentWatcher;return r.useEffect(()=>{if(!e)return;let t=!1,n=[],r=performance.now();return f().then(({paths:e,pathsWithErrors:o})=>{if(t)return;if(!u)return void console.error("Unable to use 'fs' from Node.js to watch changes in GDJS.");g().catch(()=>{}),e.forEach(e=>{let t=null;try{t=u.watch(e,{},E)}catch(r){return o[e]=r,null}t&&(t.on("error",e=>{console.warn("Error in watcher for GDJS Runtime - manually call npm run `node import-GDJS-Runtime.js` in the newIDE/app/scripts folder if you make changes to GDJS.",e)}),n.push(t))}),Object.keys(o).length&&console.warn("Error while setting up watchers for some paths: ",o);const a=(performance.now()-r).toFixed(2);n.length?console.info("Watchers for GDJS Runtime/extensions installed in ".concat(a,"ms.")):console.warn("No watchers for GDJS Runtime/extensions installed (took ".concat(a,"ms)."))}),()=>{t=!0,n.length&&(n.forEach(e=>{e.close()}),console.info("Watchers for GDJS Runtime closed."))}},[e]),null}},253:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var r=n(78),o=n(72),a=n(2),i=n.n(a),s=n(94),l=n(84),c=n(3);const u=n.n(c)()("electron"),p=u?u.remote.dialog:null,d={container:{position:"relative",display:"flex",alignItems:"baseline"},button:{marginLeft:10},textField:{flex:1}};class m extends a.PureComponent{constructor(...e){super(...e),this._onChooseFolder=({title:e,message:t})=>{if(!p||!u)return;const n=u.remote.getCurrentWindow();p.showOpenDialog(n,{title:e,properties:["openDirectory","createDirectory"],message:t,defaultPath:this.props.defaultPath}).then(({filePaths:e})=>{e&&e.length&&this.props.onChange(e[0])})},this._getTitleAndMessage=e=>{const t=this.props.type;return"export"===t?{title:e._({id:"Choose an export folder"}),message:e._({id:"Choose where to export the game"})}:"create-game"===t?{title:e._({id:"Choose a folder for the new game"}),message:e._({id:"Choose where to create the game"})}:{title:void 0,message:void 0}}}render(){return i.a.createElement(o.I18n,null,({i18n:e})=>{const t=this._getTitleAndMessage(e);return i.a.createElement("div",{style:Object(r.a)({},d.container,{width:this.props.fullWidth?"100%":void 0})},i.a.createElement(s.b,{margin:"dense",style:d.textField,type:"text",hintText:t.title,value:this.props.value,onChange:(e,t)=>this.props.onChange(t)}),i.a.createElement(l.a,{label:i.a.createElement(o.Trans,{id:"Choose folder"}),primary:!1,style:d.button,onClick:()=>this._onChooseFolder(t)}))})}}},401:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(3),o=n.n(r);const a=o()("fs"),i=o()("archiver"),s=({path:e,outputFilename:t})=>new Promise((n,r)=>{if(!a||!i)return r(new Error("Archiver unavailable"));const o=a.createWriteStream(t),s=i("zip",{zlib:{level:9}});o.on("close",()=>{console.log("Archive written at ".concat(t,", ").concat(s.pointer()," total bytes.")),n(t)}),s.on("error",e=>{r(e)}),s.pipe(o),s.directory(e,!1),s.finalize()})},541:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(3);const o=n.n(r)()("electron"),a=o?o.ipcRenderer:null,i=(e,t,n)=>a?(a.removeAllListeners("local-file-upload-progress"),a.removeAllListeners("local-file-upload-done"),new Promise((r,o)=>{a.on("local-file-upload-progress",(e,t,r)=>{n(t,r)}),a.on("local-file-upload-done",(e,t)=>{if(t)return o(t);r()}),a.send("local-file-upload",e,t)})):Promise.reject("No support for local file upload")},544:function(e,t,n){"use strict";var r=n(78),o=n(3),a=n.n(o),i=n(885);const s=a()("fs"),l=a()("path"),c=a()("electron"),u=c?c.remote.dialog:null,p=e=>s?new Promise((t,n)=>{s.readFile(e,{encoding:"utf8"},(r,o)=>{if(r)return n(r);try{const e=JSON.parse(o);return t(e)}catch(a){return n(e+" is a corrupted/malformed file.")}})}):Promise.reject("Filesystem is not supported."),d=()=>{if(!u)return Promise.reject("Not supported");const e=c.remote.getCurrentWindow();return u.showOpenDialog(e,{title:"Open a project",properties:["openFile"],message:"If you want to open your GDevelop 4 project, be sure to save it as a .json file",filters:[{name:"GDevelop 5 project",extensions:["json"]}]}).then(({filePaths:e})=>e&&e.length?{fileIdentifier:e[0]}:null)},m=e=>{const t=e.fileIdentifier,n=l.dirname(t);return p(t).then(e=>Object(i.d)(e,{getReferencePartialObject:e=>p(l.join(n,e)+".json"),isReferenceMagicPropertyName:"__REFERENCE_TO_SPLIT_OBJECT",maxUnsplitDepth:3}).then(()=>({content:e})))},h=(e,t)=>{const n=e.fileIdentifier,r=n+".autosave";if(s.existsSync(r)){if(!t)return Promise.resolve(!0);try{if(s.statSync(r).mtime.getTime()>s.statSync(n).mtime.getTime())return Promise.resolve(!0)}catch(o){return console.error("Unable to compare *.autosave to project",o),Promise.resolve(!1)}return Promise.resolve(!1)}return Promise.resolve(!1)},f=e=>Promise.resolve(Object(r.a)({},e,{fileIdentifier:e.fileIdentifier+".autosave"}));var g=n(1986),E=n(5);t.a={internalName:"LocalFile",name:{id:"Local file system"},getFileMetadataFromAppArguments:e=>e[E.a]&&e[E.a].length?{fileIdentifier:e[E.a][0]}:null,createOperations:()=>({onOpenWithPicker:d,onOpen:m,hasAutoSave:h,onSaveProject:g.b,onSaveProjectAs:g.c,onAutoSaveProject:g.a,onGetAutoSave:f,getOpenErrorMessage:e=>({id:"Check that the file exists, that this file is a proper game created with GDevelop and that you have the authorizations to open it."})})}},70:function(e,t,n){"use strict";n.r(t),function(e){n.d(t,"create",(function(){return k}));var r=n(2),o=n.n(r),a=n(561),i=n(5),s=n(907),l=n(915),c=(n(13),n(37),n(881)),u=n(1999),p=n(2e3),d=n(2001),m=n(2005),h=n(2008),f=n(2018),g=n(2019),E=n.n(g),v=n(2021),b=n(395),x=n(180),w=n(908),y=n(2024),P=n(2025),j=n(901),S=n(544),C=n(2026),O=n(271);const D=e.gd,k=e=>{i.b.setUpContextMenu();const t=i.b.getArguments(),n=i.b.isDev();return o.a.createElement(w.a,{authentification:e,disableCheckForUpdates:!!t["disable-update-check"],eventsFunctionCodeWriter:Object(v.a)(),eventsFunctionsExtensionWriter:y.a,eventsFunctionsExtensionOpener:P.a},({i18n:e,eventsFunctionsExtensionsState:r})=>o.a.createElement(j.a,{appArguments:t,storageProviders:[S.a],defaultStorageProvider:S.a},({getStorageProviderOperations:t,storageProviders:i,initialFileMetadataToOpen:g})=>o.a.createElement(O.b.Consumer,null,v=>o.a.createElement(a.a,{i18n:e,renderMainMenu:e=>o.a.createElement(f.a,e),eventsFunctionsExtensionsState:r,renderPreviewLauncher:(e,t)=>o.a.createElement(m.a,Object.assign({},e,{ref:t})),renderExportDialog:e=>o.a.createElement(s.a,Object.assign({},e,{exporters:Object(h.a)()})),renderCreateDialog:e=>o.a.createElement(l.a,Object.assign({},e,{examplesComponent:c.a,startersComponent:u.a})),renderGDJSDevelopmentWatcher:n?()=>o.a.createElement(C.a,null):null,storageProviders:i,getStorageProviderOperations:t,resourceSources:p.a,resourceExternalEditors:d.a,extensionsLoader:E()({gd:D,objectsEditorService:b.a,objectsRenderingService:x.a,filterExamples:!n}),initialFileMetadataToOpen:g,unsavedChanges:v}))))}}.call(this,n(1))},881:function(e,t,n){"use strict";n.d(t,"b",(function(){return y})),n.d(t,"a",(function(){return P}));var r=n(72),o=n(2),a=n.n(o),i=n(2381),s=n(253),l=n(8),c=n(75),u=n(83),p=n(882),d=n(3),m=n.n(d),h=n(883),f=n(917),g=n(20),E=n(544);const v=m()("path"),b=m()("electron"),x=b?b.remote.app:null;var w=m()("fs-extra");const y=(e,t,n)=>{Object(g.c)(e._({id:"Unable to create the game in the specified folder. Check that you have permissions to write in this folder: {outputPath} or choose another folder.",values:{outputPath:t}}),n)};class P extends o.Component{constructor(...e){super(...e),this.state={outputPath:Object(h.a)(v&&x?v.join(x.getPath("documents"),"GDevelop projects"):""),exampleNames:null},this._handleChangePath=e=>this.setState({outputPath:e}),this.createFromExample=(e,t)=>{const n=this.state.outputPath;w&&n&&Object(p.a)(r=>{try{w.mkdirsSync(n),w.copySync(v.join(r,t),n)}catch(o){return void y(e,n,o)}this.props.onOpen(E.a,{fileIdentifier:v.join(n,t+".json")}),Object(l.h)(t)})}}componentDidMount(){Object(p.a)(e=>{w.readdir(e,(e,t)=>{e?console.error("Unable to read examples:",e):this.setState({exampleNames:t.filter(e=>".DS_Store"!==e)},()=>this.props.onExamplesLoaded())})})}render(){return a.a.createElement(r.I18n,null,({i18n:e})=>a.a.createElement(c.a,{noMargin:!0},a.a.createElement(c.b,{expand:!0},a.a.createElement(c.a,{expand:!0},a.a.createElement(s.a,{fullWidth:!0,value:this.state.outputPath,onChange:this._handleChangePath,type:"create-game"}))),a.a.createElement(i.a,null),a.a.createElement(c.b,null,a.a.createElement(c.a,null,a.a.createElement(u.a,null,a.a.createElement(r.Trans,{id:"Choose or search for an example to open:"})))),a.a.createElement(c.b,null,a.a.createElement(f.a,{exampleNames:this.state.exampleNames,onCreateFromExample:t=>this.createFromExample(e,t)}))))}}},882:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r=n(3),o=n.n(r);const a=o()("electron"),i=o()("path"),s=a?a.remote.app:null,l=o()("fs"),c=o()("process"),u=(e,t,n)=>l.access(e,l.constants.R_OK,r=>{r?n():t(e)}),p=e=>{if(!c||!l)return"";const t=s?s.getAppPath():c.cwd();u(i.join(t,"..","examples"),e,()=>{u(i.join(t,"..","..","app","resources","examples"),e,()=>{e(null)})})}},883:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(134),o=n(3),a=n.n(o);const i=a()("path");var s=a()("fs-extra");const l=e=>{if(!i)return e;const t=Object(r.a)("My project",t=>{try{s.accessSync(i.join(e,t))}catch(n){return!1}return!0});return i.join(e,t)}},885:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"d",(function(){return s})),n.d(t,"c",(function(){return l})),n.d(t,"a",(function(){return c}));var r=n(134),o=n(369),a=n.n(o);const i=(e,{pathSeparator:t,getArrayItemReferenceName:n,shouldSplit:r,isReferenceMagicPropertyName:o})=>{const a=[],i=(e,t)=>(a.push({reference:e,object:t}),{[o]:!0,referenceTo:e}),s=(e,o,a)=>{if(null!==e&&"object"===typeof e)if(Array.isArray(e))for(let l in e){const c=o+t+"*";if(r(c)){const r=e[l],o=n(r,a),u=a+t+o;e[l]=i(u,r),s(r,c,u)}else{const n=a+t+l;s(e[l],c,n)}}else for(let n in e){const l=o+t+n,c=a+t+n;if(r(l)){const t=e[n];e[n]=i(c,t),s(t,l,c)}else s(e[n],l,c)}};return s(e,"",""),a},s=(e,{isReferenceMagicPropertyName:t,getReferencePartialObject:n,maxUnsplitDepth:r})=>{const o=(e,a)=>{if(void 0!==r&&a>=r)return Promise.resolve();if(null!==e&&"object"===typeof e){const r=Object.keys(e);if(r)return Promise.all(r.map(r=>{const i=(e=>!0===e[t]?e:null)(e[r]);return i?n(i.referenceTo).then(t=>(e[r]=t,o(e[r],a+1))):o(e[r],a+1)})).then(()=>{})}return Promise.resolve()};return o(e,0)},l=e=>t=>e.has(t),c=e=>{const t={};return(n,o)=>{const i=n[e];if("string"!==typeof i)throw new Error("Property ".concat(e," is not a string"));t[o]=t[o]||{};const s=Object(r.a)(a()(i),e=>!!t[o][e]);return t[o][s]=!0,s}}}}]);
//# sourceMappingURL=local-app.4114127b.chunk.js.map