(this["webpackJsonpgdevelop-ide"]=this["webpackJsonpgdevelop-ide"]||[]).push([[4],{183:function(e,t,n){"use strict";(function(e){var r=n(3),o=n.n(r),a=o()("fs-extra"),i=o()("path"),c=o()("os"),l=e.gd;t.a={mkDir:function(e){try{a.mkdirsSync(e)}catch(t){return console.error("mkDir("+e+") failed: "+t),!1}return!0},dirExists:function(e){return a.existsSync(e)},clearDir:function(e){var t=this;try{a.existsSync(e)&&a.readdirSync(e).forEach((function(n){var r=e+"/"+n;if(a.lstatSync(r).isDirectory())t.clearDir(r);else try{a.unlinkSync(r)}catch(o){console.error("fs.unlinkSync("+r+") failed: "+o)}}))}catch(n){console.error("clearDir("+e+") failed: "+n)}},getTempDir:function(){return c.tmpdir()},fileNameFrom:function(e){return this._isExternalURL(e)?e:(e=this._translateURL(e),i.basename(e))},dirNameFrom:function(e){return this._isExternalURL(e)?"":(e=this._translateURL(e),i.dirname(e))},makeAbsolute:function(e,t){return this._isExternalURL(e)?e:(e=this._translateURL(e),this.isAbsolute(t)||(t=i.resolve(t)),i.resolve(t,i.normalize(e)))},makeRelative:function(e,t){return this._isExternalURL(e)?e:(e=this._translateURL(e),i.relative(t,i.normalize(e)))},isAbsolute:function(e){return!!this._isExternalURL(e)||(0===e.length||((e=this._translateURL(e)).length>0&&"/"===e.charAt(0)||e.length>1&&":"===e.charAt(1)))},copyFile:function(e,t){if(this._isExternalURL(e))return!0;e=this._translateURL(e);try{e!==t&&a.copySync(e,t)}catch(n){return console.error("copyFile("+e+", "+t+") failed: "+n),!1}return!0},writeToFile:function(e,t){try{a.outputFileSync(e,t)}catch(n){return console.error("writeToFile("+e+", ...) failed: "+n),!1}return!0},readFile:function(e){try{return a.readFileSync(e).toString()}catch(t){return console.error("readFile("+e+") failed: "+t),""}},readDir:function(e,t){t=t.toUpperCase();var n=new l.VectorString;try{a.existsSync(e)&&a.readdirSync(e).forEach((function(r){0!==t.length&&-1===r.toUpperCase().indexOf(t,r.length-t.length)||n.push_back(e+"/"+r)}))}catch(r){console.error("readDir("+e+","+t+") failed: "+r)}return n},fileExists:function(e){e=this._translateURL(e);try{return a.statSync(e).isFile()}catch(t){return!1}},_isExternalURL:function(e){return"http"===e.substr(0,4)||"ftp"===e.substr(0,4)},_translateURL:function(e){return"g/"!==e.substr(0,2)&&"g\\"!==e.substr(0,2)||(e=e.substr(2)),e}}}).call(this,n(1))},1912:function(e,t,n){"use strict";(function(e){n.d(t,"b",(function(){return b})),n.d(t,"c",(function(){return E})),n.d(t,"a",(function(){return w}));var r=n(83),o=n(125),a=n(3),i=n.n(a),c=n(863),l=n(183),u=n(122),s=n.n(u),p=e.gd,d=i()("fs-extra"),f=i()("path"),m=i()("electron"),h=m?m.remote.dialog:null,v=function(e,t){if(!d)return Promise.reject(new Error("Filesystem is not supported."));try{var n=JSON.stringify(e,null,2);return""===n?Promise.reject(new Error("The content to save on disk is empty. Aborting.")):d.ensureDir(f.dirname(t)).then((function(){return new Promise((function(e,r){d.writeFile(t,n,(function(t){return t?r(t):e()}))}))})).then((function(){return function(e,t){var n=performance.now();return new Promise((function(r,o){d.readFile(e,{encoding:"utf8"},(function(a,i){if(a)return o(a);""===i&&o(new Error("Written file is empty, did the write fail?")),i!==t&&o(new Error("Written file is not containing the expected content, did the write fail?"));var c=performance.now()-n;console.info("Verified ".concat(e," content in ").concat(c.toFixed(),"ms.")),r()}))}))}(t,n)}))}catch(r){return Promise.reject(r)}},g=function(e,t,n){var r=Object(o.b)(e);if(e.isFolderProject()){var a=Object(c.b)(r,{pathSeparator:"/",getArrayItemReferenceName:Object(c.a)("name"),shouldSplit:Object(c.c)(new Set(["/layouts/*","/externalLayouts/*","/externalEvents/*","/layouts/*","/eventsFunctionsExtensions/*"])),isReferenceMagicPropertyName:"__REFERENCE_TO_SPLIT_OBJECT"});return Promise.all(a.map((function(e){return v(e.object,f.join(n,e.reference)+".json").catch((function(e){throw console.error("Unable to write a partial file:",e),e}))}))).then((function(){return v(r,t).catch((function(e){throw console.error("Unable to write the split project:",e),e}))}))}return v(r,t).catch((function(e){throw console.error("Unable to write the project:",e),e}))},b=function(e,t){var n=t.fileIdentifier;if(!n)return Promise.reject('Project file is empty, "Save as" should have been called?');var r=f.dirname(n);return g(e,n,r).then((function(){return{wasSaved:!0,fileMetadata:t}}))},E=function(e,t){var n=t?t.fileIdentifier:"",o=s()(new p.AbstractFileSystemJS,l.a),a=m.remote.getCurrentWindow(),i={defaultPath:n,filters:[{name:"GDevelop 5 project",extensions:["json"]}]};if(!h)return Promise.reject("Unsupported");var c=h.showSaveDialogSync(a,i);if(!c)return Promise.resolve({wasSaved:!1,fileMetadata:t});var u=f.dirname(c);return p.ProjectResourcesCopier.copyAllResourcesTo(e,o,u,!0,!1,!0),e.setProjectFile(c),g(e,c,u).then((function(){return{wasSaved:!0,fileMetadata:Object(r.a)(Object(r.a)({},t),{},{fileIdentifier:c})}}))},w=function(e,t){var n=t.fileIdentifier+".autosave";return v(Object(o.b)(e),n).catch((function(e){throw console.error("Unable to write ".concat(n,":"),e),e}))}}).call(this,n(1))},1925:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return F}));var r=n(5),o=n(12),a=n(23),i=n(22),c=n(77),l=n(2),u=n.n(l),s=n(2337),p=n(89),d=n(271),f=n(86),m=n(9),h=n(79),v=n(102),g=n(154),b=n(860),E=n(3),w=n.n(E),y=n(142),x=n(859),j=n(557),P=n(1926),S=w()("path"),O=w()("electron"),C=O?O.remote.app:null,k=w()("fs-extra"),D=e.gd,F=function(e){Object(a.a)(n,e);var t=Object(i.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"createFromExample",value:function(e,t){var n=this,r=this.props.outputPath;k&&r&&Object(b.a)((function(o){try{k.mkdirsSync(r),k.copySync(S.join(o,t),r)}catch(a){return void Object(x.b)(e,r,a)}n.props.onOpen(j.a,{fileIdentifier:S.join(r,t+".json")}),Object(m.j)(t)}))}},{key:"createEmptyGame",value:function(e){var t=this.props.outputPath;if(k&&t){try{k.mkdirsSync(t)}catch(o){return void Object(x.b)(e,t,o)}var n=D.ProjectHelper.createNewGDJSProject(),r=S.join(t,"game.json");n.setProjectFile(r),this.props.onCreate(n,j.a,{fileIdentifier:r}),Object(m.j)("")}}},{key:"componentDidMount",value:function(){""===this.props.outputPath&&S&&C&&this.props.onChangeOutputPath(Object(P.a)(S.join(C.getPath("documents"),"GDevelop projects")))}},{key:"render",value:function(){var e=this;return u.a.createElement(c.I18n,null,(function(t){var n=t.i18n;return u.a.createElement(h.a,{noMargin:!0},u.a.createElement(h.b,{expand:!0},u.a.createElement(h.a,{expand:!0},u.a.createElement(d.a,{fullWidth:!0,value:e.props.outputPath,onChange:e.props.onChangeOutputPath,type:"create-game"}))),u.a.createElement(s.a,null),u.a.createElement(h.b,null,u.a.createElement(h.a,null,u.a.createElement(f.a,null,u.a.createElement(c.Trans,{id:"Choose a game to use as a starter:"})))),u.a.createElement(h.b,null,u.a.createElement(h.a,{expand:!0,noMargin:!0},u.a.createElement(v.a,null,u.a.createElement(v.b,{leftIcon:u.a.createElement(y.a,{iconSize:40,src:"res/starters_icons/platformer.png"}),primaryText:u.a.createElement(c.Trans,{id:"Platformer"}),secondaryText:u.a.createElement(c.Trans,{id:"A simple platform game, with coins to collect, moving platforms and enemies."}),secondaryTextLines:2,onClick:function(){return e.createFromExample(n,"platformer")}}),u.a.createElement(v.b,{leftIcon:u.a.createElement(y.a,{iconSize:40,src:"res/starters_icons/space-shooter.png"}),primaryText:u.a.createElement(c.Trans,{id:"8-bit Space Shooter"}),secondaryText:u.a.createElement(c.Trans,{id:"A beautiful, retro side-scrolling shooter where you must defeat incoming enemies with your mecha transforming spaceship. Huge boss included!"}),secondaryTextLines:2,onClick:function(){return e.createFromExample(n,"space-shooter")}}),u.a.createElement(v.b,{leftIcon:u.a.createElement(y.a,{iconSize:40,src:"res/starters_icons/geometry-monster.png"}),primaryText:u.a.createElement(c.Trans,{id:"Geometry Monster"}),secondaryText:u.a.createElement(c.Trans,{id:"A hyper casual endless game where you have to collect shapes and avoid bombs, with a progressively increasing difficulty."}),secondaryTextLines:2,onClick:function(){return e.createFromExample(n,"geometry-monster")}}),u.a.createElement(v.b,{leftIcon:u.a.createElement(y.a,{iconSize:40,src:"res/starters_icons/isometric-game.png"}),primaryText:u.a.createElement(c.Trans,{id:"Isometric game"}),secondaryText:u.a.createElement(c.Trans,{id:"An example of an isometric game where you can explore a map with your character."}),secondaryTextLines:2,onClick:function(){return e.createFromExample(n,"isometric-game")}}),u.a.createElement(v.b,{leftIcon:u.a.createElement(y.a,{iconSize:40,src:"res/starters_icons/downhill-bike-physics-demo.png"}),primaryText:"Downhill Bike Racing",secondaryText:u.a.createElement(c.Trans,{id:"An example of a 2D physics based game, where players have to reach the end as fast as possible."}),secondaryTextLines:2,onClick:function(){return e.createFromExample(n,"downhill-bike-physics-demo")}}),u.a.createElement(v.b,{leftIcon:u.a.createElement(y.a,{iconSize:40,src:"res/starters_icons/pairs.png"}),primaryText:"Pairs",secondaryText:u.a.createElement(c.Trans,{id:"Find all matching pairs of cards in this relaxing game. Use tweens to create smooth, natural animations with a few events."}),secondaryTextLines:2,onClick:function(){return e.createFromExample(n,"pairs")}}),u.a.createElement(v.b,{leftIcon:u.a.createElement(y.a,{iconSize:40,src:"res/starters_icons/new.png"}),primaryText:u.a.createElement(c.Trans,{id:"Empty game"}),secondaryText:u.a.createElement(c.Trans,{id:"Start a new game from scratch."}),secondaryTextLines:2,onClick:function(){return e.createEmptyGame(n)}}),u.a.createElement(g.a,null,u.a.createElement(c.Trans,{id:"Advanced"})),u.a.createElement(v.b,{leftIcon:u.a.createElement(y.a,{iconSize:40,src:"res/starters_icons/particle-effects-demo.png"}),primaryText:u.a.createElement(c.Trans,{id:"Particle Effects Demo"}),secondaryText:u.a.createElement(c.Trans,{id:"A demo of various high quality particle effects (fire, magic, snow, rune spell...) that you can try and use in your game."}),secondaryTextLines:2,onClick:function(){return e.createFromExample(n,"particle-effects-demo")}}),u.a.createElement(v.b,{leftIcon:u.a.createElement(y.a,{iconSize:40,src:"res/starters_icons/game-feel-demo.png"}),primaryText:u.a.createElement(c.Trans,{id:"Game Feel Demo"}),secondaryText:u.a.createElement(c.Trans,{id:'A demo showing how to enhance the "game feel" of your project: VFX, shot trail, ambient sounds and SFX, screenshake, wobble...'}),secondaryTextLines:2,onClick:function(){return e.createFromExample(n,"game-feel-demo")}})),u.a.createElement(h.b,{alignItems:"center",justifyContent:"center"},u.a.createElement(p.a,{label:u.a.createElement(c.Trans,{id:"See examples"}),onClick:function(){return e.props.onShowExamples()}})))))}))}}]),n}(l.Component)}).call(this,n(1))},1926:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(130),o=n(3),a=n.n(o),i=a()("path"),c=a()("fs-extra"),l=function(e){if(!i)return e;var t=Object(r.a)("My project",(function(t){try{c.accessSync(i.join(e,t))}catch(n){return!1}return!0}));return i.join(e,t)}},1927:function(e,t,n){"use strict";(function(e){var r,o,a,i,c,l=n(5),u=n(12),s=n(23),p=n(22),d=n(2),f=n(204),m=n(3),h=n.n(m),v=n(6),g=h()("electron"),b=g?g.remote.dialog:null,E=h()("path"),w=e.gd;t.a=[{name:"localAudioFileOpener",displayName:"Choose a new audio file",kind:"audio",component:(r=function(e){Object(s.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(l.a)(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).chooseResources=function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=e.props,o=r.i18n,a=r.getLastUsedPath,i=r.setLastUsedPath,c={multiSelections:n,title:o._({id:"Choose an audio file"}),name:o._({id:"Audio files"}),extensions:["wav","mp3","ogg"]};return y(o,t,c,a,i,"audio").then((function(e){return e.map((function(e){var n=new w.AudioResource,r=E.dirname(t.getProjectFile());return n.setFile(E.relative(r,e)),n.setName(E.relative(r,e)),n}))}))},e}return Object(u.a)(n,[{key:"render",value:function(){return null}}]),n}(d.Component),r)},{name:"localFileOpener",displayName:"Choose a new image",kind:"image",component:(o=function(e){Object(s.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(l.a)(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).chooseResources=function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=e.props,o=r.i18n,a=r.getLastUsedPath,i=r.setLastUsedPath,c={multiSelections:n,title:o._({id:"Choose an image"}),name:o._({id:"Image files"}),extensions:["png","jpg"]};return y(o,t,c,a,i,"image").then((function(e){return e.map((function(e){var n=new w.ImageResource,r=E.dirname(t.getProjectFile());return n.setFile(E.relative(r,e)),n.setName(E.relative(r,e)),n}))}))},e}return Object(u.a)(n,[{key:"render",value:function(){return null}}]),n}(d.Component),o)},{name:"localFontFileOpener",displayName:"Choose a new font file",kind:"font",component:(a=function(e){Object(s.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(l.a)(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).chooseResources=function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=e.props,o=r.i18n,a=r.getLastUsedPath,i=r.setLastUsedPath,c={multiSelections:n,title:o._({id:"Choose a font file"}),name:o._({id:"Font files"}),extensions:["ttf","otf"]};return y(o,t,c,a,i,"font").then((function(e){return e.map((function(e){var n=new w.FontResource,r=E.dirname(t.getProjectFile());return n.setFile(E.relative(r,e)),n.setName(E.relative(r,e)),n}))}))},e}return Object(u.a)(n,[{key:"render",value:function(){return null}}]),n}(d.Component),a)},{name:"localVideoFileOpener",displayName:"Choose a new video file",kind:"video",component:(i=function(e){Object(s.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(l.a)(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).chooseResources=function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=e.props,o=r.i18n,a=r.getLastUsedPath,i=r.setLastUsedPath,c={multiSelections:n,title:o._({id:"Choose a video file"}),name:o._({id:"Video files"}),extensions:["mp4"]};return y(o,t,c,a,i,"video").then((function(e){return e.map((function(e){var n=new w.VideoResource,r=E.dirname(t.getProjectFile());return n.setFile(E.relative(r,e)),n.setName(E.relative(r,e)),n}))}))},e}return Object(u.a)(n,[{key:"render",value:function(){return null}}]),n}(d.Component),i)},{name:"localJsonFileOpener",displayName:"Choose a new json file",kind:"json",component:(c=function(e){Object(s.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(l.a)(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).chooseResources=function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=e.props,o=r.i18n,a=r.getLastUsedPath,i=r.setLastUsedPath,c={multiSelections:n,title:o._({id:"Choose a json file"}),name:o._({id:"JSON file"}),extensions:["json"]};return y(o,t,c,a,i,"json").then((function(e){return e.map((function(e){var n=new w.JsonResource,r=E.dirname(t.getProjectFile());return n.setFile(E.relative(r,e)),n.setName(E.relative(r,e)),n}))}))},e}return Object(u.a)(n,[{key:"render",value:function(){return null}}]),n}(d.Component),c)}];var y=function(e,t,n,r,o,a){if(!b)return Promise.reject("Not supported");var i=["openFile"];n.multiSelections&&i.push("multiSelections");var c=E.dirname(t.getProjectFile()),l=r(t,a)||c,u=g.remote.getCurrentWindow();return b.showOpenDialog(u,{title:n.title,properties:i,filters:[{name:n.name,extensions:n.extensions}],defaultPath:l}).then((function(n){var r=n.filePaths;if(!r||!r.length)return[];var i=E.parse(r[0]).dir;if((o(t,a,i),r.filter((function(e){return!Object(f.g)(t,e)})).length)&&v.b.showConfirmDialog(e._({id:"This/these file(s) are outside the project folder. Would you like to make a copy of them in your project folder first (recommended)?"})))return Object(f.c)(t,r);return r}))}}).call(this,n(1))},1928:function(e,t,n){"use strict";var r=n(1929),o=n(1930),a=n(1931),i=n(9),c=[{name:"piskel-app",displayName:"Edit with Piskel",kind:"image",edit:function(e){return Object(i.g)("piskel"),Object(r.a)(e)}},{name:"Jfxr",displayName:"Create/Edit a Sound effect with Jfxr (*.wav)",kind:"audio",edit:function(e){return Object(i.g)("jfxr"),Object(o.a)(e)}},{name:"Yarn",displayName:"Create/Edit a Dialogue Tree with Yarn (*.json)",kind:"json",edit:function(e){return Object(i.g)("yarn"),Object(a.a)(e)}}];t.a=c},1929:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return p}));var r=n(83),o=n(3),a=n.n(o),i=n(204),c=a()("electron"),l=a()("path"),u=c?c.ipcRenderer:null,s=e.gd,p=function(e){var t=e.project,n=(e.resourcesLoader,e.resourceNames),o=e.singleFrame,a=e.onChangesSaved,p=e.extraOptions;if(c&&u){var d=n.map((function(e,n){return{resourcePath:Object(i.e)(t,e),resourceName:e,originalIndex:n}})),f=l.dirname(t.getProjectFile()),m=Object(r.a)(Object(r.a)({},p),{},{resources:d,singleFrame:o,projectPath:f});u.removeAllListeners("piskel-changes-saved"),u.on("piskel-changes-saved",(function(e,n,r,o){var c=o.data?{pskl:o}:null,u=t.getResourcesManager();n.forEach((function(e){e.name=l.relative(f,e.path),Object(i.d)(t,new s.ImageResource,e.name)})),n[0].metadata=c,n[0].newAnimationName=r,o.singleFrame?(c&&u.getResource(l.relative(f,n[0].path)).setMetadata(JSON.stringify(c)),a(n)):a(n)})),u.send("piskel-open-then-load-animation",m)}}}).call(this,n(1))},1930:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return s}));var r=n(3),o=n.n(r),a=n(204),i=o()("electron"),c=o()("path"),l=i?i.ipcRenderer:null,u=e.gd,s=function(e){var t=e.project,n=(e.resourcesLoader,e.resourceNames),r=e.onChangesSaved,o=e.extraOptions;if(i&&l){var s=c.dirname(t.getProjectFile()),p={resourcePath:Object(a.e)(t,n[0]),externalEditorData:o.externalEditorData,projectPath:s};l.removeAllListeners("jfxr-changes-saved"),l.on("jfxr-changes-saved",(function(e,n,o){var i=c.relative(s,n);Object(a.d)(t,new u.AudioResource,i);var l={jfxr:o};t.getResourcesManager().getResource(i).setMetadata(JSON.stringify(l)),r([{metadata:l,name:i}])})),l.send("jfxr-create-wav",p)}}}).call(this,n(1))},1931:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return s}));var r=n(3),o=n.n(r),a=n(204),i=o()("electron"),c=o()("path"),l=i?i.ipcRenderer:null,u=e.gd,s=function(e){var t=e.project,n=(e.resourcesLoader,e.resourceNames),r=e.onChangesSaved,o=e.extraOptions;if(i&&l){var s=c.dirname(t.getProjectFile()),p={resourcePath:Object(a.e)(t,n[0]),externalEditorData:o.externalEditorData,projectPath:s};l.removeAllListeners("yarn-changes-saved"),l.on("yarn-changes-saved",(function(e,n){var o=c.relative(s,n);Object(a.d)(t,new u.JsonResource,o),r([{name:o}])})),l.send("yarn-create-json",p)}}}).call(this,n(1))},1932:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return P}));var r=n(5),o=n(12),a=n(23),i=n(22),c=n(77),l=n(2),u=n(183),s=n(3),p=n.n(s),d=n(853),f=n(164),m=n(1933),h=n(122),v=n.n(h),g=n(465),b=n(1934),E=p()("electron"),w=p()("path"),y=E?E.ipcRenderer:null,x=E?E.remote.BrowserWindow:null,j=e.gd,P=function(e){Object(a.a)(n,e);var t=Object(i.a)(n);function n(){var e;Object(r.a)(this,n);for(var o=arguments.length,a=new Array(o),i=0;i<o;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).canDoNetworkPreview=function(){return!0},e.canDoHotReload=function(){return!0},e.state={networkPreviewDialogOpen:!1,networkPreviewHost:null,networkPreviewPort:null,networkPreviewError:null,previewGamePath:null,devToolsOpen:!1,previewBrowserWindowConfig:null,hotReloadsCount:0},e._networkPreviewSubscriptionChecker=null,e._hotReloadSubscriptionChecker=null,e._openPreviewBrowserWindow=function(){if(x&&e.state.previewBrowserWindowConfig&&e.state.previewGamePath){var t=new x(e.state.previewBrowserWindowConfig);t.loadURL("file://".concat(e.state.previewGamePath,"/index.html")),t.webContents.on("devtools-opened",(function(){e.setState({devToolsOpen:!0})})),t.webContents.on("devtools-closed",(function(){e.setState({devToolsOpen:!1})})),e.state.devToolsOpen&&t.openDevTools()}},e._openPreviewWindow=function(t,n,r){e.setState({previewBrowserWindowConfig:{width:t.getGameResolutionWidth(),height:t.getGameResolutionHeight(),useContentSize:!0,title:"Preview of ".concat(t.getName()),backgroundColor:"#000000",webPreferences:{nodeIntegration:!0}},previewGamePath:n},(function(){if(r.networkPreview){if(!y)return;y.removeAllListeners("serve-folder-done"),y.removeAllListeners("local-network-ips"),y.on("serve-folder-done",(function(t,n,r){n?e.setState({networkPreviewDialogOpen:!0,networkPreviewPort:null,networkPreviewHost:null,networkPreviewError:n}):e.setState({networkPreviewDialogOpen:!0,networkPreviewPort:r.port}),setTimeout((function(){return e._checkSubscriptionForNetworkPreview()}))})),y.on("local-network-ip",(function(t,n){e.setState({networkPreviewHost:n})})),y.send("serve-folder",{root:n}),y.send("get-local-network-ip")}else e._openPreviewBrowserWindow()}))},e._prepareExporter=function(){return Object(f.findGDJS)().then((function(e){var t=e.gdjsRoot;console.info("GDJS found in ",t);var n=v()(new j.AbstractFileSystemJS,u.a);return{outputDir:w.join(n.getTempDir(),"preview"),exporter:new j.Exporter(n,t)}}))},e.launchPreview=function(t){var n=t.project,r=t.layout,o=t.externalLayout;return e.getPreviewDebuggerServer().startServer().catch((function(e){console.error("Unable to start the Debugger Server for the preview:",e)})).then((function(){return e._prepareExporter()})).then((function(a){var i=a.outputDir,c=a.exporter;Object(d.a)((function(){var a=new j.PreviewExportOptions(n,i);a.setLayoutName(r.getName()),o&&a.setExternalLayoutName(o.getName());var l=e.getPreviewDebuggerServer().getServerAddress();l&&a.setDebuggerServerAddress(l.address,""+l.port);var u=e.props.getIncludeFileHashs();for(var s in u){var p=u[s];a.setIncludeFileHash(s,p)}var d=e.getPreviewDebuggerServer().getExistingDebuggerIds(),f=t.hotReload&&!!d.length;a.setProjectDataOnlyExport(f&&t.projectDataOnlyExport),c.exportProjectForPixiPreview(a),a.delete(),c.delete(),f?(d.forEach((function(t){e.getPreviewDebuggerServer().sendMessage(t,{command:"hotReload"})})),e.state.hotReloadsCount%16===0&&e._hotReloadSubscriptionChecker&&e._hotReloadSubscriptionChecker.checkHasSubscription(),e.setState((function(e){return{hotReloadsCount:e.hotReloadsCount+1}}))):e._openPreviewWindow(n,i,t)}),(function(e){return console.info("Preview took ".concat(e,"ms"))}))}))},e._checkSubscriptionForNetworkPreview=function(){return!e._networkPreviewSubscriptionChecker||e._networkPreviewSubscriptionChecker.checkHasSubscription()},e}return Object(o.a)(n,[{key:"getPreviewDebuggerServer",value:function(){return b.a}},{key:"render",value:function(){var e=this,t=this.state,n=t.networkPreviewDialogOpen,r=t.networkPreviewHost,o=t.networkPreviewPort,a=t.networkPreviewError;return l.createElement(l.Fragment,null,l.createElement(g.a,{ref:function(t){return e._networkPreviewSubscriptionChecker=t},onChangeSubscription:function(){e.setState({networkPreviewDialogOpen:!1}),e.props.onChangeSubscription&&e.props.onChangeSubscription()},id:"Preview over wifi",title:l.createElement(c.Trans,{id:"Preview over wifi"}),mode:"try"}),l.createElement(g.a,{ref:function(t){return e._hotReloadSubscriptionChecker=t},onChangeSubscription:function(){e.props.onChangeSubscription&&e.props.onChangeSubscription()},id:"Hot reloading",title:l.createElement(c.Trans,{id:"Live preview (apply changes to the running preview)"}),mode:"try"}),l.createElement(m.a,{open:n,url:r&&o?"".concat(r,":").concat(o):null,error:a,onClose:function(){return e.setState({networkPreviewDialogOpen:!1})},onExport:this.props.onExport,onRunPreviewLocally:this._openPreviewBrowserWindow}))}}]),n}(l.Component)}).call(this,n(1))},1933:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var r=n(5),o=n(12),a=n(23),i=n(22),c=n(77),l=n(2),u=n(90),s=n(88),p=n(97),d=n(86),f=n(79),m=n(132),h=function(e){Object(a.a)(n,e);var t=Object(i.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){var e=this.props,t=e.url,n=e.open,r=e.error,o=e.onExport,a=e.onClose,i=e.onRunPreviewLocally;return n?l.createElement(u.a,{actions:[l.createElement(s.a,{key:"close",label:l.createElement(c.Trans,{id:"Close"}),primary:!0,onClick:a})],secondaryActions:[o&&l.createElement(s.a,{key:"export",label:l.createElement(c.Trans,{id:"Export game"}),onClick:o}),l.createElement(s.a,{key:"run-preview-locally",label:l.createElement(c.Trans,{id:"Run on this computer"}),onClick:i})],cannotBeDismissed:!0,open:n,onRequestClose:a},r&&l.createElement(f.b,null,l.createElement(d.a,null,l.createElement(c.Trans,{id:"Unable to start the server for the preview! Make sure that you are authorized to run servers on this computer. Otherwise, use classic preview to test your game."}))),!r&&!t&&l.createElement(m.a,null),!r&&t&&l.createElement("div",null,l.createElement(f.b,null,l.createElement(d.a,null,l.createElement(c.Trans,{id:"Your preview is ready! On your mobile or tablet, open your browser and enter in the address bar:"}))),l.createElement(p.b,{value:t,fullWidth:!0}),l.createElement(f.b,null,l.createElement(d.a,null,l.createElement(c.Trans,{id:"Please note that your device should be connected on the same network as this computer."}))))):null}}]),n}(l.Component)},1934:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(3),o=n.n(r)()("electron"),a=o?o.ipcRenderer:null,i="stopped",c=null,l=[],u=[],s={startServer:function(){if(!a)return Promise.reject();if("started"===i)return Promise.resolve();var e=new Promise((function(e,t){var n=!1;i="stopped",c=null,a&&(a.removeAllListeners("debugger-send-message-done"),a.removeAllListeners("debugger-error-received"),a.removeAllListeners("debugger-connection-closed"),a.removeAllListeners("debugger-connection-opened"),a.removeAllListeners("debugger-start-server-done"),a.removeAllListeners("debugger-message-received")),a.on("debugger-error-received",(function(e,r){n||(t(r),n=!0),l.forEach((function(e){return(0,e.onErrorReceived)(r)}))})),a.on("debugger-connection-closed",(function(e,t){var n=t.id,r=u.indexOf(n);-1!==r&&u.splice(r,1),l.forEach((function(e){return(0,e.onConnectionClosed)({id:n,debuggerIds:u})}))})),a.on("debugger-connection-opened",(function(e,t){var n=t.id;u.push(n),l.forEach((function(e){return(0,e.onConnectionOpened)({id:n,debuggerIds:u})}))})),a.on("debugger-start-server-done",(function(t,r){var o=r.address;console.info("Local preview debugger started"),i="started",c=o,n||(e(),n=!0),l.forEach((function(e){return(0,e.onServerStateChanged)()}))})),a.on("debugger-message-received",(function(e,t){var n=t.id,r=t.message;console.info("Processing message received for debugger");try{var o=JSON.parse(r);l.forEach((function(e){return(0,e.onHandleParsedMessage)({id:n,parsedMessage:o})}))}catch(a){console.warn("Error while parsing message received from debugger client:",a)}})),a.send("debugger-start-server")})),t=new Promise((function(e,t){setTimeout((function(){t(new Error("Debugger server not started or errored after 5s - aborting."))}),5e3)}));return Promise.race([e,t])},sendMessage:function(e,t){a&&("stopped"!==i?a.send("debugger-send-message",{id:e,message:JSON.stringify(t)}):console.error("Cannot send message when debugger server is stopped."))},getServerState:function(){return i},getServerAddress:function(){return c},getExistingDebuggerIds:function(){return u},registerCallbacks:function(e){return l.push(e),function(){var t=l.indexOf(e);-1!==t&&l.splice(t,1)}}}},1935:function(e,t,n){"use strict";n.d(t,"a",(function(){return x}));var r=n(77),o=n(2),a=n(1936),i=n(1937),c=n(1938),l=n(1939),u=n(1940),s=n(1942),p=n(1943),d=n(1944),f=n(875),m=n.n(f),h=n(877),v=n.n(h),g=n(876),b=n.n(g),E=n(872),w=n(873),y=n(874),x=function(){return[{name:o.createElement(r.Trans,{id:"Android (& iOS coming soon)"}),renderIcon:function(e){return o.createElement(m.a,e)},helpPage:"/publishing/android_and_ios",description:o.createElement(r.Trans,{id:"Package your game for Android directly from GDevelop. iOS support is coming soon!"}),key:"localonlinecordovaexport",exportPipeline:s.a},{name:o.createElement(r.Trans,{id:"Web (upload online)"}),renderIcon:function(e){return o.createElement(y.a,e)},helpPage:"/publishing/web",description:o.createElement(r.Trans,{id:"Upload your game online directly from GDevelop and share the link to players. Play to your game using your browser on computers and mobile phones."}),key:"localonlinewebexport",exportPipeline:d.a},{name:o.createElement(r.Trans,{id:"Local folder"}),renderIcon:function(e){return o.createElement(b.a,e)},helpPage:"/publishing/html5_game_in_a_local_folder",description:o.createElement(r.Trans,{id:"Build the game locally as a HTML5 game. You can then publish it on website like Kongregate, Game Jolt, itch.io, Poki..."}),key:"localexport",exportPipeline:c.a,advanced:!0},{name:o.createElement(r.Trans,{id:"Facebook Instant Games"}),renderIcon:function(e){return o.createElement(E.a,e)},helpPage:"/publishing/publishing-to-facebook-instant-games",description:o.createElement(r.Trans,{id:"Package your game as a Facebook Instant Games that can be played on Facebook Messenger."}),key:"localfacebookinstantgames",exportPipeline:u.a,advanced:!0},{name:o.createElement(r.Trans,{id:"iOS & Android (manual)"}),renderIcon:function(e){return o.createElement(w.a,e)},helpPage:"/publishing/android_and_ios_with_cordova",description:o.createElement(r.Trans,{id:"Build the game locally as a Cordova project, and export it manually to iOS or Android with Cordova developers tools."}),key:"localcordovaexport",exportPipeline:a.a,advanced:!0},{name:o.createElement(r.Trans,{id:"Windows/macOS/Linux"}),renderIcon:function(e){return o.createElement(v.a,e)},helpPage:"/publishing/windows-macos-linux",description:o.createElement(r.Trans,{id:"Package your game as an app for Windows, macOS or Linux directly from GDevelop."}),key:"localonlineelectronexport",exportPipeline:p.a},{name:o.createElement(r.Trans,{id:"Windows/macOS/Linux (manual)"}),renderIcon:function(e){return o.createElement(v.a,e)},helpPage:"/publishing/windows-macos-linux-with-electron",description:o.createElement(r.Trans,{id:"Build the game locally and export it manually to Windows, macOS or Linux with third-party developer tools."}),key:"localelectronexport",exportPipeline:i.a,advanced:!0},{name:o.createElement(r.Trans,{id:"Cocos2d-JS"}),renderIcon:function(e){return o.createElement(m.a,e)},helpPage:"/publishing/android_and_ios_with_cocos2d-js",description:o.createElement(r.Trans,{id:"Export your game using Cocos2d-JS game engine. The game can be compiled for Android or iOS if you install Cocos2d-JS developer tools."}),key:"localcocos2dexport",exportPipeline:l.a,experimental:!0}]}},1936:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return E}));var r=n(77),o=n(2),a=n.n(o),i=n(89),c=n(79),l=n(164),u=n(183),s=n(271),p=n(122),d=n.n(p),f=n(3),m=n.n(f),h=n(864),v=m()("electron"),g=v?v.shell:null,b=e.gd,E={name:"local-cordova",getInitialExportState:function(e){return{outputDir:e.getLastCompilationDirectory()}},canLaunchBuild:function(e){return!!e.outputDir},renderHeader:function(e){var t=e.project,n=e.exportState,r=e.updateExportState;return a.a.createElement(c.a,{noMargin:!0},a.a.createElement(c.b,null,a.a.createElement(c.a,{noMargin:!0},a.a.createElement(h.b,null))),a.a.createElement(c.b,null,a.a.createElement(s.a,{type:"export",value:n.outputDir,defaultPath:t.getLastCompilationDirectory(),onChange:function(e){r((function(){return{outputDir:e}}))},fullWidth:!0})))},renderLaunchButtonLabel:function(){return a.a.createElement(r.Trans,{id:"Package"})},prepareExporter:function(e){return Object(l.findGDJS)().then((function(e){var t=e.gdjsRoot;console.info("GDJS found in ",t);var n=d()(new b.AbstractFileSystemJS,u.a);return{exporter:new b.Exporter(n,t)}}))},launchExport:function(e,t){var n=t.exporter,r=new b.MapStringBoolean;return r.set("exportForCordova",!0),n.exportWholePixiProject(e.project,e.exportState.outputDir,r),r.delete(),n.delete(),Promise.resolve(null)},launchResourcesDownload:function(e,t){return Promise.resolve(null)},launchCompression:function(e,t){return Promise.resolve(null)},renderDoneFooter:function(e){var t=e.exportState,n=(e.onClose,function(){g&&g.openItem(t.outputDir)});return a.a.createElement(h.a,{renderGameButton:function(){return a.a.createElement(i.a,{key:"open",label:a.a.createElement(r.Trans,{id:"Open folder"}),primary:!0,onClick:n})}})}}}).call(this,n(1))},1937:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return E}));var r=n(77),o=n(2),a=n.n(o),i=n(89),c=n(79),l=n(164),u=n(183),s=n(271),p=n(122),d=n.n(p),f=n(3),m=n.n(f),h=n(865),v=m()("electron"),g=v?v.shell:null,b=e.gd,E={name:"local-electron",getInitialExportState:function(e){return{outputDir:e.getLastCompilationDirectory()}},canLaunchBuild:function(e){return!!e.outputDir},renderHeader:function(e){var t=e.project,n=e.exportState,r=e.updateExportState;return a.a.createElement(c.a,{noMargin:!0},a.a.createElement(c.b,null,a.a.createElement(c.a,{noMargin:!0},a.a.createElement(h.b,null))),a.a.createElement(c.b,null,a.a.createElement(s.a,{type:"export",value:n.outputDir,defaultPath:t.getLastCompilationDirectory(),onChange:function(e){r((function(){return{outputDir:e}}))},fullWidth:!0})))},renderLaunchButtonLabel:function(){return a.a.createElement(r.Trans,{id:"Package"})},prepareExporter:function(e){return Object(l.findGDJS)().then((function(e){var t=e.gdjsRoot;console.info("GDJS found in ",t);var n=d()(new b.AbstractFileSystemJS,u.a);return{exporter:new b.Exporter(n,t)}}))},launchExport:function(e,t){var n=t.exporter,r=new b.MapStringBoolean;return r.set("exportForElectron",!0),n.exportWholePixiProject(e.project,e.exportState.outputDir,r),r.delete(),n.delete(),Promise.resolve(null)},launchResourcesDownload:function(e,t){return Promise.resolve(null)},launchCompression:function(e,t){return Promise.resolve(null)},renderDoneFooter:function(e){var t=e.exportState,n=(e.onClose,function(){g&&g.openItem(t.outputDir)});return a.a.createElement(h.a,{renderGameButton:function(){return a.a.createElement(i.a,{key:"open",label:a.a.createElement(r.Trans,{id:"Open folder"}),primary:!0,onClick:n})}})}}}).call(this,n(1))},1938:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return E}));var r=n(77),o=n(2),a=n.n(o),i=n(89),c=n(79),l=n(164),u=n(183),s=n(271),p=n(122),d=n.n(p),f=n(3),m=n.n(f),h=n(866),v=m()("electron"),g=v?v.shell:null,b=e.gd,E={name:"local-html5",getInitialExportState:function(e){return{outputDir:e.getLastCompilationDirectory()}},canLaunchBuild:function(e){return!!e.outputDir},renderHeader:function(e){var t=e.project,n=e.exportState,r=e.updateExportState;return a.a.createElement(c.a,{noMargin:!0},a.a.createElement(c.b,null,a.a.createElement(h.b,null)),a.a.createElement(c.b,null,a.a.createElement(s.a,{type:"export",value:n.outputDir,defaultPath:t.getLastCompilationDirectory(),onChange:function(e){r((function(){return{outputDir:e}}))},fullWidth:!0})))},renderLaunchButtonLabel:function(){return a.a.createElement(r.Trans,{id:"Export as a HTML5 game"})},prepareExporter:function(e){return Object(l.findGDJS)().then((function(e){var t=e.gdjsRoot;console.info("GDJS found in ",t);var n=d()(new b.AbstractFileSystemJS,u.a);return{exporter:new b.Exporter(n,t)}}))},launchExport:function(e,t){var n=t.exporter,r=new b.MapStringBoolean;return n.exportWholePixiProject(e.project,e.exportState.outputDir,r),r.delete(),n.delete(),Promise.resolve(null)},launchResourcesDownload:function(e,t){return Promise.resolve(null)},launchCompression:function(e,t){return Promise.resolve(null)},renderDoneFooter:function(e){var t=e.exportState;e.onClose;return a.a.createElement(h.a,{renderGameButton:function(){return a.a.createElement(i.a,{fullWidth:!0,primary:!0,onClick:function(){g&&g.openItem(t.outputDir)},label:a.a.createElement(r.Trans,{id:"Open the exported game folder"})})}})}}}).call(this,n(1))},1939:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return y}));var r=n(83),o=n(77),a=n(2),i=n.n(a),c=n(89),l=n(79),u=n(164),s=n(183),p=n(271),d=n(122),f=n.n(d),m=n(3),h=n.n(m),v=n(292),g=n(867),b=h()("electron"),E=b?b.shell:null,w=e.gd,y={name:"local-cocos2d",getInitialExportState:function(e){return{outputDir:e.getLastCompilationDirectory(),debugMode:!1}},canLaunchBuild:function(e){return!!e.outputDir},renderHeader:function(e){var t=e.project,n=e.exportState,a=e.updateExportState;return i.a.createElement(l.a,{noMargin:!0},i.a.createElement(l.b,null,i.a.createElement(g.b,null)),i.a.createElement(l.b,null,i.a.createElement(p.a,{type:"export",value:n.outputDir,defaultPath:t.getLastCompilationDirectory(),onChange:function(e){a((function(t){return Object(r.a)(Object(r.a)({},t),{},{outputDir:e})}))},fullWidth:!0})),i.a.createElement(l.b,null,i.a.createElement(v.a,{onToggle:function(e,t){return a((function(e){return Object(r.a)(Object(r.a)({},e),{},{debugMode:t})}))},toggled:n.debugMode,labelPosition:"right",label:i.a.createElement(o.Trans,{id:"Debug mode (show FPS counter and stats in the bottom left)"})})))},renderLaunchButtonLabel:function(){return i.a.createElement(o.Trans,{id:"Package"})},prepareExporter:function(e){return Object(u.findGDJS)().then((function(e){var t=e.gdjsRoot;console.info("GDJS found in ",t);var n=f()(new w.AbstractFileSystemJS,s.a);return{exporter:new w.Exporter(n,t)}}))},launchExport:function(e,t){var n=t.exporter;return n.exportWholeCocos2dProject(e.project,e.exportState.debugMode,e.exportState.outputDir),n.delete(),Promise.resolve(null)},launchResourcesDownload:function(e,t){return Promise.resolve(null)},launchCompression:function(e,t){return Promise.resolve(null)},renderDoneFooter:function(e){var t=e.exportState,n=(e.onClose,function(){E&&E.openItem(t.outputDir)});return i.a.createElement(g.a,{renderGameButton:function(){return i.a.createElement(c.a,{key:"open",label:i.a.createElement(o.Trans,{id:"Open folder"}),primary:!0,onClick:n})}})}}}).call(this,n(1))},1940:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return x}));var r=n(77),o=n(2),a=n.n(o),i=n(89),c=n(79),l=n(164),u=n(183),s=n(122),p=n.n(s),d=n(3),f=n.n(d),m=n(1941),h=n(419),v=n(868),g=f()("path"),b=f()("electron"),E=b?b.remote.app:null,w=b?b.shell:null,y=e.gd,x={name:"local-facebook-instant-games",getInitialExportState:function(e){return{archiveOutputFilename:E?g.join(E.getPath("documents"),"fb-instant-game.zip"):""}},canLaunchBuild:function(e){return!!e.archiveOutputFilename},renderHeader:function(e){e.project;var t=e.exportState,n=e.updateExportState;return a.a.createElement(c.a,{noMargin:!0},a.a.createElement(c.b,null,a.a.createElement(v.b,null)),a.a.createElement(c.b,null,a.a.createElement(m.a,{title:"Facebook Instant Games export zip file",message:"Choose where to save the exported file for Facebook Instant Games",filters:[{name:"Compressed file for Facebook Instant Games",extensions:["zip"]}],value:t.archiveOutputFilename,defaultPath:E?E.getPath("documents"):"",onChange:function(e){return n((function(){return{archiveOutputFilename:e}}))},fullWidth:!0})))},renderLaunchButtonLabel:function(){return a.a.createElement(r.Trans,{id:"Package"})},prepareExporter:function(e){return Object(l.findGDJS)().then((function(e){var t=e.gdjsRoot;console.info("GDJS found in ",t);var n=p()(new y.AbstractFileSystemJS,u.a),r=new y.Exporter(n,t),o=g.join(n.getTempDir(),"FacebookInstantGamesExport");return n.mkDir(o),n.clearDir(o),{exporter:r,temporaryOutputDir:o}}))},launchExport:function(e,t){var n=t.exporter,r=t.temporaryOutputDir,o=new y.MapStringBoolean;return o.set("exportForFacebookInstantGames",!0),n.exportWholePixiProject(e.project,r,o),o.delete(),n.delete(),Promise.resolve({temporaryOutputDir:r})},launchResourcesDownload:function(e,t){var n=t.temporaryOutputDir;return Promise.resolve({temporaryOutputDir:n})},launchCompression:function(e,t){var n=t.temporaryOutputDir;return Object(h.a)({path:n,outputFilename:e.exportState.archiveOutputFilename})},renderDoneFooter:function(e){var t=e.exportState,n=(e.onClose,function(){w&&g&&w.openItem(g.dirname(t.archiveOutputFilename))});return a.a.createElement(v.a,{renderGameButton:function(){return a.a.createElement(i.a,{key:"open",label:a.a.createElement(r.Trans,{id:"Open folder"}),primary:!0,onClick:n})}})}}}).call(this,n(1))},1941:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var r=n(83),o=n(5),a=n(12),i=n(23),c=n(22),l=n(77),u=n(2),s=n.n(u),p=n(97),d=n(3),f=n.n(d),m=n(89),h=f()("electron"),v=h?h.remote.dialog:null,g={container:{position:"relative",display:"flex",alignItems:"baseline"},button:{marginLeft:10},textField:{flex:1}},b=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).onChooseFolder=function(){if(v&&h){var t=h.remote.getCurrentWindow();return v.showSaveDialog(t,{title:e.props.title,filters:e.props.filters,message:e.props.message,defaultPath:e.props.defaultPath}).then((function(t){var n=t.filePath;e.props.onChange(n||"")}))}},e}return Object(a.a)(n,[{key:"render",value:function(){var e=this;return s.a.createElement("div",{style:Object(r.a)(Object(r.a)({},g.container),{},{width:this.props.fullWidth?"100%":void 0})},s.a.createElement(p.b,{margin:"dense",style:g.textField,type:"text",hintText:{id:"Choose a file"},value:this.props.value,onChange:function(t,n){return e.props.onChange(n)}}),s.a.createElement(m.a,{label:s.a.createElement(l.Trans,{id:"Choose"}),style:g.button,onClick:this.onChooseFolder}))}}]),n}(u.PureComponent)},1942:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return b}));var r=n(77),o=n(2),a=n(122),i=n.n(a),c=n(194),l=n(554),u=n(164),s=n(419),p=n(3),d=n.n(p),f=n(183),m=n(869),h=d()("path"),v=d()("os"),g=e.gd,b={name:"local-online-cordova",onlineBuildType:"cordova-build",getInitialExportState:function(){return null},canLaunchBuild:function(){return!0},renderHeader:function(){return o.createElement(m.a,null)},renderLaunchButtonLabel:function(){return o.createElement(r.Trans,{id:"Packaging for Android"})},prepareExporter:function(e){return Object(u.findGDJS)().then((function(e){var t=e.gdjsRoot;console.info("GDJS found in ",t);var n=i()(new g.AbstractFileSystemJS,f.a),r=new g.Exporter(n,t),o=h.join(n.getTempDir(),"OnlineCordovaExport");return n.mkDir(o),n.clearDir(o),{exporter:r,temporaryOutputDir:o}}))},launchExport:function(e,t){var n=t.exporter,r=t.temporaryOutputDir,o=new g.MapStringBoolean;return o.set("exportForCordova",!0),n.exportWholePixiProject(e.project,r,o),o.delete(),n.delete(),Promise.resolve({temporaryOutputDir:r})},launchResourcesDownload:function(e,t){var n=t.temporaryOutputDir;return Promise.resolve({temporaryOutputDir:n})},launchCompression:function(e,t){var n=t.temporaryOutputDir,r=v.tmpdir();return Object(s.a)({path:n,outputFilename:h.join(r,"game-archive.zip")})},launchUpload:function(e,t){return Object(c.f)().then((function(n){return Object(l.a)(t,n,e.updateStepProgress).then((function(){return n.key}))}))},launchOnlineBuild:function(e,t,n){var r=t.getAuthorizationHeader,o=t.profile;return o?Object(c.a)(r,o.uid,n):Promise.reject(new Error("User is not authenticated"))}}}).call(this,n(1))},1943:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return b}));var r=n(77),o=n(2),a=n(122),i=n.n(a),c=n(194),l=n(164),u=n(554),s=n(419),p=n(3),d=n.n(p),f=n(183),m=n(870),h=d()("path"),v=d()("os"),g=e.gd,b={name:"local-online-electron",onlineBuildType:"electron-build",getInitialExportState:function(){return{targets:["winExe"]}},canLaunchBuild:function(e){return!!e.targets.length},renderHeader:function(e){return o.createElement(m.a,e)},renderLaunchButtonLabel:function(){return o.createElement(r.Trans,{id:"Package"})},prepareExporter:function(e){return Object(l.findGDJS)().then((function(e){var t=e.gdjsRoot;console.info("GDJS found in ",t);var n=i()(new g.AbstractFileSystemJS,f.a),r=new g.Exporter(n,t),o=h.join(n.getTempDir(),"OnlineElectronExport");return n.mkDir(o),n.clearDir(o),{exporter:r,temporaryOutputDir:o}}))},launchExport:function(e,t){var n=t.exporter,r=t.temporaryOutputDir,o=new g.MapStringBoolean;return o.set("exportForElectron",!0),n.exportWholePixiProject(e.project,r,o),o.delete(),n.delete(),Promise.resolve({temporaryOutputDir:r})},launchResourcesDownload:function(e,t){var n=t.temporaryOutputDir;return Promise.resolve({temporaryOutputDir:n})},launchCompression:function(e,t){var n=t.temporaryOutputDir,r=v.tmpdir();return Object(s.a)({path:n,outputFilename:h.join(r,"game-archive.zip")})},launchUpload:function(e,t){return Object(c.f)().then((function(n){return Object(u.a)(t,n,e.updateStepProgress).then((function(){return n.key}))}))},launchOnlineBuild:function(e,t,n){var r=t.getAuthorizationHeader,o=t.profile;return o?Object(c.b)(r,o.uid,n,e.targets):Promise.reject(new Error("User is not authenticated"))}}}).call(this,n(1))},1944:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return b}));var r=n(77),o=n(2),a=n(122),i=n.n(a),c=n(194),l=n(554),u=n(164),s=n(419),p=n(3),d=n.n(p),f=n(183),m=n(871),h=d()("path"),v=d()("os"),g=e.gd,b={name:"local-online-web",onlineBuildType:"web-build",getInitialExportState:function(){return null},canLaunchBuild:function(){return!0},renderHeader:function(){return o.createElement(m.a,null)},renderLaunchButtonLabel:function(){return o.createElement(r.Trans,{id:"Publish online"})},prepareExporter:function(e){return Object(u.findGDJS)().then((function(e){var t=e.gdjsRoot;console.info("GDJS found in ",t);var n=i()(new g.AbstractFileSystemJS,f.a),r=new g.Exporter(n,t),o=h.join(n.getTempDir(),"OnlineWebExport");return n.mkDir(o),n.clearDir(o),{exporter:r,temporaryOutputDir:o}}))},launchExport:function(e,t){var n=t.exporter,r=t.temporaryOutputDir,o=new g.MapStringBoolean;return n.exportWholePixiProject(e.project,r,o),o.delete(),n.delete(),Promise.resolve({temporaryOutputDir:r})},launchResourcesDownload:function(e,t){var n=t.temporaryOutputDir;return Promise.resolve({temporaryOutputDir:n})},launchCompression:function(e,t){var n=t.temporaryOutputDir,r=v.tmpdir();return Object(s.a)({path:n,outputFilename:h.join(r,"game-archive.zip")})},launchUpload:function(e,t){return Object(c.f)().then((function(n){return Object(l.a)(t,n,e.updateStepProgress).then((function(){return n.key}))}))},launchOnlineBuild:function(e,t,n){var r=t.getAuthorizationHeader,o=t.profile;return o?Object(c.c)(r,o.uid,n):Promise.reject(new Error("User is not authenticated"))}}}).call(this,n(1))},1945:function(e,t,n){"use strict";var r=n(2),o=n(3),a=n.n(o),i=n(192),c=n(239),l=n(28),u=a()("electron"),s=u?u.ipcRenderer:null,p=function(e,t){r.useEffect((function(){if(s){var n=function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return t.apply(void 0,r)};return s.on(e,n),function(){return s.removeListener(e,n)}}}),[e,t])};t.a=function(e){var t=e.i18n,n=e.project,o=e.recentProjectFiles,a=e.onOpenRecentFile,u=Object(c.e)(),d=t.language;return p("main-menu-open",e.onChooseProject),p("main-menu-open-recent",e.onOpenRecentFile),p("main-menu-save",e.onSaveProject),p("main-menu-save-as",e.onSaveProjectAs),p("main-menu-close",e.onCloseProject),p("main-menu-close-app",e.onCloseApp),p("main-menu-export",e.onExportProject),p("main-menu-create",e.onCreateProject),p("main-menu-open-project-manager",e.onOpenProjectManager),p("main-menu-open-start-page",e.onOpenStartPage),p("main-menu-open-debugger",e.onOpenDebugger),p("main-menu-open-about",e.onOpenAbout),p("main-menu-open-preferences",e.onOpenPreferences),p("main-menu-open-language",e.onOpenLanguage),p("main-menu-open-profile",e.onOpenProfile),p("update-status",e.setUpdateStatus),r.useEffect((function(){!function(e,t,n,r){var o={label:t._({id:"File"}),submenu:[{label:t._({id:"Create a New Project..."}),accelerator:Object(c.a)(r.CREATE_NEW_PROJECT),onClickSendEvent:"main-menu-create"},{type:"separator"},{label:t._({id:"Open..."}),accelerator:Object(c.a)(r.OPEN_PROJECT),onClickSendEvent:"main-menu-open"},{label:t._({id:"Open Recent"}),submenu:n.map((function(e){return{label:e.fileMetadata.fileIdentifier,onClickSendEvent:"main-menu-open-recent",eventArgs:e}}))},{type:"separator"},{label:t._({id:"Save"}),accelerator:Object(c.a)(r.SAVE_PROJECT),onClickSendEvent:"main-menu-save",enabled:!!e},{label:t._({id:"Save as..."}),accelerator:Object(c.a)(r.SAVE_PROJECT_AS),onClickSendEvent:"main-menu-save-as",enabled:!!e},{type:"separator"},{label:t._({id:"Export (web, iOS, Android)..."}),accelerator:Object(c.a)(r.EXPORT_GAME),onClickSendEvent:"main-menu-export",enabled:!!e},{type:"separator"},{label:t._({id:"Close Project"}),accelerator:Object(c.a)(r.CLOSE_PROJECT),onClickSendEvent:"main-menu-close",enabled:!!e}]};Object(l.e)()||o.submenu.push({type:"separator"},{label:t._({id:"My Profile"}),onClickSendEvent:"main-menu-open-profile"},{label:t._({id:"Preferences"}),onClickSendEvent:"main-menu-open-preferences"},{label:t._({id:"Language"}),onClickSendEvent:"main-menu-open-language"},{type:"separator"},{label:t._({id:"Exit GDevelop"}),accelerator:Object(c.a)(r.QUIT_APP),onClickSendEvent:"main-menu-close-app"});var a={label:t._({id:"Edit"}),submenu:[{role:"undo"},{role:"redo"},{type:"separator"},{role:"cut"},{role:"copy"},{role:"paste"},{role:"pasteandmatchstyle"},{role:"delete"},{role:"selectall"}]},i={label:t._({id:"View"}),submenu:[{label:t._({id:"Show Project Manager"}),accelerator:Object(c.a)(r.OPEN_PROJECT_MANAGER),onClickSendEvent:"main-menu-open-project-manager",enabled:!!e},{label:t._({id:"Show Start Page"}),onClickSendEvent:"main-menu-open-start-page"},{label:t._({id:"Open Debugger"}),onClickSendEvent:"main-menu-open-debugger",enabled:!!e},{type:"separator"},{role:"toggledevtools"},{type:"separator"},{role:"togglefullscreen"}]},u={label:t._({id:"Window"}),role:"window",submenu:[{label:t._({id:"Minimize"}),role:"minimize"}]},p={label:t._({id:"Help"}),role:"help",submenu:[{label:t._({id:"GDevelop website"}),onClickOpenLink:"http://gdevelop-app.com"},{type:"separator"},{label:t._({id:"Community Forums"}),onClickOpenLink:"https://forum.gdevelop-app.com"},{label:t._({id:"Community Discord Chat"}),onClickOpenLink:"https://discord.gg/rjdYHvj"},{type:"separator"},{label:t._({id:"Contribute to GDevelop"}),onClickOpenLink:"https://gdevelop-app.com/contribute/"},{label:t._({id:"Create Extensions for GDevelop"}),onClickOpenLink:"https://github.com/4ian/GDevelop/blob/master/newIDE/README-extensions.md"},{type:"separator"},{label:t._({id:"Help to Translate GDevelop"}),onClickOpenLink:"https://crowdin.com/project/gdevelop"},{label:t._({id:"Report a wrong translation"}),onClickOpenLink:"https://github.com/4ian/GDevelop/issues/969"}]};Object(l.e)()||p.submenu.push({type:"separator"},{label:t._({id:"About GDevelop"}),onClickSendEvent:"main-menu-open-about"});var d=[o,a,i,u,p];Object(l.e)()&&(d.unshift({label:t._({id:"GDevelop 5"}),submenu:[{label:t._({id:"About GDevelop"}),onClickSendEvent:"main-menu-open-about"},{type:"separator"},{label:t._({id:"My Profile"}),onClickSendEvent:"main-menu-open-profile"},{label:t._({id:"Preferences"}),onClickSendEvent:"main-menu-open-preferences"},{label:t._({id:"Language"}),onClickSendEvent:"main-menu-open-language"},{type:"separator"},{role:"services",submenu:[]},{type:"separator"},{role:"hide"},{role:"hideothers"},{role:"unhide"},{type:"separator"},{role:"quit"}]}),a.submenu.push({type:"separator"},{label:t._({id:"Speech"}),submenu:[{role:"startspeaking"},{role:"stopspeaking"}]}),u.submenu=[{role:"minimize"},{role:"zoom"},{type:"separator"},{role:"front"}]),s&&s.send("set-main-menu",d)}(n,t,o,u)}),[t,d,n,o,u]),Object(i.b)("OPEN_RECENT_PROJECT",!0,{generateOptions:r.useCallback((function(){return o.map((function(e){return{text:e.fileMetadata.fileIdentifier,handler:function(){return a(e)}}}))}),[a,o])}),null}},1946:function(e,t,n){var r=n(878).loadExtension,o=n(3),a=n(1947).findJsExtensionModules;e.exports=function(e){var t=e.gd,n=e.objectsEditorService,i=e.objectsRenderingService,c=e.filterExamples;return{loadAllExtensions:function(e){return a({filterExamples:c}).then((function(a){return Promise.all(a.map((function(a){var c=null;try{c=o(a,{rethrowException:!0})}catch(l){return{extensionModulePath:a,result:{message:"Unable to import extension. Please check for any syntax error or error that would prevent it from being run.",error:!0,rawError:l}}}return c?(n&&c.registerEditorConfigurations&&c.registerEditorConfigurations(n),i&&c.registerInstanceRenderers&&c.registerInstanceRenderers(i),{extensionModulePath:a,result:r(e,t,t.JsPlatform.get(),c)}):{extensionModulePath:a,result:{error:!0,message:"Unknown error. Please check for any syntax error or error that would prevent it from being run."}}})))}),(function(e){throw console.error("Unable to find JS extensions modules"),e}))}}}},1947:function(e,t,n){var r=n(164).findGDJS,o=n(3),a=o("path"),i=o("fs");e.exports={findJsExtensionModules:function(e){var t=e.filterExamples;return r().then((function(e){var n=e.gdjsRoot,r=a.join(n,"Runtime","Extensions");return console.info("Searching for JS extensions (file called JsExtension.js) in ".concat(r,"...")),new Promise((function(e,n){i.readdir(r,(function(o,c){if(o)return n(o);var l=c.filter((function(e){return!t||-1===e.indexOf("Example")}));Promise.all(l.map((function(e){return t=a.join(r,e),new Promise((function(e){var n=a.join(t,"JsExtension.js");i.stat(n,(function(t,r){return e(t?null:r.isFile()?n:null)}))}));var t}))).then((function(t){e(t.filter((function(e){return!!e})))}),n)}))}))}))}}},1948:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(3),o=n.n(r),a=n(387),i=n.n(a),c=o()("os"),l=o()("fs"),u=function(e){var t=e.onWriteFile,n=c.tmpdir()+"/GDGeneratedEventsFunctions";l.mkdir(n,(function(e){e&&"EEXIST"!==e.code&&console.error("Unable to create the directory where to output events functions generated code: ",e)}));var r=function(e){return"".concat(n,"/").concat(i()(e),".js")};return{getIncludeFileFor:function(e){return r(e)},writeFunctionCode:function(e,n){return new Promise((function(o,a){var i=r(e);t({includeFile:i,content:n}),l.writeFile(i,n,(function(e){if(e)return a(e);o()}))}))},writeBehaviorCode:function(e,n){return new Promise((function(o,a){var i=r(e);t({includeFile:i,content:n}),l.writeFile(i,n,(function(e){if(e)return a(e);o()}))}))}}}},1960:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r=n(5),o=n(125),a=n(3),i=n.n(a),c=i()("fs-extra"),l=i()("path"),u=i()("electron"),s=u?u.remote.dialog:null,p=function e(){Object(r.a)(this,e)};p.chooseEventsFunctionExtensionFile=function(){if(!s)return Promise.reject("Not supported");var e=u.remote.getCurrentWindow();return s.showSaveDialog(e,{title:"Export an extension of the project",filters:[{name:'GDevelop 5 "events based" extension',extensions:["json"]}],defaultPath:"Extension.json"}).then((function(e){var t=e.filePath;return t||null}))},p.writeEventsFunctionsExtension=function(e,t){return function(e,t){if(!c)return Promise.reject(new Error("Filesystem is not supported."));try{var n=JSON.stringify(e,null,2);return c.ensureDir(l.dirname(t)).then((function(){return new Promise((function(e,r){c.writeFile(t,n,(function(t){return t?r(t):e()}))}))}))}catch(r){return Promise.reject(r)}}(Object(o.b)(e),t).catch((function(e){throw console.error("Unable to write the events function extension:",e),e}))}},1961:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(5),o=n(3),a=n.n(o),i=a()("fs"),c=a()("electron"),l=c?c.remote.dialog:null,u=function e(){Object(r.a)(this,e)};u.chooseEventsFunctionExtensionFile=function(){if(!l)return Promise.reject("Not supported");var e=c.remote.getCurrentWindow();return l.showOpenDialog(e,{title:"Import an extension in the project",properties:["openFile"],message:"Choose an extension file to import (.json file)",filters:[{name:'GDevelop 5 "events based" extension',extensions:["json"]}]}).then((function(e){var t=e.filePaths;return t&&t.length?t[0]:null}))},u.readEventsFunctionExtensionFile=function(e){return function(e){return i?new Promise((function(t,n){i.readFile(e,{encoding:"utf8"},(function(r,o){if(r)return n(r);try{var a=JSON.parse(o);return t(a)}catch(i){return n(e+" is a corrupted/malformed file.")}}))})):Promise.reject("Filesystem is not supported.")}(e)}},1962:function(e,t,n){"use strict";n.d(t,"a",(function(){return E}));var r=n(100),o=n(2),a=n(3),i=n.n(a),c=n(116),l=n(263),u=n.n(l),s=i()("electron"),p=i()("fs"),d=i()("child_process"),f=i()("process"),m=i()("path"),h=function(){if(!s)return"";var e=f.cwd();return m.join(e,"../app")},v=function(){if(!s||!p)return Promise.resolve({paths:[],pathsWithErrors:{}});var e={},t=m.join(h(),"../.."),n=m.join(t,"GDJS/Runtime"),o=m.join(t,"Extensions");return new Promise((function(t){return p.readdir(o,(function(n,r){if(n)return e[o]=n,void t([]);t(Promise.all(r.map((function(t){return new Promise((function(n){var r=m.join(o,t);p.stat(r,(function(t,o){if(t)return e[r]=t,void n(r);n(o.isDirectory()?r:null)}))}))}))).then((function(e){return e.filter(Boolean)})))}))})).then((function(t){return Promise.resolve([n].concat(["Cocos2d","Cordova","Electron","FacebookInstantGames","cocos-renderers","cocos-sound-manager","events-tools","fontfaceobserver-font-manager","howler-sound-manager","libs","pixi-renderers","websocket-debugger-client"].map((function(e){return m.join(n,e)})))).then((function(n){return{paths:[].concat(Object(r.a)(n),Object(r.a)(t)),pathsWithErrors:e}}))}))},g=function(){return d&&m?new Promise((function(e,t){d.exec('node "'.concat(m.join(h(),"scripts/import-GDJS-Runtime.js"),'"'),(function(n,r,o){return n?(console.error("GDJS Runtime update error: ".concat(n)),void t(n)):(console.info("GDJS Runtime update: ".concat(r)),o?(console.error("GDJS Runtime update error: ".concat(o)),void t(new Error("Error while updating GDJS Runtime"))):void e())}))})):Promise.reject(new Error("Unsupported"))},b=u()((function(e,t){var n=e||"unknown-event",r=t||"unknown-file";console.info('GDJS/extensions watchers found a "'.concat(n,'" in ').concat(r,", updating GDJS Runtime...")),g().catch((function(){}))}),100),E=function(){var e=o.useContext(c.b).values.useGDJSDevelopmentWatcher;return o.useEffect((function(){if(e){var t=!1,n=[],r=performance.now();return v().then((function(e){var o=e.paths,a=e.pathsWithErrors;if(!t)if(p){g().catch((function(){})),o.forEach((function(e){var t=null;try{t=p.watch(e,{},b)}catch(r){return a[e]=r,null}t&&(t.on("error",(function(e){console.warn("Error in watcher for GDJS Runtime - manually call npm run `node import-GDJS-Runtime.js` in the newIDE/app/scripts folder if you make changes to GDJS.",e)})),n.push(t))})),Object.keys(a).length&&console.warn("Error while setting up watchers for some paths: ",a);var i=(performance.now()-r).toFixed(2);n.length?console.info("Watchers for GDJS Runtime/extensions installed in ".concat(i,"ms.")):console.warn("No watchers for GDJS Runtime/extensions installed (took ".concat(i,"ms)."))}else console.error("Unable to use 'fs' from Node.js to watch changes in GDJS.")})),function(){t=!0,n.length&&(n.forEach((function(e){e.close()})),console.info("Watchers for GDJS Runtime closed."))}}}),[e]),null}},271:function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var r=n(83),o=n(5),a=n(12),i=n(23),c=n(22),l=n(77),u=n(2),s=n.n(u),p=n(97),d=n(89),f=n(3),m=n.n(f)()("electron"),h=m?m.remote.dialog:null,v={container:{position:"relative",display:"flex",alignItems:"baseline"},button:{marginLeft:10},textField:{flex:1}},g=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a)))._onChooseFolder=function(t){var n=t.title,r=t.message;if(h&&m){var o=m.remote.getCurrentWindow();h.showOpenDialog(o,{title:n,properties:["openDirectory","createDirectory"],message:r,defaultPath:e.props.defaultPath}).then((function(t){var n=t.filePaths;n&&n.length&&e.props.onChange(n[0])}))}},e._getTitleAndMessage=function(t){var n=e.props.type;return"export"===n?{title:t._({id:"Choose an export folder"}),message:t._({id:"Choose where to export the game"})}:"create-game"===n?{title:t._({id:"Choose a folder for the new game"}),message:t._({id:"Choose where to create the game"})}:{title:void 0,message:void 0}},e}return Object(a.a)(n,[{key:"render",value:function(){var e=this;return s.a.createElement(l.I18n,null,(function(t){var n=t.i18n,o=e._getTitleAndMessage(n);return s.a.createElement("div",{style:Object(r.a)(Object(r.a)({},v.container),{},{width:e.props.fullWidth?"100%":void 0})},s.a.createElement(p.b,{margin:"dense",style:v.textField,type:"text",hintText:o.title,value:e.props.value,onChange:function(t,n){return e.props.onChange(n)}}),s.a.createElement(d.a,{label:s.a.createElement(l.Trans,{id:"Choose folder"}),primary:!1,style:v.button,onClick:function(){return e._onChooseFolder(o)}}))}))}}]),n}(u.PureComponent)},419:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(3),o=n.n(r),a=n(504),i=o()("fs"),c=Object(a.a)("archiver"),l=function(e){var t=e.path,n=e.outputFilename,r=c();return new Promise((function(e,o){if(!i||!r)return o(new Error("Archiver unavailable"));var a=i.createWriteStream(n),c=r("zip",{zlib:{level:9}});a.on("close",(function(){console.log("Archive written at ".concat(n,", ").concat(c.pointer()," total bytes.")),e(n)})),c.on("error",(function(e){o(e)})),c.pipe(a),c.directory(t,!1),c.finalize()}))}},554:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(3),o=n.n(r)()("electron"),a=o?o.ipcRenderer:null,i=function(e,t,n){return a?(a.removeAllListeners("local-file-upload-progress"),a.removeAllListeners("local-file-upload-done"),new Promise((function(r,o){a.on("local-file-upload-progress",(function(e,t,r){n(t,r)})),a.on("local-file-upload-done",(function(e,t){if(t)return o(t);r()})),a.send("local-file-upload",e,t)}))):Promise.reject("No support for local file upload")}},557:function(e,t,n){"use strict";var r=n(83),o=n(3),a=n.n(o),i=n(863),c=a()("fs"),l=a()("path"),u=a()("electron"),s=u?u.remote.dialog:null,p=function(e){return c?new Promise((function(t,n){c.readFile(e,{encoding:"utf8"},(function(r,o){if(r)return n(r);try{var a=JSON.parse(o);return t(a)}catch(i){return n(e+" is a corrupted/malformed file.")}}))})):Promise.reject("Filesystem is not supported.")},d=function(){if(!s)return Promise.reject("Not supported");var e=u.remote.getCurrentWindow();return s.showOpenDialog(e,{title:"Open a project",properties:["openFile"],message:"If you want to open your GDevelop 4 project, be sure to save it as a .json file",filters:[{name:"GDevelop 5 project",extensions:["json"]}]}).then((function(e){var t=e.filePaths;return t&&t.length?{fileIdentifier:t[0]}:null}))},f=function(e){var t=e.fileIdentifier,n=l.dirname(t);return p(t).then((function(e){return Object(i.d)(e,{getReferencePartialObject:function(e){return p(l.join(n,e)+".json")},isReferenceMagicPropertyName:"__REFERENCE_TO_SPLIT_OBJECT",maxUnsplitDepth:3}).then((function(){return{content:e}}))}))},m=function(e,t){var n=e.fileIdentifier,r=n+".autosave";if(c.existsSync(r)){if(!t)return Promise.resolve(!0);try{if(c.statSync(r).mtime.getTime()>c.statSync(n).mtime.getTime())return Promise.resolve(!0)}catch(o){return console.error("Unable to compare *.autosave to project",o),Promise.resolve(!1)}return Promise.resolve(!1)}return Promise.resolve(!1)},h=function(e){return Promise.resolve(Object(r.a)(Object(r.a)({},e),{},{fileIdentifier:e.fileIdentifier+".autosave"}))},v=n(1912),g=n(6);t.a={internalName:"LocalFile",name:{id:"Local file system"},getFileMetadataFromAppArguments:function(e){return e[g.a]&&e[g.a].length?{fileIdentifier:e[g.a][0]}:null},createOperations:function(){return{onOpenWithPicker:d,onOpen:f,hasAutoSave:m,onSaveProject:v.b,onSaveProjectAs:v.c,onAutoSaveProject:v.a,onGetAutoSave:h,getOpenErrorMessage:function(e){return{id:"Check that the file exists, that this file is a proper game created with GDevelop and that you have the authorizations to open it."}}}}}},75:function(e,t,n){"use strict";n.r(t),function(e){n.d(t,"create",(function(){return D}));var r=n(2),o=n.n(r),a=n(571),i=n(6),c=n(888),l=n(893),u=(n(15),n(42),n(859)),s=n(1925),p=n(1927),d=n(1928),f=n(1932),m=n(1935),h=n(1945),v=n(1946),g=n.n(v),b=n(1948),E=n(413),w=n(179),y=n(889),x=n(1960),j=n(1961),P=n(882),S=n(557),O=n(1962),C=n(291),k=e.gd,D=function(e){i.b.setUpContextMenu();var t=i.b.getArguments(),n=i.b.isDev();return o.a.createElement(y.a,{authentification:e,disableCheckForUpdates:!!t["disable-update-check"],makeEventsFunctionCodeWriter:b.a,eventsFunctionsExtensionWriter:x.a,eventsFunctionsExtensionOpener:j.a},(function(e){var r=e.i18n,i=e.eventsFunctionsExtensionsState;return o.a.createElement(P.a,{appArguments:t,storageProviders:[S.a],defaultStorageProvider:S.a},(function(e){var t=e.getStorageProviderOperations,v=e.storageProviders,b=e.initialFileMetadataToOpen,y=e.getStorageProvider;return o.a.createElement(C.b.Consumer,null,(function(e){return o.a.createElement(a.a,{i18n:r,renderMainMenu:function(e){return o.a.createElement(h.a,e)},eventsFunctionsExtensionsState:i,renderPreviewLauncher:function(e,t){return o.a.createElement(f.a,Object.assign({},e,{ref:t}))},renderExportDialog:function(e){return o.a.createElement(c.a,Object.assign({},e,{exporters:Object(m.a)()}))},renderCreateDialog:function(e){return o.a.createElement(l.a,Object.assign({},e,{examplesComponent:u.a,startersComponent:s.a}))},renderGDJSDevelopmentWatcher:n?function(){return o.a.createElement(O.a,null)}:null,storageProviders:v,getStorageProviderOperations:t,getStorageProvider:y,resourceSources:p.a,resourceExternalEditors:d.a,extensionsLoader:g()({gd:k,objectsEditorService:E.a,objectsRenderingService:w.a,filterExamples:!n}),initialFileMetadataToOpen:b,unsavedChanges:e})}))}))}))}}.call(this,n(1))},859:function(e,t,n){"use strict";n.d(t,"b",(function(){return j})),n.d(t,"a",(function(){return P}));var r=n(5),o=n(12),a=n(23),i=n(22),c=n(77),l=n(2),u=n.n(l),s=n(2337),p=n(271),d=n(9),f=n(79),m=n(86),h=n(860),v=n(3),g=n.n(v),b=n(861),E=n(24),w=n(557),y=g()("path"),x=g()("fs-extra"),j=function(e,t,n){Object(E.a)({message:e._({id:"Unable to create the game in the specified folder. Check that you have permissions to write in this folder: {outputPath} or choose another folder.",values:{outputPath:t}}),rawError:n,errorId:"local-example-creation-error"})},P=function(e){Object(a.a)(n,e);var t=Object(i.a)(n);function n(){var e;Object(r.a)(this,n);for(var o=arguments.length,a=new Array(o),i=0;i<o;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).state={exampleNames:null},e.createFromExample=function(t,n){var r=e.props.outputPath;x&&r&&Object(h.a)((function(o){try{x.mkdirsSync(r),x.copySync(y.join(o,n),r)}catch(a){return void j(t,r,a)}e.props.onOpen(w.a,{fileIdentifier:y.join(r,n+".json")}),Object(d.j)(n)}))},e}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var e=this;Object(h.a)((function(t){x.readdir(t,(function(t,n){t?console.error("Unable to read examples:",t):e.setState({exampleNames:n.filter((function(e){return".DS_Store"!==e}))},(function(){return e.props.onExamplesLoaded()}))}))}))}},{key:"render",value:function(){var e=this;return u.a.createElement(c.I18n,null,(function(t){var n=t.i18n;return u.a.createElement(f.a,{noMargin:!0},u.a.createElement(f.b,{expand:!0},u.a.createElement(f.a,{expand:!0},u.a.createElement(p.a,{fullWidth:!0,value:e.props.outputPath,onChange:e.props.onChangeOutputPath,type:"create-game"}))),u.a.createElement(s.a,null),u.a.createElement(f.b,null,u.a.createElement(f.a,null,u.a.createElement(m.a,null,u.a.createElement(c.Trans,{id:"Choose or search for an example to open:"})))),u.a.createElement(f.b,null,u.a.createElement(b.a,{exampleNames:e.state.exampleNames,onCreateFromExample:function(t){return e.createFromExample(n,t)}})))}))}}]),n}(l.Component)},860:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r=n(3),o=n.n(r),a=o()("electron"),i=o()("path"),c=a?a.remote.app:null,l=o()("fs"),u=o()("process"),s=function(e,t,n){return l.access(e,l.constants.R_OK,(function(r){r?n():t(e)}))},p=function(e){if(!u||!l)return"";var t=c?c.getAppPath():u.cwd();s(i.join(t,"..","examples"),e,(function(){s(i.join(t,"..","..","app","resources","examples"),e,(function(){e(null)}))}))}},863:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"d",(function(){return c})),n.d(t,"c",(function(){return l})),n.d(t,"a",(function(){return u}));var r=n(130),o=n(387),a=n.n(o),i=function(e,t){var n=t.pathSeparator,r=t.getArrayItemReferenceName,o=t.shouldSplit,a=t.isReferenceMagicPropertyName,i=[],c=function(e,t){return i.push({reference:e,object:t}),{[a]:!0,referenceTo:e}};return function e(t,a,i){if(null!==t&&"object"===typeof t)if(Array.isArray(t))for(var l in t){var u=a+n+"*";if(o(u)){var s=t[l],p=r(s,i),d=i+n+p;t[l]=c(d,s),e(s,u,d)}else{var f=i+n+l;e(t[l],u,f)}}else for(var m in t){var h=a+n+m,v=i+n+m;if(o(h)){var g=t[m];t[m]=c(v,g),e(g,h,v)}else e(t[m],h,v)}}(e,"",""),i},c=function(e,t){var n=t.isReferenceMagicPropertyName,r=t.getReferencePartialObject,o=t.maxUnsplitDepth;return function e(t,a){if(void 0!==o&&a>=o)return Promise.resolve();if(null!==t&&"object"===typeof t){var i=Object.keys(t);if(i)return Promise.all(i.map((function(o){var i=function(e){return!0===e[n]?e:null}(t[o]);return i?r(i.referenceTo).then((function(n){return t[o]=n,e(t[o],a+1)})):e(t[o],a+1)}))).then((function(){}))}return Promise.resolve()}(e,0)},l=function(e){return function(t){return e.has(t)}},u=function(e){var t={};return function(n,o){var i=n[e];if("string"!==typeof i)throw new Error("Property ".concat(e," is not a string"));t[o]=t[o]||{};var c=Object(r.a)(a()(i),(function(e){return!!t[o][e]}));return t[o][c]=!0,c}}}}]);
//# sourceMappingURL=local-app.c98986d7.chunk.js.map