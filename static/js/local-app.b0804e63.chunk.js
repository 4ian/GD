(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{1761:function(e,t,n){"use strict";(function(e){var r=n(7),o=n(17),a=n(36),i=n(35),l=n(37),c=n(1762),s=n(16),u=n.n(s),p=n(5),d=e.gd,m=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(a.a)(this,Object(i.a)(t).call(this,e))).editorOpened=!1,n.lastShowCommandDate=0,n.sendingUpdate=!1,n.editor=null,n._serializedObject=null,n._hideIfNotJustShown=function(){Date.now()-n.lastShowCommandDate<100?console.info("The editor is not hidden because it receive a `show` command less than 100ms ago."):p.a.hide()},n.sendUpdate=function(){if(console.log("Sending update to server editor"),n.state.loading)console.warn("Already loading an update, abort send");else if(n.sendingUpdate)console.warn("Already sending an update, abort send");else if(n.editor){n.sendingUpdate=!0;var e=n.editor.getSerializedElements();for(var t in e)e.hasOwnProperty(t)&&n.bridge.send("update",e[t],t);n.sendingUpdate=!1,console.log("Update send done")}else console.error("No children editor to use to get the updated edited element")},n.editObject=function(e){n.sendUpdate(),n.bridge.send("editObject",e.getName())},n.requestUpdate=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1]?"requestForcedUpdate":"requestUpdate";n.bridge.send(t,void 0,e)},n._onUpdateReceived=function(e,t){console.log("Received project update from server"),""===t?n.setState({loading:!0},function(){return setTimeout(function(){n._serializedObject&&n._serializedObject.delete();var t=performance.now();n._serializedObject=d.Serializer.fromJSObject(e);var r=performance.now();console.log("Call to gd.Serializer.fromJSObject took "+(r-t)+" milliseconds."),n.editor.loadFromSerializedProject(n._serializedObject,function(){n._serializedObject.delete(),n._serializedObject=null,n.editorOpened||(n.editorOpened=!0,"scene-editor"===n.props.editor&&n.editor.openLayout(n.props.editedElementName,{openEventsEditor:!1}),"external-layout-editor"===n.props.editor&&n.editor.openExternalLayout(n.props.editedElementName)),n.setState({loading:!1})})})}):console.warn("Not implemented: received ".concat(t," update from server"))},n.bridge=new c.a,n.state={loading:!1},n.bridge.isSupported()?(console.log("Connection to an external editor..."),n.bridge.onReceive(function(e,t,r){"update"===e?n._onUpdateReceived(t,r):"setBounds"===e?n.props.isIntegrated&&p.a.setBounds(t.x,t.y,t.width,t.height):"show"===e?(n.lastShowCommandDate=Date.now(),p.a.show()):"hide"===e&&n.props.isIntegrated&&p.a.hide(t&&t.forceHide)}),n.bridge.onConnected(function(){n.requestUpdate("",!0)}),p.a.onBlur(function(){n.props.isIntegrated&&n._hideIfNotJustShown(),n.sendUpdate()}),p.a.onFocus(function(){n.requestUpdate()}),p.a.onClose(function(){n.sendUpdate()}),n.bridge.connectTo(n.props.serverPort)):console.warn("Connection to an external editor is not supported"),n}return Object(l.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;return u.a.cloneElement(this.props.children,{loading:this.state.loading,ref:function(t){return e.editor=t},requestUpdate:function(){return e.requestUpdate("",!0)},onEditObject:this.editObject,integratedEditor:!0})}}]),t}(s.Component);t.a=m}).call(this,n(3))},1762:function(e,t,n){"use strict";var r=n(4),o=n.n(r),a=n(593),i=o()("electron"),l=i?i.remote.require("buffer").Buffer:null;function c(){this.net=o()("net"),this.client=null,this.connected=!1,this._onReceiveCb=null}c.prototype.isSupported=function(){return!!this.net},c.prototype.connectTo=function(e){if(this.net){var t=this;this.client=new this.net.Socket,this.client.connect(e,"localhost",function(){console.log("Connection made on port",e),t.connected=!0,t._onConnected&&t._onConnected()});var n="",r=l.from([0]);this.client.on("data",function(e){for(var o=0,a=e.indexOf(r);o<e.length;)-1===a?(n+=e.slice(o),o=e.length):(n+=e.slice(o,a),t._receive(n),n="",o=a+1,a=e.indexOf(r,o))}),this.client.on("close",function(){t.connected=!1})}},c.prototype.send=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(!this.connected)return!1;var r=JSON.stringify({command:e,scope:n,payload:t});return this.client.write(r+"\0"),!0},c.prototype._receive=function(e){var t;console.info("Received data"),Object(a.a)(function(){try{t=JSON.parse(e)}catch(n){console.warn("Received invalid data (JSON parse failed)",n)}},function(e){return console.info("JSON parse took ".concat(e,"ms"))}),t&&this._onReceiveCb&&this._onReceiveCb(t.command,t.payload,t.scope)},c.prototype.onReceive=function(e){this._onReceiveCb=e},c.prototype.onConnected=function(e){this._onConnected=e},t.a=c},1765:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return D});var r=n(7),o=n(17),a=n(36),i=n(35),l=n(37),c=n(185),s=n(16),u=n.n(s),p=n(2121),d=n(199),m=n(340),f=n(194),h=n(11),g=n(188),b=n(211),v=n(869),E=n(4),x=n.n(E),y=n(870),j=n(247),w=n(868),O=x()("path"),S=x()("electron"),C=S?S.remote.app:null,P=x()("fs-extra"),k=e.gd,D=function(e){function t(){var e,n;Object(r.a)(this,t);for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];return(n=Object(a.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(l)))).state={outputPath:Object(y.a)(O&&C?O.join(C.getPath("documents"),"GDevelop projects"):"")},n._handleChangePath=function(e){return n.setState({outputPath:e})},n}return Object(l.a)(t,e),Object(o.a)(t,[{key:"createFromExample",value:function(e,t){var n=this,r=this.state.outputPath;P&&r&&Object(v.a)(function(o){try{P.mkdirsSync(r),P.copySync(O.join(o,t),r)}catch(a){return void Object(w.b)(e,r,a)}n.props.onOpen(O.join(r,t+".json")),Object(h.h)(t)})}},{key:"createEmptyGame",value:function(e){var t=this.state.outputPath;if(P&&t){try{P.mkdirsSync(t)}catch(r){return void Object(w.b)(e,t,r)}var n=k.ProjectHelper.createNewGDJSProject();n.setProjectFile(O.join(t,"game.json")),this.props.onCreate(n),Object(h.h)("")}}},{key:"render",value:function(){var e=this;return u.a.createElement(c.I18n,null,function(t){var n=t.i18n;return u.a.createElement(g.a,{noMargin:!0},u.a.createElement(g.b,null,u.a.createElement(g.a,null,u.a.createElement(f.a,null,u.a.createElement(c.Trans,{id:"Choose a game to use as a starter:"})))),u.a.createElement(g.b,null,u.a.createElement(g.a,{expand:!0,noMargin:!0},u.a.createElement(b.a,null,u.a.createElement(b.b,{leftIcon:u.a.createElement(j.a,{iconSize:40,src:"res/starters_icons/platformer.png"}),primaryText:u.a.createElement(c.Trans,{id:"Platformer"}),secondaryText:u.a.createElement(c.Trans,{id:"A simple platform game, with coins to collect, moving platforms and enemies."}),secondaryTextLines:2,onClick:function(){return e.createFromExample(n,"platformer")}}),u.a.createElement(b.b,{leftIcon:u.a.createElement(j.a,{iconSize:40,src:"res/starters_icons/space-shooter.png"}),primaryText:u.a.createElement(c.Trans,{id:"8-bit Space Shooter"}),secondaryText:u.a.createElement(c.Trans,{id:"A beautiful, retro side-scrolling shooter where you must defeat incoming enemies with your mecha transforming spaceship. Huge boss included!"}),secondaryTextLines:2,onClick:function(){return e.createFromExample(n,"space-shooter")}}),u.a.createElement(b.b,{leftIcon:u.a.createElement(j.a,{iconSize:40,src:"res/starters_icons/isometric-game.png"}),primaryText:u.a.createElement(c.Trans,{id:"Isometric game"}),secondaryText:u.a.createElement(c.Trans,{id:"An example of an isometric game where you can explore a map with your character."}),secondaryTextLines:2,onClick:function(){return e.createFromExample(n,"isometric-game")}}),u.a.createElement(b.b,{leftIcon:u.a.createElement(j.a,{iconSize:40,src:"res/starters_icons/downhill-bike-physics-demo.png"}),primaryText:"Downhill Bike Racing",secondaryText:u.a.createElement(c.Trans,{id:"An example of a 2D physics based driving game, where player have to reach the end as fast as possible."}),secondaryTextLines:2,onClick:function(){return e.createFromExample(n,"downhill-bike-physics-demo")}}),u.a.createElement(b.b,{leftIcon:u.a.createElement(j.a,{iconSize:40,src:"res/starters_icons/pairs.png"}),primaryText:"Pairs",secondaryText:u.a.createElement(c.Trans,{id:"Find all matching pairs of cards in this relaxing game. Use tweens to create smooth, natural animations with a few events."}),secondaryTextLines:2,onClick:function(){return e.createFromExample(n,"pairs")}}),u.a.createElement(b.b,{primaryText:u.a.createElement(c.Trans,{id:"Empty game"}),secondaryText:u.a.createElement(c.Trans,{id:"Start a new game from scratch."}),secondaryTextLines:2,onClick:function(){return e.createEmptyGame(n)}})),u.a.createElement(g.b,{alignItems:"center",justifyContent:"center"},u.a.createElement(d.a,{label:u.a.createElement(c.Trans,{id:"See examples"}),onClick:function(){return e.props.onShowExamples()}})))),u.a.createElement(p.a,null),u.a.createElement(g.b,{expand:!0},u.a.createElement(g.a,{expand:!0},u.a.createElement(m.a,{fullWidth:!0,value:e.state.outputPath,onChange:e._handleChangePath,type:"create-game"}))))})}}]),t}(s.Component)}).call(this,n(3))},1766:function(e,t,n){"use strict";(function(e){var r,o,a,i,l,c=n(7),s=n(17),u=n(36),p=n(35),d=n(37),m=n(16),f=n(305),h=n(4),g=n.n(h),b=g()("electron"),v=b?b.remote.dialog:null,E=g()("path"),x=e.gd;t.a=[{name:"localAudioFileOpener",displayName:"Choose a new audio file",kind:"audio",component:(r=function(e){function t(){var e,n;Object(c.a)(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(n=Object(u.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(o)))).chooseResources=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=n.props.i18n,o={multiSelections:t,title:r._({id:"Choose an audio file"}),name:r._({id:"Audio files"}),extensions:["wav","mp3","ogg"]};return y(r,e,o).then(function(t){return t.map(function(t){var n=new x.AudioResource,r=E.dirname(e.getProjectFile());return n.setFile(E.relative(r,t)),n.setName(E.relative(r,t)),n})})},n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return null}}]),t}(m.Component),r)},{name:"localFileOpener",displayName:"Choose a new image",kind:"image",component:(o=function(e){function t(){var e,n;Object(c.a)(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(n=Object(u.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(o)))).chooseResources=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=n.props.i18n,o={multiSelections:t,title:r._({id:"Choose an image"}),name:r._({id:"Image files"}),extensions:["png","jpg"]};return y(r,e,o).then(function(t){return t.map(function(t){var n=new x.ImageResource,r=E.dirname(e.getProjectFile());return n.setFile(E.relative(r,t)),n.setName(E.relative(r,t)),n})})},n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return null}}]),t}(m.Component),o)},{name:"localFontFileOpener",displayName:"Choose a new font file",kind:"font",component:(a=function(e){function t(){var e,n;Object(c.a)(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(n=Object(u.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(o)))).chooseResources=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=n.props.i18n,o={multiSelections:t,title:r._({id:"Choose a font file"}),name:r._({id:"Font files"}),extensions:["ttf","otf"]};return y(r,e,o).then(function(t){return t.map(function(t){var n=new x.FontResource,r=E.dirname(e.getProjectFile());return n.setFile(E.relative(r,t)),n.setName(E.relative(r,t)),n})})},n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return null}}]),t}(m.Component),a)},{name:"localVideoFileOpener",displayName:"Choose a new video file",kind:"video",component:(i=function(e){function t(){var e,n;Object(c.a)(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(n=Object(u.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(o)))).chooseResources=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=n.props.i18n,o={multiSelections:t,title:r._({id:"Choose a video file"}),name:r._({id:"Video files"}),extensions:["mp4"]};return y(r,e,o).then(function(t){return t.map(function(t){var n=new x.VideoResource,r=E.dirname(e.getProjectFile());return n.setFile(E.relative(r,t)),n.setName(E.relative(r,t)),n})})},n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return null}}]),t}(m.Component),i)},{name:"localJsonFileOpener",displayName:"Choose a new json file",kind:"json",component:(l=function(e){function t(){var e,n;Object(c.a)(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(n=Object(u.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(o)))).chooseResources=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=n.props.i18n,o={multiSelections:t,title:r._({id:"Choose a json file"}),name:r._({id:"JSON file"}),extensions:["json"]};return y(r,e,o).then(function(t){return t.map(function(t){var n=new x.JsonResource,r=E.dirname(e.getProjectFile());return n.setFile(E.relative(r,t)),n.setName(E.relative(r,t)),n})})},n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return null}}]),t}(m.Component),l)}];var y=function(e,t,n){return new Promise(function(r,o){if(!v)return o("Not supported");var a=["openFile"];n.multiSelections&&a.push("multiSelections");var i=E.dirname(t.getProjectFile()),l=b.remote.getCurrentWindow();v.showOpenDialog(l,{title:n.title,properties:a,filters:[{name:n.name,extensions:n.extensions}],defaultPath:i},function(n){if(!n)return r([]);if(n.filter(function(e){return!Object(f.g)(t,e)}).length&&confirm(e._({id:"This/these file(s) are outside the project folder. Would you like to make a copy of them in your project folder first (recommended)?"})))return r(Object(f.c)(t,n));return r(n)})})}}).call(this,n(3))},1767:function(e,t,n){"use strict";var r=n(1768),o=n(1769),a=n(1770),i=n(11),l=[{name:"piskel-app",displayName:"Edit with Piskel",kind:"image",edit:function(e){return Object(i.e)("piskel"),Object(r.a)(e)}},{name:"Jfxr",displayName:"Create/Edit a Sound effect with Jfxr (*.wav)",kind:"audio",edit:function(e){return Object(i.e)("jfxr"),Object(o.a)(e)}},{name:"Yarn",displayName:"Create/Edit a Dialogue Tree with Yarn (*.json)",kind:"json",edit:function(e){return Object(i.e)("yarn"),Object(a.a)(e)}}];t.a=l},1768:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return p});var r=n(191),o=n(4),a=n.n(o),i=n(305),l=a()("electron"),c=a()("path"),s=l?l.ipcRenderer:null,u=e.gd,p=function(e){var t=e.project,n=(e.resourcesLoader,e.resourceNames),o=e.singleFrame,a=e.onChangesSaved,p=e.extraOptions;if(l&&s){var d=n.map(function(e,n){return{resourcePath:Object(i.e)(t,e),resourceName:e,originalIndex:n}}),m=c.dirname(t.getProjectFile()),f=Object(r.a)({},p,{resources:d,singleFrame:o,projectPath:m});s.removeAllListeners("piskel-changes-saved"),s.on("piskel-changes-saved",function(e,n,r,o){var l=o.data?{pskl:o}:null,s=t.getResourcesManager();n.forEach(function(e){e.name=c.relative(m,e.path),Object(i.d)(t,new u.ImageResource,e.name)}),n[0].metadata=l,n[0].newAnimationName=r,o.singleFrame?(l&&s.getResource(c.relative(m,n[0].path)).setMetadata(JSON.stringify(l)),a(n)):a(n)}),s.send("piskel-open-then-load-animation",f)}}}).call(this,n(3))},1769:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return u});var r=n(4),o=n.n(r),a=n(305),i=o()("electron"),l=o()("path"),c=i?i.ipcRenderer:null,s=e.gd,u=function(e){var t=e.project,n=(e.resourcesLoader,e.resourceNames),r=e.onChangesSaved,o=(e.resourcePath,e.extraOptions);if(i&&c){var u=l.dirname(t.getProjectFile()),p={resourcePath:Object(a.e)(t,n[0]),externalEditorData:o.externalEditorData,projectPath:u};c.removeAllListeners("jfxr-changes-saved"),c.on("jfxr-changes-saved",function(e,n,o){var i=l.relative(u,n);Object(a.d)(t,new s.AudioResource,i);var c={jfxr:o};t.getResourcesManager().getResource(i).setMetadata(JSON.stringify(c)),r([{metadata:c,name:i}])}),c.send("jfxr-create-wav",p)}}}).call(this,n(3))},1770:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return u});var r=n(4),o=n.n(r),a=n(305),i=o()("electron"),l=o()("path"),c=i?i.ipcRenderer:null,s=e.gd,u=function(e){var t=e.project,n=(e.resourcesLoader,e.resourceNames),r=e.onChangesSaved,o=(e.resourcePath,e.extraOptions);if(i&&c){var u=l.dirname(t.getProjectFile()),p={resourcePath:Object(a.e)(t,n[0]),externalEditorData:o.externalEditorData,projectPath:u};c.removeAllListeners("yarn-changes-saved"),c.on("yarn-changes-saved",function(e,n){var o=l.relative(u,n);Object(a.d)(t,new s.JsonResource,o),r([{name:o}])}),c.send("yarn-create-json",p)}}}).call(this,n(3))},1771:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return v});var r=n(7),o=n(226),a=n(4),i=n.n(a),l=n(871),c=n(281),s=n(273),u=n.n(s),p=e.gd,d=i()("fs-extra"),m=i()("path"),f=i()("electron"),h=f?f.remote.dialog:null,g=function(e,t){if(!d)return Promise.reject(new Error("Filesystem is not supported."));try{var n=JSON.stringify(e,null,2);return d.ensureDir(m.dirname(t)).then(function(){return new Promise(function(e,r){d.writeFile(t,n,function(t){return t?r(t):e()})})})}catch(r){return Promise.reject(r)}},b=function(e,t,n){var r=Object(o.a)(e);if(e.isFolderProject()){var a=Object(l.b)(r,{pathSeparator:"/",getArrayItemReferenceName:Object(l.a)("name"),shouldSplit:Object(l.c)(new Set(["/layouts/*","/externalLayouts/*","/externalEvents/*","/layouts/*","/eventsFunctionsExtensions/*"])),isReferenceMagicPropertyName:"__REFERENCE_TO_SPLIT_OBJECT"});return Promise.all(a.map(function(e){return g(e.object,m.join(n,e.reference)+".json").catch(function(e){throw console.error("Unable to write a partial file:",e),e})})).then(function(){return g(r,t).catch(function(e){throw console.error("Unable to write the split project:",e),e})})}return g(r,t).catch(function(e){throw console.error("Unable to write the project:",e),e})},v=function e(){Object(r.a)(this,e)};v.saveProject=function(e){var t=e.getProjectFile(),n=m.dirname(e.getProjectFile());return t?b(e,t,n).then(function(){return!0}):Promise.reject('Project file is empty, "Save as" should have been called?')},v.saveProjectAs=function(e){var t=e.getProjectFile(),n=u()(new p.AbstractFileSystemJS,c.a),r=f.remote.getCurrentWindow(),o={defaultPath:t,filters:[{name:"GDevelop 5 project",extensions:["json"]}]};if(!h)return Promise.reject("Unsupported");var a=h.showSaveDialog(r,o);if(!a)return Promise.resolve(!1);var i=m.dirname(a);return p.ProjectResourcesCopier.copyAllResourcesTo(e,n,i,!0,!1,!0),e.setProjectFile(a),b(e,a,i).then(function(){return!0})},v.autoSaveProject=function(e){var t=e.getProjectFile()+".autosave";g(Object(o.a)(e),t).catch(function(e){throw console.error("Unable to write ".concat(t,":"),e),e})}}).call(this,n(3))},1780:function(e,t,n){"use strict";n.d(t,"a",function(){return d});var r=n(7),o=n(4),a=n.n(o),i=n(871),l=a()("fs"),c=a()("path"),s=a()("electron"),u=s?s.remote.dialog:null,p=function(e){return l?new Promise(function(t,n){l.readFile(e,{encoding:"utf8"},function(r,o){if(r)return n(r);try{var a=JSON.parse(o);return t(a)}catch(i){return n(e+" is a corrupted/malformed file.")}})}):Promise.reject("Filesystem is not supported.")},d=function e(){Object(r.a)(this,e)};d.chooseProjectFile=function(){return new Promise(function(e,t){if(!u)return t("Not supported");var n=s.remote.getCurrentWindow();u.showOpenDialog(n,{title:"Open a project",properties:["openFile"],message:"If you want to open your GDevelop 4 project, be sure to save it as a .json file",filters:[{name:"GDevelop 5 project",extensions:["json"]}]},function(t){return t&&t.length?e(t[0]):e(null)})})},d.readProjectFile=function(e){var t=c.dirname(e);return p(e).then(function(e){return Object(i.d)(e,{getReferencePartialObject:function(e){return p(c.join(t,e)+".json")},isReferenceMagicPropertyName:"__REFERENCE_TO_SPLIT_OBJECT",maxUnsplitDepth:3}).then(function(){return e})})},d.shouldOpenAutosave=function(e,t,n){if(l.existsSync(t)){if(!n)return!0;try{if(l.statSync(t).mtime.getTime()>l.statSync(e).mtime.getTime())return!0}catch(r){return console.error("Unable to compare *.autosave to project",r),!1}return!1}return!1}},1781:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return S});var r=n(7),o=n(17),a=n(36),i=n(35),l=n(37),c=n(185),s=n(16),u=n(281),p=n(4),d=n.n(p),m=n(593),f=n(270),h=n(1782),g=n(273),b=n.n(g),v=n(1783),E=n(511),x=d()("electron"),y=d()("path"),j=x?x.ipcRenderer:null,w=x?x.remote.BrowserWindow:null,O=e.gd,S=function(e){function t(){var e,n;Object(r.a)(this,t);for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];return(n=Object(a.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(l)))).canDoNetworkPreview=function(){return!0},n.state={networkPreviewDialogOpen:!1,networkPreviewHost:null,networkPreviewPort:null,networkPreviewError:null,previewGamePath:null,previewBrowserWindowConfig:null},n._subscriptionChecker=null,n._openPreviewBrowserWindow=function(){w&&n.state.previewBrowserWindowConfig&&n.state.previewGamePath&&new w(n.state.previewBrowserWindowConfig).loadURL("file://".concat(n.state.previewGamePath,"/index.html"))},n._openPreviewWindow=function(e,t,r){n.setState({previewBrowserWindowConfig:{width:e.getMainWindowDefaultWidth(),height:e.getMainWindowDefaultHeight(),useContentSize:!0,title:"Preview of ".concat(e.getName()),backgroundColor:"#000000"},previewGamePath:t},function(){if(r.networkPreview){if(!j)return;j.removeAllListeners("serve-folder-done"),j.removeAllListeners("local-network-ips"),j.on("serve-folder-done",function(e,t,r){t?n.setState({networkPreviewDialogOpen:!0,networkPreviewPort:null,networkPreviewHost:null,networkPreviewError:t}):n.setState({networkPreviewDialogOpen:!0,networkPreviewPort:r.port}),setTimeout(function(){return n._checkSubscription()})}),j.on("local-network-ips",function(e,t){n.setState({networkPreviewHost:Object(v.a)(t)})}),j.send("serve-folder",{root:t}),j.send("get-local-network-ips")}else n._openPreviewBrowserWindow()})},n._prepareExporter=function(){return new Promise(function(e,t){Object(f.findGDJS)(function(n){if(!n)return console.error("Could not find GDJS"),t();console.info("GDJS found in ",n);var r=b()(new O.AbstractFileSystemJS,u.a),o=y.join(r.getTempDir(),"preview"),a=new O.Exporter(r,n);e({outputDir:o,exporter:a})})})},n.launchLayoutPreview=function(e,t,r){return e&&t?n._prepareExporter().then(function(o){var a=o.outputDir,i=o.exporter;Object(m.a)(function(){i.exportLayoutForPixiPreview(e,t,a),i.delete(),n._openPreviewWindow(e,a,r)},function(e){return console.info("Preview took ".concat(e,"ms"))})}):Promise.reject()},n.launchExternalLayoutPreview=function(e,t,r,o){return e&&r?n._prepareExporter().then(function(a){var i=a.outputDir,l=a.exporter;Object(m.a)(function(){l.exportExternalLayoutForPixiPreview(e,t,r,i),l.delete(),n._openPreviewWindow(e,i,o)},function(e){return console.info("Preview took ".concat(e,"ms"))})}):Promise.reject()},n._checkSubscription=function(e){return!n._subscriptionChecker||n._subscriptionChecker.checkHasSubscription()},n}return Object(l.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this,t=this.state,n=t.networkPreviewDialogOpen,r=t.networkPreviewHost,o=t.networkPreviewPort,a=t.networkPreviewError;return s.createElement(s.Fragment,null,s.createElement(E.a,{ref:function(t){return e._subscriptionChecker=t},onChangeSubscription:function(){e.setState({networkPreviewDialogOpen:!1}),e.props.onChangeSubscription&&e.props.onChangeSubscription()},id:"Preview over wifi",title:s.createElement(c.Trans,{id:"Preview over wifi"}),mode:"try"}),s.createElement(h.a,{open:n,url:r&&o?"".concat(r,":").concat(o):null,error:a,onClose:function(){return e.setState({networkPreviewDialogOpen:!1})},onExport:this.props.onExport,onRunPreviewLocally:this._openPreviewBrowserWindow}))}}]),t}(s.Component)}).call(this,n(3))},1782:function(e,t,n){"use strict";n.d(t,"a",function(){return g});var r=n(7),o=n(17),a=n(36),i=n(35),l=n(37),c=n(185),s=n(16),u=n(198),p=n(193),d=n(209),m=n(194),f=n(188),h=n(251),g=function(e){function t(){return Object(r.a)(this,t),Object(a.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props,t=e.url,n=e.open,r=e.error,o=e.onExport,a=e.onClose,i=e.onRunPreviewLocally;return n?s.createElement(u.a,{actions:[s.createElement(p.a,{key:"close",label:s.createElement(c.Trans,{id:"Close"}),primary:!0,onClick:a})],secondaryActions:[o&&s.createElement(p.a,{key:"export",label:s.createElement(c.Trans,{id:"Export game"}),onClick:o}),s.createElement(p.a,{key:"run-preview-locally",label:s.createElement(c.Trans,{id:"Run on this computer"}),onClick:i})],modal:!0,open:n,onRequestClose:a},r&&s.createElement(f.b,null,s.createElement(m.a,null,s.createElement(c.Trans,{id:"Unable to start the server for the preview! Make sure that you are authorized to run servers on this computer. Otherwise, use classic preview to test your game."}))),!r&&!t&&s.createElement(h.a,null),!r&&t&&s.createElement("div",null,s.createElement(f.b,null,s.createElement(m.a,null,s.createElement(c.Trans,{id:"Your preview is ready! On your mobile or tablet, open your browser and enter in the address bar:"}))),s.createElement(d.a,{value:t,fullWidth:!0}),s.createElement(f.b,null,s.createElement(m.a,null,s.createElement(c.Trans,{id:"Please note that your device should be connected on the same network as this computer."}))))):null}}]),t}(s.Component)},1783:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r=function(e){if(!e.length)return null;var t=e.find(function(e){return 0===e.indexOf("192.168")});return t||((t=e.find(function(e){return 0===e.indexOf("192")}))||e[0])}},1784:function(e,t,n){"use strict";n.d(t,"a",function(){return y});var r=n(16),o=n(872),a=n(1785),i=n(1787),l=n(1788),c=n(1789),s=n(1790),u=n(1791),p=n(1794),d=n(878),m=n.n(d),f=n(880),h=n.n(f),g=n(879),b=n.n(g),v=n(875),E=n(876),x=n(877),y=function(){return[{name:"Android (& iOS coming soon)",renderIcon:function(e){return r.createElement(m.a,e)},helpPage:"/publishing/android_and_ios",description:"Package your game for Android directly from GDevelop. iOS support is coming soon!",key:"localonlinecordovaexport",ExportComponent:i.a},{name:"Facebook Instant Games",renderIcon:function(e){return r.createElement(v.a,e)},helpPage:"/publishing/publishing-to-facebook-instant-games",description:"Package your game as a Facebook Instant Games that can be played on Facebook Messenger.",key:"localfacebookinstantgames",ExportComponent:u.a},{name:"Web (upload online)",renderIcon:function(e){return r.createElement(x.a,e)},helpPage:"/publishing/web",description:"Upload your game online directly from GDevelop and share the link to players. Play to your game using your browser on computers and mobile phones.",key:"locals3export",ExportComponent:a.a},{name:"Local folder",renderIcon:function(e){return r.createElement(b.a,e)},helpPage:"/publishing/html5_game_in_a_local_folder",description:"Build the game locally as a HTML5 game. You can then export it on website like Itch.io or Kongregate.",key:"localexport",ExportComponent:o.a,advanced:!0},{name:"iOS & Android (manual)",renderIcon:function(e){return r.createElement(E.a,e)},helpPage:"/publishing/android_and_ios_with_cordova",description:"Build the game locally as a Cordova project, and export it manually to iOS or Android with Cordova developers tools.",key:"localcordovaexport",ExportComponent:l.a,advanced:!0},{name:"Windows/macOS/Linux (beta)",renderIcon:function(e){return r.createElement(h.a,e)},helpPage:"/publishing/windows-macos-linux",description:"Package your game as an app for Windows, macOS or Linux directly from GDevelop.",key:"localonlineelectronexport",ExportComponent:s.a},{name:"Windows/macOS/Linux (manual)",renderIcon:function(e){return r.createElement(h.a,e)},helpPage:"/publishing/windows-macos-linux-with-electron",description:"Build the game locally and export it manually to Windows, macOS or Linux with third-party developer tools.",key:"localelectronexport",ExportComponent:p.a,advanced:!0},{name:"Cocos2d-JS",renderIcon:function(e){return r.createElement(m.a,e)},helpPage:"/publishing/android_and_ios_with_cocos2d-js",description:"Export your game using Cocos2d-JS game engine. The game can be compiled for Android or iOS if you install Cocos2d-JS developer tools.",key:"localcocos2dexport",ExportComponent:c.a,experimental:!0}]}},1785:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return F});var r=n(7),o=n(17),a=n(36),i=n(35),l=n(37),c=n(185),s=n(16),u=n.n(s),p=n(355),d=n.n(p),m=n(1786),f=n(199),h=n(11),g=n(872),b=n(4),v=n.n(b),E=n(188),x=n(2144),y=n(41),j=n(594),w=n(209),O=n(38),S=n(194),C=v()("os"),P=v()("electron"),k=P?P.ipcRenderer:null,D=P?P.shell:null,_=e.gd,F=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(a.a)(this,Object(i.a)(t).call(this,e)))._uploadToS3=function(e){return k.removeAllListeners("s3-folder-upload-progress"),k.removeAllListeners("s3-folder-upload-done"),new Promise(function(t,r){k.on("s3-folder-upload-progress",function(e,t,r){return n.setState({uploadProgress:t,uploadMax:r})}),k.on("s3-folder-upload-done",function(e,o,a){if(o)return r(o);n.setState({uploadDone:!0}),t(a)}),k.send("s3-folder-upload",e)})},n._deploy=function(e){return Object(m.sleep)(200).then(function(){return d()(y.e.deployEndpoint,{method:"post",params:{name:e}})}).then(function(e){return n.setState({deployDone:!0}),e.data.deployedPrefix})},n.launchExport=function(){var e=n.props.project;if(e){Object(h.d)("s3"),n.setState({exportStarted:!0,exportDone:!1,uploadDone:!1,deployDone:!1});var t=C.tmpdir()+"/GDS3Export-"+Object(j.a)();g.a.prepareExporter().then(function(r){var o=r.exporter,a=new _.MapStringBoolean;o.exportWholePixiProject(e,t,a),a.delete(),o.delete(),n.setState({exportDone:!0})}).then(function(){return n._uploadToS3(t)}).then(function(e){return n._deploy(e)}).then(function(e){n.setState({url:"".concat(y.e.gamesHost,"/").concat(e)})}).catch(function(e){Object(O.a)("An error occured while exporting the game online. Please check your internet connection and try again.",e)}).then(function(){return n.setState({exportStarted:!1})})}},n.openURL=function(){D.openExternal(n.state.url)},n.renderUrl=function(){return u.a.createElement(E.b,{alignItems:"baseline"},u.a.createElement(c.Trans,{id:"You game is available here:"}),u.a.createElement(E.c,null),u.a.createElement(w.a,{value:n.state.url,style:{flex:1}}),u.a.createElement(E.c,null),u.a.createElement(f.a,{label:u.a.createElement(c.Trans,{id:"Open"}),primary:!0,onClick:n.openURL}))},n.state={exportStarted:!1,exportDone:!1,uploadDone:!1,deployDone:!1},n}return Object(l.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){if(!this.props.project)return null;var e=this.state,t=e.url,n=e.exportStarted,r=e.exportDone,o=e.uploadProgress,a=e.uploadMax,i=e.uploadDone,l=e.deployDone;return u.a.createElement(E.a,{noMargin:!0},u.a.createElement(E.b,null,u.a.createElement(S.a,null,u.a.createElement(c.Trans,{id:"This will export your game and upload it on GDevelop games hosting. The game will be free and available for a few days."}))),u.a.createElement(E.b,{alignItems:"center"},u.a.createElement(x.a,{style:{flex:1},value:a>0?o/a*100:0,variant:n&&!r||i&&!l?"indeterminate":"determinate"}),u.a.createElement(E.c,null),u.a.createElement(f.a,{label:u.a.createElement(c.Trans,{id:"Export and upload my game"}),primary:!0,onClick:this.launchExport,disabled:n})),!!t&&this.renderUrl())}}]),t}(s.Component)}).call(this,n(3))},1787:function(e,t,n){"use strict";(function(e){var r=n(7),o=n(17),a=n(36),i=n(35),l=n(37),c=n(16),s=n.n(c),u=n(273),p=n.n(u),d=n(199),m=n(11),f=n(460),h=n(188),g=n(38),b=n(270),v=n(281),E=n(595),x=n(4),y=n.n(x),j=n(5),w=n(513),O=n(873),S=n(358),C=n(597),P=n(874),k=n(194),D=y()("path"),_=y()("os"),F=y()("electron"),T=F?F.ipcRenderer:null,L=e.gd,A=function(e){function t(){var e,n;Object(r.a)(this,t);for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];return(n=Object(a.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(l)))).state={exportStep:"",build:null,uploadProgress:0,uploadMax:0,errored:!1},n.buildsWatcher=new C.a,n.launchExport=function(){var e=n.props.project;return e?t.prepareExporter().then(function(t){var n=t.exporter,r=t.outputDir,o=new L.MapStringBoolean;return o.set("exportForCordova",!0),n.exportWholePixiProject(e,r,o),o.delete(),n.delete(),r}).catch(function(e){throw Object(g.a)("Unable to export the game",e),e}):Promise.reject()},n.launchCompression=function(e){var t=_.tmpdir();return Object(E.a)({path:e,outputFilename:D.join(t,"game-archive.zip")})},n.launchUpload=function(e){return T?(T.removeAllListeners("s3-file-upload-progress"),T.removeAllListeners("s3-file-upload-done"),new Promise(function(t,r){T.on("s3-file-upload-progress",function(e,t,r){n.setState({uploadProgress:t,uploadMax:r})}),T.on("s3-file-upload-done",function(e,n,o){if(n)return r(n);t(o)}),T.send("s3-file-upload",e)})):Promise.reject("No support for upload")},n.launchBuild=function(e,t){var n=e.getAuthorizationHeader,r=e.profile;return r?Object(f.a)(n,r.uid,t):Promise.reject(new Error("User is not authenticated"))},n.startBuildWatch=function(e){n.state.build&&n.buildsWatcher.start({userProfile:e,builds:[n.state.build],onBuildUpdated:function(e){return n.setState({build:e})}})},n.launchWholeExport=function(e){var t=function(e){return e},r=n.props.project;if(Object(m.d)("local-online-cordova"),Object(S.a)(t,Object(S.b)(t,r))){var o=function(e){return function(t){throw n.state.errored||(n.setState({errored:!0}),Object(g.a)(e+(t.message?"\n".concat(t.message):""),{exportStep:n.state.exportStep,rawError:t})),t}};n.setState({exportStep:"export",uploadProgress:0,uploadMax:0,errored:!1,build:null}),n.launchExport().then(function(e){return n.setState({exportStep:"compress"}),n.launchCompression(e)},o(t("Error while exporting the game."))).then(function(e){return n.setState({exportStep:"upload"}),n.launchUpload(e)},o(t("Error while compressing the game."))).then(function(t){return n.setState({exportStep:"waiting-for-build"}),n.launchBuild(e,t)},o(t("Error while uploading the game. Check your internet connection or try again later."))).then(function(t){n.setState({build:t,exportStep:"build"},function(){n.startBuildWatch(e)})},o(t("Error while lauching the build of the game."))).catch(function(){})}},n._download=function(e){n.state.build&&n.state.build[e]&&j.a.openExternalURL(Object(f.e)(n.state.build[e]))},n}return Object(l.a)(t,e),Object(o.a)(t,[{key:"componentWillUnmount",value:function(){this.buildsWatcher.stop()}},{key:"render",value:function(){var e=this,t=this.state,n=t.exportStep,r=t.build,o=t.uploadMax,a=t.uploadProgress,i=t.errored,l=function(e){return e},c=this.props,u=c.project,p=c.userProfile;if(!u)return null;var m=function(e){return e.limits?e.limits["cordova-build"]:null};return s.a.createElement(h.a,{noMargin:!0},s.a.createElement(h.b,null,s.a.createElement(k.a,null,l("Packaging your game for Android will create an APK file that can be installed on Android phones, based on Cordova framework."))),p.authenticated&&s.a.createElement(h.b,{justifyContent:"center"},s.a.createElement(d.a,{label:l("Package for Android"),primary:!0,onClick:function(){return e.launchWholeExport(p)},disabled:!function(e){if(!i&&""!==n&&"build"!==n)return!1;var t=m(e);return!t||!t.limitReached}(p)})),p.authenticated&&s.a.createElement(O.a,{subscription:p.subscription,limit:m(p),onChangeSubscription:this.props.onChangeSubscription}),!p.authenticated&&s.a.createElement(w.a,{message:l("Create an account to build your game for Android in one-click:"),onLogin:p.onLogin}),s.a.createElement(h.b,{expand:!0},s.a.createElement(P.a,{exportStep:n,build:r,onDownload:this._download,uploadMax:o,uploadProgress:a,errored:i})))}}]),t}(c.Component);A.prepareExporter=function(){return new Promise(function(e,t){Object(b.findGDJS)(function(n){if(!n)return Object(g.a)("Could not find GDJS"),t();console.info("GDJS found in ",n);var r=p()(new L.AbstractFileSystemJS,v.a),o=new L.Exporter(r,n),a=D.join(r.getTempDir(),"OnlineCordovaExport");r.mkDir(a),r.clearDir(a),e({exporter:o,outputDir:a})})})},t.a=A}).call(this,n(3))},1788:function(e,t,n){"use strict";(function(e){var r=n(7),o=n(17),a=n(36),i=n(35),l=n(37),c=n(185),s=n(16),u=n.n(s),p=n(198),d=n(193),m=n(199),f=n(11),h=n(188),g=n(38),b=n(270),v=n(281),E=n(340),x=n(217),y=n(358),j=n(273),w=n.n(j),O=n(4),S=n.n(O),C=n(5),P=n(194),k=S()("electron"),D=k?k.shell:null,_=e.gd,F=function(e){function t(){var e,n;Object(r.a)(this,t);for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];return(n=Object(a.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(l)))).state={exportFinishedDialogOpen:!1,outputDir:""},n.launchExport=function(){var e=function(e){return e},r=n.props.project;if(r&&(Object(f.d)("local-cordova"),Object(y.a)(e,Object(y.b)(e,r)))){var o=n.state.outputDir;r.setLastCompilationDirectory(o),t.prepareExporter().then(function(e){var t=e.exporter,a=new _.MapStringBoolean;a.set("exportForCordova",!0),t.exportWholePixiProject(r,o,a),a.delete(),t.delete(),n.setState({exportFinishedDialogOpen:!0})}).catch(function(e){Object(g.a)("Unable to export the game",e)})}},n.openExportFolder=function(){D&&D.openItem(n.state.outputDir)},n.openPhoneGapBuild=function(){C.a.openExternalURL("https://build.phonegap.com")},n}return Object(l.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.project;this.setState({outputDir:e?e.getLastCompilationDirectory():""})}},{key:"render",value:function(){var e=this,t=function(e){return e},n=this.props.project;return n?u.a.createElement(h.a,{noMargin:!0},u.a.createElement(h.b,null,u.a.createElement(h.a,{noMargin:!0},u.a.createElement(P.a,null,"This will export your game as a Cordova project. Cordova is a technology that enables HTML5 games to be packaged for ",u.a.createElement("b",null,"iOS"),","," ",u.a.createElement("b",null,"Android")," and more."),u.a.createElement(P.a,null,"Third-party tools like ",u.a.createElement("b",null,"Adobe PhoneGap Build")," allow game developers to bundle their games using Cordova."))),u.a.createElement(h.b,null,u.a.createElement(E.a,{type:"export",value:this.state.outputDir,defaultPath:n.getLastCompilationDirectory(),onChange:function(t){return e.setState({outputDir:t})},fullWidth:!0})),u.a.createElement(h.b,null,u.a.createElement(h.c,{expand:!0}),u.a.createElement(m.a,{label:u.a.createElement(c.Trans,{id:"Export"}),primary:!0,onClick:this.launchExport,disabled:!this.state.outputDir})),u.a.createElement(p.a,{title:t("Export finished"),actions:[u.a.createElement(d.a,{key:"open",label:u.a.createElement(c.Trans,{id:"Open folder"}),primary:!0,onClick:this.openExportFolder}),u.a.createElement(d.a,{key:"close",label:u.a.createElement(c.Trans,{id:"Close"}),primary:!1,onClick:function(){return e.setState({exportFinishedDialogOpen:!1})}})],secondaryActions:u.a.createElement(x.a,{key:"help",helpPagePath:"/publishing"}),modal:!0,open:this.state.exportFinishedDialogOpen},u.a.createElement(P.a,null,u.a.createElement(c.Trans,{id:"You can now compress and upload the game to PhoneGap Build which will compile it for you to an iOS and Android app."})),u.a.createElement(P.a,null,u.a.createElement(c.Trans,{id:"You can also compile the game by yourself using Cordova command-line tool to iOS (XCode is required) or Android (Android SDK is required)."})),u.a.createElement(m.a,{fullWidth:!0,primary:!0,onClick:function(){return e.openPhoneGapBuild()},label:t("Open PhoneGap Build")}))):null}}]),t}(s.Component);F.prepareExporter=function(){return new Promise(function(e,t){Object(b.findGDJS)(function(n){if(!n)return Object(g.a)("Could not find GDJS"),t();console.info("GDJS found in ",n);var r=w()(new _.AbstractFileSystemJS,v.a),o=new _.Exporter(r,n);e({exporter:o})})})},t.a=F}).call(this,n(3))},1789:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return _});var r=n(7),o=n(17),a=n(36),i=n(35),l=n(37),c=n(185),s=n(16),u=n.n(s),p=n(198),d=n(193),m=n(199),f=n(404),h=n(11),g=n(188),b=n(217),v=n(38),E=n(270),x=n(281),y=n(340),j=n(273),w=n.n(j),O=n(4),S=n.n(O),C=n(194),P=S()("electron"),k=P?P.shell:null,D=e.gd,_=function(e){function t(){var e,n;Object(r.a)(this,t);for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];return(n=Object(a.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(l)))).state={exportFinishedDialogOpen:!1,outputDir:"",debugMode:!1},n.launchExport=function(){var e=n.props.project;if(e){Object(h.d)("local-cocos2d");var r=n.state,o=r.outputDir,a=r.debugMode;e.setLastCompilationDirectory(o),t.prepareExporter().then(function(t){var r=t.exporter;r.exportWholeCocos2dProject(e,a,o),r.delete(),n.setState({exportFinishedDialogOpen:!0})}).catch(function(e){Object(v.a)("Unable to export the game with Cocos2d-JS",e)})}},n.openExportFolder=function(){k.openItem(n.state.outputDir)},n}return Object(l.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.project;this.setState({outputDir:e?e.getLastCompilationDirectory():""})}},{key:"render",value:function(){var e=this,t=this.props.project;return t?u.a.createElement(g.a,{noMargin:!0},u.a.createElement(g.b,null,u.a.createElement(C.a,null,u.a.createElement(c.Trans,{id:"This will export your game using Cocos2d-JS game engine. The game can be compiled for Android or iOS if you install Cocos2d-JS developer tools."}))),u.a.createElement(g.b,null,u.a.createElement(y.a,{type:"export",value:this.state.outputDir,defaultPath:t.getLastCompilationDirectory(),onChange:function(t){return e.setState({outputDir:t})},fullWidth:!0})),u.a.createElement(g.b,null,u.a.createElement(f.a,{onToggle:function(t,n){return e.setState({debugMode:n})},toggled:this.state.debugMode,labelPosition:"right",label:u.a.createElement(c.Trans,{id:"Debug mode (show FPS counter and stats in the bottom left)"})})),u.a.createElement(g.b,null,u.a.createElement(g.c,{expand:!0}),u.a.createElement(m.a,{label:u.a.createElement(c.Trans,{id:"Export"}),primary:!0,onClick:this.launchExport,disabled:!this.state.outputDir})),u.a.createElement(p.a,{title:u.a.createElement(c.Trans,{id:"Export finished"}),actions:[u.a.createElement(d.a,{key:"open",label:u.a.createElement(c.Trans,{id:"Open folder"}),primary:!0,onClick:this.openExportFolder}),u.a.createElement(d.a,{key:"close",label:u.a.createElement(c.Trans,{id:"Close"}),primary:!1,onClick:function(){return e.setState({exportFinishedDialogOpen:!1})}})],secondaryActions:u.a.createElement(b.a,{key:"help",helpPagePath:"/publishing"}),modal:!0,open:this.state.exportFinishedDialogOpen},u.a.createElement(C.a,null,"You can now upload the game to a web hosting or use Cocos2d-JS command line tools to export it to other platforms like iOS (XCode is required) or Android (Android SDK is required)."))):null}}]),t}(s.Component);_.prepareExporter=function(){return new Promise(function(e,t){Object(E.findGDJS)(function(n){if(!n)return Object(v.a)("Could not find GDJS"),t();console.info("GDJS found in ",n);var r=w()(new D.AbstractFileSystemJS,x.a),o=new D.Exporter(r,n);e({exporter:o})})})}}).call(this,n(3))},1790:function(e,t,n){"use strict";(function(e){var r=n(227),o=n(7),a=n(17),i=n(36),l=n(35),c=n(37),s=n(185),u=n(16),p=n.n(u),d=n(273),m=n.n(d),f=n(199),h=n(253),g=n(11),b=n(460),v=n(188),E=n(38),x=n(270),y=n(281),j=n(595),w=n(4),O=n.n(w),S=n(5),C=n(513),P=n(873),k=n(358),D=n(597),_=n(874),F=n(194),T=O()("path"),L=O()("os"),A=O()("electron"),R=A?A.ipcRenderer:null,U=e.gd,M=function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,c=new Array(a),s=0;s<a;s++)c[s]=arguments[s];return(n=Object(i.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(c)))).state={exportStep:"",build:null,uploadProgress:0,uploadMax:0,errored:!1,targets:["winExe"]},n.buildsWatcher=new D.a,n.launchExport=function(){var e=n.props.project;return e?t.prepareExporter().then(function(t){var n=t.exporter,r=t.outputDir,o=new U.MapStringBoolean;return o.set("exportForElectron",!0),n.exportWholePixiProject(e,r,o),o.delete(),n.delete(),r}).catch(function(e){throw Object(E.a)("Unable to export the game",e),e}):Promise.reject()},n.launchCompression=function(e){var t=L.tmpdir();return Object(j.a)({path:e,outputFilename:T.join(t,"game-archive.zip")})},n.launchUpload=function(e){return R?(R.removeAllListeners("s3-file-upload-progress"),R.removeAllListeners("s3-file-upload-done"),new Promise(function(t,r){R.on("s3-file-upload-progress",function(e,t,r){n.setState({uploadProgress:t,uploadMax:r})}),R.on("s3-file-upload-done",function(e,n,o){if(n)return r(n);t(o)}),R.send("s3-file-upload",e)})):Promise.reject("No support for upload")},n.launchBuild=function(e,t){var r=e.getAuthorizationHeader,o=e.profile;return o?Object(b.b)(r,o.uid,t,n.state.targets):Promise.reject(new Error("User is not authenticated"))},n.startBuildWatch=function(e){n.state.build&&n.buildsWatcher.start({userProfile:e,builds:[n.state.build],onBuildUpdated:function(e){return n.setState({build:e})}})},n.launchWholeExport=function(e){var t=function(e){return e},r=n.props.project;if(Object(g.d)("local-online-electron"),Object(k.a)(t,Object(k.b)(t,r))){var o=function(e){return function(t){throw n.state.errored||(n.setState({errored:!0}),Object(E.a)(e+(t.message?"\n".concat(t.message):""),{exportStep:n.state.exportStep,rawError:t})),t}};n.setState({exportStep:"export",uploadProgress:0,uploadMax:0,errored:!1,build:null}),n.launchExport().then(function(e){return n.setState({exportStep:"compress"}),n.launchCompression(e)},o(t("Error while exporting the game."))).then(function(e){return n.setState({exportStep:"upload"}),n.launchUpload(e)},o(t("Error while compressing the game."))).then(function(t){return n.setState({exportStep:"waiting-for-build"}),n.launchBuild(e,t)},o(t("Error while uploading the game. Check your internet connection or try again later."))).then(function(t){n.setState({build:t,exportStep:"build"},function(){n.startBuildWatch(e)})},o(t("Error while lauching the build of the game."))).catch(function(){})}},n._download=function(e){n.state.build&&n.state.build[e]&&S.a.openExternalURL(Object(b.e)(n.state.build[e]))},n._setTarget=function(e,t){t&&-1===n.state.targets.indexOf(e)?n.setState({targets:[].concat(Object(r.a)(n.state.targets),[e])}):t||-1===n.state.targets.indexOf(e)||n.setState({targets:n.state.targets.filter(function(t){return t!==e})})},n}return Object(c.a)(t,e),Object(a.a)(t,[{key:"componentWillUnmount",value:function(){this.buildsWatcher.stop()}},{key:"render",value:function(){var e=this,t=this.state,n=t.exportStep,r=t.build,o=t.uploadMax,a=t.uploadProgress,i=t.errored,l=function(e){return e},c=this.props,u=c.project,d=c.userProfile;if(!u)return null;var m=function(e){return e.limits?e.limits["electron-build"]:null};return p.a.createElement(v.a,{noMargin:!0},p.a.createElement(v.b,null,p.a.createElement(F.a,null,l("Your game will be exported and packaged online as an stand-alone game for Windows, Linux and/or macOS."))),p.a.createElement(h.a,{label:p.a.createElement(s.Trans,{id:"Windows (zip file)"}),checked:-1!==this.state.targets.indexOf("winZip"),onCheck:function(t,n){return e._setTarget("winZip",n)}}),p.a.createElement(h.a,{label:p.a.createElement(s.Trans,{id:"Windows (auto-installer file)"}),checked:-1!==this.state.targets.indexOf("winExe"),onCheck:function(t,n){return e._setTarget("winExe",n)}}),p.a.createElement(h.a,{label:p.a.createElement(s.Trans,{id:"macOS (zip file)"}),checked:-1!==this.state.targets.indexOf("macZip"),onCheck:function(t,n){return e._setTarget("macZip",n)}}),p.a.createElement(h.a,{label:p.a.createElement(s.Trans,{id:"Linux (AppImage)"}),checked:-1!==this.state.targets.indexOf("linuxAppImage"),onCheck:function(t,n){return e._setTarget("linuxAppImage",n)}}),d.authenticated&&p.a.createElement(v.b,{justifyContent:"center"},p.a.createElement(f.a,{label:l("Export"),primary:!0,onClick:function(){return e.launchWholeExport(d)},disabled:!function(t){if(!i&&""!==n&&"build"!==n)return!1;var r=m(t);return(!r||!r.limitReached)&&!!e.state.targets.length}(d)})),d.authenticated&&p.a.createElement(P.a,{subscription:d.subscription,limit:m(d),onChangeSubscription:this.props.onChangeSubscription}),!d.authenticated&&p.a.createElement(C.a,{message:l("Create an account to build your game for Windows, Linux and macOS in one-click:"),onLogin:d.onLogin}),p.a.createElement(v.b,{expand:!0},p.a.createElement(_.a,{exportStep:n,build:r,onDownload:this._download,uploadMax:o,uploadProgress:a,errored:i,showSeeAllMyBuildsExplanation:!0})))}}]),t}(u.Component);M.prepareExporter=function(){return new Promise(function(e,t){Object(x.findGDJS)(function(n){if(!n)return Object(E.a)("Could not find GDJS"),t();console.info("GDJS found in ",n);var r=m()(new U.AbstractFileSystemJS,y.a),o=new U.Exporter(r,n),a=T.join(r.getTempDir(),"OnlineElectronExport");r.mkDir(a),r.clearDir(a),e({exporter:o,outputDir:a})})})},t.a=M}).call(this,n(3))},1791:function(e,t,n){"use strict";(function(e){var r=n(7),o=n(17),a=n(36),i=n(35),l=n(37),c=n(16),s=n.n(c),u=n(273),p=n.n(u),d=n(199),m=n(11),f=n(188),h=n(1792),g=n(38),b=n(270),v=n(281),E=n(1793),x=n(595),y=n(4),j=n.n(y),w=n(5),O=n(303),S=n(194),C=j()("path"),P=j()("electron"),k=P?P.remote.app:null,D=P?P.shell:null,_=e.gd,F=function(e){function t(){var e,n;Object(r.a)(this,t);for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];return(n=Object(a.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(l)))).state={archiveOutputFilename:k?C.join(k.getPath("documents"),"fb-instant-game.zip"):"",exportStep:"",errored:!1},n.launchExport=function(){var e=n.props.project;return e?t.prepareExporter().then(function(t){var n=t.exporter,r=t.outputDir,o=new _.MapStringBoolean;return o.set("exportForFacebookInstantGames",!0),n.exportWholePixiProject(e,r,o),o.delete(),n.delete(),r}).catch(function(e){throw Object(g.a)("Unable to export the game",e),e}):Promise.reject()},n.launchCompression=function(e){return Object(x.a)({path:e,outputFilename:n.state.archiveOutputFilename})},n.launchWholeExport=function(){var e=function(e){return e};Object(m.d)("local-facebook-instant-games");var t=function(e){return function(t){throw n.state.errored||(n.setState({errored:!0}),Object(g.a)(e,{exportStep:n.state.exportStep,rawError:t})),t}};n.setState({exportStep:"export",errored:!1}),n.launchExport().then(function(e){return n.setState({exportStep:"compress"}),n.launchCompression(e)},t(e("Error while exporting the game."))).then(function(){n.setState({exportStep:"done"})},t(e("Error while building the game."))).catch(function(){})},n.openExportFolder=function(){D&&D.openItem(C.dirname(n.state.archiveOutputFilename))},n.openLearnMore=function(){w.a.openExternalURL(Object(O.a)("/publishing/publishing-to-facebook-instant-games"))},n}return Object(l.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this,t=this.state,n=t.exportStep,r=t.errored,o=function(e){return e};return this.props.project?s.a.createElement(f.a,{noMargin:!0},s.a.createElement(f.b,null,s.a.createElement(S.a,null,o("Prepare your game for Facebook Instant Games so that it can be play on Facebook Messenger. GDevelop will create a compressed file that you can upload on your Facebook Developer account."))),s.a.createElement(f.b,null,s.a.createElement(h.a,{title:o("Facebook Instant Games export zip file"),message:o("Choose where to save the exported file for Facebook Instant Games"),filters:[{name:o("Compressed file for Facebook Instant Games"),extensions:["zip"]}],value:this.state.archiveOutputFilename,defaultPath:k?k.getPath("documents"):"",onChange:function(t){return e.setState({archiveOutputFilename:t})},fullWidth:!0})),s.a.createElement(f.b,null,s.a.createElement(f.c,{expand:!0}),s.a.createElement(d.a,{label:o("Export"),primary:!0,onClick:this.launchWholeExport,disabled:!this.state.archiveOutputFilename})),s.a.createElement(f.b,null,s.a.createElement(E.a,{exportStep:n,errored:r,onOpenExportFolder:this.openExportFolder,onOpenLearnMore:this.openLearnMore}))):null}}]),t}(c.Component);F.prepareExporter=function(){return new Promise(function(e,t){Object(b.findGDJS)(function(n){if(!n)return Object(g.a)("Could not find GDJS"),t();console.info("GDJS found in ",n);var r=p()(new _.AbstractFileSystemJS,v.a),o=new _.Exporter(r,n),a=C.join(r.getTempDir(),"FacebookInstantGamesExport");r.mkDir(a),r.clearDir(a),e({exporter:o,outputDir:a})})})},t.a=F}).call(this,n(3))},1792:function(e,t,n){"use strict";n.d(t,"a",function(){return v});var r=n(191),o=n(7),a=n(17),i=n(36),l=n(35),c=n(37),s=n(185),u=n(16),p=n.n(u),d=n(209),m=n(193),f=n(4),h=n.n(f)()("electron"),g=h?h.remote.dialog:null,b={container:{position:"relative",display:"flex",alignItems:"baseline"},button:{marginLeft:10},textField:{flex:1}},v=function(e){function t(){var e,n;Object(o.a)(this,t);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(n=Object(i.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(a)))).onChooseFolder=function(){if(g&&h){var e=h.remote.getCurrentWindow();g.showSaveDialog(e,{title:n.props.title,filters:n.props.filters,message:n.props.message,defaultPath:n.props.defaultPath},function(e){n.props.onChange(e||"")})}},n}return Object(c.a)(t,e),Object(a.a)(t,[{key:"render",value:function(){var e=this;return p.a.createElement("div",{style:Object(r.a)({},b.container,{width:this.props.fullWidth?"100%":void 0})},p.a.createElement(d.a,{style:b.textField,floatingLabelText:this.props.floatingLabelText,floatingLabelFixed:!0,type:"text",hintText:{id:"Click to choose"},value:this.props.value,onChange:function(t,n){return e.props.onChange(n)}}),p.a.createElement(m.a,{label:p.a.createElement(s.Trans,{id:"Choose"}),style:b.button,onClick:this.onChooseFolder}))}}]),t}(u.PureComponent)},1793:function(e,t,n){"use strict";var r=n(185),o=n(16),a=n(2212),i=n(2149),l=n(2208),c=n(2211),s=n(2135),u=n(199),p=n(193),d=n(194),m=n(188);t.a=function(e){var t=e.exportStep,n=e.errored,f=e.onOpenExportFolder,h=e.onOpenLearnMore;return o.createElement(a.a,{activeStep:"export"===t?0:"compress"===t?1:"done"===t?2:-1,orientation:"vertical"},o.createElement(i.a,null,o.createElement(l.a,null,o.createElement(r.Trans,{id:"Game export"})),o.createElement(c.a,null,o.createElement(m.b,{alignItems:"center"},o.createElement(s.a,{size:20}),o.createElement(m.c,null),o.createElement(d.a,null,o.createElement(r.Trans,{id:"Export in progress..."}))))),o.createElement(i.a,null,o.createElement(l.a,null,o.createElement(r.Trans,{id:"Upload to build service"})),o.createElement(c.a,null,n?o.createElement(d.a,null,o.createElement(r.Trans,{id:"Can't compress the game. Please check that you have rights to write on this computer."})):o.createElement(m.b,{alignItems:"center"},o.createElement(s.a,{size:20}),o.createElement(m.c,null),o.createElement(d.a,null,o.createElement(r.Trans,{id:"Compressing..."}))))),o.createElement(i.a,null,o.createElement(l.a,null,o.createElement(r.Trans,{id:"Export finished"})),o.createElement(c.a,null,o.createElement(m.b,{expand:!0},o.createElement(d.a,null,o.createElement(r.Trans,{id:"You can now create a game on Facebook Instant Games, if not already done, and upload the archive generated."}))),o.createElement(m.b,{expand:!0},o.createElement(p.a,{label:o.createElement(r.Trans,{id:"Open folder"}),onClick:f}),o.createElement(u.a,{label:o.createElement(r.Trans,{id:"Learn more about Instant Games publication"}),primary:!0,onClick:h})))))}},1794:function(e,t,n){"use strict";(function(e){var r=n(7),o=n(17),a=n(36),i=n(35),l=n(37),c=n(185),s=n(16),u=n.n(s),p=n(198),d=n(193),m=n(199),f=n(11),h=n(188),g=n(38),b=n(270),v=n(281),E=n(340),x=n(217),y=n(358),j=n(273),w=n.n(j),O=n(4),S=n.n(O),C=n(194),P=S()("electron"),k=P?P.shell:null,D=e.gd,_=function(e){function t(){var e,n;Object(r.a)(this,t);for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];return(n=Object(a.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(l)))).state={exportFinishedDialogOpen:!1,outputDir:""},n.launchExport=function(){var e=function(e){return e},r=n.props.project;if(r&&(Object(f.d)("local-electron"),Object(y.a)(e,Object(y.b)(e,r)))){var o=n.state.outputDir;r.setLastCompilationDirectory(o),t.prepareExporter().then(function(e){var t=e.exporter,a=new D.MapStringBoolean;a.set("exportForElectron",!0),t.exportWholePixiProject(r,o,a),a.delete(),t.delete(),n.setState({exportFinishedDialogOpen:!0})}).catch(function(e){Object(g.a)("Unable to export the game",e)})}},n.openExportFolder=function(){k&&k.openItem(n.state.outputDir)},n}return Object(l.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.project;this.setState({outputDir:e?e.getLastCompilationDirectory():""})}},{key:"render",value:function(){var e,t=this,n=this.props.project;return n?u.a.createElement(h.a,{noMargin:!0},u.a.createElement(h.b,null,u.a.createElement(h.a,{noMargin:!0},u.a.createElement(C.a,null,u.a.createElement(c.Trans,{id:"This will export your game so that you can package it for Windows, macOS or Linux. You will need to install third-party tools (Node.js, Electron Builder) to package your game by yourself."})))),u.a.createElement(h.b,null,u.a.createElement(E.a,{type:"export",value:this.state.outputDir,defaultPath:n.getLastCompilationDirectory(),onChange:function(e){return t.setState({outputDir:e})},fullWidth:!0})),u.a.createElement(h.b,null,u.a.createElement(h.c,{expand:!0}),u.a.createElement(m.a,{label:u.a.createElement(c.Trans,{id:"Export"}),primary:!0,onClick:this.launchExport,disabled:!this.state.outputDir})),u.a.createElement(p.a,{title:(e="Export finished",e),actions:[u.a.createElement(d.a,{key:"open",label:u.a.createElement(c.Trans,{id:"Open folder"}),primary:!0,onClick:this.openExportFolder}),u.a.createElement(d.a,{key:"close",label:u.a.createElement(c.Trans,{id:"Close"}),primary:!1,onClick:function(){return t.setState({exportFinishedDialogOpen:!1})}})],secondaryActions:u.a.createElement(x.a,{key:"help",helpPagePath:"/publishing"}),modal:!0,open:this.state.exportFinishedDialogOpen},u.a.createElement(C.a,null,u.a.createElement(c.Trans,{id:"The game was properly exported. You can now use Electron Builder (you need Node.js installed and to use the command-line to run it) to create an executable."})))):null}}]),t}(s.Component);_.prepareExporter=function(){return new Promise(function(e,t){Object(b.findGDJS)(function(n){if(!n)return Object(g.a)("Could not find GDJS"),t();console.info("GDJS found in ",n);var r=w()(new D.AbstractFileSystemJS,v.a),o=new D.Exporter(r,n);e({exporter:o})})})},t.a=_}).call(this,n(3))},1795:function(e,t,n){"use strict";var r=n(7),o=n(17),a=n(36),i=n(35),l=n(37),c=n(16),s=(n(468),n(4)),u=n.n(s),p=n(42),d=u()("electron"),m=d?d.ipcRenderer:null,f=function(e){function t(){return Object(r.a)(this,t),Object(a.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;m&&(m.on("main-menu-open",function(t){return e._editor&&e._editor.chooseProject()}),m.on("main-menu-save",function(t){return e._editor&&e._editor.save()}),m.on("main-menu-save-as",function(t){return e._editor&&e._editor.saveAs()}),m.on("main-menu-close",function(t){return e._editor&&e._editor.askToCloseProject(function(){})}),m.on("main-menu-export",function(t){return e._editor&&e._editor.openExportDialog()}),m.on("main-menu-create",function(t){return e._editor&&e._editor.openCreateDialog()}),m.on("main-menu-open-project-manager",function(t){return e._editor&&e._editor.openProjectManager()}),m.on("main-menu-open-start-page",function(t){return e._editor&&e._editor.openStartPage()}),m.on("main-menu-open-debugger",function(t){return e._editor&&e._editor.openDebugger()}),m.on("main-menu-open-about",function(t){return e._editor&&e._editor.openAboutDialog()}),m.on("main-menu-open-preferences",function(t){return e._editor&&e._editor.openPreferences()}),m.on("main-menu-open-language",function(t){return e._editor&&e._editor.openLanguage()}),m.on("main-menu-open-profile",function(t){return e._editor&&e._editor.openProfile()}),m.on("update-status",function(t,n){return e._editor&&e._editor.setUpdateStatus(n)}))}},{key:"componentDidUpdate",value:function(){this.props.i18n.language!==this._language&&(this._buildAndSendMenuTemplate(),this._language=this.props.i18n.language)}},{key:"_buildAndSendMenuTemplate",value:function(){var e=this.props.i18n,t={label:e._({id:"File"}),submenu:[{label:e._({id:"Create a New Project..."}),accelerator:"CommandOrControl+N",onClickSendEvent:"main-menu-create"},{type:"separator"},{label:e._({id:"Open..."}),accelerator:"CommandOrControl+O",onClickSendEvent:"main-menu-open"},{type:"separator"},{label:e._({id:"Save"}),accelerator:"CommandOrControl+S",onClickSendEvent:"main-menu-save"},{label:e._({id:"Save as..."}),accelerator:"CommandOrControl+Alt+S",onClickSendEvent:"main-menu-save-as"},{type:"separator"},{label:e._({id:"Export (web, iOS, Android)..."}),onClickSendEvent:"main-menu-export"},{type:"separator"},{label:e._({id:"Close Project"}),accelerator:"CommandOrControl+Shift+W",onClickSendEvent:"main-menu-close"}]};Object(p.a)()||t.submenu.push({type:"separator"},{label:e._({id:"My Profile"}),onClickSendEvent:"main-menu-open-profile"},{label:e._({id:"Preferences"}),onClickSendEvent:"main-menu-open-preferences"},{label:e._({id:"Language"}),onClickSendEvent:"main-menu-open-language"});var n={label:e._({id:"Edit"}),submenu:[{role:"undo"},{role:"redo"},{type:"separator"},{role:"cut"},{role:"copy"},{role:"paste"},{role:"pasteandmatchstyle"},{role:"delete"},{role:"selectall"}]},r={label:e._({id:"View"}),submenu:[{label:e._({id:"Show Project Manager"}),accelerator:"CommandOrControl+Alt+P",onClickSendEvent:"main-menu-open-project-manager"},{label:e._({id:"Show Start Page"}),onClickSendEvent:"main-menu-open-start-page"},{label:e._({id:"Open Debugger"}),onClickSendEvent:"main-menu-open-debugger"},{type:"separator"},{role:"toggledevtools"},{type:"separator"},{role:"togglefullscreen"}]},o={role:"window",submenu:[{role:"minimize"}]},a={role:"help",submenu:[{label:e._({id:"GDevelop website"}),onClickOpenLink:"http://gdevelop-app.com"},{type:"separator"},{label:e._({id:"Community Forums"}),onClickOpenLink:"https://forum.gdevelop-app.com"},{label:e._({id:"Community Discord Chat"}),onClickOpenLink:"https://discord.gg/rjdYHvj"},{type:"separator"},{label:e._({id:"Contribute to GDevelop"}),onClickOpenLink:"https://gdevelop-app.com/contribute/"},{label:e._({id:"Create Extensions for GDevelop"}),onClickOpenLink:"https://github.com/4ian/GDevelop/blob/master/newIDE/README-extensions.md"},{type:"separator"},{label:e._({id:"Help to Translate GDevelop"}),onClickOpenLink:"https://crowdin.com/project/gdevelop"},{label:e._({id:"Report a wrong translation"}),onClickOpenLink:"https://github.com/4ian/GDevelop/issues/969"}]};Object(p.a)()||a.submenu.push({type:"separator"},{label:e._({id:"About GDevelop"}),onClickSendEvent:"main-menu-open-about"});var i=[t,n,r,o,a];Object(p.a)()&&(i.unshift({label:e._({id:"GDevelop 5"}),submenu:[{label:e._({id:"About GDevelop"}),onClickSendEvent:"main-menu-open-about"},{type:"separator"},{label:e._({id:"My Profile"}),onClickSendEvent:"main-menu-open-profile"},{label:e._({id:"Preferences"}),onClickSendEvent:"main-menu-open-preferences"},{label:e._({id:"Language"}),onClickSendEvent:"main-menu-open-language"},{type:"separator"},{role:"services",submenu:[]},{type:"separator"},{role:"hide"},{role:"hideothers"},{role:"unhide"},{type:"separator"},{role:"quit"}]}),n.submenu.push({type:"separator"},{label:e._({id:"Speech"}),submenu:[{role:"startspeaking"},{role:"stopspeaking"}]}),o.submenu=[{role:"minimize"},{role:"zoom"},{type:"separator"},{role:"front"}]),m&&m.send("set-main-menu",i)}},{key:"render",value:function(){var e=this;return c.cloneElement(this.props.children,{ref:function(t){return e._editor=t}})}}]),t}(c.Component);t.a=f},1796:function(e,t,n){var r=n(881).loadExtension,o=n(4),a=n(1797).findJsExtensionModules;e.exports=function(e){var t=e.gd,n=e.objectsEditorService,i=e.objectsRenderingService,l=e.filterExamples;return{loadAllExtensions:function(e){return a({filterExamples:l}).then(function(a){return Promise.all(a.map(function(a){var l=null;try{l=o(a,{rethrowException:!0})}catch(c){return{extensionModulePath:a,result:{message:"Unable to import extension. Please check for any syntax error or error that would prevent it from being run.",error:!0,rawError:c}}}return l?(n&&l.registerEditorConfigurations&&l.registerEditorConfigurations(n),i&&l.registerInstanceRenderers&&l.registerInstanceRenderers(i),{extensionModulePath:a,result:r(e,t,t.JsPlatform.get(),l)}):{extensionModulePath:a,result:{error:!0,message:"Unknown error. Please check for any syntax error or error that would prevent it from being run."}}}))},function(e){throw console.error("Unable to find JS extensions modules"),e})}}}},1797:function(e,t,n){var r=n(270).findGDJS,o=n(4),a=o("path"),i=o("fs");e.exports={findJsExtensionModules:function(e){var t=e.filterExamples;return new Promise(function(e,n){r(function(r){if(!r)return n();var o=a.join(r,"Runtime","Extensions");console.info("Searching for JS extensions (file called JsExtension.js) in ".concat(o,"...")),i.readdir(o,function(r,l){if(r)return n(r);var c=l.filter(function(e){return!t||-1===e.indexOf("Example")});Promise.all(c.map(function(e){return t=a.join(o,e),new Promise(function(e){var n=a.join(t,"JsExtension.js");i.stat(n,function(t,r){return e(t?null:r.isFile()?n:null)})});var t})).then(function(t){e(t.filter(function(e){return!!e}))},n)})})})}}},1798:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r=n(4),o=n.n(r),a=n(431),i=n.n(a),l=o()("os"),c=o()("fs"),s=function(){var e=l.tmpdir()+"/GDGeneratedEventsFunctions";c.mkdir(e,function(e){e&&"EEXIST"!==e.code&&console.error("Unable to create the directory where to output events functions generated code: ",e)});var t=function(t){return"".concat(e,"/").concat(i()(t),".js")};return{getIncludeFileFor:function(e){return t(e)},writeFunctionCode:function(e,n){return new Promise(function(r,o){var a=t(e);c.writeFile(a,n,function(e){if(e)return o(e);r()})})},writeBehaviorCode:function(e,n){return new Promise(function(r,o){var a=t(e);c.writeFile(a,n,function(e){if(e)return o(e);r()})})}}}},1801:function(e,t,n){"use strict";n.d(t,"a",function(){return p});var r=n(7),o=n(226),a=n(4),i=n.n(a),l=i()("fs-extra"),c=i()("path"),s=i()("electron"),u=s?s.remote.dialog:null,p=function e(){Object(r.a)(this,e)};p.chooseEventsFunctionExtensionFile=function(){return new Promise(function(e,t){if(!u)return t("Not supported");var n=s.remote.getCurrentWindow();u.showSaveDialog(n,{title:"Export an extension of the project",filters:[{name:'GDevelop 5 "events based" extension',extensions:["json"]}],defaultPath:"Extension.json"},function(t){return e(t||null)})})},p.writeEventsFunctionsExtension=function(e,t){return function(e,t){if(!l)return Promise.reject(new Error("Filesystem is not supported."));try{var n=JSON.stringify(e,null,2);return l.ensureDir(c.dirname(t)).then(function(){return new Promise(function(e,r){l.writeFile(t,n,function(t){return t?r(t):e()})})})}catch(r){return Promise.reject(r)}}(Object(o.a)(e),t).catch(function(e){throw console.error("Unable to write the events function extension:",e),e})}},1802:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r=n(7),o=n(4),a=n.n(o),i=a()("fs"),l=a()("electron"),c=l?l.remote.dialog:null,s=function e(){Object(r.a)(this,e)};s.chooseEventsFunctionExtensionFile=function(){return new Promise(function(e,t){if(!c)return t("Not supported");var n=l.remote.getCurrentWindow();c.showOpenDialog(n,{title:"Import an extension in the project",properties:["openFile"],message:"Choose an extension file to import (.json file)",filters:[{name:'GDevelop 5 "events based" extension',extensions:["json"]}]},function(t){return t&&t.length?e(t[0]):e(null)})})},s.readEventsFunctionExtensionFile=function(e){return function(e){return i?new Promise(function(t,n){i.readFile(e,{encoding:"utf8"},function(r,o){if(r)return n(r);try{var a=JSON.parse(o);return t(a)}catch(i){return n(e+" is a corrupted/malformed file.")}})}):Promise.reject("Filesystem is not supported.")}(e)}},183:function(e,t,n){"use strict";n.r(t),function(e){n.d(t,"create",function(){return k});var r=n(16),o=n.n(r),a=n(468),i=n(5),l=n(891),c=n(897),s=(n(21),n(76),n(1761)),u=n(868),p=n(1765),d=n(1766),m=n(1767),f=n(1771),h=n(1780),g=n(1781),b=n(1784),v=n(1795),E=n(1796),x=n.n(E),y=n(1798),j=n(455),w=n(289),O=n(887),S=n(1801),C=n(1802),P=e.gd,k=function(e){i.a.setUpContextMenu();var t=i.a.getArguments();return t["server-port"]?o.a.createElement(O.a,{authentification:e,disableCheckForUpdates:!!t["disable-update-check"],eventsFunctionCodeWriter:null,eventsFunctionsExtensionWriter:null,eventsFunctionsExtensionOpener:null},function(n){var r=n.i18n,i=n.eventsFunctionsExtensionsState;return o.a.createElement(s.a,{serverPort:t["server-port"],isIntegrated:"integrated"===t.mode,editor:t.editor,editedElementName:t["edited-element-name"]},o.a.createElement(a.a,{i18n:r,eventsFunctionsExtensionsState:i,resourceSources:d.a,authentification:e,onReadFromPathOrURL:function(){return Promise.reject("Should never be called")},resourceExternalEditors:m.a,initialPathsOrURLsToOpen:[]}))}):o.a.createElement(O.a,{authentification:e,disableCheckForUpdates:!!t["disable-update-check"],eventsFunctionCodeWriter:Object(y.a)(),eventsFunctionsExtensionWriter:S.a,eventsFunctionsExtensionOpener:C.a},function(n){var r=n.i18n,s=n.eventsFunctionsExtensionsState;return o.a.createElement(v.a,{i18n:r},o.a.createElement(a.a,{i18n:r,eventsFunctionsExtensionsState:s,previewLauncher:o.a.createElement(g.a,null),renderExportDialog:function(e){return o.a.createElement(l.a,Object.assign({},e,{exporters:Object(b.a)()}))},createDialog:o.a.createElement(c.a,{examplesComponent:u.a,startersComponent:p.a}),onSaveProject:f.a.saveProject,onSaveProjectAs:f.a.saveProjectAs,onAutoSaveProject:f.a.autoSaveProject,onChooseProject:h.a.chooseProjectFile,onReadFromPathOrURL:h.a.readProjectFile,shouldOpenAutosave:h.a.shouldOpenAutosave,resourceSources:d.a,resourceExternalEditors:m.a,authentification:e,extensionsLoader:x()({gd:P,objectsEditorService:j.a,objectsRenderingService:w.a,filterExamples:!i.a.isDev()}),initialPathsOrURLsToOpen:t._}))})}}.call(this,n(3))},281:function(e,t,n){"use strict";(function(e){var r=n(4),o=n.n(r),a=o()("fs-extra"),i=o()("path"),l=o()("os"),c=e.gd;t.a={mkDir:function(e){try{a.mkdirsSync(e)}catch(t){return console.log("mkDir("+e+") failed: "+t),!1}return!0},dirExists:function(e){return a.existsSync(e)},clearDir:function(e){var t=this;a.existsSync(e)&&a.readdirSync(e).forEach(function(n){var r=e+"/"+n;a.lstatSync(r).isDirectory()?t.clearDir(r):a.unlinkSync(r)})},getTempDir:function(){return l.tmpdir()},fileNameFrom:function(e){return this._isExternalURL(e)?e:(e=this._translateURL(e),i.basename(e))},dirNameFrom:function(e){return this._isExternalURL(e)?"":(e=this._translateURL(e),i.dirname(e))},makeAbsolute:function(e,t){return this._isExternalURL(e)?e:(e=this._translateURL(e),this.isAbsolute(t)||(t=i.resolve(t)),i.resolve(t,i.normalize(e)))},makeRelative:function(e,t){return this._isExternalURL(e)?e:(e=this._translateURL(e),i.relative(t,i.normalize(e)))},isAbsolute:function(e){return!!this._isExternalURL(e)||(0===e.length||((e=this._translateURL(e)).length>0&&"/"===e.charAt(0)||e.length>1&&":"===e.charAt(1)))},copyFile:function(e,t){if(this._isExternalURL(e))return!0;e=this._translateURL(e);try{e!==t&&a.copySync(e,t)}catch(n){return console.log("copyFile("+e+", "+t+") failed: "+n),!1}return!0},copyDir:function(e,t){throw new Error("copyDir was never tested, please check that it does what you want to.")},writeToFile:function(e,t){try{a.outputFileSync(e,t)}catch(n){return console.log("writeToFile("+e+", ...) failed: "+n),!1}return!0},readFile:function(e){try{return a.readFileSync(e).toString()}catch(t){return console.log("readFile("+e+") failed: "+t),""}},readDir:function(e,t){t=t.toUpperCase();var n=new c.VectorString;try{a.existsSync(e)&&a.readdirSync(e).forEach(function(r){0!==t.length&&-1===r.toUpperCase().indexOf(t,r.length-t.length)||n.push_back(e+"/"+r)})}catch(r){console.log("readDir("+e+","+t+") failed: "+r)}return n},fileExists:function(e){e=this._translateURL(e);try{return a.statSync(e).isFile()}catch(t){return!1}},_isExternalURL:function(e){return"http"===e.substr(0,4)||"ftp"===e.substr(0,4)},_translateURL:function(e){return"g/"!==e.substr(0,2)&&"g\\"!==e.substr(0,2)||(e=e.substr(2)),e}}}).call(this,n(3))},340:function(e,t,n){"use strict";n.d(t,"a",function(){return v});var r=n(191),o=n(7),a=n(17),i=n(36),l=n(35),c=n(37),s=n(185),u=n(16),p=n.n(u),d=n(209),m=n(193),f=n(4),h=n.n(f)()("electron"),g=h?h.remote.dialog:null,b={container:{position:"relative",display:"flex",alignItems:"baseline"},button:{marginLeft:10},textField:{flex:1}},v=function(e){function t(){var e,n;Object(o.a)(this,t);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(n=Object(i.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(a))))._onChooseFolder=function(e){var t=e.title,r=e.message;if(g&&h){var o=h.remote.getCurrentWindow();g.showOpenDialog(o,{title:t,properties:["openDirectory","createDirectory"],message:r,defaultPath:n.props.defaultPath},function(e){e&&e.length&&n.props.onChange(e[0])})}},n._getTitleAndMessage=function(e){var t=n.props.type;return"export"===t?{title:e._({id:"Choose an export folder"}),message:e._({id:"Choose where to export the game"})}:"create-game"===t?{title:e._({id:"Choose a folder for the new game"}),message:e._({id:"Choose where to create the game"})}:{title:void 0,message:void 0}},n}return Object(c.a)(t,e),Object(a.a)(t,[{key:"render",value:function(){var e=this;return p.a.createElement(s.I18n,null,function(t){var n=t.i18n;return p.a.createElement("div",{style:Object(r.a)({},b.container,{width:e.props.fullWidth?"100%":void 0})},p.a.createElement(d.a,{style:b.textField,floatingLabelText:e.props.floatingLabelText,floatingLabelFixed:!0,type:"text",hintText:{id:"Click to choose"},value:e.props.value,onChange:function(t,n){return e.props.onChange(n)}}),p.a.createElement(m.a,{label:p.a.createElement(s.Trans,{id:"Choose folder"}),style:b.button,onClick:function(){return e._onChooseFolder(e._getTitleAndMessage(n))}}))})}}]),t}(u.PureComponent)},595:function(e,t,n){"use strict";n.d(t,"a",function(){return l});var r=n(4),o=n.n(r),a=o()("fs"),i=o()("archiver"),l=function(e){var t=e.path,n=e.outputFilename;return new Promise(function(e,r){if(!a||!i)return r(new Error("Archiver unavailable"));var o=a.createWriteStream(n),l=i("zip",{zlib:{level:9}});o.on("close",function(){console.log("Archive written at ".concat(n,", ").concat(l.pointer()," total bytes.")),e(n)}),l.on("error",function(e){r(e)}),l.pipe(o),l.directory(t,!1),l.finalize()})}},868:function(e,t,n){"use strict";n.d(t,"b",function(){return C}),n.d(t,"a",function(){return P});var r=n(7),o=n(17),a=n(36),i=n(35),l=n(37),c=n(185),s=n(16),u=n.n(s),p=n(2121),d=n(340),m=n(194),f=n(11),h=n(188),g=n(869),b=n(4),v=n.n(b),E=n(870),x=n(896),y=n(38),j=v()("path"),w=v()("electron"),O=w?w.remote.app:null,S=v()("fs-extra"),C=function(e,t,n){Object(y.c)(e._({id:"Unable to create the game in the specified folder. Check that you have permissions to write in this folder: {outputPath} or choose another folder.",values:{outputPath:t}}),n)},P=function(e){function t(){var e,n;Object(r.a)(this,t);for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];return(n=Object(a.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(l)))).state={outputPath:Object(E.a)(j&&O?j.join(O.getPath("documents"),"GDevelop projects"):""),exampleNames:null},n._handleChangePath=function(e){return n.setState({outputPath:e})},n.createFromExample=function(e,t){var r=n.state.outputPath;S&&r&&Object(g.a)(function(o){try{S.mkdirsSync(r),S.copySync(j.join(o,t),r)}catch(a){return void C(e,r,a)}n.props.onOpen(j.join(r,t+".json")),Object(f.h)(t)})},n}return Object(l.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;Object(g.a)(function(t){S.readdir(t,function(t,n){t?console.error("Unable to read examples:",t):e.setState({exampleNames:n.filter(function(e){return".DS_Store"!==e})},function(){return e.props.onExamplesLoaded()})})})}},{key:"render",value:function(){var e=this;return u.a.createElement(c.I18n,null,function(t){var n=t.i18n;return u.a.createElement(h.a,{noMargin:!0},u.a.createElement(h.b,null,u.a.createElement(h.a,null,u.a.createElement(m.a,null,u.a.createElement(c.Trans,{id:"Choose or search for an example to open:"})))),u.a.createElement(h.b,null,u.a.createElement(x.a,{exampleNames:e.state.exampleNames,onCreateFromExample:function(t){return e.createFromExample(n,t)}})),u.a.createElement(p.a,null),u.a.createElement(h.b,{expand:!0},u.a.createElement(h.a,{expand:!0},u.a.createElement(d.a,{fullWidth:!0,value:e.state.outputPath,onChange:e._handleChangePath,type:"create-game"}))))})}}]),t}(s.Component)},869:function(e,t,n){"use strict";n.d(t,"a",function(){return p});var r=n(4),o=n.n(r),a=o()("electron"),i=o()("path"),l=a?a.remote.app:null,c=o()("fs"),s=o()("process"),u=function(e,t,n){return c.access(e,c.constants.R_OK,function(r){r?n():t(e)})},p=function(e){if(!s||!c)return"";var t=l?l.getAppPath():s.cwd();u(i.join(t,"..","examples"),e,function(){u(i.join(t,"..","..","app","resources","examples"),e,function(){e(null)})})}},870:function(e,t,n){"use strict";n.d(t,"a",function(){return c});var r=n(244),o=n(4),a=n.n(o),i=a()("path"),l=a()("fs-extra"),c=function(e){if(!i)return e;var t=Object(r.a)("My project",function(t){try{l.accessSync(i.join(e,t))}catch(n){return!1}return!0});return i.join(e,t)}},871:function(e,t,n){"use strict";n.d(t,"b",function(){return l}),n.d(t,"d",function(){return c}),n.d(t,"c",function(){return s}),n.d(t,"a",function(){return u});var r=n(208),o=n(244),a=n(431),i=n.n(a),l=function(e,t){var n=t.pathSeparator,o=t.getArrayItemReferenceName,a=t.shouldSplit,i=t.isReferenceMagicPropertyName,l=[],c=function(e,t){var n;return l.push({reference:e,object:t}),n={},Object(r.a)(n,i,!0),Object(r.a)(n,"referenceTo",e),n};return function e(t,r,i){if(null!==t&&"object"===typeof t)if(Array.isArray(t))for(var l in t){var s=r+n+"*";if(a(s)){var u=t[l],p=o(u,i),d=i+n+p;t[l]=c(d,u),e(u,s,d)}else{var m=i+n+l;e(t[l],s,m)}}else for(var f in t){var h=r+n+f,g=i+n+f;if(a(h)){var b=t[f];t[f]=c(g,b),e(b,h,g)}else e(t[f],h,g)}}(e,"",""),l},c=function(e,t){var n=t.isReferenceMagicPropertyName,r=t.getReferencePartialObject,o=t.maxUnsplitDepth;return function e(t,a){if(void 0!==o&&a>=o)return Promise.resolve();if(null!==t&&"object"===typeof t){var i=Object.keys(t);if(i)return Promise.all(i.map(function(o){var i,l=!0===(i=t[o])[n]?i:null;return l?r(l.referenceTo).then(function(n){return t[o]=n,e(t[o],a+1)}):e(t[o],a+1)})).then(function(){})}return Promise.resolve()}(e,0)},s=function(e){return function(t){return e.has(t)}},u=function(e){var t={};return function(n,r){var a=n[e];if("string"!==typeof a)throw new Error("Property ".concat(e," is not a string"));t[r]=t[r]||{};var l=Object(o.a)(i()(a),function(e){return!!t[r][e]});return t[r][l]=!0,l}}},872:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return F});var r=n(7),o=n(17),a=n(36),i=n(35),l=n(37),c=n(185),s=n(16),u=n.n(s),p=n(198),d=n(193),m=n(199),f=n(11),h=n(188),g=n(38),b=n(270),v=n(281),E=n(340),x=n(273),y=n.n(x),j=n(4),w=n.n(j),O=n(5),S=n(303),C=n(285),P=n(194),k=w()("electron"),D=k?k.shell:null,_=e.gd,F=function(e){function t(){var e,n;Object(r.a)(this,t);for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];return(n=Object(a.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(l)))).state={exportFinishedDialogOpen:!1,outputDir:""},n.launchExport=function(){var e=n.props.project;if(e){Object(f.d)("local");var r=n.state.outputDir;e.setLastCompilationDirectory(r),t.prepareExporter().then(function(t){var o=t.exporter,a=new _.MapStringBoolean;o.exportWholePixiProject(e,r,a),a.delete(),o.delete(),n.setState({exportFinishedDialogOpen:!0})}).catch(function(e){Object(g.a)("Unable to export the game",e)})}},n.openExportFolder=function(){D&&D.openItem(n.state.outputDir)},n}return Object(l.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.project;this.setState({outputDir:e?e.getLastCompilationDirectory():""})}},{key:"render",value:function(){var e=this,t=this.props.project;return t?u.a.createElement(h.a,{noMargin:!0},u.a.createElement(h.b,null,u.a.createElement(P.a,null,u.a.createElement(c.Trans,{id:"This will export your game to a folder that you can then upload on a website or on game hosting like itch.io."}))),u.a.createElement(h.b,null,u.a.createElement(E.a,{type:"export",value:this.state.outputDir,defaultPath:t.getLastCompilationDirectory(),onChange:function(t){return e.setState({outputDir:t})},fullWidth:!0})),u.a.createElement(h.b,null,u.a.createElement(h.c,{expand:!0}),u.a.createElement(m.a,{label:u.a.createElement(c.Trans,{id:"Export"}),primary:!0,onClick:this.launchExport,disabled:!this.state.outputDir})),u.a.createElement(p.a,{title:u.a.createElement(c.Trans,{id:"Export finished"}),actions:[u.a.createElement(d.a,{key:"open",label:u.a.createElement(c.Trans,{id:"Open folder"}),primary:!0,onClick:this.openExportFolder}),u.a.createElement(d.a,{key:"close",label:u.a.createElement(c.Trans,{id:"Close"}),primary:!1,onClick:function(){return e.setState({exportFinishedDialogOpen:!1})}})],modal:!0,open:this.state.exportFinishedDialogOpen},u.a.createElement(P.a,null,u.a.createElement(c.Trans,{id:"You can now upload the game to a web hosting to play to the game."})),u.a.createElement(C.a,{kind:"warning"},u.a.createElement(c.Trans,{id:"Your game won't work if you open index.html on your computer. You must upload it to a web hosting (Kongregate, Itch.io, etc...) or a web server to run it."})),u.a.createElement(h.c,null),u.a.createElement(m.a,{fullWidth:!0,primary:!0,onClick:function(){return O.a.openExternalURL(Object(S.a)("/publishing/publishing-to-gamejolt-store"))},label:u.a.createElement(c.Trans,{id:"Publish your game on Game Jolt"})}),u.a.createElement(m.a,{fullWidth:!0,primary:!0,onClick:function(){return O.a.openExternalURL(Object(S.a)("/publishing/publishing-to-kongregate-store"))},label:u.a.createElement(c.Trans,{id:"Publish your game on Kongregate"})}),u.a.createElement(m.a,{fullWidth:!0,primary:!0,onClick:function(){return O.a.openExternalURL(Object(S.a)("/publishing/publishing-to-itch-io"))},label:u.a.createElement(c.Trans,{id:"Publish your game on Itch.io"})}),u.a.createElement(d.a,{fullWidth:!0,onClick:function(){return O.a.openExternalURL(Object(S.a)("/publishing"))},label:u.a.createElement(c.Trans,{id:"Learn more about publishing"})}))):null}}]),t}(s.Component);F.prepareExporter=function(){return new Promise(function(e,t){Object(b.findGDJS)(function(n){if(!n)return Object(g.a)("Could not find GDJS"),t();console.info("GDJS found in ",n);var r=y()(new _.AbstractFileSystemJS,v.a),o=new _.Exporter(r,n);e({exporter:o})})})}}).call(this,n(3))},873:function(e,t,n){"use strict";var r=n(185),o=n(16),a=n(199),i=n(188),l=n(251),c=n(194);t.a=function(e){var t=e.subscription,n=e.limit,s=e.onChangeSubscription;if(!n)return o.createElement(l.a,null);var u=t&&!!t.planId,p=t&&!t.planId;return o.createElement(i.a,{noMargin:!0},o.createElement(c.a,null,o.createElement(r.Trans,{id:"You have {0} remaining builds for today (out of {1}).",values:{0:Math.max(n.max-n.current,0),1:n.max}})),u&&n.limitReached&&o.createElement(c.a,null,o.createElement(r.Trans,{id:"Need more power? You can upgrade to a new plan to increase the limit!"})),u&&n.limitReached&&o.createElement(i.b,{justifyContent:"center",alignItems:"center"},o.createElement(a.a,{label:o.createElement(r.Trans,{id:"Upgrade my account"}),onClick:s,primary:!0})),p&&o.createElement(c.a,null,o.createElement(r.Trans,{id:"You don't have a subscription. Get one to increase the limits!"})),p&&o.createElement(i.b,{justifyContent:"center",alignItems:"center"},o.createElement(a.a,{label:o.createElement(r.Trans,{id:"Get a subscription"}),onClick:s,primary:!0})))}},874:function(e,t,n){"use strict";var r=n(185),o=n(16),a=n(2212),i=n(2149),l=n(2208),c=n(2211),s=n(2135),u=n(2144),p=n(188),d=n(867),m=n(202),f=n(194),h={stepper:{flex:1},linearProgress:{flex:1}};t.a=function(e){var t=e.exportStep,n=e.onDownload,g=e.build,b=e.uploadMax,v=e.uploadProgress,E=e.errored,x=e.showSeeAllMyBuildsExplanation;return o.createElement(a.a,{activeStep:"export"===t?0:"compress"===t||"upload"===t?1:"waiting-for-build"===t||"build"===t?2:-1,orientation:"vertical",style:h.stepper},o.createElement(i.a,null,o.createElement(l.a,null,o.createElement(r.Trans,{id:"Game export"})),o.createElement(c.a,null,o.createElement(p.b,{alignItems:"center"},o.createElement(s.a,{size:20}),o.createElement(p.c,null),o.createElement(f.a,null,o.createElement(r.Trans,{id:"Export in progress..."}))))),o.createElement(i.a,null,o.createElement(l.a,null,o.createElement(r.Trans,{id:"Upload to build service"})),o.createElement(c.a,null,E?o.createElement(f.a,null,o.createElement(r.Trans,{id:"Can't upload your game to the build service. Please check your internet connection or try again later."})):"compress"===t?o.createElement(p.b,{alignItems:"center"},o.createElement(s.a,{size:20}),o.createElement(p.c,null),o.createElement(f.a,null,o.createElement(r.Trans,{id:"Compressing before upload..."}))):o.createElement(p.b,{alignItems:"center",expand:!0},o.createElement(u.a,{style:h.linearProgress,value:b>0?v/b*100:0,variant:"determinate"})))),o.createElement(i.a,null,o.createElement(l.a,null,o.createElement(r.Trans,{id:"Build and download"})),o.createElement(c.a,null,E&&o.createElement(f.a,null,o.createElement(r.Trans,{id:"Build could not start or errored. Please check your internet connection or try again later."})),!g&&!E&&o.createElement(f.a,null,o.createElement(r.Trans,{id:"Build is starting..."})),g&&o.createElement(d.a,{build:g,onDownload:n}),x&&o.createElement(m.a,null,o.createElement(r.Trans,{id:"If you close this window while the build is being done, you can see its progress and download the game later by clicking on See All My Builds below."})))))}}}]);
//# sourceMappingURL=local-app.b0804e63.chunk.js.map